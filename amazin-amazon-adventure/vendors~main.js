(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"d",(function(){return s})),i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return h}));var n=i(14),r=i.n(n),o=i(20).a.add(Array,"Array",null,null,!1,r.a.dev);function s(t){for(var e=0;e<(arguments.length<=1?0:arguments.length-1);e++){var i=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];if(i&&i.length)for(var n=0;n<i.length;n++)-1===t.indexOf(i[n])&&t.push(i[n])}return t}function a(t){for(var e=o.setUp(),i=t.length,n=0;n<i;n++)e[n]=t[n];return e}function h(t,e){var i=t[e],n=t.length;if(e<0||e>=n)return null;for(var r=e+1;r<n;r++)t[r-1]=t[r];return n&&(t.length-=1),i}},function(t,e,i){"use strict";(function(t){var n=i(180),r=i(33),o=i(102),s=i(14),a=i.n(s),h=i(4),u=i(78),l=i(181),c=i(182),f=i(183),d=i(184),p=i(104),g=i(185),v=i(186),m=i(187),y=i(188),b=i(189),_=i(190),w=i(191),x=i(192),E=i(193),T=i(194),S=i(195),A=i(196),P=i(197),C=i(198),M=i(199),O=i(200),I=i(201),k=i(202),R=i(203),L=i(204),D=i(205),F=i(206),N=i(207),U=i(208),B=i(209),j=i(210),X=i(211),V=i(212),z=i(213),Y=i(214),W=i(215),G=i(216),H=i(217),q=i(218),Z=i(219),K=i(220),J=i(221),Q=i(222),$=i(223),tt=i(224),et=i(225),it=i(226),nt=i(227),rt=i(228),ot=i(229),st=i(230),at=i(231),ht=i(232),ut=i(233),lt=i(234),ct=i(79),ft=i(50),dt=i(235),pt=i(236),gt=i(237),vt=i(238),mt=i(106),yt=i(239),bt=i(240),_t=i(241),wt=i(242),xt=i(243),Et=i(244),Tt=i(245),St=i(246),At=i(247),Pt=i(0);i.d(e,"j",(function(){return Pt.a})),i.d(e,"m",(function(){return Pt.b})),i.d(e,"n",(function(){return Pt.c})),i.d(e,"o",(function(){return Pt.d}));i(41),i(20);var Ct=i(12);i.d(e,"a",(function(){return Ct.a}));i(85);i.d(e,"b",(function(){return r.a}));i(49),i(86),i(101);var Mt=i(70);i.d(e,"c",(function(){return Mt.a}));i(100);var Ot=i(7);i.d(e,"d",(function(){return Ot.a}));var It=i(21);i.d(e,"e",(function(){return It.a}));var kt=i(23);i.d(e,"f",(function(){return kt.a})),i.d(e,"g",(function(){return o.a}));i(40),i(55);var Rt=i(27);i.d(e,"h",(function(){return Rt.a}));var Lt=i(11);i.d(e,"i",(function(){return Lt.a})),i.d(e,"k",(function(){return h.a})),e.l=function(){var e=t.platypus={},i=r.c?function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];r.c.log.apply(r.c,[t].concat(i))}:function(t){for(var e,i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(e=window.console)[t].apply(e,n)},s=a.a.dev?i:function(){},Pt=navigator.userAgent.toLowerCase(),Ct=Pt.search("edge")>-1,Mt=Pt.search("ipod")>-1,Ot=Pt.search("iphone")>-1,It=Pt.search("ipad")>-1,kt=Pt.search("android")>-1,Rt=Pt.search("silk")>-1,Lt=Mt||Ot||It,Dt=Lt||kt||Rt;return e.components={Interactive:u.a,AIChaser:l.a,AIPacer:c.a,AudioMusic:f.a,AudioSFX:d.a,AudioVO:p.a,Camera:g.a,CameraFollowMe:v.a,CollisionBasic:m.a,CollisionFilter:y.a,CollisionGroup:b.a,CollisionTiles:_.a,ComponentSwitcher:w.a,Counter:x.a,EntityContainer:E.a,EntityController:T.a,HandlerCollision:S.a,HandlerController:A.a,HandlerLogic:P.a,HandlerRender:C.a,LevelBuilder:M.a,LogicAngularMovement:O.a,LogicAttachment:I.a,LogicButton:k.a,LogicCarrier:R.a,LogicDestroyMe:L.a,LogicDirectionalMovement:D.a,LogicDragDrop:F.a,LogicImpactLaunch:N.a,LogicPacingPlatform:U.a,LogicPortable:B.a,LogicPortal:j.a,LogicPushable:X.a,LogicRebounder:V.a,LogicRegionSpawner:z.a,LogicRotationalMovement:Y.a,LogicSpawner:W.a,LogicStateMachine:G.a,LogicSwitch:H.a,LogicTeleportee:q.a,LogicTeleporter:Z.a,LogicTimer:K.a,LogicWindUpRacer:J.a,Motion:Q.a,Mover:$.a,Node:tt.a,NodeMap:et.a,NodeResident:it.a,Orientation:nt.a,RandomEvents:rt.a,RelativePosition:ot.a,RelayFamily:st.a,RelayGame:at.a,RelayLinker:ht.a,RelayParent:ut.a,RelaySelf:lt.a,RenderAnimator:ct.a,RenderContainer:ft.a,RenderDebug:dt.a,RenderDestroyMe:pt.a,RenderProgress:gt.a,RenderSpine:vt.a,RenderSprite:mt.a,RenderText:yt.a,RenderTiles:bt.a,SceneChanger:_t.a,TiledLoader:wt.a,Timeline:xt.a,Tutorial:Et.a,Tween:Tt.a,VoiceOver:St.a,XHR:At.a},e.createComponentClass=h.a,e.supports={touch:"undefined"!==window.ontouchstart,edge:Ct,iPod:Mt,iPhone:Ot,iPad:It,safari:Pt.search("safari")>-1&&!Ct,ie:Pt.search("msie")>-1||Pt.search("trident")>-1,firefox:Pt.search("firefox")>-1,android:kt,chrome:Pt.search("chrome")>-1&&!Ct,silk:Rt,iOS:Lt,mobile:Dt,desktop:!Dt},e.debug={general:s.bind(null,"log"),log:s.bind(null,"log"),warn:s.bind(null,"warn"),debug:s.bind(null,"debug"),error:s.bind(null,"error"),olive:s.bind(null,"log")},e.assetCache=new n.a,e.version=a.a.version,e.buildDate=a.a.buildDate,e.Game=o.a,e}()}).call(this,i(77))},function(t,e,i){"use strict";i.r(e),i.d(e,"BaseTextureCache",(function(){return D})),i.d(e,"CanvasRenderTarget",(function(){return B})),i.d(e,"DATA_URI",(function(){return V})),i.d(e,"ProgramCache",(function(){return R})),i.d(e,"TextureCache",(function(){return L})),i.d(e,"clearTextureCache",(function(){return N})),i.d(e,"correctBlendMode",(function(){return w})),i.d(e,"createIndicesForQuads",(function(){return S})),i.d(e,"decomposeDataUri",(function(){return z})),i.d(e,"deprecation",(function(){return H})),i.d(e,"destroyTextureCache",(function(){return F})),i.d(e,"determineCrossOrigin",(function(){return Y})),i.d(e,"getResolutionOfUrl",(function(){return W})),i.d(e,"hex2rgb",(function(){return v})),i.d(e,"hex2string",(function(){return m})),i.d(e,"isPow2",(function(){return I})),i.d(e,"isWebGLSupported",(function(){return g})),i.d(e,"log2",(function(){return k})),i.d(e,"nextPow2",(function(){return O})),i.d(e,"premultiplyBlendMode",(function(){return _})),i.d(e,"premultiplyRgba",(function(){return x})),i.d(e,"premultiplyTint",(function(){return E})),i.d(e,"premultiplyTintToRgba",(function(){return T})),i.d(e,"removeItems",(function(){return A})),i.d(e,"rgb2hex",(function(){return b})),i.d(e,"sayHello",(function(){return p})),i.d(e,"sign",(function(){return M})),i.d(e,"skipHello",(function(){return d})),i.d(e,"string2hex",(function(){return y})),i.d(e,"trimCanvas",(function(){return U})),i.d(e,"uid",(function(){return C}));var n=i(10);i.d(e,"isMobile",(function(){return n.a}));var r=i(171),o=i.n(r);i.d(e,"EventEmitter",(function(){return o.a}));var s=i(172),a=i.n(s);i.d(e,"earcut",(function(){return a.a}));var h=i(99),u=i.n(h);i.d(e,"url",(function(){return u.a}));var l=i(6);
/*!
 * @pixi/utils - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */n.b.RETINA_PREFIX=/@([0-9\.]+)x/,n.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var c,f=!1;function d(){f=!0}function p(t){if(!f){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c PixiJS 5.2.0 - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("PixiJS 5.2.0 - "+t+" - http://www.pixijs.com/");f=!0}}function g(){return void 0===c&&(c=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:n.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r=!(!i||!i.getContextAttributes().stencil);if(i){var o=i.getExtension("WEBGL_lose_context");o&&o.loseContext()}return i=null,r}catch(t){return!1}}()),c}function v(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function m(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)}function y(t){return"string"==typeof t&&"#"===t[0]&&(t=t.substr(1)),parseInt(t,16)}function b(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var _=function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[l.b.NORMAL_NPM]=l.b.NORMAL,t[l.b.ADD_NPM]=l.b.ADD,t[l.b.SCREEN_NPM]=l.b.SCREEN,e[l.b.NORMAL]=l.b.NORMAL_NPM,e[l.b.ADD]=l.b.ADD_NPM,e[l.b.SCREEN]=l.b.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n}();function w(t,e){return _[e?1:0][t]}function x(t,e,i,n){return i=i||new Float32Array(4),n||void 0===n?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i}function E(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,n=t>>8&255,r=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((n=n*e+.5|0)<<8)+(r=r*e+.5|0)}function T(t,e,i,n){return(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(n||void 0===n)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i}function S(t,e){void 0===e&&(e=null);var i=6*t;if((e=e||new Uint16Array(i)).length!==i)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+i);for(var n=0,r=0;n<i;n+=6,r+=4)e[n+0]=r+0,e[n+1]=r+1,e[n+2]=r+2,e[n+3]=r+0,e[n+4]=r+2,e[n+5]=r+3;return e}function A(t,e,i){var n,r=t.length;if(!(e>=r||0===i)){var o=r-(i=e+i>r?r-e:i);for(n=e;n<o;++n)t[n]=t[n+i];t.length=o}}var P=0;function C(){return++P}function M(t){return 0===t?0:t<0?-1:1}function O(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function I(t){return!(t&t-1||!t)}function k(t){var e=(t>65535)<<4,i=((t>>>=e)>255)<<3;return e|=i,e|=i=((t>>>=i)>15)<<2,(e|=i=((t>>>=i)>3)<<1)|(t>>>=i)>>1}var R={},L=Object.create(null),D=Object.create(null);function F(){var t;for(t in L)L[t].destroy();for(t in D)D[t].destroy()}function N(){var t;for(t in L)delete L[t];for(t in D)delete D[t]}function U(t){var e,i,n,r=t.width,o=t.height,s=t.getContext("2d"),a=s.getImageData(0,0,r,o).data,h=a.length,u={top:null,left:null,right:null,bottom:null},l=null;for(e=0;e<h;e+=4)0!==a[e+3]&&(i=e/4%r,n=~~(e/4/r),null===u.top&&(u.top=n),null===u.left?u.left=i:i<u.left&&(u.left=i),null===u.right?u.right=i+1:u.right<i&&(u.right=i+1),null===u.bottom?u.bottom=n:u.bottom<n&&(u.bottom=n));return null!==u.top&&(r=u.right-u.left,o=u.bottom-u.top+1,l=s.getImageData(u.left,u.top,r,o)),{height:o,width:r,data:l}}var B=function(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||n.b.RESOLUTION,this.resize(t,e)},j={width:{configurable:!0},height:{configurable:!0}};B.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},B.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},B.prototype.destroy=function(){this.context=null,this.canvas=null},j.width.get=function(){return this.canvas.width},j.width.set=function(t){this.canvas.width=t},j.height.get=function(){return this.canvas.height},j.height.set=function(t){this.canvas.height=t},Object.defineProperties(B.prototype,j);var X,V=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function z(t){var e=V.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function Y(t,e){if(void 0===e&&(e=window.location),0===t.indexOf("data:"))return"";e=e||window.location,X||(X=document.createElement("a")),X.href=t;var i=!(t=u.a.parse(X.href)).port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&i&&t.protocol===e.protocol?"":"anonymous"}function W(t,e){var i=n.b.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}var G={};function H(t,e,i){if(void 0===i&&(i=3),!G[e]){var n=(new Error).stack;void 0===n?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(n=n.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(n))),G[e]=!0}}},function(t,e,i){"use strict";i.d(e,"a",(function(){return fe})),i.d(e,"b",(function(){return ie})),i.d(e,"c",(function(){return N})),i.d(e,"d",(function(){return O})),i.d(e,"e",(function(){return y})),i.d(e,"f",(function(){return he})),i.d(e,"g",(function(){return pe})),i.d(e,"h",(function(){return me})),i.d(e,"i",(function(){return be})),i.d(e,"j",(function(){return de})),i.d(e,"k",(function(){return ue})),i.d(e,"l",(function(){return B})),i.d(e,"m",(function(){return ae})),i.d(e,"n",(function(){return Dt})),i.d(e,"o",(function(){return C})),i.d(e,"p",(function(){return Ht})),i.d(e,"q",(function(){return Qt})),i.d(e,"r",(function(){return W})),i.d(e,"s",(function(){return st})),i.d(e,"t",(function(){return Q})),i.d(e,"u",(function(){return Mt})),i.d(e,"v",(function(){return G})),i.d(e,"w",(function(){return H})),i.d(e,"x",(function(){return D})),i.d(e,"y",(function(){return F})),i.d(e,"z",(function(){return ne})),i.d(e,"A",(function(){return It})),i.d(e,"B",(function(){return Bt})),i.d(e,"C",(function(){return Rt})),i.d(e,"D",(function(){return A})),i.d(e,"E",(function(){return R})),i.d(e,"F",(function(){return Nt})),i.d(e,"G",(function(){return I})),i.d(e,"H",(function(){return Z})),i.d(e,"I",(function(){return le})),i.d(e,"J",(function(){return re})),i.d(e,"K",(function(){return St})),i.d(e,"L",(function(){return se})),i.d(e,"M",(function(){return oe})),i.d(e,"N",(function(){return S})),i.d(e,"O",(function(){return te}));var n=i(31),r=i(2),o=i(6),s=i(10),a=i(15),h=i(5),u=i(13),l=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new n.a("setRealSize",2),this.onUpdate=new n.a("update"),this.onError=new n.a("onError",1)},c={valid:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};l.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.run(this._width,this._height)},l.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},l.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.run(t,e))},c.valid.get=function(){return!!this._width&&!!this._height},l.prototype.update=function(){this.destroyed||this.onUpdate.run()},l.prototype.load=function(){return Promise.resolve()},c.width.get=function(){return this._width},c.height.get=function(){return this._height},l.prototype.upload=function(t,e,i){return!1},l.prototype.style=function(t,e,i){return!1},l.prototype.dispose=function(){},l.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Object.defineProperties(l.prototype,c);var f=function(t){function e(e){var i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;t.call(this,i,n),this.source=e,this.noSubImage=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.crossOrigin=function(t,e,i){void 0===i&&0!==e.indexOf("data:")?t.crossOrigin=Object(r.determineCrossOrigin)(e):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},e.prototype.upload=function(t,e,i,n){var r=t.gl,s=e.realWidth,a=e.realHeight;return n=n||this.source,r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===o.a.UNPACK),this.noSubImage||e.target!==r.TEXTURE_2D||i.width!==s||i.height!==a?(i.width=s,i.height=a,r.texImage2D(e.target,0,e.format,e.format,e.type,n)):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e.format,e.type,n),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source.naturalWidth||this.source.videoWidth||this.source.width,i=this.source.naturalHeight||this.source.videoHeight||this.source.height;this.resize(e,i),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(l),d=function(t){function e(e,i){if(i=i||{},!(e instanceof HTMLImageElement)){var n=new Image;t.crossOrigin(n,e,i.crossorigin),n.src=e,e=n}t.call(this,e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(void 0!==i.createBitmap?i.createBitmap:s.b.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,this.alphaMode="number"==typeof i.alphaMode?i.alphaMode:null,void 0!==i.premultiplyAlpha&&(this.premultiplyAlpha=i.premultiplyAlpha),this.bitmap=null,this._load=null,!1!==i.autoLoad&&this.load()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(t){var e=this;return void 0!==t&&(this.createBitmap=t),this._load?this._load:(this._load=new Promise((function(t){e.url=e.source.src;var i=e.source,n=function(){e.destroyed||(i.onload=null,i.onerror=null,e.resize(i.width,i.height),e._load=null,e.createBitmap?t(e.process()):t(e))};i.complete&&i.src?n():(i.onload=n,i.onerror=function(t){return e.onError.run(t)})})),this._load)},e.prototype.process=function(){var t=this;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(this.source,0,0,this.source.width,this.source.height,{premultiplyAlpha:this.premultiplyAlpha===o.a.UNPACK?"premultiply":"none"}).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process):Promise.resolve(this)},e.prototype.upload=function(e,i,n){if("number"==typeof this.alphaMode&&(i.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var r=!0;for(var o in i._glTextures){var s=i._glTextures[o];if(s!==n&&s.dirtyId!==i.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e}(f),p=[];function g(t,e){if(!t)return null;var i="";if("string"==typeof t){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(i=n[1].toLowerCase())}for(var r=p.length-1;r>=0;--r){var o=p[r];if(o.test&&o.test(t,i))return new o(t,e)}return new d(t,e)}var v=function(t){function e(e,i){var n=i||{},r=n.width,o=n.height;if(!r||!o)throw new Error("BufferResource width or height invalid");t.call(this,r,o),this.data=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.upload=function(t,e,i){var n=t.gl;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===o.a.UNPACK),i.width===e.width&&i.height===e.height?n.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,n.texImage2D(e.target,0,i.internalFormat,e.width,e.height,0,e.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(l),m={scaleMode:o.k.NEAREST,format:o.e.RGBA,alphaMode:o.a.NPM},y=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null),t.call(this);var n=(i=i||{}).alphaMode,a=i.mipmap,h=i.anisotropicLevel,u=i.scaleMode,c=i.width,f=i.height,d=i.wrapMode,p=i.format,v=i.type,m=i.target,y=i.resolution,b=i.resourceOptions;!e||e instanceof l||((e=g(e,b)).internal=!0),this.width=c||0,this.height=f||0,this.resolution=y||s.b.RESOLUTION,this.mipmap=void 0!==a?a:s.b.MIPMAP_TEXTURES,this.anisotropicLevel=void 0!==h?h:s.b.ANISOTROPIC_LEVEL,this.wrapMode=d||s.b.WRAP_MODE,this.scaleMode=void 0!==u?u:s.b.SCALE_MODE,this.format=p||o.e.RGBA,this.type=v||o.m.UNSIGNED_BYTE,this.target=m||o.l.TEXTURE_2D,this.alphaMode=void 0!==n?n:o.a.UNPACK,void 0!==i.premultiplyAlpha&&(this.premultiplyAlpha=i.premultiplyAlpha),this.uid=Object(r.uid)(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=c>0&&f>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.setResource(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={realWidth:{configurable:!0},realHeight:{configurable:!0}};return i.realWidth.get=function(){return Math.ceil(this.width*this.resolution-1e-4)},i.realHeight.get=function(){return Math.ceil(this.height*this.resolution-1e-4)},e.prototype.setStyle=function(t,e){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},e.prototype.setRealSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Object(r.isPow2)(this.realWidth)&&Object(r.isPow2)(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete r.BaseTextureCache[this.cacheId],delete r.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.from=function(t,i,n){void 0===n&&(n=s.b.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;o?a=t:(t._pixiId||(t._pixiId="pixiid_"+Object(r.uid)()),a=t._pixiId);var h=r.BaseTextureCache[a];if(o&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||((h=new e(t,i)).cacheId=a,e.addToCache(h,a)),h},e.fromBuffer=function(t,i,n,r){t=t||new Float32Array(i*n*4);var s=new v(t,{width:i,height:n}),a=t instanceof Float32Array?o.m.FLOAT:o.m.UNSIGNED_BYTE;return new e(s,Object.assign(m,r||{width:i,height:n,type:a}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),r.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),r.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=r.BaseTextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete r.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete r.BaseTextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},Object.defineProperties(e.prototype,i),e}(r.EventEmitter);y._globalBatch=0;var b=function(t){function e(e,i){var n;i=i||{};var r=e;Array.isArray(e)&&(n=e,r=e.length),t.call(this,i.width,i.height),this.items=[],this.itemDirtyIds=[];for(var o=0;o<r;o++){var s=new y;this.items.push(s),this.itemDirtyIds.push(-1)}if(this.length=r,this._load=null,n)for(var a=0;a<r;a++)this.addResourceAt(g(n[a],i),a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=o.l.TEXTURE_2D_ARRAY;for(var i=0;i<this.length;i++)this.items[i].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})),i=e.map((function(t){return t.load()}));return this._load=Promise.all(i).then((function(){var i=e[0],n=i.width,r=i.height;return t.resize(n,r),Promise.resolve(t)})),this._load},e.prototype.upload=function(t,e,i){var n=this.length,r=this.itemDirtyIds,o=this.items,s=t.gl;i.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,n,0,e.format,e.type,null);for(var a=0;a<n;a++){var h=o[a];r[a]<h.dirtyId&&(r[a]=h.dirtyId,h.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},e}(l),_=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement},e}(f),w=function(t){function e(i,n){if(n=n||{},t.call(this,i,n),this.length!==e.SIDES)throw new Error("Invalid length. Got "+this.length+", expected 6");for(var r=0;r<e.SIDES;r++)this.items[r].target=o.l.TEXTURE_CUBE_MAP_POSITIVE_X+r;!1!==n.autoLoad&&this.load()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=o.l.TEXTURE_CUBE_MAP},e.prototype.upload=function(t,i,n){for(var r=this.itemDirtyIds,o=0;o<e.SIDES;o++){var s=this.items[o];r[o]<s.dirtyId&&(r[o]=s.dirtyId,s.valid&&s.resource.upload(t,s,n))}return!0},e}(b);w.SIDES=6;var x=function(t){function e(e,i){i=i||{},t.call(this,document.createElement("canvas")),this._width=0,this._height=0,this.svg=e,this.scale=i.scale||1,this._overrideWidth=i.width,this._overrideHeight=i.height,this._resolve=null,this._crossorigin=i.crossorigin,this._load=null,!1!==i.autoLoad&&this.load()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;return this._load?this._load:(this._load=new Promise((function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()})),this._load)},e.prototype._loadSvg=function(){var e=this,i=new Image;t.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(t){i.onerror=null,e.onError.run(t)},i.onload=function(){var t=i.width,n=i.height;if(!t||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var o=t*e.scale,s=n*e.scale;(e._overrideWidth||e._overrideHeight)&&(o=e._overrideWidth||e._overrideHeight/n*t,s=e._overrideHeight||e._overrideWidth/t*n),o=Math.round(o),s=Math.round(s);var a=e.source;a.width=o,a.height=s,a._pixiId="canvas_"+Object(r.uid)(),a.getContext("2d").drawImage(i,0,0,t,n,0,0,o,s),e._resolve(),e._resolve=null}},e.getSize=function(t){var i=e.SVG_SIZE.exec(t),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,e){return"svg"===e||"string"==typeof t&&0===t.indexOf("data:image/svg+xml;base64")||"string"==typeof t&&0===t.indexOf("<svg")},e}(f);x.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var E=function(t){function e(e,i){if(i=i||{},!(e instanceof HTMLVideoElement)){var n=document.createElement("video");n.setAttribute("preload","auto"),n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),"string"==typeof e&&(e=[e]),t.crossOrigin(n,e[0].src||e[0],i.crossorigin);for(var r=0;r<e.length;++r){var o=document.createElement("source"),s=e[r],a=s.src,h=s.mime,u=(a=a||e[r]).split("?").shift().toLowerCase(),l=u.substr(u.lastIndexOf(".")+1);h=h||"video/"+l,o.src=a,o.type=h,n.appendChild(o)}e=n}t.call(this,e),this.noSubImage=!0,this._autoUpdate=!0,this._isAutoUpdating=!1,this._updateFPS=i.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==i.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==i.autoLoad&&this.load()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={autoUpdate:{configurable:!0},updateFPS:{configurable:!0}};return e.prototype.update=function(e){if(void 0===e&&(e=0),!this.destroyed){var i=a.a.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this,e),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(i){t.valid?i(t):(t._resolve=i,e.load())})),this._load},e.prototype._onError=function(){this.source.removeEventListener("error",this._onError,!0),this.onError.run(event)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(a.a.shared.add(this.update,this),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(a.a.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isAutoUpdating&&a.a.shared.remove(this.update,this),this.source&&(this.source.removeEventListener("error",this._onError,!0),this.source.pause(),this.source.src="",this.source.load()),t.prototype.dispose.call(this)},i.autoUpdate.get=function(){return this._autoUpdate},i.autoUpdate.set=function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(a.a.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(a.a.shared.add(this.update,this),this._isAutoUpdating=!0))},i.updateFPS.get=function(){return this._updateFPS},i.updateFPS.set=function(t){t!==this._updateFPS&&(this._updateFPS=t)},e.test=function(t,i){return t instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},Object.defineProperties(e.prototype,i),e}(f);E.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];var T=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},e}(f);p.push(d,T,_,E,x,v,w,b);var S={INSTALLED:p,autoDetectResource:g,ArrayResource:b,BufferResource:v,CanvasResource:_,CubeResource:w,ImageResource:d,ImageBitmapResource:T,SVGResource:x,VideoResource:E,Resource:l,BaseImageResource:f},A=function(t){this.renderer=t};A.prototype.destroy=function(){this.renderer=null};var P=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.upload=function(t,e,i){var n=t.gl;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===o.a.UNPACK),i.width===e.width&&i.height===e.height?n.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,n.texImage2D(e.target,0,n.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0},e}(v),C=function(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new n.a("disposeFramebuffer",2)},M={colorTexture:{configurable:!0}};M.colorTexture.get=function(){return this.colorTextures[0]},C.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new y(null,{scaleMode:0,resolution:1,mipmap:!1,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},C.prototype.addDepthTexture=function(t){return this.depthTexture=t||new y(new P(null,{width:this.width,height:this.height}),{scaleMode:0,resolution:1,width:this.width,height:this.height,mipmap:!1,format:o.e.DEPTH_COMPONENT,type:o.m.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},C.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},C.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},C.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],r=n.resolution;n.setSize(t/r,e/r)}if(this.depthTexture){var o=this.depthTexture.resolution;this.depthTexture.setSize(t/o,e/o)}}},C.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Object.defineProperties(C.prototype,M);var O=function(t){function e(e){if("number"==typeof e){var i=arguments[0],n=arguments[1],r=arguments[2],o=arguments[3];e={width:i,height:n,scaleMode:r,resolution:o}}t.call(this,null,e);var s=e||{},a=s.width,h=s.height;this.mipmap=!1,this.width=Math.ceil(a)||100,this.height=Math.ceil(h)||100,this.valid=!0,this._canvasRenderTarget=null,this.clearColor=[0,0,0,0],this.framebuffer=new C(this.width*this.resolution,this.height*this.resolution).addColorTexture(0,this),this.maskStack=[],this.filterStack=[{}]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.framebuffer=null},e}(y),I=function(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)};I.prototype.set=function(t,e,i){var n=e.width,r=e.height;if(i){var o=t.width/2/n,s=t.height/2/r,a=t.x/n+o,u=t.y/r+s;i=h.n.add(i,h.n.NW),this.x0=a+o*h.n.uX(i),this.y0=u+s*h.n.uY(i),i=h.n.add(i,2),this.x1=a+o*h.n.uX(i),this.y1=u+s*h.n.uY(i),i=h.n.add(i,2),this.x2=a+o*h.n.uX(i),this.y2=u+s*h.n.uY(i),i=h.n.add(i,2),this.x3=a+o*h.n.uX(i),this.y3=u+s*h.n.uY(i)}else this.x0=t.x/n,this.y0=t.y/r,this.x1=(t.x+t.width)/n,this.y1=t.y/r,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/r,this.x3=t.x/n,this.y3=(t.y+t.height)/r;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3};var k=new I,R=function(t){function e(i,n,r,o,s,a){if(t.call(this),this.noFrame=!1,n||(this.noFrame=!0,n=new h.j(0,0,1,1)),i instanceof e&&(i=i.baseTexture),this.baseTexture=i,this._frame=n,this.trim=o,this.valid=!1,this.requiresUpdate=!1,this._uvs=k,this.uvMatrix=null,this.orig=r||n,this._rotate=Number(s||0),!0===s)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=a?new h.g(a.x,a.y):new h.g(0,0),this._updateID=0,this.textureCacheIds=[],i.valid?this.noFrame?i.valid&&this.onBaseTextureUpdated(i):this.frame=n:i.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&i.on("update",this.onBaseTextureUpdated,this)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={resolution:{configurable:!0},frame:{configurable:!0},rotate:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var i=this.baseTexture.resource;i&&r.TextureCache[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},e.prototype.updateUvs=function(){this._uvs===k&&(this._uvs=new I),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,i,n){void 0===i&&(i={}),void 0===n&&(n=s.b.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;o?a=t:(t._pixiId||(t._pixiId="pixiid_"+Object(r.uid)()),a=t._pixiId);var h=r.TextureCache[a];if(o&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||(i.resolution||(i.resolution=Object(r.getResolutionOfUrl)(t)),(h=new e(new y(t,i))).baseTexture.cacheId=a,y.addToCache(h.baseTexture,a),e.addToCache(h,a)),h},e.fromBuffer=function(t,i,n,r){return new e(y.fromBuffer(t,i,n,r))},e.fromLoader=function(t,i,n){var o=new d(t);o.url=i;var a=new e(new y(o,{scaleMode:s.b.SCALE_MODE,resolution:Object(r.getResolutionOfUrl)(i)}));return n||(n=i),y.addToCache(a.baseTexture,n),e.addToCache(a,n),n!==i&&(y.addToCache(a.baseTexture,i),e.addToCache(a,i)),a},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),r.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),r.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=r.TextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete r.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)r.TextureCache[t.textureCacheIds[n]]===t&&delete r.TextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},i.resolution.get=function(){return this.baseTexture.resolution},i.frame.get=function(){return this._frame},i.frame.set=function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,n=t.width,r=t.height,o=e+n>this.baseTexture.width,s=i+r>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",h="X: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.width,u="Y: "+i+" + "+r+" = "+(i+r)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+a+" "+u)}this.valid=n&&r&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},i.rotate.get=function(){return this._rotate},i.rotate.set=function(t){this._rotate=t,this.valid&&this.updateUvs()},i.width.get=function(){return this.orig.width},i.height.get=function(){return this.orig.height},Object.defineProperties(e.prototype,i),e}(r.EventEmitter);function L(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}R.EMPTY=new R(new y),L(R.EMPTY),L(R.EMPTY.baseTexture),R.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new R(new y(new _(t)))}(),L(R.WHITE),L(R.WHITE.baseTexture);var D=function(t){function e(e,i){var n=null;if(!(e instanceof O)){var r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4];console.warn("Please use RenderTexture.create("+r+", "+o+") instead of the ctor directly."),n=arguments[0],i=null,e=new O({width:r,height:o,scaleMode:s,resolution:a})}t.call(this,e,i),this.legacyRenderer=n,this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.resize=function(t,e,i){void 0===i&&(i=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i&&this.baseTexture.resize(t,e),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){return"number"==typeof t&&(t={width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new e(new O(t))},e}(R),F=function(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0};F.prototype.createTexture=function(t,e){var i=new O(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new D(i)},F.prototype.getOptimalTexture=function(t,e,i){void 0===i&&(i=1);var n=F.SCREEN_KEY;t*=i,e*=i,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(n=(65535&(t=Object(r.nextPow2)(t)))<<16|65535&(e=Object(r.nextPow2)(e))),this.texturePool[n]||(this.texturePool[n]=[]);var o=this.texturePool[n].pop();return o||(o=this.createTexture(t,e)),o.filterPoolKey=n,o.setResolution(i),o},F.prototype.getFilterTexture=function(t,e){var i=this.getOptimalTexture(t.width,t.height,e||t.resolution);return i.filterFrame=t.filterFrame,i},F.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},F.prototype.returnFilterTexture=function(t){this.returnTexture(t)},F.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},F.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=F.SCREEN_KEY,i=this.texturePool[e];if(this.enableFullScreen=t.width>0&&t.height>0,i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},F.SCREEN_KEY="screen";var N=function(t,e,i,n,r,o,s){void 0===i&&(i=!1),void 0===n&&(n=5126),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=r,this.start=o,this.instance=s};N.prototype.destroy=function(){this.buffer=null},N.from=function(t,e,i,n,r){return new N(t,e,i,n,r)};var U=0,B=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=U++,this.disposeRunner=new n.a("disposeBuffer",2)};function j(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}B.prototype.update=function(t){this.data=t||this.data,this._updateID++},B.prototype.dispose=function(){this.disposeRunner.run(this,!1)},B.prototype.destroy=function(){this.dispose(),this.data=null},B.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new B(t)};var X={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var V={5126:4,5123:2,5121:1},z=0,Y={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},W=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=z++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new n.a("disposeGeometry",2),this.refCount=0};W.prototype.addAttribute=function(t,e,i,n,r,o,s,a){if(void 0===n&&(n=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e.data||(e instanceof Array&&(e=new Float32Array(e)),e=new B(e));var h=t.split("|");if(h.length>1){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,i,n,r);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new N(l,i,n,r,o,s,a),this.instanced=this.instanced||a,this},W.prototype.getAttribute=function(t){return this.attributes[t]},W.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},W.prototype.addIndex=function(t){return t.data||(t instanceof Array&&(t=new Uint16Array(t)),t=new B(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},W.prototype.getIndex=function(){return this.indexBuffer},W.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],i=[],n=new B;for(t in this.attributes){var r=this.attributes[t],o=this.buffers[r.buffer];e.push(o.data),i.push(r.size*V[r.type]/4),r.buffer=0}for(n.data=function(t,e){for(var i=0,n=0,r={},o=0;o<t.length;o++)n+=e[o],i+=t[o].length;for(var s=new ArrayBuffer(4*i),a=null,h=0,u=0;u<t.length;u++){var l=e[u],c=t[u],f=j(c);r[f]||(r[f]=new X[f](s)),a=r[f];for(var d=0;d<c.length;d++){a[(d/l|0)*n+h+d%l]=c[d]}h+=l}return new Float32Array(s)}(e,i),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},W.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},W.prototype.dispose=function(){this.disposeRunner.run(this,!1)},W.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},W.prototype.clone=function(){for(var t=new W,e=0;e<this.buffers.length;e++)t.buffers[e]=new B(this.buffers[e].data.slice());for(var i in this.attributes){var n=this.attributes[i];t.attributes[i]=new N(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},W.merge=function(t){for(var e,i=new W,n=[],r=[],o=[],s=0;s<t.length;s++){e=t[s];for(var a=0;a<e.buffers.length;a++)r[a]=r[a]||0,r[a]+=e.buffers[a].data.length,o[a]=0}for(var h=0;h<e.buffers.length;h++)n[h]=new(Y[j(e.buffers[h].data)])(r[h]),i.buffers[h]=new B(n[h]);for(var u=0;u<t.length;u++){e=t[u];for(var l=0;l<e.buffers.length;l++)n[l].set(e.buffers[l].data,o[l]),o[l]+=e.buffers[l].data.length}if(i.attributes=e.attributes,e.indexBuffer){i.indexBuffer=i.buffers[e.buffers.indexOf(e.indexBuffer)],i.indexBuffer.index=!0;for(var c=0,f=0,d=0,p=0,g=0;g<e.buffers.length;g++)if(e.buffers[g]!==e.indexBuffer){p=g;break}for(var v in e.attributes){var m=e.attributes[v];(0|m.buffer)===p&&(f+=m.size*V[m.type]/4)}for(var y=0;y<t.length;y++){for(var b=t[y].indexBuffer.data,_=0;_<b.length;_++)i.indexBuffer.data[_+d]+=c;c+=e.buffers[p].data.length/f,d+=b.length}}return i};var G=function(t){function e(){t.call(this),this.addAttribute("aVertexPosition",[0,0,1,0,1,1,0,1]).addIndex([0,1,3,2])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(W),H=function(t){function e(){t.call(this),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new B(this.vertices),this.uvBuffer=new B(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t,e){var i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(W),q=0,Z=function(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=q++,this.static=!!e};Z.prototype.update=function(){this.dirtyId++},Z.prototype.add=function(t,e,i){this.uniforms[t]=new Z(e,i)},Z.from=function(t,e){return new Z(t,e)};var K=function(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new h.j,this.destinationFrame=new h.j,this.filters=[]};K.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null};var J=function(t){function e(e){t.call(this,e),this.defaultFilterStack=[{}],this.texturePool=new F,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new G,this.quadUv=new H,this.tempRect=new h.j,this.activeState={},this.globalUniforms=new Z({outputFrame:this.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this._pixelsWidth=e.view.width,this._pixelsHeight=e.view.height}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e){for(var i=this.renderer,n=this.defaultFilterStack,r=this.statePool.pop()||new K,o=e[0].resolution,s=e[0].padding,a=e[0].autoFit,h=e[0].legacy,u=1;u<e.length;u++){var l=e[u];o=Math.min(o,l.resolution),s=Math.max(s,l.padding),a=a||l.autoFit,h=h||l.legacy}1===n.length&&(this.defaultFilterStack[0].renderTexture=i.renderTexture.current),n.push(r),r.resolution=o,r.legacy=h,r.target=t,r.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),r.sourceFrame.pad(s),a&&r.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),r.sourceFrame.ceil(o),r.renderTexture=this.getOptimalFilterTexture(r.sourceFrame.width,r.sourceFrame.height,o),r.filters=e,r.destinationFrame.width=r.renderTexture.width,r.destinationFrame.height=r.renderTexture.height,r.renderTexture.filterFrame=r.sourceFrame,i.renderTexture.bind(r.renderTexture,r.sourceFrame),i.renderTexture.clear()},e.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var r=n.inputSize,o=n.inputPixel,s=n.inputClamp;if(r[0]=e.destinationFrame.width,r[1]=e.destinationFrame.height,r[2]=1/r[0],r[3]=1/r[1],o[0]=r[0]*e.resolution,o[1]=r[1]*e.resolution,o[2]=1/o[0],o[3]=1/o[1],s[0]=.5*o[2],s[1]=.5*o[3],s[2]=e.sourceFrame.width*r[2]-.5*o[2],s[3]=e.sourceFrame.height*r[3]-.5*o[3],e.legacy){var a=n.filterArea;a[0]=e.destinationFrame.width,a[1]=e.destinationFrame.height,a[2]=e.sourceFrame.x,a[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var h=t[t.length-1];if(1===i.length)i[0].apply(this,e.renderTexture,h.renderTexture,!1,e),this.returnFilterTexture(e.renderTexture);else{var u=e.renderTexture,l=this.getOptimalFilterTexture(u.width,u.height,e.resolution);l.filterFrame=u.filterFrame;var c=0;for(c=0;c<i.length-1;++c){i[c].apply(this,u,l,!0,e);var f=u;u=l,l=f}i[c].apply(this,u,h.renderTexture,!1,e),this.returnFilterTexture(u),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},e.prototype.applyFilter=function(t,e,i,n){var r=this.renderer;r.renderTexture.bind(i,i?i.filterFrame:null),n&&r.renderTexture.clear(),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,r.state.set(t.state),r.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),r.geometry.bind(this.quadUv),r.geometry.draw(o.c.TRIANGLES)):(r.geometry.bind(this.quad),r.geometry.draw(o.c.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,r=i.destinationFrame,o=e._texture.orig,s=t.set(r.width,0,0,r.height,n.x,n.y),a=e.worldTransform.copyTo(h.d.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(e.anchor.x,e.anchor.y),s},e.prototype.destroy=function(){this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,e,i){return void 0===i&&(i=1),this.texturePool.getOptimalTexture(t,e,i)},e.prototype.getFilterTexture=function(t,e){if("number"==typeof t){var i=t;t=e,e=i}t=t||this.activeState.renderTexture;var n=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return n.filterFrame=t.filterFrame,n},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e}(A),Q=function(t){this.renderer=t};Q.prototype.flush=function(){},Q.prototype.destroy=function(){this.renderer=null},Q.prototype.start=function(){},Q.prototype.stop=function(){this.flush()},Q.prototype.render=function(t){};var $=function(t){function e(e){t.call(this,e),this.emptyRenderer=new Q(e),this.currentRenderer=this.emptyRenderer}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},e.prototype.boundArray=function(t,e,i,n){for(var r=t.elements,o=t.ids,s=t.count,a=0,h=0;h<s;h++){var u=r[h],l=u._batchLocation;if(l>=0&&l<n&&e[l]===u)o[h]=l;else for(;a<n;){var c=e[a];if(!c||c._batchEnabled!==i||c._batchLocation!==a){o[h]=a,u._batchLocation=a,e[a]=u;break}a++}}},e}(A);s.b.PREFER_ENV=r.isMobile.any?o.d.WEBGL:o.d.WEBGL2,s.b.STRICT_TEXTURE_CACHE=!1;var tt=0,et=function(t){function e(e){t.call(this,e),this.webGLVersion=1,this.extensions={},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={isLost:{configurable:!0}};return i.isLost.get=function(){return!this.gl||this.gl.isContextLost()},e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=tt++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=tt++,this.renderer.runners.contextChange.run(t)},e.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},e.prototype.createContext=function(t,e){var i;if(s.b.PREFER_ENV>=o.d.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),i},e.prototype.getExtensions=function(){var t=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBKIT_WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.run(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")},Object.defineProperties(e.prototype,i),e}(A),it=function(t){function e(e){t.call(this,e),this.managedFramebuffers=[],this.unknownFramebuffer=new C(10,10)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={size:{configurable:!0}};return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new h.j,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;s.b.PREFER_ENV===o.d.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}},e.prototype.bind=function(t,e){var i=this.gl;if(t){var n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,n.framebuffer)),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var r=0;r<t.colorTextures.length;r++)t.colorTextures[r].texturePart?this.renderer.texture.unbind(t.colorTextures[r].texture):this.renderer.texture.unbind(t.colorTextures[r]);t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,e,i,n){var r=this.viewport;r.width===i&&r.height===n&&r.x===t&&r.y===e||(r.x=t,r.y=e,r.width=i,r.height=n,this.gl.viewport(t,e,i,n))},i.size.get=function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},e.prototype.clear=function(t,e,i,n){var r=this.gl;r.clearColor(t,e,i,n),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},e.prototype.initFramebuffer=function(t){var e={framebuffer:this.gl.createFramebuffer(),stencil:null,dirtyId:0,dirtyFormat:0,dirtySize:0};return t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},e.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var n=t.colorTextures,r=0;r<n.length;r++)this.renderer.texture.bind(n[r],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures.length;e.drawBuffers||(n=Math.min(n,1));for(var r=[],o=0;o<n;o++){var s=t.colorTextures[o];s.texturePart?(this.renderer.texture.bind(s.texture,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+o,e.TEXTURE_CUBE_MAP_NEGATIVE_X+s.side,s.texture._glTextures[this.CONTEXT_UID].texture,0)):(this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+o,e.TEXTURE_2D,s._glTextures[this.CONTEXT_UID].texture,0)),r.push(e.COLOR_ATTACHMENT0+o)}if((r.length>1&&e.drawBuffers(r),t.depthTexture)&&this.writeDepthTexture){var a=t.depthTexture;this.renderer.texture.bind(a,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a._glTextures[this.CONTEXT_UID].texture,0)}i.stencil||!t.stencil&&!t.depth||(i.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i.stencil))},e.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var r=this.managedFramebuffers.indexOf(t);r>=0&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},e.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.enableStencil();var i=t.width,n=t.height,r=this.gl,o=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,o),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,i,n),e.stencil=o,r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,o)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new h.j},Object.defineProperties(e.prototype,i),e}(A),nt=function(t){this.buffer=t,this.updateID=-1,this.byteLength=-1,this.refCount=0},rt={5126:4,5123:2,5121:1},ot=function(t){function e(e){t.call(this,e),this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.boundBuffers={},this.managedGeometries={},this.managedBuffers={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!t.createVertexArray){var i=this.renderer.context.extensions.vertexArrayObject;s.b.PREFER_ENV===o.d.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(t){return i.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return i.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){},t.bindVertexArray=function(){},t.deleteVertexArray=function(){})}if(!t.vertexAttribDivisor){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(t,e){return n.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,i,r,o){return n.drawElementsInstancedANGLE(t,e,i,r,o)},t.drawArraysInstanced=function(t,e,i,r){return n.drawArraysInstancedANGLE(t,e,i,r)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},e.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID];n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={});var r=n[e.program.id]||this.initGeometryVao(t,e.program);this._activeGeometry=t,this._activeVao!==r&&(this._activeVao=r,this.hasVao?i.bindVertexArray(r):this.activateVao(t,e.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,i=0;i<t.buffers.length;i++){var n=t.buffers[i],r=n._glBuffers[this.CONTEXT_UID];if(n._updateID!==r.updateID){r.updateID=n._updateID;var o=n.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;if(e.bindBuffer(o,r.buffer),this._boundBuffer=r,r.byteLength>=n.data.byteLength)e.bufferSubData(o,0,n.data);else{var s=n.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=n.data.byteLength,e.bufferData(o,n.data,s)}}}},e.prototype.checkCompatibility=function(t,e){var i=t.attributes,n=e.attributeData;for(var r in n)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},e.prototype.getSignature=function(t,e){var i=t.attributes,n=e.attributeData,r=["g",t.id];for(var o in i)n[o]&&r.push(o);return r.join("-")},e.prototype.initGeometryVao=function(t,e){this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,r=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],s=o[r];if(s)return o[e.id]=s,s;var a=t.buffers,h=t.attributes,u={},l={};for(var c in a)u[c]=0,l[c]=0;for(var f in h)!h[f].size&&e.attributeData[f]?h[f].size=e.attributeData[f].size:h[f].size||console.warn("PIXI Geometry attribute '"+f+"' size cannot be determined (likely the bound shader does not have the attribute)"),u[h[f].buffer]+=h[f].size*rt[h[f].type];for(var d in h){var p=h[d],g=p.size;void 0===p.stride&&(u[p.buffer]===g*rt[p.type]?p.stride=0:p.stride=u[p.buffer]),void 0===p.start&&(p.start=l[p.buffer],l[p.buffer]+=g*rt[p.type])}s=i.createVertexArray(),i.bindVertexArray(s);for(var v=0;v<a.length;v++){var m=a[v];m._glBuffers[n]||(m._glBuffers[n]=new nt(i.createBuffer()),this.managedBuffers[m.id]=m,m.disposeRunner.add(this)),m._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=s,o[e.id]=s,o[r]=s,s},e.prototype.disposeBuffer=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var i=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,r=t.buffers;if(t.disposeRunner.remove(this),i){for(var o=0;o<r.length;o++){var s=r[o]._glBuffers[this.CONTEXT_UID];s.refCount--,0!==s.refCount||e||this.disposeBuffer(r[o],e)}if(!e)for(var a in i)if("g"===a[0]){var h=i[a];this._activeVao===h&&this.unbind(),n.deleteVertexArray(h)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t);e=Object.keys(this.managedBuffers);for(var n=0;n<e.length;n++)this.disposeBuffer(this.managedBuffers[e[n]],t)},e.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,r=t.buffers,o=t.attributes;t.indexBuffer&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[n].buffer);var s=null;for(var a in o){var h=o[a],u=r[h.buffer]._glBuffers[n];if(e.attributeData[a]){s!==u&&(i.bindBuffer(i.ARRAY_BUFFER,u.buffer),s=u);var l=e.attributeData[a].location;if(i.enableVertexAttribArray(l),i.vertexAttribPointer(l,h.size,h.type||i.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(l,1)}}}},e.prototype.draw=function(t,e,i,n){var r=this.gl,o=this._activeGeometry;if(o.indexBuffer){var s=o.indexBuffer.data.BYTES_PER_ELEMENT,a=2===s?r.UNSIGNED_SHORT:r.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?o.instanced?r.drawElementsInstanced(t,e||o.indexBuffer.data.length,a,(i||0)*s,n||1):r.drawElements(t,e||o.indexBuffer.data.length,a,(i||0)*s):console.warn("unsupported index buffer type: uint32")}else o.instanced?r.drawArraysInstanced(t,i,e||o.getSize(),n||1):r.drawArrays(t,i,e||o.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e}(A),st=function(t){this.type=o.g.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null};function at(t,e,i,n){var r=ht(t,t.VERTEX_SHADER,e),o=ht(t,t.FRAGMENT_SHADER,i),s=t.createProgram();if(t.attachShader(s,r),t.attachShader(s,o),n)for(var a in n)t.bindAttribLocation(s,n[a],a);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(s,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(s)),t.deleteProgram(s),s=null),t.deleteShader(r),t.deleteShader(o),s}function ht(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.warn(i),console.error(t.getShaderInfoLog(n)),null)}function ut(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return lt(2*e);case"bvec3":return lt(3*e);case"bvec4":return lt(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function lt(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e}st.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=o.g.NONE,this.autoDetect=!0),this._target=null},st.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)};var ct,ft={},dt=ft;function pt(){if(dt===ft||dt&&dt.isContextLost()){var t,e=document.createElement("canvas");s.b.PREFER_ENV>=o.d.WEBGL2&&(t=e.getContext("webgl2",{})),t||((t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}))?t.getExtension("WEBGL_draw_buffers"):t=null),dt=t}return dt}function gt(t,e,i){if("precision"!==t.substring(0,9)){var n=e;return e===o.i.HIGH&&i!==o.i.HIGH&&(n=o.i.MEDIUM),"precision "+n+" float;\n"+t}return i!==o.i.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var vt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mt(t){return vt[t]}var yt=null,bt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray"};function _t(t,e){if(!yt){var i=Object.keys(bt);yt={};for(var n=0;n<i.length;++n){var r=i[n];yt[t[r]]=bt[r]}}return yt[e]}var wt={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},xt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Et,Tt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function St(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=e.createShader(e.FRAGMENT_SHADER);;){var n=Tt.replace(/%forloop%/gi,At(t));if(e.shaderSource(i,n),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return t}function At(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}var Pt=0,Ct={},Mt=function t(e,i,n){void 0===n&&(n="pixi-shader"),this.id=Pt++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(n=n.replace(/\s+/g,"-"),Ct[n]?(Ct[n]++,n+="-"+Ct[n]):Ct[n]=1,this.vertexSrc="#define SHADER_NAME "+n+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+"\n"+this.fragmentSrc,this.vertexSrc=gt(this.vertexSrc,s.b.PRECISION_VERTEX,o.i.HIGH),this.fragmentSrc=gt(this.fragmentSrc,s.b.PRECISION_FRAGMENT,function(){if(!ct){ct=o.i.MEDIUM;var t=pt();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);ct=e.precision?o.i.HIGH:o.i.MEDIUM}}return ct}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null},Ot={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};Mt.prototype.extractData=function(t,e){var i=pt();if(i){var n=at(i,t,e);this.attributeData=this.getAttributeData(n,i),this.uniformData=this.getUniformData(n,i),i.deleteProgram(n)}else this.uniformData={},this.attributeData={}},Mt.prototype.getAttributeData=function(t,e){for(var i={},n=[],r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<r;o++){var s=e.getActiveAttrib(t,o),a=_t(e,s.type),h={type:a,name:s.name,size:mt(a),location:0};i[s.name]=h,n.push(h)}n.sort((function(t,e){return t.name>e.name?1:-1}));for(var u=0;u<n.length;u++)n[u].location=u;return i},Mt.prototype.getUniformData=function(t,e){for(var i={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<n;r++){var o=e.getActiveUniform(t,r),s=o.name.replace(/\[.*?\]/,""),a=o.name.match(/\[.*?\]/,""),h=_t(e,o.type);i[s]={type:h,size:o.size,isArray:a,value:ut(h,o.size)}}return i},Ot.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},Ot.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},Mt.from=function(t,e,i){var n=t+e,o=r.ProgramCache[n];return o||(r.ProgramCache[n]=o=new Mt(t,e,i)),o},Object.defineProperties(Mt,Ot);var It=function(t,e){for(var i in this.program=t,this.uniformGroup=e?e instanceof Z?e:new Z(e):new Z({}),t.uniformData)this.uniformGroup.uniforms[i]instanceof Array&&(this.uniformGroup.uniforms[i]=new Float32Array(this.uniformGroup.uniforms[i]))},kt={uniforms:{configurable:!0}};It.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},It.prototype.destroy=function(){this.uniformGroup=null},kt.uniforms.get=function(){return this.uniformGroup.uniforms},It.from=function(t,e,i){var n=Mt.from(t,e);return new It(n,i)},Object.defineProperties(It.prototype,kt);var Rt=function(){this.data=0,this.blendMode=o.b.NORMAL,this.polygonOffset=0,this.blend=!0},Lt={blend:{configurable:!0},offsets:{configurable:!0},culling:{configurable:!0},depthTest:{configurable:!0},clockwiseFrontFace:{configurable:!0},blendMode:{configurable:!0},polygonOffset:{configurable:!0}};Lt.blend.get=function(){return!!(1&this.data)},Lt.blend.set=function(t){!!(1&this.data)!==t&&(this.data^=1)},Lt.offsets.get=function(){return!!(2&this.data)},Lt.offsets.set=function(t){!!(2&this.data)!==t&&(this.data^=2)},Lt.culling.get=function(){return!!(4&this.data)},Lt.culling.set=function(t){!!(4&this.data)!==t&&(this.data^=4)},Lt.depthTest.get=function(){return!!(8&this.data)},Lt.depthTest.set=function(t){!!(8&this.data)!==t&&(this.data^=8)},Lt.clockwiseFrontFace.get=function(){return!!(16&this.data)},Lt.clockwiseFrontFace.set=function(t){!!(16&this.data)!==t&&(this.data^=16)},Lt.blendMode.get=function(){return this._blendMode},Lt.blendMode.set=function(t){this.blend=t!==o.b.NONE,this._blendMode=t},Lt.polygonOffset.get=function(){return this._polygonOffset},Lt.polygonOffset.set=function(t){this.offsets=!!t,this._polygonOffset=t},Rt.for2d=function(){var t=new Rt;return t.depthTest=!1,t.blend=!0,t},Object.defineProperties(Rt.prototype,Lt);var Dt=function(t){function e(i,n,r){var o=Mt.from(i||e.defaultVertexSrc,n||e.defaultFragmentSrc);t.call(this,o,r),this.padding=0,this.resolution=s.b.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0,this.legacy=!!this.program.attributeData.aTextureCoord,this.state=new Rt}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={blendMode:{configurable:!0}},n={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};return e.prototype.apply=function(t,e,i,n,r){t.applyFilter(this,e,i,n,r)},i.blendMode.get=function(){return this.state.blendMode},i.blendMode.set=function(t){this.state.blendMode=t},n.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},n.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},Object.defineProperties(e.prototype,i),Object.defineProperties(e,n),e}(It);Dt.SOURCE_KEY_MAP={};var Ft=new h.d,Nt=function(t,e){this._texture=t,this.mapCoord=new h.d,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._updateID=-1,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1},Ut={texture:{configurable:!0}};Ut.texture.get=function(){return this._texture},Ut.texture.set=function(t){this._texture=t,this._updateID=-1},Nt.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var r=t[n],o=t[n+1];e[n]=r*i.a+o*i.c+i.tx,e[n+1]=r*i.b+o*i.d+i.ty}return e},Nt.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._updateID===e._updateID)return!1;this._updateID=e._updateID;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,r=e.trim;r&&(Ft.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Ft));var o=e.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,h=this.clampOffset;return s[0]=(e._frame.x+a+h)/o.width,s[1]=(e._frame.y+a+h)/o.height,s[2]=(e._frame.x+e._frame.width-a+h)/o.width,s[3]=(e._frame.y+e._frame.height-a+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},Object.defineProperties(Nt.prototype,Ut);var Bt=function(t){function e(e){var i=new h.d;t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n"),e.renderable=!1,this.maskSprite=e,this.maskMatrix=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t,e,i,n){var r=this.maskSprite,o=this.maskSprite.texture;o.valid&&(o.transform||(o.transform=new Nt(o,0)),o.transform.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r).prepend(o.transform.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=o.transform.uClampFrame,t.applyFilter(this,e,i,n))},e}(Dt),jt=function(t){function e(e){t.call(this,e),this.scissorRenderTarget=null,this.enableScissor=!1,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,e){if(!e.isMaskData){var i=this.maskDataPool.pop()||new st;i.pooled=!0,i.maskObject=e,e=i}switch(e.autoDetect&&this.detect(e),e.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),e._target=t,e.type){case o.g.SCISSOR:this.maskStack.push(e),this.renderer.scissor.push(e);break;case o.g.STENCIL:this.maskStack.push(e),this.renderer.stencil.push(e);break;case o.g.SPRITE:e.copyCountersOrReset(null),this.pushSpriteMask(e),this.maskStack.push(e)}},e.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case o.g.SCISSOR:this.renderer.scissor.pop();break;case o.g.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case o.g.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},e.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite)t.type=o.g.SPRITE;else if(t.type=o.g.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a),r=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),r=((r=Math.round(r*(180/Math.PI)*100)-n)%18e3+18e3)%18e3,0===(n=(n%9e3+9e3)%9e3)&&9e3===r&&(t.type=o.g.SCISSOR)}},e.prototype.pushSpriteMask=function(t){var e=t.maskObject,i=t._target,n=this.alphaMaskPool[this.alphaMaskIndex];n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new Bt(e)]),n[0].resolution=this.renderer.resolution,n[0].maskSprite=e;var r=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,n),i.filterArea=r,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},e}(A),Xt=function(t){function e(e){t.call(this,e),this.maskStack=[],this.glConst=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(0===n?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this,this),this.maskStack=null},e}(A),Vt=function(t){function e(e){t.call(this,e),this.glConst=WebGLRenderingContext.SCISSOR_TEST}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var i=t._scissorRect,n=e.getBounds(!0),r=this.renderer.gl;e.renderable=!1,i?n.fit(i):r.enable(r.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=n,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,i=this.renderer.projection,n=i.transform,r=i.sourceFrame,o=i.destinationFrame,s=e?e.resolution:this.renderer.resolution,a=(t.x-r.x)*s+o.x,h=(t.y-r.y)*s+o.y,u=t.width*s,l=t.height*s;n&&(a+=n.tx*s,h+=n.ty*s),e||(h=this.renderer.height-l-h),this.renderer.gl.scissor(a,h,u,l)},e}(Xt),zt=function(t){function e(e){t.call(this,e),this.glConst=WebGLRenderingContext.STENCIL_TEST}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,i=this.renderer.gl,n=t._stencilCounter;0===n&&(this.renderer.framebuffer.forceStencil(),i.enable(i.STENCIL_TEST)),t._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,n,this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},e}(Xt),Yt=function(t){function e(e){t.call(this,e),this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new h.d,this.transform=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var r=this.renderer;r.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,r.globalUniforms.update(),r.shader.shader&&r.shader.syncUniformGroup(r.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,e,i,n){var r=this.projectionMatrix;n?(r.a=1/t.width*2*i,r.d=-1/t.height*2*i,r.tx=-1-e.x*r.a,r.ty=1-e.y*r.d):(r.a=1/t.width*2*i,r.d=1/t.height*2*i,r.tx=-1-e.x*r.a,r.ty=-1-e.y*r.d)},e.prototype.setTransform=function(){},e}(A),Wt=new h.j,Gt=function(t){function e(e){t.call(this,e),this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new h.j,this.destinationFrame=new h.j}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(t,e,i){void 0===t&&(t=null),this.current=t;var n,r=this.renderer;if(t){var o=t.baseTexture;n=o.resolution,i||(Wt.width=o.realWidth,Wt.height=o.realHeight,i=Wt),e||(e=i),this.renderer.framebuffer.bind(o.framebuffer,i),this.renderer.projection.update(i,e,n,!1),this.renderer.mask.setMaskStack(o.maskStack)}else n=this.renderer.resolution,i||(Wt.width=r.width,Wt.height=r.height,i=Wt),e||(e=i),r.framebuffer.bind(null,i),this.renderer.projection.update(i,e,n,!0),this.renderer.mask.setMaskStack(this.defaultMaskStack);this.sourceFrame.copyFrom(e),this.destinationFrame.x=i.x/n,this.destinationFrame.y=i.y/n,this.destinationFrame.width=i.width/n,this.destinationFrame.height=i.height/n,e===i&&this.sourceFrame.copyFrom(this.destinationFrame)},e.prototype.clear=function(t){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3])},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e}(A),Ht=function(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}};Ht.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null};var qt=0,Zt=function(t){function e(e){t.call(this,e),this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this.id=qt++}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Et)return Et;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Et=!0===t({a:"b"},"a","b")}catch(t){Et=!1}return Et}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||this.syncUniformGroup(t.uniformGroup),n},e.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t){var e=this.getglProgram();t.static&&t.dirtyId===e.uniformGroups[t.id]||(e.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,e))},e.prototype.syncUniforms=function(t,e){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer)},e.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var i=0,n="var v = null;\n    var cv = null\n    var gl = renderer.gl";for(var r in t.uniforms){var o=e[r];if(o)if("float"===o.type&&1===o.size)n+="\n            if(uv."+r+" !== ud."+r+".value)\n            {\n                ud."+r+".value = uv."+r+"\n                gl.uniform1f(ud."+r+".location, uv."+r+")\n            }\n";else if("sampler2D"!==o.type&&"samplerCube"!==o.type&&"sampler2DArray"!==o.type||1!==o.size||o.isArray)if("mat3"===o.type&&1===o.size)void 0!==t.uniforms[r].a?n+="\n                gl.uniformMatrix3fv(ud."+r+".location, false, uv."+r+".toArray(true));\n                \n":n+="\n                gl.uniformMatrix3fv(ud."+r+".location, false, uv."+r+");\n                \n";else if("vec2"===o.type&&1===o.size)void 0!==t.uniforms[r].x?n+="\n                cv = ud."+r+".value;\n                v = uv."+r+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud."+r+".location, v.x, v.y);\n                }\n":n+="\n                cv = ud."+r+".value;\n                v = uv."+r+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud."+r+".location, v[0], v[1]);\n                }\n                \n";else if("vec4"===o.type&&1===o.size)void 0!==t.uniforms[r].width?n+="\n                cv = ud."+r+".value;\n                v = uv."+r+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud."+r+".location, v.x, v.y, v.width, v.height)\n                }\n":n+="\n                cv = ud."+r+".value;\n                v = uv."+r+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud."+r+".location, v[0], v[1], v[2], v[3])\n                }\n                \n";else{n+="\n            cv = ud."+r+".value;\n            v = uv."+r+";\n            "+(1===o.size?wt:xt)[o.type].replace("location","ud."+r+".location")+";\n"}else n+="\n            renderer.texture.bind(uv."+r+", "+i+");\n\n            if(ud."+r+".value !== "+i+")\n            {\n                ud."+r+".value = "+i+";\n                gl.uniform1i(ud."+r+".location, "+i+");\n; // eslint-disable-line max-len\n            }\n",i++;else t.uniforms[r].group&&(n+="\n                    renderer.shader.syncUniformGroup(uv."+r+");\n                ")}return new Function("ud","uv","renderer",n)}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},e.prototype.getSignature=function(t,e){var i=t.uniforms,n=[];for(var r in i)n.push(r),e[r]&&n.push(e[r].type);return n.join("-")},e.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateShader=function(t){var e=this.gl,i=t.program,n={};for(var r in i.attributeData)n[r]=i.attributeData[r].location;var o=at(e,i.vertexSrc,i.fragmentSrc,n),s={};for(var a in i.uniformData){var h=i.uniformData[a];s[a]={location:e.getUniformLocation(o,a),value:ut(h.type,h.size)}}var u=new Ht(o,s);return i.glPrograms[this.renderer.CONTEXT_UID]=u,u},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.destroyed=!0},e}(A);var Kt=function(t){function e(e){t.call(this,e),this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=o.b.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.checks=[],this.defaultState=new Rt,this.defaultState.blend=!0,this.defaultState.depth=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[o.b.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.b.ADD]=[t.ONE,t.ONE],e[o.b.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.b.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.b.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.b.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.b.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.b.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.b.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.b.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.b.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.b.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.b.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.b.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.b.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.b.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.b.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.b.NONE]=[0,0],e[o.b.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.b.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[o.b.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.b.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[o.b.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[o.b.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[o.b.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[o.b.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[o.b.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[o.b.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[o.b.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[o.b.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var i=0;i<this.checks.length;i++)this.checks[i](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;2===e.length?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(0),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)},e.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},e.checkPolygonOffset=function(t,e){t.setPolygonOffset(e.polygonOffset,0)},e}(A),Jt=function(t){function e(e){t.call(this,e),this.count=0,this.checkCount=0,this.maxIdle=s.b.GC_MAX_IDLE,this.checkCountMax=s.b.GC_MAX_CHECK_COUNT,this.mode=s.b.GC_MODE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==o.f.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var r=e[n];!r.framebuffer&&this.count-r.touched>this.maxIdle&&(t.destroyTexture(r,!0),e[n]=null,i=!0)}if(i){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},e.prototype.unload=function(t){var e=this.renderer.textureSystem;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},e}(A),Qt=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},$t=function(t){function e(e){t.call(this,e),this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new y}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new Qt(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Qt(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var o=0;o<this.boundTextures.length;o++)this.bind(null,o)},e.prototype.bind=function(t,e){void 0===e&&(e=0);var i=this.gl;if(t){if((t=t.baseTexture||t).valid){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var e=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var n=0;n<i.length;n++)i[n]===this.unknownTexture&&this.bind(null,n)}for(var r=0;r<i.length;r++)i[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[t.target].texture),i[r]=null)},e.prototype.initTexture=function(t){var e=new Qt(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},e.prototype.initTextureType=function(t,e){if(e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion){var i=this.renderer.gl;t.type===i.FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA32F),t.type===o.m.HALF_FLOAT&&(e.type=i.HALF_FLOAT),e.type===i.HALF_FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA16F)}},e.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e));else{var n=t.realWidth,r=t.realHeight,o=i.gl;(e.width!==n||e.height!==r||e.dirtyId<0)&&(e.width=n,e.height=r,o.texImage2D(t.target,0,e.internalFormat,n,r,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,e){var i=this.gl;if((t=t.baseTexture||t)._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);-1!==n&&Object(r.removeItems)(this.managedTextures,n,1)}},e.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==o.h.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=0,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=o.n.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===o.k.LINEAR){var r=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,r)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode?i.LINEAR:i.NEAREST)},e}(A),te={FilterSystem:J,BatchSystem:$,ContextSystem:et,FramebufferSystem:it,GeometrySystem:ot,MaskSystem:jt,ScissorSystem:Vt,StencilSystem:zt,ProjectionSystem:Yt,RenderTextureSystem:Gt,ShaderSystem:Zt,StateSystem:Kt,TextureGCSystem:Jt,TextureSystem:$t},ee=new h.d,ie=function(t){function e(e,i){t.call(this),(i=Object.assign({},s.b.RENDER_OPTIONS,i)).roundPixels&&(s.b.ROUND_PIXELS=i.roundPixels,Object(r.deprecation)("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),this.options=i,this.type=o.j.UNKNOWN,this.screen=new h.j(0,0,i.width,i.height),this.view=i.view||document.createElement("canvas"),this.resolution=i.resolution||s.b.RESOLUTION,this.transparent=i.transparent,this.autoDensity=i.autoDensity||i.autoResize||!1,this.preserveDrawingBuffer=i.preserveDrawingBuffer,this.clearBeforeRender=i.clearBeforeRender,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,0],this._backgroundColorString="#000000",this.backgroundColor=i.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent=new u.b,this._lastObjectRendered=this._tempDisplayObjectParent,this.plugins={}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={width:{configurable:!0},height:{configurable:!0},backgroundColor:{configurable:!0}};return e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},i.width.get=function(){return this.view.width},i.height.get=function(){return this.view.height},e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,i,n){0===(n=n||t.getLocalBounds()).width&&(n.width=1),0===n.height&&(n.height=1);var r=D.create(0|n.width,0|n.height,e,i);return ee.tx=-n.x,ee.ty=-n.y,this.render(t,r,!1,ee,!!t.parent),r},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=o.j.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoDensity=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},i.backgroundColor.get=function(){return this._backgroundColor},i.backgroundColor.set=function(t){this._backgroundColor=t,this._backgroundColorString=Object(r.hex2string)(t),Object(r.hex2rgb)(t,this._backgroundColorRgba)},Object.defineProperties(e.prototype,i),e}(r.EventEmitter),ne=function(t){function e(i){void 0===i&&(i={}),t.call(this,"WebGL",i),i=this.options,this.type=o.j.WEBGL,this.gl=null,this.CONTEXT_UID=0,this.runners={destroy:new n.a("destroy"),contextChange:new n.a("contextChange",1),reset:new n.a("reset"),update:new n.a("update"),postrender:new n.a("postrender"),prerender:new n.a("prerender"),resize:new n.a("resize",2)},this.globalUniforms=new Z({projectionMatrix:new h.d},!0),this.addSystem(jt,"mask").addSystem(et,"context").addSystem(Kt,"state").addSystem(Zt,"shader").addSystem($t,"texture").addSystem(ot,"geometry").addSystem(it,"framebuffer").addSystem(Vt,"scissor").addSystem(zt,"stencil").addSystem(Yt,"projection").addSystem(Jt,"textureGC").addSystem(J,"filter").addSystem(Gt,"renderTexture").addSystem($,"batch"),this.initPlugins(e.__plugins),i.context?this.context.initFromContext(i.context):this.context.initFromOptions({alpha:this.transparent,antialias:i.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer,powerPreference:this.options.powerPreference}),this.renderingToScreen=!0,Object(r.sayHello)(2===this.context.webGLVersion?"WebGL 2":"WebGL 1"),this.resize(this.options.width,this.options.height)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t){if(Object(r.isWebGLSupported)())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.addSystem=function(t,e){e||(e=t.name);var i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var n in this[e]=i,this.runners)this.runners[n].add(i);return this},e.prototype.render=function(t,e,i,n,r){if(this.renderingToScreen=!e,this.runners.prerender.run(),this.emit("prerender"),this.projection.transform=n,!this.context.isLost){if(e||(this._lastObjectRendered=t),!r){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.run(),this.projection.transform=null,this.emit("postrender")}},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.runners.resize.run(e,i)},e.prototype.reset=function(){return this.runners.reset.run(),this},e.prototype.clear=function(){this.framebuffer.bind(),this.framebuffer.clear()},e.prototype.destroy=function(e){for(var i in this.runners.destroy.run(),this.runners)this.runners[i].destroy();t.prototype.destroy.call(this,e),this.gl=null},e.registerPlugin=function(t,i){e.__plugins=e.__plugins||{},e.__plugins[t]=i},e}(ie);function re(t){return ne.create(t)}var oe="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",se="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",ae=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.from=function(t,i){return new e(new w(t,i))},e}(y),he=function(){this.texArray=null,this.blend=0,this.type=o.c.TRIANGLES,this.start=0,this.size=0,this.data=null},ue=function(){this.elements=[],this.ids=[],this.count=0};ue.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0};var le=function(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)},ce={int8View:{configurable:!0},uint8View:{configurable:!0},int16View:{configurable:!0},uint16View:{configurable:!0},int32View:{configurable:!0}};ce.int8View.get=function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},ce.uint8View.get=function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},ce.int16View.get=function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},ce.uint16View.get=function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},ce.int32View.get=function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},le.prototype.view=function(t){return this[t+"View"]},le.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},le.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},Object.defineProperties(le.prototype,ce);var fe=function(t){function e(e){t.call(this,e),this.shaderGenerator=null,this.geometryClass=null,this.vertexSize=null,this.state=Rt.for2d(),this.size=4*s.b.SPRITE_BATCH_SIZE,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(){var t=this.renderer.gl;s.b.PREFER_ENV===o.d.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),s.b.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=St(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,i=e._textureArrayPool,n=this.size/4,r=Math.floor(n/this.MAX_TEXTURES)+1;t.length<n;)t.push(new he);for(;i.length<r;)i.push(new ue);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,i=this.MAX_TEXTURES,n=e._textureArrayPool,r=this.renderer.batch,o=this._tempBoundTextures,s=this.renderer.textureGC.count,a=++y._globalBatch,h=0,u=n[0],l=0;r.copyBoundTextures(o,i);for(var c=0;c<this._bufferSize;++c){var f=t[c];t[c]=null,f._batchEnabled!==a&&(u.count>=i&&(r.boundArray(u,o,a,i),this.buildDrawCalls(u,l,c),l=c,u=n[++h],++a),f._batchEnabled=a,f.touched=s,u.elements[u.count++]=f)}u.count>0&&(r.boundArray(u,o,a,i),this.buildDrawCalls(u,l,this._bufferSize),++h,++a);for(var d=0;d<o.length;d++)o[d]=null;y._globalBatch=a},e.prototype.buildDrawCalls=function(t,i,n){var o=this._bufferedElements,s=this._attributeBuffer,a=this._indexBuffer,h=this.vertexSize,u=e._drawCallPool,l=this._dcIndex,c=this._aIndex,f=this._iIndex,d=u[l];d.start=this._iIndex,d.texArray=t;for(var p=i;p<n;++p){var g=o[p],v=g._texture.baseTexture,m=r.premultiplyBlendMode[v.alphaMode?1:0][g.blendMode];o[p]=null,i<p&&d.blend!==m&&(d.size=f-d.start,i=p,(d=u[++l]).texArray=t,d.start=f),this.packInterleavedGeometry(g,s,a,c,f),c+=g.vertexData.length/2*h,f+=g.indices.length,d.blend=m}i<n&&(d.size=f-d.start,++l),this._dcIndex=l,this._aIndex=c,this._iIndex=f},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,i=this._indexBuffer;s.b.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,i=this.renderer,n=i.gl,r=i.state,o=e._drawCallPool,s=null,a=0;a<t;a++){var h=o[a],u=h.texArray,l=h.type,c=h.size,f=h.start,d=h.blend;s!==u&&(s=u,this.bindAndClearTexArray(u)),r.setBlendMode(d),n.drawElements(l,c,n.UNSIGNED_SHORT,2*f)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),s.b.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=Object(r.nextPow2)(Math.ceil(t/8)),i=Object(r.log2)(e),n=8*e;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var o=this._aBuffers[n];return o||(this._aBuffers[n]=o=new le(n*this.vertexSize*4)),o},e.prototype.getIndexBuffer=function(t){var e=Object(r.nextPow2)(Math.ceil(t/12)),i=Object(r.log2)(e),n=12*e;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var o=this._iBuffers[i];return o||(this._iBuffers[i]=o=new Uint16Array(n)),o},e.prototype.packInterleavedGeometry=function(t,e,i,n,o){for(var s=e.uint32View,a=e.float32View,h=n/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,f=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),p=d<1&&t._texture.baseTexture.alphaMode?Object(r.premultiplyTint)(t._tintRGB,d):t._tintRGB+(255*d<<24),g=0;g<c.length;g+=2)a[n++]=c[g],a[n++]=c[g+1],a[n++]=u[g],a[n++]=u[g+1],s[n++]=p,a[n++]=f;for(var v=0;v<l.length;v++)i[o++]=h+l[v]},e}(Q);fe._drawCallPool=[],fe._textureArrayPool=[];var de=function(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')};de.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=Z.from({uSamplers:e},!0);var n=this.fragTemplate;n=(n=n.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Mt(this.vertexSrc,n)}var r={tint:new Float32Array([1,1,1,1]),translationMatrix:new h.d,default:this.defaultGroupCache[t]};return new It(this.programCache[t],r)},de.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"};var pe=function(t){function e(e){void 0===e&&(e=!1),t.call(this),this._buffer=new B(null,e,!1),this._indexBuffer=new B(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,o.m.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,o.m.FLOAT).addAttribute("aColor",this._buffer,4,!0,o.m.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,o.m.FLOAT).addIndex(this._indexBuffer)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(W),ge="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",ve="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",me=function(){},ye={defaultVertexSrc:{configurable:!0},defaultFragmentTemplate:{configurable:!0}};me.create=function(t){var e=Object.assign({vertex:ge,fragment:ve,geometryClass:pe,vertexSize:6},t),i=e.vertex,n=e.fragment,r=e.vertexSize,o=e.geometryClass;return function(t){function e(e){t.call(this,e),this.shaderGenerator=new de(i,n),this.geometryClass=o,this.vertexSize=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(fe)},ye.defaultVertexSrc.get=function(){return ge},ye.defaultFragmentTemplate.get=function(){return ve},Object.defineProperties(me,ye);var be=me.create()},function(t,e,i){"use strict";var n,r,o,s,a=i(0),h=i(100),u=i(14),l=i.n(u);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}e.a=(n=l.a.dev,r=0,o=function(){},s=function(t,e,i){Object.defineProperty(e,t,{get:function(){return i[t]},set:function(e){i[t]=e},enumerable:!0})},function(t){var e,i,u=null,l=null,g=function(e){function i(e,n,o){var a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var h="",u="",l="",p="";if(a=function(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?d(t):e}(this,f(i).call(this,t.id,e)),t.properties)for(h in t.properties)t.properties.hasOwnProperty(h)&&(n&&void 0!==n[h]?a[h]=n[h]:void 0!==a.owner[h]?a[h]=a.owner[h]:a[h]=t.properties[h]);if(t.publicProperties)for(h in t.publicProperties)t.publicProperties.hasOwnProperty(h)&&(s(h,d(a),e),n&&void 0!==n[h]?a[h]=n[h]:void 0!==a.owner[h]?a[h]=a.owner[h]:a[h]=t.publicProperties[h]);if(t.events)for(u in r-=1,t.events)if(t.events.hasOwnProperty(u)&&(a.addEventListener(u,t.events[u],r),n&&n.aliases))for(p in n.aliases)n.aliases.hasOwnProperty(p)&&n.aliases[p]===u&&a.addEventListener(p,t.events[u],r);if(t.publicMethods)for(u in t.publicMethods)if(t.publicMethods.hasOwnProperty(u)){if(l=u,n&&n.aliases)for(p in n.aliases)n.aliases.hasOwnProperty(p)&&n.aliases[p]===u&&(l=p);a.addMethod(l,t.publicMethods[u])}return!a.initialize(n,o)&&o&&o(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(i,e),i}(h.a);if((l=g.prototype).initialize=t.initialize||o,l.toJSON=(e=!1,i=function t(i,n){var r=null,o=!1,s="",h=!1,u=0,l=c(i);if(e||(e=!0,o=!0),"function"===l)h=!0;else if("object"===l&&null!==i)if(i.toJSON)(r=n?Object(a.b)(n):a.a.setUp()).push(i),t(i.toJSON(),r)||(h=!0);else if(Array.isArray(i))for(u=i.length;u--;){if(n&&n.indexOf(i[u])>=0){h=!0;break}if((r=n?Object(a.b)(n):a.a.setUp()).push(i[u]),!t(i[u],r)){h=!0;break}}else for(s in i)if(i.hasOwnProperty(s)){if(n&&n.indexOf(i[s])>=0){h=!0;break}if((r=n?Object(a.b)(n):a.a.setUp()).push(i[s]),!t(i[s],r)){h=!0;break}}return n&&a.a.recycle(n),o&&(e=!1),!h},n?function(n){var r=t.properties,o=t.publicProperties,s={type:this.type},a="";for(a in r)r.hasOwnProperty(a)&&r[a]!==this[a]&&(e||i(this[a])||platypus.debug.warn('Component "'+this.type+'" includes a non-JSON property value for "'+a+'" (type "'+c(this[a])+'"). You may want to create a custom `toJSON` method for this component.',this[a]),s[a]=this[a]);for(a in o)o.hasOwnProperty(a)&&o[a]!==this.owner[a]&&void 0===n[a]&&(e||i(this.owner[a])||platypus.debug.warn('Component "'+this.type+'" includes a non-JSON public property value for "'+a+'" (type "'+c(this.owner[a])+'"). You may want to create a custom `toJSON` method for this component.',this.owner[a]),n[a]=this.owner[a]);return s}:function(e){var i=t.properties,n=t.publicProperties,r={type:this.type},o="";for(o in i)i.hasOwnProperty(o)&&i[o]!==this[o]&&(r[o]=this[o]);for(o in n)n.hasOwnProperty(o)&&n[o]!==this.owner[o]&&(e[o]=this.owner[o]);return r}),t.methods)for(u in t.methods)t.methods.hasOwnProperty(u)&&("destroy"===u?l._destroy=t.methods[u]:l[u]=t.methods[u]);if(t.publicMethods)for(u in t.publicMethods)t.publicMethods.hasOwnProperty(u)&&(l[u]=t.publicMethods[u]);return t.getAssetList&&(g.getAssetList=t.getAssetList),g})},function(t,e,i){"use strict";i.d(e,"a",(function(){return _})),i.d(e,"b",(function(){return h})),i.d(e,"c",(function(){return w})),i.d(e,"d",(function(){return u})),i.d(e,"e",(function(){return o})),i.d(e,"f",(function(){return s})),i.d(e,"g",(function(){return r})),i.d(e,"h",(function(){return x})),i.d(e,"i",(function(){return a})),i.d(e,"j",(function(){return b})),i.d(e,"k",(function(){return E})),i.d(e,"l",(function(){return n})),i.d(e,"m",(function(){return y})),i.d(e,"n",(function(){return m}));
/*!
 * @pixi/math - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var n,r=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e},t}(),o=function(){function t(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return t.prototype.clone=function(e,i){return void 0===e&&(e=this.cb),void 0===i&&(i=this.scope),new t(e,i,this._x,this._y)},t.prototype.set=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope))},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),t}(),s=2*Math.PI,a=180/Math.PI,h=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(n||(n={}));var u=function(){function t(t,e,i,n,r,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=o}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,n,r,o){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new r;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new r;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,o=t.y;return e.x=this.d*i*n+-this.c*i*o+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*o+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,o=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},t.prototype.setTransform=function(t,e,i,n,r,o,s,a,h){return this.a=Math.cos(s+h)*r,this.b=Math.sin(s+h)*r,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,o=-Math.atan2(-n,r),a=Math.atan2(i,e),h=Math.abs(o+a);return h<1e-5||Math.abs(s-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,o=t*n-e*i;return this.a=n/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-n*r)/o,this.ty=-(t*this.ty-e*r)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!0,configurable:!0}),t}(),l=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],c=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],f=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],d=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],p=[],g=[],v=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];p.push(e);for(var i=0;i<16;i++)for(var n=v(l[t]*l[i]+f[t]*c[i]),r=v(c[t]*l[i]+d[t]*c[i]),o=v(l[t]*f[i]+f[t]*d[i]),s=v(c[t]*f[i]+d[t]*d[i]),a=0;a<16;a++)if(l[a]===n&&c[a]===r&&f[a]===o&&d[a]===s){e.push(a);break}}for(t=0;t<16;t++){var h=new u;h.set(l[t],c[t],f[t],d[t],0,0),g.push(h)}}();var m={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return l[t]},uY:function(t){return c[t]},vX:function(t){return f[t]},vY:function(t){return d[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return p[t][e]},sub:function(t,e){return p[t][m.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?m.S:m.N:2*Math.abs(e)<=Math.abs(t)?t>0?m.E:m.W:e>0?t>0?m.SE:m.SW:t>0?m.NE:m.NW},matrixAppendRotationInv:function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var r=g[m.inv(e)];r.tx=i,r.ty=n,t.append(r)}},y=function(){function t(){this.worldTransform=new u,this.localTransform=new u,this.position=new o(this.onChange,this,0,0),this.scale=new o(this.onChange,this,1,1),this.pivot=new o(this.onChange,this,0,0),this.skew=new o(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!0,configurable:!0}),t.IDENTITY=new t,t}(),b=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(r),this.type=n.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),r=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(r-n,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=r-n,this},t}(),_=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.radius=i,this.type=n.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,r=this.y-e;return(n*=n)+(r*=r)<=i},t.prototype.getBounds=function(){return new b(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}(),w=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=t,this.y=e,this.width=i,this.height=r,this.type=n.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return(i*=i)+(n*=n)<=1},t.prototype.getBounds=function(){return new b(this.x-this.width,this.y-this.height,this.width,this.height)},t}(),x=function(){function t(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(Array.isArray(e[0])&&(e=e[0]),e[0]instanceof r){for(var o=[],s=0,a=(e=e).length;s<a;s++)o.push(e[s].x,e[s].y);e=o}this.points=e,this.type=n.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,r=0,o=n-1;r<n;o=r++){var s=this.points[2*r],a=this.points[2*r+1],h=this.points[2*o],u=this.points[2*o+1];a>e!=u>e&&t<(e-a)/(u-a)*(h-s)+s&&(i=!i)}return i},t}(),E=function(){function t(t,e,i,r,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=20),this.x=t,this.y=e,this.width=i,this.height=r,this.radius=o,this.type=n.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),n=e-(this.y+this.radius),r=this.radius*this.radius;if(i*i+n*n<=r)return!0;if((i=t-(this.x+this.width-this.radius))*i+n*n<=r)return!0;if(i*i+(n=e-(this.y+this.height-this.radius))*n<=r)return!0;if((i=t-(this.x+this.radius))*i+n*n<=r)return!0}return!1},t}()},function(t,e,i){"use strict";
/*!
 * @pixi/constants - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var n,r,o,s,a,h,u,l,c,f,d,p,g,v;i.d(e,"a",(function(){return d})),i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"d",(function(){return n})),i.d(e,"e",(function(){return a})),i.d(e,"f",(function(){return p})),i.d(e,"g",(function(){return v})),i.d(e,"h",(function(){return f})),i.d(e,"i",(function(){return g})),i.d(e,"j",(function(){return r})),i.d(e,"k",(function(){return l})),i.d(e,"l",(function(){return h})),i.d(e,"m",(function(){return u})),i.d(e,"n",(function(){return c})),function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(n||(n={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(r||(r={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(o||(o={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(s||(s={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(a||(a={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(h||(h={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(u||(u={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(l||(l={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(c||(c={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON"}(f||(f={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(d||(d={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(p||(p={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(g||(g={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(v||(v={}))},function(t,e,i){"use strict";var n,r=i(14),o=i.n(r),s=i(20);e.a=(n=function(t){var e=arguments.length,i="";if(t)if("string"==typeof t)for(e%2&&(this[e]=null,e-=1);e;)this[arguments[e-2]]=arguments[e-1],e-=2;else for(i in t)t.hasOwnProperty(i)&&(this[i]=t[i])},s.a.add(n,"Data",n,(function(){var t="";for(t in this)this.hasOwnProperty(t)&&delete this[t]}),!0,o.a.dev),n)},function(t,e,i){var n=i(16),r=i(26),o=i(37),s=i(34),a=i(43),h=function(t,e,i){var u,l,c,f,d=t&h.F,p=t&h.G,g=t&h.S,v=t&h.P,m=t&h.B,y=p?n:g?n[e]||(n[e]={}):(n[e]||{}).prototype,b=p?r:r[e]||(r[e]={}),_=b.prototype||(b.prototype={});for(u in p&&(i=e),i)c=((l=!d&&y&&void 0!==y[u])?y:i)[u],f=m&&l?a(c,n):v&&"function"==typeof c?a(Function.call,c):c,y&&s(y,u,c,t&h.U),b[u]!=c&&o(b,u,f),v&&_[u]!=c&&(_[u]=c)};n.core=r,h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,t.exports=h},function(t,e,i){"use strict";i.r(e);var n={};i.r(n),i.d(n,"AccessibilityManager",(function(){return l})),i.d(n,"accessibleTarget",(function(){return u}));var r={};i.r(r),i.d(r,"Extract",(function(){return p}));var o={};i.r(o),i.d(o,"InteractionData",(function(){return v})),i.d(o,"InteractionEvent",(function(){return y})),i.d(o,"InteractionManager",(function(){return T})),i.d(o,"InteractionTrackingData",(function(){return b})),i.d(o,"interactiveTarget",(function(){return x}));var s={};i.r(s),i.d(s,"BasePrepare",(function(){return gt})),i.d(s,"CountLimiter",(function(){return pt})),i.d(s,"Prepare",(function(){return Et})),i.d(s,"TimeLimiter",(function(){return Pt}));i(439);var a=i(2),h=i(13),u={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0};h.c.mixin(u);var l=function(t){this._hookDiv=null,(a.isMobile.tablet||a.isMobile.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessibility=!1,window.addEventListener("keydown",this._onKeyDown,!1)};l.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",(function(){t.isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},l.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},l.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},l.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessibility&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},l.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},l.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,i=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var r=0;r<this.children.length;r++){var o=this.children[r];if(o.renderId!==this.renderId)o._accessibleActive=!1,Object(a.removeItems)(this.children,r,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,r--,0===this.children.length&&this.deactivate();else{n=o._accessibleDiv;var s=o.hitArea,h=o.worldTransform;o.hitArea?(n.style.left=(h.tx+s.x*h.a)*e+"px",n.style.top=(h.ty+s.y*h.d)*i+"px",n.style.width=s.width*h.a*e+"px",n.style.height=s.height*h.d*i+"px"):(s=o.getBounds(),this.capHitArea(s),n.style.left=s.x*e+"px",n.style.top=s.y*i+"px",n.style.width=s.width*e+"px",n.style.height=s.height*i+"px",n.title!==o.accessibleTitle&&null!==o.accessibleTitle&&(n.title=o.accessibleTitle),n.getAttribute("aria-label")!==o.accessibleHint&&null!==o.accessibleHint&&n.setAttribute("aria-label",o.accessibleHint)),o.accessibleTitle===n.title&&o.tabIndex===n.tabIndex||(n.title=o.accessibleTitle,n.tabIndex=o.tabIndex,this.debug&&this.updateDebugHTML(n))}}this.renderId++}},l.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},l.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},l.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},l.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData),e.dispatchEvent(t.target.displayObject,"pointertap",e.eventData),e.dispatchEvent(t.target.displayObject,"tap",e.eventData)},l.prototype._onFocus=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},l.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},l.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},l.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},l.prototype.destroy=function(){this.destroyTouchHook(),this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null};var c=i(3),f=i(5),d=new f.j,p=function(t){this.renderer=t,t.extract=this};p.prototype.image=function(t,e,i){var n=new Image;return n.src=this.base64(t,e,i),n},p.prototype.base64=function(t,e,i){return this.canvas(t).toDataURL(e,i)},p.prototype.canvas=function(t){var e,i,n,r=this.renderer,o=!1,s=!1;t&&(t instanceof c.x?n=t:(n=this.renderer.generateTexture(t),s=!0)),n?(e=n.baseTexture.resolution,i=n.frame,o=!1,r.renderTexture.bind(n)):(e=this.renderer.resolution,o=!0,(i=d).width=this.renderer.width,i.height=this.renderer.height,r.renderTexture.bind(null));var h=Math.floor(i.width*e+1e-4),u=Math.floor(i.height*e+1e-4),l=new a.CanvasRenderTarget(h,u,1),f=new Uint8Array(4*h*u),g=r.gl;g.readPixels(i.x*e,i.y*e,h,u,g.RGBA,g.UNSIGNED_BYTE,f);var v=l.context.getImageData(0,0,h,u);return p.arrayPostDivide(f,v.data),l.context.putImageData(v,0,0),o&&(l.context.scale(1,-1),l.context.drawImage(l.canvas,0,-u)),s&&n.destroy(!0),l.canvas},p.prototype.pixels=function(t){var e,i,n,r=this.renderer,o=!1;t&&(t instanceof c.x?n=t:(n=this.renderer.generateTexture(t),o=!0)),n?(e=n.baseTexture.resolution,i=n.frame,r.renderTexture.bind(n)):(e=r.resolution,(i=d).width=r.width,i.height=r.height,r.renderTexture.bind(null));var s=i.width*e,a=i.height*e,h=new Uint8Array(4*s*a),u=r.gl;return u.readPixels(i.x*e,i.y*e,s,a,u.RGBA,u.UNSIGNED_BYTE,h),o&&n.destroy(!0),p.arrayPostDivide(h,h),h},p.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},p.arrayPostDivide=function(t,e){for(var i=0;i<t.length;i+=4){var n=e[i+3]=t[i+3];0!==n?(e[i]=Math.round(Math.min(255*t[i]/n,255)),e[i+1]=Math.round(Math.min(255*t[i+1]/n,255)),e[i+2]=Math.round(Math.min(255*t[i+2]/n,255))):(e[i]=t[i],e[i+1]=t[i+1],e[i+2]=t[i+2])}};var g=i(15),v=function(){this.global=new f.g,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0},m={pointerId:{configurable:!0}};
/*!
 * @pixi/interaction - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */m.pointerId.get=function(){return this.identifier},v.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},v.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},v.prototype.reset=function(){this.isPrimary=!1},Object.defineProperties(v.prototype,m);var y=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null};y.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},y.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null};var b=function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE},_={pointerId:{configurable:!0},flags:{configurable:!0},none:{configurable:!0},over:{configurable:!0},rightDown:{configurable:!0},leftDown:{configurable:!0}};b.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},_.pointerId.get=function(){return this._pointerId},_.flags.get=function(){return this._flags},_.flags.set=function(t){this._flags=t},_.none.get=function(){return this._flags===this.constructor.FLAGS.NONE},_.over.get=function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},_.over.set=function(t){this._doSet(this.constructor.FLAGS.OVER,t)},_.rightDown.get=function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},_.rightDown.set=function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)},_.leftDown.get=function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},_.leftDown.set=function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)},Object.defineProperties(b.prototype,_),b.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4});var w=function(){this._tempPoint=new f.g};w.prototype.recursiveFindHit=function(t,e,i,n,r){if(!e||!e.visible)return!1;var o=t.data.global,s=!1,a=r=e.interactive||r,h=!0;if(e.hitArea?(n&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(n=!1,h=!1)),a=!1):e._mask&&n&&(e._mask.containsPoint&&e._mask.containsPoint(o)||(n=!1)),h&&e.interactiveChildren&&e.children)for(var u=e.children,l=u.length-1;l>=0;l--){var c=u[l],f=this.recursiveFindHit(t,c,i,n,a);if(f){if(!c.parent)continue;a=!1,f&&(t.target&&(n=!1),s=!0)}}return r&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),i&&i(t,e,!!s))),s},w.prototype.findHit=function(t,e,i,n){this.recursiveFindHit(t,e,i,n,!1)};var x={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};h.c.mixin(x);var E={target:null,data:{global:null}},T=function(t){function e(e,i){t.call(this),i=i||{},this.renderer=e,this.autoPreventDefault=void 0===i.autoPreventDefault||i.autoPreventDefault,this.interactionFrequency=i.interactionFrequency||10,this.mouse=new v,this.mouse.identifier=1,this.mouse.global.set(-999999),this.activeInteractionData={},this.activeInteractionData[1]=this.mouse,this.interactionDataPool=[],this.eventData=new y,this.interactionDOMElement=null,this.moveWhenInside=!1,this.eventsAdded=!1,this.mouseOverRenderer=!1,this.supportsTouchEvents="ontouchstart"in window,this.supportsPointerEvents=!!window.PointerEvent,this.onPointerUp=this.onPointerUp.bind(this),this.processPointerUp=this.processPointerUp.bind(this),this.onPointerCancel=this.onPointerCancel.bind(this),this.processPointerCancel=this.processPointerCancel.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.processPointerDown=this.processPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.processPointerMove=this.processPointerMove.bind(this),this.onPointerOut=this.onPointerOut.bind(this),this.processPointerOverOut=this.processPointerOverOut.bind(this),this.onPointerOver=this.onPointerOver.bind(this),this.cursorStyles={default:"inherit",pointer:"pointer"},this.currentCursorMode=null,this.cursor=null,this.resolution=1,this.delayedEvents=[],this.search=new w,this.setTargetElement(this.renderer.view,this.renderer.resolution)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hitTest=function(t,e){return E.target=null,E.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(E,e,null,!0),E.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(g.a.system.add(this.update,this,g.c.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(g.a.system.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var i=this.activeInteractionData[e];if(i.originalEvent&&"touch"!==i.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(typeof e){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopPropagationHint&&t!==i.stopsPropagatingAt||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.delayDispatchEvent=function(t,e,i){this.delayedEvents.push({displayObject:t,eventString:e,eventData:i})},e.prototype.mapPositionToPoint=function(t,e,i){var n;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*r,t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)*r},e.prototype.processInteractive=function(t,e,i,n){var r=this.search.findHit(t,e,i,n),o=this.delayedEvents;if(!o.length)return r;t.stopPropagationHint=!1;var s=o.length;this.delayedEvents=[];for(var a=0;a<s;a++){var h=o[a],u=h.displayObject,l=h.eventString,c=h.eventData;c.stopsPropagatingAt===u&&(c.stopPropagationHint=!0),this.dispatchEvent(u,l,c)}return r},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var i=e.length,n=0;n<i;n++){var r=e[n],o=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,o);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===r.pointerType)this.emit("touchstart",s);else if("mouse"===r.pointerType||"pen"===r.pointerType){var a=2===r.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var n=t.data,r=t.data.identifier;if(i)if(e.trackedPointers[r]||(e.trackedPointers[r]=new b(r)),this.dispatchEvent(e,"pointerdown",t),"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===n.pointerType||"pen"===n.pointerType){var o=2===n.button;o?e.trackedPointers[r].rightDown=!0:e.trackedPointers[r].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var n=this.normalizeToPointerData(t),r=n.length,o=t.target!==this.interactionDOMElement?"outside":"",s=0;s<r;s++){var a=n[s],h=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,h);if(u.data.originalEvent=t,this.processInteractive(u,this.renderer._lastObjectRendered,i,e||!o),this.emit(e?"pointercancel":"pointerup"+o,u),"mouse"===a.pointerType||"pen"===a.pointerType){var l=2===a.button;this.emit(l?"rightup"+o:"mouseup"+o,u)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,u),this.releaseInteractionDataForPointerId(a.pointerId,h))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var n=t.data,r=t.data.identifier,o=e.trackedPointers[r],s="touch"===n.pointerType,a="mouse"===n.pointerType||"pen"===n.pointerType,h=!1;if(a){var u=2===n.button,l=b.FLAGS,c=u?l.RIGHT_DOWN:l.LEFT_DOWN,f=void 0!==o&&o.flags&c;i?(this.dispatchEvent(e,u?"rightup":"mouseup",t),f&&(this.dispatchEvent(e,u?"rightclick":"click",t),h=!0)):f&&this.dispatchEvent(e,u?"rightupoutside":"mouseupoutside",t),o&&(u?o.rightDown=!1:o.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(a&&!h||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[r]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var i=e.length,n=0;n<i;n++){var r=e[n],o=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,o);s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",s),"touch"===r.pointerType&&this.emit("touchmove",s),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var n=t.data,r="touch"===n.pointerType,o="mouse"===n.pointerType||"pen"===n.pointerType;o&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),r&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,i);n.data.originalEvent=e,this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var n=t.data,r=t.data.identifier,o="mouse"===n.pointerType||"pen"===n.pointerType,s=e.trackedPointers[r];i&&!s&&(s=e.trackedPointers[r]=new b(r)),void 0!==s&&(i&&this.mouseOverRenderer?(s.over||(s.over=!0,this.delayDispatchEvent(e,"pointerover",t),o&&this.delayDispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[r]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,i);n.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",n),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",n)},e.prototype.getInteractionDataForPointerId=function(t){var e,i=t.pointerId;return 1===i||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[i]?e=this.activeInteractionData[i]:((e=this.interactionDataPool.pop()||new v).identifier=i,this.activeInteractionData[i]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,n=t.changedTouches.length;i<n;i++){var r=t.changedTouches[i];void 0===r.button&&(r.button=t.touches.length?1:0),void 0===r.buttons&&(r.buttons=t.touches.length?1:0),void 0===r.isPrimary&&(r.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===r.width&&(r.width=r.radiusX||1),void 0===r.height&&(r.height=r.radiusY||1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="touch"),void 0===r.pointerId&&(r.pointerId=r.identifier||0),void 0===r.pressure&&(r.pressure=r.force||.5),void 0===r.twist&&(r.twist=0),void 0===r.tangentialPressure&&(r.tangentialPressure=0),void 0===r.layerX&&(r.layerX=r.offsetX=r.clientX),void 0===r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,e.push(r)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=1),void 0===t.pressure&&(t.pressure=.5),void 0===t.twist&&(t.twist=0),void 0===t.tangentialPressure&&(t.tangentialPressure=0),t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(a.EventEmitter),S=i(10),A=i(6),P={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive)return e;var i=Math.ceil(t/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}},C=function(){this.reset()};C.prototype.clone=function(){var t=new C;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},C.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=c.E.WHITE,this.matrix=null,this.visible=!1},C.prototype.destroy=function(){this.texture=null,this.matrix=null};var M={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var i=t.points,n=t.holes,r=e.points,o=e.indices;if(i.length>=6){for(var s=[],h=0;h<n.length;h++){var u=n[h];s.push(i.length/2),i=i.concat(u.points)}var l=Object(a.earcut)(i,s,2);if(!l)return;for(var c=r.length/2,f=0;f<l.length;f+=3)o.push(l[f]+c),o.push(l[f+1]+c),o.push(l[f+2]+c);for(var d=0;d<i.length;d++)r.push(i[d])}}},O={build:function(t){var e,i,n=t.shape,r=t.points,o=n.x,s=n.y;if(r.length=0,t.type===f.l.CIRC?(e=n.radius,i=n.radius):(e=n.width,i=n.height),0!==e&&0!==i){var a=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(n.width+n.height));a/=2.3;for(var h=2*Math.PI/a,u=0;u<a;u++)r.push(o+Math.sin(-h*u)*e,s+Math.cos(-h*u)*i);r.push(r[0],r[1])}},triangulate:function(t,e){var i=t.points,n=e.points,r=e.indices,o=n.length/2,s=o;n.push(t.shape.x,t.shape.y);for(var a=0;a<i.length;a+=2)n.push(i[a],i[a+1]),r.push(o++,s,o)}},I={build:function(t){var e=t.shape,i=e.x,n=e.y,r=e.width,o=e.height,s=t.points;s.length=0,s.push(i,n,i+r,n,i+r,n+o,i,n+o)},triangulate:function(t,e){var i=t.points,n=e.points,r=n.length/2;n.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),e.indices.push(r,r+1,r+2,r+1,r+2,r+3)}},k={build:function(t){var e=t.shape,i=t.points,n=e.x,r=e.y,o=e.width,s=e.height,a=e.radius;i.length=0,L(n,r+a,n,r,n+a,r,i),L(n+o-a,r,n+o,r,n+o,r+a,i),L(n+o,r+s-a,n+o,r+s,n+o-a,r+s,i),L(n+a,r+s,n,r+s,n,r+s-a,i)},triangulate:function(t,e){for(var i=t.points,n=e.points,r=e.indices,o=n.length/2,s=Object(a.earcut)(i,null,2),h=0,u=s.length;h<u;h+=3)r.push(s[h]+o),r.push(s[h+1]+o),r.push(s[h+2]+o);for(var l=0,c=i.length;l<c;l++)n.push(i[l],i[++l])}};function R(t,e,i){return t+(e-t)*i}function L(t,e,i,n,r,o,s){void 0===s&&(s=[]);for(var a=s,h=0,u=0,l=0,c=0,f=0,d=0,p=0,g=0;p<=20;++p)h=R(t,i,g=p/20),u=R(e,n,g),l=R(i,r,g),c=R(n,o,g),f=R(h,l,g),d=R(u,c,g),a.push(f,d);return a}function D(t,e){t.lineStyle.native?function(t,e){var i=0,n=t.shape,r=t.points||n.points,o=n.type!==f.l.POLY||n.closeStroke;if(0===r.length)return;var s=e.points,a=e.indices,h=r.length/2,u=s.length/2,l=u;for(s.push(r[0],r[1]),i=1;i<h;i++)s.push(r[2*i],r[2*i+1]),a.push(l,l+1),l++;o&&a.push(l,u)}(t,e):function(t,e){var i=t.shape,n=t.points||i.points.slice(),r=e.closePointEps;if(0===n.length)return;var o=t.lineStyle,s=new f.g(n[0],n[1]),a=new f.g(n[n.length-2],n[n.length-1]),h=i.type!==f.l.POLY||i.closeStroke,u=Math.abs(s.x-a.x)<r&&Math.abs(s.y-a.y)<r;if(h){n=n.slice(),u&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));var l=a.x+.5*(s.x-a.x),c=a.y+.5*(s.y-a.y);n.unshift(l,c),n.push(l,c)}var d=e.points,p=n.length/2,g=n.length,v=d.length/2,m=o.width/2,y=n[0],b=n[1],_=n[2],w=n[3],x=0,E=0,T=-(b-w),S=y-_,A=0,P=0,C=0,M=0,O=Math.sqrt(T*T+S*S);T/=O,S/=O,T*=m,S*=m;var I=o.alignment,k=2*(1-I),R=2*I;d.push(y-T*k,b-S*k),d.push(y+T*R,b+S*R);for(var L=1;L<p-1;++L){y=n[2*(L-1)],b=n[2*(L-1)+1],_=n[2*L],w=n[2*L+1],x=n[2*(L+1)],E=n[2*(L+1)+1],T=-(b-w),S=y-_,O=Math.sqrt(T*T+S*S),T/=O,S/=O,T*=m,S*=m,A=-(w-E),P=_-x,O=Math.sqrt(A*A+P*P),A/=O,P/=O;var D=-S+b-(-S+w),F=-T+_-(-T+y),N=(-T+y)*(-S+w)-(-T+_)*(-S+b),U=-(P*=m)+E-(-P+w),B=-(A*=m)+_-(-A+x),j=(-A+x)*(-P+w)-(-A+_)*(-P+E),X=D*B-U*F;if(Math.abs(X)<.1)X+=10.1,d.push(_-T*k,w-S*k),d.push(_+T*R,w+S*R);else{var V=(F*j-B*N)/X,z=(U*N-D*j)/X;(V-_)*(V-_)+(z-w)*(z-w)>196*m*m?(C=T-A,M=S-P,O=Math.sqrt(C*C+M*M),C/=O,M/=O,C*=m,M*=m,d.push(_-C*k,w-M*k),d.push(_+C*R,w+M*R),d.push(_-C*R*k,w-M*k),g++):(d.push(_+(V-_)*k,w+(z-w)*k),d.push(_-(V-_)*R,w-(z-w)*R))}}y=n[2*(p-2)],b=n[2*(p-2)+1],_=n[2*(p-1)],w=n[2*(p-1)+1],T=-(b-w),S=y-_,O=Math.sqrt(T*T+S*S),T/=O,S/=O,T*=m,S*=m,d.push(_-T*k,w-S*k),d.push(_+T*R,w+S*R);for(var Y=e.indices,W=0;W<g-2;++W)Y.push(v,v+1,v+2),v++}(t,e)}var F=function(t){function e(e,i,n,r,o,s){o=o||r/2;for(var a=-1*Math.PI/2+s,h=2*n,u=f.f/h,l=[],c=0;c<h;c++){var d=c%2?o:r,p=c*u+a;l.push(e+d*Math.cos(p),i+d*Math.sin(p))}t.call(this,l)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(f.h),N=function(){};N.curveTo=function(t,e,i,n,r,o){var s=o[o.length-2],a=o[o.length-1]-e,h=s-t,u=n-e,l=i-t,c=Math.abs(a*l-h*u);if(c<1e-8||0===r)return o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e),null;var f=a*a+h*h,d=u*u+l*l,p=a*u+h*l,g=r*Math.sqrt(f)/c,v=r*Math.sqrt(d)/c,m=g*p/f,y=v*p/d,b=g*l+v*h,_=g*u+v*a,w=h*(v+m),x=a*(v+m),E=l*(g+y),T=u*(g+y);return{cx:b+t,cy:_+e,radius:r,startAngle:Math.atan2(x-_,w-b),endAngle:Math.atan2(T-_,E-b),anticlockwise:h*u>l*a}},N.arc=function(t,e,i,n,r,o,s,a,h){for(var u=s-o,l=P._segmentsCount(Math.abs(u)*r,40*Math.ceil(Math.abs(u)/f.f)),c=u/(2*l),d=2*c,p=Math.cos(c),g=Math.sin(c),v=l-1,m=v%1/v,y=0;y<=v;++y){var b=c+o+d*(y+m*y),_=Math.cos(b),w=-Math.sin(b);h.push((p*_+g*w)*r+i,(p*-w+g*_)*r+n)}};var U=function(){};U.curveLength=function(t,e,i,n,r,o,s,a){for(var h=0,u=0,l=0,c=0,f=0,d=0,p=0,g=0,v=0,m=0,y=0,b=t,_=e,w=1;w<=10;++w)m=b-(g=(p=(d=(f=1-(u=w/10))*f)*f)*t+3*d*u*i+3*f*(l=u*u)*r+(c=l*u)*s),y=_-(v=p*e+3*d*u*n+3*f*l*o+c*a),b=g,_=v,h+=Math.sqrt(m*m+y*y);return h},U.curveTo=function(t,e,i,n,r,o,s){var a=s[s.length-2],h=s[s.length-1];s.length-=2;var u=P._segmentsCount(U.curveLength(a,h,t,e,i,n,r,o)),l=0,c=0,f=0,d=0,p=0;s.push(a,h);for(var g=1,v=0;g<=u;++g)f=(c=(l=1-(v=g/u))*l)*l,p=(d=v*v)*v,s.push(f*a+3*c*v*t+3*l*d*i+p*r,f*h+3*c*v*e+3*l*d*n+p*o)};var B=function(){};B.curveLength=function(t,e,i,n,r,o){var s=t-2*i+r,a=e-2*n+o,h=2*i-2*t,u=2*n-2*e,l=4*(s*s+a*a),c=4*(s*h+a*u),f=h*h+u*u,d=2*Math.sqrt(l+c+f),p=Math.sqrt(l),g=2*l*p,v=2*Math.sqrt(f),m=c/p;return(g*d+p*c*(d-v)+(4*f*l-c*c)*Math.log((2*p+m+d)/(m+v)))/(4*g)},B.curveTo=function(t,e,i,n,r){for(var o=r[r.length-2],s=r[r.length-1],a=P._segmentsCount(B.curveLength(o,s,t,e,i,n)),h=0,u=0,l=1;l<=a;++l){var c=l/a;h=o+(t-o)*c,u=s+(e-s)*c,r.push(h+(t+(i-t)*c-h)*c,u+(e+(n-e)*c-u)*c)}};var j=function(){this.reset()};j.prototype.begin=function(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i},j.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},j.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0};var X={};X[f.l.POLY]=M,X[f.l.CIRC]=O,X[f.l.ELIP]=O,X[f.l.RECT]=I,X[f.l.RREC]=k;var V=[],z=[],Y={buildPoly:M,buildCircle:O,buildRectangle:I,buildRoundedRectangle:k,FILL_COMMANDS:X,BATCH_POOL:V,DRAW_CALL_POOL:z,buildLine:D,buildComplexPoly:function(t,e){var i=t.points.slice();if(!(i.length<6)){var n=e.indices;e.points=i,e.alpha=t.fillAlpha,e.color=Object(a.hex2rgb)(t.fillColor);for(var r=1/0,o=-1/0,s=1/0,h=-1/0,u=0,l=0,c=0;c<i.length;c+=2)r=(u=i[c])<r?u:r,o=u>o?u:o,s=(l=i[c+1])<s?l:s,h=l>h?l:h;i.push(r,s,o,s,o,h,r,h);for(var f=i.length/2,d=0;d<f;d++)n.push(d)}},bezierCurveTo:function(t,e,i,n,r,o,s,a,h,u){void 0===u&&(u=[]);var l=0,c=0,f=0,d=0,p=0;u.push(t,e);for(var g=1,v=0;g<=h;++g)f=(c=(l=1-(v=g/h))*l)*l,p=(d=v*v)*v,u.push(f*t+3*c*v*i+3*l*d*r+p*s,f*e+3*c*v*n+3*l*d*o+p*a);return u},Star:F,ArcUtils:N,BezierUtils:U,QuadraticUtils:B,BatchPart:j},W=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=n,this.type=t.type,this.points=[],this.holes=[]};W.prototype.clone=function(){return new W(this.shape,this.fillStyle,this.lineStyle,this.matrix)},W.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null};var G=new f.g,H=new h.a,q=function(t){function e(){t.call(this),this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.dirty=0,this.batchDirty=-1,this.cacheDirty=-1,this.clearDirty=0,this.drawCalls=[],this.batches=[],this.shapeIndex=0,this._bounds=new h.a,this.boundsDirty=-1,this.boundsPadding=0,this.batchable=!1,this.indicesUint16=null,this.uvsFloat32=null,this.closePointEps=1e-4}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={bounds:{configurable:!0}};return i.bounds.get=function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].textures.length=0,z.push(this.drawCalls[t]);this.drawCalls.length=0;for(var e=0;e<this.batches.length;e++){var i=this.batches[e];i.start=0,i.attribStart=0,i.style=null,V.push(i)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,i,n){var r=new W(t,e,i,n);return this.graphicsData.push(r),this.dirty++,this},e.prototype.drawHole=function(t,e){if(!this.graphicsData.length)return null;var i=new W(t,null,null,e),n=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=n.lineStyle,n.holes.push(i),this.dirty++,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,i=0;i<e.length;++i){var n=e[i];if(n.fillStyle.visible&&(n.shape&&(n.matrix?n.matrix.applyInverse(t,G):G.copyFrom(t),n.shape.contains(G.x,G.y)))){var r=!1;if(n.holes)for(var o=0;o<n.holes.length;o++){if(n.holes[o].shape.contains(G.x,G.y)){r=!0;break}}if(!r)return!0}}return!1},e.prototype.updateBatches=function(){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,e=this.graphicsData,i=null,n=null;this.batches.length>0&&(n=(i=this.batches[this.batches.length-1]).style);for(var r=this.shapeIndex;r<e.length;r++){this.shapeIndex++;var o=e[r],s=o.fillStyle,a=o.lineStyle;X[o.type].build(o),o.matrix&&this.transformPoints(o.points,o.matrix);for(var h=0;h<2;h++){var u=0===h?s:a;if(u.visible){var l=u.texture.baseTexture,c=this.indices.length,f=this.points.length/2;l.wrapMode=A.n.REPEAT,i&&!this._compareStyles(n,u)&&(i.end(c,f),i.size>0&&(i=null)),i||((i=V.pop()||new j).begin(u,c,f),this.batches.push(i),n=u);var d=this.points.length/2;0===h?this.processFill(o):this.processLine(o);var p=this.points.length/2-d;this.addUvs(this.points,t,u.texture,d,p,u.matrix)}}}if(i){var g=this.indices.length,v=this.points.length/2;i.end(g,v),this.indicesUint16=new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native))},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var i=this.graphicsData[t],n=i.fillStyle,r=i.lineStyle;if(n&&!n.texture.baseTexture.valid)return!1;if(r&&!r.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,i=t.length;e<i;e++)for(var n=t[e],r=0;r<n.size;r++){var o=n.start+r;this.indicesUint16[o]=this.indicesUint16[o]-n.attribStart}},e.prototype.isBatchable=function(){for(var t=this.batches,i=0;i<t.length;i++)if(t[i].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++c.e._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].textures.length=0,z.push(this.drawCalls[e]);this.drawCalls.length=0;var i=this.colors,n=this.textureIds,r=z.pop();r||((r=new c.f).textures=new c.k),r.textures.count=0,r.start=0,r.size=0,r.type=A.c.TRIANGLES;var o=0,s=null,a=0,h=!1,u=A.c.TRIANGLES,l=0;this.drawCalls.push(r);for(var f=0;f<this.batches.length;f++){var d=this.batches[f],p=d.style,g=p.texture.baseTexture;h!==!!p.native&&(u=(h=!!p.native)?A.c.LINES:A.c.TRIANGLES,s=null,o=8,t++),s!==g&&(s=g,g._batchEnabled!==t&&(8===o&&(t++,o=0,r.size>0&&((r=z.pop())||((r=new c.f).textures=new c.k),this.drawCalls.push(r)),r.start=l,r.size=0,r.textures.count=0,r.type=u),g.touched=1,g._batchEnabled=t,g._batchLocation=o,g.wrapMode=10497,r.textures.elements[r.textures.count++]=g,o++)),r.size+=d.size,l+=d.size,a=g._batchLocation,this.addColors(i,p.color,p.alpha,d.attribSize),this.addTextureIds(n,a,d.attribSize)}c.e._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,i=this.colors,n=this.textureIds,r=new ArrayBuffer(3*t.length*4),o=new Float32Array(r),s=new Uint32Array(r),a=0,h=0;h<t.length/2;h++)o[a++]=t[2*h],o[a++]=t[2*h+1],o[a++]=e[2*h],o[a++]=e[2*h+1],s[a++]=i[h],o[a++]=n[h];this._buffer.update(r),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),M.triangulate(t,this)):X[t.type].triangulate(t,this)},e.prototype.processLine=function(t){D(t,this);for(var e=0;e<t.holes.length;e++)D(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var i=t[e];X[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,e=H,i=f.d.IDENTITY;this._bounds.clear(),e.clear();for(var n=0;n<this.graphicsData.length;n++){var r=this.graphicsData[n],o=r.shape,s=r.type,a=r.lineStyle,h=r.matrix||f.d.IDENTITY,u=0;if(a&&a.visible){var l=a.alignment;u=a.width,s===f.l.POLY?u*=.5+Math.abs(.5-l):u*=Math.max(0,l)}i!==h&&(e.isEmpty()||(t.addBoundsMatrix(e,i),e.clear()),i=h),s===f.l.RECT||s===f.l.RREC?e.addFramePad(o.x,o.y,o.x+o.width,o.y+o.height,u,u):s===f.l.CIRC?e.addFramePad(o.x,o.y,o.x,o.y,o.radius+u,o.radius+u):s===f.l.ELIP?e.addFramePad(o.x,o.y,o.x,o.y,o.width+u,o.height+u):t.addVerticesMatrix(i,o.points,0,o.points.length,u,u)}e.isEmpty()||t.addBoundsMatrix(e,i),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var i=0;i<t.length/2;i++){var n=t[2*i],r=t[2*i+1];t[2*i]=e.a*n+e.c*r+e.tx,t[2*i+1]=e.b*n+e.d*r+e.ty}},e.prototype.addColors=function(t,e,i,n){for(var r=(e>>16)+(65280&e)+((255&e)<<16),o=Object(a.premultiplyTint)(r,i);n-- >0;)t.push(o)},e.prototype.addTextureIds=function(t,e,i){for(;i-- >0;)t.push(e)},e.prototype.addUvs=function(t,e,i,n,r,o){for(var s=0,a=e.length,h=i.frame;s<r;){var u=t[2*(n+s)],l=t[2*(n+s)+1];if(o){var c=o.a*u+o.c*l+o.tx;l=o.b*u+o.d*l+o.ty,u=c}s++,e.push(u/h.width,l/h.height)}var f=i.baseTexture;(h.width<f.width||h.height<f.height)&&this.adjustUvs(e,i,a,r)},e.prototype.adjustUvs=function(t,e,i,n){for(var r=e.baseTexture,o=i+2*n,s=e.frame,a=s.width/r.width,h=s.height/r.height,u=s.x/s.width,l=s.y/s.height,c=Math.floor(t[i]+1e-6),f=Math.floor(t[i+1]+1e-6),d=i+2;d<o;d+=2)c=Math.min(c,Math.floor(t[d]+1e-6)),f=Math.min(f,Math.floor(t[d+1]+1e-6));u-=c,l-=f;for(var p=i;p<o;p+=2)t[p]=(t[p]+u)*a,t[p+1]=(t[p+1]+l)*h},Object.defineProperties(e.prototype,i),e}(c.g);q.BATCHABLE_SIZE=100;var Z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.width=0,this.alignment=.5,this.native=!1},e}(C),K=new Float32Array(3),J={},Q=function(t){function e(e){void 0===e&&(e=null),t.call(this),this.geometry=e||new q,this.geometry.refCount++,this.shader=null,this.state=c.C.for2d(),this._fillStyle=new C,this._lineStyle=new Z,this._matrix=null,this._holeMode=!1,this.currentPath=null,this.batches=[],this.batchTint=-1,this.vertexData=null,this._transformID=-1,this.batchDirty=-1,this.pluginName="batch",this.tint=16777215,this.blendMode=A.b.NORMAL}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={blendMode:{configurable:!0},tint:{configurable:!0},fill:{configurable:!0},line:{configurable:!0}};return e.prototype.clone=function(){return this.finishPoly(),new e(this.geometry)},i.blendMode.set=function(t){this.state.blendMode=t},i.blendMode.get=function(){return this.state.blendMode},i.tint.get=function(){return this._tint},i.tint.set=function(t){this._tint=t},i.fill.get=function(){return this._fillStyle},i.line.get=function(){return this._lineStyle},e.prototype.lineStyle=function(t){if("number"==typeof t){var e=arguments;t={width:e[0]||0,color:e[1]||0,alpha:void 0!==e[2]?e[2]:1,alignment:void 0!==e[3]?e[3]:.5,native:!!e[4]}}return this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){if("number"==typeof t){Object(a.deprecation)("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var e=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],o=arguments[4],s=arguments[5],h=arguments[6];t={width:e,texture:i,color:n,alpha:r,matrix:o,alignment:s,native:h},Object.keys(t).forEach((function(e){return void 0===t[e]&&delete t[e]}))}t=Object.assign({width:0,texture:c.E.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1},t),this.currentPath&&this.startPoly();var u=t.width>0&&t.alpha>0;return u?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:u},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new f.h,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new f.h,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,n=i[i.length-2],r=i[i.length-1];return n===t&&r===e||i.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,i,n){this._initCurve();var r=this.currentPath.points;return 0===r.length&&this.moveTo(0,0),B.curveTo(t,e,i,n,r),this},e.prototype.bezierCurveTo=function(t,e,i,n,r,o){return this._initCurve(),U.curveTo(t,e,i,n,r,o,this.currentPath.points),this},e.prototype.arcTo=function(t,e,i,n,r){this._initCurve(t,e);var o=this.currentPath.points,s=N.curveTo(t,e,i,n,r,o);if(s){var a=s.cx,h=s.cy,u=s.radius,l=s.startAngle,c=s.endAngle,f=s.anticlockwise;this.arc(a,h,u,l,c,f)}return this},e.prototype.arc=function(t,e,i,n,r,o){if(void 0===o&&(o=!1),n===r)return this;if(!o&&r<=n?r+=f.f:o&&n<=r&&(n+=f.f),0===r-n)return this;var s=t+Math.cos(n)*i,a=e+Math.sin(n)*i,h=this.geometry.closePointEps,u=this.currentPath?this.currentPath.points:null;if(u){var l=Math.abs(u[u.length-2]-s),c=Math.abs(u[u.length-1]-a);l<h&&c<h||u.push(s,a)}else this.moveTo(s,a),u=this.currentPath.points;return N.arc(s,a,t,e,i,n,r,o,u),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:c.E.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){if(t instanceof c.E){Object(a.deprecation)("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var e=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];t={texture:e,color:i,alpha:n,matrix:r},Object.keys(t).forEach((function(e){return void 0===t[e]&&delete t[e]}))}t=Object.assign({texture:c.E.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var o=t.alpha>0;return o?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:o},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,i,n){return this.drawShape(new f.j(t,e,i,n))},e.prototype.drawRoundedRect=function(t,e,i,n,r){return this.drawShape(new f.k(t,e,i,n,r))},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new f.a(t,e,i))},e.prototype.drawEllipse=function(t,e,i,n){return this.drawShape(new f.c(t,e,i,n))},e.prototype.drawPolygon=function(t){var e=arguments,i=t,n=!0;if(i.points&&(n=i.closeStroke,i=i.points),!Array.isArray(i)){i=new Array(arguments.length);for(var r=0;r<i.length;++r)i[r]=e[r]}var o=new f.h(i);return o.closeStroke=n,this.drawShape(o),this},e.prototype.drawShape=function(t){return this._holeMode?this.geometry.drawHole(t,this._matrix):this.geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.drawStar=function(t,e,i,n,r,o){return void 0===o&&(o=0),this.drawPolygon(new F(t,e,i,n,r,o))},e.prototype.clear=function(){return this.geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){return 1===this.geometry.graphicsData.length&&this.geometry.graphicsData[0].shape.type===f.l.RECT&&!this.geometry.graphicsData[0].lineWidth},e.prototype._render=function(t){this.finishPoly();var e=this.geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this.geometry,e=this.blendMode;this.batches=[],this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.vertexData=new Float32Array(t.points);for(var i=0,n=t.batches.length;i<n;i++){var r=t.batches[i],o=r.style.color,s=new Float32Array(this.vertexData.buffer,4*r.attribStart*2,2*r.attribSize),h=new Float32Array(t.uvsFloat32.buffer,4*r.attribStart*2,2*r.attribSize),u={vertexData:s,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*r.start,r.size),uvs:h,_batchRGB:Object(a.hex2rgb)(o),_tintRGB:o,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[i]=u}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,i=this.batches.length;e<i;e++){var n=this.batches[e];n.worldAlpha=this.worldAlpha*n.alpha,t.plugins[this.pluginName].render(n)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),i=this.geometry,n=this.tint,r=this.worldAlpha,o=e.uniforms,s=i.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(n>>16&255)/255*r,o.tint[1]=(n>>8&255)/255*r,o.tint[2]=(255&n)/255*r,o.tint[3]=r,t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(var a=0,h=s.length;a<h;a++)this._renderDrawCallDirect(t,i.drawCalls[a])},e.prototype._renderDrawCallDirect=function(t,e){for(var i=e.textures,n=e.type,r=e.size,o=e.start,s=i.count,a=0;a<s;a++)t.texture.bind(i.elements[a],a);t.geometry.draw(n,r,o)},e.prototype._resolveDirectShader=function(t){var e=this.shader,i=this.pluginName;if(!e){if(!J[i]){for(var n=new Int32Array(16),r=0;r<16;r++)n[r]=r;var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new f.d,default:c.H.from({uSamplers:n},!0)},s=t.plugins[i]._shader.program;J[i]=new c.A(s,o)}e=J[i]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this.geometry;if(t.graphicsData.length){var e=t.bounds,i=e.minX,n=e.minY,r=e.maxX,o=e.maxY;this._bounds.addFrame(this.transform,i,n,r,o)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this.geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Object(a.hex2rgb)(this.tint,K),e=0;e<this.batches.length;e++){var i=this.batches[e],n=i._batchRGB,r=(t[0]*n[0]*255<<16)+(t[1]*n[1]*255<<8)+(0|t[2]*n[2]*255);i._tintRGB=(r>>16)+(65280&r)+((255&r)<<16)}}},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID;for(var t=this.transform.worldTransform,e=t.a,i=t.b,n=t.c,r=t.d,o=t.tx,s=t.ty,a=this.geometry.points,h=this.vertexData,u=0,l=0;l<a.length;l+=2){var c=a[l],f=a[l+1];h[u++]=e*c+n*f+o,h[u++]=r*f+i*c+s}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this.geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},Object.defineProperties(e.prototype,i),e}(h.b);Q._TEMP_POINT=new f.g;
/*!
 * @pixi/sprite - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var $=new f.g,tt=new Uint16Array([0,1,2,0,2,3]),et=function(t){function e(e){t.call(this),this._anchor=new f.e(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=A.b.NORMAL,this.shader=null,this._cachedTint=16777215,this.uvs=null,this.texture=e||c.E.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=tt,this.size=4,this.start=0,this.pluginName="batch",this.isSprite=!0,this._roundPixels=S.b.ROUND_PIXELS}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={roundPixels:{configurable:!0},width:{configurable:!0},height:{configurable:!0},anchor:{configurable:!0},tint:{configurable:!0},texture:{configurable:!0}};return e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Object(a.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Object(a.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,i=e.a,n=e.b,r=e.c,o=e.d,s=e.tx,a=e.ty,h=this.vertexData,u=t.trim,l=t.orig,c=this._anchor,f=0,d=0,p=0,g=0;if(u?(f=(d=u.x-c._x*l.width)+u.width,p=(g=u.y-c._y*l.height)+u.height):(f=(d=-c._x*l.width)+l.width,p=(g=-c._y*l.height)+l.height),h[0]=i*d+r*g+s,h[1]=o*g+n*d+a,h[2]=i*f+r*g+s,h[3]=o*g+n*f+a,h[4]=i*f+r*p+s,h[5]=o*p+n*f+a,h[6]=i*d+r*p+s,h[7]=o*p+n*d+a,this._roundPixels)for(var v=0;v<8;v++)h[v]=Math.round(h[v])}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,r=this.transform.worldTransform,o=r.a,s=r.b,a=r.c,h=r.d,u=r.tx,l=r.ty,c=-n._x*i.width,f=c+i.width,d=-n._y*i.height,p=d+i.height;e[0]=o*c+a*d+u,e[1]=h*d+s*c+l,e[2]=o*f+a*d+u,e[3]=h*d+s*f+l,e[4]=o*f+a*p+u,e[5]=h*p+s*f+l,e[6]=o*c+a*p+u,e[7]=h*p+s*c+l},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new f.j),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,$);var e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x,r=0;return $.x>=n&&$.x<n+e&&(r=-i*this.anchor.y,$.y>=r&&$.y<r+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null,this.shader=null},e.from=function(t,i){return new e(t instanceof c.E?t:c.E.from(t,i))},i.roundPixels.set=function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},i.roundPixels.get=function(){return this._roundPixels},i.width.get=function(){return Math.abs(this.scale.x)*this._texture.orig.width},i.width.set=function(t){var e=Object(a.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},i.height.get=function(){return Math.abs(this.scale.y)*this._texture.orig.height},i.height.set=function(t){var e=Object(a.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},i.anchor.get=function(){return this._anchor},i.anchor.set=function(t){this._anchor.copyFrom(t)},i.tint.get=function(){return this._tint},i.tint.set=function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},i.texture.get=function(){return this._texture},i.texture.set=function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||c.E.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},Object.defineProperties(e.prototype,i),e}(h.b),it={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},nt={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:it.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},rt=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],ot=function(t){this.styleID=0,this.reset(),ut(this,t,t)},st={align:{configurable:!0},breakWords:{configurable:!0},dropShadow:{configurable:!0},dropShadowAlpha:{configurable:!0},dropShadowAngle:{configurable:!0},dropShadowBlur:{configurable:!0},dropShadowColor:{configurable:!0},dropShadowDistance:{configurable:!0},fill:{configurable:!0},fillGradientType:{configurable:!0},fillGradientStops:{configurable:!0},fontFamily:{configurable:!0},fontSize:{configurable:!0},fontStyle:{configurable:!0},fontVariant:{configurable:!0},fontWeight:{configurable:!0},letterSpacing:{configurable:!0},lineHeight:{configurable:!0},leading:{configurable:!0},lineJoin:{configurable:!0},miterLimit:{configurable:!0},padding:{configurable:!0},stroke:{configurable:!0},strokeThickness:{configurable:!0},textBaseline:{configurable:!0},trim:{configurable:!0},whiteSpace:{configurable:!0},wordWrap:{configurable:!0},wordWrapWidth:{configurable:!0}};function at(t){return"number"==typeof t?Object(a.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function ht(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=at(t[e]);return t}return at(t)}function ut(t,e,i){for(var n in i)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}ot.prototype.clone=function(){var t={};return ut(t,this,nt),new ot(t)},ot.prototype.reset=function(){ut(this,nt,nt)},st.align.get=function(){return this._align},st.align.set=function(t){this._align!==t&&(this._align=t,this.styleID++)},st.breakWords.get=function(){return this._breakWords},st.breakWords.set=function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},st.dropShadow.get=function(){return this._dropShadow},st.dropShadow.set=function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},st.dropShadowAlpha.get=function(){return this._dropShadowAlpha},st.dropShadowAlpha.set=function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},st.dropShadowAngle.get=function(){return this._dropShadowAngle},st.dropShadowAngle.set=function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},st.dropShadowBlur.get=function(){return this._dropShadowBlur},st.dropShadowBlur.set=function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},st.dropShadowColor.get=function(){return this._dropShadowColor},st.dropShadowColor.set=function(t){var e=ht(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},st.dropShadowDistance.get=function(){return this._dropShadowDistance},st.dropShadowDistance.set=function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},st.fill.get=function(){return this._fill},st.fill.set=function(t){var e=ht(t);this._fill!==e&&(this._fill=e,this.styleID++)},st.fillGradientType.get=function(){return this._fillGradientType},st.fillGradientType.set=function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},st.fillGradientStops.get=function(){return this._fillGradientStops},st.fillGradientStops.set=function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},st.fontFamily.get=function(){return this._fontFamily},st.fontFamily.set=function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},st.fontSize.get=function(){return this._fontSize},st.fontSize.set=function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},st.fontStyle.get=function(){return this._fontStyle},st.fontStyle.set=function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},st.fontVariant.get=function(){return this._fontVariant},st.fontVariant.set=function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},st.fontWeight.get=function(){return this._fontWeight},st.fontWeight.set=function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},st.letterSpacing.get=function(){return this._letterSpacing},st.letterSpacing.set=function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},st.lineHeight.get=function(){return this._lineHeight},st.lineHeight.set=function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},st.leading.get=function(){return this._leading},st.leading.set=function(t){this._leading!==t&&(this._leading=t,this.styleID++)},st.lineJoin.get=function(){return this._lineJoin},st.lineJoin.set=function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},st.miterLimit.get=function(){return this._miterLimit},st.miterLimit.set=function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},st.padding.get=function(){return this._padding},st.padding.set=function(t){this._padding!==t&&(this._padding=t,this.styleID++)},st.stroke.get=function(){return this._stroke},st.stroke.set=function(t){var e=ht(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},st.strokeThickness.get=function(){return this._strokeThickness},st.strokeThickness.set=function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},st.textBaseline.get=function(){return this._textBaseline},st.textBaseline.set=function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},st.trim.get=function(){return this._trim},st.trim.set=function(t){this._trim!==t&&(this._trim=t,this.styleID++)},st.whiteSpace.get=function(){return this._whiteSpace},st.whiteSpace.set=function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},st.wordWrap.get=function(){return this._wordWrap},st.wordWrap.set=function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},st.wordWrapWidth.get=function(){return this._wordWrapWidth},st.wordWrapWidth.set=function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},ot.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&rt.indexOf(n)<0&&(n='"'+n+'"'),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},Object.defineProperties(ot.prototype,st);var lt=function(t,e,i,n,r,o,s,a,h){this.text=t,this.style=e,this.width=i,this.height=n,this.lines=r,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=a,this.fontProperties=h};lt.measureText=function(t,e,i,n){void 0===n&&(n=lt._canvas),i=null==i?e.wordWrap:i;var r=e.toFontString(),o=lt.measureFont(r);0===o.fontSize&&(o.fontSize=e.fontSize,o.ascent=e.fontSize);var s=n.getContext("2d");s.font=r;for(var a=(i?lt.wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),h=new Array(a.length),u=0,l=0;l<a.length;l++){var c=s.measureText(a[l]).width+(a[l].length-1)*e.letterSpacing;h[l]=c,u=Math.max(u,c)}var f=u+e.strokeThickness;e.dropShadow&&(f+=e.dropShadowDistance);var d=e.lineHeight||o.fontSize+e.strokeThickness,p=Math.max(d,o.fontSize+e.strokeThickness)+(a.length-1)*(d+e.leading);return e.dropShadow&&(p+=e.dropShadowDistance),new lt(t,e,f,p,a,h,d+e.leading,u,o)},lt.wordWrap=function(t,e,i){void 0===i&&(i=lt._canvas);for(var n=i.getContext("2d"),r=0,o="",s="",a={},h=e.letterSpacing,u=e.whiteSpace,l=lt.collapseSpaces(u),c=lt.collapseNewlines(u),f=!l,d=e.wordWrapWidth+h,p=lt.tokenize(t),g=0;g<p.length;g++){var v=p[g];if(lt.isNewline(v)){if(!c){s+=lt.addLine(o),f=!l,o="",r=0;continue}v=" "}if(l){var m=lt.isBreakingSpace(v),y=lt.isBreakingSpace(o[o.length-1]);if(m&&y)continue}var b=lt.getFromCache(v,h,a,n);if(b>d)if(""!==o&&(s+=lt.addLine(o),o="",r=0),lt.canBreakWords(v,e.breakWords))for(var _=v.split(""),w=0;w<_.length;w++){for(var x=_[w],E=1;_[w+E];){var T=_[w+E],S=x[x.length-1];if(lt.canBreakChars(S,T,v,w,e.breakWords))break;x+=T,E++}w+=x.length-1;var A=lt.getFromCache(x,h,a,n);A+r>d&&(s+=lt.addLine(o),f=!1,o="",r=0),o+=x,r+=A}else{o.length>0&&(s+=lt.addLine(o),o="",r=0);var P=g===p.length-1;s+=lt.addLine(v,!P),f=!1,o="",r=0}else b+r>d&&(f=!1,s+=lt.addLine(o),o="",r=0),(o.length>0||!lt.isBreakingSpace(v)||f)&&(o+=v,r+=b)}return s+=lt.addLine(o,!1)},lt.addLine=function(t,e){return void 0===e&&(e=!0),t=lt.trimRight(t),t=e?t+"\n":t},lt.getFromCache=function(t,e,i,n){var r=i[t];if(void 0===r){var o=t.length*e;r=n.measureText(t).width+o,i[t]=r}return r},lt.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},lt.collapseNewlines=function(t){return"normal"===t},lt.trimRight=function(t){if("string"!=typeof t)return"";for(var e=t.length-1;e>=0;e--){var i=t[e];if(!lt.isBreakingSpace(i))break;t=t.slice(0,-1)}return t},lt.isNewline=function(t){return"string"==typeof t&&lt._newlines.indexOf(t.charCodeAt(0))>=0},lt.isBreakingSpace=function(t){return"string"==typeof t&&lt._breakingSpaces.indexOf(t.charCodeAt(0))>=0},lt.tokenize=function(t){var e=[],i="";if("string"!=typeof t)return e;for(var n=0;n<t.length;n++){var r=t[n];lt.isBreakingSpace(r)||lt.isNewline(r)?(""!==i&&(e.push(i),i=""),e.push(r)):i+=r}return""!==i&&e.push(i),e},lt.canBreakWords=function(t,e){return e},lt.canBreakChars=function(t,e,i,n,r){return!0},lt.measureFont=function(t){if(lt._fonts[t])return lt._fonts[t];var e={},i=lt._canvas,n=lt._context;n.font=t;var r=lt.METRICS_STRING+lt.BASELINE_SYMBOL,o=Math.ceil(n.measureText(r).width),s=Math.ceil(n.measureText(lt.BASELINE_SYMBOL).width),a=2*s;s=s*lt.BASELINE_MULTIPLIER|0,i.width=o,i.height=a,n.fillStyle="#f00",n.fillRect(0,0,o,a),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(r,0,s);var h=n.getImageData(0,0,o,a).data,u=h.length,l=4*o,c=0,f=0,d=!1;for(c=0;c<s;++c){for(var p=0;p<l;p+=4)if(255!==h[f+p]){d=!0;break}if(d)break;f+=l}for(e.ascent=s-c,f=u-l,d=!1,c=a;c>s;--c){for(var g=0;g<l;g+=4)if(255!==h[f+g]){d=!0;break}if(d)break;f-=l}return e.descent=c-s,e.fontSize=e.ascent+e.descent,lt._fonts[t]=e,e},lt.clearMetrics=function(t){void 0===t&&(t=""),t?delete lt._fonts[t]:lt._fonts={}};var ct=function(){try{var t=new OffscreenCanvas(0,0);return t.getContext("2d")?t:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();ct.width=ct.height=10,lt._canvas=ct,lt._context=ct.getContext("2d"),lt._fonts={},lt.METRICS_STRING="|ÉqÅ",lt.BASELINE_SYMBOL="M",lt.BASELINE_MULTIPLIER=1.4,lt._newlines=[10,13],lt._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var ft={texture:!0,children:!1,baseTexture:!0},dt=function(t){function e(e,i,n){(n=n||document.createElement("canvas")).width=3,n.height=3;var r=c.E.from(n);r.orig=new f.j,r.trim=new f.j,t.call(this,r),this.canvas=n,this.context=this.canvas.getContext("2d"),this._resolution=S.b.RESOLUTION,this._autoResolution=!0,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=i,this.localStyleID=-1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={width:{configurable:!0},height:{configurable:!0},style:{configurable:!0},text:{configurable:!0},resolution:{configurable:!0}};return e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i,n,r=this.context,o=lt.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=o.width,h=o.height,u=o.lines,l=o.lineHeight,c=o.lineWidths,f=o.maxLineWidth,d=o.fontProperties;this.canvas.width=Math.ceil((Math.max(1,s)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,h)+2*e.padding)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;for(var p=e.dropShadow?2:1,g=0;g<p;++g){var v=e.dropShadow&&0===g,m=v?2*h:0,y=m*this.resolution;if(v){r.fillStyle="black",r.strokeStyle="black";var b=e.dropShadowColor,_=Object(a.hex2rgb)("number"==typeof b?b:Object(a.string2hex)(b));r.shadowColor="rgba("+255*_[0]+","+255*_[1]+","+255*_[2]+","+e.dropShadowAlpha+")",r.shadowBlur=e.dropShadowBlur,r.shadowOffsetX=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,r.shadowOffsetY=Math.sin(e.dropShadowAngle)*e.dropShadowDistance+y}else r.fillStyle=this._generateFillStyle(e,u),r.strokeStyle=e.stroke,r.shadowColor=0,r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;for(var w=0;w<u.length;w++)i=e.strokeThickness/2,n=e.strokeThickness/2+w*l+d.ascent,"right"===e.align?i+=f-c[w]:"center"===e.align&&(i+=(f-c[w])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(u[w],i+e.padding,n+e.padding-m,!0),e.fill&&this.drawLetterSpacing(u[w],i+e.padding,n+e.padding-m)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i,n){void 0===n&&(n=!1);var r=this._style.letterSpacing;if(0!==r)for(var o=e,s=Array.from?Array.from(t):t.split(""),a=this.context.measureText(t).width,h=0,u=0;u<s.length;++u){var l=s[u];n?this.context.strokeText(l,o,i):this.context.fillText(l,o,i),o+=a-(h=this.context.measureText(t.substring(u+1)).width)+r,a=h}else n?this.context.strokeText(t,e,i):this.context.fillText(t,e,i)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=Object(a.trimCanvas)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,n=this._style,r=n.trim?0:n.padding,o=i.baseTexture;i.trim.width=i._frame.width=Math.ceil(t.width/this._resolution),i.trim.height=i._frame.height=Math.ceil(t.height/this._resolution),i.trim.x=-r,i.trim.y=-r,i.orig.width=i._frame.width-2*r,i.orig.height=i._frame.height-2*r,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(1===t.fill.length)return t.fill[0];var i,n,r,o,s=Math.ceil(this.canvas.width/this._resolution),a=Math.ceil(this.canvas.height/this._resolution),h=t.fill.slice(),u=t.fillGradientStops.slice();if(!u.length)for(var l=h.length+1,c=1;c<l;++c)u.push(c/l);if(h.unshift(t.fill[0]),u.unshift(0),h.push(t.fill[t.fill.length-1]),u.push(1),t.fillGradientType===it.LINEAR_VERTICAL){i=this.context.createLinearGradient(s/2,0,s/2,a),n=(h.length+1)*e.length,r=0;for(var f=0;f<e.length;f++){r+=1;for(var d=0;d<h.length;d++)o="number"==typeof u[d]?u[d]/e.length+f/e.length:r/n,i.addColorStop(o,h[d]),r++}}else{i=this.context.createLinearGradient(0,a/2,s,a/2),n=h.length+1,r=1;for(var p=0;p<h.length;p++)o="number"==typeof u[p]?u[p]:r/n,i.addColorStop(o,h[p]),r++}return i},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},ft,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},i.width.get=function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},i.width.set=function(t){this.updateText(!0);var e=Object(a.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},i.height.get=function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},i.height.set=function(t){this.updateText(!0);var e=Object(a.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},i.style.get=function(){return this._style},i.style.set=function(t){t=t||{},this._style=t instanceof ot?t:new ot(t),this.localStyleID=-1,this.dirty=!0},i.text.get=function(){return this._text},i.text.set=function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},i.resolution.get=function(){return this._resolution},i.resolution.set=function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},Object.defineProperties(e.prototype,i),e}(et);
/*!
 * @pixi/prepare - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
S.b.UPLOADS_PER_FRAME=4;var pt=function(t){this.maxItemsPerFrame=t,this.itemsLeft=0};pt.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},pt.prototype.allowedToUpload=function(){return this.itemsLeft-- >0};var gt=function(t){var e=this;this.limiter=new pt(S.b.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(wt),this.registerFindHook(xt),this.registerFindHook(vt),this.registerFindHook(mt),this.registerFindHook(yt),this.registerUploadHook(bt),this.registerUploadHook(_t)};function vt(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof c.E){var r=t._textures[n].baseTexture;-1===e.indexOf(r)&&(e.push(r),i=!0)}return i}function mt(t,e){if(t.baseTexture instanceof c.e){var i=t.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function yt(t,e){if(t._texture&&t._texture instanceof c.E){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function bt(t,e){return e instanceof dt&&(e.updateText(!0),!0)}function _t(t,e){if(e instanceof ot){var i=e.toFontString();return lt.measureFont(i),!0}return!1}function wt(t,e){if(t instanceof dt){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function xt(t,e){return t instanceof ot&&(-1===e.indexOf(t)&&e.push(t),!0)}gt.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,g.a.system.addOnce(this.tick,this,g.c.UTILITY))):e&&e()},gt.prototype.tick=function(){setTimeout(this.delayedTick,0)},gt.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)g.a.system.addOnce(this.tick,this,g.c.UTILITY);else{this.ticking=!1;var r=this.completes.slice(0);this.completes.length=0;for(var o=0,s=r.length;o<s;o++)r[o]()}},gt.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},gt.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},gt.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof h.b)for(var n=t.children.length-1;n>=0;n--)this.add(t.children[n]);return this},gt.prototype.destroy=function(){this.ticking&&g.a.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null};var Et=function(t){function e(e){t.call(this,e),this.uploadHookHelper=this.renderer,this.registerFindHook(At),this.registerUploadHook(Tt),this.registerUploadHook(St)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(gt);function Tt(t,e){return e instanceof c.e&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function St(t,e){if(!(e instanceof Q))return!1;var i=e.geometry;e.finishPoly(),i.updateBatches();for(var n=i.batches,r=0;r<n.length;r++){var o=n[r].style.texture;o&&Tt(t,o.baseTexture)}return i.batchable||t.geometry.bind(i,e._resolveDirectShader()),!0}function At(t,e){return t instanceof Q&&(e.push(t),!0)}var Pt=function(t){this.maxMilliseconds=t,this.frameStart=0};Pt.prototype.beginFrame=function(){this.frameStart=Date.now()},Pt.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds};
/*!
 * @pixi/app - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Ct=function t(e){var i=this;e=Object.assign({forceCanvas:!1},e),this.renderer=Object(c.J)(e),this.stage=new h.b,t._plugins.forEach((function(t){t.init.call(i,e)}))},Mt={view:{configurable:!0},screen:{configurable:!0}};Ct.registerPlugin=function(t){Ct._plugins.push(t)},Ct.prototype.render=function(){this.renderer.render(this.stage)},Mt.view.get=function(){return this.renderer.view},Mt.screen.get=function(){return this.renderer.screen},Ct.prototype.destroy=function(t,e){var i=this,n=Ct._plugins.slice(0);n.reverse(),n.forEach((function(t){t.destroy.call(i)})),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},Object.defineProperties(Ct.prototype,Mt),Ct._plugins=[];var Ot=function(){};Ot.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){window.removeEventListener("resize",this.resize),this._resizeTo=t,t&&(window.addEventListener("resize",this.resize),this.resize())},get:function(){return this._resizeTo}}),this.resize=function(){e._resizeTo&&(e._resizeTo===window?e.renderer.resize(window.innerWidth,window.innerHeight):e.renderer.resize(e._resizeTo.clientWidth,e._resizeTo.clientHeight))},this._resizeTo=null,this.resizeTo=t.resizeTo||null},Ot.destroy=function(){this.resizeTo=null,this.resize=null},Ct.registerPlugin(Ot);var It=i(24),kt=function(t){function e(e,i,n,r){void 0===e&&(e=1500),void 0===n&&(n=16384),void 0===r&&(r=!1),t.call(this);n>16384&&(n=16384),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=n,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=A.b.NORMAL,this.autoResize=r,this.roundPixels=!0,this.baseTexture=null,this.setProperties(i),this._tint=0,this.tintRgb=new Float32Array(4),this.tint=16777215}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={tint:{configurable:!0}};return e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},i.tint.get=function(){return this._tint},i.tint.set=function(t){this._tint=t,Object(a.hex2rgb)(t,this.tintRgb)},e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},Object.defineProperties(e.prototype,i),e}(h.b),Rt=function(t,e,i){this.geometry=new c.r,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<t.length;++n){var r=t[n];r={attributeName:r.attributeName,size:r.size,uploadFunction:r.uploadFunction,type:r.type||A.m.FLOAT,offset:r.offset},e[n]?this.dynamicProperties.push(r):this.staticProperties.push(r)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()};
/*!
 * @pixi/particles - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/particles is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Rt.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new c.l(Object(a.createIndicesForQuads)(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];n.offset=e,e+=n.size,this.dynamicStride+=n.size}var r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new c.l(this.dynamicData,!1,!1);var o=0;this.staticStride=0;for(var s=0;s<this.staticProperties.length;++s){var h=this.staticProperties[s];h.offset=o,o+=h.size,this.staticStride+=h.size}var u=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(u),this.staticDataUint32=new Uint32Array(u),this.staticBuffer=new c.l(this.staticData,!0,!1);for(var l=0;l<this.dynamicProperties.length;++l){var f=this.dynamicProperties[l];t.addAttribute(f.attributeName,this.dynamicBuffer,0,f.type===A.m.UNSIGNED_BYTE,f.type,4*this.dynamicStride,4*f.offset)}for(var d=0;d<this.staticProperties.length;++d){var p=this.staticProperties[d];t.addAttribute(p.attributeName,this.staticBuffer,0,p.type===A.m.UNSIGNED_BYTE,p.type,4*this.staticStride,4*p.offset)}},Rt.prototype.uploadDynamic=function(t,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var r=this.dynamicProperties[n];r.uploadFunction(t,e,i,r.type===A.m.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer._updateID++},Rt.prototype.uploadStatic=function(t,e,i){for(var n=0;n<this.staticProperties.length;n++){var r=this.staticProperties[n];r.uploadFunction(t,e,i,r.type===A.m.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,r.offset)}this.staticBuffer._updateID++},Rt.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()};var Lt=function(t){function e(e){t.call(this,e),this.shader=null,this.properties=null,this.tempMatrix=new f.d,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:A.m.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=c.A.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(t){var e=t.children,i=t._maxSize,n=t._batchSize,r=this.renderer,o=e.length;if(0!==o){o>i&&!t.autoResize&&(o=i);var s=t._buffers;s||(s=t._buffers=this.generateBuffers(t));var h=e[0]._texture.baseTexture;this.renderer.state.setBlendMode(Object(a.correctBlendMode)(t.blendMode,h.alphaMode));var u=r.gl,l=t.worldTransform.copyTo(this.tempMatrix);l.prepend(r.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=l.toArray(!0),this.shader.uniforms.uColor=Object(a.premultiplyRgba)(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h.alphaMode),this.shader.uniforms.uSampler=h,this.renderer.shader.bind(this.shader);for(var c=!1,f=0,d=0;f<o;f+=n,d+=1){var p=o-f;p>n&&(p=n),d>=s.length&&s.push(this._generateOneMoreBuffer(t));var g=s[d];g.uploadDynamic(e,f,p);var v=t._bufferUpdateIDs[d]||0;(c=c||g._updateID<v)&&(g._updateID=t._updateID,g.uploadStatic(e,f,p)),r.geometry.bind(g.geometry),u.drawElements(u.TRIANGLES,6*p,u.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],i=t._maxSize,n=t._batchSize,r=t._properties,o=0;o<i;o+=n)e.push(new Rt(this.properties,r,n));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,i=t._properties;return new Rt(this.properties,i,e)},e.prototype.uploadVertices=function(t,e,i,n,r,o){for(var s=0,a=0,h=0,u=0,l=0;l<i;++l){var c=t[e+l],f=c._texture,d=c.scale.x,p=c.scale.y,g=f.trim,v=f.orig;g?(s=(a=g.x-c.anchor.x*v.width)+g.width,h=(u=g.y-c.anchor.y*v.height)+g.height):(s=v.width*(1-c.anchor.x),a=v.width*-c.anchor.x,h=v.height*(1-c.anchor.y),u=v.height*-c.anchor.y),n[o]=a*d,n[o+1]=u*p,n[o+r]=s*d,n[o+r+1]=u*p,n[o+2*r]=s*d,n[o+2*r+1]=h*p,n[o+3*r]=a*d,n[o+3*r+1]=h*p,o+=4*r}},e.prototype.uploadPosition=function(t,e,i,n,r,o){for(var s=0;s<i;s++){var a=t[e+s].position;n[o]=a.x,n[o+1]=a.y,n[o+r]=a.x,n[o+r+1]=a.y,n[o+2*r]=a.x,n[o+2*r+1]=a.y,n[o+3*r]=a.x,n[o+3*r+1]=a.y,o+=4*r}},e.prototype.uploadRotation=function(t,e,i,n,r,o){for(var s=0;s<i;s++){var a=t[e+s].rotation;n[o]=a,n[o+r]=a,n[o+2*r]=a,n[o+3*r]=a,o+=4*r}},e.prototype.uploadUvs=function(t,e,i,n,r,o){for(var s=0;s<i;++s){var a=t[e+s]._texture._uvs;a?(n[o]=a.x0,n[o+1]=a.y0,n[o+r]=a.x1,n[o+r+1]=a.y1,n[o+2*r]=a.x2,n[o+2*r+1]=a.y2,n[o+3*r]=a.x3,n[o+3*r+1]=a.y3,o+=4*r):(n[o]=0,n[o+1]=0,n[o+r]=0,n[o+r+1]=0,n[o+2*r]=0,n[o+2*r+1]=0,n[o+3*r]=0,n[o+3*r+1]=0,o+=4*r)}},e.prototype.uploadTint=function(t,e,i,n,r,o){for(var s=0;s<i;++s){var h=t[e+s],u=h._texture.baseTexture.alphaMode>0,l=h.alpha,c=l<1&&u?Object(a.premultiplyTint)(h._tintRGB,l):h._tintRGB+(255*l<<24);n[o]=c,n[o+r]=c,n[o+2*r]=c,n[o+3*r]=c,o+=4*r}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(c.t),Dt=function(t,e,i){void 0===i&&(i=null),this.baseTexture=t,this.textures={},this.animations={},this.data=e,this.resolution=this._updateResolution(i||(this.baseTexture.resource?this.baseTexture.resource.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null},Ft={BATCH_SIZE:{configurable:!0}};Ft.BATCH_SIZE.get=function(){return 1e3},Dt.prototype._updateResolution=function(t){var e=this.data.meta.scale,i=Object(a.getResolutionOfUrl)(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&this.baseTexture.setResolution(i),i},Dt.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=Dt.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},Dt.prototype._processFrames=function(t){for(var e=t,i=Dt.BATCH_SIZE;e-t<i&&e<this._frameKeys.length;){var n=this._frameKeys[e],r=this._frames[n],o=r.frame;if(o){var s=null,a=null,h=!1!==r.trimmed&&r.sourceSize?r.sourceSize:r.frame,u=new f.j(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);s=r.rotated?new f.j(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):new f.j(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),!1!==r.trimmed&&r.spriteSourceSize&&(a=new f.j(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[n]=new c.E(this.baseTexture,s,u,a,r.rotated?2:0,r.anchor),c.E.addToCache(this.textures[n],n)}e++}},Dt.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var i=0;i<t[e].length;i++){var n=t[e][i];this.animations[e].push(this.textures[n])}}},Dt.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},Dt.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*Dt.BATCH_SIZE),this._batchIndex++,setTimeout((function(){t._batchIndex*Dt.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())}),0)},Dt.prototype.destroy=function(t){for(var e in void 0===t&&(t=!1),this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},Object.defineProperties(Dt,Ft);var Nt=function(){};Nt.use=function(t,e){var i=t.name+"_image";if(t.data&&t.type===It.c.TYPE.JSON&&t.data.frames&&!this.resources[i]){var n={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},r=Nt.getResourcePath(t,this.baseUrl);this.add(i,r,n,(function(i){if(i.error)e(i.error);else{var n=new Dt(i.texture.baseTexture,t.data,t.url);n.parse((function(){t.spritesheet=n,t.textures=n.textures,e()}))}}))}else e()},Nt.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:a.url.resolve(t.url.replace(e,""),t.data.meta.image)};
/*!
 * @pixi/sprite-tiling - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Ut=new f.g,Bt=function(t){function e(e,i,n){void 0===i&&(i=100),void 0===n&&(n=100),t.call(this,e),this.tileTransform=new f.m,this._width=i,this._height=n,this._canvasPattern=null,this.uvMatrix=e.uvMatrix||new c.F(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={clampMargin:{configurable:!0},tileScale:{configurable:!0},tilePosition:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return i.clampMargin.get=function(){return this.uvMatrix.clampMargin},i.clampMargin.set=function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},i.tileScale.get=function(){return this.tileTransform.scale},i.tileScale.set=function(t){this.tileTransform.scale.copyFrom(t)},i.tilePosition.get=function(){return this.tileTransform.position},i.tilePosition.set=function(t){this.tileTransform.position.copyFrom(t)},e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,n)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new f.j),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Ut);var e=this._width,i=this._height,n=-e*this.anchor._x;if(Ut.x>=n&&Ut.x<n+e){var r=-i*this.anchor._y;if(Ut.y>=r&&Ut.y<r+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,i,n){return new e(c.E.from(t),i,n)},e.fromFrame=function(t,i,n){var r=a.TextureCache[t];if(!r)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(r,i,n)},e.fromImage=function(t,i,n,r){return r&&"object"!=typeof r&&(r={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),new e(c.E.from(t,r),i,n)},i.width.get=function(){return this._width},i.width.set=function(t){this._width=t},i.height.get=function(){return this._height},i.height.set=function(t){this._height=t},Object.defineProperties(e.prototype,i),e}(et),jt="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",Xt=new f.d,Vt=function(t){function e(e){t.call(this,e);var i={globals:this.renderer.globalUniforms};this.shader=c.A.from(jt,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord - floor(vTextureCoord - uClampOffset);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",i),this.simpleShader=c.A.from(jt,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",i),this.quad=new c.w}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(t){var e=this.renderer,i=this.quad,n=i.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((n=i.uvs)[0]=n[6]=-t.anchor.x,n[1]=n[3]=-t.anchor.y,n[2]=n[4]=1-t.anchor.x,n[5]=n[7]=1-t.anchor.y),i.invalidate();var r=t._texture,o=r.baseTexture,s=t.tileTransform.localTransform,h=t.uvMatrix,u=o.isPowerOfTwo&&r.frame.width===o.width&&r.frame.height===o.height;u&&(o._glTextures[e.CONTEXT_UID]?u=o.wrapMode!==A.n.CLAMP:o.wrapMode===A.n.CLAMP&&(o.wrapMode=A.n.REPEAT));var l=u?this.simpleShader:this.shader,c=r.width,f=r.height,d=t._width,p=t._height;Xt.set(s.a*c/d,s.b*c/p,s.c*f/d,s.d*f/p,s.tx/d,s.ty/p),Xt.invert(),u?Xt.prepend(h.mapCoord):(l.uniforms.uMapCoord=h.mapCoord.toArray(!0),l.uniforms.uClampFrame=h.uClampFrame,l.uniforms.uClampOffset=h.uClampOffset),l.uniforms.uTransform=Xt.toArray(!0),l.uniforms.uColor=Object(a.premultiplyTintToRgba)(t.tint,t.worldAlpha,l.uniforms.uColor,o.alphaMode),l.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),l.uniforms.uSampler=r,e.shader.bind(l),e.geometry.bind(i),e.state.setBlendMode(Object(a.correctBlendMode)(t.blendMode,o.alphaMode)),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(c.t),zt=function(t){function e(e,i){var n=this;void 0===i&&(i={}),t.call(this),this._textWidth=0,this._textHeight=0,this._glyphs=[],this._font={tint:void 0!==i.tint?i.tint:16777215,align:i.align||"left",name:null,size:0},this.font=i.font,this._text=e,this._maxWidth=0,this._maxLineHeight=0,this._letterSpacing=0,this._anchor=new f.e((function(){n.dirty=!0}),this,0,0),this.dirty=!1,this.roundPixels=S.b.ROUND_PIXELS,this.updateText()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={tint:{configurable:!0},align:{configurable:!0},anchor:{configurable:!0},font:{configurable:!0},text:{configurable:!0},maxWidth:{configurable:!0},maxLineHeight:{configurable:!0},textWidth:{configurable:!0},letterSpacing:{configurable:!0},textHeight:{configurable:!0}};return e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],i=this._font.size/t.size,n=new f.g,r=[],o=[],s=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",h=s.length,u=this._maxWidth*t.size/this._font.size,l=null,c=0,d=0,p=0,g=-1,v=0,m=0,y=0,b=0;b<h;b++){var _=s.charCodeAt(b),w=s.charAt(b);if(/(?:\s)/.test(w)&&(g=b,v=c),"\r"!==w&&"\n"!==w){var x=t.chars[_];x&&(l&&x.kerning[l]&&(n.x+=x.kerning[l]),r.push({texture:x.texture,line:p,charCode:_,position:new f.g(n.x+x.xOffset+this._letterSpacing/2,n.y+x.yOffset)}),n.x+=x.xAdvance+this._letterSpacing,c=n.x,y=Math.max(y,x.yOffset+x.texture.height),l=_,-1!==g&&u>0&&n.x>u&&(++m,Object(a.removeItems)(r,1+g-m,1+b-g),b=g,g=-1,o.push(v),d=Math.max(d,v),p++,n.x=0,n.y+=t.lineHeight,l=null))}else o.push(c),d=Math.max(d,c),++p,++m,n.x=0,n.y+=t.lineHeight,l=null}var E=s.charAt(s.length-1);"\r"!==E&&"\n"!==E&&(/(?:\s)/.test(E)&&(c=v),o.push(c),d=Math.max(d,c));for(var T=[],S=0;S<=p;S++){var A=0;"right"===this._font.align?A=d-o[S]:"center"===this._font.align&&(A=(d-o[S])/2),T.push(A)}for(var P=r.length,C=this.tint,M=0;M<P;M++){var O=this._glyphs[M];O?O.texture=r[M].texture:((O=new et(r[M].texture)).roundPixels=this.roundPixels,this._glyphs.push(O)),O.position.x=(r[M].position.x+T[r[M].line])*i,O.position.y=r[M].position.y*i,O.scale.x=O.scale.y=i,O.tint=C,O.parent||this.addChild(O)}for(var I=P;I<this._glyphs.length;++I)this.removeChild(this._glyphs[I]);if(this._textWidth=d*i,this._textHeight=(n.y+t.lineHeight)*i,0!==this.anchor.x||0!==this.anchor.y)for(var k=0;k<P;k++)this._glyphs[k].x-=this._textWidth*this.anchor.x,this._glyphs[k].y-=this._textHeight*this.anchor.y;this._maxLineHeight=y*i},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},i.tint.get=function(){return this._font.tint},i.tint.set=function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0},i.align.get=function(){return this._font.align},i.align.set=function(t){this._font.align=t||"left",this.dirty=!0},i.anchor.get=function(){return this._anchor},i.anchor.set=function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},i.font.get=function(){return this._font},i.font.set=function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)},i.text.get=function(){return this._text},i.text.set=function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},i.maxWidth.get=function(){return this._maxWidth},i.maxWidth.set=function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},i.maxLineHeight.get=function(){return this.validate(),this._maxLineHeight},i.textWidth.get=function(){return this.validate(),this._textWidth},i.letterSpacing.get=function(){return this._letterSpacing},i.letterSpacing.set=function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},i.textHeight.get=function(){return this.validate(),this._textHeight},e.registerFont=function(t,i){var n={},r=t.getElementsByTagName("info")[0],o=t.getElementsByTagName("common")[0],s=t.getElementsByTagName("page"),h=Object(a.getResolutionOfUrl)(s[0].getAttribute("file"),S.b.RESOLUTION),u={};n.font=r.getAttribute("face"),n.size=parseInt(r.getAttribute("size"),10),n.lineHeight=parseInt(o.getAttribute("lineHeight"),10)/h,n.chars={},i instanceof c.E&&(i=[i]);for(var l=0;l<s.length;l++){var d=s[l].getAttribute("id"),p=s[l].getAttribute("file");u[d]=i instanceof Array?i[l]:i[p]}for(var g=t.getElementsByTagName("char"),v=0;v<g.length;v++){var m=g[v],y=parseInt(m.getAttribute("id"),10),b=m.getAttribute("page")||0,_=new f.j(parseInt(m.getAttribute("x"),10)/h+u[b].frame.x/h,parseInt(m.getAttribute("y"),10)/h+u[b].frame.y/h,parseInt(m.getAttribute("width"),10)/h,parseInt(m.getAttribute("height"),10)/h);n.chars[y]={xOffset:parseInt(m.getAttribute("xoffset"),10)/h,yOffset:parseInt(m.getAttribute("yoffset"),10)/h,xAdvance:parseInt(m.getAttribute("xadvance"),10)/h,kerning:{},texture:new c.E(u[b].baseTexture,_),page:b}}for(var w=t.getElementsByTagName("kerning"),x=0;x<w.length;x++){var E=w[x],T=parseInt(E.getAttribute("first"),10)/h,A=parseInt(E.getAttribute("second"),10)/h,P=parseInt(E.getAttribute("amount"),10)/h;n.chars[A]&&(n.chars[A].kerning[T]=P)}return e.fonts[n.font]=n,n},Object.defineProperties(e.prototype,i),e}(h.b);zt.fonts={};var Yt=function(){};Yt.parse=function(t,e){t.bitmapFont=zt.registerFont(t.data,e)},Yt.add=function(){It.c.setExtensionXhrType("fnt",It.c.XHR_RESPONSE_TYPE.DOCUMENT)},Yt.dirname=function(t){var e=t.replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},Yt.use=function(t,e){if(t.data&&t.type===It.c.TYPE.XML)if(0!==t.data.getElementsByTagName("page").length&&0!==t.data.getElementsByTagName("info").length&&null!==t.data.getElementsByTagName("info")[0].getAttribute("face")){var i=t.isDataUrl?"":Yt.dirname(t.url);t.isDataUrl&&("."===i&&(i=""),this.baseUrl&&i&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/")),(i=i.replace(this.baseUrl,""))&&"/"!==i.charAt(i.length-1)&&(i+="/");for(var n=t.data.getElementsByTagName("page"),r={},o=function(i){r[i.metadata.pageFile]=i.texture,Object.keys(r).length===n.length&&(Yt.parse(t,r),e())},s=0;s<n.length;++s){var a=n[s].getAttribute("file"),h=i+a,u=!1;for(var l in this.resources){var c=this.resources[l];if(c.url===h){c.metadata.pageFile=a,c.texture?o(c):c.onAfterMiddleware.add(o),u=!0;break}}if(!u){var f={crossOrigin:t.crossOrigin,loadType:It.c.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:a},t.metadata.imageMetadata),parentResource:t};this.add(h,f,o)}}}else e();else e()};var Wt=i(103),Gt=i(80),Ht=function(t){function e(){var e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};t.call(this,c.L,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",e),this.alpha=1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={matrix:{configurable:!0},alpha:{configurable:!0}};return e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),n=Math.sin(t),r=1/3,o=(0,Math.sqrt)(r),s=[i+(1-i)*r,r*(1-i)-o*n,r*(1-i)+o*n,0,0,r*(1-i)+o*n,i+r*(1-i),r*(1-i)-o*n,0,0,r*(1-i)-o*n,r*(1-i)+o*n,i+r*(1-i),0,0,0,0,0,1,0];this._loadMatrix(s,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,n=-.5*(i-1),r=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var i=2*t/3+1,n=-.5*(i-1),r=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,i,n,r){var o=((i=i||16770432)>>16&255)/255,s=(i>>8&255)/255,a=(255&i)/255,h=((n=n||3375104)>>16&255)/255,u=(n>>8&255)/255,l=(255&n)/255,c=[.3,.59,.11,0,0,o,s,a,t=t||.2,0,h,u,l,e=e||.15,0,o-h,s-u,a-l,0,0];this._loadMatrix(c,r)},e.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},i.matrix.get=function(){return this.uniforms.m},i.matrix.set=function(t){this.uniforms.m=t},i.alpha.get=function(){return this.uniforms.uAlpha},i.alpha.set=function(t){this.uniforms.uAlpha=t},Object.defineProperties(e.prototype,i),e}(c.n);Ht.prototype.grayscale=Ht.prototype.greyscale;
/*!
 * @pixi/filter-displacement - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var qt=function(t){function e(e,i){var n=new f.d;e.renderable=!1,t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,null==i&&(i=20),this.scale=new f.g(i,i)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={map:{configurable:!0}};return e.prototype.apply=function(t,e,i,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var r=this.maskSprite.transform.worldTransform,o=Math.sqrt(r.a*r.a+r.b*r.b),s=Math.sqrt(r.c*r.c+r.d*r.d);0!==o&&0!==s&&(this.uniforms.rotation[0]=r.a/o,this.uniforms.rotation[1]=r.b/o,this.uniforms.rotation[2]=r.c/s,this.uniforms.rotation[3]=r.d/s),t.applyFilter(this,e,i,n)},i.map.get=function(){return this.uniforms.mapSampler},i.map.set=function(t){this.uniforms.mapSampler=t},Object.defineProperties(e.prototype,i),e}(c.n),Zt=function(t){function e(){t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(c.n),Kt=function(t){function e(e,i){void 0===e&&(e=.5),void 0===i&&(i=Math.random()),t.call(this,c.L,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0}),this.noise=e,this.seed=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={noise:{configurable:!0},seed:{configurable:!0}};return i.noise.get=function(){return this.uniforms.uNoise},i.noise.set=function(t){this.uniforms.uNoise=t},i.seed.get=function(){return this.uniforms.uSeed},i.seed.set=function(t){this.uniforms.uSeed=t},Object.defineProperties(e.prototype,i),e}(c.n),Jt=new f.d;h.c.prototype._cacheAsBitmap=!1,h.c.prototype._cacheData=!1;var Qt=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(h.c.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new Qt),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),h.c.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},h.c.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.batch.flush();var i=this.getLocalBounds().clone();if(this.filters){var n=this.filters[0].padding;i.pad(n)}i.ceil(S.b.RESOLUTION);var r=t.renderTexture.current,o=t.renderTexture.sourceFrame,s=t.projection.transform,h=c.x.create(i.width,i.height),u="cacheAsBitmap_"+Object(a.uid)();this._cacheData.textureCacheId=u,c.e.addToCache(h.baseTexture,u),c.E.addToCache(h,u);var l=Jt;l.tx=-i.x,l.ty=-i.y,this.transform.worldTransform.identity(),this.render=this._cacheData.originalRender,t.render(this,h,!0,l,!0),t.projection.transform=s,t.renderTexture.bind(r,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var f=new et(h);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-i.x/i.width,f.anchor.y=-i.y/i.height,f.alpha=e,f._bounds=this._bounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=f.containsPoint.bind(f)}},h.c.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},h.c.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),i=this.alpha;this.alpha=1;var n=t.context;e.ceil(S.b.RESOLUTION);var r=c.x.create(e.width,e.height),o="cacheAsBitmap_"+Object(a.uid)();this._cacheData.textureCacheId=o,c.e.addToCache(r.baseTexture,o),c.E.addToCache(r,o);var s=Jt;this.transform.localTransform.copyTo(s),s.invert(),s.tx-=e.x,s.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,r,!0,s,!1),t.context=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var h=new et(r);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-e.x/e.width,h.anchor.y=-e.y/e.height,h.alpha=i,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)}},h.c.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},h.c.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},h.c.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,c.e.removeFromCache(this._cacheData.textureCacheId),c.E.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},h.c.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},
/*!
 * @pixi/mixin-get-child-by-name - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
h.c.prototype.name=null,h.b.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null},
/*!
 * @pixi/mixin-get-global-position - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
h.c.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new f.g),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};
/*!
 * @pixi/mesh - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var $t=function(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0};$t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}};var te=new f.g,ee=new f.h,ie=function(t){function e(e,i,n,r){void 0===r&&(r=A.c.TRIANGLES),t.call(this),this.geometry=e,e.refCount++,this.shader=i,this.state=n||c.C.for2d(),this.drawMode=r,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=0,this._transformID=-1,this.tint=16777215,this.blendMode=A.b.NORMAL,this._roundPixels=S.b.ROUND_PIXELS,this.batchUvs=null}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={uvBuffer:{configurable:!0},verticesBuffer:{configurable:!0},material:{configurable:!0},blendMode:{configurable:!0},roundPixels:{configurable:!0},tint:{configurable:!0},texture:{configurable:!0}};return i.uvBuffer.get=function(){return this.geometry.buffers[1]},i.verticesBuffer.get=function(){return this.geometry.buffers[0]},i.material.set=function(t){this.shader=t},i.material.get=function(){return this.shader},i.blendMode.set=function(t){this.state.blendMode=t},i.blendMode.get=function(){return this.state.blendMode},i.roundPixels.set=function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},i.roundPixels.get=function(){return this._roundPixels},i.tint.get=function(){return this.shader.tint},i.tint.set=function(t){this.shader.tint=t},i.texture.get=function(){return this.shader.texture},i.texture.set=function(t){this.shader.texture=t},e.prototype._render=function(t){var i=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===A.c.TRIANGLES&&i.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var i=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[i]),t.plugins[i].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry,e=t.buffers[0].data;if(t.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var i=this.transform.worldTransform,n=i.a,r=i.b,o=i.c,s=i.d,a=i.tx,h=i.ty,u=this.vertexData,l=0;l<u.length/2;l++){var c=e[2*l],f=e[2*l+1];u[2*l]=n*c+o*f+a,u[2*l+1]=r*c+s*f+h}if(this._roundPixels)for(var d=0;d<u.length;d++)u[d]=Math.round(u[d]);this.vertexDirty=t.vertexDirtyId}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new $t(t,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,te);for(var e=this.geometry.getBuffer("aVertexPosition").data,i=ee.points,n=this.geometry.getIndex().data,r=n.length,o=4===this.drawMode?3:1,s=0;s+2<r;s+=o){var a=2*n[s],h=2*n[s+1],u=2*n[s+2];if(i[0]=e[a],i[1]=e[a+1],i[2]=e[h],i[3]=e[h+1],i[4]=e[u],i[5]=e[u+1],ee.contains(te.x,te.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},Object.defineProperties(e.prototype,i),e}(h.b);ie.BATCHABLE_SIZE=100;var ne=function(t){function e(e,i){var n={uSampler:e,alpha:1,uTextureMatrix:f.d.IDENTITY,uColor:new Float32Array([1,1,1,1])};(i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i)).uniforms&&Object.assign(n,i.uniforms),t.call(this,i.program||c.u.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),n),this._colorDirty=!1,this.uvMatrix=new c.F(e),this.batchable=void 0===i.program,this.pluginName=i.pluginName,this.tint=i.tint,this.alpha=i.alpha}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={texture:{configurable:!0},alpha:{configurable:!0},tint:{configurable:!0}};return i.texture.get=function(){return this.uniforms.uSampler},i.texture.set=function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},i.alpha.set=function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},i.alpha.get=function(){return this._alpha},i.tint.set=function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},i.tint.get=function(){return this._tint},e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Object(a.premultiplyTintToRgba)(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},Object.defineProperties(e.prototype,i),e}(c.A),re=function(t){function e(e,i,n){t.call(this);var r=new c.l(e),o=new c.l(i,!0),s=new c.l(n,!0,!0);this.addAttribute("aVertexPosition",r,2,!1,A.m.FLOAT).addAttribute("aTextureCoord",o,2,!1,A.m.FLOAT).addIndex(s),this._updateId=-1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={vertexDirtyId:{configurable:!0}};return i.vertexDirtyId.get=function(){return this.buffers[0]._updateID},Object.defineProperties(e.prototype,i),e}(c.r),oe=function(t){function e(e,i,n,r){void 0===e&&(e=100),void 0===i&&(i=100),void 0===n&&(n=10),void 0===r&&(r=10),t.call(this),this.segWidth=n,this.segHeight=r,this.width=e,this.height=i,this.build()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],i=[],n=[],r=this.segWidth-1,o=this.segHeight-1,s=this.width/r,a=this.height/o,h=0;h<t;h++){var u=h%this.segWidth,l=h/this.segWidth|0;e.push(u*s,l*a),i.push(u/r,l/o)}for(var c=r*o,f=0;f<c;f++){var d=f%r,p=f/r|0,g=p*this.segWidth+d,v=p*this.segWidth+d+1,m=(p+1)*this.segWidth+d,y=(p+1)*this.segWidth+d+1;n.push(g,v,m,v,y,m)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(n),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(re),se=function(t){function e(e,i,n){void 0===e&&(e=200),void 0===n&&(n=0),t.call(this,new Float32Array(4*i.length),new Float32Array(4*i.length),new Uint16Array(6*(i.length-1))),this.points=i,this.width=e,this.textureScale=n,this.build()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),n=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),i.data=new Float32Array(4*t.length),n.data=new Uint16Array(6*(t.length-1)));var r=i.data,o=n.data;r[0]=0,r[1]=0,r[2]=0,r[3]=1;for(var s=0,a=t[0],h=this.width*this.textureScale,u=t.length,l=0;l<u;l++){var c=4*l;if(this.textureScale>0){var f=a.x-t[l].x,d=a.y-t[l].y,p=Math.sqrt(f*f+d*d);a=t[l],s+=p/h}else s=l/(u-1);r[c]=s,r[c+1]=0,r[c+2]=s,r[c+3]=1}for(var g=0,v=0;v<u-1;v++){var m=2*v;o[g++]=m,o[g++]=m+1,o[g++]=m+2,o[g++]=m+2,o[g++]=m+1,o[g++]=m+3}i.update(),n.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,i=t[0],n=0,r=0,o=this.buffers[0].data,s=t.length,a=0;a<s;a++){var h=t[a],u=4*a;r=-((e=a<t.length-1?t[a+1]:h).x-i.x),n=e.y-i.y;var l=Math.sqrt(n*n+r*r),c=this.textureScale>0?this.textureScale*this.width/2:this.width/2;n/=l,r/=l,n*=c,r*=c,o[u]=h.x+n,o[u+1]=h.y+r,o[u+2]=h.x-n,o[u+3]=h.y-r,i=h}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(re),ae=function(t){function e(e,i,n){void 0===n&&(n=0);var r=new se(e.height,i,n),o=new ne(e);n>0&&(e.baseTexture.wrapMode=A.n.REPEAT),t.call(this,r,o),this.autoUpdate=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._render=function(e){(this.autoUpdate||this.geometry.width!==this.shader.texture.height)&&(this.geometry.width=this.shader.texture.height,this.geometry.update()),t.prototype._render.call(this,e)},e}(ie),he=function(t){function e(e,i,n){var r=new oe(e.width,e.height,i,n),o=new ne(c.E.WHITE);t.call(this,r,o),this.texture=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={texture:{configurable:!0}};return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this.geometry.width=this.shader.texture.width,this.geometry.height=this.shader.texture.height,this.geometry.build()},i.texture.set=function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},i.texture.get=function(){return this.shader.texture},e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},Object.defineProperties(e.prototype,i),e}(ie),ue=function(t){function e(e,i,n,r,o){void 0===e&&(e=c.E.EMPTY);var s=new re(i,n,r);s.getBuffer("aVertexPosition").static=!1;var a=new ne(e);t.call(this,s,a,null,o),this.autoUpdate=!0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={vertices:{configurable:!0}};return i.vertices.get=function(){return this.geometry.getBuffer("aVertexPosition").data},i.vertices.set=function(t){this.geometry.getBuffer("aVertexPosition").data=t},e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},Object.defineProperties(e.prototype,i),e}(ie),le=function(t){function e(e,i,n,r,o){t.call(this,c.E.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=void 0!==i?i:10,this._rightWidth=void 0!==r?r:10,this._topHeight=void 0!==n?n:10,this._bottomHeight=void 0!==o?o:10,this.texture=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={vertices:{configurable:!0},width:{configurable:!0},height:{configurable:!0},leftWidth:{configurable:!0},rightWidth:{configurable:!0},topHeight:{configurable:!0},bottomHeight:{configurable:!0}};return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},i.vertices.get=function(){return this.geometry.getBuffer("aVertexPosition").data},i.vertices.set=function(t){this.geometry.getBuffer("aVertexPosition").data=t},e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._topHeight+this._bottomHeight,i=this._height>e?1:this._height/e;t[9]=t[11]=t[13]=t[15]=this._topHeight*i,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*i,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._leftWidth+this._rightWidth,i=this._width>e?1:this._width/e;t[2]=t[10]=t[18]=t[26]=this._leftWidth*i,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*i,t[6]=t[14]=t[22]=t[30]=this._width},i.width.get=function(){return this._width},i.width.set=function(t){this._width=t,this._refresh()},i.height.get=function(){return this._height},i.height.set=function(t){this._height=t,this._refresh()},i.leftWidth.get=function(){return this._leftWidth},i.leftWidth.set=function(t){this._leftWidth=t,this._refresh()},i.rightWidth.get=function(){return this._rightWidth},i.rightWidth.set=function(t){this._rightWidth=t,this._refresh()},i.topHeight.get=function(){return this._topHeight},i.topHeight.set=function(t){this._topHeight=t,this._refresh()},i.bottomHeight.get=function(){return this._bottomHeight},i.bottomHeight.set=function(t){this._bottomHeight=t,this._refresh()},e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,n=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},Object.defineProperties(e.prototype,i),e}(he),ce=i(31),fe=function(t){function e(e,i){t.call(this,e[0]instanceof c.E?e[0]:e[0].texture),this._textures=null,this._durations=null,this.textures=e,this._autoUpdate=!1!==i,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this.playing=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={totalFrames:{configurable:!0},textures:{configurable:!0},currentFrame:{configurable:!0}};return e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&g.a.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&g.a.shared.add(this.update,this,g.c.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var i=[],n=0;n<t.length;++n)i.push(c.E.from(t[n]));return new e(i)},e.fromImages=function(t){for(var i=[],n=0;n<t.length;++n)i.push(c.E.from(t[n]));return new e(i)},i.totalFrames.get=function(){return this._textures.length},i.textures.get=function(){return this._textures},i.textures.set=function(t){if(t[0]instanceof c.E)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()},i.currentFrame.get=function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},Object.defineProperties(e.prototype,i),e}(et);i.d(e,"VERSION",(function(){return ge})),i.d(e,"filters",(function(){return ve})),i.d(e,"useDeprecated",(function(){return pe})),i.d(e,"accessibility",(function(){return n})),i.d(e,"extract",(function(){return r})),i.d(e,"interaction",(function(){return o})),i.d(e,"prepare",(function(){return s})),i.d(e,"utils",(function(){return a})),i.d(e,"Application",(function(){return Ct})),i.d(e,"AbstractBatchRenderer",(function(){return c.a})),i.d(e,"AbstractRenderer",(function(){return c.b})),i.d(e,"Attribute",(function(){return c.c})),i.d(e,"BaseRenderTexture",(function(){return c.d})),i.d(e,"BaseTexture",(function(){return c.e})),i.d(e,"BatchDrawCall",(function(){return c.f})),i.d(e,"BatchGeometry",(function(){return c.g})),i.d(e,"BatchPluginFactory",(function(){return c.h})),i.d(e,"BatchRenderer",(function(){return c.i})),i.d(e,"BatchShaderGenerator",(function(){return c.j})),i.d(e,"BatchTextureArray",(function(){return c.k})),i.d(e,"Buffer",(function(){return c.l})),i.d(e,"CubeTexture",(function(){return c.m})),i.d(e,"Filter",(function(){return c.n})),i.d(e,"Framebuffer",(function(){return c.o})),i.d(e,"GLProgram",(function(){return c.p})),i.d(e,"GLTexture",(function(){return c.q})),i.d(e,"Geometry",(function(){return c.r})),i.d(e,"MaskData",(function(){return c.s})),i.d(e,"ObjectRenderer",(function(){return c.t})),i.d(e,"Program",(function(){return c.u})),i.d(e,"Quad",(function(){return c.v})),i.d(e,"QuadUv",(function(){return c.w})),i.d(e,"RenderTexture",(function(){return c.x})),i.d(e,"RenderTexturePool",(function(){return c.y})),i.d(e,"Renderer",(function(){return c.z})),i.d(e,"Shader",(function(){return c.A})),i.d(e,"SpriteMaskFilter",(function(){return c.B})),i.d(e,"State",(function(){return c.C})),i.d(e,"System",(function(){return c.D})),i.d(e,"Texture",(function(){return c.E})),i.d(e,"TextureMatrix",(function(){return c.F})),i.d(e,"TextureUvs",(function(){return c.G})),i.d(e,"UniformGroup",(function(){return c.H})),i.d(e,"ViewableBuffer",(function(){return c.I})),i.d(e,"autoDetectRenderer",(function(){return c.J})),i.d(e,"checkMaxIfStatementsInShader",(function(){return c.K})),i.d(e,"defaultFilterVertex",(function(){return c.L})),i.d(e,"defaultVertex",(function(){return c.M})),i.d(e,"resources",(function(){return c.N})),i.d(e,"systems",(function(){return c.O})),i.d(e,"AppLoaderPlugin",(function(){return It.a})),i.d(e,"Loader",(function(){return It.b})),i.d(e,"LoaderResource",(function(){return It.c})),i.d(e,"TextureLoader",(function(){return It.d})),i.d(e,"ParticleContainer",(function(){return kt})),i.d(e,"ParticleRenderer",(function(){return Lt})),i.d(e,"Spritesheet",(function(){return Dt})),i.d(e,"SpritesheetLoader",(function(){return Nt})),i.d(e,"TilingSprite",(function(){return Bt})),i.d(e,"TilingSpriteRenderer",(function(){return Vt})),i.d(e,"BitmapFontLoader",(function(){return Yt})),i.d(e,"BitmapText",(function(){return zt})),i.d(e,"Ticker",(function(){return g.a})),i.d(e,"TickerPlugin",(function(){return g.b})),i.d(e,"UPDATE_PRIORITY",(function(){return g.c})),i.d(e,"ALPHA_MODES",(function(){return A.a})),i.d(e,"BLEND_MODES",(function(){return A.b})),i.d(e,"DRAW_MODES",(function(){return A.c})),i.d(e,"ENV",(function(){return A.d})),i.d(e,"FORMATS",(function(){return A.e})),i.d(e,"GC_MODES",(function(){return A.f})),i.d(e,"MASK_TYPES",(function(){return A.g})),i.d(e,"MIPMAP_MODES",(function(){return A.h})),i.d(e,"PRECISION",(function(){return A.i})),i.d(e,"RENDERER_TYPE",(function(){return A.j})),i.d(e,"SCALE_MODES",(function(){return A.k})),i.d(e,"TARGETS",(function(){return A.l})),i.d(e,"TYPES",(function(){return A.m})),i.d(e,"WRAP_MODES",(function(){return A.n})),i.d(e,"Bounds",(function(){return h.a})),i.d(e,"Container",(function(){return h.b})),i.d(e,"DisplayObject",(function(){return h.c})),i.d(e,"FillStyle",(function(){return C})),i.d(e,"GRAPHICS_CURVES",(function(){return P})),i.d(e,"Graphics",(function(){return Q})),i.d(e,"GraphicsData",(function(){return W})),i.d(e,"GraphicsGeometry",(function(){return q})),i.d(e,"LineStyle",(function(){return Z})),i.d(e,"graphicsUtils",(function(){return Y})),i.d(e,"Circle",(function(){return f.a})),i.d(e,"DEG_TO_RAD",(function(){return f.b})),i.d(e,"Ellipse",(function(){return f.c})),i.d(e,"Matrix",(function(){return f.d})),i.d(e,"ObservablePoint",(function(){return f.e})),i.d(e,"PI_2",(function(){return f.f})),i.d(e,"Point",(function(){return f.g})),i.d(e,"Polygon",(function(){return f.h})),i.d(e,"RAD_TO_DEG",(function(){return f.i})),i.d(e,"Rectangle",(function(){return f.j})),i.d(e,"RoundedRectangle",(function(){return f.k})),i.d(e,"SHAPES",(function(){return f.l})),i.d(e,"Transform",(function(){return f.m})),i.d(e,"groupD8",(function(){return f.n})),i.d(e,"Mesh",(function(){return ie})),i.d(e,"MeshBatchUvs",(function(){return $t})),i.d(e,"MeshGeometry",(function(){return re})),i.d(e,"MeshMaterial",(function(){return ne})),i.d(e,"NineSlicePlane",(function(){return le})),i.d(e,"PlaneGeometry",(function(){return oe})),i.d(e,"RopeGeometry",(function(){return se})),i.d(e,"SimpleMesh",(function(){return ue})),i.d(e,"SimplePlane",(function(){return he})),i.d(e,"SimpleRope",(function(){return ae})),i.d(e,"Runner",(function(){return ce.a})),i.d(e,"Sprite",(function(){return et})),i.d(e,"AnimatedSprite",(function(){return fe})),i.d(e,"TEXT_GRADIENT",(function(){return it})),i.d(e,"Text",(function(){return dt})),i.d(e,"TextMetrics",(function(){return lt})),i.d(e,"TextStyle",(function(){return ot})),i.d(e,"isMobile",(function(){return S.a})),i.d(e,"settings",(function(){return S.b}));
/*!
 * pixi.js - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var de="5.0.0";function pe(){var t=this;Object.defineProperties(t,{SVG_SIZE:{get:function(){return Object(a.deprecation)(de,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),t.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return Object(a.deprecation)(de,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),t.Transform}},TransformBase:{get:function(){return Object(a.deprecation)(de,"PIXI.TransformBase class has been removed, use PIXI.Transform"),t.Transform}},TRANSFORM_MODE:{get:function(){return Object(a.deprecation)(de,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return Object(a.deprecation)(de,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),t.Renderer}},CanvasRenderTarget:{get:function(){return Object(a.deprecation)(de,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),t.utils.CanvasRenderTarget}},loader:{get:function(){return Object(a.deprecation)(de,"PIXI.loader instance has moved to PIXI.Loader.shared"),t.Loader.shared}},FilterManager:{get:function(){return Object(a.deprecation)(de,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),t.systems.FilterSystem}},CanvasTinter:{get:function(){return Object(a.deprecation)("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),t.canvasUtils}},GroupD8:{get:function(){return Object(a.deprecation)("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),t.groupD8}}}),t.extras={},Object.defineProperties(t.extras,{TilingSprite:{get:function(){return Object(a.deprecation)(de,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),t.TilingSprite}},TilingSpriteRenderer:{get:function(){return Object(a.deprecation)(de,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),t.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return Object(a.deprecation)(de,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),t.AnimatedSprite}},BitmapText:{get:function(){return Object(a.deprecation)(de,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),t.BitmapText}}}),Object.defineProperties(t.utils,{getSvgSize:{get:function(){return Object(a.deprecation)(de,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),t.SVGResource.getSize}}}),t.mesh={},Object.defineProperties(t.mesh,{Mesh:{get:function(){return Object(a.deprecation)(de,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),t.SimpleMesh}},NineSlicePlane:{get:function(){return Object(a.deprecation)(de,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),t.NineSlicePlane}},Plane:{get:function(){return Object(a.deprecation)(de,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),t.SimplePlane}},Rope:{get:function(){return Object(a.deprecation)(de,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),t.SimpleRope}},RawMesh:{get:function(){return Object(a.deprecation)(de,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),t.Mesh}},CanvasMeshRenderer:{get:function(){return Object(a.deprecation)(de,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),t.CanvasMeshRenderer}},MeshRenderer:{get:function(){return Object(a.deprecation)(de,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),t.MeshRenderer}}}),t.particles={},Object.defineProperties(t.particles,{ParticleContainer:{get:function(){return Object(a.deprecation)(de,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),t.ParticleContainer}},ParticleRenderer:{get:function(){return Object(a.deprecation)(de,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),t.ParticleRenderer}}}),t.ticker={},Object.defineProperties(t.ticker,{Ticker:{get:function(){return Object(a.deprecation)(de,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),t.Ticker}},shared:{get:function(){return Object(a.deprecation)(de,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),t.Ticker.shared}}}),t.loaders={},Object.defineProperties(t.loaders,{Loader:{get:function(){return Object(a.deprecation)(de,"PIXI.loaders.Loader class has moved to PIXI.Loader"),t.Loader}},Resource:{get:function(){return Object(a.deprecation)(de,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),t.LoaderResource}},bitmapFontParser:{get:function(){return Object(a.deprecation)(de,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),t.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){return Object(a.deprecation)(de,"PIXI.loaders.parseBitmapFontData function has moved to PIXI.BitmapFontLoader.parse"),t.BitmapFontLoader.parse}},spritesheetParser:{get:function(){return Object(a.deprecation)(de,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),t.SpritesheetLoader.use}},getResourcePath:{get:function(){return Object(a.deprecation)(de,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),t.SpritesheetLoader.getResourcePath}}}),t.Loader.addPixiMiddleware=function(e){return Object(a.deprecation)(de,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),t.loaders.Loader.registerPlugin({use:e()})},Object.defineProperty(t.extract,"WebGLExtract",{get:function(){return Object(a.deprecation)(de,"PIXI.extract.WebGLExtract method has moved to PIXI.extract.Extract"),t.extract.Extract}}),Object.defineProperty(t.prepare,"WebGLPrepare",{get:function(){return Object(a.deprecation)(de,"PIXI.prepare.WebGLPrepare class has moved to PIXI.prepare.Prepare"),t.prepare.Prepare}}),t.Container.prototype._renderWebGL=function(t){Object(a.deprecation)(de,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(t)},t.Container.prototype.renderWebGL=function(t){Object(a.deprecation)(de,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(t)},t.DisplayObject.prototype.renderWebGL=function(t){Object(a.deprecation)(de,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(t)},t.Container.prototype.renderAdvancedWebGL=function(t){Object(a.deprecation)(de,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(t)},Object.defineProperties(t.settings,{TRANSFORM_MODE:{get:function(){return Object(a.deprecation)(de,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){Object(a.deprecation)(de,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var e=t.BaseTexture;e.prototype.loadSource=function(e){Object(a.deprecation)(de,"PIXI.BaseTexture.loadSource method has been deprecated");var i=t.resources.autoDetectResource(e);i.internal=!0,this.setResource(i),this.update()};var i=!1;Object.defineProperties(e.prototype,{hasLoaded:{get:function(){return Object(a.deprecation)(de,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){return Object(a.deprecation)(de,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&this.resource.url},set:function(t){Object(a.deprecation)(de,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=t)}},source:{get:function(){return Object(a.deprecation)(de,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource&&this.resource.source},set:function(t){Object(a.deprecation)(de,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=t)}},premultiplyAlpha:{get:function(){return Object(a.deprecation)("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(t){Object(a.deprecation)("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(t)}},_id:{get:function(){return i||(Object(a.deprecation)("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),i=!0),this._batchLocation},set:function(t){this._batchLocation=t}}}),e.fromImage=function(t,i,n,r){Object(a.deprecation)(de,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");var o={scale:r,crossorigin:i};return e.from(t,{scaleMode:n,resourceOptions:o})},e.fromCanvas=function(t,i){return Object(a.deprecation)(de,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),e.from(t,{scaleMode:i})},e.fromSVG=function(t,i,n,r){Object(a.deprecation)(de,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");var o={scale:r,crossorigin:i};return e.from(t,{scaleMode:n,resourceOptions:o})},Object.defineProperties(t.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return Object(a.deprecation)("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(t){Object(a.deprecation)("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(t)}}}),t.Point.prototype.copy=function(t){return Object(a.deprecation)(de,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(t)},t.ObservablePoint.prototype.copy=function(t){return Object(a.deprecation)(de,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(t)},t.Rectangle.prototype.copy=function(t){return Object(a.deprecation)(de,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(t)},t.Matrix.prototype.copy=function(t){return Object(a.deprecation)(de,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(t)},t.systems.StateSystem.prototype.setState=function(t){return Object(a.deprecation)("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(t)},Object.assign(t.systems.FilterSystem.prototype,{getRenderTarget:function(t,e){return Object(a.deprecation)(de,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(e)},returnRenderTarget:function(t){Object(a.deprecation)(de,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(t)},calculateScreenSpaceMatrix:function(t){Object(a.deprecation)(de,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var e=t.identity(),i=this.activeState,n=i.sourceFrame,r=i.destinationFrame;return e.translate(n.x/r.width,n.y/r.height),e.scale(r.width,r.height),e},calculateNormalizedScreenSpaceMatrix:function(t){Object(a.deprecation)(de,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var e=this.activeState,i=e.sourceFrame,n=e.destinationFrame,r=t.identity();r.translate(i.x/n.width,i.y/n.height);var o=n.width/i.width,s=n.height/i.height;return r.scale(o,s),r}}),Object.defineProperties(t.RenderTexture.prototype,{sourceFrame:{get:function(){return Object(a.deprecation)(de,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return Object(a.deprecation)(de,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var n=function(t){function e(e,i,n,r){Object(a.deprecation)(de,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),t.call(this,!0,e,i,n,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t.filters.BlurFilterPass),r=function(t){function e(e,i,n,r){Object(a.deprecation)(de,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),t.call(this,!1,e,i,n,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t.filters.BlurFilterPass);Object.assign(t.filters,{BlurXFilter:n,BlurYFilter:r});var o=t.Sprite,s=t.Texture,h=t.Graphics;function u(t,e,i,n){return Object(a.deprecation)(de,"PIXI.Sprite."+t+" method is deprecated, use PIXI.Sprite.from"),o.from(e,{resourceOptions:{scale:n,crossorigin:i}})}function l(t,e,i,n){return Object(a.deprecation)(de,"PIXI.Texture."+t+" method is deprecated, use PIXI.Texture.from"),s.from(e,{resourceOptions:{scale:n,crossorigin:i}})}h.prototype.generateCanvasTexture||(h.prototype.generateCanvasTexture=function(){Object(a.deprecation)(de,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(t.Graphics.prototype,"graphicsData",{get:function(){return Object(a.deprecation)(de,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}}),o.fromImage=u.bind(null,"fromImage"),o.fromSVG=u.bind(null,"fromSVG"),o.fromCanvas=u.bind(null,"fromCanvas"),o.fromVideo=u.bind(null,"fromVideo"),o.fromFrame=u.bind(null,"fromFrame"),s.fromImage=l.bind(null,"fromImage"),s.fromSVG=l.bind(null,"fromSVG"),s.fromCanvas=l.bind(null,"fromCanvas"),s.fromVideo=l.bind(null,"fromVideo"),s.fromFrame=l.bind(null,"fromFrame"),Object.defineProperty(t.AbstractRenderer.prototype,"autoResize",{get:function(){return Object(a.deprecation)(de,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(t){Object(a.deprecation)(de,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=t}}),Object.defineProperty(t.Renderer.prototype,"textureManager",{get:function(){return Object(a.deprecation)(de,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),t.utils.mixins={mixin:function(){Object(a.deprecation)(de,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){Object(a.deprecation)(de,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){Object(a.deprecation)(de,"PIXI.utils.mixins.performMixins function is no longer available")}}}c.z.registerPlugin("accessibility",l),c.z.registerPlugin("extract",p),c.z.registerPlugin("interaction",T),c.z.registerPlugin("particle",Lt),c.z.registerPlugin("prepare",Et),c.z.registerPlugin("batch",c.i),c.z.registerPlugin("tilingSprite",Vt),It.b.registerPlugin(Yt),It.b.registerPlugin(Nt),Ct.registerPlugin(g.b),Ct.registerPlugin(It.a);var ge="5.2.0",ve={AlphaFilter:Wt.a,BlurFilter:Gt.a,BlurFilterPass:Gt.b,ColorMatrixFilter:Ht,DisplacementFilter:qt,FXAAFilter:Zt,NoiseFilter:Kt}},function(t,e,i){"use strict";i.d(e,"b",(function(){return o}));var n=i(56),r=i.n(n);i.d(e,"a",(function(){return r.a}));var o={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:
/*!
 * @pixi/settings - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
function(t){var e=!0;if(r.a.tablet||r.a.phone){if(e=!1,r.a.apple.device){var i=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(i)parseInt(i[1],10)>=11&&(e=!0)}if(r.a.android.device){var n=navigator.userAgent.match(/Android\s([0-9.]*)/);if(n)parseInt(n[1],10)>=7&&(e=!0)}}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:r.a.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!r.a.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}},function(t,e,i){"use strict";var n,r,o,s,a=i(0),h=i(14),u=i.n(h),l=i(20);e.a=(s=(o=function(t,e,i){this.matrix?(this.matrix[0]=0,this.matrix[1]=0,this.matrix[2]=0):this.matrix=a.a.setUp(0,0,0),this.set(t,e,i)}).prototype,Object.defineProperty(s,"x",{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}}),Object.defineProperty(s,"y",{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}}),Object.defineProperty(s,"z",{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}}),s.toString=function(){return"["+this.matrix.join(",")+"]"},s.set=function(t,e,i){return t&&t.matrix?this.setVector(t,e):t&&"number"==typeof t.x&&"number"==typeof t.y?this.setXYZ(t.x,t.y,t.z):t&&Array.isArray(t)?this.setArray(t,e):this.setXYZ(t,e,i)},s.setXYZ=function(t,e,i){var n=this.matrix;return n[0]=t||0,n[1]=e||0,n[2]=i||0,this},s.setVector=function(t,e){return this.setArray(t.matrix,e)},s.setArray=function(t,e){for(var i=e||t.length,n=this.matrix;i--;)n[i]=t[i];return this},s.equals=function(t,e,i){var n=null,r=0,o=this.matrix;if(t&&Array.isArray(t)){for(r=e||t.length;r--;)if(o[r]!==t[r])return!1;return!0}if(t&&t.matrix){for(n=t.matrix,r=e||n.length;r--;)if(o[r]!==n[r])return!1;return!0}return!("number"!=typeof t||o[0]!==t||"number"==typeof e&&o[1]!==e||"number"==typeof i&&o[2]!==i)},s.magnitude=function(t){return Math.sqrt(this.magnitudeSquared(t))},s.magnitudeSquared=function(t){var e=0,i=0;for(t=t||this.matrix.length,i=0;i<t;i++)e+=Math.pow(this.matrix[i],2);return e},s.getAngle=function(){var t=this.magnitude(2),e=0;return 0!==t&&(e=Math.acos(this.x/t),this.y<0&&(e=2*Math.PI-e)),e},s.getUnit=function(){return o.setUp(this).normalize()},s.getInverse=function(){return o.setUp(this).multiply(-1)},s.normalize=function(){var t=this.magnitude();return 0===t?this:this.multiply(1/t)},s.cross=(n=function(t,e,i,n){return t*n-e*i},function(t){var e=n(this.y,this.z,t.y,t.z),i=-n(this.x,this.z,t.x,t.z),r=n(this.x,this.y,t.x,t.y);return this.x=e,this.y=i,this.z=r,this}),s.getCrossProduct=function(t){return o.setUp(this).cross(t)},s.rotate=function(t,e){var i,n,r,s,h=e,u=Math.cos(t),l=Math.sin(t),c=1-u,f=o.setUp();return h?"x"===h?h=f.setXYZ(1,0,0):"y"===h?h=f.setXYZ(0,1,0):"z"===h&&(h=f.setXYZ(0,0,1)):h=f.setXYZ(0,0,1),n=h.x,r=h.y,s=h.z,i=a.a.setUp(a.a.setUp(u+n*n*c,n*r*c-s*l,n*s*c+r*l),a.a.setUp(r*n*c+s*l,u+r*r*c,r*s*c-n*l),a.a.setUp(s*n*c-r*l,s*r*c+n*l,u+s*s*c)),this.multiply(i),f.recycle(),a.a.recycle(i,2),this},s.rotateAbout=function(t,e){var i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=t.x+(r*i-o*n),this.y=t.y+(r*n+o*i),this},s.multiply=function(t,e){var i=this.matrix;if(Array.isArray(t)){var n=Object(a.b)(i);2===t.length?(i[0]=n[0]*t[0][0]+n[1]*t[0][1],i[1]=n[0]*t[1][0]+n[1]*t[1][1]):t.length>=3&&(i[0]=n[0]*t[0][0]+n[1]*t[0][1]+n[2]*t[0][2],i[1]=n[0]*t[1][0]+n[1]*t[1][1]+n[2]*t[1][2],i[2]=n[0]*t[2][0]+n[1]*t[2][1]+n[2]*t[2][2]),a.a.recycle(n)}else for(var r=e||i.length,o=0;o<r;o++)i[o]*=t;return this},s.add=function(t,e,i){var n=t,r=0,s=0;for(Array.isArray(n)?r=e||this.matrix.length:n instanceof o?(n=n.matrix,r=e||this.matrix.length):(n=[t||0,e||0,i||0],r=this.matrix.length),s=0;s<r;s++)this.matrix[s]+=n[s];return this},s.addVector=function(t,e){return this.add(t,e)},s.subtractVector=function(t,e){var i=t.getInverse();return this.add(i,e),i.recycle(),this},s.perpendicular=function(t){var e=this.matrix,i=!0===t?-1:1,n=-this.matrix[1];return e[1]=e[0],e[0]=n,t&&(e[1]*=i,e[0]*=i),this},s.scale=function(t,e){return this.multiply(t,e)},s.dot=function(t,e){var i=0,n=0,r=this.matrix,o=t.matrix;for(n=e||r.length;n--;)i+=r[n]*(o[n]||0);return i},s.angleTo=function(t){var e=this.getUnit(),i=t.getUnit(),n=0;return e.magnitude()&&i.magnitude()?n=Math.acos(e.dot(i)):(platypus.debug.warn("Vector: Attempted to find the angle of a zero-length vector."),n=NaN),e.recycle(),i.recycle(),n},s.signedAngleTo=function(t,e){var i=this.getUnit(),n=t.getUnit(),r=i.getCrossProduct(n),o=0;return o=0===r.magnitude()?0:r.dot(e)<0?-Math.acos(i.dot(n)):Math.acos(i.dot(n)),i.recycle(),n.recycle(),r.recycle(),o},s.scalarProjection=function(t){var e=null,i=0;return"number"==typeof t?this.magnitude(2)*Math.cos(t):(e=o.setUp(t).normalize(),i=this.dot(e),e.recycle(),i)},s.copy=function(){return o.setUp(this)},o.assign=(r=function(t,e,i,n){var r=null,o=!1;"string"==typeof t&&void 0!==e[t]&&(r=e[t],delete e[t],o=!0),Object.defineProperty(e,t,{get:function(){return i.matrix[n]},set:function(t){i.matrix[n]=t},enumerable:!0}),o&&(e[t]=r)},function(t,e){var i=0;if(t&&e){if(!t[e]){for(t[e]=o.setUp(),i=2;i<arguments.length;i++)arguments[i]!==e&&r(arguments[i],t,t[e],i-2);return null}return t[e]}return null}),l.a.add(o,"Vector",o,(function(){this.matrix.length=0}),!0,u.a.dev),o)},function(t,e,i){"use strict";var n,r,o=i(14),s=i.n(o),a=i(20);e.a=((r=(n=function t(e,i,n,r){e instanceof t?this.set(e):(this.empty=!0,this.setAll(e,i,n,r))}).prototype).setAll=function(t,e,i,n){return this.empty=!1,this.x=t,this.y=e,this.resize(i,n),this},r.setBounds=function(t,e,i,n){return this.empty=!1,this.x=(i+t)/2,this.y=(e+n)/2,this.resize(i-t,n-e),this},r.set=function(t){return this.empty=t.empty,this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this},r.toString=function(){return"[AABB: "+this.width+"x"+this.height+" ("+this.x+", "+this.y+")]"},r.reset=function(){return this.empty=!0,this},r.resize=function(t,e){var i=t||0,n=e||0,r=i/2,o=n/2;return this.width=i,this.height=n,this.halfWidth=r,this.halfHeight=o,"number"==typeof this.x?(this.left=-r+this.x,this.right=r+this.x):this.empty=!0,"number"==typeof this.y?(this.top=-o+this.y,this.bottom=o+this.y):this.empty=!0,this},r.include=function(t){return this.empty?this.set(t):(this.left>t.left&&(this.left=t.left),this.right<t.right&&(this.right=t.right),this.top>t.top&&(this.top=t.top),this.bottom<t.bottom&&(this.bottom=t.bottom),this.width=this.right-this.left,this.height=this.bottom-this.top,this.halfWidth=this.width/2,this.halfHeight=this.height/2,this.x=this.left+this.halfWidth,this.y=this.top+this.halfHeight),this},r.move=function(t,e){return this.moveX(t),this.moveY(e),this},r.moveX=function(t){return this.x=t,this.left=-this.halfWidth+t,this.right=this.halfWidth+t,this},r.moveY=function(t){return this.y=t,this.top=-this.halfHeight+t,this.bottom=this.halfHeight+t,this},r.moveXBy=function(t){return this.moveX(this.x+t)},r.moveYBy=function(t){return this.moveY(this.y+t)},r.equals=function(t){return!this.empty&&!t.empty&&this.left===t.left&&this.top===t.top&&this.right===t.right&&this.bottom===t.bottom},r.contains=function(t){return t.top>=this.top&&t.bottom<=this.bottom&&t.left>=this.left&&t.right<=this.right},r.containsVector=function(t){return this.containsPoint(t.x,t.y)},r.containsPoint=function(t,e){return e>=this.top&&e<=this.bottom&&t>=this.left&&t<=this.right},r.collides=function(t){return t.bottom>this.top&&t.top<this.bottom&&t.right>this.left&&t.left<this.right},r.collidesPoint=function(t,e){return e>this.top&&e<this.bottom&&t>this.left&&t<this.right},r.intersects=function(t){return t.bottom>=this.top&&t.top<=this.bottom&&t.right>=this.left&&t.left<=this.right},r.getIntersectionArea=function(t){var e=Math.max,i=Math.min;return this.intersects(t)?(i(this.bottom,t.bottom)-e(this.top,t.top))*(i(this.right,t.right)-e(this.left,t.left)):0},a.a.add(n,"AABB",n,null,!0,s.a.dev),n)},function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return u})),i.d(e,"c",(function(){return a}));var n=i(10),r=i(5),o=i(2);
/*!
 * @pixi/display - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
n.b.SORTABLE_CHILDREN=!1;var s=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null};s.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},s.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},s.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?r.j.EMPTY:((t=t||new r.j(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},s.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},s.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY,o=t[0],s=t[1];e=o<e?o:e,i=s<i?s:i,n=o>n?o:n,r=s>r?s:r,e=(o=t[2])<e?o:e,i=(s=t[3])<i?s:i,n=o>n?o:n,r=s>r?s:r,e=(o=t[4])<e?o:e,i=(s=t[5])<i?s:i,n=o>n?o:n,r=s>r?s:r,e=(o=t[6])<e?o:e,i=(s=t[7])<i?s:i,n=o>n?o:n,r=s>r?s:r,this.minX=e,this.minY=i,this.maxX=n,this.maxY=r},s.prototype.addFrame=function(t,e,i,n,r){this.addFrameMatrix(t.worldTransform,e,i,n,r)},s.prototype.addFrameMatrix=function(t,e,i,n,r){var o=t.a,s=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=this.minX,f=this.minY,d=this.maxX,p=this.maxY,g=o*e+a*i+u,v=s*e+h*i+l;c=g<c?g:c,f=v<f?v:f,d=g>d?g:d,p=v>p?v:p,c=(g=o*n+a*i+u)<c?g:c,f=(v=s*n+h*i+l)<f?v:f,d=g>d?g:d,p=v>p?v:p,c=(g=o*e+a*r+u)<c?g:c,f=(v=s*e+h*r+l)<f?v:f,d=g>d?g:d,p=v>p?v:p,c=(g=o*n+a*r+u)<c?g:c,f=(v=s*n+h*r+l)<f?v:f,d=g>d?g:d,p=v>p?v:p,this.minX=c,this.minY=f,this.maxX=d,this.maxY=p},s.prototype.addVertexData=function(t,e,i){for(var n=this.minX,r=this.minY,o=this.maxX,s=this.maxY,a=e;a<i;a+=2){var h=t[a],u=t[a+1];n=h<n?h:n,r=u<r?u:r,o=h>o?h:o,s=u>s?u:s}this.minX=n,this.minY=r,this.maxX=o,this.maxY=s},s.prototype.addVertices=function(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)},s.prototype.addVerticesMatrix=function(t,e,i,n,r,o){var s=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty;r=r||0,o=o||0;for(var f=this.minX,d=this.minY,p=this.maxX,g=this.maxY,v=i;v<n;v+=2){var m=e[v],y=e[v+1],b=s*m+h*y+l,_=u*y+a*m+c;f=Math.min(f,b-r),p=Math.max(p,b+r),d=Math.min(d,_-o),g=Math.max(g,_+o)}this.minX=f,this.minY=d,this.maxX=p,this.maxY=g},s.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>r?t.maxY:r},s.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,r=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=r&&n<=o){var s=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=i<s?i:s,this.minY=n<a?n:a,this.maxX=r>h?r:h,this.maxY=o>u?o:u}},s.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},s.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,r=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=r&&n<=o){var s=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=i<s?i:s,this.minY=n<a?n:a,this.maxX=r>h?r:h,this.maxY=o>u?o:u}},s.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},s.prototype.addFramePad=function(t,e,i,n,r,o){t-=r,e-=o,i+=r,n+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n};var a=function(t){function e(){t.call(this),this.tempDisplayObjectParent=null,this.transform=new r.m,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new s,this._boundsID=0,this._lastBoundsID=-1,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={_tempDisplayObjectParent:{configurable:!0},x:{configurable:!0},y:{configurable:!0},worldTransform:{configurable:!0},localTransform:{configurable:!0},position:{configurable:!0},scale:{configurable:!0},pivot:{configurable:!0},skew:{configurable:!0},rotation:{configurable:!0},angle:{configurable:!0},zIndex:{configurable:!0},worldVisible:{configurable:!0},mask:{configurable:!0}};return e.mixin=function(t){for(var i=Object.keys(t),n=0;n<i.length;++n){var r=i[n];Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t,r))}},i._tempDisplayObjectParent.get=function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent},e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&(this.calculateBounds(),this._lastBoundsID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new r.j),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new r.j),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=i,this.transform=e,n},e.prototype.toGlobal=function(t,e,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.render=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,i,n,r,o,s,a,h){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===n&&(n=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=n||1,this.rotation=r,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=h,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},i.x.get=function(){return this.position.x},i.x.set=function(t){this.transform.position.x=t},i.y.get=function(){return this.position.y},i.y.set=function(t){this.transform.position.y=t},i.worldTransform.get=function(){return this.transform.worldTransform},i.localTransform.get=function(){return this.transform.localTransform},i.position.get=function(){return this.transform.position},i.position.set=function(t){this.transform.position.copyFrom(t)},i.scale.get=function(){return this.transform.scale},i.scale.set=function(t){this.transform.scale.copyFrom(t)},i.pivot.get=function(){return this.transform.pivot},i.pivot.set=function(t){this.transform.pivot.copyFrom(t)},i.skew.get=function(){return this.transform.skew},i.skew.set=function(t){this.transform.skew.copyFrom(t)},i.rotation.get=function(){return this.transform.rotation},i.rotation.set=function(t){this.transform.rotation=t},i.angle.get=function(){return this.transform.rotation*r.i},i.angle.set=function(t){this.transform.rotation=t*r.b},i.zIndex.get=function(){return this._zIndex},i.zIndex.set=function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},i.worldVisible.get=function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},i.mask.get=function(){return this._mask},i.mask.set=function(t){if(this._mask){var e=this._mask.maskObject||this._mask;e.renderable=!0,e.isMask=!1}if(this._mask=t,this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!1,i.isMask=!0}},Object.defineProperties(e.prototype,i),e}(o.EventEmitter);function h(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}a.prototype.displayObjectUpdateTransform=a.prototype.updateTransform;var u=function(t){function e(){t.call(this),this.children=[],this.sortableChildren=n.b.SORTABLE_CHILDREN,this.sortDirty=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={width:{configurable:!0},height:{configurable:!0}};return e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments,i=arguments.length;if(i>1)for(var n=0;n<i;n++)this.addChild(e[n]);else t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);this.children[i]=e,this.children[n]=t,this.onChildrenChange(i<n?i:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);Object(o.removeItems)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments,i=arguments.length;if(i>1)for(var n=0;n<i;n++)this.removeChild(e[n]);else{var r=this.children.indexOf(t);if(-1===r)return null;t.parent=null,t.transform._parentID=-1,Object(o.removeItems)(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Object(o.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0);var i,n=t,r="number"==typeof e?e:this.children.length,o=r-n;if(o>0&&o<=r){i=this.children.splice(n,o);for(var s=0;s<i.length;++s)i[s].parent=null,i[s].transform&&(i[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var a=0;a<i.length;++a)i[a].emit("removed",this),this.emit("childRemoved",i[a],this,a);return i}if(0===o&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var n=this.children[e];n._lastSortedIndex=e,t||0===n.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(h),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var i=e._mask.maskObject||e._mask;i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}i&&t.mask.push(this,this._mask),this._render(t);for(var r=0,o=this.children.length;r<o;r++)this.children[r].render(t);t.batch.flush(),i&&t.mask.pop(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var i="boolean"==typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var r=0;r<n.length;++r)n[r].destroy(e)},i.width.get=function(){return this.scale.x*this.getLocalBounds().width},i.width.set=function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},i.height.get=function(){return this.scale.y*this.getLocalBounds().height},i.height.set=function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},Object.defineProperties(e.prototype,i),e}(a);u.prototype.containerUpdateTransform=u.prototype.updateTransform},function(t,e,i){var n=i(448);t.exports={dev:!1,buildDate:(new Date).toGMTString(),version:n.version}},function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n}));var n,r=i(10);
/*!
 * @pixi/ticker - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */r.b.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(n||(n={}));var o=function(){function t(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=0),void 0===n&&(n=!1),this.fn=t,this.context=e,this.priority=i,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),s=function(){function t(){var t=this;this._head=new o(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/r.b.TARGET_FPMS,this.elapsedMS=1/r.b.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,i){return void 0===i&&(i=n.NORMAL),this._addListener(new o(t,e,i))},t.prototype.addOnce=function(t,e,i){return void 0===i&&(i=n.NORMAL),this._addListener(new o(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*r.b.TARGET_FPMS;for(var n=this._head,o=n.next;o;)o=o.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,r.b.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!0,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!0,configurable:!0}),t}(),a=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,n.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?s.shared:new s,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}()},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){var n=i(19);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){"use strict";var n={value:!1,writable:!0},r={},o=function(){this.contains=null,this.previous=null},s=null;e.a={add:function(t,e,i,a,h,u){var l=t===Array,c=null;return e?r[e]?(t!==r[e].ClassObject&&console.warn('Recycle: There is already a cache named "'+e+'" that is being used for another object type.'),r[e]):((c=r[e]={ClassObject:t,list:null,setUp:null,recycle:null,pop:l?function(){var t=this.list,e=null;return t?(this.list=t.previous,e=t.contains,t.previous=s,s=t,e):[]}:function(){var t=this.list,e=null;return t?(this.list=t.previous,e=t.contains,t.previous=s,s=t,e):Object.create(this.ClassObject.prototype)},push:function(t){var e=s;e?s=e.previous:e=Object.create(o.prototype),e.previous=this.list,this.list=e,e.contains=t},getLength:function(){for(var t=0,e=this.list;e;)t+=1,e=e.previous;return t}}).setUp=i?function(){var t=this.pop();return i.apply(t,arguments),t}:l?function(){var t=this.pop(),e=0;for(e=0;e<arguments.length;e++)t[e]=arguments[e];return t}:c.pop,c.recycle=a?function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];a.apply.apply(a,[t].concat(i)),this.push(t)}:l?function(t,e){var i=0;if(e>1)for(i=t.length,e-=1;i--;)this.recycle(t[i],e);t.length=0,this.push(t)}:c.push,u&&(c.setUp=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];var o=t.apply(void 0,i);return void 0===o.recycled?Object.defineProperty(o,"recycled",n):o.recycled=!1,o}.bind(c,c.setUp.bind(c)),c.recycle=function(t,e){if(e.recycled)console.warn("Recycle: WHOA! I have already been recycled!",e);else{e.recycled=!0;for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];t.apply(void 0,[e].concat(n))}}.bind(c,c.recycle.bind(c)),l&&(c.recycle=function(t,e){Array.isArray(e)||console.warn("Recycle: Adding a non-Array to the array cache!");for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];t.apply(void 0,[e].concat(n))}.bind(c,c.recycle.bind(c)))),h&&(Object.defineProperties(t,{setUp:{value:c.setUp.bind(c)},recycle:{value:c.recycle.bind(c)}}),Object.defineProperty(t.prototype,"recycle",{value:function(){for(var t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];(t=c).recycle.apply(t,[this].concat(i))}})),c):(console.warn("Recycle: Must define a name for this cache."),null)},cache:r}},function(t,e,i){"use strict";!function(t){var e=null,i=null,n=null;window.Map||(e={value:null},n=(i=function(){e.value={},t.defineProperty(this,"map",e)}).prototype,t.defineProperties(n,{get:{value:function(t){return this.map[t]}},has:{value:function(t){return this.map.hasOwnProperty(t)}},set:{value:function(t,e){return this.map[t]=e,this}},delete:{value:function(t){var e=this.map[t];return delete this.map[t],e}}}),window.Map=i)}(Object);var n,r,o,s,a,h,u,l=i(0),c=i(14),f=i.n(c),d=i(20);e.a=(n=window.Map,r=function(t,e,i){return this.get(e)!==i&&(this.has(e)||t.push(e),this.set(e,i)),i},o=function(t,e){var i=t.indexOf(e),n=this.get(e);return i>=0&&(Object(l.c)(t,i),this.delete(e)),n},s=function(t){for(var e=t.length;e--;)this.delete(t[e]);t.length=0},a=function(t){for(var e=t.length,i={};e--;)i[t[e]]=this.get(t[e]);return i},h={get:{value:null},has:{value:null},keys:{value:null},set:{value:null},delete:{value:null},clear:{value:null},toJSON:{value:null}},u=function(t){var e=arguments.length,i="",u=null,c=null,f=null;if(this.map||(f=h,c=this.map=new n,u=f.keys.value=l.a.setUp(),f.get.value=c.get.bind(c),f.has.value=c.has.bind(c),f.set.value=r.bind(c,u),f.delete.value=o.bind(c,u),f.clear.value=s.bind(c,u),f.toJSON.value=a.bind(c,u),Object.defineProperties(this,f)),t)if(u=t.keys,"string"==typeof t)for(e%2&&(e-=1,this.set(arguments[e],null));e;)e-=2,this.set(arguments[e],arguments[e+1]);else if(u)for(e=u.length;e--;)this.set(u[e],t.get(u[e]));else for(i in t)t.hasOwnProperty(i)&&this.set(i,t[i])},d.a.add(u,"DataMap",u,(function(){this.clear()}),!0,f.a.dev),u)},function(t,e,i){var n=i(87)("wks"),r=i(61),o=i(16).Symbol,s="function"==typeof o;(t.exports=function(t){return n[t]||(n[t]=s&&o[t]||(s?o:r)("Symbol."+t))}).store=n},function(t,e,i){"use strict";var n,r,o=i(0),s=i(49),a=i(7),h=i(40),u=i(27),l=i(4);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e,i){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}e.a=(n=function(t,e,i){this.addComponent(new t(this,e,i))},r={},function(t){function e(t,i,h,f){var p;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var v=0,m=null,y=o.a.setUp(),b=a.a.setUp(t),_=b.components,w=a.a.setUp(b.properties),x=a.a.setUp(i),E=a.a.setUp(x.properties),T=o.a.setUp();if((p=function(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?d(t):e}(this,g(e).call(this))).components=o.a.setUp(),p.type=b.id||"none",p.id=x.id||E.id,p.id?0===p.id.search(p.type+"-")&&(v=parseInt(p.id.substring(p.id.search("-")+1),10),isNaN(v)||r[p.type]&&!(r[p.type]<=v)||(r[p.type]=v+1)):(r[p.type]||(r[p.type]=0),p.id=p.type+"-"+r[p.type],r[p.type]+=1),p.setProperty(w),p.setProperty(E),p.on("set-property",function(t){this.setProperty(t)}.bind(d(p))),p.state=u.a.setUp(p.state),p.lastState=u.a.setUp(),f&&(p.parent=f),p.trigger=p.triggerEvent=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return T.push(t.bind.apply(t,[this].concat(i))),-1}.bind(d(p),p.trigger),_)for(v=0;v<_.length;v++)(m=_[v])&&(m.type?platypus.components[m.type]?y.push(n.bind(d(p),platypus.components[m.type],m)):platypus.debug.warn('Entity "'+p.type+'": Component "'+m.type+'" is not defined.',m):m.id?y.push(n.bind(d(p),Object(l.a)(m),null)):"function"==typeof m?y.push(n.bind(d(p),m,null)):platypus.debug.warn('Entity "'+p.type+'": Component must have an `id` or `type` value.',m));return p.loadingComponents=s.a.setUp(y,function(){this.loadingComponents=null,delete this.trigger,delete this.triggerEvent;for(var t=0;t<T.length;t++)T[t]();o.a.recycle(T),this.triggerEvent("load"),h&&h(this)}.bind(d(p))),o.a.recycle(y),b.recycle(),w.recycle(),x.recycle(),E.recycle(),p}var i,h,m;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(e,t),i=e,m=[{key:"getAssetList",value:function(t,i,n){var r,s=0,a=null,h=null,u=null;if(t.type)return(u=platypus.game.settings.entities[t.type])?e.getAssetList(u,t.properties,n):(platypus.debug.warn('Entity "'+t.type+'": This entity is not defined.',t),o.a.setUp());for(r=Object(o.d)(o.a.setUp(),t.preload),s=0;s<t.components.length;s++)(a=t.components[s]&&t.components[s].type&&platypus.components[t.components[s].type])&&(h=a.getAssetList(t.components[s],t.properties,i,n),Object(o.d)(r,h),o.a.recycle(h));return r}}],(h=[{key:"toString",value:function(){return"[Entity "+this.type+"]"}},{key:"toJSON",value:function(t){var e=this.components,i={properties:{id:this.id,state:this.state.toJSON()}},n=0,r=null,o=i.properties;for(t?(i.id=this.type,i.components=[]):i.type=this.type,n=0;n<e.length;n++)r=e[n].toJSON(o),t&&r&&i.components.push(r);return i}},{key:"addComponent",value:function(t){return this.components.push(t),this.triggerEvent("component-added",t),t}},{key:"removeComponent",value:function(t){var e=0;if("string"==typeof t){for(e=0;e<this.components.length;e++)if(this.components[e].type===t)return t=this.components[e],Object(o.c)(this.components,e),this.triggerEvent("component-removed",t),t.destroy(),t}else for(e=0;e<this.components.length;e++)if(this.components[e]===t)return Object(o.c)(this.components,e),this.triggerEvent("component-removed",t),t.destroy(),t;return!1}},{key:"setProperty",value:function(t){var e="";for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}},{key:"destroy",value:function(){var t=this.components;if(!this._destroyed){for(;t.length;)t[0].destroy(),t.shift();o.a.recycle(t),this.components=null,this.state.recycle(),this.state=null,this.lastState.recycle(),this.lastState=null,p(g(e.prototype),"destroy",this).call(this)}}}])&&f(i.prototype,h),m&&f(i,m),e}(h.a))},function(t,e,i){"use strict";var n=i(136),r=i.n(n),o=i(51),s=i.n(o);
/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */
function a(){}function h(t,e,i,n){var r=0,o=t.length;!function s(a){a||r===o?i&&i(a):n?setTimeout((function(){e(t[r++],s)}),1):e(t[r++],s)}()}function u(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function l(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var i=0,n={_tasks:[],concurrency:e,saturated:a,unsaturated:a,buffer:e/4,empty:a,drain:a,error:a,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){i=0,n.drain=a,n.started=!1,n._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!n.paused&&i<n.concurrency&&n._tasks.length;){var e=n._tasks.shift();0===n._tasks.length&&n.empty(),(i+=1)===n.concurrency&&n.saturated(),t(e.data,u(o(e)))}},length:function(){return n._tasks.length},running:function(){return i},idle:function(){return n._tasks.length+i===0},pause:function(){!0!==n.paused&&(n.paused=!0)},resume:function(){if(!1!==n.paused){n.paused=!1;for(var t=1;t<=n.concurrency;t++)n.process()}}};function r(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(n.started=!0,null==t&&n.idle())setTimeout((function(){return n.drain()}),1);else{var r={data:t,callback:"function"==typeof i?i:a};e?n._tasks.unshift(r):n._tasks.push(r),setTimeout((function(){return n.process()}),1)}}function o(t){return function(){i-=1,t.callback.apply(t,arguments),null!=arguments[0]&&n.error(arguments[0],t.data),i<=n.concurrency-n.buffer&&n.unsaturated(),n.idle()&&n.drain(),n.process()}}return n}var c={};function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e,i){return e&&f(t.prototype,e),i&&f(t,i),t}var p=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),g=null;function v(){}var m=function(){function t(e,i,n){if("string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=v,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new s.a,this.onProgress=new s.a,this.onComplete=new s.a,this.onAfterMiddleware=new s.a}t.setExtensionLoadType=function(e,i){y(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){y(t._xhrTypeMap,e,i)};var e=t.prototype;return e.complete=function(){this._clearEvents(),this._finish()},e.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.load=function(e){var i=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(i)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:p&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e._hasFlag=function(t){return 0!=(this._flags&t)},e._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},e._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(n)?n[0]:n))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},e._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},e._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},e._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=i,n},e._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e._onTimeout=function(){this.abort("Load timed out.")},e._xhrOnError=function(){var t=this.xhr;this.abort(b(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e._xhrOnTimeout=function(){var t=this.xhr;this.abort(b(t)+" Request timed out.")},e._xhrOnAbort=function(){var t=this.xhr;this.abort(b(t)+" Request was aborted by the user.")},e._xhrOnLoad=function(){var e=this.xhr,i="",n=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===n&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2===(n/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var r=new DOMParser;this.data=r.parseFromString(i,"text/xml")}else{var o=document.createElement("div");o.innerHTML=i,this.data=o}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},e._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,g||(g=document.createElement("a")),g.href=t;var i=!(t=r()(g.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&n===e.protocol?"":"anonymous"},e._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},e._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},e._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?"),r=t.indexOf("#"),o=Math.min(n>-1?n:t.length,r>-1?r:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},e._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},d(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function y(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function b(t){return t.toString().replace("object ","")}m.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},m.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},m.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},m.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},m._loadTypeMap={gif:m.LOAD_TYPE.IMAGE,png:m.LOAD_TYPE.IMAGE,bmp:m.LOAD_TYPE.IMAGE,jpg:m.LOAD_TYPE.IMAGE,jpeg:m.LOAD_TYPE.IMAGE,tif:m.LOAD_TYPE.IMAGE,tiff:m.LOAD_TYPE.IMAGE,webp:m.LOAD_TYPE.IMAGE,tga:m.LOAD_TYPE.IMAGE,svg:m.LOAD_TYPE.IMAGE,"svg+xml":m.LOAD_TYPE.IMAGE,mp3:m.LOAD_TYPE.AUDIO,ogg:m.LOAD_TYPE.AUDIO,wav:m.LOAD_TYPE.AUDIO,mp4:m.LOAD_TYPE.VIDEO,webm:m.LOAD_TYPE.VIDEO},m._xhrTypeMap={xhtml:m.XHR_RESPONSE_TYPE.DOCUMENT,html:m.XHR_RESPONSE_TYPE.DOCUMENT,htm:m.XHR_RESPONSE_TYPE.DOCUMENT,xml:m.XHR_RESPONSE_TYPE.DOCUMENT,tmx:m.XHR_RESPONSE_TYPE.DOCUMENT,svg:m.XHR_RESPONSE_TYPE.DOCUMENT,tsx:m.XHR_RESPONSE_TYPE.DOCUMENT,gif:m.XHR_RESPONSE_TYPE.BLOB,png:m.XHR_RESPONSE_TYPE.BLOB,bmp:m.XHR_RESPONSE_TYPE.BLOB,jpg:m.XHR_RESPONSE_TYPE.BLOB,jpeg:m.XHR_RESPONSE_TYPE.BLOB,tif:m.XHR_RESPONSE_TYPE.BLOB,tiff:m.XHR_RESPONSE_TYPE.BLOB,webp:m.XHR_RESPONSE_TYPE.BLOB,tga:m.XHR_RESPONSE_TYPE.BLOB,json:m.XHR_RESPONSE_TYPE.JSON,text:m.XHR_RESPONSE_TYPE.TEXT,txt:m.XHR_RESPONSE_TYPE.TEXT,ttf:m.XHR_RESPONSE_TYPE.BUFFER,otf:m.XHR_RESPONSE_TYPE.BUFFER},m.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var _=window.URL||window.webkitURL;var w={caching:function(t,e){var i=this;c[t.url]?(t.data=c[t.url],t.complete()):t.onComplete.once((function(){return c[i.url]=i.data})),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===m.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=_.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=m.TYPE.IMAGE,void(t.data.onload=function(){_.revokeObjectURL(i),t.data.onload=null,e()})}}else{var n=t.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return t.data=new Image,t.data.src="data:"+n+";base64,"+function(t){for(var e="",i=0;i<t.length;){for(var n=[0,0,0],r=[0,0,0,0],o=0;o<n.length;++o)i<t.length?n[o]=255&t.charCodeAt(i++):n[o]=0;switch(r[0]=n[0]>>2,r[1]=(3&n[0])<<4|n[1]>>4,r[2]=(15&n[1])<<2|n[2]>>6,r[3]=63&n[2],i-(t.length-1)){case 2:r[3]=64,r[2]=64;break;case 1:r[3]=64}for(var s=0;s<r.length;++s)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r[s])}return e}(t.xhr.responseText),t.type=m.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},x=/(#[\w-]+)?$/,E=function(){function t(e,i){var n=this;void 0===e&&(e=""),void 0===i&&(i=10),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return n._loadResource(t,e)},this._queue=l(this._boundLoadResource,i),this._queue.pause(),this.resources={},this.onProgress=new s.a,this.onError=new s.a,this.onLoad=new s.a,this.onStart=new s.a,this.onComplete=new s.a;for(var r=0;r<t._defaultBeforeMiddleware.length;++r)this.pre(t._defaultBeforeMiddleware[r]);for(var o=0;o<t._defaultAfterMiddleware.length;++o)this.use(t._defaultAfterMiddleware[o])}var e=t.prototype;return e.add=function(t,e,i,n){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}if("object"==typeof t&&(n=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new m(t,e,i),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var o=i.parentResource,s=[],a=0;a<o.children.length;++a)o.children[a].isComplete||s.push(o.children[a]);var h=o.progressChunk*(s.length+1)/(s.length+2);o.children.push(this.resources[t]),o.progressChunk=h;for(var u=0;u<s.length;++u)s[u].progressChunk=h;this.resources[t].progressChunk=h}return this._queue.push(this.resources[t]),this},e.pre=function(t){return this._beforeMiddleware.push(t),this},e.use=function(t){return this._afterMiddleware.push(t),this},e.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},e.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},e._prepareUrl=function(t){var e,i=r()(t,{strictMode:!0});if(e=i.protocol||!i.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=x.exec(e)[0];-1!==(e=e.substr(0,e.length-n.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=n}return e},e._loadResource=function(t,e){var i=this;t._dequeue=e,h(this._beforeMiddleware,(function(e,n){e.call(i,t,(function(){n(t.isComplete?{}:null)}))}),(function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())}),!0)},e._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),h(this._afterMiddleware,(function(i,n){i.call(e,t,n)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},d(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();E._defaultBeforeMiddleware=[],E._defaultAfterMiddleware=[],E.pre=function(t){return E._defaultBeforeMiddleware.push(t),E},E.use=function(t){return E._defaultAfterMiddleware.push(t),E};var T=i(2),S=i(3);i.d(e,"a",(function(){return C})),i.d(e,"b",(function(){return P})),i.d(e,"c",(function(){return M})),i.d(e,"d",(function(){return A}));
/*!
 * @pixi/loaders - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var A=function(){};A.use=function(t,e){t.data&&t.type===m.TYPE.IMAGE&&(t.texture=S.E.fromLoader(t.data,t.url,t.name)),e()};var P=function(t){function e(i,n){var r=this;t.call(this,i,n),T.EventEmitter.call(this);for(var o=0;o<e._plugins.length;++o){var s=e._plugins[o],a=s.pre,h=s.use;a&&this.pre(a),h&&this.use(h)}this.onStart.add((function(t){return r.emit("start",t)})),this.onProgress.add((function(t,e){return r.emit("progress",t,e)})),this.onError.add((function(t,e,i){return r.emit("error",t,e,i)})),this.onLoad.add((function(t,e){return r.emit("load",t,e)})),this.onComplete.add((function(t,e){return r.emit("complete",t,e)})),this._protected=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={shared:{configurable:!0}};return e.prototype.destroy=function(){this._protected||(this.removeAllListeners(),this.reset())},i.shared.get=function(){var t=e._shared;return t||((t=new e)._protected=!0,e._shared=t),t},Object.defineProperties(e,i),e}(E);Object.assign(P.prototype,T.EventEmitter.prototype),P._plugins=[],P.registerPlugin=function(t){return P._plugins.push(t),t.add&&t.add(),P},P.registerPlugin({use:w.parsing}),P.registerPlugin(A);var C=function(){};C.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?P.shared:new P},C.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)};var M=m},function(t,e,i){var n=i(45),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},function(t,e){var i=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=i)},function(t,e,i){"use strict";var n,r,o,s=i(21),a=i(0),h=i(14),u=i.n(h),l=i(41),c=i(20);e.a=(n=function(t){var e=arguments.length;e?1===e&&"string"==typeof t?(s.a.call(this),this.updateFromString(t)):s.a.apply(this,arguments):s.a.call(this)},r=s.a.prototype,o=n.prototype=Object.create(r),Object.defineProperty(n.prototype,"constructor",{configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"updateFromString",{value:function(t){for(var e=Object(l.a)(t,","),i=e.length,n="";i--;)(n=e[i])&&("!"===n.substr(0,1)?this.set(n.substr(1),!1):this.set(n,!0));return a.a.recycle(e),this}}),Object.defineProperty(o,"update",{value:function(t){for(var e=t.keys,i=e.length,n="",r=!1,o=!1;i--;)n=e[i],o=t.get(n),this.get(n)!==o&&(this.set(n,o),r=!0);return r}}),Object.defineProperty(o,"includes",{value:function(t){for(var e=t.keys,i=e.length,n="";i--;)if(n=e[i],this.get(n)!==t.get(n))return!1;return!0}}),Object.defineProperty(o,"intersects",{value:function(t){for(var e=t.keys,i=e.length,n="";i--;)if(n=e[i],this.get(n)===t.get(n))return!0;return!1}}),c.a.add(n,"StateMap",n,(function(){this.clear()}),!0,u.a.dev),n)},function(t,e,i){t.exports=!i(17)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,i){var n=i(18),r=i(137),o=i(57),s=Object.defineProperty;e.f=i(28)?Object.defineProperty:function(t,e,i){if(n(t),e=o(e,!0),n(i),r)try{return s(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){"use strict";var n=i(24),r=i(15),o=i(2),s=i(3),a=function(){function t(t,e){this._output=e,this._input=t}return Object.defineProperty(t.prototype,"destination",{get:function(){return this._input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._filters},set:function(t){var e=this;if(this._filters&&(this._filters.forEach((function(t){t&&t.disconnect()})),this._filters=null,this._input.connect(this._output)),t&&t.length){this._filters=t.slice(0),this._input.disconnect();var i=null;t.forEach((function(t){null===i?e._input.connect(t.destination):i.connect(t.destination),i=t})),i.connect(this._output)}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.filters=null,this._input=null,this._output=null},t}(),h=function(){function t(t,e){this.init(t,e)}return t.prototype.init=function(t,e){this.destination=t,this.source=e||t},t.prototype.connect=function(t){this.source.connect(t)},t.prototype.disconnect=function(){this.source.disconnect()},t.prototype.destroy=function(){this.disconnect(),this.destination=null,this.source=null},t}(),u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function l(t,e){function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var c,f=function(){return(f=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function d(){return c}var p,g,v,m,y=function(){function t(){}return t.setParamValue=function(t,e){if(t.setValueAtTime){var i=d().context;t.setValueAtTime(e,i.audioContext.currentTime)}else t.value=e;return e},t}(),b=0,_=function(t){function e(e){var i=t.call(this)||this;return i.id=b++,i._media=null,i._paused=!1,i._muted=!1,i._elapsed=0,i.init(e),i}return l(e,t),e.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name "+t+" does not exist.");return this[t]=e,this},e.prototype.stop=function(){this._source&&(this._internalStop(),this.emit("stop"))},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh(),this._update(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){if(this._source){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var i=t.volume*(t.muted?0:1),n=e.volume*(e.muted?0:1),r=this._volume*(this._muted?0:1);y.setParamValue(this._gain.gain,r*n*i),y.setParamValue(this._source.playbackRate,this._speed*e.speed*t.speed)}},e.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",i))},e.prototype.play=function(t){var e=t.start,i=t.end,n=t.speed,r=t.loop,o=t.volume,s=t.muted;this._paused=!1;var a=this._media.nodes.cloneBufferSource(),h=a.source,u=a.gain;this._source=h,this._gain=u,this._speed=n,this._volume=o,this._loop=!!r,this._muted=s,this.refresh();var l=this._source.buffer.duration;this._duration=l,this._end=i,this._lastUpdate=this._now(),this._elapsed=e,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=i,this._source.loopStart=e,this._source.start(0,e)):i?this._source.start(0,e,i-e):this._source.start(0,e),this.emit("start"),this._update(!0),this._enabled=!0},e.prototype._toSec=function(t){return t>10&&(t/=1e3),t||0},Object.defineProperty(e.prototype,"_enabled",{set:function(t){r.a.shared.remove(this._updateListener,this),t&&r.a.shared.add(this._updateListener,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){return this._progress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1},e.prototype.toString=function(){return"[WebAudioInstance id="+this.id+"]"},e.prototype._now=function(){return this._media.context.audioContext.currentTime},e.prototype._updateListener=function(){this._update()},e.prototype._update=function(t){if(void 0===t&&(t=!1),this._source){var e=this._now(),i=e-this._lastUpdate;if(i>0||t){var n=this._source.playbackRate.value;this._elapsed+=i*n,this._lastUpdate=e;var r=this._duration,o=void 0;if(this._source.loopStart){var s=this._source.loopEnd-this._source.loopStart;o=(this._source.loopStart+this._elapsed%s)/r}else o=this._elapsed%r/r;this._progress=o,this.emit("progress",this._progress,r)}}},e.prototype.init=function(t){this._media=t,t.context.events.on("refresh",this.refresh,this),t.context.events.on("refreshPaused",this.refreshPaused,this)},e.prototype._internalStop=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.stop(0),this._source.disconnect(),this._source=null)},e.prototype._onComplete=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.disconnect()),this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)},e}(o.EventEmitter),w=function(t){function e(e){var i=this,n=e.audioContext,r=n.createBufferSource(),o=n.createGain(),s=n.createAnalyser();return r.connect(s),s.connect(o),o.connect(e.destination),(i=t.call(this,s,o)||this).context=e,i.bufferSource=r,i.gain=o,i.analyser=s,i}return l(e,t),Object.defineProperty(e.prototype,"script",{get:function(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(e.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null},e.prototype.cloneBufferSource=function(){var t=this.bufferSource,e=this.context.audioContext.createBufferSource();e.buffer=t.buffer,y.setParamValue(e.playbackRate,t.playbackRate.value),e.loop=t.loop;var i=this.context.audioContext.createGain();return e.connect(i),i.connect(this.destination),{source:e,gain:i}},Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this.script.bufferSize},enumerable:!0,configurable:!0}),e.BUFFER_SIZE=0,e}(a),x=function(){function t(){}return t.prototype.init=function(t){this.parent=t,this._nodes=new w(this.context),this._source=this._nodes.bufferSource,this.source=t.options.source},t.prototype.destroy=function(){this.parent=null,this._nodes.destroy(),this._nodes=null,this._source=null,this.source=null},t.prototype.create=function(){return new _(this)},Object.defineProperty(t.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlayable",{get:function(){return!!this._source&&!!this._source.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._nodes.filters},set:function(t){this._nodes.filters=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._source.buffer.duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this._source.buffer},set:function(t){this._source.buffer=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodes",{get:function(){return this._nodes},enumerable:!0,configurable:!0}),t.prototype.load=function(t){this.source?this._decode(this.source,t):this.parent.url?this._loadUrl(t):t&&t(new Error("sound.url or sound.source must be set"))},t.prototype._loadUrl=function(t){var e=this,i=new XMLHttpRequest,n=this.parent.url;i.open("GET",n,!0),i.responseType="arraybuffer",i.onload=function(){e.source=i.response,e._decode(i.response,t)},i.send()},t.prototype._decode=function(t,e){var i=this;this.parent.context.decode(t,(function(t,n){if(t)e&&e(t);else{i.parent.isLoaded=!0,i.buffer=n;var r=i.parent.autoPlayStart();e&&e(null,i.parent,r)}}))},t}(),E=function(t){function e(){var i=this,n=window,r=new e.AudioContext,s=r.createDynamicsCompressor(),a=r.createAnalyser();return a.connect(s),s.connect(r.destination),(i=t.call(this,a,s)||this)._ctx=r,i._offlineCtx=new e.OfflineAudioContext(1,2,n.OfflineAudioContext?r.sampleRate:44100),i._unlocked=!1,i.compressor=s,i.analyser=a,i.events=new o.EventEmitter,i.volume=1,i.speed=1,i.muted=!1,i.paused=!1,"running"!==r.state&&(i._unlock(),i._unlock=i._unlock.bind(i),document.addEventListener("mousedown",i._unlock,!0),document.addEventListener("touchstart",i._unlock,!0),document.addEventListener("touchend",i._unlock,!0)),i}return l(e,t),e.prototype._unlock=function(){this._unlocked||(this.playEmptySound(),"running"===this._ctx.state&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._unlocked=!0))},e.prototype.playEmptySound=function(){var t=this._ctx.createBufferSource();t.buffer=this._ctx.createBuffer(1,1,22050),t.connect(this._ctx.destination),t.start(0,0,0),"suspended"===t.context.state&&t.context.resume()},Object.defineProperty(e,"AudioContext",{get:function(){var t=window;return t.AudioContext||t.webkitAudioContext||null},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OfflineAudioContext",{get:function(){var t=window;return t.OfflineAudioContext||t.webkitOfflineAudioContext||null},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this);var e=this._ctx;void 0!==e.close&&e.close(),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null},Object.defineProperty(e.prototype,"audioContext",{get:function(){return this._ctx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offlineContext",{get:function(){return this._offlineCtx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){t&&"running"===this._ctx.state?this._ctx.suspend():t||"suspended"!==this._ctx.state||this._ctx.resume(),this._paused=t},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){this.events.emit("refresh")},e.prototype.refreshPaused=function(){this.events.emit("refreshPaused")},e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this._paused},e.prototype.decode=function(t,e){this._offlineCtx.decodeAudioData(t,(function(t){e(null,t)}),(function(t){e(new Error(t.message||"Unable to decode file"))}))},e}(a),T={WebAudioMedia:x,WebAudioInstance:_,WebAudioNodes:w,WebAudioContext:E,WebAudioUtils:y},S={Filter:h,EqualizerFilter:function(t){function e(i,n,r,o,s,a,h,u,l,c){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===u&&(u=0),void 0===l&&(l=0),void 0===c&&(c=0);var f=this;if(!d().useLegacy){var p=[{f:e.F32,type:"lowshelf",gain:i},{f:e.F64,type:"peaking",gain:n},{f:e.F125,type:"peaking",gain:r},{f:e.F250,type:"peaking",gain:o},{f:e.F500,type:"peaking",gain:s},{f:e.F1K,type:"peaking",gain:a},{f:e.F2K,type:"peaking",gain:h},{f:e.F4K,type:"peaking",gain:u},{f:e.F8K,type:"peaking",gain:l},{f:e.F16K,type:"highshelf",gain:c}].map((function(t){var e=d().context.audioContext.createBiquadFilter();return e.type=t.type,y.setParamValue(e.Q,1),e.frequency.value=t.f,y.setParamValue(e.gain,t.gain),e}));(f=t.call(this,p[0],p[p.length-1])||this).bands=p,f.bandsMap={};for(var g=0;g<f.bands.length;g++){var v=f.bands[g];g>0&&f.bands[g-1].connect(v),f.bandsMap[v.frequency.value]=v}return f}f=t.call(this,null)||this}return l(e,t),e.prototype.setGain=function(t,e){if(void 0===e&&(e=0),!this.bandsMap[t])throw new Error("No band found for frequency "+t);y.setParamValue(this.bandsMap[t].gain,e)},e.prototype.getGain=function(t){if(!this.bandsMap[t])throw new Error("No band found for frequency "+t);return this.bandsMap[t].gain.value},Object.defineProperty(e.prototype,"f32",{get:function(){return this.getGain(e.F32)},set:function(t){this.setGain(e.F32,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f64",{get:function(){return this.getGain(e.F64)},set:function(t){this.setGain(e.F64,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f125",{get:function(){return this.getGain(e.F125)},set:function(t){this.setGain(e.F125,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f250",{get:function(){return this.getGain(e.F250)},set:function(t){this.setGain(e.F250,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f500",{get:function(){return this.getGain(e.F500)},set:function(t){this.setGain(e.F500,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f1k",{get:function(){return this.getGain(e.F1K)},set:function(t){this.setGain(e.F1K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f2k",{get:function(){return this.getGain(e.F2K)},set:function(t){this.setGain(e.F2K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f4k",{get:function(){return this.getGain(e.F4K)},set:function(t){this.setGain(e.F4K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f8k",{get:function(){return this.getGain(e.F8K)},set:function(t){this.setGain(e.F8K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f16k",{get:function(){return this.getGain(e.F16K)},set:function(t){this.setGain(e.F16K,t)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.bands.forEach((function(t){y.setParamValue(t.gain,0)}))},e.prototype.destroy=function(){this.bands.forEach((function(t){t.disconnect()})),this.bands=null,this.bandsMap=null},e.F32=32,e.F64=64,e.F125=125,e.F250=250,e.F500=500,e.F1K=1e3,e.F2K=2e3,e.F4K=4e3,e.F8K=8e3,e.F16K=16e3,e}(h),DistortionFilter:function(t){function e(e){void 0===e&&(e=0);var i=this;if(!d().useLegacy){var n=d().context.audioContext.createWaveShaper();return(i=t.call(this,n)||this)._distortion=n,i.amount=e,i}i=t.call(this,null)||this}return l(e,t),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount},set:function(t){t*=1e3,this._amount=t;for(var e,i=new Float32Array(44100),n=Math.PI/180,r=0;r<44100;++r)e=2*r/44100-1,i[r]=(3+t)*e*20*n/(Math.PI+t*Math.abs(e));this._distortion.curve=i,this._distortion.oversample="4x"},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._distortion=null,t.prototype.destroy.call(this)},e}(h),StereoFilter:function(t){function e(e){void 0===e&&(e=0);var i=this;if(!d().useLegacy){var n,r,o,s=d().context.audioContext;return s.createStereoPanner?o=n=s.createStereoPanner():((r=s.createPanner()).panningModel="equalpower",o=r),(i=t.call(this,o)||this)._stereo=n,i._panner=r,i.pan=e,i}i=t.call(this,null)||this}return l(e,t),Object.defineProperty(e.prototype,"pan",{get:function(){return this._pan},set:function(t){this._pan=t,this._stereo?y.setParamValue(this._stereo.pan,t):this._panner.setPosition(t,0,1-Math.abs(t))},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this._stereo=null,this._panner=null},e}(h),ReverbFilter:function(t){function e(e,i,n){void 0===e&&(e=3),void 0===i&&(i=2),void 0===n&&(n=!1);var r=this;if(!d().useLegacy)return(r=t.call(this,null)||this)._seconds=r._clamp(e,1,50),r._decay=r._clamp(i,0,100),r._reverse=n,r._rebuild(),r;r=t.call(this,null)||this}return l(e,t),e.prototype._clamp=function(t,e,i){return Math.min(i,Math.max(e,t))},Object.defineProperty(e.prototype,"seconds",{get:function(){return this._seconds},set:function(t){this._seconds=this._clamp(t,1,50),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"decay",{get:function(){return this._decay},set:function(t){this._decay=this._clamp(t,0,100),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this._reverse},set:function(t){this._reverse=t,this._rebuild()},enumerable:!0,configurable:!0}),e.prototype._rebuild=function(){for(var t,e=d().context.audioContext,i=e.sampleRate,n=i*this._seconds,r=e.createBuffer(2,n,i),o=r.getChannelData(0),s=r.getChannelData(1),a=0;a<n;a++)t=this._reverse?n-a:a,o[a]=(2*Math.random()-1)*Math.pow(1-t/n,this._decay),s[a]=(2*Math.random()-1)*Math.pow(1-t/n,this._decay);var h=d().context.audioContext.createConvolver();h.buffer=r,this.init(h)},e}(h),MonoFilter:function(t){function e(){var e=this;if(!d().useLegacy){var i=d().context.audioContext,n=i.createChannelSplitter(),r=i.createChannelMerger();return r.connect(n),(e=t.call(this,r,n)||this)._merger=r,e}e=t.call(this,null)||this}return l(e,t),e.prototype.destroy=function(){this._merger.disconnect(),this._merger=null,t.prototype.destroy.call(this)},e}(h),TelephoneFilter:function(t){function e(){if(!d().useLegacy){var e=d().context.audioContext,i=e.createBiquadFilter(),n=e.createBiquadFilter(),r=e.createBiquadFilter(),o=e.createBiquadFilter();return i.type="lowpass",y.setParamValue(i.frequency,2e3),n.type="lowpass",y.setParamValue(n.frequency,2e3),r.type="highpass",y.setParamValue(r.frequency,500),o.type="highpass",y.setParamValue(o.frequency,500),i.connect(n),n.connect(r),r.connect(o),t.call(this,i,o)||this}t.call(this,null)}return l(e,t),e}(h)},A=0,P=function(t){function e(e){var i=t.call(this)||this;return i.id=A++,i.init(e),i}return l(e,t),e.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name "+t+" does not exist.");return this[t]=e,this},Object.defineProperty(e.prototype,"progress",{get:function(){return this._source.currentTime/this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),e.prototype._onPlay=function(){this._playing=!0},e.prototype._onPause=function(){this._playing=!1},e.prototype.init=function(t){this._playing=!1,this._duration=t.source.duration;var e=this._source=t.source.cloneNode(!1);e.src=t.parent.url,e.onplay=this._onPlay.bind(this),e.onpause=this._onPause.bind(this),t.context.on("refresh",this.refresh,this),t.context.on("refreshPaused",this.refreshPaused,this),this._media=t},e.prototype._internalStop=function(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())},e.prototype.stop=function(){this._internalStop(),this._source&&this.emit("stop")},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var i=t.volume*(t.muted?0:1),n=e.volume*(e.muted?0:1),r=this._volume*(this._muted?0:1);this._source.volume=r*i*n,this._source.playbackRate=this._speed*t.speed*e.speed},e.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",i))},e.prototype.play=function(t){var i=this,n=t.start,o=t.end,s=t.speed,a=t.loop,h=t.volume,u=t.muted;this._speed=s,this._volume=h,this._loop=!!a,this._muted=u,this.refresh(),this.loop&&null!==o&&(this.loop=!1),this._start=n,this._end=o||this._duration,this._start=Math.max(0,this._start-e.PADDING),this._end=Math.min(this._end+e.PADDING,this._duration),this._source.onloadedmetadata=function(){i._source&&(i._source.currentTime=n,i._source.onloadedmetadata=null,i.emit("progress",n,i._duration),r.a.shared.add(i._onUpdate,i))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")},e.prototype._onUpdate=function(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()},e.prototype._onComplete=function(){r.a.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)},e.prototype.destroy=function(){r.a.shared.remove(this._onUpdate,this),this.removeAllListeners();var t=this._source;t&&(t.onended=null,t.onplay=null,t.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)},e.prototype.toString=function(){return"[HTMLAudioInstance id="+this.id+"]"},e.PADDING=.1,e}(o.EventEmitter),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.init=function(t){this.parent=t,this._source=t.options.source||new Audio,t.url&&(this._source.src=t.url)},e.prototype.create=function(){return new P(this)},Object.defineProperty(e.prototype,"isPlayable",{get:function(){return!!this._source&&4===this._source.readyState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._source.duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)},Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),e.prototype.load=function(t){var e=this._source,i=this.parent;if(4!==e.readyState){if(!i.url)return t(new Error("sound.url or sound.source must be set"));e.src=i.url;var n=function(){e.removeEventListener("canplaythrough",r),e.removeEventListener("load",r),e.removeEventListener("abort",o),e.removeEventListener("error",s)},r=function(){n(),i.isLoaded=!0;var e=i.autoPlayStart();t&&t(null,i,e)},o=function(){n(),t&&t(new Error("Sound loading has been aborted"))},s=function(){n();var i="Failed to load audio element (code: "+e.error.code+")";t&&t(new Error(i))};e.addEventListener("canplaythrough",r,!1),e.addEventListener("load",r,!1),e.addEventListener("abort",o,!1),e.addEventListener("error",s,!1),e.load()}else{i.isLoaded=!0;var a=i.autoPlayStart();t&&setTimeout((function(){t(null,i,a)}),0)}},e}(o.EventEmitter),M=function(t){function e(){var e=t.call(this)||this;return e.speed=1,e.volume=1,e.muted=!1,e.paused=!1,e}return l(e,t),e.prototype.refresh=function(){this.emit("refresh")},e.prototype.refreshPaused=function(){this.emit("refreshPaused")},Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioContext",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this.paused},e.prototype.destroy=function(){this.removeAllListeners()},e}(o.EventEmitter),O={HTMLAudioMedia:C,HTMLAudioInstance:P,HTMLAudioContext:M},I=["mp3","ogg","oga","opus","mpeg","wav","m4a","aiff","wma","mid"],k=(p={m4a:"mp4",oga:"ogg"},g=document.createElement("audio"),v={},m=/^no$/,I.forEach((function(t){var e=p[t]||t,i=g.canPlayType("audio/"+t).replace(m,""),n=g.canPlayType("audio/"+e).replace(m,"");v[t]=!!i||!!n})),Object.freeze(v)),R=/\.(\{([^\}]+)\})(\?.*)?$/;function L(t){var e=R,i="string"==typeof t?t:t.url;if(e.test(i)){for(var n=e.exec(i),r=n[2].split(","),o=r[r.length-1],s=0,a=r.length;s<a;s++){var h=r[s];if(k[h]){o=h;break}}var u=i.replace(n[1],o);return"string"!=typeof t&&(t.extension=o,t.url=u),u}return i}var D,F=function(){function t(){}return t.add=function(){t.legacy=d().useLegacy},Object.defineProperty(t,"legacy",{set:function(t){var e=I;t?e.forEach((function(t){n.c.setExtensionXhrType(t,n.c.XHR_RESPONSE_TYPE.DEFAULT),n.c.setExtensionLoadType(t,n.c.LOAD_TYPE.AUDIO)})):e.forEach((function(t){n.c.setExtensionXhrType(t,n.c.XHR_RESPONSE_TYPE.BUFFER),n.c.setExtensionLoadType(t,n.c.LOAD_TYPE.XHR)}))},enumerable:!0,configurable:!0}),t.pre=function(t,e){L(t),e()},t.use=function(t,e){t.data&&I.indexOf(t.extension)>-1?t.sound=d().add(t.name,{loaded:e,preload:!0,url:t.url,source:t.data}):e()},t}(),N=function(){function t(t,e){this.parent=t,Object.assign(this,e),this.duration=this.end-this.start}return t.prototype.play=function(t){return this.parent.play({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})},t.prototype.destroy=function(){this.parent=null},t}(),U=function(){function t(t,e){this.media=t,this.options=e,this._instances=[],this._sprites={},this.media.init(this);var i=e.complete;this._autoPlayOptions=i?{complete:i}:null,this.isLoaded=!1,this.isPlaying=!1,this.autoPlay=e.autoPlay,this.singleInstance=e.singleInstance,this.preload=e.preload||this.autoPlay,this.url=e.url,this.speed=e.speed,this.volume=e.volume,this.loop=e.loop,e.sprites&&this.addSprites(e.sprites),this.preload&&this._preload(e.loaded)}return t.from=function(e){var i={};return"string"==typeof e?i.url=e:e instanceof ArrayBuffer||e instanceof HTMLAudioElement?i.source=e:i=e,(i=f({autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1},i)).url&&(i.url=L(i.url)),Object.freeze(i),new t(d().useLegacy?new C:new x,i)},Object.defineProperty(t.prototype,"context",{get:function(){return d().context},enumerable:!0,configurable:!0}),t.prototype.pause=function(){return this.isPlaying=!1,this.paused=!0,this},t.prototype.resume=function(){return this.isPlaying=this._instances.length>0,this.paused=!1,this},Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this.media.filters},set:function(t){this.media.filters=t},enumerable:!0,configurable:!0}),t.prototype.addSprites=function(t,e){if("object"==typeof t){var i={};for(var n in t)i[n]=this.addSprites(n,t[n]);return i}if("string"==typeof t){var r=new N(this,e);return this._sprites[t]=r,r}},t.prototype.destroy=function(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null},t.prototype.removeSprites=function(t){if(t){var e=this._sprites[t];void 0!==e&&(e.destroy(),delete this._sprites[t])}else for(var i in this._sprites)this.removeSprites(i);return this},Object.defineProperty(t.prototype,"isPlayable",{get:function(){return this.isLoaded&&this.media&&this.media.isPlayable},enumerable:!0,configurable:!0}),t.prototype.stop=function(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(var t=this._instances.length-1;t>=0;t--)this._instances[t].stop();return this},t.prototype.play=function(t,e){var i,n=this;if("string"==typeof t?i={sprite:o=t,loop:this.loop,complete:e}:"function"==typeof t?(i={}).complete=t:i=t,(i=f({complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1},i||{})).sprite){var r=i.sprite,o=this._sprites[r];i.start=o.start,i.end=o.end,i.speed=o.speed||1,i.loop=o.loop||i.loop,delete i.sprite}if(i.offset&&(i.start=i.offset),!this.isLoaded)return new Promise((function(t,e){n.autoPlay=!0,n._autoPlayOptions=i,n._preload((function(n,r,o){n?e(n):(i.loaded&&i.loaded(n,r,o),t(o))}))}));this.singleInstance&&this._removeInstances();var s=this._createInstance();return this._instances.push(s),this.isPlaying=!0,s.once("end",(function(){i.complete&&i.complete(n),n._onComplete(s)})),s.once("stop",(function(){n._onComplete(s)})),s.play(i),s},t.prototype.refresh=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refresh()},t.prototype.refreshPaused=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refreshPaused()},Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),t.prototype._preload=function(t){this.media.load(t)},Object.defineProperty(t.prototype,"instances",{get:function(){return this._instances},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sprites",{get:function(){return this._sprites},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.media.duration},enumerable:!0,configurable:!0}),t.prototype.autoPlayStart=function(){var t;return this.autoPlay&&(t=this.play(this._autoPlayOptions)),t},t.prototype._removeInstances=function(){for(var t=this._instances.length-1;t>=0;t--)this._poolInstance(this._instances[t]);this._instances.length=0},t.prototype._onComplete=function(t){if(this._instances){var e=this._instances.indexOf(t);e>-1&&this._instances.splice(e,1),this.isPlaying=this._instances.length>0}this._poolInstance(t)},t.prototype._createInstance=function(){if(t._pool.length>0){var e=t._pool.pop();return e.init(this.media),e}return this.media.create()},t.prototype._poolInstance=function(e){e.destroy(),t._pool.indexOf(e)<0&&t._pool.push(e)},t._pool=[],t}(),B=function(){function t(){this.init()}return t.prototype.init=function(){return this.supported&&(this._webAudioContext=new E),this._htmlAudioContext=new M,this._sounds={},this.useLegacy=!this.supported,this},Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filtersAll",{get:function(){return this.useLegacy?[]:this._context.filters},set:function(t){this.useLegacy||(this._context.filters=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supported",{get:function(){return null!==E.AudioContext},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){if("object"==typeof t){var i={};for(var n in t){var r=this._getOptions(t[n],e);i[n]=this.add(n,r)}return i}if("string"==typeof t){if(e instanceof U)return this._sounds[t]=e,e;r=this._getOptions(e);var o=U.from(r);return this._sounds[t]=o,o}},t.prototype._getOptions=function(t,e){var i;return i="string"==typeof t?{url:t}:t instanceof ArrayBuffer||t instanceof HTMLAudioElement?{source:t}:t,f({},i,e||{})},Object.defineProperty(t.prototype,"useLegacy",{get:function(){return this._useLegacy},set:function(t){F.legacy=t,this._useLegacy=t,this._context=!t&&this.supported?this._webAudioContext:this._htmlAudioContext},enumerable:!0,configurable:!0}),t.prototype.remove=function(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this},Object.defineProperty(t.prototype,"volumeAll",{get:function(){return this._context.volume},set:function(t){this._context.volume=t,this._context.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speedAll",{get:function(){return this._context.speed},set:function(t){this._context.speed=t,this._context.refresh()},enumerable:!0,configurable:!0}),t.prototype.togglePauseAll=function(){return this._context.togglePause()},t.prototype.pauseAll=function(){return this._context.paused=!0,this._context.refreshPaused(),this},t.prototype.resumeAll=function(){return this._context.paused=!1,this._context.refreshPaused(),this},t.prototype.toggleMuteAll=function(){return this._context.toggleMute()},t.prototype.muteAll=function(){return this._context.muted=!0,this._context.refresh(),this},t.prototype.unmuteAll=function(){return this._context.muted=!1,this._context.refresh(),this},t.prototype.removeAll=function(){for(var t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this},t.prototype.stopAll=function(){for(var t in this._sounds)this._sounds[t].stop();return this},t.prototype.exists=function(t,e){return void 0===e&&(e=!1),!!this._sounds[t]},t.prototype.find=function(t){return this.exists(t,!0),this._sounds[t]},t.prototype.play=function(t,e){return this.find(t).play(e)},t.prototype.stop=function(t){return this.find(t).stop()},t.prototype.pause=function(t){return this.find(t).pause()},t.prototype.resume=function(t){return this.find(t).resume()},t.prototype.volume=function(t,e){var i=this.find(t);return void 0!==e&&(i.volume=e),i.volume},t.prototype.speed=function(t,e){var i=this.find(t);return void 0!==e&&(i.speed=e),i.speed},t.prototype.duration=function(t){return this.find(t).duration},t.prototype.close=function(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this},t}(),j=0,X={get PLAY_ID(){return j},playOnce:function(t,e){var i="alias"+j++;return d().add(i,{url:t,preload:!0,autoPlay:!0,loaded:function(t){t&&(d().remove(i),e&&e(t))},complete:function(){d().remove(i),e&&e(null)}}),i},render:function(t,e){var i=document.createElement("canvas");e=f({width:512,height:128,fill:"black"},e||{}),i.width=e.width,i.height=e.height;var n=s.e.from(i);if(!(t.media instanceof x))return n;var r=t.media,o=i.getContext("2d");o.fillStyle=e.fill;for(var a=r.buffer.getChannelData(0),h=Math.ceil(a.length/e.width),u=e.height/2,l=0;l<e.width;l++){for(var c=1,d=-1,p=0;p<h;p++){var g=a[l*h+p];g<c&&(c=g),g>d&&(d=g)}o.fillRect(l,(1+c)*u,1,Math.max(1,(d-c)*u))}return n},resolveUrl:L,sineTone:function(t,e){void 0===t&&(t=200),void 0===e&&(e=1);var i=U.from({singleInstance:!0});if(!(i.media instanceof x))return i;for(var n=i.media,r=i.context.audioContext.createBuffer(1,48e3*e,48e3),o=r.getChannelData(0),s=0;s<o.length;s++){var a=t*(s/r.sampleRate)*Math.PI;o[s]=2*Math.sin(a)}return n.buffer=r,i.isLoaded=!0,i},extensions:I,supported:k},V=(D=new B,c=D,D);n.b.registerPlugin(F),Object.defineProperties(V,{Filterable:{get:function(){return a}},filters:{get:function(){return S}},htmlaudio:{get:function(){return O}},Sound:{get:function(){return U}},SoundLibrary:{get:function(){return B}},SoundSprite:{get:function(){return N}},utils:{get:function(){return X}},webaudio:{get:function(){return T}},sound:{get:function(){return V}}}),e.a=V},function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));
/*!
 * @pixi/runner - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var n=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,i,n,r,o,s,a){if(arguments.length>8)throw new Error("max arguments reached");var h=this,u=h.name,l=h.items;this._aliasCount++;for(var c=0,f=l.length;c<f;c++)l[c][u](t,e,i,n,r,o,s,a);return l===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t}();Object.defineProperties(n.prototype,{dispatch:{value:n.prototype.emit},run:{value:n.prototype.emit}})},function(t,e,i){var n=i(53);t.exports=function(t){return Object(n(t))}},function(t,e,i){"use strict";function n(t,e){return t(e={exports:{}},e.exports),e.exports}i.d(e,"c",(function(){return Ms})),i.d(e,"f",(function(){return Xs})),i.d(e,"d",(function(){return zs})),i.d(e,"a",(function(){return Gs})),i.d(e,"b",(function(){return Ks})),i.d(e,"e",(function(){return ta}));var r=n((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),o=n((function(t){var e=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=e)})),s=(o.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),a=function(t){if(!s(t))throw TypeError(t+" is not an object!");return t},h=function(t){try{return!!t()}catch(t){return!0}},u=!h((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),l=r.document,c=s(l)&&s(l.createElement),f=function(t){return c?l.createElement(t):{}},d=!u&&!h((function(){return 7!=Object.defineProperty(f("div"),"a",{get:function(){return 7}}).a})),p=function(t,e){if(!s(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!s(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!s(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!s(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")},g=Object.defineProperty,v={f:u?Object.defineProperty:function(t,e,i){if(a(t),e=p(e,!0),a(i),d)try{return g(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},m=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},y=u?function(t,e,i){return v.f(t,e,m(1,i))}:function(t,e,i){return t[e]=i,t},b={}.hasOwnProperty,_=function(t,e){return b.call(t,e)},w=0,x=Math.random(),E=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++w+x).toString(36))},T=n((function(t){var e=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,i){return e[t]||(e[t]=void 0!==i?i:{})})("versions",[]).push({version:o.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),S=T("native-function-to-string",Function.toString),A=n((function(t){var e=E("src"),i=(""+S).split("toString");o.inspectSource=function(t){return S.call(t)},(t.exports=function(t,n,o,s){var a="function"==typeof o;a&&(_(o,"name")||y(o,"name",n)),t[n]!==o&&(a&&(_(o,e)||y(o,e,t[n]?""+t[n]:i.join(String(n)))),t===r?t[n]=o:s?t[n]?t[n]=o:y(t,n,o):(delete t[n],y(t,n,o)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[e]||S.call(this)}))})),P=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},C=function(t,e,i){if(P(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}},M=function(t,e,i){var n,s,a,h,u=t&M.F,l=t&M.G,c=t&M.S,f=t&M.P,d=t&M.B,p=l?r:c?r[e]||(r[e]={}):(r[e]||{}).prototype,g=l?o:o[e]||(o[e]={}),v=g.prototype||(g.prototype={});for(n in l&&(i=e),i)a=((s=!u&&p&&void 0!==p[n])?p:i)[n],h=d&&s?C(a,r):f&&"function"==typeof a?C(Function.call,a):a,p&&A(p,n,a,t&M.U),g[n]!=a&&y(g,n,h),f&&v[n]!=a&&(v[n]=a)};r.core=o,M.F=1,M.G=2,M.S=4,M.P=8,M.B=16,M.W=32,M.U=64,M.R=128;var O=M,I=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},k=function(t){return Object(I(t))},R=Math.ceil,L=Math.floor,D=function(t){return isNaN(t=+t)?0:(t>0?L:R)(t)},F=Math.max,N=Math.min,U=function(t,e){return(t=D(t))<0?F(t+e,0):N(t,e)},B=Math.min,j=function(t){return t>0?B(D(t),9007199254740991):0},X=[].copyWithin||function(t,e){var i=k(this),n=j(i.length),r=U(t,n),o=U(e,n),s=arguments.length>2?arguments[2]:void 0,a=Math.min((void 0===s?n:U(s,n))-o,n-r),h=1;for(o<r&&r<o+a&&(h=-1,o+=a-1,r+=a-1);a-- >0;)o in i?i[r]=i[o]:delete i[r],r+=h,o+=h;return i},V=n((function(t){var e=T("wks"),i=r.Symbol,n="function"==typeof i;(t.exports=function(t){return e[t]||(e[t]=n&&i[t]||(n?i:E)("Symbol."+t))}).store=e})),z=V("unscopables"),Y=Array.prototype;null==Y[z]&&y(Y,z,{});var W=function(t){Y[z][t]=!0};O(O.P,"Array",{copyWithin:X}),W("copyWithin");var G=function(t){for(var e=k(this),i=j(e.length),n=arguments.length,r=U(n>1?arguments[1]:void 0,i),o=n>2?arguments[2]:void 0,s=void 0===o?i:U(o,i);s>r;)e[r++]=t;return e};O(O.P,"Array",{fill:G}),W("fill");var H={}.toString,q=function(t){return H.call(t).slice(8,-1)},Z=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==q(t)?t.split(""):Object(t)},K=Array.isArray||function(t){return"Array"==q(t)},J=V("species"),Q=function(t,e){return new(function(t){var e;return K(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!K(e.prototype)||(e=void 0),s(e)&&null===(e=e[J])&&(e=void 0)),void 0===e?Array:e}(t))(e)},$=function(t,e){var i=1==t,n=2==t,r=3==t,o=4==t,s=6==t,a=5==t||s,h=e||Q;return function(e,u,l){for(var c,f,d=k(e),p=Z(d),g=C(u,l,3),v=j(p.length),m=0,y=i?h(e,v):n?h(e,0):void 0;v>m;m++)if((a||m in p)&&(f=g(c=p[m],m,d),t))if(i)y[m]=f;else if(f)switch(t){case 3:return!0;case 5:return c;case 6:return m;case 2:y.push(c)}else if(o)return!1;return s?-1:r||o?o:y}},tt=$(5),et=!0;"find"in[]&&Array(1).find((function(){et=!1})),O(O.P+O.F*et,"Array",{find:function(t){return tt(this,t,arguments.length>1?arguments[1]:void 0)}}),W("find");var it=$(6),nt=!0;"findIndex"in[]&&Array(1).findIndex((function(){nt=!1})),O(O.P+O.F*nt,"Array",{findIndex:function(t){return it(this,t,arguments.length>1?arguments[1]:void 0)}}),W("findIndex");var rt=V("isConcatSpreadable");var ot=function t(e,i,n,r,o,a,h,u){for(var l,c,f=o,d=0,p=!!h&&C(h,u,3);d<r;){if(d in n){if(l=p?p(n[d],d,i):n[d],c=!1,s(l)&&(c=void 0!==(c=l[rt])?!!c:K(l)),c&&a>0)f=t(e,i,l,j(l.length),f,a-1)-1;else{if(f>=9007199254740991)throw TypeError();e[f]=l}f++}d++}return f};O(O.P,"Array",{flatMap:function(t){var e,i,n=k(this);return P(t),e=j(n.length),i=Q(n,0),ot(i,n,n,e,0,1,t,arguments[1]),i}}),W("flatMap");var st=function(t,e,i,n){try{return n?e(a(i)[0],i[1]):e(i)}catch(e){var r=t.return;throw void 0!==r&&a(r.call(t)),e}},at={},ht=V("iterator"),ut=Array.prototype,lt=function(t){return void 0!==t&&(at.Array===t||ut[ht]===t)},ct=function(t,e,i){e in t?v.f(t,e,m(0,i)):t[e]=i},ft=V("toStringTag"),dt="Arguments"==q(function(){return arguments}()),pt=function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ft))?i:dt?q(e):"Object"==(n=q(e))&&"function"==typeof e.callee?"Arguments":n},gt=V("iterator"),vt=o.getIteratorMethod=function(t){if(null!=t)return t[gt]||t["@@iterator"]||at[pt(t)]},mt=V("iterator"),yt=!1;try{[7][mt]().return=function(){yt=!0}}catch(fr){}var bt=function(t,e){if(!e&&!yt)return!1;var i=!1;try{var n=[7],r=n[mt]();r.next=function(){return{done:i=!0}},n[mt]=function(){return r},t(n)}catch(t){}return i};O(O.S+O.F*!bt((function(t){})),"Array",{from:function(t){var e,i,n,r,o=k(t),s="function"==typeof this?this:Array,a=arguments.length,h=a>1?arguments[1]:void 0,u=void 0!==h,l=0,c=vt(o);if(u&&(h=C(h,a>2?arguments[2]:void 0,2)),null==c||s==Array&&lt(c))for(i=new s(e=j(o.length));e>l;l++)ct(i,l,u?h(o[l],l):o[l]);else for(r=c.call(o),i=new s;!(n=r.next()).done;l++)ct(i,l,u?st(r,h,[n.value,l],!0):n.value);return i.length=l,i}});var _t=function(t){return Z(I(t))},wt=function(t){return function(e,i,n){var r,o=_t(e),s=j(o.length),a=U(n,s);if(t&&i!=i){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===i)return t||a||0;return!t&&-1}},xt=wt(!0);O(O.P,"Array",{includes:function(t){return xt(this,t,arguments.length>1?arguments[1]:void 0)}}),W("includes");var Et=function(t,e){return{value:e,done:!!t}},Tt=T("keys"),St=function(t){return Tt[t]||(Tt[t]=E(t))},At=wt(!1),Pt=St("IE_PROTO"),Ct=function(t,e){var i,n=_t(t),r=0,o=[];for(i in n)i!=Pt&&_(n,i)&&o.push(i);for(;e.length>r;)_(n,i=e[r++])&&(~At(o,i)||o.push(i));return o},Mt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Ot=Object.keys||function(t){return Ct(t,Mt)},It=u?Object.defineProperties:function(t,e){a(t);for(var i,n=Ot(e),r=n.length,o=0;r>o;)v.f(t,i=n[o++],e[i]);return t},kt=r.document,Rt=kt&&kt.documentElement,Lt=St("IE_PROTO"),Dt=function(){},Ft=function(){var t,e=f("iframe"),i=Mt.length;for(e.style.display="none",Rt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Ft=t.F;i--;)delete Ft.prototype[Mt[i]];return Ft()},Nt=Object.create||function(t,e){var i;return null!==t?(Dt.prototype=a(t),i=new Dt,Dt.prototype=null,i[Lt]=t):i=Ft(),void 0===e?i:It(i,e)},Ut=v.f,Bt=V("toStringTag"),jt=function(t,e,i){t&&!_(t=i?t:t.prototype,Bt)&&Ut(t,Bt,{configurable:!0,value:e})},Xt={};y(Xt,V("iterator"),(function(){return this}));var Vt=St("IE_PROTO"),zt=Object.prototype,Yt=Object.getPrototypeOf||function(t){return t=k(t),_(t,Vt)?t[Vt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?zt:null},Wt=V("iterator"),Gt=!([].keys&&"next"in[].keys()),Ht=function(){return this},qt=function(t,e,i,n,r,o,s){!function(t,e,i){t.prototype=Nt(Xt,{next:m(1,i)}),jt(t,e+" Iterator")}(i,e,n);var a,h,u,l=function(t){if(!Gt&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},c=e+" Iterator",f="values"==r,d=!1,p=t.prototype,g=p[Wt]||p["@@iterator"]||r&&p[r],v=g||l(r),b=r?f?l("entries"):v:void 0,_="Array"==e&&p.entries||g;if(_&&(u=Yt(_.call(new t)))!==Object.prototype&&u.next&&(jt(u,c,!0),"function"==typeof u[Wt]||y(u,Wt,Ht)),f&&g&&"values"!==g.name&&(d=!0,v=function(){return g.call(this)}),!Gt&&!d&&p[Wt]||y(p,Wt,v),at[e]=v,at[c]=Ht,r)if(a={values:f?v:l("values"),keys:o?v:l("keys"),entries:b},s)for(h in a)h in p||A(p,h,a[h]);else O(O.P+O.F*(Gt||d),e,a);return a},Zt=qt(Array,"Array",(function(t,e){this._t=_t(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,Et(1)):Et(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])}),"values");at.Arguments=at.Array,W("keys"),W("values"),W("entries"),O(O.S+O.F*h((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){for(var t=0,e=arguments.length,i=new("function"==typeof this?this:Array)(e);e>t;)ct(i,t,arguments[t++]);return i.length=e,i}});var Kt=V("species"),Jt=function(t){var e=r[t];u&&e&&!e[Kt]&&v.f(e,Kt,{configurable:!0,get:function(){return this}})};Jt("Array");var Qt=V("toPrimitive"),$t=Date.prototype;Qt in $t||y($t,Qt,(function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return p(a(this),"number"!=t)}));var te=V("hasInstance"),ee=Function.prototype;te in ee||v.f(ee,te,{value:function(t){if("function"!=typeof this||!s(t))return!1;if(!s(this.prototype))return t instanceof this;for(;t=Yt(t);)if(this.prototype===t)return!0;return!1}});var ie=v.f,ne=Function.prototype,re=/^\s*function ([^ (]*)/;"name"in ne||u&&ie(ne,"name",{configurable:!0,get:function(){try{return(""+this).match(re)[1]}catch(t){return""}}});var oe=function(t,e,i){for(var n in e)A(t,n,e[n],i);return t},se=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t},ae=n((function(t){var e={},i={},n=t.exports=function(t,n,r,o,s){var h,u,l,c,f=s?function(){return t}:vt(t),d=C(r,o,n?2:1),p=0;if("function"!=typeof f)throw TypeError(t+" is not iterable!");if(lt(f)){for(h=j(t.length);h>p;p++)if((c=n?d(a(u=t[p])[0],u[1]):d(t[p]))===e||c===i)return c}else for(l=f.call(t);!(u=l.next()).done;)if((c=st(l,d,u.value,n))===e||c===i)return c};n.BREAK=e,n.RETURN=i})),he=n((function(t){var e=E("meta"),i=v.f,n=0,r=Object.isExtensible||function(){return!0},o=!h((function(){return r(Object.preventExtensions({}))})),a=function(t){i(t,e,{value:{i:"O"+ ++n,w:{}}})},u=t.exports={KEY:e,NEED:!1,fastKey:function(t,i){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!_(t,e)){if(!r(t))return"F";if(!i)return"E";a(t)}return t[e].i},getWeak:function(t,i){if(!_(t,e)){if(!r(t))return!0;if(!i)return!1;a(t)}return t[e].w},onFreeze:function(t){return o&&u.NEED&&r(t)&&!_(t,e)&&a(t),t}}})),ue=(he.KEY,he.NEED,he.fastKey,he.getWeak,he.onFreeze,function(t,e){if(!s(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}),le=v.f,ce=he.fastKey,fe=u?"_s":"size",de=function(t,e){var i,n=ce(e);if("F"!==n)return t._i[n];for(i=t._f;i;i=i.n)if(i.k==e)return i},pe={getConstructor:function(t,e,i,n){var r=t((function(t,o){se(t,r,e,"_i"),t._t=e,t._i=Nt(null),t._f=void 0,t._l=void 0,t[fe]=0,null!=o&&ae(o,i,t[n],t)}));return oe(r.prototype,{clear:function(){for(var t=ue(this,e),i=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete i[n.i];t._f=t._l=void 0,t[fe]=0},delete:function(t){var i=ue(this,e),n=de(i,t);if(n){var r=n.n,o=n.p;delete i._i[n.i],n.r=!0,o&&(o.n=r),r&&(r.p=o),i._f==n&&(i._f=r),i._l==n&&(i._l=o),i[fe]--}return!!n},forEach:function(t){ue(this,e);for(var i,n=C(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(n(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!de(ue(this,e),t)}}),u&&le(r.prototype,"size",{get:function(){return ue(this,e)[fe]}}),r},def:function(t,e,i){var n,r,o=de(t,e);return o?o.v=i:(t._l=o={i:r=ce(e,!0),k:e,v:i,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[fe]++,"F"!==r&&(t._i[r]=o)),t},getEntry:de,setStrong:function(t,e,i){qt(t,e,(function(t,i){this._t=ue(t,e),this._k=i,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?Et(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,Et(1))}),i?"entries":"values",!i,!0),Jt(e)}},ge={f:{}.propertyIsEnumerable},ve=Object.getOwnPropertyDescriptor,me={f:u?ve:function(t,e){if(t=_t(t),e=p(e,!0),d)try{return ve(t,e)}catch(t){}if(_(t,e))return m(!ge.f.call(t,e),t[e])}},ye=function(t,e){if(a(t),!s(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},be={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=C(Function.call,me.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return ye(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:ye},_e=be.set,we=function(t,e,i){var n,r=e.constructor;return r!==i&&"function"==typeof r&&(n=r.prototype)!==i.prototype&&s(n)&&_e&&_e(t,n),t},xe=function(t,e,i,n,o,a){var u=r[t],l=u,c=o?"set":"add",f=l&&l.prototype,d={},p=function(t){var e=f[t];A(f,t,"delete"==t?function(t){return!(a&&!s(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(a&&!s(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return a&&!s(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,i){return e.call(this,0===t?0:t,i),this})};if("function"==typeof l&&(a||f.forEach&&!h((function(){(new l).entries().next()})))){var g=new l,v=g[c](a?{}:-0,1)!=g,m=h((function(){g.has(1)})),y=bt((function(t){new l(t)})),b=!a&&h((function(){for(var t=new l,e=5;e--;)t[c](e,e);return!t.has(-0)}));y||((l=e((function(e,i){se(e,l,t);var n=we(new u,e,l);return null!=i&&ae(i,o,n[c],n),n}))).prototype=f,f.constructor=l),(m||b)&&(p("delete"),p("has"),o&&p("get")),(b||v)&&p(c),a&&f.clear&&delete f.clear}else l=n.getConstructor(e,t,o,c),oe(l.prototype,i),he.NEED=!0;return jt(l,t),d[t]=l,O(O.G+O.W+O.F*(l!=u),d),a||n.setStrong(l,t,o),l},Ee=(xe("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=pe.getEntry(ue(this,"Map"),t);return e&&e.v},set:function(t,e){return pe.def(ue(this,"Map"),0===t?0:t,e)}},pe,!0),Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}),Te=Math.sqrt,Se=Math.acosh;O(O.S+O.F*!(Se&&710==Math.floor(Se(Number.MAX_VALUE))&&Se(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:Ee(t-1+Te(t-1)*Te(t+1))}});var Ae=Math.asinh;O(O.S+O.F*!(Ae&&1/Ae(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}});var Pe=Math.atanh;O(O.S+O.F*!(Pe&&1/Pe(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}});var Ce=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1};O(O.S,"Math",{cbrt:function(t){return Ce(t=+t)*Math.pow(Math.abs(t),1/3)}}),O(O.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}});var Me=Math.exp;O(O.S,"Math",{cosh:function(t){return(Me(t=+t)+Me(-t))/2}});var Oe=Math.expm1,Ie=!Oe||Oe(10)>22025.465794806718||Oe(10)<22025.465794806718||-2e-17!=Oe(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:Oe;O(O.S+O.F*(Ie!=Math.expm1),"Math",{expm1:Ie});var ke=Math.pow,Re=ke(2,-52),Le=ke(2,-23),De=ke(2,127)*(2-Le),Fe=ke(2,-126),Ne=Math.fround||function(t){var e,i,n=Math.abs(t),r=Ce(t);return n<Fe?r*function(t){return t+1/Re-1/Re}(n/Fe/Le)*Fe*Le:(i=(e=(1+Le/Re)*n)-(e-n))>De||i!=i?r*(1/0):r*i};O(O.S,"Math",{fround:Ne});var Ue=Math.abs;O(O.S,"Math",{hypot:function(t,e){for(var i,n,r=0,o=0,s=arguments.length,a=0;o<s;)a<(i=Ue(arguments[o++]))?(r=r*(n=a/i)*n+1,a=i):r+=i>0?(n=i/a)*n:i;return a===1/0?1/0:a*Math.sqrt(r)}});var Be=Math.imul;O(O.S+O.F*h((function(){return-5!=Be(4294967295,5)||2!=Be.length})),"Math",{imul:function(t,e){var i=+t,n=+e,r=65535&i,o=65535&n;return 0|r*o+((65535&i>>>16)*o+r*(65535&n>>>16)<<16>>>0)}}),O(O.S,"Math",{log1p:Ee}),O(O.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}}),O(O.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}}),O(O.S,"Math",{sign:Ce});var je=Math.exp;O(O.S+O.F*h((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(Ie(t)-Ie(-t))/2:(je(t-1)-je(-t-1))*(Math.E/2)}});var Xe=Math.exp;O(O.S,"Math",{tanh:function(t){var e=Ie(t=+t),i=Ie(-t);return e==1/0?1:i==1/0?-1:(e-i)/(Xe(t)+Xe(-t))}}),O(O.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}});var Ve=Mt.concat("length","prototype"),ze={f:Object.getOwnPropertyNames||function(t){return Ct(t,Ve)}},Ye="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",We="["+Ye+"]",Ge=RegExp("^"+We+We+"*"),He=RegExp(We+We+"*$"),qe=function(t,e,i){var n={},r=h((function(){return!!Ye[t]()||"​"!="​"[t]()})),o=n[t]=r?e(Ze):Ye[t];i&&(n[i]=o),O(O.P+O.F*r,"String",n)},Ze=qe.trim=function(t,e){return t=String(I(t)),1&e&&(t=t.replace(Ge,"")),2&e&&(t=t.replace(He,"")),t},Ke=qe,Je=ze.f,Qe=me.f,$e=v.f,ti=Ke.trim,ei=r.Number,ii=ei,ni=ei.prototype,ri="Number"==q(Nt(ni)),oi="trim"in String.prototype,si=function(t){var e=p(t,!1);if("string"==typeof e&&e.length>2){var i,n,r,o=(e=oi?e.trim():ti(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(i=e.charCodeAt(2))||120===i)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+e}for(var s,a=e.slice(2),h=0,u=a.length;h<u;h++)if((s=a.charCodeAt(h))<48||s>r)return NaN;return parseInt(a,n)}}return+e};if(!ei(" 0o1")||!ei("0b1")||ei("+0x1")){ei=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof ei&&(ri?h((function(){ni.valueOf.call(i)})):"Number"!=q(i))?we(new ii(si(e)),i,ei):si(e)};for(var ai,hi=u?Je(ii):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),ui=0;hi.length>ui;ui++)_(ii,ai=hi[ui])&&!_(ei,ai)&&$e(ei,ai,Qe(ii,ai));ei.prototype=ni,ni.constructor=ei,A(r,"Number",ei)}O(O.S,"Number",{EPSILON:Math.pow(2,-52)});var li=r.isFinite;O(O.S,"Number",{isFinite:function(t){return"number"==typeof t&&li(t)}});var ci=Math.floor,fi=function(t){return!s(t)&&isFinite(t)&&ci(t)===t};O(O.S,"Number",{isInteger:fi}),O(O.S,"Number",{isNaN:function(t){return t!=t}});var di=Math.abs;O(O.S,"Number",{isSafeInteger:function(t){return fi(t)&&di(t)<=9007199254740991}}),O(O.S,"Number",{MAX_SAFE_INTEGER:9007199254740991}),O(O.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991});var pi=r.parseFloat,gi=Ke.trim,vi=1/pi(Ye+"-0")!=-1/0?function(t){var e=gi(String(t),3),i=pi(e);return 0===i&&"-"==e.charAt(0)?-0:i}:pi;O(O.S+O.F*(Number.parseFloat!=vi),"Number",{parseFloat:vi});var mi=r.parseInt,yi=Ke.trim,bi=/^[-+]?0[xX]/,_i=8!==mi(Ye+"08")||22!==mi(Ye+"0x16")?function(t,e){var i=yi(String(t),3);return mi(i,e>>>0||(bi.test(i)?16:10))}:mi;O(O.S+O.F*(Number.parseInt!=_i),"Number",{parseInt:_i});var wi={f:Object.getOwnPropertySymbols},xi=Object.assign,Ei=!xi||h((function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach((function(t){e[t]=t})),7!=xi({},t)[i]||Object.keys(xi({},e)).join("")!=n}))?function(t,e){for(var i=k(t),n=arguments.length,r=1,o=wi.f,s=ge.f;n>r;)for(var a,h=Z(arguments[r++]),l=o?Ot(h).concat(o(h)):Ot(h),c=l.length,f=0;c>f;)a=l[f++],u&&!s.call(h,a)||(i[a]=h[a]);return i}:xi;O(O.S+O.F,"Object",{assign:Ei});var Ti=!h((function(){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete r[t]}));u&&O(O.P+Ti,"Object",{__defineGetter__:function(t,e){v.f(k(this),t,{get:P(e),enumerable:!0,configurable:!0})}}),u&&O(O.P+Ti,"Object",{__defineSetter__:function(t,e){v.f(k(this),t,{set:P(e),enumerable:!0,configurable:!0})}});var Si=ge.f,Ai=function(t){return function(e){for(var i,n=_t(e),r=Ot(n),o=r.length,s=0,a=[];o>s;)i=r[s++],u&&!Si.call(n,i)||a.push(t?[i,n[i]]:n[i]);return a}},Pi=Ai(!0);O(O.S,"Object",{entries:function(t){return Pi(t)}});var Ci=function(t,e){var i=(o.Object||{})[t]||Object[t],n={};n[t]=e(i),O(O.S+O.F*h((function(){i(1)})),"Object",n)},Mi=he.onFreeze;Ci("freeze",(function(t){return function(e){return t&&s(e)?t(Mi(e)):e}}));var Oi=me.f;Ci("getOwnPropertyDescriptor",(function(){return function(t,e){return Oi(_t(t),e)}}));var Ii=r.Reflect,ki=Ii&&Ii.ownKeys||function(t){var e=ze.f(a(t)),i=wi.f;return i?e.concat(i(t)):e};O(O.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,i,n=_t(t),r=me.f,o=ki(n),s={},a=0;o.length>a;)void 0!==(i=r(n,e=o[a++]))&&ct(s,e,i);return s}});var Ri=ze.f,Li={}.toString,Di="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Fi={f:function(t){return Di&&"[object Window]"==Li.call(t)?function(t){try{return Ri(t)}catch(t){return Di.slice()}}(t):Ri(_t(t))}};Ci("getOwnPropertyNames",(function(){return Fi.f})),Ci("getPrototypeOf",(function(){return function(t){return Yt(k(t))}}));var Ni=me.f;u&&O(O.P+Ti,"Object",{__lookupGetter__:function(t){var e,i=k(this),n=p(t,!0);do{if(e=Ni(i,n))return e.get}while(i=Yt(i))}});var Ui=me.f;u&&O(O.P+Ti,"Object",{__lookupSetter__:function(t){var e,i=k(this),n=p(t,!0);do{if(e=Ui(i,n))return e.set}while(i=Yt(i))}});var Bi=he.onFreeze;Ci("preventExtensions",(function(t){return function(e){return t&&s(e)?t(Bi(e)):e}}));var ji={};ji[V("toStringTag")]="z",ji+""!="[object z]"&&A(Object.prototype,"toString",(function(){return"[object "+pt(this)+"]"}),!0);var Xi=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};O(O.S,"Object",{is:Xi}),Ci("isFrozen",(function(t){return function(e){return!s(e)||!!t&&t(e)}})),Ci("isSealed",(function(t){return function(e){return!s(e)||!!t&&t(e)}})),Ci("isExtensible",(function(t){return function(e){return!!s(e)&&(!t||t(e))}})),Ci("keys",(function(){return function(t){return Ot(k(t))}}));var Vi=he.onFreeze;Ci("seal",(function(t){return function(e){return t&&s(e)?t(Vi(e)):e}}));var zi=Ai(!1);O(O.S,"Object",{values:function(t){return zi(t)}});var Yi,Wi,Gi,Hi=V("species"),qi=function(t,e){var i,n=a(t).constructor;return void 0===n||null==(i=a(n)[Hi])?e:P(i)},Zi=function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)},Ki=r.process,Ji=r.setImmediate,Qi=r.clearImmediate,$i=r.MessageChannel,tn=r.Dispatch,en=0,nn={},rn=function(){var t=+this;if(nn.hasOwnProperty(t)){var e=nn[t];delete nn[t],e()}},on=function(t){rn.call(t.data)};Ji&&Qi||(Ji=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return nn[++en]=function(){Zi("function"==typeof t?t:Function(t),e)},Yi(en),en},Qi=function(t){delete nn[t]},"process"==q(Ki)?Yi=function(t){Ki.nextTick(C(rn,t,1))}:tn&&tn.now?Yi=function(t){tn.now(C(rn,t,1))}:$i?(Gi=(Wi=new $i).port2,Wi.port1.onmessage=on,Yi=C(Gi.postMessage,Gi,1)):r.addEventListener&&"function"==typeof postMessage&&!r.importScripts?(Yi=function(t){r.postMessage(t+"","*")},r.addEventListener("message",on,!1)):Yi="onreadystatechange"in f("script")?function(t){Rt.appendChild(f("script")).onreadystatechange=function(){Rt.removeChild(this),rn.call(t)}}:function(t){setTimeout(C(rn,t,1),0)});var sn={set:Ji,clear:Qi},an=sn.set,hn=r.MutationObserver||r.WebKitMutationObserver,un=r.process,ln=r.Promise,cn="process"==q(un);function fn(t){var e,i;this.promise=new t((function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n})),this.resolve=P(e),this.reject=P(i)}var dn,pn,gn,vn,mn={f:function(t){return new fn(t)}},yn=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},bn=r.navigator,_n=bn&&bn.userAgent||"",wn=function(t,e){if(a(t),s(e)&&e.constructor===t)return e;var i=mn.f(t);return(0,i.resolve)(e),i.promise},xn=sn.set,En=function(){var t,e,i,n=function(){var n,r;for(cn&&(n=un.domain)&&n.exit();t;){r=t.fn,t=t.next;try{r()}catch(n){throw t?i():e=void 0,n}}e=void 0,n&&n.enter()};if(cn)i=function(){un.nextTick(n)};else if(!hn||r.navigator&&r.navigator.standalone)if(ln&&ln.resolve){var o=ln.resolve(void 0);i=function(){o.then(n)}}else i=function(){an.call(r,n)};else{var s=!0,a=document.createTextNode("");new hn(n).observe(a,{characterData:!0}),i=function(){a.data=s=!s}}return function(n){var r={fn:n,next:void 0};e&&(e.next=r),t||(t=r,i()),e=r}}(),Tn=r.TypeError,Sn=r.process,An=Sn&&Sn.versions,Pn=An&&An.v8||"",Cn=r.Promise,Mn="process"==pt(Sn),On=function(){},In=pn=mn.f,kn=!!function(){try{var t=Cn.resolve(1),e=(t.constructor={})[V("species")]=function(t){t(On,On)};return(Mn||"function"==typeof PromiseRejectionEvent)&&t.then(On)instanceof e&&0!==Pn.indexOf("6.6")&&-1===_n.indexOf("Chrome/66")}catch(t){}}(),Rn=function(t){var e;return!(!s(t)||"function"!=typeof(e=t.then))&&e},Ln=function(t,e){if(!t._n){t._n=!0;var i=t._c;En((function(){for(var n=t._v,r=1==t._s,o=0,s=function(e){var i,o,s,a=r?e.ok:e.fail,h=e.resolve,u=e.reject,l=e.domain;try{a?(r||(2==t._h&&Nn(t),t._h=1),!0===a?i=n:(l&&l.enter(),i=a(n),l&&(l.exit(),s=!0)),i===e.promise?u(Tn("Promise-chain cycle")):(o=Rn(i))?o.call(i,h,u):h(i)):u(n)}catch(t){l&&!s&&l.exit(),u(t)}};i.length>o;)s(i[o++]);t._c=[],t._n=!1,e&&!t._h&&Dn(t)}))}},Dn=function(t){xn.call(r,(function(){var e,i,n,o=t._v,s=Fn(t);if(s&&(e=yn((function(){Mn?Sn.emit("unhandledRejection",o,t):(i=r.onunhandledrejection)?i({promise:t,reason:o}):(n=r.console)&&n.error&&n.error("Unhandled promise rejection",o)})),t._h=Mn||Fn(t)?2:1),t._a=void 0,s&&e.e)throw e.v}))},Fn=function(t){return 1!==t._h&&0===(t._a||t._c).length},Nn=function(t){xn.call(r,(function(){var e;Mn?Sn.emit("rejectionHandled",t):(e=r.onrejectionhandled)&&e({promise:t,reason:t._v})}))},Un=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Ln(e,!0))},Bn=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw Tn("Promise can't be resolved itself");(e=Rn(t))?En((function(){var n={_w:i,_d:!1};try{e.call(t,C(Bn,n,1),C(Un,n,1))}catch(t){Un.call(n,t)}})):(i._v=t,i._s=1,Ln(i,!1))}catch(t){Un.call({_w:i,_d:!1},t)}}};kn||(Cn=function(t){se(this,Cn,"Promise","_h"),P(t),dn.call(this);try{t(C(Bn,this,1),C(Un,this,1))}catch(t){Un.call(this,t)}},(dn=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=oe(Cn.prototype,{then:function(t,e){var i=In(qi(this,Cn));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=Mn?Sn.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&Ln(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),gn=function(){var t=new dn;this.promise=t,this.resolve=C(Bn,t,1),this.reject=C(Un,t,1)},mn.f=In=function(t){return t===Cn||t===vn?new gn(t):pn(t)}),O(O.G+O.W+O.F*!kn,{Promise:Cn}),jt(Cn,"Promise"),Jt("Promise"),vn=o.Promise,O(O.S+O.F*!kn,"Promise",{reject:function(t){var e=In(this);return(0,e.reject)(t),e.promise}}),O(O.S+O.F*!kn,"Promise",{resolve:function(t){return wn(this,t)}}),O(O.S+O.F*!(kn&&bt((function(t){Cn.all(t).catch(On)}))),"Promise",{all:function(t){var e=this,i=In(e),n=i.resolve,r=i.reject,o=yn((function(){var i=[],o=0,s=1;ae(t,!1,(function(t){var a=o++,h=!1;i.push(void 0),s++,e.resolve(t).then((function(t){h||(h=!0,i[a]=t,--s||n(i))}),r)})),--s||n(i)}));return o.e&&r(o.v),i.promise},race:function(t){var e=this,i=In(e),n=i.reject,r=yn((function(){ae(t,!1,(function(t){e.resolve(t).then(i.resolve,n)}))}));return r.e&&n(r.v),i.promise}}),O(O.P+O.R,"Promise",{finally:function(t){var e=qi(this,o.Promise||r.Promise),i="function"==typeof t;return this.then(i?function(i){return wn(e,t()).then((function(){return i}))}:t,i?function(i){return wn(e,t()).then((function(){throw i}))}:t)}});var jn=(r.Reflect||{}).apply,Xn=Function.apply;O(O.S+O.F*!h((function(){jn((function(){}))})),"Reflect",{apply:function(t,e,i){var n=P(t),r=a(i);return jn?jn(n,e,r):Xn.call(n,e,r)}});var Vn=[].slice,zn={},Yn=function(t,e,i){if(!(e in zn)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";zn[e]=Function("F,a","return new F("+n.join(",")+")")}return zn[e](t,i)},Wn=Function.bind||function(t){var e=P(this),i=Vn.call(arguments,1),n=function(){var r=i.concat(Vn.call(arguments));return this instanceof n?Yn(e,r.length,r):Zi(e,r,t)};return s(e.prototype)&&(n.prototype=e.prototype),n},Gn=(r.Reflect||{}).construct,Hn=h((function(){function t(){}return!(Gn((function(){}),[],t)instanceof t)})),qn=!h((function(){Gn((function(){}))}));O(O.S+O.F*(Hn||qn),"Reflect",{construct:function(t,e){P(t),a(e);var i=arguments.length<3?t:P(arguments[2]);if(qn&&!Hn)return Gn(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(Wn.apply(t,n))}var r=i.prototype,o=Nt(s(r)?r:Object.prototype),h=Function.apply.call(t,o,e);return s(h)?h:o}}),O(O.S+O.F*h((function(){Reflect.defineProperty(v.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,e,i){a(t),e=p(e,!0),a(i);try{return v.f(t,e,i),!0}catch(t){return!1}}});var Zn=me.f;O(O.S,"Reflect",{deleteProperty:function(t,e){var i=Zn(a(t),e);return!(i&&!i.configurable)&&delete t[e]}}),O(O.S,"Reflect",{get:function t(e,i){var n,r,o=arguments.length<3?e:arguments[2];return a(e)===o?e[i]:(n=me.f(e,i))?_(n,"value")?n.value:void 0!==n.get?n.get.call(o):void 0:s(r=Yt(e))?t(r,i,o):void 0}}),O(O.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return me.f(a(t),e)}}),O(O.S,"Reflect",{getPrototypeOf:function(t){return Yt(a(t))}}),O(O.S,"Reflect",{has:function(t,e){return e in t}});var Kn=Object.isExtensible;O(O.S,"Reflect",{isExtensible:function(t){return a(t),!Kn||Kn(t)}}),O(O.S,"Reflect",{ownKeys:ki});var Jn=Object.preventExtensions;O(O.S,"Reflect",{preventExtensions:function(t){a(t);try{return Jn&&Jn(t),!0}catch(t){return!1}}}),O(O.S,"Reflect",{set:function t(e,i,n){var r,o,h=arguments.length<4?e:arguments[3],u=me.f(a(e),i);if(!u){if(s(o=Yt(e)))return t(o,i,n,h);u=m(0)}if(_(u,"value")){if(!1===u.writable||!s(h))return!1;if(r=me.f(h,i)){if(r.get||r.set||!1===r.writable)return!1;r.value=n,v.f(h,i,r)}else v.f(h,i,m(0,n));return!0}return void 0!==u.set&&(u.set.call(h,n),!0)}}),be&&O(O.S,"Reflect",{setPrototypeOf:function(t,e){be.check(t,e);try{return be.set(t,e),!0}catch(t){return!1}}});var Qn=V("match"),$n=function(t){var e;return s(t)&&(void 0!==(e=t[Qn])?!!e:"RegExp"==q(t))},tr=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},er=v.f,ir=ze.f,nr=r.RegExp,rr=nr,or=nr.prototype,sr=/a/g,ar=/a/g,hr=new nr(sr)!==sr;if(u&&(!hr||h((function(){return ar[V("match")]=!1,nr(sr)!=sr||nr(ar)==ar||"/a/i"!=nr(sr,"i")})))){nr=function(t,e){var i=this instanceof nr,n=$n(t),r=void 0===e;return!i&&n&&t.constructor===nr&&r?t:we(hr?new rr(n&&!r?t.source:t,e):rr((n=t instanceof nr)?t.source:t,n&&r?tr.call(t):e),i?this:or,nr)};for(var ur=function(t){t in nr||er(nr,t,{configurable:!0,get:function(){return rr[t]},set:function(e){rr[t]=e}})},lr=ir(rr),cr=0;lr.length>cr;)ur(lr[cr++]);or.constructor=nr,nr.prototype=or,A(r,"RegExp",nr)}Jt("RegExp"),u&&"g"!=/./g.flags&&v.f(RegExp.prototype,"flags",{configurable:!0,get:tr});var fr,dr,pr=function(t){return function(e,i){var n,r,o=String(I(e)),s=D(i),a=o.length;return s<0||s>=a?t?"":void 0:(n=o.charCodeAt(s))<55296||n>56319||s+1===a||(r=o.charCodeAt(s+1))<56320||r>57343?t?o.charAt(s):n:t?o.slice(s,s+2):r-56320+(n-55296<<10)+65536}},gr=pr(!0),vr=function(t,e,i){return e+(i?gr(t,e).length:1)},mr=RegExp.prototype.exec,yr=function(t,e){var i=t.exec;if("function"==typeof i){var n=i.call(t,e);if("object"!=typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==pt(t))throw new TypeError("RegExp#exec called on incompatible receiver");return mr.call(t,e)},br=RegExp.prototype.exec,_r=String.prototype.replace,wr=br,xr=(fr=/a/,dr=/b*/g,br.call(fr,"a"),br.call(dr,"a"),0!==fr.lastIndex||0!==dr.lastIndex),Er=void 0!==/()??/.exec("")[1];(xr||Er)&&(wr=function(t){var e,i,n,r,o=this;return Er&&(i=new RegExp("^"+o.source+"$(?!\\s)",tr.call(o))),xr&&(e=o.lastIndex),n=br.call(o,t),xr&&n&&(o.lastIndex=o.global?n.index+n[0].length:e),Er&&n&&n.length>1&&_r.call(n[0],i,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)})),n});var Tr=wr;O({target:"RegExp",proto:!0,forced:Tr!==/./.exec},{exec:Tr});var Sr=V("species"),Ar=!h((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),Pr=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2===i.length&&"a"===i[0]&&"b"===i[1]}(),Cr=function(t,e,i){var n=V(t),r=!h((function(){var e={};return e[n]=function(){return 7},7!=""[t](e)})),o=r?!h((function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[Sr]=function(){return i}),i[n](""),!e})):void 0;if(!r||!o||"replace"===t&&!Ar||"split"===t&&!Pr){var s=/./[n],a=i(I,n,""[t],(function(t,e,i,n,o){return e.exec===Tr?r&&!o?{done:!0,value:s.call(e,i,n)}:{done:!0,value:t.call(i,e,n)}:{done:!1}})),u=a[0],l=a[1];A(String.prototype,t,u),y(RegExp.prototype,n,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)})}};Cr("match",1,(function(t,e,i,n){return[function(i){var n=t(this),r=null==i?void 0:i[e];return void 0!==r?r.call(i,n):new RegExp(i)[e](String(n))},function(t){var e=n(i,t,this);if(e.done)return e.value;var r=a(t),o=String(this);if(!r.global)return yr(r,o);var s=r.unicode;r.lastIndex=0;for(var h,u=[],l=0;null!==(h=yr(r,o));){var c=String(h[0]);u[l]=c,""===c&&(r.lastIndex=vr(o,j(r.lastIndex),s)),l++}return 0===l?null:u}]}));var Mr=Math.max,Or=Math.min,Ir=Math.floor,kr=/\$([$&`']|\d\d?|<[^>]*>)/g,Rr=/\$([$&`']|\d\d?)/g,Lr=function(t){return void 0===t?t:String(t)};Cr("replace",2,(function(t,e,i,n){return[function(n,r){var o=t(this),s=null==n?void 0:n[e];return void 0!==s?s.call(n,o,r):i.call(String(o),n,r)},function(t,e){var o=n(i,t,this,e);if(o.done)return o.value;var s=a(t),h=String(this),u="function"==typeof e;u||(e=String(e));var l=s.global;if(l){var c=s.unicode;s.lastIndex=0}for(var f=[];;){var d=yr(s,h);if(null===d)break;if(f.push(d),!l)break;""===String(d[0])&&(s.lastIndex=vr(h,j(s.lastIndex),c))}for(var p="",g=0,v=0;v<f.length;v++){d=f[v];for(var m=String(d[0]),y=Mr(Or(D(d.index),h.length),0),b=[],_=1;_<d.length;_++)b.push(Lr(d[_]));var w=d.groups;if(u){var x=[m].concat(b,y,h);void 0!==w&&x.push(w);var E=String(e.apply(void 0,x))}else E=r(m,h,y,b,w,e);y>=g&&(p+=h.slice(g,y)+E,g=y+m.length)}return p+h.slice(g)}];function r(t,e,n,r,o,s){var a=n+t.length,h=r.length,u=Rr;return void 0!==o&&(o=k(o),u=kr),i.call(s,u,(function(i,s){var u;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(a);case"<":u=o[s.slice(1,-1)];break;default:var l=+s;if(0===l)return i;if(l>h){var c=Ir(l/10);return 0===c?i:c<=h?void 0===r[c-1]?s.charAt(1):r[c-1]+s.charAt(1):i}u=r[l-1]}return void 0===u?"":u}))}}));var Dr=Math.min,Fr=[].push,Nr=!h((function(){}));Cr("split",2,(function(t,e,i,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!$n(t))return i.call(n,t,e);for(var r,o,s,a=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,l=void 0===e?4294967295:e>>>0,c=new RegExp(t.source,h+"g");(r=Tr.call(c,n))&&!((o=c.lastIndex)>u&&(a.push(n.slice(u,r.index)),r.length>1&&r.index<n.length&&Fr.apply(a,r.slice(1)),s=r[0].length,u=o,a.length>=l));)c.lastIndex===r.index&&c.lastIndex++;return u===n.length?!s&&c.test("")||a.push(""):a.push(n.slice(u)),a.length>l?a.slice(0,l):a}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,n){var o=t(this),s=null==i?void 0:i[e];return void 0!==s?s.call(i,o,n):r.call(String(o),i,n)},function(t,e){var o=n(r,t,this,e,r!==i);if(o.done)return o.value;var s=a(t),h=String(this),u=qi(s,RegExp),l=s.unicode,c=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(Nr?"y":"g"),f=new u(Nr?s:"^(?:"+s.source+")",c),d=void 0===e?4294967295:e>>>0;if(0===d)return[];if(0===h.length)return null===yr(f,h)?[h]:[];for(var p=0,g=0,v=[];g<h.length;){f.lastIndex=Nr?g:0;var m,y=yr(f,Nr?h:h.slice(g));if(null===y||(m=Dr(j(f.lastIndex+(Nr?0:g)),h.length))===p)g=vr(h,g,l);else{if(v.push(h.slice(p,g)),v.length===d)return v;for(var b=1;b<=y.length-1;b++)if(v.push(y[b]),v.length===d)return v;g=p=m}}return v.push(h.slice(p)),v}]})),Cr("search",1,(function(t,e,i,n){return[function(i){var n=t(this),r=null==i?void 0:i[e];return void 0!==r?r.call(i,n):new RegExp(i)[e](String(n))},function(t){var e=n(i,t,this);if(e.done)return e.value;var r=a(t),o=String(this),s=r.lastIndex;Xi(s,0)||(r.lastIndex=0);var h=yr(r,o);return Xi(r.lastIndex,s)||(r.lastIndex=s),null===h?-1:h.index}]}));var Ur=/./.toString,Br=function(t){A(RegExp.prototype,"toString",t,!0)};h((function(){return"/a/b"!=Ur.call({source:"a",flags:"b"})}))?Br((function(){var t=a(this);return"/".concat(t.source,"/","flags"in t?t.flags:!u&&t instanceof RegExp?tr.call(t):void 0)})):"toString"!=Ur.name&&Br((function(){return Ur.call(this)}));xe("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return pe.def(ue(this,"Set"),t=0===t?0:t,t)}},pe);var jr={f:V},Xr=v.f,Vr=function(t){var e=o.Symbol||(o.Symbol=r.Symbol||{});"_"==t.charAt(0)||t in e||Xr(e,t,{value:jr.f(t)})},zr=he.KEY,Yr=me.f,Wr=v.f,Gr=Fi.f,Hr=r.Symbol,qr=r.JSON,Zr=qr&&qr.stringify,Kr=V("_hidden"),Jr=V("toPrimitive"),Qr={}.propertyIsEnumerable,$r=T("symbol-registry"),to=T("symbols"),eo=T("op-symbols"),io=Object.prototype,no="function"==typeof Hr&&!!wi.f,ro=r.QObject,oo=!ro||!ro.prototype||!ro.prototype.findChild,so=u&&h((function(){return 7!=Nt(Wr({},"a",{get:function(){return Wr(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=Yr(io,e);n&&delete io[e],Wr(t,e,i),n&&t!==io&&Wr(io,e,n)}:Wr,ao=function(t){var e=to[t]=Nt(Hr.prototype);return e._k=t,e},ho=no&&"symbol"==typeof Hr.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Hr},uo=function(t,e,i){return t===io&&uo(eo,e,i),a(t),e=p(e,!0),a(i),_(to,e)?(i.enumerable?(_(t,Kr)&&t[Kr][e]&&(t[Kr][e]=!1),i=Nt(i,{enumerable:m(0,!1)})):(_(t,Kr)||Wr(t,Kr,m(1,{})),t[Kr][e]=!0),so(t,e,i)):Wr(t,e,i)},lo=function(t,e){a(t);for(var i,n=function(t){var e=Ot(t),i=wi.f;if(i)for(var n,r=i(t),o=ge.f,s=0;r.length>s;)o.call(t,n=r[s++])&&e.push(n);return e}(e=_t(e)),r=0,o=n.length;o>r;)uo(t,i=n[r++],e[i]);return t},co=function(t){var e=Qr.call(this,t=p(t,!0));return!(this===io&&_(to,t)&&!_(eo,t))&&(!(e||!_(this,t)||!_(to,t)||_(this,Kr)&&this[Kr][t])||e)},fo=function(t,e){if(t=_t(t),e=p(e,!0),t!==io||!_(to,e)||_(eo,e)){var i=Yr(t,e);return!i||!_(to,e)||_(t,Kr)&&t[Kr][e]||(i.enumerable=!0),i}},po=function(t){for(var e,i=Gr(_t(t)),n=[],r=0;i.length>r;)_(to,e=i[r++])||e==Kr||e==zr||n.push(e);return n},go=function(t){for(var e,i=t===io,n=Gr(i?eo:_t(t)),r=[],o=0;n.length>o;)!_(to,e=n[o++])||i&&!_(io,e)||r.push(to[e]);return r};no||(A((Hr=function(){if(this instanceof Hr)throw TypeError("Symbol is not a constructor!");var t=E(arguments.length>0?arguments[0]:void 0),e=function(i){this===io&&e.call(eo,i),_(this,Kr)&&_(this[Kr],t)&&(this[Kr][t]=!1),so(this,t,m(1,i))};return u&&oo&&so(io,t,{configurable:!0,set:e}),ao(t)}).prototype,"toString",(function(){return this._k})),me.f=fo,v.f=uo,ze.f=Fi.f=po,ge.f=co,wi.f=go,u&&A(io,"propertyIsEnumerable",co,!0),jr.f=function(t){return ao(V(t))}),O(O.G+O.W+O.F*!no,{Symbol:Hr});for(var vo="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),mo=0;vo.length>mo;)V(vo[mo++]);for(var yo=Ot(V.store),bo=0;yo.length>bo;)Vr(yo[bo++]);O(O.S+O.F*!no,"Symbol",{for:function(t){return _($r,t+="")?$r[t]:$r[t]=Hr(t)},keyFor:function(t){if(!ho(t))throw TypeError(t+" is not a symbol!");for(var e in $r)if($r[e]===t)return e},useSetter:function(){oo=!0},useSimple:function(){oo=!1}}),O(O.S+O.F*!no,"Object",{create:function(t,e){return void 0===e?Nt(t):lo(Nt(t),e)},defineProperty:uo,defineProperties:lo,getOwnPropertyDescriptor:fo,getOwnPropertyNames:po,getOwnPropertySymbols:go});var _o=h((function(){wi.f(1)}));O(O.S+O.F*_o,"Object",{getOwnPropertySymbols:function(t){return wi.f(k(t))}}),qr&&O(O.S+O.F*(!no||h((function(){var t=Hr();return"[null]"!=Zr([t])||"{}"!=Zr({a:t})||"{}"!=Zr(Object(t))}))),"JSON",{stringify:function(t){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=e=n[1],(s(e)||void 0!==t)&&!ho(t))return K(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!ho(e))return e}),n[1]=e,Zr.apply(qr,n)}}),Hr.prototype[Jr]||y(Hr.prototype,Jr,Hr.prototype.valueOf),jt(Hr,"Symbol"),jt(Math,"Math",!0),jt(r.JSON,"JSON",!0),Vr("asyncIterator");var wo=/"/g,xo=function(t,e,i,n){var r=String(I(t)),o="<"+e;return""!==i&&(o+=" "+i+'="'+String(n).replace(wo,"&quot;")+'"'),o+">"+r+"</"+e+">"},Eo=function(t,e){var i={};i[t]=e(xo),O(O.P+O.F*h((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",i)};Eo("anchor",(function(t){return function(e){return t(this,"a","name",e)}})),Eo("big",(function(t){return function(){return t(this,"big","","")}})),Eo("blink",(function(t){return function(){return t(this,"blink","","")}})),Eo("bold",(function(t){return function(){return t(this,"b","","")}}));var To=pr(!1);O(O.P,"String",{codePointAt:function(t){return To(this,t)}});var So=function(t,e,i){if($n(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(I(t))},Ao=V("match"),Po=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[Ao]=!1,!"/./"[t](e)}catch(t){}}return!0},Co="".endsWith;O(O.P+O.F*Po("endsWith"),"String",{endsWith:function(t){var e=So(this,t,"endsWith"),i=arguments.length>1?arguments[1]:void 0,n=j(e.length),r=void 0===i?n:Math.min(j(i),n),o=String(t);return Co?Co.call(e,o,r):e.slice(r-o.length,r)===o}}),Eo("fixed",(function(t){return function(){return t(this,"tt","","")}})),Eo("fontcolor",(function(t){return function(e){return t(this,"font","color",e)}})),Eo("fontsize",(function(t){return function(e){return t(this,"font","size",e)}}));var Mo=String.fromCharCode,Oo=String.fromCodePoint;O(O.S+O.F*(!!Oo&&1!=Oo.length),"String",{fromCodePoint:function(t){for(var e,i=[],n=arguments.length,r=0;n>r;){if(e=+arguments[r++],U(e,1114111)!==e)throw RangeError(e+" is not a valid code point");i.push(e<65536?Mo(e):Mo(55296+((e-=65536)>>10),e%1024+56320))}return i.join("")}});O(O.P+O.F*Po("includes"),"String",{includes:function(t){return!!~So(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}}),Eo("italics",(function(t){return function(){return t(this,"i","","")}}));var Io=pr(!0);qt(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=Io(e,i),this._i+=t.length,{value:t,done:!1})})),Eo("link",(function(t){return function(e){return t(this,"a","href",e)}}));var ko=function(t){var e=String(I(this)),i="",n=D(t);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(i+=e);return i},Ro=function(t,e,i,n){var r=String(I(t)),o=r.length,s=void 0===i?" ":String(i),a=j(e);if(a<=o||""==s)return r;var h=a-o,u=ko.call(s,Math.ceil(h/s.length));return u.length>h&&(u=u.slice(0,h)),n?u+r:r+u},Lo=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(_n);O(O.P+O.F*Lo,"String",{padStart:function(t){return Ro(this,t,arguments.length>1?arguments[1]:void 0,!0)}});var Do=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(_n);O(O.P+O.F*Do,"String",{padEnd:function(t){return Ro(this,t,arguments.length>1?arguments[1]:void 0,!1)}}),O(O.S,"String",{raw:function(t){for(var e=_t(t.raw),i=j(e.length),n=arguments.length,r=[],o=0;i>o;)r.push(String(e[o++])),o<n&&r.push(String(arguments[o]));return r.join("")}}),O(O.P,"String",{repeat:ko}),Eo("small",(function(t){return function(){return t(this,"small","","")}}));var Fo="".startsWith;O(O.P+O.F*Po("startsWith"),"String",{startsWith:function(t){var e=So(this,t,"startsWith"),i=j(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return Fo?Fo.call(e,n,i):e.slice(i,i+n.length)===n}}),Eo("strike",(function(t){return function(){return t(this,"strike","","")}})),Eo("sub",(function(t){return function(){return t(this,"sub","","")}})),Eo("sup",(function(t){return function(){return t(this,"sup","","")}})),Ke("trimLeft",(function(t){return function(){return t(this,1)}}),"trimStart"),Ke("trimRight",(function(t){return function(){return t(this,2)}}),"trimEnd");for(var No,Uo=E("typed_array"),Bo=E("view"),jo=!(!r.ArrayBuffer||!r.DataView),Xo=jo,Vo=0,zo="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");Vo<9;)(No=r[zo[Vo++]])?(y(No.prototype,Uo,!0),y(No.prototype,Bo,!0)):Xo=!1;var Yo={ABV:jo,CONSTR:Xo,TYPED:Uo,VIEW:Bo},Wo=function(t){if(void 0===t)return 0;var e=D(t),i=j(e);if(e!==i)throw RangeError("Wrong length!");return i},Go=n((function(t,e){var i=ze.f,n=v.f,o="prototype",s="Wrong index!",a=r.ArrayBuffer,l=r.DataView,c=r.Math,f=r.RangeError,d=r.Infinity,p=a,g=c.abs,m=c.pow,b=c.floor,_=c.log,w=c.LN2,x=u?"_b":"buffer",E=u?"_l":"byteLength",T=u?"_o":"byteOffset";function S(t,e,i){var n,r,o,s=new Array(i),a=8*i-e-1,h=(1<<a)-1,u=h>>1,l=23===e?m(2,-24)-m(2,-77):0,c=0,f=t<0||0===t&&1/t<0?1:0;for((t=g(t))!=t||t===d?(r=t!=t?1:0,n=h):(n=b(_(t)/w),t*(o=m(2,-n))<1&&(n--,o*=2),(t+=n+u>=1?l/o:l*m(2,1-u))*o>=2&&(n++,o/=2),n+u>=h?(r=0,n=h):n+u>=1?(r=(t*o-1)*m(2,e),n+=u):(r=t*m(2,u-1)*m(2,e),n=0));e>=8;s[c++]=255&r,r/=256,e-=8);for(n=n<<e|r,a+=e;a>0;s[c++]=255&n,n/=256,a-=8);return s[--c]|=128*f,s}function A(t,e,i){var n,r=8*i-e-1,o=(1<<r)-1,s=o>>1,a=r-7,h=i-1,u=t[h--],l=127&u;for(u>>=7;a>0;l=256*l+t[h],h--,a-=8);for(n=l&(1<<-a)-1,l>>=-a,a+=e;a>0;n=256*n+t[h],h--,a-=8);if(0===l)l=1-s;else{if(l===o)return n?NaN:u?-d:d;n+=m(2,e),l-=s}return(u?-1:1)*n*m(2,l-e)}function P(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function C(t){return[255&t]}function M(t){return[255&t,t>>8&255]}function O(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function I(t){return S(t,52,8)}function k(t){return S(t,23,4)}function R(t,e,i){n(t[o],e,{get:function(){return this[i]}})}function L(t,e,i,n){var r=Wo(+i);if(r+e>t[E])throw f(s);var o=t[x]._b,a=r+t[T],h=o.slice(a,a+e);return n?h:h.reverse()}function F(t,e,i,n,r,o){var a=Wo(+i);if(a+e>t[E])throw f(s);for(var h=t[x]._b,u=a+t[T],l=n(+r),c=0;c<e;c++)h[u+c]=l[o?c:e-c-1]}if(Yo.ABV){if(!h((function(){a(1)}))||!h((function(){new a(-1)}))||h((function(){return new a,new a(1.5),new a(NaN),"ArrayBuffer"!=a.name}))){for(var N,U=(a=function(t){return se(this,a),new p(Wo(t))})[o]=p[o],B=i(p),X=0;B.length>X;)(N=B[X++])in a||y(a,N,p[N]);U.constructor=a}var V=new l(new a(2)),z=l[o].setInt8;V.setInt8(0,2147483648),V.setInt8(1,2147483649),!V.getInt8(0)&&V.getInt8(1)||oe(l[o],{setInt8:function(t,e){z.call(this,t,e<<24>>24)},setUint8:function(t,e){z.call(this,t,e<<24>>24)}},!0)}else a=function(t){se(this,a,"ArrayBuffer");var e=Wo(t);this._b=G.call(new Array(e),0),this[E]=e},l=function(t,e,i){se(this,l,"DataView"),se(t,a,"DataView");var n=t[E],r=D(e);if(r<0||r>n)throw f("Wrong offset!");if(r+(i=void 0===i?n-r:j(i))>n)throw f("Wrong length!");this[x]=t,this[T]=r,this[E]=i},u&&(R(a,"byteLength","_l"),R(l,"buffer","_b"),R(l,"byteLength","_l"),R(l,"byteOffset","_o")),oe(l[o],{getInt8:function(t){return L(this,1,t)[0]<<24>>24},getUint8:function(t){return L(this,1,t)[0]},getInt16:function(t){var e=L(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=L(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return P(L(this,4,t,arguments[1]))},getUint32:function(t){return P(L(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return A(L(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return A(L(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){F(this,1,t,C,e)},setUint8:function(t,e){F(this,1,t,C,e)},setInt16:function(t,e){F(this,2,t,M,e,arguments[2])},setUint16:function(t,e){F(this,2,t,M,e,arguments[2])},setInt32:function(t,e){F(this,4,t,O,e,arguments[2])},setUint32:function(t,e){F(this,4,t,O,e,arguments[2])},setFloat32:function(t,e){F(this,4,t,k,e,arguments[2])},setFloat64:function(t,e){F(this,8,t,I,e,arguments[2])}});jt(a,"ArrayBuffer"),jt(l,"DataView"),y(l[o],Yo.VIEW,!0),e.ArrayBuffer=a,e.DataView=l})),Ho=r.ArrayBuffer,qo=Go.ArrayBuffer,Zo=Go.DataView,Ko=Yo.ABV&&Ho.isView,Jo=qo.prototype.slice,Qo=Yo.VIEW;O(O.G+O.W+O.F*(Ho!==qo),{ArrayBuffer:qo}),O(O.S+O.F*!Yo.CONSTR,"ArrayBuffer",{isView:function(t){return Ko&&Ko(t)||s(t)&&Qo in t}}),O(O.P+O.U+O.F*h((function(){return!new qo(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(t,e){if(void 0!==Jo&&void 0===e)return Jo.call(a(this),t);for(var i=a(this).byteLength,n=U(t,i),r=U(void 0===e?i:e,i),o=new(qi(this,qo))(j(r-n)),s=new Zo(this),h=new Zo(o),u=0;n<r;)h.setUint8(u++,s.getUint8(n++));return o}}),Jt("ArrayBuffer");var $o=n((function(t){if(u){var e=r,i=h,n=O,o=Yo,a=Go,l=C,c=se,f=m,d=y,g=oe,b=D,w=j,x=Wo,T=U,S=p,A=_,P=pt,M=s,I=k,R=lt,L=Nt,F=Yt,N=ze.f,B=vt,z=E,Y=V,W=$,H=wt,q=qi,Z=Zt,K=at,J=bt,Q=Jt,tt=G,et=X,it=v,nt=me,rt=it.f,ot=nt.f,st=e.RangeError,ht=e.TypeError,ut=e.Uint8Array,ct=Array.prototype,ft=a.ArrayBuffer,dt=a.DataView,gt=W(0),mt=W(2),yt=W(3),_t=W(4),xt=W(5),Et=W(6),Tt=H(!0),St=H(!1),At=Z.values,Pt=Z.keys,Ct=Z.entries,Mt=ct.lastIndexOf,Ot=ct.reduce,It=ct.reduceRight,kt=ct.join,Rt=ct.sort,Lt=ct.slice,Dt=ct.toString,Ft=ct.toLocaleString,Ut=Y("iterator"),Bt=Y("toStringTag"),jt=z("typed_constructor"),Xt=z("def_constructor"),Vt=o.CONSTR,zt=o.TYPED,Wt=o.VIEW,Gt=W(1,(function(t,e){return $t(q(t,t[Xt]),e)})),Ht=i((function(){return 1===new ut(new Uint16Array([1]).buffer)[0]})),qt=!!ut&&!!ut.prototype.set&&i((function(){new ut(1).set({})})),Kt=function(t,e){var i=b(t);if(i<0||i%e)throw st("Wrong offset!");return i},Qt=function(t){if(M(t)&&zt in t)return t;throw ht(t+" is not a typed array!")},$t=function(t,e){if(!(M(t)&&jt in t))throw ht("It is not a typed array constructor!");return new t(e)},te=function(t,e){return ee(q(t,t[Xt]),e)},ee=function(t,e){for(var i=0,n=e.length,r=$t(t,n);n>i;)r[i]=e[i++];return r},ie=function(t,e,i){rt(t,e,{get:function(){return this._d[i]}})},ne=function(t){var e,i,n,r,o,s,a=I(t),h=arguments.length,u=h>1?arguments[1]:void 0,c=void 0!==u,f=B(a);if(null!=f&&!R(f)){for(s=f.call(a),n=[],e=0;!(o=s.next()).done;e++)n.push(o.value);a=n}for(c&&h>2&&(u=l(u,arguments[2],2)),e=0,i=w(a.length),r=$t(this,i);i>e;e++)r[e]=c?u(a[e],e):a[e];return r},re=function(){for(var t=0,e=arguments.length,i=$t(this,e);e>t;)i[t]=arguments[t++];return i},ae=!!ut&&i((function(){Ft.call(new ut(1))})),he=function(){return Ft.apply(ae?Lt.call(Qt(this)):Qt(this),arguments)},ue={copyWithin:function(t,e){return et.call(Qt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return _t(Qt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return tt.apply(Qt(this),arguments)},filter:function(t){return te(this,mt(Qt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return xt(Qt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return Et(Qt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){gt(Qt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return St(Qt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return Tt(Qt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return kt.apply(Qt(this),arguments)},lastIndexOf:function(t){return Mt.apply(Qt(this),arguments)},map:function(t){return Gt(Qt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return Ot.apply(Qt(this),arguments)},reduceRight:function(t){return It.apply(Qt(this),arguments)},reverse:function(){for(var t,e=Qt(this).length,i=Math.floor(e/2),n=0;n<i;)t=this[n],this[n++]=this[--e],this[e]=t;return this},some:function(t){return yt(Qt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return Rt.call(Qt(this),t)},subarray:function(t,e){var i=Qt(this),n=i.length,r=T(t,n);return new(q(i,i[Xt]))(i.buffer,i.byteOffset+r*i.BYTES_PER_ELEMENT,w((void 0===e?n:T(e,n))-r))}},le=function(t,e){return te(this,Lt.call(Qt(this),t,e))},ce=function(t){Qt(this);var e=Kt(arguments[1],1),i=this.length,n=I(t),r=w(n.length),o=0;if(r+e>i)throw st("Wrong length!");for(;o<r;)this[e+o]=n[o++]},fe={entries:function(){return Ct.call(Qt(this))},keys:function(){return Pt.call(Qt(this))},values:function(){return At.call(Qt(this))}},de=function(t,e){return M(t)&&t[zt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},pe=function(t,e){return de(t,e=S(e,!0))?f(2,t[e]):ot(t,e)},ge=function(t,e,i){return!(de(t,e=S(e,!0))&&M(i)&&A(i,"value"))||A(i,"get")||A(i,"set")||i.configurable||A(i,"writable")&&!i.writable||A(i,"enumerable")&&!i.enumerable?rt(t,e,i):(t[e]=i.value,t)};Vt||(nt.f=pe,it.f=ge),n(n.S+n.F*!Vt,"Object",{getOwnPropertyDescriptor:pe,defineProperty:ge}),i((function(){Dt.call({})}))&&(Dt=Ft=function(){return kt.call(this)});var ve=g({},ue);g(ve,fe),d(ve,Ut,fe.values),g(ve,{slice:le,set:ce,constructor:function(){},toString:Dt,toLocaleString:he}),ie(ve,"buffer","b"),ie(ve,"byteOffset","o"),ie(ve,"byteLength","l"),ie(ve,"length","e"),rt(ve,Bt,{get:function(){return this[zt]}}),t.exports=function(t,r,s,a){var h=t+((a=!!a)?"Clamped":"")+"Array",u="get"+t,l="set"+t,f=e[h],p=f||{},g=f&&F(f),v=!f||!o.ABV,m={},y=f&&f.prototype,b=function(t,e){rt(t,e,{get:function(){return function(t,e){var i=t._d;return i.v[u](e*r+i.o,Ht)}(this,e)},set:function(t){return function(t,e,i){var n=t._d;a&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),n.v[l](e*r+n.o,i,Ht)}(this,e,t)},enumerable:!0})};v?(f=s((function(t,e,i,n){c(t,f,h,"_d");var o,s,a,u,l=0,p=0;if(M(e)){if(!(e instanceof ft||"ArrayBuffer"==(u=P(e))||"SharedArrayBuffer"==u))return zt in e?ee(f,e):ne.call(f,e);o=e,p=Kt(i,r);var g=e.byteLength;if(void 0===n){if(g%r)throw st("Wrong length!");if((s=g-p)<0)throw st("Wrong length!")}else if((s=w(n)*r)+p>g)throw st("Wrong length!");a=s/r}else a=x(e),o=new ft(s=a*r);for(d(t,"_d",{b:o,o:p,l:s,e:a,v:new dt(o)});l<a;)b(t,l++)})),y=f.prototype=L(ve),d(y,"constructor",f)):i((function(){f(1)}))&&i((function(){new f(-1)}))&&J((function(t){new f,new f(null),new f(1.5),new f(t)}),!0)||(f=s((function(t,e,i,n){var o;return c(t,f,h),M(e)?e instanceof ft||"ArrayBuffer"==(o=P(e))||"SharedArrayBuffer"==o?void 0!==n?new p(e,Kt(i,r),n):void 0!==i?new p(e,Kt(i,r)):new p(e):zt in e?ee(f,e):ne.call(f,e):new p(x(e))})),gt(g!==Function.prototype?N(p).concat(N(g)):N(p),(function(t){t in f||d(f,t,p[t])})),f.prototype=y,y.constructor=f);var _=y[Ut],E=!!_&&("values"==_.name||null==_.name),T=fe.values;d(f,jt,!0),d(y,zt,h),d(y,Wt,!0),d(y,Xt,f),(a?new f(1)[Bt]==h:Bt in y)||rt(y,Bt,{get:function(){return h}}),m[h]=f,n(n.G+n.W+n.F*(f!=p),m),n(n.S,h,{BYTES_PER_ELEMENT:r}),n(n.S+n.F*i((function(){p.of.call(f,1)})),h,{from:ne,of:re}),"BYTES_PER_ELEMENT"in y||d(y,"BYTES_PER_ELEMENT",r),n(n.P,h,ue),Q(h),n(n.P+n.F*qt,h,{set:ce}),n(n.P+n.F*!E,h,fe),y.toString!=Dt&&(y.toString=Dt),n(n.P+n.F*i((function(){new f(1).slice()})),h,{slice:le}),n(n.P+n.F*(i((function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()}))||!i((function(){y.toLocaleString.call([1,2])}))),h,{toLocaleString:he}),K[h]=E?_:T,E||d(y,Ut,T)}}else t.exports=function(){}}));$o("Int8",1,(function(t){return function(e,i,n){return t(this,e,i,n)}})),$o("Uint8",1,(function(t){return function(e,i,n){return t(this,e,i,n)}})),$o("Uint8",1,(function(t){return function(e,i,n){return t(this,e,i,n)}}),!0),$o("Int16",2,(function(t){return function(e,i,n){return t(this,e,i,n)}})),$o("Uint16",2,(function(t){return function(e,i,n){return t(this,e,i,n)}})),$o("Int32",4,(function(t){return function(e,i,n){return t(this,e,i,n)}})),$o("Uint32",4,(function(t){return function(e,i,n){return t(this,e,i,n)}})),$o("Float32",4,(function(t){return function(e,i,n){return t(this,e,i,n)}})),$o("Float64",8,(function(t){return function(e,i,n){return t(this,e,i,n)}}));var ts=he.getWeak,es=$(5),is=$(6),ns=0,rs=function(t){return t._l||(t._l=new os)},os=function(){this.a=[]},ss=function(t,e){return es(t.a,(function(t){return t[0]===e}))};os.prototype={get:function(t){var e=ss(this,t);if(e)return e[1]},has:function(t){return!!ss(this,t)},set:function(t,e){var i=ss(this,t);i?i[1]=e:this.a.push([t,e])},delete:function(t){var e=is(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}};var as={getConstructor:function(t,e,i,n){var r=t((function(t,o){se(t,r,e,"_i"),t._t=e,t._i=ns++,t._l=void 0,null!=o&&ae(o,i,t[n],t)}));return oe(r.prototype,{delete:function(t){if(!s(t))return!1;var i=ts(t);return!0===i?rs(ue(this,e)).delete(t):i&&_(i,this._i)&&delete i[this._i]},has:function(t){if(!s(t))return!1;var i=ts(t);return!0===i?rs(ue(this,e)).has(t):i&&_(i,this._i)}}),r},def:function(t,e,i){var n=ts(a(e),!0);return!0===n?rs(t).set(e,i):n[t._i]=i,t},ufstore:rs};n((function(t){var e,i=$(0),n=ue,o=!r.ActiveXObject&&"ActiveXObject"in r,a=he.getWeak,h=Object.isExtensible,u=as.ufstore,l=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},c={get:function(t){if(s(t)){var e=a(t);return!0===e?u(ue(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return as.def(ue(this,"WeakMap"),t,e)}},f=t.exports=xe("WeakMap",l,c,as,!0,!0);n&&o&&(e=as.getConstructor(l,"WeakMap"),Ei(e.prototype,c),he.NEED=!0,i(["delete","has","get","set"],(function(t){var i=f.prototype,n=i[t];A(i,t,(function(i,r){if(s(i)&&!h(i)){this._f||(this._f=new e);var o=this._f[t](i,r);return"set"==t?this:o}return n.call(this,i,r)}))})))}));xe("WeakSet",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return as.def(ue(this,"WeakSet"),t,!0)}},as,!1,!0);var hs=[].slice,us=/MSIE .\./.test(_n),ls=function(t){return function(e,i){var n=arguments.length>2,r=!!n&&hs.call(arguments,2);return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,i)}};O(O.G+O.B+O.F*us,{setTimeout:ls(r.setTimeout),setInterval:ls(r.setInterval)}),O(O.G+O.B,{setImmediate:sn.set,clearImmediate:sn.clear});for(var cs=V("iterator"),fs=V("toStringTag"),ds=at.Array,ps={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},gs=Ot(ps),vs=0;vs<gs.length;vs++){var ms,ys=gs[vs],bs=ps[ys],_s=r[ys],ws=_s&&_s.prototype;if(ws&&(ws[cs]||y(ws,cs,ds),ws[fs]||y(ws,fs,ys),at[ys]=ds,bs))for(ms in Zt)ws[ms]||A(ws,ms,Zt[ms],!0)}n((function(t){var e=function(t){var e,i=Object.prototype,n=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function h(t,e,i,n){var r=e&&e.prototype instanceof g?e:g,o=Object.create(r.prototype),s=new P(n||[]);return o._invoke=function(t,e,i){var n=l;return function(r,o){if(n===f)throw new Error("Generator is already running");if(n===d){if("throw"===r)throw o;return M()}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var a=T(s,i);if(a){if(a===p)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===l)throw n=d,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=f;var h=u(t,e,i);if("normal"===h.type){if(n=i.done?d:c,h.arg===p)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(n=d,i.method="throw",i.arg=h.arg)}}}(t,i,s),o}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var l="suspendedStart",c="suspendedYield",f="executing",d="completed",p={};function g(){}function v(){}function m(){}var y={};y[o]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(C([])));_&&_!==i&&n.call(_,o)&&(y=_);var w=m.prototype=g.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function E(t){var e;this._invoke=function(i,r){function o(){return new Promise((function(e,o){!function e(i,r,o,s){var a=u(t[i],t,r);if("throw"!==a.type){var h=a.arg,l=h.value;return l&&"object"==typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,o,s)}),(function(t){e("throw",t,o,s)})):Promise.resolve(l).then((function(t){h.value=t,o(h)}),(function(t){return e("throw",t,o,s)}))}s(a.arg)}(i,r,e,o)}))}return e=e?e.then(o,o):o()}}function T(t,i){var n=t.iterator[i.method];if(n===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,T(t,i),"throw"===i.method))return p;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,t.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,p;var o=r.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,p):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,p)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function C(t){if(t){var i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,s=function i(){for(;++r<t.length;)if(n.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=e,i.done=!0,i};return s.next=s}}return{next:M}}function M(){return{value:e,done:!0}}return v.prototype=w.constructor=m,m.constructor=v,m[a]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(E.prototype),E.prototype[s]=function(){return this},t.AsyncIterator=E,t.async=function(e,i,n,r){var o=new E(h(e,i,n,r));return t.isGeneratorFunction(i)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},x(w),w[a]="Generator",w[o]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(n,r){return a.type="throw",a.arg=t,i.next=n,r&&(i.method="next",i.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var h=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),A(i),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;A(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:C(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));function xs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Es(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ts(t,e,i){return e&&Es(t.prototype,e),i&&Es(t,i),t}function Ss(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function As(t){return(As=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ps(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cs(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?Ps(t):e}var Ms=function(){function t(){xs(this,t)}return Ts(t,null,[{key:"minLevel",value:function(e){t.initParams(),"number"!=typeof e?(e=e.toUpperCase(),t.isValidLevelName(e)?window[t.paramKey].minLevel=t.LEVEL[e]:window[t.paramKey].minLevel=t.LEVEL.GENERAL):window[t.paramKey].minLevel=e}},{key:"initParams",value:function(){window[t.paramKey]||(window[t.paramKey]={emitEnabled:!1,enabled:!0,minLevel:1})}},{key:"emit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Debugger";t.initParams(),t.params.emitEnabled&&window.dispatchEvent(new Event(e))}},{key:"meetsLevelRequirement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GENERAL";return t.initParams(),!!(t.isValidLevelName(e)&&t.LEVEL[e]>=t.params.minLevel)}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"log";if(t.initParams(),t.isEnabled()){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];switch(e.toLowerCase()){case"info":var o;return!!t.meetsLevelRequirement("INFO")&&((o=console).info.apply(o,n),t.emit(),!0);case"debug":var s;return!!t.meetsLevelRequirement("DEBUG")&&((s=console).debug.apply(s,n),t.emit(),!0);case"error":var a;return!!t.meetsLevelRequirement("ERROR")&&((a=console).error.apply(a,n),t.emit(),!0);case"warn":var h;return!!t.meetsLevelRequirement("WARN")&&((h=console).warn.apply(h,n),t.emit(),!0);case"log":case"general":default:var u;return!!t.meetsLevelRequirement("GENERAL")&&((u=console).log.apply(u,n),t.emit(),!0)}}}},{key:"isValidLevelName",value:function(e){return t.initParams(),"GENERAL"==e||"DEBUG"==e||"INFO"==e||"WARN"==e||"ERROR"==e}},{key:"assert",value:function(e){if(t.initParams(),!e)throw"Assert Error: ".concat(e)}},{key:"isEnabled",value:function(){return window[t.paramKey].enabled}},{key:"enable",value:function(e){t.initParams(),window[t.paramKey].enabled=e}},{key:"params",get:function(){return t.initParams(),window[t.paramKey]}},{key:"LEVEL",get:function(){return{GENERAL:1,DEBUG:2,INFO:3,WARN:4,ERROR:5}}},{key:"paramKey",get:function(){return"__spring_roll_debugger_params__"}}]),t}(),Os=!!window.MSInputMethodContext&&!!document.documentMode,Is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ks=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Rs=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Ls=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},Ds=function(){function t(){ks(this,t),this._listeners={}}return Rs(t,[{key:"on",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._listeners[t]||(this._listeners[t]=[]),e._priority=parseInt(i)||0,-1===this._listeners[t].indexOf(e)&&(this._listeners[t].push(e),this._listeners[t].length>1&&this._listeners[t].sort(this.listenerSorter))}},{key:"listenerSorter",value:function(t,e){return t._priority-e._priority}},{key:"off",value:function(t,e){if(void 0!==this._listeners[t])if(void 0!==e){var i=this._listeners[t].indexOf(e);-1<i&&this._listeners[t].splice(i,1)}else delete this._listeners[t]}},{key:"trigger",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof t&&(t={type:t,data:"object"===(void 0===e?"undefined":Is(e))&&null!==e?e:{}}),void 0!==this._listeners[t.type])for(var i=this._listeners[t.type].length-1;i>=0;i--)this._listeners[t.type][i](t)}},{key:"destroy",value:function(){this._listeners={}}}]),t}(),Fs=new(function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100*Math.random()|0;ks(this,e);var i=Ls(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.id="BELLHOP:"+t,i.connected=!1,i.isChild=!0,i.connecting=!1,i.origin="*",i._sendLater=[],i.iframe=null,i.receive=i.receive.bind(i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Ds),Rs(e,[{key:"receive",value:function(t){if(this.target===t.source)if("connected"===t.data)this.onConnectionReceived(t.data);else{var e=t.data;if("string"==typeof e)try{e=JSON.parse(e)}catch(t){console.error("Bellhop error: ",t)}this.connected&&"object"===(void 0===e?"undefined":Is(e))&&e.type&&this.trigger(e)}}},{key:"onConnectionReceived",value:function(t){this.connecting=!1,this.connected=!0,this.isChild||this.target.postMessage(t,this.origin);for(var e=0;e<this._sendLater.length;e++){var i=this._sendLater[e],n=i.type,r=i.data;this.send(n,r)}this._sendLater.length=0,this.trigger("connected")}},{key:"connect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";this.connecting||(this.disconnect(),this.connecting=!0,t instanceof HTMLIFrameElement&&(this.iframe=t),this.isChild=void 0===t,this.supported=!0,this.isChild&&(this.supported=window!=t),this.origin=e,window.addEventListener("message",this.receive),this.isChild&&(window===this.target?this.trigger("failed"):this.target.postMessage("connected",this.origin)))}},{key:"disconnect",value:function(){this.connected=!1,this.connecting=!1,this.origin=null,this.iframe=null,this.isChild=!0,this._sendLater.length=0,window.removeEventListener("message",this.receive)}},{key:"send",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof t)throw"The event type must be a string";var i={type:t,data:e};this.connecting?this._sendLater.push(i):this.target.postMessage(JSON.stringify(i),this.origin)}},{key:"fetch",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this.connecting&&!this.connected)throw"No connection, please call connect() first";this.on(t,(function t(n){r&&i.off(n.type,t),e(n)})),this.send(t,n)}},{key:"respond",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.on(t,(function r(o){n&&e.off(o.type,r),e.send(t,"function"==typeof i?i():i)}))}},{key:"destroy",value:function(){(function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.disconnect(),this._sendLater.length=0}},{key:"target",get:function(){return this.isChild?window.parent:this.iframe.contentWindow}}]),e}()),Ns=(function(){function t(){xs(this,t),this.listeners=[]}Ts(t,[{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3;t?(this.length=t,this.timer=setTimeout(this.dispatch.bind(this),t)):Ms.log("warn","[IdleTimer.start()] must specify a time!")}},{key:"reset",value:function(){this.timer?(clearTimeout(this.timer),this.timer=setTimeout(this.dispatch.bind(this),this.length)):Ms.log("warn","[IdleTimer.reset()] timer has not been started")}},{key:"stop",value:function(){this.timer?(clearTimeout(this.timer),this.timer=null):Ms.log("warn","[IdleTimer.reset()] timer has not been started")}},{key:"dispatch",value:function(){for(var t=0;t<this.listeners.length;t++)this.listeners[t](this._value);this.reset()}},{key:"subscribe",value:function(t){this.listeners.push(t)}},{key:"unsubscribe",value:function(t){this.listeners=this.listeners.filter((function(e){return e!==t}))}}])}(),function t(){xs(this,t),"function"!=typeof this.play&&console.error('Springroll Hint Player not implemented correctly. Please ensure you have a "play" function in your class.')}),Us=function(t){function e(){var t;return xs(this,e),(t=Cs(this,As(e).call(this))).hints=[],t.index=0,t}return Ss(e,Ns),Ts(e,[{key:"play",value:function(){0!=this.hints.length?(this.index>=this.hints.length&&(this.index=0),this.hints[this.index](),this.index++):Ms.log("warn","[HintSequencePlayer.play()] No hints?!")}},{key:"clear",value:function(){this.index=0,this.hints.length=0}},{key:"add",value:function(){for(var t=arguments.length,e=0;e<t;e++)this.hints.push(e<0||arguments.length<=e?void 0:arguments[e])}},{key:"remove",value:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];for(var r=i.length,o=function(e){t.hints=t.hints.filter((function(t){return t!==i[e]}))},s=0;s<r;s++)o(s)}}]),e}(),Bs=function(){function t(e){xs(this,t),this._value=e,this.listeners=[]}return Ts(t,[{key:"subscribe",value:function(t){this.listeners.push(t)}},{key:"unsubscribe",value:function(t){this.listeners=this.listeners.filter((function(e){return e!==t}))}},{key:"value",get:function(){return this._value},set:function(t){if(this.value!==t){var e=this._value;this._value=t;for(var i=0;i<this.listeners.length;i++)this.listeners[i](this._value,e)}}},{key:"hasListeners",get:function(){return this.listeners.length>0}}]),t}(),js=Symbol("onReturn"),Xs=function(){function t(){xs(this,t)}return Ts(t,null,[{key:js,value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return new Promise((function(n,r){var o=!1,s=0,a=function e(i){Fs.off(t,e),o=!0,n(i)};Fs.on(t,a),Fs.send(t,e);var h=setInterval((function(){o?clearInterval(h):(s>=i&&(clearInterval(h),Fs.off(t,a),r("No Response")),s++)}),100)}))}},{key:"read",value:function(t){var e="Could not complete read action for ".concat(t,". Bellhop is not connected.");return Fs.connected?this[js]("userDataRead",{name:t}):new Promise((function(t,i){return i(e)}))}},{key:"write",value:function(t,e){var i="Could not complete write action for ".concat(t," with value ").concat(e,". Bellhop is not connected.");return Fs.connected?this[js]("userDataWrite",{name:t,value:e}):new Promise((function(t,e){return e(i)}))}},{key:"delete",value:function(t){var e="Could not complete delete action for ".concat(t,". Bellhop is not connected.");Fs.connected?Fs.send("userDataRemove",{name:t}):console.warn(e)}}]),t}(),Vs=function(){function t(){xs(this,t)}return Ts(t,[{key:"onResize",value:function(){throw"not implemented"}}]),t}(),zs=(function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.position,r=i.direction,o=i.callback,s=void 0===o?function(){return Ms.log("warn",Ps(t),"Anchor missing callback")}:o;return xs(this,e),(t=Cs(this,As(e).call(this))).position=n||{x:0,y:0},t.direction=r||{x:-1,y:-1},t.callback=s,t}Ss(e,Vs),Ts(e,[{key:"onResize",value:function(t){var e=t.viewArea,i=.5*e.width,n=.5*e.height,r=e.x+i,o=e.y+n,s=r+this.direction.x*i+this.position.x,a=o+this.direction.y*n+this.position.y;this.callback({x:s,y:a})}}])}(),function(){function t(e){var i=e.width,n=e.height,r=e.safeWidth,o=void 0===r?1/0:r,s=e.safeHeight,a=void 0===s?1/0:s,h=e.callback;xs(this,t),this.gameWidth=i,this.gameHeight=n,this.safeWidth=o<=i?o:i,this.safeHeight=a<=n?a:n,this.callback=h,this.scaleRatio=1,this.viewArea={x:0,y:0,width:0,height:0,left:0,right:0,top:0,bottom:0},this.onResize=this.onResize.bind(this),this.entities=[],h instanceof Function&&this.enable(h)}Ts(t,[{key:"onResize",value:function(t){var e=this,i=function(){var i=t.target.innerWidth,n=t.target.innerHeight;e.scaleRatio=Math.min(i/e.safeWidth,n/e.safeHeight);var r=Math.max(0,Math.min(e.gameWidth*e.scaleRatio,i)),o=Math.max(0,Math.min(e.gameHeight*e.scaleRatio,n)),s={x:e.gameWidth/r*e.scaleRatio,y:e.gameHeight/o*e.scaleRatio},a=i/e.scaleRatio,h=n/e.scaleRatio;e.viewArea.left=Math.max(.5*-(a-e.gameWidth),0),e.viewArea.top=Math.max(.5*-(h-e.gameHeight),0),e.viewArea.right=Math.min(e.viewArea.left+a,e.gameWidth),e.viewArea.bottom=Math.min(e.viewArea.top+h,e.gameHeight),e.viewArea.x=e.viewArea.left,e.viewArea.y=e.viewArea.top,e.viewArea.width=e.viewArea.right-e.viewArea.left,e.viewArea.height=e.viewArea.bottom-e.viewArea.top,e.resizeEventData=Object.freeze({offset:{x:e.viewArea.x,y:e.viewArea.y},gameSize:{x:e.gameWidth,y:e.gameHeight},viewArea:e.viewArea,scale:s}),e.callback({width:r,height:o,scaleRatio:e.scaleRatio,viewArea:e.viewArea,scale:s});for(var u=0,l=e.entities.length;u<l;u++)e.entities[u].onResize(e.resizeEventData)};i(),setTimeout(i,500)}},{key:"calcOffset",value:function(t){var e=this.gameWidth/this.safeWidth,i=this.gameHeight/this.safeHeight,n=(t.x-1)/(e-1),r=(t.y-1)/(i-1);return n=Number.isFinite(n)?n:0,r=Number.isFinite(r)?r:0,{x:(this.gameWidth-this.safeWidth)*n*.5,y:(this.gameHeight-this.safeHeight)*r*.5}}},{key:"addEntity",value:function(t){var e=this;Array.isArray(t)||(t=[t]),t.forEach((function(t){e.entities.includes(t)||(e.resizeEventData&&t.onResize(e.resizeEventData),e.entities.push(t))}))}},{key:"removeEntity",value:function(t){this.entities=this.entities.filter((function(e){return e!==t}))}},{key:"enable",value:function(t){t instanceof Function?(this.callback=t,window.addEventListener("resize",this.onResize),window.dispatchEvent(new Event("resize"))):Ms.warn("Scale Manager was not passed a function")}},{key:"disable",value:function(){window.removeEventListener("resize",this.onResize)}}])}(),function(){function t(e){xs(this,t),this.width=1,this.height=1,this.callback=e,this.onResize=this.onResize.bind(this),e instanceof Function&&this.enable(e)}return Ts(t,[{key:"onResize",value:function(t){var e=this,i=function(){var i=t.target.innerWidth,n=t.target.innerHeight;e.callback({width:i,height:n,ratio:i/n}),e.width=i,e.height=n};i(),setTimeout(i,500)}},{key:"enable",value:function(t){t instanceof Function?(this.callback=t,window.addEventListener("resize",this.onResize)):console.warn("Scale Manager was not passed a function")}},{key:"disable",value:function(){window.removeEventListener("resize",this.onResize)}}]),t}()),Ys=(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.voice,n=void 0===i?0:i,r=e.rate,o=void 0===r?1:r,s=e.pitch,a=void 0===s?0:s,h=e.volume,u=void 0===h?1:h;if(xs(this,t),window.speechSynthesis){this.voiceOptions=[],this.voicesLoaded=!1,this.queue=[],this.options={voice:{},rate:o,pitch:a,volume:u};var l=function(){this.voiceOptions=window.speechSynthesis.getVoices(),this.voice=this.setVoice(n),this.voicesLoaded=!0}.bind(this),c=window.speechSynthesis.getVoices();Array.isArray(c)&&0<c.length?l():window.speechSynthesis.addEventListener("voiceschanged",l,{once:!0})}else console.error("Springroll SpeechSynth is not supported on on this Device")}Ts(t,[{key:"pause",value:function(){this.speaking=!1,window.speechSynthesis.pause()}},{key:"resume",value:function(){this.speaking=!0,window.speechSynthesis.resume()}},{key:"cancel",value:function(){this.speaking=!1,this.pause(),this.queue.length=0,window.speechSynthesis.cancel()}},{key:"say",value:function(t){var e=this;if(!this.speaking&&this.voicesLoaded){this.speaking=!0;var i=new SpeechSynthesisUtterance(t);Object.assign(i,this.options),i.onend=function(){e.speaking=!1,0<e.queue.length&&e.say(e.queue.shift())},window.speechSynthesis.speak(i)}else this.queue.push(t)}},{key:"rangeLimit",value:function(t,e,i){return isNaN(i)?(console.warn("'".concat(i,"' is not a valid number!")),t):i>=e?e:t>=i?t:i}},{key:"setVoice",value:function(t){this.options.voice=this.voiceOptions[t]}},{key:"getVoice",value:function(){return this.options.voice}},{key:"rate",set:function(t){this.options.rate=this.rangeLimit(.1,10,t)},get:function(){return this.options.rate}},{key:"pitch",set:function(t){this.options.pitch=this.rangeLimit(0,2,t)},get:function(){return this.options.pitch}},{key:"volume",set:function(t){this.options.volume=this.rangeLimit(0,1,t)},get:function(){return this.options.volume}}])}(),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(xs(this,t),Os)console.error("Springroll ColorFilter is not supported on IE11");else{if(this.element=null,null===document.getElementById("color__filter__svg")){var n=document.createElement("div");n.style.width="0",n.style.height="0",n.style.position="absolute",n.style.opacity="0",n.innerHTML+='<svg id="color__filter__svg" style="width: 0; height: 0; position: absolute;" xmlns="http://www.w3.org/2000/svg"\n      version="1.1">\n      <defs>\n        <filter id="color__filter__protanopia">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.567, 0.433, 0,     0, 0\n                    0.558, 0.442, 0,     0, 0\n                    0,     0.242, 0.758, 0, 0\n                    0,     0,     0,     1, 0"/>\n        </filter>\n        <filter id="color__filter__protanomaly">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.817, 0.183, 0,     0, 0\n                    0.333, 0.667, 0,     0, 0\n                    0,     0.125, 0.875, 0, 0\n                    0,     0,     0,     1, 0"/>\n        </filter>\n        <filter id="color__filter__deuteranopia">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.625, 0.375, 0,   0, 0\n                    0.7,   0.3,   0,   0, 0\n                    0,     0.3,   0.7, 0, 0\n                    0,     0,     0,   1, 0"/>\n        </filter>\n        <filter id="color__filter__deuteranomaly">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.8,   0.2,   0,     0, 0\n                    0.258, 0.742, 0,     0, 0\n                    0,     0.142, 0.858, 0, 0\n                    0,     0,     0,     1, 0"/>\n        </filter>\n        <filter id="color__filter__tritanopia">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.95, 0.05,  0,     0, 0\n                    0,    0.433, 0.567, 0, 0\n                    0,    0.475, 0.525, 0, 0\n                    0,    0,     0,     1, 0"/>\n        </filter>\n        <filter id="color__filter__tritanomaly">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.967, 0.033, 0,     0, 0\n                    0,     0.733, 0.267, 0, 0\n                    0,     0.183, 0.817, 0, 0\n                    0,     0,     0,     1, 0"/>\n        </filter>\n        <filter id="color__filter__achromatopsia">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.299, 0.587, 0.114, 0, 0\n                    0.299, 0.587, 0.114, 0, 0\n                    0.299, 0.587, 0.114, 0, 0\n                    0,     0,     0,     1, 0"/>\n        </filter>\n        <filter id="color__filter__achromatomaly">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.618, 0.320, 0.062, 0, 0\n                    0.163, 0.775, 0.062, 0, 0\n                    0.163, 0.320, 0.516, 0, 0\n                    0,     0,     0,     1, 0"/>\n        </filter>\n      </defs>\n      </svg>\n      ',document.body.appendChild(n)}e instanceof HTMLElement&&"string"==typeof i&&this.applyFilter(e,i)}}Ts(t,[{key:"applyFilter",value:function(t,e){this.element=t,this.changeFilter(e)}},{key:"changeFilter",value:function(t){null!==this.element&&(this.element.style.filter="url(#color__filter__".concat(t,")"))}},{key:"removeFilter",value:function(){this.element.style.filter=null}},{key:"types",get:function(){return[{name:"Protanopia",value:"protanopia"},{name:"Protanomaly",value:"protanomaly"},{name:"Deuteranopia",value:"deuteranopia"},{name:"Deuteranomaly",value:"deuteranomaly"},{name:"Tritanopia",value:"tritanopia"},{name:"Tritanomaly",value:"tritanomaly"},{name:"Achromatopsia",value:"achromatopsia"},{name:"Achromatomaly",value:"achromatomaly"}]}}])}(),Object.freeze({left:"leftarrow",right:"rightarrow",up:"uparrow",down:"downarrow"})),Ws=function(){function t(e,i,n){xs(this,t),this.key=e,this._state=0,this.actions={up:n,down:i}}return Ts(t,[{key:"updateState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t<3&&t>-1&&(this._state=t)}},{key:"action",value:function(){1===this.state?this.actions.down&&this.actions.down():2===this.state&&(this.actions.up&&this.actions.up(),this.updateState(0))}},{key:"state",get:function(){return this._state}}]),t}(),Gs=(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];xs(this,t),this.assignButtons(e),window.addEventListener("blur",this.onWindowBlur.bind(this)),window.addEventListener("keydown",this.onKeyDown.bind(this)),window.addEventListener("keyup",this.onKeyUp.bind(this))}Ts(t,[{key:"update",value:function(){for(var t=0,e=this.keys.length;t<e;t++)this.buttons[this.keys[t]].action()}},{key:"onKeyDown",value:function(t){this.onKey(t,1)}},{key:"onKeyUp",value:function(t){this.onKey(t,2)}},{key:"onWindowBlur",value:function(){for(var t=0,e=Object.keys(this.buttons);t<e.length;t++){var i=e[t];1===this.buttons[i]._state&&this.buttons[i].updateState(2)}}},{key:"assignButtons",value:function(t){this.buttons={},this.keys=[];for(var e=0,i=t.length;e<i;e++){var n=t[e].key.toLowerCase(),r=Ys[n];void 0!==r&&(this.keys.push(r),this.buttons[r]=new Ws(r,t[e].down,t[e].up)),this.keys.push(n),this.buttons[n]=new Ws(n,t[e].down,t[e].up)}}},{key:"onKey",value:function(t,e){var i=t.key.toLowerCase();this.buttons[i]&&this.buttons[i].updateState(e)}}])}(),function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.features,r=i.hintPlayer,o=void 0===r?new Us:r;xs(this,t),this.state={ready:new Bs(!1),pause:new Bs(!1),captionsMuted:new Bs(!0),playOptions:new Bs({}),soundVolume:new Bs(1),musicVolume:new Bs(1),voVolume:new Bs(1),sfxVolume:new Bs(1)},this.features=Object.assign({captions:!1,sound:!1,vo:!1,music:!1,sfx:!1,soundVolume:!1,musicVolume:!1,voVolume:!1,sfxVolume:!1},n||{}),(this.features.vo||this.features.music||this.features.sfx)&&(this.features.sound=!0),this.container=Fs,this.container.connect(),this.container.send("features",this.features),this.container.send("keepFocus",!1);for(var s=["soundVolume","musicVolume","voVolume","sfxVolume","captionsMuted","pause"],a=s.length,h=function(t){var i=e.state[s[t]];e.container.on(s[t],(function(t){return i.value=t.data}))},u=0;u<a;u++)h(u);for(var l=[{mute:"soundMuted",volume:"soundVolume"},{mute:"musicMuted",volume:"musicVolume"},{mute:"voMuted",volume:"voVolume"},{mute:"sfxMuted",volume:"sfxVolume"}],c=function(t){var i=e.state[l[t].volume];e.container.on(l[t].mute,(function(t){var e=i._previousValue||1;i._previousValue=i.value,i.value=t.data?0:e}))},f=0;f<l.length;f++)c(f);window.addEventListener("focus",(function(){return e.container.send("focus",!0)})),window.addEventListener("blur",(function(){return e.container.send("focus",!1)}));var d=/playOptions=[^&$]*/.exec(window.location.search);if(null!==d){var p=d[0],g=decodeURIComponent(p.split("=")[1]);try{this.state.playOptions.value=JSON.parse(g)}catch(t){Ms.log("warn","Failed to parse playOptions from query string:"+t.message)}}this.container.fetch("playOptions",(function(t){return e.state.playOptions.value=t.data})),this.setupPlugins().catch((function(t){Ms.log("warn",t)})).then((function(){e.validateListeners()})).catch((function(t){Ms.log("warn",t)})).then((function(){e.container.send("loaded"),e.state.ready.value=!0})),this.hints=o,this.container.on("playHelp",(function(){e.hints?e.hints.play():Ms.log("warn","[Springroll] Missing IHintPlayer see: https://github.com/SpringRoll/SpringRoll/tree/v2/src/hints")}))}return Ts(t,[{key:"setupPlugins",value:function(){for(var e=this,i=[],n=function(n){t._plugins[n].preload&&i.push(t._plugins[n].preload(e).catch((function(e){t._plugins[n].preloadFailed=!0,console.warn(t._plugins[n].name,"Preload Failed:",e)})))},r=0;r<t._plugins.length;r++)n(r);return Promise.all(i).then((function(){t._plugins=t._plugins.filter((function(t){return!0!==t.preloadFailed}));for(var i=0;i<t._plugins.length;i++)t._plugins[i].init&&t._plugins[i].init(e);for(var n=0;n<t._plugins.length;n++)t._plugins[n].start&&t._plugins[n].start(e)}))}},{key:"getPlugin",value:function(e){return t.getPlugin(e)}},{key:"validateListeners",value:function(){for(var t=[],e={captions:"captionsMuted",sound:"soundVolume",music:"musicVolume",vo:"voVolume",sfx:"sfxVolume"},i=Object.keys(e),n=0;n<i.length;n++){var r=e[i[n]];this.features[i[n]]&&!this.state[r].hasListeners&&t.push(r)}if(this.state.pause.hasListeners||t.push("pause"),t.length)throw new Error("Application state is missing required listeners: "+t.join(", ")+".")}}]),t}());Gs._plugins=[],Gs.uses=function(t){Gs._plugins.push(t)},Gs.getPlugin=function(t){return Gs._plugins.find((function(e){return e.name===t}))};var Hs=function(){function t(e){xs(this,t),this.lines=e,this.lines.sort((function(t,e){return t.endTime<e.endTime?-1:t.endTime>e.endTime?1:0})),this.reset()}return Ts(t,[{key:"reset",value:function(){this.time=0,this.lineIndex=0,this.renderer=null}},{key:"update",value:function(t){var e=this.time+1e3*t;e!==this.time&&(this.updateState(e,this.time),this.time=e)}},{key:"updateState",value:function(t,e){if(!this.isFinished()){for(t>this.lines[this.lineIndex].endTime&&this.renderer.lineEnd();t>this.lines[this.lineIndex].endTime;)if(this.lineIndex++,this.isFinished())return;var i=this.lines[this.lineIndex];t>=i.startTime&&e<=i.startTime&&this.renderer.lineBegin(i)}}},{key:"isFinished",value:function(){return this.lineIndex>=this.lines.length}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{lineBegin:function(){},lineEnd:function(){}};this.reset(),this.renderer=e,this.updateTimeIndex(t),this.updateState(this.time,this.lines[this.lineIndex].startTime-1)}},{key:"updateTimeIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.time=t,!this.isFinished())for(var e=this.lines.length-1;e>-1;e--)if(this.lines[e].startTime<=t){this.lineIndex=e;break}}}]),t}(),qs=function(){function t(e,i,n){xs(this,t),this.startTime=e||0,this.endTime=i||0,this.content="",this.setContent(n)}return Ts(t,[{key:"setContent",value:function(t){this.content=t}}]),t}(),Zs=function(){function t(){xs(this,t)}return Ts(t,null,[{key:"createCaptionMap",value:function(t){var e={};for(var i in t){var n=this.createCaption(t[i]);n?e[i]=n:Ms.log("error","[CaptionFactory.createCaptionMap] failed to create caption:",i)}return e}},{key:"createCaption",value:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=this.createLine(t[i]);r&&e.push(r)}if(!(e.length<=0))return new Hs(e);Ms.log("error","[CaptionFactory.createCaption] captions should not have 0 lines.")}},{key:"createLine",value:function(t){if("number"==typeof t.start)if("number"==typeof t.end)if("string"==typeof t.content){if(""!==t.content)return new qs(t.start,t.end,t.content);Ms.log("warn","[CaptionFactory.createLine] lineData.content should not be empty","Its recommended to add time to the start of the next line to add delays.")}else Ms.log("error","[CaptionFactory.createLine] lineData.content must be defined as a string");else Ms.log("error","[CaptionFactory.createLine] lineData.end must be defined as a number");else Ms.log("error","[CaptionFactory.createLine] lineData.start must be defined as a number")}}]),t}(),Ks=function(){function t(e,i){xs(this,t),this.captions=Zs.createCaptionMap(e),this.renderer=i,this.activeCaption=null}return Ts(t,[{key:"update",value:function(t){this.activeCaption&&(this.activeCaption.update(t),this.activeCaption.isFinished()&&this.stop())}},{key:"start",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.stop(),this.activeCaption=this.captions[t],this.activeCaption)return this.renderer.start(i),void this.activeCaption.start(e,this.renderer);Ms.log("warn","[CaptionPlayer.Start()] caption ".concat(t," not found"))}},{key:"stop",value:function(){this.activeCaption&&this.renderer.stop&&this.renderer.stop(),this.activeCaption=null}}]),t}(),Js=function t(){xs(this,t),"function"==typeof this.start&&"function"==typeof this.stop&&"function"==typeof this.lineBegin&&"function"==typeof this.lineEnd||console.error('Springroll Caption Renderer not implemented corrected. Please ensure you have a "start", "end", "lineBegin", and "lineEnd" function in your class.')},Qs=function(t){function e(t){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return xs(this,e),i=Cs(this,As(e).call(this)),t instanceof HTMLElement||console.error("Invalid html element provided to renderer"),i.renderTarget=t,i.templateVariables=n,i}return Ss(e,Js),Ts(e,[{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.renderTarget.style.visibility="visible",this.templateVariables=t}},{key:"stop",value:function(){this.renderTarget.style.visibility="hidden",this.templateVariables={}}}]),e}();function $s(t,e){return t.replace(/{{([a-zA-Z][A-Za-z0-9]*)}}/g,(function(t,i){return e[i]||t}))}!function(t){function e(){return xs(this,e),Cs(this,As(e).apply(this,arguments))}Ss(e,Qs),Ts(e,[{key:"lineBegin",value:function(t){this.renderTarget.innerHTML=$s(t.content,this.templateVariables)}},{key:"lineEnd",value:function(){this.renderTarget.innerHTML=""}}])}();var ta=function(t){function e(){return xs(this,e),Cs(this,As(e).apply(this,arguments))}return Ss(e,Qs),Ts(e,[{key:"lineBegin",value:function(t){this.renderTarget.innerText=this.sanitize($s(t.content,this.templateVariables))}},{key:"lineEnd",value:function(){this.renderTarget.textContent=""}},{key:"sanitize",value:function(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""}}]),e}();(function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};xs(this,t),this.locales=e.locales,this.setPrimaryLocale(i.language||this.getBrowsersLocaleKey()||e.default),this.setFallbackLocale(i.fallback||e.default)}Ts(t,[{key:"resolve",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.language?this.getLocaleKey(e.language):this.primaryLanguage,n=this.getLocaleKey(e.fallback)||this.fallbackLanguage,r=this.locales[i],o=this.locales[n];return r?{path:r.path+t,language:i}:o?{path:o.path+t,language:n}:void 0}},{key:"setPrimaryLocale",value:function(t){var e=this.getLocaleKey(t);return!!e&&(this.primaryLanguage=e,!0)}},{key:"setFallbackLocale",value:function(t){var e=this.getLocaleKey(t);return!!e&&(this.fallbackLanguage=e,!0)}},{key:"getLocaleKey",value:function(t){if(t){var e=t.toLowerCase();if(this.locales[e])return e;if(e.indexOf("-")>0)return e=e.split("-")[0],this.getLocaleKey(e)}}},{key:"getBrowsersLocaleKey",value:function(){for(var t=this.getBrowserLanguages(),e=0,i=t.length;e<i;e++){var n=this.getLocaleKey(t[e]);if(n)return n}}},{key:"getBrowserLanguages",value:function(){return navigator.languages?navigator.languages:navigator.language?[navigator.language||navigator.userLanguage]:[]}}])})(),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(xs(this,t),void 0===e.name)throw new Error("Application plugin not provided a name field");this.name=e.name}Ts(t,[{key:"preload",value:function(){return Promise.resolve()}},{key:"init",value:function(){}},{key:"start",value:function(){}}])}()},function(t,e,i){var n=i(16),r=i(37),o=i(36),s=i(61)("src"),a=i(256),h=(""+a).split("toString");i(26).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,i,a){var u="function"==typeof i;u&&(o(i,"name")||r(i,"name",e)),t[e]!==i&&(u&&(o(i,s)||r(i,s,t[e]?""+t[e]:h.join(String(e)))),t===n?t[e]=i:a?t[e]?t[e]=i:r(t,e,i):(delete t[e],r(t,e,i)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[s]||a.call(this)}))},function(t,e,i){var n=i(8),r=i(17),o=i(53),s=/"/g,a=function(t,e,i,n){var r=String(o(t)),a="<"+e;return""!==i&&(a+=" "+i+'="'+String(n).replace(s,"&quot;")+'"'),a+">"+r+"</"+e+">"};t.exports=function(t,e){var i={};i[t]=e(a),n(n.P+n.F*r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",i)}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){var n=i(29),r=i(60);t.exports=i(28)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(81),r=i(53);t.exports=function(t){return n(r(t))}},function(t,e,i){"use strict";var n=i(17);t.exports=function(t,e){return!!t&&n((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},function(t,e,i){"use strict";var n,r,o,s,a=i(0),h=i(14),u=i.n(h);function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}e.a=(n=u.a.dev,r=n&&window.performance&&window.performance.mark&&window.performance.measure&&window.performance,o=function(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}},s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._listeners={},this._destroyed=!1,this.loopCheck=a.a.setUp()}var e,i,n;return e=t,n=[{key:"mixin",value:function(e){for(var i="",n=t.prototype,r=e.prototype,s=Object.getOwnPropertyNames(n),a=s.length;a--;)"constructor"!==(i=s[a])&&(r[i]?r[i]=o(r[i],n[i]):r[i]=n[i])}},{key:"initialize",value:function(t){t._listeners={},t._destroyed=!1,t.loopCheck=a.a.setUp()}}],(i=[{key:"on",value:function(t,e){var i=this._listeners[t]=this._listeners[t]||[];this._destroyed||-1===i.indexOf(e)&&i.push(e)}},{key:"off",value:function(t,e){var i=this._listeners[t],n=0;!this._destroyed&&i&&(void 0===t?this._listeners={}:void 0===e?i.length=0:-1!==(n=i.indexOf(e))&&i.splice(n,1))}},{key:"toString",value:function(){return"[Messenger Object]"}},{key:"trigger",value:function(t,e,i){var n=null,r=0,o=0,s=e,h=null;if("string"==typeof t){if(-1===t.indexOf(" "))return this.triggerEvent.apply(this,arguments);for(h=t.split(" "),n=Object(a.b)(arguments),r=0;r<h.length;r++)n[0]=h[r],o+=this.triggerEvent.apply(this,n);return a.a.recycle(n),o}if(Array.isArray(t)){for(n=Object(a.b)(arguments),r=0;r<t.length;r++)n[0]=t[r],o+=this.trigger.apply(this,n);return a.a.recycle(n),o}return t.event?(void 0!==t.message&&(s=t.message),this.triggerEvent(t.event,s,t.debug||i)):(platypus.debug.warn('Event incorrectly formatted: must be string, array, or object containing an "event" property.',t),0)}},{key:"triggerEvent",value:function(t){var e=0,i=0,n=null,r=this._listeners,o=null;if(!this._destroyed&&r.hasOwnProperty(t)&&r[t]){for(r=Object(a.b)(r[t]),arguments.length>1&&(o=Object(a.b)(arguments)).shift(),e=i=r.length;i--;)(n=r[i])._eventDispatcherOnce&&(delete n._eventDispatcherOnce,this.off(t,n)),n.apply(this,o);o&&a.a.recycle(o),a.a.recycle(r)}return e}},{key:"getMessageIds",value:function(){return Object.keys(this._listeners)}},{key:"destroy",value:function(){a.a.recycle(this.loopCheck),this.loopCheck=null,this._destroyed=!0,this._listeners=null}}])&&l(e.prototype,i),n&&l(e,n),t}(),n&&(s.prototype._triggerEvent=s.prototype.triggerEvent,s.prototype.triggerEvent=function(t,e){var i=0,n=5,o=e&&e.debug,s=0,a=0;if(o||this.debug){for(i=0;i<this.loopCheck.length;i++)if(this.loopCheck[i]===t){if((s+=1)>n)throw"Endless loop detected for '"+t+"'.";platypus.debug.warn("Event '"+t+"' is nested inside another '"+t+"' event.")}return this.loopCheck.push(t),r&&r.mark("a"),a=this._triggerEvent.apply(this,arguments),r&&(r.mark("b"),r.measure(this.type+":"+t,"a","b")),this.loopCheck.length=this.loopCheck.length-1,o&&(a?platypus.debug.olive('Entity "'+this.type+'": Event "'+t+'" has '+a+" subscriber"+(a>1?"s":"")+".",e):platypus.debug.warn('Entity "'+this.type+'": Event "'+t+'" has no subscribers.',e)),a}return this._triggerEvent.apply(this,arguments)}),s)},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i(0);function r(t,e){t=t.toString();var i=0,r=0,o=n.a.setUp();if(e){for(r=t.indexOf(e),i=e.length;r>=0;)o.push(t.substr(0,r)),r=(t=t.substr(r+i)).indexOf(e);o.push(t)}else for(i=(r=t.length)-1;r--;)o.push(t[i-r]);return o}},function(t,e,i){"use strict";(function(t){var i=function(){this._tweens={},this._tweensAddedDuringUpdate={}};i.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var i=Object.keys(this._tweens);if(0===i.length)return!1;for(t=void 0!==t?t:r.now();i.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<i.length;n++){var o=this._tweens[i[n]];o&&!1===o.update(t)&&(o._isPlaying=!1,e||delete this._tweens[i[n]])}i=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var n,r=new i;r.Group=i,r._nextId=0,r.nextId=function(){return r._nextId++},"undefined"==typeof self&&void 0!==t&&t.hrtime?r.now=function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?r.now=self.performance.now.bind(self.performance):void 0!==Date.now?r.now=Date.now:r.now=function(){return(new Date).getTime()},r.Tween=function(t,e){this._isPaused=!1,this._pauseStart=null,this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=r.Easing.Linear.None,this._interpolationFunction=r.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||r,this._id=r.nextId()},r.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},isPaused:function(){return this._isPaused},to:function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},duration:function(t){return this._duration=t,this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?r.now()+parseFloat(t):t:r.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(void 0===this._valuesStart[e]&&(this._valuesStart[e]=this._object[e]),this._valuesStart[e]instanceof Array==!1&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(1/0),this},pause:function(t){return this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=void 0===t?r.now():t,this._group.remove(this),this)},resume:function(t){return this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=(void 0===t?r.now():t)-this._pauseStart,this._pauseStart=0,this._group.add(this),this):this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onRepeat:function(t){return this._onRepeatCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,i,n;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(t-this._startTime)/this._duration,i=0===this._duration||i>1?1:i,n=this._easingFunction(i),this._valuesEnd)if(void 0!==this._valuesStart[e]){var r=this._valuesStart[e]||0,o=this._valuesEnd[e];o instanceof Array?this._object[e]=this._interpolationFunction(o,n):("string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?r+parseFloat(o):parseFloat(o)),"number"==typeof o&&(this._object[e]=r+(o-r)*n))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i){if(this._repeat>0){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var s=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=s}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,h=this._chainedTweens.length;a<h;a++)this._chainedTweens[a].start(this._startTime+this._duration);return!1}return!0}},r.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-r.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*r.Easing.Bounce.In(2*t):.5*r.Easing.Bounce.Out(2*t-1)+.5}}},r.Interpolation={Linear:function(t,e){var i=t.length-1,n=i*e,o=Math.floor(n),s=r.Interpolation.Utils.Linear;return e<0?s(t[0],t[1],n):e>1?s(t[i],t[i-1],i-n):s(t[o],t[o+1>i?i:o+1],n-o)},Bezier:function(t,e){for(var i=0,n=t.length-1,o=Math.pow,s=r.Interpolation.Utils.Bernstein,a=0;a<=n;a++)i+=o(1-e,n-a)*o(e,a)*t[a]*s(n,a);return i},CatmullRom:function(t,e){var i=t.length-1,n=i*e,o=Math.floor(n),s=r.Interpolation.Utils.CatmullRom;return t[0]===t[i]?(e<0&&(o=Math.floor(n=i*(1+e))),s(t[(o-1+i)%i],t[o],t[(o+1)%i],t[(o+2)%i],n-o)):e<0?t[0]-(s(t[0],t[0],t[1],t[1],-n)-t[0]):e>1?t[i]-(s(t[i],t[i],t[i-1],t[i-1],n-i)-t[i]):s(t[o?o-1:0],t[o],t[i<o+1?i:o+1],t[i<o+2?i:o+2],n-o)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var i=r.Interpolation.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:(n=[1],function(t){var e=1;if(n[t])return n[t];for(var i=t;i>1;i--)e*=i;return n[t]=e,e}),CatmullRom:function(t,e,i,n,r){var o=.5*(i-t),s=.5*(n-e),a=r*r;return(2*e-2*i+o+s)*(r*a)+(-3*e+3*i-2*o-s)*a+o*r+e}}},e.a=r}).call(this,i(170))},function(t,e,i){var n=i(44);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e,i){var n=i(82),r=i(60),o=i(38),s=i(57),a=i(36),h=i(137),u=Object.getOwnPropertyDescriptor;e.f=i(28)?u:function(t,e){if(t=o(t),e=s(e,!0),h)try{return u(t,e)}catch(t){}if(a(t,e))return r(!n.f.call(t,e),t[e])}},function(t,e,i){var n=i(8),r=i(26),o=i(17);t.exports=function(t,e){var i=(r.Object||{})[t]||Object[t],s={};s[t]=e(i),n(n.S+n.F*o((function(){i(1)})),"Object",s)}},function(t,e,i){var n=i(43),r=i(81),o=i(32),s=i(25),a=i(153);t.exports=function(t,e){var i=1==t,h=2==t,u=3==t,l=4==t,c=6==t,f=5==t||c,d=e||a;return function(e,a,p){for(var g,v,m=o(e),y=r(m),b=n(a,p,3),_=s(y.length),w=0,x=i?d(e,_):h?d(e,0):void 0;_>w;w++)if((f||w in y)&&(v=b(g=y[w],w,m),t))if(i)x[w]=v;else if(v)switch(t){case 3:return!0;case 5:return g;case 6:return w;case 2:x.push(g)}else if(l)return!1;return c?-1:u||l?l:x}}},function(t,e,i){"use strict";var n,r,o,s=i(14),a=i.n(s),h=i(20);e.a=(n=function(t){this.increment-=1,this.increment||(this.resolve=t,this.timeout=setTimeout(t,0))},r=function(t){this.resolve=null,t(),this.recycle()},(o=function(t,e){var i=r.bind(this,e),o=t.length;if(o){var s=n.bind(this,i),a=0;for(this.increment=o,this.resolve=null,a=0;a<o;a++)t[a](s)}else this.resolve=i,this.timeout=setTimeout(i,0)}).prototype.attemptResolution=function(){return!!this.resolve&&(clearTimeout(this.timeout),this.resolve(),!0)},h.a.add(o,"Async",o,(function(){this.increment=0,this.resolve=null,this.timeout=0}),!0,a.a.dev),o)},function(t,e,i){"use strict";var n,r,o,s,a,h=i(9),u=i(12),l=i(7),c=i(78),f=i(0),d=i(4),p=i(41);e.a=(o=h.filters.ColorMatrixFilter,s=new h.Matrix,n=function(t,e){var i=0,n=e.indexOf("("),r=e.substring(0,n),o=e.substring(n+1,e.indexOf(")")),s=!1;if(o.length){for("["===o[0]&&(o=o.substring(1,o.length-1),s=!0),i=(o=Object(p.a)(o,",")).length;i--;)o[i]=+o[i];s?t[r](o):(t[r].apply(t,o),f.a.recycle(o))}else t[r]()},a=function(t,e){var i=0,r=Object(p.a)(e,".");for(i=0;i<r.length;i++)n(t,r[i]);f.a.recycle(r)},Object(d.a)({id:"RenderContainer",properties:{mask:null,interactive:!1,rotate:"rotation",mirror:!1,flip:!1,visible:!0,cache:!1,ignoreOpacity:!1,localMask:!1},publicProperties:{dragMode:!1,renderParent:null,rotation:0,scaleX:1,scaleY:1,skewX:0,skewY:0,tint:null,x:0,y:0,z:0},initialize:function(){var t=this.container=this.owner.container=new h.Container,e=null,i=this.tint;!0===this.rotate&&(this.rotate="rotation",platypus.debug.warn('RenderContainer: Boolean values for the "rotate" property has been deprecated. Use "rotation", "orientationMatrix", or "" to specify the source of rotation for the render container. This property defaults to "rotation".')),this.parentContainer=null,this.wasVisible=this.visible,this.lastX=this.owner.x,this.lastY=this.owner.y,this.camera=u.a.setUp(),this.isOnCamera=!0,this.needsCameraCheck=!0,this._tint=null,Object.defineProperty(this.owner,"tint",{get:function(){return this._tint}.bind(this),set:function(t){var e=this.container.filters,i=null,n=function(t){return null===t?t:("string"==typeof t&&"#"===t[0]&&(t="0x"+t.substring(1)),+t)}(t);n!==this._tint&&(null===n?e&&(this.container.filters=null):(e||(e=this.container.filters=f.a.setUp(new o)),(i=e[0].matrix)[0]=(16711680&n)/16711680,i[6]=(65280&n)/65280,i[12]=(255&n)/255),this._tint=n)}.bind(this)}),null!==i&&(this.tint=i),this.interactive&&(e=l.a.setUp("container",t,"hitArea",this.interactive.hitArea,"hover",this.interactive.hover),this.owner.addComponent(new c.a(this.owner,e)),e.recycle()),this.cache&&(this.updateSprite(!1),this.owner.cacheRender=this.container)},events:{cache:function(){this.updateSprite(!1),this.owner.cacheRender=this.container,this.cache=!0,this.owner.parent.triggerEventOnChildren?this.owner.parent.triggerEventOnChildren("cache-sprite",this.owner):platypus.debug.warn("Unable to cache sprite for "+this.owner.type)},"camera-update":function(t){this.camera.set(t.viewport),this.needsCameraCheck=!0},"handle-render-load":function(){this.owner.triggerEvent("input-on"),this.updateSprite(!0)},"handle-render":function(){this.container&&this.updateSprite(!0)},"hide-sprite":function(){this.visible=!1},"show-sprite":function(){this.visible=!0},"set-mask":function(t){this.setMask(t)}},methods:{updateSprite:(r=function(t,e){return t.z-e.z},function(t){var e,i,n=0,o=s,a=1,h=1,u=null;if(e=this.owner.x,i=this.owner.y,"rotation"===this.rotate&&(n=this.rotation),this.container.z!==this.owner.z&&(this.parentContainer&&(this.parentContainer.reorder=!0),this.container.z=this.owner.z),this.ignoreOpacity||!this.owner.opacity&&0!==this.owner.opacity||(this.container.alpha=this.owner.opacity),this.container.reorder&&(this.container.reorder=!1,this.container.children.sort(r),this.needsCameraCheck=!0),(this.mirror||this.flip)&&(u=this.rotation%360,this.mirror&&u>90&&u<270&&(a=-1),this.flip&&u<180&&(h=-1)),"orientationMatrix"===this.rotate){var l=this.owner.orientationMatrix;o.a=l[0][0],o.b=l[1][0],o.tx=e+l[0][2],o.c=l[0][1],o.d=l[1][1],o.ty=i+l[1][2],this.container.transform.setFromMatrix(o)}else this.container.setTransform(e,i,this.scaleX*a,this.scaleY*h,n?n/180*Math.PI:0,this.skewX,this.skewY);this.parentContainer&&this.parentContainer.parentUpdated&&(this.needsCameraCheck=!0),this.container&&(this.container.childUpdated&&(this.needsCameraCheck=!0,this.container.childUpdated=!1),this.container.parentUpdated=!1),this.needsCameraCheck||(this.needsCameraCheck=this.lastX!==this.owner.x||this.lastY!==this.owner.y),t&&this.container&&(this.needsCameraCheck||!this.wasVisible&&this.visible)&&(this.isOnCamera=this.owner.parent.isOnCanvas(this.container.getBounds(!1)),this.needsCameraCheck=!1,this.parentContainer&&(this.parentContainer.childUpdated=!0),this.container.parentUpdated=!0),this.lastX=this.owner.x,this.lastY=this.owner.y,this.wasVisible=this.visible,this.container.visible=this.visible&&this.isOnCamera||this.dragMode}),setMask:function(t){var e=null;this.mask&&(this.localMask?this.container.removeChild(this.mask):this.parentContainer&&this.parentContainer.removeChild(this.mask)),t?(t.isMask||t instanceof h.Graphics?e=t:((e=new h.Graphics).beginFill(0,1),"string"==typeof t?a(e,t):t.radius?e.drawCircle(t.x||0,t.y||0,t.radius):t.width&&t.height&&e.drawRect(t.x||0,t.y||0,t.width,t.height),e.endFill()),e.isMask=!0,this.mask=this.container.mask=e,this.mask.z=0,this.localMask?this.container.addChild(this.mask):this.parentContainer&&this.parentContainer.addChild(this.mask)):this.mask=this.container.mask=null},destroy:function(){this.camera.recycle(),this.parentContainer&&!this.container.mouseTarget?(this.parentContainer.removeChild(this.container),this.parentContainer=null):this.cache||this.container.destroy(),this.container=null}},publicMethods:{removeFromParentContainer:function(){this.parentContainer&&(this.mask&&this.setMask(),this.parentContainer.removeChild(this.container))},addToParentContainer:function(t){this.parentContainer=t,this.parentContainer.addChild(this.container),this.parentContainer.reorder=!0,this.mask&&this.setMask(this.mask)}}}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(e,i,n){void 0===i&&(i=!1),r(this,t),this._fn=e,this._once=i,this._thisArg=n,this._next=this._prev=this._owner=null}return n(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function s(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var a=function(){function t(){r(this,t),this._head=this._tail=void 0}return n(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return s(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return s(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=o,e.default=a,t.exports=e.default},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){"use strict";if(i(28)){var n=i(62),r=i(16),o=i(17),s=i(8),a=i(98),h=i(131),u=i(43),l=i(75),c=i(60),f=i(37),d=i(76),p=i(45),g=i(25),v=i(164),m=i(64),y=i(57),b=i(36),_=i(83),w=i(19),x=i(32),E=i(123),T=i(65),S=i(67),A=i(66).f,P=i(125),C=i(61),M=i(22),O=i(48),I=i(88),k=i(84),R=i(127),L=i(73),D=i(91),F=i(74),N=i(126),U=i(155),B=i(29),j=i(46),X=B.f,V=j.f,z=r.RangeError,Y=r.TypeError,W=r.Uint8Array,G=Array.prototype,H=h.ArrayBuffer,q=h.DataView,Z=O(0),K=O(2),J=O(3),Q=O(4),$=O(5),tt=O(6),et=I(!0),it=I(!1),nt=R.values,rt=R.keys,ot=R.entries,st=G.lastIndexOf,at=G.reduce,ht=G.reduceRight,ut=G.join,lt=G.sort,ct=G.slice,ft=G.toString,dt=G.toLocaleString,pt=M("iterator"),gt=M("toStringTag"),vt=C("typed_constructor"),mt=C("def_constructor"),yt=a.CONSTR,bt=a.TYPED,_t=a.VIEW,wt=O(1,(function(t,e){return At(k(t,t[mt]),e)})),xt=o((function(){return 1===new W(new Uint16Array([1]).buffer)[0]})),Et=!!W&&!!W.prototype.set&&o((function(){new W(1).set({})})),Tt=function(t,e){var i=p(t);if(i<0||i%e)throw z("Wrong offset!");return i},St=function(t){if(w(t)&&bt in t)return t;throw Y(t+" is not a typed array!")},At=function(t,e){if(!(w(t)&&vt in t))throw Y("It is not a typed array constructor!");return new t(e)},Pt=function(t,e){return Ct(k(t,t[mt]),e)},Ct=function(t,e){for(var i=0,n=e.length,r=At(t,n);n>i;)r[i]=e[i++];return r},Mt=function(t,e,i){X(t,e,{get:function(){return this._d[i]}})},Ot=function(t){var e,i,n,r,o,s,a=x(t),h=arguments.length,l=h>1?arguments[1]:void 0,c=void 0!==l,f=P(a);if(null!=f&&!E(f)){for(s=f.call(a),n=[],e=0;!(o=s.next()).done;e++)n.push(o.value);a=n}for(c&&h>2&&(l=u(l,arguments[2],2)),e=0,i=g(a.length),r=At(this,i);i>e;e++)r[e]=c?l(a[e],e):a[e];return r},It=function(){for(var t=0,e=arguments.length,i=At(this,e);e>t;)i[t]=arguments[t++];return i},kt=!!W&&o((function(){dt.call(new W(1))})),Rt=function(){return dt.apply(kt?ct.call(St(this)):St(this),arguments)},Lt={copyWithin:function(t,e){return U.call(St(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return Q(St(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return N.apply(St(this),arguments)},filter:function(t){return Pt(this,K(St(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return $(St(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(St(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Z(St(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return it(St(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(St(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ut.apply(St(this),arguments)},lastIndexOf:function(t){return st.apply(St(this),arguments)},map:function(t){return wt(St(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return at.apply(St(this),arguments)},reduceRight:function(t){return ht.apply(St(this),arguments)},reverse:function(){for(var t,e=St(this).length,i=Math.floor(e/2),n=0;n<i;)t=this[n],this[n++]=this[--e],this[e]=t;return this},some:function(t){return J(St(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return lt.call(St(this),t)},subarray:function(t,e){var i=St(this),n=i.length,r=m(t,n);return new(k(i,i[mt]))(i.buffer,i.byteOffset+r*i.BYTES_PER_ELEMENT,g((void 0===e?n:m(e,n))-r))}},Dt=function(t,e){return Pt(this,ct.call(St(this),t,e))},Ft=function(t){St(this);var e=Tt(arguments[1],1),i=this.length,n=x(t),r=g(n.length),o=0;if(r+e>i)throw z("Wrong length!");for(;o<r;)this[e+o]=n[o++]},Nt={entries:function(){return ot.call(St(this))},keys:function(){return rt.call(St(this))},values:function(){return nt.call(St(this))}},Ut=function(t,e){return w(t)&&t[bt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Bt=function(t,e){return Ut(t,e=y(e,!0))?c(2,t[e]):V(t,e)},jt=function(t,e,i){return!(Ut(t,e=y(e,!0))&&w(i)&&b(i,"value"))||b(i,"get")||b(i,"set")||i.configurable||b(i,"writable")&&!i.writable||b(i,"enumerable")&&!i.enumerable?X(t,e,i):(t[e]=i.value,t)};yt||(j.f=Bt,B.f=jt),s(s.S+s.F*!yt,"Object",{getOwnPropertyDescriptor:Bt,defineProperty:jt}),o((function(){ft.call({})}))&&(ft=dt=function(){return ut.call(this)});var Xt=d({},Lt);d(Xt,Nt),f(Xt,pt,Nt.values),d(Xt,{slice:Dt,set:Ft,constructor:function(){},toString:ft,toLocaleString:Rt}),Mt(Xt,"buffer","b"),Mt(Xt,"byteOffset","o"),Mt(Xt,"byteLength","l"),Mt(Xt,"length","e"),X(Xt,gt,{get:function(){return this[bt]}}),t.exports=function(t,e,i,h){var u=t+((h=!!h)?"Clamped":"")+"Array",c="get"+t,d="set"+t,p=r[u],m=p||{},y=p&&S(p),b=!p||!a.ABV,x={},E=p&&p.prototype,P=function(t,i){X(t,i,{get:function(){return function(t,i){var n=t._d;return n.v[c](i*e+n.o,xt)}(this,i)},set:function(t){return function(t,i,n){var r=t._d;h&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),r.v[d](i*e+r.o,n,xt)}(this,i,t)},enumerable:!0})};b?(p=i((function(t,i,n,r){l(t,p,u,"_d");var o,s,a,h,c=0,d=0;if(w(i)){if(!(i instanceof H||"ArrayBuffer"==(h=_(i))||"SharedArrayBuffer"==h))return bt in i?Ct(p,i):Ot.call(p,i);o=i,d=Tt(n,e);var m=i.byteLength;if(void 0===r){if(m%e)throw z("Wrong length!");if((s=m-d)<0)throw z("Wrong length!")}else if((s=g(r)*e)+d>m)throw z("Wrong length!");a=s/e}else a=v(i),o=new H(s=a*e);for(f(t,"_d",{b:o,o:d,l:s,e:a,v:new q(o)});c<a;)P(t,c++)})),E=p.prototype=T(Xt),f(E,"constructor",p)):o((function(){p(1)}))&&o((function(){new p(-1)}))&&D((function(t){new p,new p(null),new p(1.5),new p(t)}),!0)||(p=i((function(t,i,n,r){var o;return l(t,p,u),w(i)?i instanceof H||"ArrayBuffer"==(o=_(i))||"SharedArrayBuffer"==o?void 0!==r?new m(i,Tt(n,e),r):void 0!==n?new m(i,Tt(n,e)):new m(i):bt in i?Ct(p,i):Ot.call(p,i):new m(v(i))})),Z(y!==Function.prototype?A(m).concat(A(y)):A(m),(function(t){t in p||f(p,t,m[t])})),p.prototype=E,n||(E.constructor=p));var C=E[pt],M=!!C&&("values"==C.name||null==C.name),O=Nt.values;f(p,vt,!0),f(E,bt,u),f(E,_t,!0),f(E,mt,p),(h?new p(1)[gt]==u:gt in E)||X(E,gt,{get:function(){return u}}),x[u]=p,s(s.G+s.W+s.F*(p!=m),x),s(s.S,u,{BYTES_PER_ELEMENT:e}),s(s.S+s.F*o((function(){m.of.call(p,1)})),u,{from:Ot,of:It}),"BYTES_PER_ELEMENT"in E||f(E,"BYTES_PER_ELEMENT",e),s(s.P,u,Lt),F(u),s(s.P+s.F*Et,u,{set:Ft}),s(s.P+s.F*!M,u,Nt),n||E.toString==ft||(E.toString=ft),s(s.P+s.F*o((function(){new p(1).slice()})),u,{slice:Dt}),s(s.P+s.F*(o((function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()}))||!o((function(){E.toLocaleString.call([1,2])}))),u,{toLocaleString:Rt}),L[u]=M?C:O,n||M||f(E,pt,O)}}else t.exports=function(){}},function(t,e,i){"use strict";var n,r,o,s,a,h,u,l,c,f,d,p,g,v,m,y,b=i(9),_=i(0),w=i(7);e.a=(u={},l={},c=function(){},f=b.Texture.EMPTY,d=/[\[\]{},-]/g,p=function(t){var e=0,i=_.a.setUp(),n=null,r=platypus.assetCache,o=l,s=null;for(e=0;e<t.length;e++)if("string"==typeof(s=t[e])){if(!o[s]){if(!(n=r.get(s))){platypus.debug.warn('"'+s+'" is not a loaded asset.');break}o[s]=new b.BaseTexture(n)}i.push(o[s])}else i.push(new b.BaseTexture(s));return i},g=function(t,e){var i=_.a.setUp(),n=0;for(n=0;n<t;n++)i.push(e[n]||f);return w.a.setUp("id","default","frames",i,"next","default","speed",1)},v=function(t,e){var i="",n=w.a.setUp(),r=0,o=null,s="";for(s in t)if(t.hasOwnProperty(s)){for(i=t[s],r=(o=Object(_.b)(i.frames)).length;r--;)o[r]=e[o[r]]||f;n[s]=w.a.setUp("id",s,"frames",o,"next",i.next,"speed",i.speed)}return n.default||(n.default=g(e.length,e)),n},y=(m=function(t,e){var i=function(t){var e=0;if(t.id)return t.id;for(e=0;e<t.images.length;e++)if("string"!=typeof t.images[e])return"";return t.id=JSON.stringify(t).replace(d,""),t.id}(t),n=i?u[i]:null,r=(t.framerate||60)/60;for(var o in i?n?(n.viable+=1,this.cacheId=i):(n=u[i]=function(t,e){var i,n=0,r=null,o=t.frames,s=t.images,a=_.a.setUp(),h=p(s);for(n=0;n<o.length;n++)r=o[n],a.push(new b.Texture(h[r[4]],new b.Rectangle(r[0],r[1],r[2],r[3]),null,null,0,new b.Point((r[5]||0)/r[2],(r[6]||0)/r[3])));return i=v(t.animations,a),_.a.recycle(h),w.a.setUp("textures",a,"animations",i,"viable",1,"cacheId",e)}(t,i),this.cacheId=i):n=function(t){var e=0,i=null,n=null,r=t.frames,o=t.images,s=_.a.setUp(),a=p(o);for(e=0;e<r.length;e++)n=r[e],s.push(new b.Texture(a[n[4]],new b.Rectangle(n[0],n[1],n[2],n[3]),null,null,0,new b.Point((n[5]||0)/n[2],(n[6]||0)/n[3])));return(i=v(t.animations,s)).default||(i.default=g(s.length,s)),_.a.recycle(a),w.a.setUp("textures",s,"animations",i)}(t),b.Container.call(this),this._animations={},n.animations)if(1===n.animations[o].frames.length)this._animations[o]=new b.Sprite(n.animations[o].frames[0]);else{var s=this._animations[o]=new b.AnimatedSprite(n.animations[o].frames);s.animationSpeed=r*n.animations[o].speed,s.onComplete=s.onLoop=function(t,e){this.onComplete&&this.onComplete(t),e.next&&this.gotoAndPlay(e.next)}.bind(this,o,n.animations[o]),s.updateAnchor=!0}this._animation=null,this.animationSpeed=r,this.currentAnimation=null,this.playing=!1,this._visible=!0,this._updating=!1,this.update=c,this.gotoAndPlay(e)}).prototype=Object.create(b.Container.prototype),m.prototype.constructor=m,Object.defineProperties(y,{visible:{get:function(){return this._visible},set:function(t){this._visible=t}},paused:{get:function(){return!this.playing},set:function(t){(t&&this.playing||!t&&!this.playing)&&(this.playing=!t)}}}),y.stop=function(){this.paused=!0},y.play=function(){this.paused=!1},y.gotoAndStop=function(t){this.stop(),this._animation&&this._animation.stop&&this._animation.stop(),this._animation=this._animations[t],this._animation||(this._animation=this._animations.default),this.removeChildren(),this.addChild(this._animation)},y.gotoAndPlay=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(this.currentAnimation!==t||i)&&(this._animation&&this._animation.stop&&this._animation.stop(),this._animation=this._animations[t],this.currentAnimation=t,this._animation||(this._animation=this._animations.default,this.currentAnimation="default"),this.removeChildren(),this.addChild(this._animation)),this._animation.loop=e,this._animation.play&&this._animation.play(),this.play()},y.has=function(t){return!!this._animations[t]},y.destroy=function(){var t="";if(this.stop(),this._animation&&this._animation.stop&&this._animation.stop(),b.Container.prototype.destroy.call(this),this.cacheId&&(u[this.cacheId].viable-=1,u[this.cacheId].viable<=0)){for(t in _.a.recycle(u[this.cacheId].textures),u[this.cacheId].animations)u[this.cacheId].animations.hasOwnProperty(t)&&_.a.recycle(u[this.cacheId].animations[t].frames);delete u[this.cacheId]}},m.EmptySpriteSheet={framerate:60,frames:[],images:[],animations:{},recycleSpriteSheet:function(){}},m.formatSpriteSheet=(n=/([\w-]+)\.(\w+)$/,r=function(t){for(var e=t.length,i="",n="";e--;)i+=n+(t[e].src||t[e]).substring(0,128),n=",";return i},o=function(t,e){var i=null,n=e.animations,o=e.images,h=e.framerate||60,u=e.frames,l=0,c=_.a.setUp(),f=o.length,d=u.length,g=t.animations,v=t.images,m=t.framerate||60,y=t.frames;for(e.id?e.id+=";"+(t.id||r(t.images)):e.id=t.id||r(t.images),l=0;l<v.length;l++)c.push(a(v[l])),o.push(c[l]);return Array.isArray(y)?function(t,e,i){var n=null,r=0;for(r=0;r<t.length;r++)n=t[r],e.push(_.a.setUp(n[0],n[1],n[2],n[3],n[4]+i,n[5],n[6]))}(y,u,f):(function(t,e,i,n){var r=0,o=t.width,s=t.height,a=t.regX||0,h=t.regY||0,u=0,l=0,c=0,f=0;for(r=0;r<n.length;r++)for(u=n[r].realWidth-o,l=n[r].realHeight-s,f=0;f<=l;f+=s)for(c=0;c<=u;c+=o)e.push([c,f,o,s,r+i,a,h])}(y,u,f,i=p(c)),_.a.recycle(i)),function(t,e,i,n,r){var o="";for(o in t)t.hasOwnProperty(o)&&(e[o]&&(_.a.recycle(e[o].frames),e[o].recycle(),platypus.debug.olive('PIXIAnimation "'+r+'": Overwriting duplicate animation for "'+o+'".')),e[o]=s(o,t[o],i,n))}(g,n,m/h,d,e.id),_.a.recycle(c),e},s=function(t,e,i,n){var r=0,o=0,s=_.a.setUp(),a=0;if("number"==typeof e)return s.push(e+n),w.a.setUp("frames",s,"next",t,"speed",i);if(Array.isArray(e)){for(o=e[0]||0,a=(e[1]||o)+1+n,r=o+=n;r<a;r++)s.push(r);return w.a.setUp("frames",s,"next",e[2]||t,"speed",(e[3]||1)*i)}for(r=0;r<e.frames.length;r++)s.push(e.frames[r]+n);return w.a.setUp("frames",s,"next",e.next||t,"speed",(e.speed||1)*i)},a=function(t){var e=!1;return"string"==typeof t&&(e=t.match(n))?e[1]:t},h=function(){var t=this.animations,e="";for(e in t)t.hasOwnProperty(e)&&_.a.recycle(t[e].frames),t[e].recycle();_.a.recycle(this.frames,2),this.frames=null,_.a.recycle(this.images),this.images=null,this.recycle()},function(t){var e=m.EmptySpriteSheet,i=t;if("string"==typeof i&&(i=platypus.game.settings.spriteSheets[t]),i){if(e=w.a.setUp("animations",w.a.setUp(),"framerate",60,"frames",_.a.setUp(),"id","","images",_.a.setUp(),"recycleSpriteSheet",h),Array.isArray(i))return function(t,e){for(var i=t.length,n=null;i--;)"string"==typeof(n=t[i])&&(n=platypus.game.settings.spriteSheets[n]),n&&o(n,e);return e}(i,e);if(i)return o(i,e)}return e}),m)},function(t,e,i){var n,r,o;!function(i){var s=/iPhone/i,a=/iPod/i,h=/iPad/i,u=/\bAndroid(?:.+)Mobile\b/i,l=/Android/i,c=/\bAndroid(?:.+)SD4930UR\b/i,f=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,d=/Windows Phone/i,p=/\bWindows(?:.+)ARM\b/i,g=/BlackBerry/i,v=/BB10/i,m=/Opera Mini/i,y=/\b(CriOS|Chrome)(?:.+)Mobile/i,b=/Mobile(?:.+)Firefox\b/i;function _(t,e){return t.test(e)}function w(t){var e=t||("undefined"!=typeof navigator?navigator.userAgent:""),i=e.split("[FBAN");void 0!==i[1]&&(e=i[0]),void 0!==(i=e.split("Twitter"))[1]&&(e=i[0]);var n={apple:{phone:_(s,e)&&!_(d,e),ipod:_(a,e),tablet:!_(s,e)&&_(h,e)&&!_(d,e),device:(_(s,e)||_(a,e)||_(h,e))&&!_(d,e)},amazon:{phone:_(c,e),tablet:!_(c,e)&&_(f,e),device:_(c,e)||_(f,e)},android:{phone:!_(d,e)&&_(c,e)||!_(d,e)&&_(u,e),tablet:!_(d,e)&&!_(c,e)&&!_(u,e)&&(_(f,e)||_(l,e)),device:!_(d,e)&&(_(c,e)||_(f,e)||_(u,e)||_(l,e))||_(/\bokhttp\b/i,e)},windows:{phone:_(d,e),tablet:_(p,e),device:_(d,e)||_(p,e)},other:{blackberry:_(g,e),blackberry10:_(v,e),opera:_(m,e),firefox:_(b,e),chrome:_(y,e),device:_(g,e)||_(v,e)||_(m,e)||_(b,e)||_(y,e)}};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}t.exports&&"undefined"==typeof window?t.exports=w:t.exports&&"undefined"!=typeof window?(t.exports=w(),t.exports.isMobile=w):(r=[],n=i.isMobile=w(),void 0===(o="function"==typeof n?n.apply(e,r):n)||(t.exports=o))}(this)},function(t,e,i){var n=i(19);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){var n=i(61)("meta"),r=i(19),o=i(36),s=i(29).f,a=0,h=Object.isExtensible||function(){return!0},u=!i(17)((function(){return h(Object.preventExtensions({}))})),l=function(t){s(t,n,{value:{i:"O"+ ++a,w:{}}})},c=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,n)){if(!h(t))return"F";if(!e)return"E";l(t)}return t[n].i},getWeak:function(t,e){if(!o(t,n)){if(!h(t))return!0;if(!e)return!1;l(t)}return t[n].w},onFreeze:function(t){return u&&c.NEED&&h(t)&&!o(t,n)&&l(t),t}}},function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)r(i,n)&&(t[n]=i[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,i,n,r){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+n),r);else for(var o=0;o<n;o++)t[r+o]=e[i+o]},flattenChunks:function(t){var e,i,n,r,o,s;for(n=0,e=0,i=t.length;e<i;e++)n+=t[e].length;for(s=new Uint8Array(n),r=0,e=0,i=t.length;e<i;e++)o=t[e],s.set(o,r),r+=o.length;return s}},s={arraySet:function(t,e,i,n,r){for(var o=0;o<n;o++)t[r+o]=e[i+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(n)},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e){t.exports=!1},function(t,e,i){var n=i(139),r=i(110);t.exports=Object.keys||function(t){return n(t,r)}},function(t,e,i){var n=i(45),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=n(t))<0?r(t+e,0):o(t,e)}},function(t,e,i){var n=i(18),r=i(140),o=i(110),s=i(109)("IE_PROTO"),a=function(){},h=function(){var t,e=i(107)("iframe"),n=o.length;for(e.style.display="none",i(111).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),h=t.F;n--;)delete h.prototype[o[n]];return h()};t.exports=Object.create||function(t,e){var i;return null!==t?(a.prototype=n(t),i=new a,a.prototype=null,i[s]=t):i=h(),void 0===e?i:r(i,e)}},function(t,e,i){var n=i(139),r=i(110).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},function(t,e,i){var n=i(36),r=i(32),o=i(109)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,i){var n=i(22)("unscopables"),r=Array.prototype;null==r[n]&&i(37)(r,n,{}),t.exports=function(t){r[n][t]=!0}},function(t,e,i){var n=i(19);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,i){"use strict";var n,r,o,s,a,h,u=i(12),l=i(11),c=i(14),f=i.n(c),d=i(20);e.a=(n=function(t,e){var i=e.aABB,n=i.halfHeight,r=i.halfWidth,o=Math.abs,s=Math.pow,a=o(t.x-e.x),h=o(t.y-e.y),u=t.radius;return a<r||h<n||a<r+u&&h<n+u&&s(a-r,2)+s(h-n,2)<s(u,2)},r=function(t){var e=Math.pow;return this.aABB.collides(t.aABB)&&("rectangle"===t.type&&n(this,t)||"circle"===t.type&&e(this.x-t.x,2)+e(this.y-t.y,2)<=e(this.radius+t.radius,2))},o=function(){return!1},s=function(t){return this.aABB.collides(t.aABB)&&("rectangle"===t.type||"circle"===t.type&&n(t,this))},(h=(a=function(t,e,i){var n=e.regX,a=e.regY,h=e.width||2*e.radius||0,c=e.height||2*e.radius||0,f=e.radius||0,d=e.type||"rectangle";this.initialized||(this.initialized=!0,l.a.assign(this,"offset","offsetX","offsetY"),l.a.assign(this,"position","x","y"),l.a.assign(this,"size","width","height"),this.aABB=u.a.setUp()),this.owner=t,this.collisionType=i,this.type=d,this.subType="","circle"===d?(h=c=2*f,this.collides=r):this.collides="rectangle"===d?s:o,this.size.setXYZ(h,c),this.radius=f,"number"!=typeof n&&(n=h/2),"number"!=typeof a&&(a=c/2),this.offset.setXYZ(e.offsetX||h/2-n,e.offsetY||c/2-a),t?this.position.setXYZ(t.x,t.y).add(this.offset):this.position.setXYZ(e.x,e.y).add(this.offset),this.aABB.setAll(this.x,this.y,h,c)}).prototype).updateAll=function(t){this.owner=t.owner,this.collisionType=t.collisionType,this.type=t.type,this.subType=t.subType,this.offset.x=t.offset.x,this.offset.y=t.offset.y,this.position.x=t.position.x,this.position.y=t.position.y,this.size.x=t.size.x,this.size.y=t.size.y,this.radius=t.radius,this.aABB.setAll(this.x,this.y,this.width,this.height),"circle"===this.type?this.collides=r:"rectangle"===this.type?this.collides=s:this.collides=o},h.update=function(t,e){var i=t+this.offsetX,n=e+this.offsetY;this.position.setXYZ(i,n),this.aABB.move(i,n)},h.moveX=function(t){this.x=t,this.aABB.moveX(t)},h.moveY=function(t){this.y=t,this.aABB.moveY(t)},h.moveXY=function(t,e){this.x=t,this.y=e,this.aABB.move(t,e)},h.getAABB=function(){return this.aABB},h.setXWithEntityX=function(t){this.x=t+this.offsetX,this.aABB.moveX(this.x)},h.setYWithEntityY=function(t){this.y=t+this.offsetY,this.aABB.moveY(this.y)},h.multiply=function(t){var e=this.position,i=this.owner.position;e.subtractVector(i),e.multiply(t),this.offset.multiply(t),this.size.multiply(t),e.addVector(i),this.width=Math.abs(this.width),this.height=Math.abs(this.height),this.aABB.setAll(this.x,this.y,this.width,this.height)},h.containsPoint=function(t,e){var i=Math.pow;return this.aABB.containsPoint(t,e)&&("rectangle"===this.type||"circle"===this.type&&i(this.x-t,2)+i(this.y-e,2)<=i(this.radius,2))},h.toJSON=function(){var t={},e=this.size.width,i=this.size.height;return e/2!==this.regX&&(t.regX=this.regX),i/2!==this.regY&&(t.regY=this.regY),this.offset.x!==e/2-this.regX&&(t.offsetX=this.offset.x),this.offset.y!==i/2-this.regY&&(t.offsetY=this.offset.y),"circle"===this.type?t.radius=this.radius:(t.width=e,t.height=i),t.type=this.type,t},d.a.add(a,"CollisionShape",a,null,!0,f.a.dev),a)},function(t,e,i){var n=i(29).f,r=i(36),o=i(22)("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,i){var n=i(8),r=i(53),o=i(17),s=i(113),a="["+s+"]",h=RegExp("^"+a+a+"*"),u=RegExp(a+a+"*$"),l=function(t,e,i){var r={},a=o((function(){return!!s[t]()||"​"!="​"[t]()})),h=r[t]=a?e(c):s[t];i&&(r[i]=h),n(n.P+n.F*a,"String",r)},c=l.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(h,"")),2&e&&(t=t.replace(u,"")),t};t.exports=l},function(t,e){t.exports={}},function(t,e,i){"use strict";var n=i(16),r=i(29),o=i(28),s=i(22)("species");t.exports=function(t){var e=n[t];o&&e&&!e[s]&&r.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){var n=i(34);t.exports=function(t,e,i){for(var r in e)n(t,r,e[r],i);return t}},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";var n,r,o,s,a,h,u,l,c,f,d,p,g=i(9),v=i(12),m=i(7),y=i(4),b=function(t){var e=t.data,i=e.originalEvent;return i.type.substr(0,5)+(e.identifier||i.changedTouches&&i.changedTouches[0]&&i.changedTouches[0].identifier||0)},_={},w=[];e.a=Object(y.a)({id:"Interactive",properties:{container:null,hitArea:null,hover:!1,relativeToSelf:!1},publicProperties:{buttonMode:!1},initialize:function(){this.pressed=!1,this.camera=v.a.setUp(),this.hitArea&&(this.container.hitArea=this.setHitArea(this.hitArea))},events:{"camera-update":function(t){this.camera.set(t.viewport)},"handle-render":function(){this.buttonMode!==this.container.buttonMode&&(this.container.buttonMode=this.buttonMode)},"dispatch-event":function(t){this.sprite.dispatchEvent(this.sprite,t.event,t.data)},"input-on":function(){this.removeInputListeners||this.addInputs()},"input-off":function(){this.removeInputListeners&&this.removeInputListeners()},pointerdown:function(){this.pressed=!0},pointermove:function(t){this.pressed&&_[b(t.pixiEvent)]===this&&this.owner.triggerEvent("pressmove",t)},pointerup:function(t){this.pressed&&(this.owner.triggerEvent("pressup",t),this.pressed=!1)},pointerupoutside:function(t){this.pressed&&(this.owner.triggerEvent("pressup",t),this.pressed=!1)},pointercancel:function(t){this.pressed&&(this.owner.triggerEvent("pressup",t),this.pressed=!1)},"set-hit-area":function(t){this.setHitArea(t)}},methods:{addInputs:(o=function(t,e){var i,n=this.camera,r=this.container,o=null,s=this.owner;r&&e.data.originalEvent&&(i=this.relativeToSelf?r.transform.worldTransform:r.parent.transform.worldTransform,o=m.a.setUp("event",e.data.originalEvent,"pixiEvent",e,"x",e.data.global.x/i.a+n.left,"y",e.data.global.y/i.d+n.top,"entity",s),s.trigger(t,o),o.recycle())},s=function(t){var e=b(t);_[e]&&w.push(_[e]),_[e]=this,o.call(this,"pointerdown",t),t.currentTarget.mouseTarget=!0},a=function(t){o.call(this,"pointermove",t),t.currentTarget.mouseTarget=!0},h=function(t){o.call(this,"pointertap",t)},u=function(t){o.call(this,"pointerout",t)},l=function(t){o.call(this,"pointerover",t)},c=function(t){var e=b(t),i=null;if(_[e]===this)i=this,_[e]=null;else if(w.length)i=w[w.length-1],w.length-=1;else{if(!_[e])return;i=_[e]}o.call(i,"pointerup",t),t.currentTarget.mouseTarget=!1,t.currentTarget.removeDisplayObject&&t.currentTarget.removeDisplayObject()},f=function(t){var e=b(t),i=null;if(_[e]===this)i=this,_[e]=null;else if(w.length)i=w[w.length-1],w.length-=1;else{if(!_[e])return;i=_[e]}o.call(i,"pointerupoutside",t),t.currentTarget.mouseTarget=!1,t.currentTarget.removeDisplayObject&&t.currentTarget.removeDisplayObject()},d=function(t){var e=b(t),i=null;if(_[e]===this)i=this,_[e]=null;else if(w.length)i=w[w.length-1],w.length-=1;else{if(!_[e])return;i=_[e]}o.call(i,"pointercancel",t),t.currentTarget.mouseTarget=!1,t.currentTarget.removeDisplayObject&&t.currentTarget.removeDisplayObject()},p=function(t,e,i,n,r,o,s,a,h){var u="";for(u in _)_.hasOwnProperty(u)&&_[u]===this&&(_[u]=null);t.removeListener("pointerdown",e),t.removeListener("pointerup",i),t.removeListener("pointerupoutside",n),t.removeListener("pointercancel",r),t.removeListener("pointermove",o),t.removeListener("pointertap",s),this.hover&&(t.removeListener("pointerover",a),t.removeListener("pointerout",h)),t.interactive=!1,this.removeInputListeners=null},function(){var t,e,i,n,r,o,g=this.container,v=null,m=null;g.interactive=!0,t=s.bind(this),e=a.bind(this),i=c.bind(this),n=f.bind(this),r=d.bind(this),o=h.bind(this),g.addListener("pointerdown",t),g.addListener("pointerup",i),g.addListener("pointerupoutside",n),g.addListener("pointercancel",r),g.addListener("pointermove",e),g.addListener("pointertap",o),this.hover&&(v=l.bind(this),m=u.bind(this),g.addListener("pointerover",v),g.addListener("pointerout",m)),this.removeInputListeners=p.bind(this,g,t,i,n,r,e,o,v,m)}),setHitArea:(r={},function(t){var e,i=null;return e=JSON.stringify(t),(i=r[e])||(i=Array.isArray(t)?new g.Polygon(t):t.radius?new g.Circle(t.x||0,t.y||0,t.radius):new g.Rectangle(t.x||0,t.y||0,t.width||this.owner.width||0,t.height||this.owner.height||0),r[e]=i),i}),toJSON:function(){return null},destroy:(n=function(){this.container.parent.removeChild(this.container),this.container=null},function(){this.removeInputListeners&&this.removeInputListeners(),this.camera.recycle(),this.container.mouseTarget&&this.container.parent&&(this.container.visible=!1,this.container.removeDisplayObject=n.bind(this))})}})},function(t,e,i){"use strict";var n,r,o,s,a,h,u,l,c,f=i(27),d=i(0),p=i(4);function g(t){throw new Error('"'+t+'" is read-only')}e.a=(o=function(t,e){return"default"===t?s.bind(null,e):u.bind(null,e,f.a.setUp(t))},s=function(t){return t},a=function(t,e,i){this.component.playAnimation(t,e,i)},h=function(t){this.component.stopAnimation(t)},u=function(t,e,i){return!!i.includes(e)&&t},l=function(t,e,i){this.owner.triggerEvent("play-animation",t,e,i)},c=function(t){this.owner.triggerEvent("stop-animation",t)},Object(p.a)({id:"RenderAnimator",properties:{animationStates:null,animationEvents:null,component:null,forcePlayThrough:!1,restart:!0,loop:!1},initialize:(n=function(t,e,i){this.override=t,this.owner.triggerEvent("play-animation",t,e,i)},r=function(t,e,i){this.override=t,this.playAnimation(t,e,i)},function(){var t=this.animationEvents,e=this.animationStates;if(this.override=!1,t)for(var i in t)t.hasOwnProperty(i)&&(this.component?this.addEventListener(i,r.bind(this.component,t[i],this.loop,this.restart)):this.addEventListener(i,n.bind(this,t[i],this.loop,this.restart)));if(this.followThroughs={},this.checkStates=d.a.setUp(),this.state=this.owner.state,this.stateChange=!0,this.lastState=-1,e)for(var s in e)if(e.hasOwnProperty(s)){var u=e[s];"!"===u[u.length-1]?(g("animation"),u=u.substring(0,u.length-1),this.followThroughs[u]=!0):this.followThroughs[u]=!1,this.checkStates.push(o(s,u))}this.waitingAnimation=!1,this.waitingState=0,this.playWaiting=!1,this.animationFinished=!1,this.component?(this.playAnimation=a,this.stopAnimation=h):(this.playAnimation=l,this.stopAnimation=c)}),events:{"state-changed":function(){this.stateChange=!0},"animation-ended":function(t){t===this.currentAnimation&&(this.override&&t===this.override&&(this.stateChange=!0,this.override=!1),this.waitingAnimation?(this.currentAnimation=this.waitingAnimation,this.waitingAnimation=!1,this.lastState=this.waitingState,this.animationFinished=!1,this.playAnimation(this.currentAnimation)):this.animationFinished=!0)},"update-animation":function(t){var e=0,i=!1;if(this.stateChange&&!this.override){for(this.state.has("visible")&&(this.visible=this.state.get("visible")),e=0;e<this.checkStates.length;e++)if(i=this.checkStates[e](this.state)){this.currentAnimation!==i?!this.followThroughs[this.currentAnimation]&&(!this.forcePlaythrough||this.animationFinished||this.lastState>=+e)?(this.currentAnimation=i,this.lastState=+e,this.animationFinished=!1,t?this.playAnimation(this.currentAnimation):this.stopAnimation(this.currentAnimation)):(this.waitingAnimation=i,this.waitingState=+e):this.waitingAnimation&&!this.followThroughs[this.currentAnimation]&&(this.waitingAnimation=!1);break}this.stateChange=!1}}},methods:{toJSON:function(){return null},destroy:function(){d.a.recycle(this.checkStates),this.checkStates=null,this.followThroughs=null,this.state=null}}}))},function(t,e,i){"use strict";i.d(e,"a",(function(){return h})),i.d(e,"b",(function(){return a}));var n=i(3),r=i(10);var o={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},s=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");var a=function(t){function e(e,i,n,a,h){var u=function(t,e){var i,n=Math.ceil(t/2),r="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";i=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var a=i.replace("%index%",s);o+=a=a.replace("%sampleIndex%",s-(n-1)+".0"),o+="\n"}return r=(r=r.replace("%blur%",o)).replace("%size%",t)}(h=h||5,e),l=function(t){for(var e,i=o[t],n=i.length,r=s,a="",h=0;h<t;h++){var u="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",h);e=h,h>=n&&(e=t-h-1),a+=u=u.replace("%value%",i[e]),a+="\n"}return r=(r=r.replace("%blur%",a)).replace("%size%",t)}(h);t.call(this,u,l),this.horizontal=e,this.resolution=a||r.b.RESOLUTION,this._quality=0,this.quality=n||4,this.blur=i||8}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={blur:{configurable:!0},quality:{configurable:!0}};return e.prototype.apply=function(t,e,i,n){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{var r=t.getFilterTexture(),o=t.renderer,s=e,a=r;this.state.blend=!1,t.applyFilter(this,s,a,!1);for(var h=1;h<this.passes-1;h++){o.renderTexture.bind(s,s.filterFrame),this.uniforms.uSampler=a;var u=a;a=s,s=u,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,i,n),t.returnFilterTexture(r)}},i.blur.get=function(){return this.strength},i.blur.set=function(t){this.padding=1+2*Math.abs(t),this.strength=t},i.quality.get=function(){return this._quality},i.quality.set=function(t){this._quality=t,this.passes=t},Object.defineProperties(e.prototype,i),e}(n.n),h=function(t){function e(e,i,n,o){t.call(this),this.blurXFilter=new a(!0,e,i,n,o),this.blurYFilter=new a(!1,e,i,n,o),this.resolution=n||r.b.RESOLUTION,this.quality=i||4,this.blur=e||8,this.repeatEdgePixels=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={blur:{configurable:!0},quality:{configurable:!0},blurX:{configurable:!0},blurY:{configurable:!0},blendMode:{configurable:!0},repeatEdgePixels:{configurable:!0}};return e.prototype.apply=function(t,e,i,n){var r=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(r&&o){var s=t.getFilterTexture();this.blurXFilter.apply(t,e,s,!0),this.blurYFilter.apply(t,s,i,n),t.returnFilterTexture(s)}else o?this.blurYFilter.apply(t,e,i,n):this.blurXFilter.apply(t,e,i,n)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},i.blur.get=function(){return this.blurXFilter.blur},i.blur.set=function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},i.quality.get=function(){return this.blurXFilter.quality},i.quality.set=function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},i.blurX.get=function(){return this.blurXFilter.blur},i.blurX.set=function(t){this.blurXFilter.blur=t,this.updatePadding()},i.blurY.get=function(){return this.blurYFilter.blur},i.blurY.set=function(t){this.blurYFilter.blur=t,this.updatePadding()},i.blendMode.get=function(){return this.blurYFilter.blendMode},i.blendMode.set=function(t){this.blurYFilter.blendMode=t},i.repeatEdgePixels.get=function(){return this._repeatEdgePixels},i.repeatEdgePixels.set=function(t){this._repeatEdgePixels=t,this.updatePadding()},Object.defineProperties(e.prototype,i),e}(n.n)},function(t,e,i){var n=i(52);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){var n=i(52),r=i(22)("toStringTag"),o="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?i:o?n(e):"Object"==(s=n(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,i){var n=i(18),r=i(44),o=i(22)("species");t.exports=function(t,e){var i,s=n(t).constructor;return void 0===s||null==(i=n(s)[o])?e:r(i)}},function(t,e,i){"use strict";var n,r,o,s=i(7),a=i(27),h=i(0),u=i(14),l=i.n(u),c=i(20);e.a=(r=function(t){return t},(o=(n=function(t,e,i){this.event=t,this.trigger=i,this.active=!1,this.wasActive=!1,this.valid=!0,this.wasValid=!0,this.states=a.a.setUp(e),this.inputs=h.a.setUp(),this.stateSummary=s.a.setUp("pressed",!1,"released",!1,"triggered",!1)}).prototype).update=function(t){var e=this.stateSummary;return this.valid=t.includes(this.states),this.active=this.inputs.some(r),e.pressed=this.valid&&this.active,e.released=this.wasActive&&(!this.valid&&this.wasValid||this.valid&&!this.active),e.triggered=this.valid&&this.active&&!this.wasActive,this.wasValid=this.valid,this.wasActive=this.active,e.pressed||e.released||e.triggered},o.resolve=function(){this.trigger(this.event,this.stateSummary)},c.a.add(n,"ActionState",n,(function(){this.states.recycle(),this.stateSummary.recycle(),h.a.recycle(this.inputs)}),!0,l.a.dev),n)},function(t,e,i){"use strict";var n,r,o=i(11),s=i(14),a=i.n(s),h=i(20);e.a=((r=(n=function t(e){this.vector||(this.vector=o.a.setUp()),e instanceof t?this.copy(e):this.set.apply(this,arguments)}).prototype).set=function(t,e,i,n,r,o,s,a,h){this.occurred=t||!1,this.direction=e||null,this.position=i||null,this.deltaMovement=n||null,this.aABB=r||null,this.thisShape=o||null,this.thatShape=s||null,this.vector.set(a),this.stuck=h||0},r.copy=function(t){this.occurred=t.occurred,this.direction=t.direction,this.position=t.position,this.deltaMovement=t.deltaMovement,this.aABB=t.aABB,this.thisShape=t.thisShape,this.thatShape=t.thatShape,this.vector.setVector(t.vector),this.stuck=t.stuck},h.a.add(n,"CollisionData",n,null,!0,a.a.dev),n)},function(t,e,i){var n=i(26),r=i(16),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:i(62)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,i){var n=i(38),r=i(25),o=i(64);t.exports=function(t){return function(e,i,s){var a,h=n(e),u=r(h.length),l=o(s,u);if(t&&i!=i){for(;u>l;)if((a=h[l++])!=a)return!0}else for(;u>l;l++)if((t||l in h)&&h[l]===i)return t||l||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){var n=i(52);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){var n=i(22)("iterator"),r=!1;try{var o=[7][n]();o.return=function(){r=!0},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var o=[7],s=o[n]();s.next=function(){return{done:i=!0}},o[n]=function(){return s},t(o)}catch(t){}return i}},function(t,e,i){"use strict";var n=i(18);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,i){"use strict";var n=i(83),r=RegExp.prototype.exec;t.exports=function(t,e){var i=t.exec;if("function"==typeof i){var o=i.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(t))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},function(t,e,i){"use strict";i(157);var n=i(34),r=i(37),o=i(17),s=i(53),a=i(22),h=i(128),u=a("species"),l=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),c=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();t.exports=function(t,e,i){var f=a(t),d=!o((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),p=d?!o((function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[u]=function(){return i}),i[f](""),!e})):void 0;if(!d||!p||"replace"===t&&!l||"split"===t&&!c){var g=/./[f],v=i(s,f,""[t],(function(t,e,i,n,r){return e.exec===h?d&&!r?{done:!0,value:g.call(e,i,n)}:{done:!0,value:t.call(i,e,n)}:{done:!1}})),m=v[0],y=v[1];n(String.prototype,t,m),r(RegExp.prototype,f,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}}},function(t,e,i){var n=i(43),r=i(152),o=i(123),s=i(18),a=i(25),h=i(125),u={},l={};(e=t.exports=function(t,e,i,c,f){var d,p,g,v,m=f?function(){return t}:h(t),y=n(i,c,e?2:1),b=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(o(m)){for(d=a(t.length);d>b;b++)if((v=e?y(s(p=t[b])[0],p[1]):y(t[b]))===u||v===l)return v}else for(g=m.call(t);!(p=g.next()).done;)if((v=r(g,y,p.value,e))===u||v===l)return v}).BREAK=u,e.RETURN=l},function(t,e,i){var n=i(16).navigator;t.exports=n&&n.userAgent||""},function(t,e,i){"use strict";var n=i(16),r=i(8),o=i(34),s=i(76),a=i(58),h=i(95),u=i(75),l=i(19),c=i(17),f=i(91),d=i(71),p=i(114);t.exports=function(t,e,i,g,v,m){var y=n[t],b=y,_=v?"set":"add",w=b&&b.prototype,x={},E=function(t){var e=w[t];o(w,t,"delete"==t?function(t){return!(m&&!l(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(m&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,i){return e.call(this,0===t?0:t,i),this})};if("function"==typeof b&&(m||w.forEach&&!c((function(){(new b).entries().next()})))){var T=new b,S=T[_](m?{}:-0,1)!=T,A=c((function(){T.has(1)})),P=f((function(t){new b(t)})),C=!m&&c((function(){for(var t=new b,e=5;e--;)t[_](e,e);return!t.has(-0)}));P||((b=e((function(e,i){u(e,b,t);var n=p(new y,e,b);return null!=i&&h(i,v,n[_],n),n}))).prototype=w,w.constructor=b),(A||C)&&(E("delete"),E("has"),v&&E("get")),(C||S)&&E(_),m&&w.clear&&delete w.clear}else b=g.getConstructor(e,t,v,_),s(b.prototype,i),a.NEED=!0;return d(b,t),x[t]=b,r(r.G+r.W+r.F*(b!=y),x),m||g.setStrong(b,t,v),b}},function(t,e,i){for(var n,r=i(16),o=i(37),s=i(61),a=s("typed_array"),h=s("view"),u=!(!r.ArrayBuffer||!r.DataView),l=u,c=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");c<9;)(n=r[f[c++]])?(o(n.prototype,a,!0),o(n.prototype,h,!0)):l=!1;t.exports={ABV:u,CONSTR:l,TYPED:a,VIEW:h}},function(t,e,i){"use strict";var n=i(442),r=i(444);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=b,e.resolve=function(t,e){return b(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?b(t,!1,!0).resolveObject(e):e},e.format=function(t){r.isString(t)&&(t=b(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),c=["%","/","?",";","#"].concat(l),f=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=i(445);function b(t,e,i){if(t&&r.isObject(t)&&t instanceof o)return t;var n=new o;return n.parse(t,e,i),n}o.prototype.parse=function(t,e,i){if(!r.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",u=t.split(a);u[0]=u[0].replace(/\\/g,"/");var b=t=u.join(a);if(b=b.trim(),!i&&1===t.split("#").length){var _=h.exec(b);if(_)return this.path=b,this.href=b,this.pathname=_[1],_[2]?(this.search=_[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=s.exec(b);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,b=b.substr(w.length)}if(i||w||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===b.substr(0,2);!E||w&&v[w]||(b=b.substr(2),this.slashes=!0)}if(!v[w]&&(E||w&&!m[w])){for(var T,S,A=-1,P=0;P<f.length;P++){-1!==(C=b.indexOf(f[P]))&&(-1===A||C<A)&&(A=C)}-1!==(S=-1===A?b.lastIndexOf("@"):b.lastIndexOf("@",A))&&(T=b.slice(0,S),b=b.slice(S+1),this.auth=decodeURIComponent(T)),A=-1;for(P=0;P<c.length;P++){var C;-1!==(C=b.indexOf(c[P]))&&(-1===A||C<A)&&(A=C)}-1===A&&(A=b.length),this.host=b.slice(0,A),b=b.slice(A),this.parseHost(),this.hostname=this.hostname||"";var M="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!M)for(var O=this.hostname.split(/\./),I=(P=0,O.length);P<I;P++){var k=O[P];if(k&&!k.match(d)){for(var R="",L=0,D=k.length;L<D;L++)k.charCodeAt(L)>127?R+="x":R+=k[L];if(!R.match(d)){var F=O.slice(0,P),N=O.slice(P+1),U=k.match(p);U&&(F.push(U[1]),N.unshift(U[2])),N.length&&(b="/"+N.join(".")+b),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=n.toASCII(this.hostname));var B=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+B,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!g[x])for(P=0,I=l.length;P<I;P++){var X=l[P];if(-1!==b.indexOf(X)){var V=encodeURIComponent(X);V===X&&(V=escape(X)),b=b.split(X).join(V)}}var z=b.indexOf("#");-1!==z&&(this.hash=b.substr(z),b=b.slice(0,z));var Y=b.indexOf("?");if(-1!==Y?(this.search=b.substr(Y),this.query=b.substr(Y+1),e&&(this.query=y.parse(this.query)),b=b.slice(0,Y)):e&&(this.search="",this.query={}),b&&(this.pathname=b),m[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var W=this.search||"";this.path=B+W}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(s=y.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||m[e])&&!1!==o?(o="//"+(o||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+n},o.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(r.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var i=new o,n=Object.keys(this),s=0;s<n.length;s++){var a=n[s];i[a]=this[a]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),u=0;u<h.length;u++){var l=h[u];"protocol"!==l&&(i[l]=t[l])}return m[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!m[t.protocol]){for(var c=Object.keys(t),f=0;f<c.length;f++){var d=c[f];i[d]=t[d]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||v[t.protocol])i.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),i.pathname=p.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var g=i.pathname||"",y=i.search||"";i.path=g+y}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var b=i.pathname&&"/"===i.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=_||b||i.host&&t.pathname,x=w,E=i.pathname&&i.pathname.split("/")||[],T=(p=t.pathname&&t.pathname.split("/")||[],i.protocol&&!m[i.protocol]);if(T&&(i.hostname="",i.port=null,i.host&&(""===E[0]?E[0]=i.host:E.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),w=w&&(""===p[0]||""===E[0])),_)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,E=p;else if(p.length)E||(E=[]),E.pop(),E=E.concat(p),i.search=t.search,i.query=t.query;else if(!r.isNullOrUndefined(t.search)){if(T)i.hostname=i.host=E.shift(),(M=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=M.shift(),i.host=i.hostname=M.shift());return i.search=t.search,i.query=t.query,r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!E.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var S=E.slice(-1)[0],A=(i.host||t.host||E.length>1)&&("."===S||".."===S)||""===S,P=0,C=E.length;C>=0;C--)"."===(S=E[C])?E.splice(C,1):".."===S?(E.splice(C,1),P++):P&&(E.splice(C,1),P--);if(!w&&!x)for(;P--;P)E.unshift("..");!w||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),A&&"/"!==E.join("/").substr(-1)&&E.push("");var M,O=""===E[0]||E[0]&&"/"===E[0].charAt(0);T&&(i.hostname=i.host=O?"":E.length?E.shift():"",(M=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=M.shift(),i.host=i.hostname=M.shift()));return(w=w||i.host&&E.length)&&!O&&E.unshift(""),E.length?i.pathname=E.join("/"):(i.pathname=null,i.path=null),r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){"use strict";var n,r,o=i(0),s=i(7);e.a=((r=(n=function(t,e){this.type=t,this.owner=e,this.publicMethods=s.a.setUp(),this.listener=s.a.setUp("events",o.a.setUp(),"messages",o.a.setUp())}).prototype).toString=function(){return"[Component "+this.type+"]"},r.toJSON=null,r.destroy=function(){var t="";if(this.listener){for(t in this._destroy&&this._destroy(),this.publicMethods)this.publicMethods.hasOwnProperty(t)&&this.removeMethod(t);this.publicMethods.recycle(),this.removeEventListeners(),o.a.recycle(this.listener.events),o.a.recycle(this.listener.messages),this.listener.recycle(),this.listener=null}},r.removeEventListeners=function(t){var e=0,i=null,n=null;if(t)for(e=0;e<t.length;e++)this.removeEventListener(t[e]);else{for(i=this.listener.events,n=this.listener.messages,e=0;e<i.length;e++)this.owner.off(i[e],n[e]);i.length=0,n.length=0}},r.addEventListener=function(t,e,i){var n=e.bind(this);return this.listener.events.push(t),this.listener.messages.push(n),this.owner.on(t,n,i),n},r.addMethod=function(t,e){this.owner[t]?platypus.debug.warn(this.owner.type+': Entity already has a method called "'+t+'". Method not added.'):(this.owner[t]=function(){return e.apply(this,arguments)}.bind(this),this.publicMethods[t]=e)},r.removeEventListener=function(t,e){var i=0,n=this.listener.events,r=this.listener.messages;for(i=n.length-1;i>=0;i--)n[i]!==t||e&&r[i]!==e||(this.owner.off(t,r[i]),Object(o.c)(this.listener.events,i),Object(o.c)(this.listener.messages,i))},r.removeMethod=function(t){this.owner[t]?delete this.owner[t]:platypus.debug.warn(this.owner.type+': Entity does not have a method called "'+t+'".'),delete this.publicMethods[t]},n.getAssetList=function(){return o.a.setUp()},n)},function(t,e,i){"use strict";var n,r,o=i(0),s=i(14),a=i.n(s),h=i(20);e.a=((r=(n=function(){this.xData||this.yData?this.reset():(this.xData=o.a.setUp(),this.yData=o.a.setUp(),this.xDeltaMovement=1/0,this.yDeltaMovement=1/0)}).prototype).tryToAddX=function(t){return!(t.deltaMovement>this.xDeltaMovement||(t.deltaMovement<this.xDeltaMovement&&this.resetX(t.deltaMovement),this.xData.push(t),0))},r.tryToAddY=function(t){return!(t.deltaMovement>this.yDeltaMovement||(t.deltaMovement<this.yDeltaMovement&&this.resetY(t.deltaMovement),this.yData.push(t),0))},r.reset=function(){this.resetX(1/0),this.resetY(1/0)},r.resetX=function(t){for(var e=this.xData,i=e.length;i--;)e[i].recycle();e.length=0,this.xDeltaMovement=t},r.resetY=function(t){for(var e=this.yData,i=e.length;i--;)e[i].recycle();e.length=0,this.yDeltaMovement=t},h.a.add(n,"CollisionDataContainer",n,null,!0,a.a.dev),n)},function(t,e,i){"use strict";var n=i(33),r=i(9),o=i(0),s=i(49),a=i(7),h=i(23),u=i(40),l=i(30);function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.volume=1,this.player=l.a,this.playingAudio=o.a.setUp(),this.sounds=o.a.setUp()}var e,i,n;return e=t,(i=[{key:"play",value:function(t,e){var i=this,n=this.player.play(t,e);return n.initialVolume=n.volume,n.set("volume",n.initialVolume*this.volume),this.playingAudio.push(n),this.sounds.push(t),n.on("end",(function(){var t=i.playingAudio.indexOf(n);Object(o.c)(i.playingAudio,t),Object(o.c)(i.sounds,t)})),n}},{key:"stop",value:function(t){var e=this.playingAudio.indexOf(t);t.stop(),e>=0?(Object(o.c)(this.playingAudio,e),Object(o.c)(this.sounds,e)):platypus.debug.warn('SFXPlayer: Did not find "'+t.soundId+'"')}},{key:"setVolume",value:function(t){var e=this.playingAudio;this.volume=t;for(var i=0;i<e.length;i++){var n=e[i];n.set("volume",n.initialVolume*this.volume)}}},{key:"destroy",value:function(){o.a.recycle(this.playingAudio),this.playingAudio=null,o.a.recycle(this.sounds),this.sounds=null}}])&&c(e.prototype,i),n&&c(e,n),t}(),d=i(21);function p(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var g=function(){function t(e,i){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var o=i.name+"-data",s=window.localStorage.getItem(o),a=i.storageKeys||null,h=function(t){if(t&&t.data){var e=t.data;for(var i in e)e.hasOwnProperty(i)&&(r.map.has(i)?r.map.set(i,e[i]):r.addKey(i,e[i]))}};if(this.map=d.a.setUp(),this.storageKey=o,this.connected=!1,a)for(var u=0;u<a.length;u++)this.addKey(a[u],null);try{h({data:JSON.parse(s)})}catch(t){}e.container.on("connected",(function(){r.connected=!0,n.f.read(r.storageKey).then(h).catch((function(t){platypus.debug.warn("Storage: connected but received an error",t)}))}))}var e,i,r;return e=t,(i=[{key:"addKey",value:function(t,e){this.map.set(t,e),Object.defineProperty(this,t,{get:function(){return this.map.get(t)},set:function(e){this.map.set(t,e),this.save()},enumerable:!0})}},{key:"get",value:function(t){return this.map.has(t)||this.addKey(t,null),this[t]}},{key:"save",value:function(){var t=this.map.toJSON();this.connected?n.f.write(this.storageKey,t).catch((function(t){platypus.debug.warn("Storage: tried to save but received an error",t)})):window.localStorage.setItem(this.storageKey,JSON.stringify(t))}},{key:"set",value:function(t,e){this.map.has(t)?this[t]=e:(this.addKey(t,e),this.save())}}])&&p(e.prototype,i),r&&p(e,r),t}(),v=i(42);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var x,E,T=function(t){function e(t,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?_(t):e}(this,b(e).call(this))).game=t,n.assetCache=i,n._onSoundFinished=n._onSoundFinished.bind(_(n)),n._updateSilence=n._updateSilence.bind(_(n)),n._syncCaptionToSound=n._syncCaptionToSound.bind(_(n)),n.preloadingNextSound="",n.paused=!1,n.voList=null,n._listCounter=0,n._currentVO=null,n._soundInstance=null,n._callback=null,n._cancelledCallback=null,n._timer=0,n._captions=null,n.volume=1,n.captionMute=!0,n.currentlyLoadingAudio=!1,n.playQueue=o.a.setUp(),n}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(e,t),i=e,(n=[{key:"getElapsed",value:function(){var t,e=0;if(!this.voList)return 0;for(var i=0;i<this._listCounter;++i){var n=this.voList[i];"string"==typeof n?e+=1e3*l.a.duration(n):"number"==typeof n&&(e+=n)}if((t=this._listCounter)<this.voList.length){var r=this.voList[t];"string"==typeof r?this._soundInstance&&(e+=1e3*this._soundInstance._elapsed):"number"==typeof r&&(e+=r-this._timer)}return e}},{key:"pause",value:function(){!this.paused&&this.playing&&(this.paused=!0,this._soundInstance&&this._soundInstance.pause(),this.game.off("tick",this._syncCaptionToSound),this.game.off("tick",this._updateSilence))}},{key:"resume",value:function(){this.paused&&(this.paused=!1,this._soundInstance&&this._soundInstance.resume(),this._captions.activeCaption?this._soundInstance&&this.game.on("tick",this._syncCaptionToSound):this.game.on("tick",this._updateSilence))}},{key:"play",value:function(t,e,i){if(this.startingNewTrack)platypus.debug.warn("VOPlayer: Tried playing a new track while a new track was starting up.");else{if(this.currentlyLoadingAudio)return void this.playQueue.push(a.a.setUp("idOrList",t,"callback",e,"cancelledCallback",i));this.startingNewTrack=!0,this.stop(),this.startingNewTrack=!1,this._listCounter=-1,"string"==typeof t?this.voList=o.a.setUp(0,t):(this.voList=Object(o.b)(t),this.voList.unshift(0)),this._callback=e,this._cancelledCallback=!0===i?e:i,this._onSoundFinished()}}},{key:"_onSoundFinished",value:function(){if(this._listCounter>=0){var t=this._currentVO;this.trigger("end",t),"string"==typeof t?(this.voList[0]+=1e3*l.a.duration(t),this.unloadSound(t),Object(o.c)(this.voList,1),this._listCounter-=1):"function"==typeof this._currentVO?(Object(o.c)(this.voList,1),this._listCounter-=1):(this.voList[0]+=this.voList[1],Object(o.c)(this.voList,1),this._listCounter-=1)}else this._listCounter=0;if(this.game.off("tick",this._syncCaptionToSound),this.game.off("tick",this._updateSilence),this._captions&&this._captions.activeCaption&&this._soundInstance){var e=this._captions.activeCaption;e.lineIndex=e.lines.length}if(this._soundInstance=null,this._listCounter++,this._listCounter>=this.voList.length){var i=this._callback;this._captions&&this._captions.stop(),this._currentVO=null,this._cancelledCallback=null,this._callback=null,o.a.recycle(this.voList),this.voList=null,i&&i()}else this._currentVO=this.voList[this._listCounter],"string"==typeof this._currentVO?(this._playSound(),this.trigger("start",this._currentVO)):"function"==typeof this._currentVO?(this._currentVO(),this._onSoundFinished()):(this._timer=this._currentVO,this._currentVO=null,this.game.on("tick",this._updateSilence),this.trigger("start",null))}},{key:"_updateSilence",value:function(t){this._timer-=t.delta,this._timer<=0&&this._onSoundFinished()}},{key:"_syncCaptionToSound",value:function(t){this._soundInstance&&this._captions.update(t.delta/1e3)}},{key:"_playSound",value:function(){var t=this,e=function(){if(t._soundInstance=l.a.play(t._currentVO,t._onSoundFinished),t._soundInstance.volume=t.volume,t._captions&&(t._captions.start(t._currentVO),t.game.on("tick",t._syncCaptionToSound)),t.playQueue.length){var e=Object(o.c)(t.playQueue,0);t.play(e.idOrList,e.callback,e.cancelledCallback),e.recycle()}else for(var i=t._listCounter+1;i<t.voList.length;++i){var n=t.voList[i];if("string"==typeof n){var r=o.a.setUp({id:t._currentVO,src:t._currentVO+".{ogg,mp3}"});t.assetCache.load(r),o.a.recycle(r),t.preloadingNextSound&&t.unloadSound(t.preloadingNextSound),t.preloadingNextSound=n;break}}},i=o.a.setUp({id:this._currentVO,src:this._currentVO+".{ogg,mp3}"}),n=this._currentVO;this.currentlyLoadingAudio=!0,this.assetCache.load(i,null,(function(){t.currentlyLoadingAudio=!1,t.stoppedWhileLoading?(t.stoppedWhileLoading=!1,t.playQueue.length?e():(e(),t.stop())):n===t._currentVO?e():platypus.debug.warn("VOPlayer: Asset loading out of order.")})),o.a.recycle(i)}},{key:"stop",value:function(){if(this.currentlyLoadingAudio)this.stoppedWhileLoading=!0;else{var t=this._cancelledCallback;if(this.paused=!1,this._soundInstance&&(this._soundInstance.stop(),this.unloadSound(this._currentVO),this._soundInstance=null),this._currentVO=null,this._captions&&this._captions.activeCaption&&this._captions.stop(),this.game.off("tick",this._syncCaptionToSound),this.game.off("tick",this._updateSilence),this.voList){for(var e=this._listCounter+1;e<this.voList.length;e++)"function"==typeof this.voList[e]&&this.voList[e]();this.voList=null}this._timer=0,this._callback=null,this._cancelledCallback=null,t&&t()}}},{key:"setVolume",value:function(t){this.volume=t,this._soundInstance&&(this._soundInstance.volume=this.volume)}},{key:"setCaptionMute",value:function(t){this.captionMute=t,this._captions&&(this._captions.renderer.renderTarget.style.display=t?"none":"block")}},{key:"unloadSound",value:function(t){this.assetCache.delete(t)&&l.a.remove(t)}},{key:"destroy",value:function(){this.stop(),this.voList=null,this._currentVO=null,this._soundInstance=null,this._callback=null,this._cancelledCallback=null,this._captions=null}},{key:"playing",get:function(){return null!==this._currentVO||this._timer>0}},{key:"currentVO",get:function(){return this._currentVO}},{key:"captions",set:function(t){this._captions=t,t&&(t.selfUpdate=!1,this.setCaptionMute(this.captionMute))},get:function(){return this._captions}},{key:"currentPosition",get:function(){return this.playing?this._soundInstance?this._soundInstance.position:this._currentVO?this._timer:this.voList[this._listCounter]-this._timer:0}},{key:"currentDuration",get:function(){return this.playing?this._soundInstance?l.a.duration(this._soundInstance.alias):this._currentVO&&this._captions?this._captions.currentDuration:this.voList[this._listCounter]:0}}])&&y(i.prototype,n),r&&y(i,r),e}(u.a),S=i(14),A=i.n(S),P=i(41),C=(x=function(t,e){return Math.floor(204*t/e)},E=function(t,e){var i,n=0,r=0,s=0,a=0,h=null;return e&&(h=Object(P.a)(e,".")),e&&3===h.length?(r=parseInt(h[0],10),s=parseInt(h[1],10),a=parseInt(h[2],10)):(r=t.charCodeAt(0)||0,s=t.charCodeAt(1)||0,a=t.charCodeAt(2)||0,r-=n=Math.min(r,s,a),s-=n,a-=n),h&&o.a.recycle(h),i=Math.max(r,s,a,1),"color: #ffffff; line-height: 1.5em; border-radius: 6px; background-color: rgb("+x(r,i)+","+x(s,i)+","+x(a,i)+");"},r.utils.skipHello(),function(t){var e=t.options,i=document.getElementsByName("author"),n=i.length&&i[0].getAttribute("content")||"",s=n?"by "+n:"",a=e.name||t.name||document.title||"",h="Platypus "+platypus.version,u=e.version||"(?)",l=o.a.setUp(),c=o.a.setUp(),f=platypus.springroll,d=platypus.supports;f&&l.push("SpringRoll "+f.version),l.push("Pixi.js "+r.VERSION),"(?)"!==u&&(a+=" "+u),d.firefox||d.chrome?(console.log("%c "+a+" %c "+s,E(a,a.substr(a.lastIndexOf(" ")-a.length+1)),"line-height: 1.5em;"),l.push(h),c=function(t,e,i){var n=0,r="",s=o.a.setUp(t);for(n=0;n<i.length;n++)r=i[n],s.push(E(r,r.substr(r.lastIndexOf(" ")-r.length+1)),"line-height: 1.5em;");return s}("Using %c "+l.join(" %c %c ")+" %c ",0,l),console.log.apply(console,c),o.a.recycle(c)):console.log('--- "'+a+'" '+s+" - Using "+l.join(", ")+", and "+h+" ---"),o.a.recycle(l)});function M(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function O(t,e){return!e||"object"!==L(e)&&"function"!=typeof e?k(t):e}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function L(t){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=function(){var t=window.XMLHttpRequest,e=function e(i,n){var r=0,o="",s=0,a=function(){(s-=1)||n(i)},h=function(t,i,n){e(t[i],(function(e){t[i]=e,n(e)}))};if(i){if(Array.isArray(i)){if(s=i.length)for(r=0;r<i.length;r++)h(i,r,a);else n(i);return}if("object"===L(i)){if(i.src&&i.src.length>5&&".json"===i.src.substring(i.src.length-5).toLowerCase())e(i.src,(function(t){i.src!==t&&(i=t),n(i)}));else{for(o in i)i.hasOwnProperty(o)&&(s+=1);if(s)for(o in i)i.hasOwnProperty(o)&&h(i,o,a);else n(i)}return}if("string"==typeof i&&i.length>5&&".json"===i.substring(i.length-5).toLowerCase())return void function(e,i){var n=new t;n.open("GET",e,!0),n.responseType="text",n.onload=function(){var t=null;if(200===n.status)try{t=JSON.parse(n.responseText)}catch(t){platypus.debug.warn('Error parsing "'+e+'": '+t.message)}else platypus.debug.warn('Error opening "'+e+'": '+n.description);i(t)},n.send()}(i,(function(t){"object"===L(t)?e(t,n):n(t)}))}n(i)};return function(t){function i(t,s,a){var h;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var u=s.display||{},c=function(t,e){var i=this,s=window.devicePixelRatio||1,h=r.Ticker.shared;if(platypus.game=this,A.a.dev&&(e.debug=!0),this.settings=e,e.captions){var u=document.getElementById("captions")||function(t){var e=document.createElement("div");return e.setAttribute("id","captions"),t.parentNode.insertBefore(e,t),e}(this.canvas);this.voPlayer.captions=new n.b(e.captions,new n.e(u))}if(this.stage=new r.Container,this.renderer=new r.Renderer({width:this.canvas.width,height:this.canvas.height,view:this.canvas,transparent:!!t.transparent,antialias:!!t.antiAlias,preserveDrawingBuffer:!!t.preserveDrawingBuffer,clearBeforeRender:!!t.clearView,backgroundColor:t.backgroundColor||0,autoResize:!1}),t.aspectRatio){var l=t.aspectRatio.split("-"),c=l[0].split(":"),f=l[l.length-1].split(":"),d=c[0]/c[1],p=f[0]/f[1],g=Math.min(d,p),v=Math.max(d,p);this.scaleManager=new n.d((function(t){var e=t.width,n=t.height,r=i.renderer,o=document.getElementById("content"),a=e/g>>0,h=n*v>>0,u=n*s,l=e*s;n>a?(o.style.height=a+"px",o.style.top=((n-a)/2>>0)+"px",o.style.width="",o.style.left="",u=a*s):e>h?(o.style.width=h+"px",o.style.left=((e-h)/2>>0)+"px",o.style.height="",o.style.top="",l=h*s):(o.style.height="",o.style.top="",o.style.width="",o.style.left=""),r.resize(l,u),r.render(i.stage)}))}else this.scaleManager=new n.d((function(t){var e=t.width,n=t.height,r=i.renderer;r.resize(e*s,n*s),r.render(i.stage)}));this.scaleManager.onResize({target:window}),a&&a(this),e.hideHello||C(this),platypus.debug.general("Game config loaded.",e),window.getEntityById=function(t){return this.getEntityById(t)}.bind(this),window.getEntitiesByType=function(t){return this.getEntitiesByType(t)}.bind(this),window.getVisibleSprites=function(t,e){var i=0;if(e=e||o.a.setUp(),!(t=t||this.stage).texture&&t.visible){for(i=0;i<t.children.length;i++)window.getVisibleSprites(t.children[i],e);return e}return t.visible?(e.push(t),e):e}.bind(this),this.ticker=h,this.tickInstance=this.tick.bind(this,h,{delta:0,deltaMS:0,deltaTime:0,elapsed:0}),h.add(this.tickInstance),this.paused=!1,A.a.dev&&function(t,e){var i=document.createElement("div"),n=0;i.id="framerate",i.innerHTML="FPS: 00.000",e.parentNode.insertBefore(i,e),t.add(function(){(n+=this.deltaMS)>=1e3&&(i.innerHTML="FPS: "+this.FPS.toFixed(3),n=0)}.bind(t))}(h,this.canvas)},d=null;return h=O(this,I(i).call(this)),t?(h.options=s,s.canvasId&&(d=window.document.getElementById(s.canvasId)),d||(d=window.document.createElement("canvas"),window.document.body.appendChild(d),s.canvasId&&d.setAttribute("id",s.canvasId)),d.width=d.offsetWidth,d.height=d.offsetHeight,d.ondragstart=function(){return!1},h.canvas=d,h.voPlayer=new T(k(h),platypus.assetCache),h.voPlayer.trackSound=platypus.supports.iOS,h.sfxPlayer=new f,h.springroll=function(){var t=this,e=new n.a({features:s.features||{sfx:!0,vo:!0,music:!0,sound:!0,captions:!0}}),i=e.state;return i.pause.subscribe(function(t){t?this.paused||(this.ticker.remove(this.tickInstance),this.paused=!0,l.a.pauseAll()):this.paused&&(this.ticker.add(this.tickInstance),this.paused=!1,l.a.resumeAll())}.bind(this)),i.soundVolume.subscribe((function(){})),i.musicVolume.subscribe((function(e){e?t.triggerOnChildren("mute-music"):t.triggerOnChildren("unmute-music")})),i.voVolume.subscribe((function(t){platypus.game.voPlayer.setVolume(t)})),i.captionsMuted.subscribe((function(t){platypus.game.voPlayer.setCaptionMute(t)})),i.sfxVolume.subscribe((function(t){platypus.game.sfxPlayer.setVolume(t)})),this.storage=new g(e,s),e}.bind(k(h))(),h.layers=o.a.setUp(),h.sceneLayers=o.a.setUp(),h.loading=o.a.setUp(),h.loadingQueue=o.a.setUp(),"string"==typeof t?e(t,c.bind(k(h),u)):c.bind(k(h))(u,t),h):(platypus.debug.warn("No game definition is supplied. Game not created."),O(h))}var u,c,d;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}(i,t),u=i,(c=[{key:"tick",value:function(t,e,i){var n=this.loading;if(e.delta=e.deltaMS=t.deltaMS,e.deltaTime=i,e.elapsed+=t.deltaMS,n.length){for(var r=0;r<n.length;r++)n[r]();n.length=0}v.a.update(),this.triggerEvent("tick",e),this.triggerOnChildren("tick",e),this.renderer.render(this.stage)}},{key:"triggerOnChildren",value:function(){for(var t=this.layers,e=0;e<t.length;e++){var i;(i=t[e]).trigger.apply(i,arguments)}}},{key:"load",value:function(t,e,i,n){var r=this;this.loadingQueue.push(t),this.loading.push((function(){for(var u=Array.isArray(t)?Object(o.b)(t):o.a.setUp(t),l=o.a.setUp(),c=o.a.setUp(),f=o.a.setUp((function(e){var i=r.loadingQueue,n=i.indexOf(t);if(0===n)for(i.shift(),e();"function"==typeof i[0];){var o=i[0];i.shift(),o()}else i[n]=e})),d=function(t){var e=t?t.type||t:null,i=null;if(!e)return platypus.debug.warn("Game: A layer id or layer definition must be provided to load a layer."),null;if("string"==typeof e){if(!r.settings.entities[e])return platypus.debug.warn('Game: A layer with the id "'+e+'" has not been defined in the game settings.'),null;i=r.settings.entities[e]}else i=t;return i},p=function(t,e,i,n,r,s,u){var l=this,c=a.a.setUp(r);if(c.stage=this.stage,c.parent=this,n){var f=a.a.setUp("count",1,"release",(function(){f.count-=1,f.count||(f.recycle(),u())})),d=new h.a(n,{properties:c},(function(e){t[i]=e,f.release()}));d.unloadLayer=function(){var t=function(){0==(n-=1)&&window.setTimeout((function(){d.triggerEvent("layer-unloaded"),platypus.debug.olive("Layer unloaded: "+d.id),Object(o.c)(l.layers,l.layers.indexOf(d)),d.destroy(),platypus.assetCache.unload(e[i]),o.a.recycle(e[i])}),1)},n=1;d.triggerEvent("unload-layer",(function(){n+=1}),t),platypus.debug.olive("Layer unloading: "+d.id),t()},d.triggerEvent("layer-loaded",s,f)}},g=n?"string"==typeof n?function(t,e){t.progress=e,this.triggerOnChildren("load-progress",t)}.bind(r,a.a.setUp("id",n,"progress",0)):n:null,v=0;v<u.length;v++){var m=u[v],y=d(m),b=m&&m.type&&m.properties||null;f.push(p.bind(r,u,l,v,y,b,e)),u[v]=y,c[v]=b}!function(t,e,i,n,r,s){for(var u=o.a.setUp(),l=0;l<t.length;l++){for(var c=a.a.setUp(e[l]),f=n[l]=h.a.getAssetList(t[l],c,i),d=0;d<f.length;d++)u.push(f[d]);c.recycle()}platypus.assetCache.load(u,r,s)}(u,c,e,l,g,(function(){s.a.setUp(f,(function(){for(var t=0;t<u.length;t++){var n=u[t];r.layers.push(n),i&&r.sceneLayers.push(n),platypus.debug.olive("Layer live: "+n.id),n.triggerEvent("layer-live",e)}}))}))}))}},{key:"loadScene",value:function(t,e){var i=this.sceneLayers,n=t;if("string"==typeof n&&(n=this.settings.scenes&&this.settings.scenes[n]),n){for(n.layers&&(n=n.layers);i.length;)this.unload(i[0]);this.load(n,e,!0,"scene")}else platypus.debug.warn('Game: "'+t+'" is an invalid scene.')}},{key:"unload",value:function(t){var e,i=t;if("string"==typeof i)for(var n=0;n<this.layers.length;n++)if(this.layers[n].type===i){i=this.layers[n];break}(e=this.sceneLayers.indexOf(i))>=0&&Object(o.c)(this.sceneLayers,e),i.unloadLayer()}},{key:"getEntityById",value:function(t){var e=0,i=null;for(e=0;e<this.layers.length;e++){if(this.layers[e].id===t)return this.layers[e];if(this.layers[e].getEntityById&&(i=this.layers[e].getEntityById(t)))return i}return null}},{key:"getEntitiesByType",value:function(t){var e=0,i=null,n=o.a.setUp();for(e=0;e<this.layers.length;e++)this.layers[e].type===t&&n.push(this.layers[e]),this.layers[e].getEntitiesByType&&(i=this.layers[e].getEntitiesByType(t),Object(o.d)(n,i),o.a.recycle(i));return n}},{key:"destroy",value:function(){for(var t=this.layers,e=0;e<t.length;e++)t[e].destroy();t.recycle()}}])&&M(u.prototype,c),d&&M(u,d),i}(u.a)}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i(3),r=function(t){function e(e){void 0===e&&(e=1),t.call(this,n.M,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1}),this.alpha=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={alpha:{configurable:!0}};return i.alpha.get=function(){return this.uniforms.uAlpha},i.alpha.set=function(t){this.uniforms.uAlpha=t},Object.defineProperties(e.prototype,i),e}(n.n);
/*!
 * @pixi/filter-alpha - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */},function(t,e,i){"use strict";var n,r,o,s,a,h=i(7),u=i(0),l=i(4);e.a=(n=function(t,e){return t.time-e.time},r=function(t,e){var i=0;for(i=0;i<t.length;i++)e.push(h.a.setUp("event",t[i].event,"time",t[i].time||0,"message",t[i].message||null,"interruptable",!!t[i].interruptable));return i&&e.sort(n),e},o=function(t,e,i){var r=i.getElapsed(),o=0;for(o=0;o<t.length;o++)e.push(h.a.setUp("event",t[o].event,"time",(t[o].time||0)+r,"message",t[o].message||null,"interruptable",!!t[o].interruptable));o&&e.sort(n)},s=function(t,e,i){var n=0,r=u.a.setUp();for(n=0;n<t.length;n++)t[n].sound?(t[n].events&&r.push(o.bind(this,t[n].events,e,i)),r.push(t[n].sound)):r.push(t[n]);return r},a=function(t,e){this.playingAudio=!1,this.owner.destroyed||(this.checkTimeEvents(!0,t),this.owner.triggerEvent("sequence-complete")),u.a.recycle(e)},Object(l.a)({id:"AudioVO",properties:{audioMap:null},initialize:function(){var t="";if(this.eventList=u.a.setUp(),this.playingAudio=!1,this.player=platypus.game.voPlayer,this.audioMap)for(t in this.audioMap)this.audioMap.hasOwnProperty(t)&&this.addEventListener(t,this.playSound.bind(this,this.audioMap[t]));this.paused=!1},events:{"handle-render":function(){this.paused||this.checkTimeEvents(!1)},"play-voice-over":function(t){this.playSound(t)},"stop-audio":function(){this.player.stop(),this.player.voList=[]}},methods:{checkTimeEvents:function(t,e){var i=null,n=this.eventList,r=0,o=this.owner;if(n&&n.length)for(r=t?1/0:this.player.getElapsed();n.length&&n[0].time<=r;)i=n.shift(),t&&!e&&i.interruptable||o.trigger(i.event,i.message),i.recycle()},destroy:function(){this.playingAudio&&(this.player.stop(),this.player.voList=[]),u.a.recycle(this.eventList),this.eventList=null},playSound:function(t,e){var i=null,n=u.a.setUp(),o=this.player;"string"==typeof t?i=u.a.setUp(t):Array.isArray(t)?i=s(t,n,o):(t.events&&r(t.events,n),i=Array.isArray(t.sound)?s(t.sound,n,o):u.a.setUp(t.sound)),e&&e.events&&r(e.events,n),o.play(i,a.bind(this,!0,i),a.bind(this,!1,i)),u.a.recycle(this.eventList),this.eventList=n,this.playingAudio=!0}}}))},function(t,e,i){"use strict";var n={};(0,i(59).assign)(n,i(449),i(452),i(177)),t.exports=n},function(t,e,i){"use strict";var n,r,o=i(0),s=i(7),a=i(55),h=i(79),u=i(50),l=i(4);e.a=Object(l.a)({id:"RenderSprite",properties:{animationStates:null,animationEvents:null,spriteSheet:null,animationMap:null,mask:null,interactive:!1,offsetX:0,offsetY:0,offsetZ:0,restart:!0,mirror:!1,flip:!1,visible:!0,eventBased:!1,stateBased:!0,cache:!1,forcePlayThrough:!1,ignoreOpacity:!1,scale:1,scaleX:1,scaleY:1,localScaleX:1,localScaleY:1,skew:0,skewX:0,skewY:0},initialize:(r=function(t){this.owner.triggerEvent("animation-ended",t)},function(){var t,e="",i=null,n=a.a.formatSpriteSheet(this.spriteSheet);n===a.a.EmptySpriteSheet&&platypus.debug.warn('Entity "'+this.owner.type+'": RenderSprite sprite sheet not defined.'),t=function(t,e){var i=null,n="";if(t)return t;if(Array.isArray(e.frames)&&1===e.frames.length)return null;for(n in i={},e.animations)e.animations.hasOwnProperty(n)&&(i[n]=n);return i}(this.animationMap,n),this.stateBased=t&&this.stateBased,this.eventBased=t&&this.eventBased,t&&(e=t.default||"",i=s.a.setUp("animationEvents",this.eventBased?this.animationEvents||t:null,"animationStates",this.stateBased?this.animationStates||t:null,"forcePlayThrough",this.forcePlayThrough,"restart",this.restart,"component",this),this.owner.addComponent(new h.a(this.owner,i)),i.recycle()),this.sprite=new a.a(n,e),this.sprite.onComplete=r.bind(this),this.sprite.x=this.offsetX,this.sprite.y=this.offsetY,this.sprite.z=this.offsetZ,this.sprite.scale.x=this.localScaleX,this.sprite.scale.y=this.localScaleY,this.owner.container?this.addToContainer():(i=s.a.setUp("interactive",this.interactive,"mask",this.mask,"mirror",this.mirror,"flip",this.flip,"visible",this.visible,"cache",this.cache,"ignoreOpacity",this.ignoreOpacity,"scaleX",this.scaleX,"scaleY",this.scaleY,"skewX",this.skewX,"skewY",this.skewY),this.owner.addComponent(new u.a(this.owner,i,this.addToContainer.bind(this))),i.recycle()),n.recycleSpriteSheet()}),events:{"handle-render":function(t){this.sprite&&(this.owner.triggerEvent("update-animation",!0),this.sprite.update(t.delta))},"stop-animation":function(t){this.stopAnimation(t)},"play-animation":function(t,e,i){this.playAnimation(t,e,i)}},methods:{addToContainer:function(){var t=this.owner.container;t.addChild(this.sprite),t.reorder=!0},playAnimation:function(t,e,i){var n=this.sprite;t&&n.has(t)?n.gotoAndPlay(t,e,i):n.play()},stopAnimation:function(t){var e=this.sprite;t&&e.has(t)?e.gotoAndStop(t):e.stop()},destroy:function(){this.owner.container.removeChild(this.sprite),this.sprite.destroy(),this.sprite=null}},getAssetList:(n=function t(e,i){if(e){if("string"==typeof e)return t(i[e],i);if(e.images)return Object(o.b)(e.images)}return o.a.setUp()},function(t,e,i){var r=null,s=0,a=null,h=platypus.game.settings.spriteSheets,u=t.spriteSheet||e.spriteSheet||i&&i.spriteSheet||null;if(Array.isArray(u)){for(s=u.length,a=o.a.setUp();s--;)r=n(u[s],h),Object(o.d)(a,r),o.a.recycle(r);return a}return n(u,h)})})},function(t,e,i){var n=i(19),r=i(16).document,o=n(r)&&n(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,i){e.f=i(22)},function(t,e,i){var n=i(87)("keys"),r=i(61);t.exports=function(t){return n[t]||(n[t]=r(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){var n=i(16).document;t.exports=n&&n.documentElement},function(t,e,i){var n=i(19),r=i(18),o=function(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=i(43)(Function.call,i(46).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return o(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:o}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,i){var n=i(19),r=i(112).set;t.exports=function(t,e,i){var o,s=e.constructor;return s!==i&&"function"==typeof s&&(o=s.prototype)!==i.prototype&&n(o)&&r&&r(t,o),t}},function(t,e,i){"use strict";var n=i(45),r=i(53);t.exports=function(t){var e=String(r(this)),i="",o=n(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(i+=e);return i}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var i=Math.expm1;t.exports=!i||i(10)>22025.465794806718||i(10)<22025.465794806718||-2e-17!=i(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:i},function(t,e,i){var n=i(45),r=i(53);t.exports=function(t){return function(e,i){var o,s,a=String(r(e)),h=n(i),u=a.length;return h<0||h>=u?t?"":void 0:(o=a.charCodeAt(h))<55296||o>56319||h+1===u||(s=a.charCodeAt(h+1))<56320||s>57343?t?a.charAt(h):o:t?a.slice(h,h+2):s-56320+(o-55296<<10)+65536}}},function(t,e,i){"use strict";var n=i(62),r=i(8),o=i(34),s=i(37),a=i(73),h=i(151),u=i(71),l=i(67),c=i(22)("iterator"),f=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,i,p,g,v,m){h(i,e,p);var y,b,_,w=function(t){if(!f&&t in S)return S[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},x=e+" Iterator",E="values"==g,T=!1,S=t.prototype,A=S[c]||S["@@iterator"]||g&&S[g],P=A||w(g),C=g?E?w("entries"):P:void 0,M="Array"==e&&S.entries||A;if(M&&(_=l(M.call(new t)))!==Object.prototype&&_.next&&(u(_,x,!0),n||"function"==typeof _[c]||s(_,c,d)),E&&A&&"values"!==A.name&&(T=!0,P=function(){return A.call(this)}),n&&!m||!f&&!T&&S[c]||s(S,c,P),a[e]=P,a[x]=d,g)if(y={values:E?P:w("values"),keys:v?P:w("keys"),entries:C},m)for(b in y)b in S||o(S,b,y[b]);else r(r.P+r.F*(f||T),e,y);return y}},function(t,e,i){var n=i(121),r=i(53);t.exports=function(t,e,i){if(n(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(r(t))}},function(t,e,i){var n=i(19),r=i(52),o=i(22)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},function(t,e,i){var n=i(22)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,i){var n=i(73),r=i(22)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[r]===t)}},function(t,e,i){"use strict";var n=i(29),r=i(60);t.exports=function(t,e,i){e in t?n.f(t,e,r(0,i)):t[e]=i}},function(t,e,i){var n=i(83),r=i(22)("iterator"),o=i(73);t.exports=i(26).getIteratorMethod=function(t){if(null!=t)return t[r]||t["@@iterator"]||o[n(t)]}},function(t,e,i){"use strict";var n=i(32),r=i(64),o=i(25);t.exports=function(t){for(var e=n(this),i=o(e.length),s=arguments.length,a=r(s>1?arguments[1]:void 0,i),h=s>2?arguments[2]:void 0,u=void 0===h?i:r(h,i);u>a;)e[a++]=t;return e}},function(t,e,i){"use strict";var n=i(68),r=i(156),o=i(73),s=i(38);t.exports=i(119)(Array,"Array",(function(t,e){this._t=s(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])}),"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e,i){"use strict";var n,r,o=i(92),s=RegExp.prototype.exec,a=String.prototype.replace,h=s,u=(n=/a/,r=/b*/g,s.call(n,"a"),s.call(r,"a"),0!==n.lastIndex||0!==r.lastIndex),l=void 0!==/()??/.exec("")[1];(u||l)&&(h=function(t){var e,i,n,r,h=this;return l&&(i=new RegExp("^"+h.source+"$(?!\\s)",o.call(h))),u&&(e=h.lastIndex),n=s.call(h,t),u&&n&&(h.lastIndex=h.global?n.index+n[0].length:e),l&&n&&n.length>1&&a.call(n[0],i,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)})),n}),t.exports=h},function(t,e,i){"use strict";var n=i(118)(!0);t.exports=function(t,e,i){return e+(i?n(t,e).length:1)}},function(t,e,i){var n,r,o,s=i(43),a=i(145),h=i(111),u=i(107),l=i(16),c=l.process,f=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,g=l.Dispatch,v=0,m={},y=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},b=function(t){y.call(t.data)};f&&d||(f=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return m[++v]=function(){a("function"==typeof t?t:Function(t),e)},n(v),v},d=function(t){delete m[t]},"process"==i(52)(c)?n=function(t){c.nextTick(s(y,t,1))}:g&&g.now?n=function(t){g.now(s(y,t,1))}:p?(o=(r=new p).port2,r.port1.onmessage=b,n=s(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(t){l.postMessage(t+"","*")},l.addEventListener("message",b,!1)):n="onreadystatechange"in u("script")?function(t){h.appendChild(u("script")).onreadystatechange=function(){h.removeChild(this),y.call(t)}}:function(t){setTimeout(s(y,t,1),0)}),t.exports={set:f,clear:d}},function(t,e,i){"use strict";var n=i(16),r=i(28),o=i(62),s=i(98),a=i(37),h=i(76),u=i(17),l=i(75),c=i(45),f=i(25),d=i(164),p=i(66).f,g=i(29).f,v=i(126),m=i(71),y=n.ArrayBuffer,b=n.DataView,_=n.Math,w=n.RangeError,x=n.Infinity,E=y,T=_.abs,S=_.pow,A=_.floor,P=_.log,C=_.LN2,M=r?"_b":"buffer",O=r?"_l":"byteLength",I=r?"_o":"byteOffset";function k(t,e,i){var n,r,o,s=new Array(i),a=8*i-e-1,h=(1<<a)-1,u=h>>1,l=23===e?S(2,-24)-S(2,-77):0,c=0,f=t<0||0===t&&1/t<0?1:0;for((t=T(t))!=t||t===x?(r=t!=t?1:0,n=h):(n=A(P(t)/C),t*(o=S(2,-n))<1&&(n--,o*=2),(t+=n+u>=1?l/o:l*S(2,1-u))*o>=2&&(n++,o/=2),n+u>=h?(r=0,n=h):n+u>=1?(r=(t*o-1)*S(2,e),n+=u):(r=t*S(2,u-1)*S(2,e),n=0));e>=8;s[c++]=255&r,r/=256,e-=8);for(n=n<<e|r,a+=e;a>0;s[c++]=255&n,n/=256,a-=8);return s[--c]|=128*f,s}function R(t,e,i){var n,r=8*i-e-1,o=(1<<r)-1,s=o>>1,a=r-7,h=i-1,u=t[h--],l=127&u;for(u>>=7;a>0;l=256*l+t[h],h--,a-=8);for(n=l&(1<<-a)-1,l>>=-a,a+=e;a>0;n=256*n+t[h],h--,a-=8);if(0===l)l=1-s;else{if(l===o)return n?NaN:u?-x:x;n+=S(2,e),l-=s}return(u?-1:1)*n*S(2,l-e)}function L(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function D(t){return[255&t]}function F(t){return[255&t,t>>8&255]}function N(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function U(t){return k(t,52,8)}function B(t){return k(t,23,4)}function j(t,e,i){g(t.prototype,e,{get:function(){return this[i]}})}function X(t,e,i,n){var r=d(+i);if(r+e>t[O])throw w("Wrong index!");var o=t[M]._b,s=r+t[I],a=o.slice(s,s+e);return n?a:a.reverse()}function V(t,e,i,n,r,o){var s=d(+i);if(s+e>t[O])throw w("Wrong index!");for(var a=t[M]._b,h=s+t[I],u=n(+r),l=0;l<e;l++)a[h+l]=u[o?l:e-l-1]}if(s.ABV){if(!u((function(){y(1)}))||!u((function(){new y(-1)}))||u((function(){return new y,new y(1.5),new y(NaN),"ArrayBuffer"!=y.name}))){for(var z,Y=(y=function(t){return l(this,y),new E(d(t))}).prototype=E.prototype,W=p(E),G=0;W.length>G;)(z=W[G++])in y||a(y,z,E[z]);o||(Y.constructor=y)}var H=new b(new y(2)),q=b.prototype.setInt8;H.setInt8(0,2147483648),H.setInt8(1,2147483649),!H.getInt8(0)&&H.getInt8(1)||h(b.prototype,{setInt8:function(t,e){q.call(this,t,e<<24>>24)},setUint8:function(t,e){q.call(this,t,e<<24>>24)}},!0)}else y=function(t){l(this,y,"ArrayBuffer");var e=d(t);this._b=v.call(new Array(e),0),this[O]=e},b=function(t,e,i){l(this,b,"DataView"),l(t,y,"DataView");var n=t[O],r=c(e);if(r<0||r>n)throw w("Wrong offset!");if(r+(i=void 0===i?n-r:f(i))>n)throw w("Wrong length!");this[M]=t,this[I]=r,this[O]=i},r&&(j(y,"byteLength","_l"),j(b,"buffer","_b"),j(b,"byteLength","_l"),j(b,"byteOffset","_o")),h(b.prototype,{getInt8:function(t){return X(this,1,t)[0]<<24>>24},getUint8:function(t){return X(this,1,t)[0]},getInt16:function(t){var e=X(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=X(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return L(X(this,4,t,arguments[1]))},getUint32:function(t){return L(X(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return R(X(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return R(X(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){V(this,1,t,D,e)},setUint8:function(t,e){V(this,1,t,D,e)},setInt16:function(t,e){V(this,2,t,F,e,arguments[2])},setUint16:function(t,e){V(this,2,t,F,e,arguments[2])},setInt32:function(t,e){V(this,4,t,N,e,arguments[2])},setUint32:function(t,e){V(this,4,t,N,e,arguments[2])},setFloat32:function(t,e){V(this,4,t,B,e,arguments[2])},setFloat64:function(t,e){V(this,8,t,U,e,arguments[2])}});m(y,"ArrayBuffer"),m(b,"DataView"),a(b.prototype,s.VIEW,!0),e.ArrayBuffer=y,e.DataView=b},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){t.exports=!i(169)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,i){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,i){"use strict";t.exports=function(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=i.parser[e.strictMode?"strict":"loose"].exec(t),r={},o=14;o--;)r[i.key[o]]=n[o]||"";return r[i.q.name]={},r[i.key[12]].replace(i.q.parser,(function(t,e,n){e&&(r[i.q.name][e]=n)})),r}},function(t,e,i){t.exports=!i(28)&&!i(17)((function(){return 7!=Object.defineProperty(i(107)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,i){var n=i(16),r=i(26),o=i(62),s=i(108),a=i(29).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e,i){var n=i(36),r=i(38),o=i(88)(!1),s=i(109)("IE_PROTO");t.exports=function(t,e){var i,a=r(t),h=0,u=[];for(i in a)i!=s&&n(a,i)&&u.push(i);for(;e.length>h;)n(a,i=e[h++])&&(~o(u,i)||u.push(i));return u}},function(t,e,i){var n=i(29),r=i(18),o=i(63);t.exports=i(28)?Object.defineProperties:function(t,e){r(t);for(var i,s=o(e),a=s.length,h=0;a>h;)n.f(t,i=s[h++],e[i]);return t}},function(t,e,i){var n=i(38),r=i(66).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return r(t)}catch(t){return s.slice()}}(t):r(n(t))}},function(t,e,i){"use strict";var n=i(28),r=i(63),o=i(89),s=i(82),a=i(32),h=i(81),u=Object.assign;t.exports=!u||i(17)((function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach((function(t){e[t]=t})),7!=u({},t)[i]||Object.keys(u({},e)).join("")!=n}))?function(t,e){for(var i=a(t),u=arguments.length,l=1,c=o.f,f=s.f;u>l;)for(var d,p=h(arguments[l++]),g=c?r(p).concat(c(p)):r(p),v=g.length,m=0;v>m;)d=g[m++],n&&!f.call(p,d)||(i[d]=p[d]);return i}:u},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,i){"use strict";var n=i(44),r=i(19),o=i(145),s=[].slice,a={},h=function(t,e,i){if(!(e in a)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";a[e]=Function("F,a","return new F("+n.join(",")+")")}return a[e](t,i)};t.exports=Function.bind||function(t){var e=n(this),i=s.call(arguments,1),a=function(){var n=i.concat(s.call(arguments));return this instanceof a?h(e,n.length,n):o(e,n,t)};return r(e.prototype)&&(a.prototype=e.prototype),a}},function(t,e){t.exports=function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},function(t,e,i){var n=i(16).parseInt,r=i(72).trim,o=i(113),s=/^[-+]?0[xX]/;t.exports=8!==n(o+"08")||22!==n(o+"0x16")?function(t,e){var i=r(String(t),3);return n(i,e>>>0||(s.test(i)?16:10))}:n},function(t,e,i){var n=i(16).parseFloat,r=i(72).trim;t.exports=1/n(i(113)+"-0")!=-1/0?function(t){var e=r(String(t),3),i=n(e);return 0===i&&"-"==e.charAt(0)?-0:i}:n},function(t,e,i){var n=i(52);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=n(t))throw TypeError(e);return+t}},function(t,e,i){var n=i(19),r=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&r(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,i){"use strict";var n=i(65),r=i(60),o=i(71),s={};i(37)(s,i(22)("iterator"),(function(){return this})),t.exports=function(t,e,i){t.prototype=n(s,{next:r(1,i)}),o(t,e+" Iterator")}},function(t,e,i){var n=i(18);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(e){var o=t.return;throw void 0!==o&&n(o.call(t)),e}}},function(t,e,i){var n=i(346);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,i){var n=i(44),r=i(32),o=i(81),s=i(25);t.exports=function(t,e,i,a,h){n(e);var u=r(t),l=o(u),c=s(u.length),f=h?c-1:0,d=h?-1:1;if(i<2)for(;;){if(f in l){a=l[f],f+=d;break}if(f+=d,h?f<0:c<=f)throw TypeError("Reduce of empty array with no initial value")}for(;h?f>=0:c>f;f+=d)f in l&&(a=e(a,l[f],f,u));return a}},function(t,e,i){"use strict";var n=i(32),r=i(64),o=i(25);t.exports=[].copyWithin||function(t,e){var i=n(this),s=o(i.length),a=r(t,s),h=r(e,s),u=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===u?s:r(u,s))-h,s-a),c=1;for(h<a&&a<h+l&&(c=-1,h+=l-1,a+=l-1);l-- >0;)h in i?i[a]=i[h]:delete i[a],a+=c,h+=c;return i}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){"use strict";var n=i(128);i(8)({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},function(t,e,i){i(28)&&"g"!=/./g.flags&&i(29).f(RegExp.prototype,"flags",{configurable:!0,get:i(92)})},function(t,e,i){"use strict";var n,r,o,s,a=i(62),h=i(16),u=i(43),l=i(83),c=i(8),f=i(19),d=i(44),p=i(75),g=i(95),v=i(84),m=i(130).set,y=i(366)(),b=i(160),_=i(367),w=i(96),x=i(161),E=h.TypeError,T=h.process,S=T&&T.versions,A=S&&S.v8||"",P=h.Promise,C="process"==l(T),M=function(){},O=r=b.f,I=!!function(){try{var t=P.resolve(1),e=(t.constructor={})[i(22)("species")]=function(t){t(M,M)};return(C||"function"==typeof PromiseRejectionEvent)&&t.then(M)instanceof e&&0!==A.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),k=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},R=function(t,e){if(!t._n){t._n=!0;var i=t._c;y((function(){for(var n=t._v,r=1==t._s,o=0,s=function(e){var i,o,s,a=r?e.ok:e.fail,h=e.resolve,u=e.reject,l=e.domain;try{a?(r||(2==t._h&&F(t),t._h=1),!0===a?i=n:(l&&l.enter(),i=a(n),l&&(l.exit(),s=!0)),i===e.promise?u(E("Promise-chain cycle")):(o=k(i))?o.call(i,h,u):h(i)):u(n)}catch(t){l&&!s&&l.exit(),u(t)}};i.length>o;)s(i[o++]);t._c=[],t._n=!1,e&&!t._h&&L(t)}))}},L=function(t){m.call(h,(function(){var e,i,n,r=t._v,o=D(t);if(o&&(e=_((function(){C?T.emit("unhandledRejection",r,t):(i=h.onunhandledrejection)?i({promise:t,reason:r}):(n=h.console)&&n.error&&n.error("Unhandled promise rejection",r)})),t._h=C||D(t)?2:1),t._a=void 0,o&&e.e)throw e.v}))},D=function(t){return 1!==t._h&&0===(t._a||t._c).length},F=function(t){m.call(h,(function(){var e;C?T.emit("rejectionHandled",t):(e=h.onrejectionhandled)&&e({promise:t,reason:t._v})}))},N=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),R(e,!0))},U=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw E("Promise can't be resolved itself");(e=k(t))?y((function(){var n={_w:i,_d:!1};try{e.call(t,u(U,n,1),u(N,n,1))}catch(t){N.call(n,t)}})):(i._v=t,i._s=1,R(i,!1))}catch(t){N.call({_w:i,_d:!1},t)}}};I||(P=function(t){p(this,P,"Promise","_h"),d(t),n.call(this);try{t(u(U,this,1),u(N,this,1))}catch(t){N.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=i(76)(P.prototype,{then:function(t,e){var i=O(v(this,P));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=C?T.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&R(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new n;this.promise=t,this.resolve=u(U,t,1),this.reject=u(N,t,1)},b.f=O=function(t){return t===P||t===s?new o(t):r(t)}),c(c.G+c.W+c.F*!I,{Promise:P}),i(71)(P,"Promise"),i(74)("Promise"),s=i(26).Promise,c(c.S+c.F*!I,"Promise",{reject:function(t){var e=O(this);return(0,e.reject)(t),e.promise}}),c(c.S+c.F*(a||!I),"Promise",{resolve:function(t){return x(a&&this===s?P:this,t)}}),c(c.S+c.F*!(I&&i(91)((function(t){P.all(t).catch(M)}))),"Promise",{all:function(t){var e=this,i=O(e),n=i.resolve,r=i.reject,o=_((function(){var i=[],o=0,s=1;g(t,!1,(function(t){var a=o++,h=!1;i.push(void 0),s++,e.resolve(t).then((function(t){h||(h=!0,i[a]=t,--s||n(i))}),r)})),--s||n(i)}));return o.e&&r(o.v),i.promise},race:function(t){var e=this,i=O(e),n=i.reject,r=_((function(){g(t,!1,(function(t){e.resolve(t).then(i.resolve,n)}))}));return r.e&&n(r.v),i.promise}})},function(t,e,i){"use strict";var n=i(44);function r(t){var e,i;this.promise=new t((function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n})),this.resolve=n(e),this.reject=n(i)}t.exports.f=function(t){return new r(t)}},function(t,e,i){var n=i(18),r=i(19),o=i(160);t.exports=function(t,e){if(n(t),r(e)&&e.constructor===t)return e;var i=o.f(t);return(0,i.resolve)(e),i.promise}},function(t,e,i){"use strict";var n=i(29).f,r=i(65),o=i(76),s=i(43),a=i(75),h=i(95),u=i(119),l=i(156),c=i(74),f=i(28),d=i(58).fastKey,p=i(69),g=f?"_s":"size",v=function(t,e){var i,n=d(e);if("F"!==n)return t._i[n];for(i=t._f;i;i=i.n)if(i.k==e)return i};t.exports={getConstructor:function(t,e,i,u){var l=t((function(t,n){a(t,l,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[g]=0,null!=n&&h(n,i,t[u],t)}));return o(l.prototype,{clear:function(){for(var t=p(this,e),i=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete i[n.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var i=p(this,e),n=v(i,t);if(n){var r=n.n,o=n.p;delete i._i[n.i],n.r=!0,o&&(o.n=r),r&&(r.p=o),i._f==n&&(i._f=r),i._l==n&&(i._l=o),i[g]--}return!!n},forEach:function(t){p(this,e);for(var i,n=s(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(n(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!v(p(this,e),t)}}),f&&n(l.prototype,"size",{get:function(){return p(this,e)[g]}}),l},def:function(t,e,i){var n,r,o=v(t,e);return o?o.v=i:(t._l=o={i:r=d(e,!0),k:e,v:i,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[g]++,"F"!==r&&(t._i[r]=o)),t},getEntry:v,setStrong:function(t,e,i){u(t,e,(function(t,i){this._t=p(t,e),this._k=i,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?l(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,l(1))}),i?"entries":"values",!i,!0),c(e)}}},function(t,e,i){"use strict";var n=i(76),r=i(58).getWeak,o=i(18),s=i(19),a=i(75),h=i(95),u=i(48),l=i(36),c=i(69),f=u(5),d=u(6),p=0,g=function(t){return t._l||(t._l=new v)},v=function(){this.a=[]},m=function(t,e){return f(t.a,(function(t){return t[0]===e}))};v.prototype={get:function(t){var e=m(this,t);if(e)return e[1]},has:function(t){return!!m(this,t)},set:function(t,e){var i=m(this,t);i?i[1]=e:this.a.push([t,e])},delete:function(t){var e=d(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,i,o){var u=t((function(t,n){a(t,u,e,"_i"),t._t=e,t._i=p++,t._l=void 0,null!=n&&h(n,i,t[o],t)}));return n(u.prototype,{delete:function(t){if(!s(t))return!1;var i=r(t);return!0===i?g(c(this,e)).delete(t):i&&l(i,this._i)&&delete i[this._i]},has:function(t){if(!s(t))return!1;var i=r(t);return!0===i?g(c(this,e)).has(t):i&&l(i,this._i)}}),u},def:function(t,e,i){var n=r(o(e),!0);return!0===n?g(t).set(e,i):n[t._i]=i,t},ufstore:g}},function(t,e,i){var n=i(45),r=i(25);t.exports=function(t){if(void 0===t)return 0;var e=n(t),i=r(e);if(e!==i)throw RangeError("Wrong length!");return i}},function(t,e,i){var n=i(66),r=i(89),o=i(18),s=i(16).Reflect;t.exports=s&&s.ownKeys||function(t){var e=n.f(o(t)),i=r.f;return i?e.concat(i(t)):e}},function(t,e,i){var n=i(25),r=i(115),o=i(53);t.exports=function(t,e,i,s){var a=String(o(t)),h=a.length,u=void 0===i?" ":String(i),l=n(e);if(l<=h||""==u)return a;var c=l-h,f=r.call(u,Math.ceil(c/u.length));return f.length>c&&(f=f.slice(0,c)),s?f+a:a+f}},function(t,e,i){var n=i(28),r=i(63),o=i(38),s=i(82).f;t.exports=function(t){return function(e){for(var i,a=o(e),h=r(a),u=h.length,l=0,c=[];u>l;)i=h[l++],n&&!s.call(a,i)||c.push(t?[i,a[i]]:a[i]);return c}}},function(t,e){var i=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=i)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var i,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var h,u=[],l=!1,c=-1;function f(){l&&h&&(l=!1,h.length?u=h.concat(u):c=-1,u.length&&d())}function d(){if(!l){var t=a(f);l=!0;for(var e=u.length;e;){for(h=u,u=[];++c<e;)h&&h[c].run();c=-1,e=u.length}h=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new p(t,e)),1!==u.length||l||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){"use strict";var n=Object.prototype.hasOwnProperty,r="~";function o(){}function s(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function a(t,e,i,n,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new s(i,n||t,o),h=r?r+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function h(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function u(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(r=!1)),u.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)n.call(t,e)&&i.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},u.prototype.listeners=function(t){var e=r?r+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,o=i.length,s=new Array(o);n<o;n++)s[n]=i[n].fn;return s},u.prototype.listenerCount=function(t){var e=r?r+t:t,i=this._events[e];return i?i.fn?1:i.length:0},u.prototype.emit=function(t,e,i,n,o,s){var a=r?r+t:t;if(!this._events[a])return!1;var h,u,l=this._events[a],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,i),!0;case 4:return l.fn.call(l.context,e,i,n),!0;case 5:return l.fn.call(l.context,e,i,n,o),!0;case 6:return l.fn.call(l.context,e,i,n,o,s),!0}for(u=1,h=new Array(c-1);u<c;u++)h[u-1]=arguments[u];l.fn.apply(l.context,h)}else{var f,d=l.length;for(u=0;u<d;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),c){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,i);break;case 4:l[u].fn.call(l[u].context,e,i,n);break;default:if(!h)for(f=1,h=new Array(c-1);f<c;f++)h[f-1]=arguments[f];l[u].fn.apply(l[u].context,h)}}return!0},u.prototype.on=function(t,e,i){return a(this,t,e,i,!1)},u.prototype.once=function(t,e,i){return a(this,t,e,i,!0)},u.prototype.removeListener=function(t,e,i,n){var o=r?r+t:t;if(!this._events[o])return this;if(!e)return h(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||n&&!s.once||i&&s.context!==i||h(this,o);else{for(var a=0,u=[],l=s.length;a<l;a++)(s[a].fn!==e||n&&!s[a].once||i&&s[a].context!==i)&&u.push(s[a]);u.length?this._events[o]=1===u.length?u[0]:u:h(this,o)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&h(this,e)):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,t.exports=u},function(t,e,i){"use strict";function n(t,e,i){i=i||2;var n,a,h,u,l,d,p,v=e&&e.length,m=v?e[0]*i:t.length,y=r(t,0,m,i,!0),b=[];if(!y||y.next===y.prev)return b;if(v&&(y=function(t,e,i,n){var s,a,h,u,l,d=[];for(s=0,a=e.length;s<a;s++)h=e[s]*n,u=s<a-1?e[s+1]*n:t.length,(l=r(t,h,u,n,!1))===l.next&&(l.steiner=!0),d.push(g(l));for(d.sort(c),s=0;s<d.length;s++)f(d[s],i),i=o(i,i.next);return i}(t,e,y,i)),t.length>80*i){n=h=t[0],a=u=t[1];for(var _=i;_<m;_+=i)(l=t[_])<n&&(n=l),(d=t[_+1])<a&&(a=d),l>h&&(h=l),d>u&&(u=d);p=0!==(p=Math.max(h-n,u-a))?1/p:0}return s(y,b,i,n,a,p),b}function r(t,e,i,n,r){var o,s;if(r===C(t,e,i,n)>0)for(o=e;o<i;o+=n)s=S(o,t[o],t[o+1],s);else for(o=i-n;o>=e;o-=n)s=S(o,t[o],t[o+1],s);return s&&b(s,s.next)&&(A(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!b(n,n.next)&&0!==y(n.prev,n,n.next))n=n.next;else{if(A(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function s(t,e,i,n,r,c,f){if(t){!f&&c&&function(t,e,i,n){var r=t;do{null===r.z&&(r.z=p(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,o,s,a,h,u=1;do{for(i=t,t=null,o=null,s=0;i;){for(s++,n=i,a=0,e=0;e<u&&(a++,n=n.nextZ);e++);for(h=u;a>0||h>0&&n;)0!==a&&(0===h||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,h--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=n}o.nextZ=null,u*=2}while(s>1)}(r)}(t,n,r,c);for(var d,g,v=t;t.prev!==t.next;)if(d=t.prev,g=t.next,c?h(t,n,r,c):a(t))e.push(d.i/i),e.push(t.i/i),e.push(g.i/i),A(t),t=g.next,v=g.next;else if((t=g)===v){f?1===f?s(t=u(o(t),e,i),e,i,n,r,c,2):2===f&&l(t,e,i,n,r,c):s(o(t),e,i,n,r,c,1);break}}}function a(t){var e=t.prev,i=t,n=t.next;if(y(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(v(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&y(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function h(t,e,i,n){var r=t.prev,o=t,s=t.next;if(y(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,h=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,u=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,l=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,c=p(a,h,e,i,n),f=p(u,l,e,i,n),d=t.prevZ,g=t.nextZ;d&&d.z>=c&&g&&g.z<=f;){if(d!==t.prev&&d!==t.next&&v(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,g!==t.prev&&g!==t.next&&v(r.x,r.y,o.x,o.y,s.x,s.y,g.x,g.y)&&y(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&v(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;g&&g.z<=f;){if(g!==t.prev&&g!==t.next&&v(r.x,r.y,o.x,o.y,s.x,s.y,g.x,g.y)&&y(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function u(t,e,i){var n=t;do{var r=n.prev,s=n.next.next;!b(r,s)&&_(r,n,n.next,s)&&E(r,s)&&E(s,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(s.i/i),A(n),A(n.next),n=t=s),n=n.next}while(n!==t);return o(n)}function l(t,e,i,n,r,a){var h=t;do{for(var u=h.next.next;u!==h.prev;){if(h.i!==u.i&&m(h,u)){var l=T(h,u);return h=o(h,h.next),l=o(l,l.next),s(h,e,i,n,r,a),void s(l,e,i,n,r,a)}u=u.next}h=h.next}while(h!==t)}function c(t,e){return t.x-e.x}function f(t,e){if(e=function(t,e){var i,n=e,r=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s){if(s=a,a===r){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===s)return i;var h,u=i,l=i.x,c=i.y,f=1/0;n=i;do{r>=n.x&&n.x>=l&&r!==n.x&&v(o<c?r:s,o,l,c,o<c?s:r,o,n.x,n.y)&&(h=Math.abs(o-n.y)/(r-n.x),E(n,t)&&(h<f||h===f&&(n.x>i.x||n.x===i.x&&d(i,n)))&&(i=n,f=h)),n=n.next}while(n!==u);return i}(t,e)){var i=T(e,t);o(i,i.next)}}function d(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function p(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function v(t,e,i,n,r,o,s,a){return(r-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(n-a)-(i-s)*(e-a)>=0&&(i-s)*(o-a)-(r-s)*(n-a)>=0}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&_(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(E(t,e)&&E(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||b(t,e)&&y(t.prev,t,t.next)>0&&y(e.prev,e,e.next)>0)}function y(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function b(t,e){return t.x===e.x&&t.y===e.y}function _(t,e,i,n){var r=x(y(t,e,i)),o=x(y(t,e,n)),s=x(y(i,n,t)),a=x(y(i,n,e));return r!==o&&s!==a||(!(0!==r||!w(t,i,e))||(!(0!==o||!w(t,n,e))||(!(0!==s||!w(i,t,n))||!(0!==a||!w(i,e,n)))))}function w(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function x(t){return t>0?1:t<0?-1:0}function E(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function T(t,e){var i=new P(t.i,t.x,t.y),n=new P(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function S(t,e,i,n){var r=new P(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function A(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(t,e,i,n){for(var r=0,o=e,s=i-n;o<i;o+=n)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}t.exports=n,t.exports.default=n,n.deviation=function(t,e,i,n){var r=e&&e.length,o=r?e[0]*i:t.length,s=Math.abs(C(t,0,o,i));if(r)for(var a=0,h=e.length;a<h;a++){var u=e[a]*i,l=a<h-1?e[a+1]*i:t.length;s-=Math.abs(C(t,u,l,i))}var c=0;for(a=0;a<n.length;a+=3){var f=n[a]*i,d=n[a+1]*i,p=n[a+2]*i;c+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)i.vertices.push(t[r][o][s]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}},function(t,e,i){"use strict";t.exports=function(t,e,i,n){for(var r=65535&t|0,o=t>>>16&65535|0,s=0;0!==i;){i-=s=i>2e3?2e3:i;do{o=o+(r=r+e[n++]|0)|0}while(--s);r%=65521,o%=65521}return r|o<<16|0}},function(t,e,i){"use strict";var n=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();t.exports=function(t,e,i,r){var o=n,s=r+i;t^=-1;for(var a=r;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}},function(t,e,i){"use strict";var n=i(59),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new n.Buf8(256),a=0;a<256;a++)s[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function h(t,e){if(e<65534&&(t.subarray&&o||!t.subarray&&r))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var i="",s=0;s<e;s++)i+=String.fromCharCode(t[s]);return i}s[254]=s[254]=1,e.string2buf=function(t){var e,i,r,o,s,a=t.length,h=0;for(o=0;o<a;o++)55296==(64512&(i=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(r-56320),o++),h+=i<128?1:i<2048?2:i<65536?3:4;for(e=new n.Buf8(h),s=0,o=0;s<h;o++)55296==(64512&(i=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(r-56320),o++),i<128?e[s++]=i:i<2048?(e[s++]=192|i>>>6,e[s++]=128|63&i):i<65536?(e[s++]=224|i>>>12,e[s++]=128|i>>>6&63,e[s++]=128|63&i):(e[s++]=240|i>>>18,e[s++]=128|i>>>12&63,e[s++]=128|i>>>6&63,e[s++]=128|63&i);return e},e.buf2binstring=function(t){return h(t,t.length)},e.binstring2buf=function(t){for(var e=new n.Buf8(t.length),i=0,r=e.length;i<r;i++)e[i]=t.charCodeAt(i);return e},e.buf2string=function(t,e){var i,n,r,o,a=e||t.length,u=new Array(2*a);for(n=0,i=0;i<a;)if((r=t[i++])<128)u[n++]=r;else if((o=s[r])>4)u[n++]=65533,i+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&i<a;)r=r<<6|63&t[i++],o--;o>1?u[n++]=65533:r<65536?u[n++]=r:(r-=65536,u[n++]=55296|r>>10&1023,u[n++]=56320|1023&r)}return h(u,n)},e.utf8border=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;i>=0&&128==(192&t[i]);)i--;return i<0?e:0===i?e:i+s[t[i]]>e?i:e}},function(t,e,i){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,i){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,i){(function(n,r){var o;!function(n){var s=n.Promise,a=s&&"resolve"in s&&"reject"in s&&"all"in s&&"race"in s&&function(){var t;return new s((function(e){t=e})),"function"==typeof t}();e?(e.Promise=a?s:E,e.Polyfill=E):void 0===(o=function(){return a?s:E}.call(e,i,e,t))||(t.exports=o);var h=function(){};function u(t){return"[object Array]"===Object.prototype.toString.call(t)}var l,c=void 0!==r?r:setTimeout,f=[];function d(){for(var t=0;t<f.length;t++)f[t][0](f[t][1]);f=[],l=!1}function p(t,e){f.push([t,e]),l||(l=!0,c(d,0))}function g(t){var e=t.owner,i=e.state_,n=e.data_,r=t[i],o=t.then;if("function"==typeof r){i="fulfilled";try{n=r(n)}catch(t){b(o,t)}}v(o,n)||("fulfilled"===i&&m(o,n),"rejected"===i&&b(o,n))}function v(t,e){var i;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"==typeof e)){var n=e.then;if("function"==typeof n)return n.call(e,(function(n){i||(i=!0,e!==n?m(t,n):y(t,n))}),(function(e){i||(i=!0,b(t,e))})),!0}}catch(e){return i||b(t,e),!0}return!1}function m(t,e){t!==e&&v(t,e)||y(t,e)}function y(t,e){"pending"===t.state_&&(t.state_="sealed",t.data_=e,p(w,t))}function b(t,e){"pending"===t.state_&&(t.state_="sealed",t.data_=e,p(x,t))}function _(t){var e=t.then_;t.then_=void 0;for(var i=0;i<e.length;i++)g(e[i])}function w(t){t.state_="fulfilled",_(t)}function x(t){t.state_="rejected",_(t)}function E(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof E==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(t,e){function i(t){b(e,t)}try{t((function(t){m(e,t)}),i)}catch(t){i(t)}}(t,this)}E.prototype={constructor:E,state_:"pending",then_:null,data_:void 0,then:function(t,e){var i={owner:this,then:new this.constructor(h),fulfilled:t,rejected:e};return"fulfilled"===this.state_||"rejected"===this.state_?p(g,i):this.then_.push(i),i.then},catch:function(t){return this.then(null,t)}},E.all=function(t){if(!u(t))throw new TypeError("You must pass an array to Promise.all().");return new this((function(e,i){var n=[],r=0;function o(t){return r++,function(i){n[t]=i,--r||e(n)}}for(var s,a=0;a<t.length;a++)(s=t[a])&&"function"==typeof s.then?s.then(o(a),i):n[a]=s;r||e(n)}))},E.race=function(t){if(!u(t))throw new TypeError("You must pass an array to Promise.race().");return new this((function(e,i){for(var n,r=0;r<t.length;r++)(n=t[r])&&"function"==typeof n.then?n.then(e,i):e(n)}))},E.resolve=function(t){return t&&"object"==typeof t&&t.constructor===this?t:new this((function(e){e(t)}))},E.reject=function(t){return new this((function(e,i){i(t)}))}}("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this)}).call(this,i(77),i(440).setImmediate)},function(t,e,i){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,a,h=s(t),u=1;u<arguments.length;u++){for(var l in i=Object(arguments[u]))r.call(i,l)&&(h[l]=i[l]);if(n){a=n(i);for(var c=0;c<a.length;c++)o.call(i,a[c])&&(h[a[c]]=i[a[c]])}}return h}},function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(7),r=i(21),o=i(9),s=i(0);function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var h=/^(?:\w+:\/{2}\w+(?:\.\w+)*\/?)?(?:[\/.]*?(?:[^?]+)?\/)?(?:([^\/?]+)\.(\w+|{\w+(?:,\w+)*}))(?:\?\S*)?$/,u={png:"images",jpg:"images",jpeg:"images",ogg:"audio",mp3:"audio",m4a:"audio",wav:"audio","{ogg,mp3}":"audio"},l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.assets=r.a.setUp(),this.counts=n.a.setUp()}var e,i,l;return e=t,(i=[{key:"delete",value:function(t){var e=this.assets;if(e.has(t)){var i=this.counts;if(i[t]-=1,0===i[t]){var n=e.get(t);n&&n.src&&(n.src=""),e.delete(t)}return!i[t]}return!1}},{key:"get",value:function(t){return this.assets.get(t)}},{key:"has",value:function(t){return this.assets.has(t)}},{key:"set",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.assets,r=this.counts;n.has(t)?r[t]+=i:(n.set(t,e),r[t]=i)}},{key:"load",value:function(t,e,i){for(var r,a,l,c,f=this,d=this.counts,p=s.a.setUp(),g=n.a.setUp(),v=0;v<t.length;v++){var m=(r=t[v],a=void 0,l=void 0,c=void 0,a=r.src||r,l=platypus.supports.ie?a.replace("{ogg,mp3}","mp3"):a,c=l.match(h),n.a.setUp("id",r.id||(c?c[1]:l),"src",(platypus.game.options[u[c[2].toLowerCase()]]||"")+l)),y=m.id||m.src||m;this.has(y)?d[y]+=1:g.hasOwnProperty(y)?g[y]+=1:(g[y]=1,p.push(m))}if(p.length){var b=new o.Loader,_=p.length,w=0;b.onLoad.add((function(t,i){f.set(i.name,i.data,g[i.name]),w+=1,e&&e(w/_)})),i&&b.onComplete.add(i);for(var x=0;x<_;x++){var E=p[x],T=E.id||E.src||E;b.add(T,E.src||E,E)}b.load()}else i&&setTimeout((function(){i()}),1);s.a.recycle(p)}},{key:"unload",value:function(t){for(var e=t.length;e--;)this.delete(t[e].id||t[e])}}])&&a(e.prototype,i),l&&a(e,l),t}()},function(t,e,i){"use strict";var n=i(11),r=i(4);e.a=Object(r.a)({id:"AIChaser",properties:{accelerate:!1,chasing:!0},publicProperties:{speed:.3},initialize:function(){this.target=this.owner.target||null,this.offset=n.a.setUp(0,0),this.state=this.owner.state,this.state.set("chasing",!1)},events:{load:function(){this.owner.addMover?this.direction=this.owner.addMover({vector:[this.speed,0,0],event:"chase",accelerator:this.accelerate}).vector:platypus.debug.warn('The "AIChaser" component requires a "Mover" component to function correctly.')},"handle-ai":function(){var t=null,e=!1;this.target&&this.chasing&&((t=n.a.setUp(this.offset).add(this.target.position).subtractVector(this.owner.position)).magnitude(2)&&(e=!0,this.direction.setVector(t).normalize().multiply(this.speed)),t.recycle()),e!==this.state.get("chasing")&&(this.state.set("chasing",e),this.owner.triggerEvent("chase",e))},"set-target":function(t){this.target=t,this.offset.x=0,this.offset.y=0},"set-target-offset":function(t){this.offset.x=t.x,this.offset.y=t.y},"start-chasing":function(t){t&&(this.target=t),this.chasing=!0},"stop-chasing":function(){this.chasing=!1}},methods:{destroy:function(){this.target=null,this.offset.recycle(),this.state=null}}})},function(t,e,i){"use strict";var n=i(4);e.a=Object(n.a)({id:"AIPacer",properties:{movement:"both",direction:null},initialize:function(){this.lastDirection="",this.currentDirection=this.direction||("horizontal"===this.movement?"left":"up")},events:{"handle-ai":function(){this.currentDirection!==this.lastDirection&&(this.lastDirection=this.currentDirection,this.owner.triggerEvent("stop"),this.owner.triggerEvent("go-"+this.currentDirection))},"turn-around":function(t){"both"!==this.movement&&"horizontal"!==this.movement||(t.x>0?this.currentDirection="left":t.x<0&&(this.currentDirection="right")),"both"!==this.movement&&"vertical"!==this.movement||(t.y>0?this.currentDirection="up":t.y<0&&(this.currentDirection="down"))}}})},function(t,e,i){"use strict";var n=i(0),r=i(30),o=i(42),s=i(4),a=o.a.Tween,h={};e.a=Object(s.a)({id:"AudioMusic",properties:{tracks:null},initialize:function(){var t=n.a.setUp(),e=1e3;for(var i in h)h.hasOwnProperty(i)&&t.push(i);if(this.tracks)for(var o in this.tracks)if(this.tracks.hasOwnProperty(o)){var s=t.indexOf(o),u=this.tracks[o],l=h[o],c=null;s>=0?Object(n.c)(t,s):l=h[o]=r.a.play(u.sound||u,{loop:1/0,volume:u.fade?0:"number"==typeof u.volume?u.volume:1}),u.fade&&((c=new a(l)).to({volume:"number"==typeof u.volume?u.volume:1},u.fade),c.start(),e=u.fade)}t.forEach((function(t){var i=h[t],n=new a(i);n.to({volume:0},e),n.onComplete((function(){i.stop()})),delete h[t],n.start()}))},events:{"mute-music":function(){for(var t in h)h.hasOwnProperty(t)&&(h[t].muted=!0)},"unmute-music":function(){for(var t in h)h.hasOwnProperty(t)&&(h[t].muted=!1)}},methods:{destroy:function(){}},getAssetList:function(t,e,i){var r="",o=n.a.setUp(),s=t.tracks||e.tracks||i.tracks;if(s)for(r in s)if(s.hasOwnProperty(r)){var a=(s[r].sound||s[r])+".{ogg,mp3}";-1===o.indexOf(a)&&o.push(a)}return o}})},function(t,e,i){"use strict";var n,r,o,s,a,h,u,l,c,f,d,p=i(0),g=i(7),v=i(30),m=i(27),y=i(4);e.a=(n=0,r=0,o=0,s=0,a=1,h=0,u=!1,l=1,c=!1,f=function(t){var e="",i=null,f=function(t){t.audio&&!this.owner.destroyed&&this.activeAudioClips&&(this.removeClip(t.audio),this.owner.triggerEvent("clip-complete")),t.recycle()};return"string"==typeof t?(e=t,i={}):(e=t.sound,i={interrupt:t.interrupt,delay:t.delay,offset:t.offset,loop:t.loop,volume:t.volume,pan:t.pan,startTime:t.startTime,duration:t.duration,muted:t.muted,speed:t.speed,playthrough:t.playthrough}),function(t){var d=null;t=t||i,(d=g.a.setUp("interrupt",t.interrupt||i.interrupt||n,"delay",t.delay||i.delay||r,"loop",t.loop||i.loop||s,"offset",t.offset||i.offset||o,"volume",void 0!==t.volume?t.volume:void 0!==i.volume?i.volume:a,"pan",t.pan||i.pan||h,"muted",t.muted||i.muted||u,"speed",void 0!==t.speed?t.speed:void 0!==i.speed?i.speed:l,"playthrough",t.playthrough||i.playthrough||c)).audio=this.player.play(e,d),d.pan&&(d.audio.filters=[new v.a.filters.StereoFilter(d.audio.pan)]),d.volume&&(d.audio.volume=d.volume),d.speed&&(d.audio.speed=d.speed),d.playthrough&&-1!==d.loop?d.audio.playthrough=!0:d.audio.playthrough=!1,d.audio.on("end",f.bind(this,d)),d.audio.soundId=e,this.activeAudioClips.push(d.audio),"playFailed"===d.audio.playState&&v.a.on("fileload",(function t(i){i.id===e&&(d.audio.play(d),v.a.off("fileload",t))}))}},d=function(t,e,i,n){var r=n.includes(t.states);r!==t.playing&&(r?i():this.stopAudio(e,this.forcePlaythrough),t.playing=r)},Object(y.a)({id:"AudioSFX",properties:{audioMap:null,forcePlayThrough:!0,eventBased:!0,stateBased:!1},initialize:function(){var t="",e=null,i=null;if(this.activeAudioClips=p.a.setUp(),this.state=this.owner.state,this.stateChange=!1,this.player=platypus.game.sfxPlayer,this.audioMap)for(t in this.stateBased&&(this.checkStates=p.a.setUp()),this.audioMap)this.audioMap.hasOwnProperty(t)&&(i=this.audioMap[t],e=f(i),i.sound&&(i=i.sound),this.eventBased&&this.addEventListener(t,e),this.stateBased&&this.addStateCheck(t,i,e));this.paused=!1},events:{"handle-render":function(){var t=0,e=null,i=this.state;if(!this.paused&&this.stateBased&&this.stateChange){for(t=(e=this.checkStates).length;t--;)e[t].check(i);this.stateChange=!1}},"state-changed":function(){this.stateChange=!0},"toggle-mute":function(t){this.handleClip(t,(function(t){t&&(t.unmuted?(t.volume=t.unmuted,delete t.unmuted):(t.unmuted=t.volume,t.volume=0))}))},"stop-audio":function(t){t?"string"==typeof t?this.stopAudio(t):this.stopAudio(t.audioId||!1,t.playthrough||!1):this.stopAudio()},"mute-audio":function(t){this.handleClip(t,(function(t){t&&(t.unmuted=t.volume,t.volume=0)}))},"unmute-audio":function(t){this.handleClip(t,(function(t){t&&(t.volume=t.unmuted,delete t.unmuted)}))},"pause-audio":function(t){this.handleClip(t,(function(t){t&&t.pause()}))},"unpause-audio":function(t){this.handleClip(t,(function(t){t&&t.unpause()}))},"set-pan":function(t,e){var i=e||"",n=function(t,e){e&&(e.pan=t)};e?this.handleClip(i,n.bind(null,t)):this.getAllClips(n.bind(null,t))},"set-volume":function(t,e){var i=e||"",n=function(t,e){e&&(e.volume=t)};e?this.handleClip(i,n.bind(null,t)):this.getAllClips(n.bind(null,t))},"set-speed":function(t,e){var i=e||"",n=function(t,e){e&&(e.speed=t)};e?this.handleClip(i,n.bind(null,t)):this.getAllClips(n.bind(null,t))}},methods:{handleClip:function(t,e){"string"==typeof t?this.getClipById(t,e):this.getAllClips(e)},getClipById:function(t,e){var i=0,n=this.activeAudioClips;for(i=0;i<n.length;i++)if(n[i].soundId===t)return e&&e(n[i]),n[i];return e&&e(null),null},getAllClips:function(t){var e=0,i=this.activeAudioClips;if(t)for(e=0;e<i.length;e++)t(i[e]);return i},stopAudio:function(t,e){var i=this.activeAudioClips,n=i.length;if(t)for(;n--;)i[n].soundId===t&&(i[n].playthrough||e||(this.player.stop(i[n]),Object(p.c)(i,n)));else{for(;n--;)e||i[n].playthrough||this.player.stop(i[n]);i.length=0}},removeClip:function(t){var e=this.activeAudioClips.indexOf(t);e>=0&&Object(p.c)(this.activeAudioClips,e)},addStateCheck:function(t,e,i){var n=m.a.setUp(t),r=g.a.setUp("states",n,"playing",!1);r.check=d.bind(this,r,e,i.bind(this)),this.checkStates.push(r)},destroy:function(){var t=this.checkStates,e=null,i=0;if(this.stopAudio(),p.a.recycle(this.activeAudioClips),this.activeAudioClips=null,this.state=null,t){for(i=t.length;i--;)(e=t[i]).states.recycle(),e.recycle();p.a.recycle(t),this.checkStates=null}}},getAssetList:function(t,e,i){var n="",r=p.a.setUp(),o=t.audioMap||e.audioMap||i.audioMap;for(n in o)if(o.hasOwnProperty(n)){var s=(o[n].sound||o[n])+".{ogg,mp3}";-1===r.indexOf(s)&&r.push(s)}return r}}))},function(t,e,i){"use strict";var n,r,o,s,a,h,u,l,c,f,d,p,g,v,m,y,b,_=i(12),w=i(9),x=i(7),E=i(42),T=i(11),S=i(4);e.a=(g=window.devicePixelRatio||1,v=function(t,e,i,n){var r=_.a.setUp(n.x+e,n.y+i,n.width,n.height),o=t.x,s=t.y;return r.top<t.top?s-=t.top-r.top:r.bottom>t.bottom&&(s+=t.bottom-r.bottom),r.left<t.left?o-=t.left-r.left:r.right>t.right&&(o+=t.right-r.right),r.recycle(),this.move(o,s,0)},m=function(){return!1},y=function(t){return t.clientX?t.clientX:t.touches&&t.touches[0]&&t.touches[0].clientX?t.touches[0].clientX:0},b=function(t){return t.clientY?t.clientY:t.touches&&t.touches[0]&&t.touches[0].clientY?t.touches[0].clientY:0},Object(S.a)({id:"Camera",properties:{width:0,height:0,mode:"static",overflow:!1,stretch:!1,threshold:1,rotate:!1,x:0,y:0},publicProperties:{canvas:null,transitionX:400,transitionY:600,transitionAngle:600},initialize:function(t){var e=_.a.setUp(this.x,this.y,this.width,this.height),i=x.a.setUp("viewport",e,"orientation",t.orientation||0);this.viewport=_.a.setUp(0,0,0,0),this.worldCamera=i,this.worldDimensions=_.a.setUp(),this.message=x.a.setUp("viewport",_.a.setUp(),"scaleX",0,"scaleY",0,"orientation",0,"stationary",!1,"world",this.worldDimensions),this.cameraLoadedMessage=x.a.setUp("viewport",this.message.viewport,"world",this.worldDimensions),this.worldIsLoaded=!1,this.following=null,this.state="static","pan"===this.mode&&(this.state="mouse-pan"),this.boundingBox=_.a.setUp(e.x,e.y,e.width/2,e.height/2),this.lastX=e.x,this.lastY=e.y,this.lastOrientation=i.orientation,this.forwardX=0,this.forwardY=0,this.forwardAngle=0,this.averageOffsetX=0,this.averageOffsetY=0,this.averageOffsetAngle=0,this.offsetX=0,this.offsetY=0,this.offsetAngle=0,this.forwardFollower=x.a.setUp("x",this.lastX,"y",this.lastY,"orientation",this.lastOrientation),this.lastFollow=x.a.setUp("entity",null,"mode",null,"offsetX",0,"offsetY",0,"begin",0),this.xMagnitude=0,this.yMagnitude=0,this.xWaveLength=0,this.yWaveLength=0,this.xShakeTime=0,this.yShakeTime=0,this.shakeTime=0,this.shakeIncrementor=0,this.direction=!0,this.stationary=!1,this.viewportUpdate=!1,this.owner.container?this.parentContainer=this.owner.container:this.owner.stage?(this.canvas=this.canvas||platypus.game.canvas,this.parentContainer=this.owner.stage,this.owner.width=this.canvas.width,this.owner.height=this.canvas.height):platypus.debug.warn("Camera: There appears to be no Container on this entity for the camera to display."),this.container=new w.Container,this.container.visible=!1,this.parentContainer.addChild(this.container),this.movedCamera=!1},events:{load:function(){this.resize()},"render-world":function(t){this.world=t.world,this.container.addChild(this.world)},"child-entity-added":function(t){this.viewportUpdate=!0,this.worldIsLoaded&&t.triggerEvent("camera-loaded",this.cameraLoadedMessage)},"child-entity-updated":function(t){this.viewportUpdate=!0,this.worldIsLoaded&&t.triggerEvent("camera-update",this.message)},"world-loaded":function(t){this.message.viewport.set(this.worldCamera.viewport),this.worldDimensions.set(t.world),this.worldIsLoaded=!0,t.camera&&this.follow(t.camera),this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("camera-loaded",this.cameraLoadedMessage),this.updateMovementMethods()},pointerdown:function(t){var e=this.worldCamera.viewport;"mouse-pan"===this.state&&(this.mouseVector||(this.mouseVector=T.a.setUp(),this.mouseWorldOrigin=T.a.setUp()),this.mouse=this.mouseVector,this.mouse.x=y(t.event),this.mouse.y=b(t.event),this.mouseWorldOrigin.x=e.x,this.mouseWorldOrigin.y=e.y,t.pixiEvent.stopPropagation())},pressmove:function(t){this.mouse&&this.move(this.mouseWorldOrigin.x+(this.mouse.x-y(t.event))*g/this.world.transform.worldTransform.a,this.mouseWorldOrigin.y+(this.mouse.y-b(t.event))*g/this.world.transform.worldTransform.d)&&(this.viewportUpdate=!0,this.movedCamera=!0,t.pixiEvent.stopPropagation())},pressup:function(t){this.mouse&&(this.mouse=null,this.movedCamera&&(this.movedCamera=!1,t.pixiEvent.stopPropagation()))},tick:function(t){var e=this.message,i=e.viewport,n=this.worldCamera;"following"===this.state&&this.followingFunction(this.following,t.delta)&&(this.viewportUpdate=!0),this.canvas&&(this.owner.width=this.canvas.width,this.owner.height=this.canvas.height),this.owner.width===this.lastWidth&&this.owner.height===this.lastHeight||(this.resize(),this.lastWidth=this.owner.width,this.lastHeight=this.owner.height),this.viewportUpdate?(this.viewportUpdate=!1,this.stationary=!1,e.stationary=!1,i.set(n.viewport),this.shakeIncrementor<this.shakeTime&&(this.viewportUpdate=!0,this.shakeIncrementor+=t.delta,this.shakeIncrementor=Math.min(this.shakeIncrementor,this.shakeTime),this.shakeIncrementor<this.xShakeTime&&i.moveX(i.x+Math.sin(this.shakeIncrementor/this.xWaveLength*(2*Math.PI))*this.xMagnitude),this.shakeIncrementor<this.yShakeTime&&i.moveY(i.y+Math.sin(this.shakeIncrementor/this.yWaveLength*(2*Math.PI))*this.yMagnitude)),e.scaleX=this.windowPerWorldUnitWidth,e.scaleY=this.windowPerWorldUnitHeight,e.orientation=n.orientation,this.world.setTransform(-i.x,-i.y,1,1,0),this.container.setTransform(i.halfWidth*e.scaleX,i.halfHeight*e.scaleY,e.scaleX,e.scaleY,e.orientation),this.container.visible=!0,this.owner.triggerEvent("camera-update",e),this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("camera-update",e)):this.stationary||(this.stationary=!0,e.stationary=!0,this.owner.triggerEvent("camera-update",e),this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("camera-update",e)),this.lastFollow.begin&&this.lastFollow.begin<Date.now()&&this.follow(this.lastFollow)},"resize-camera":function(t){this.width=t.width,this.height=t.height,this.resize()},relocate:(d=function(t){this.move(t.x,t.y)&&(this.viewportUpdate=!0)},p=function(){this.recycle()},function(t){var e=null,i=this.worldCamera.viewport;t.time?(e=T.a.setUp(i.x,i.y),new E.a.Tween(e).to({x:t.x,y:t.y},t.time).easing(t.ease).onUpdate(d.bind(this,e)).onStop(p.bind(e)).start()):this.move(t.x,t.y)&&(this.viewportUpdate=!0)}),follow:function(t){this.follow(t)},shake:function(t){var e=t||{},i=e.xMagnitude||0,n=e.yMagnitude||0,r=e.xFrequency||0,o=e.yFrequency||0,s=e.time||0;this.viewportUpdate=!0,this.shakeIncrementor=0,this.xMagnitude=i,this.yMagnitude=n,0===r?(this.xWaveLength=1,this.xShakeTime=0):(this.xWaveLength=1e3/r,this.xShakeTime=Math.ceil(s/this.xWaveLength)*this.xWaveLength),0===o?(this.yWaveLength=1,this.yShakeTime=0):(this.yWaveLength=1e3/o,this.yShakeTime=Math.ceil(s/this.yWaveLength)*this.yWaveLength),this.shakeTime=Math.max(this.xShakeTime,this.yShakeTime)}},methods:{follow:function(t){switch(t.time?(this.lastFollow.begin||(this.lastFollow.entity=this.following,this.lastFollow.mode=this.mode,this.lastFollow.offsetX=this.offsetX,this.lastFollow.offsetY=this.offsetY),this.lastFollow.begin=Date.now()+t.time):this.lastFollow.begin&&(this.lastFollow.begin=0),this.mode=t.mode,t.mode){case"locked":this.state="following",this.following=t.entity,this.followingFunction=this.lockedFollow,this.offsetX=t.offsetX||0,this.offsetY=t.offsetY||0,this.offsetAngle=t.offsetAngle||0;break;case"forward":this.state="following",this.followFocused=!1,this.following=t.entity,this.lastX=t.entity.x-t.offsetX||0,this.lastY=t.entity.y-t.offsetY||0,this.lastOrientation=t.entity.orientation||0,this.forwardX=t.movementX||.1*this.transitionX,this.forwardY=t.movementY||.1*this.transitionY,this.averageOffsetX=0,this.averageOffsetY=0,this.averageOffsetAngle=0,this.offsetX=t.offsetX||0,this.offsetY=t.offsetY||0,this.offsetAngle=t.offsetAngle||0,this.followingFunction=this.forwardFollow;break;case"bounding":this.state="following",this.following=t.entity,this.offsetX=t.offsetX||0,this.offsetY=t.offsetY||0,this.offsetAngle=t.offsetAngle||0,this.boundingBox.setAll(t.x,t.y,t.width,t.height),this.followingFunction=this.boundingFollow;break;case"anchor-bound":this.state="following",this.following=t.entity,this.followingFunction=v.bind(this,t.anchorAABB,t.offsetX||0,t.offsetY||0);break;case"pan":this.state="mouse-pan",this.following=null,this.followingFunction=null,t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.move(t.x,t.y,t.orientation||0),this.viewportUpdate=!0);break;default:this.state="static",this.following=null,this.followingFunction=null,t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.move(t.x,t.y,t.orientation||0),this.viewportUpdate=!0)}t.begin&&(t.begin=0)},move:function(t,e,i){var n=this.moveX(t);return n=this.moveY(e)||n,this.rotate&&(n=this.reorient(i||0)||n),n},moveX:m,moveY:m,reorient:function(t){var e=this.worldCamera;return Math.abs(e.orientation-t)>1e-4&&(e.orientation=t,!0)},lockedFollow:(l=Math.min,c=function(t,e,i){return i*e+(1-i)*t},f=function(t,e){return t?l(e/t,1):1},function(t,e){var i=this.worldCamera,n=i.viewport,r=c(n.x,t.x+this.offsetX,f(this.transitionX,e)),o=c(n.y,t.y+this.offsetY,f(this.transitionY,e));return this.rotate?this.move(r,o,c(i.orientation,-(t.orientation||0),f(this.transitionAngle,e))):this.move(r,o,0)}),forwardFollow:function(t,e){var i=this.forwardFollower,n=!1,r=15/e,o=this.worldCamera,s=o.viewport,a=t.x+this.offsetX,h=t.y+this.offsetY,u=(t.orientation||0)+this.offsetAngle;return this.followFocused&&this.lastX===a&&this.lastY===h?this.lockedFollow(i,e):(this.averageOffsetX*=.9,this.averageOffsetY*=.9,this.averageOffsetX+=(1-.9)*(a-this.lastX)*r,this.averageOffsetY+=(1-.9)*(h-this.lastY)*r,Math.abs(this.averageOffsetX)>s.width/(2*this.forwardX)&&(this.averageOffsetX=0),Math.abs(this.averageOffsetY)>s.height/(2*this.forwardY)&&(this.averageOffsetY=0),this.rotate&&(this.averageOffsetAngle*=.9,this.averageOffsetAngle+=(1-.9)*(u-this.lastOrientation)*r,Math.abs(this.averageOffsetAngle)>o.orientation/(2*this.forwardAngle)&&(this.averageOffsetAngle=0)),i.x=this.averageOffsetX*this.forwardX+a,i.y=this.averageOffsetY*this.forwardY+h,i.orientation=this.averageOffsetAngle*this.forwardAngle+u,this.lastX=a,this.lastY=h,this.lastOrientation=u,n=this.lockedFollow(i,e),this.followFocused||n||(this.followFocused=!0),n)},boundingFollow:function(t,e){var i=0,n=0,r=this.transitionX?Math.min(e/this.transitionX,1):1,o=1-r,s=this.transitionY?Math.min(e/this.transitionY,1):1,a=1-s,h=this.worldCamera.viewport;return this.boundingBox.move(h.x,h.y),t.x>this.boundingBox.right?i=t.x-this.boundingBox.halfWidth:t.x<this.boundingBox.left&&(i=t.x+this.boundingBox.halfWidth),t.y>this.boundingBox.bottom?n=t.y-this.boundingBox.halfHeight:t.y<this.boundingBox.top&&(n=t.y+this.boundingBox.halfHeight),0!==i&&(i=this.moveX(r*i+o*h.x)),0!==n&&(n=this.moveY(s*n+a*h.y)),i||n},resize:function(){var t=this.width/this.height,e=this.owner.width/this.owner.height,i=this.worldCamera.viewport;this.viewport.setAll(this.owner.width/2,this.owner.height/2,this.owner.width,this.owner.height),this.stretch||(e>t?this.overflow?i.resize(this.height*e,this.height):this.viewport.resize(this.viewport.height*t,this.viewport.height):this.overflow?i.resize(this.width,this.width/e):this.viewport.resize(this.viewport.width,this.viewport.width/t)),this.worldPerWindowUnitWidth=i.width/this.viewport.width,this.worldPerWindowUnitHeight=i.height/this.viewport.height,this.windowPerWorldUnitWidth=this.viewport.width/i.width,this.windowPerWorldUnitHeight=this.viewport.height/i.height,this.container.setTransform(this.viewport.x-this.viewport.halfWidth,this.viewport.y-this.viewport.halfHeight),this.viewportUpdate=!0,this.updateMovementMethods()},updateMovementMethods:(n=m,r=function(){var t=this.worldDimensions;return this.worldCamera.viewport.moveX(t.width/2+t.left),this.moveX=n,!0},o=function(){var t=this.worldDimensions;return this.worldCamera.viewport.moveY(t.height/2+t.top),this.moveY=n,!0},s=function(t){var e=this.worldCamera.viewport,i=this.worldDimensions,n=i.width,r=i.left;return Math.abs(e.x-t)>this.threshold&&(t+e.halfWidth>n+r?e.moveX(n-e.halfWidth+r):t<e.halfWidth+r?e.moveX(e.halfWidth+r):e.moveX(t),!0)},a=function(t){var e=this.worldCamera.viewport,i=this.worldDimensions,n=i.height,r=i.top;return Math.abs(e.y-t)>this.threshold&&(t+e.halfHeight>n+r?e.moveY(n-e.halfHeight+r):t<e.halfHeight+r?e.moveY(e.halfHeight+r):e.moveY(t),!0)},h=function(t){var e=this.worldCamera.viewport;return Math.abs(e.x-t)>this.threshold&&(e.moveX(t),!0)},u=function(t){var e=this.worldCamera.viewport;return Math.abs(e.y-t)>this.threshold&&(e.moveY(t),!0)},function(){var t=this.threshold,e=this.worldCamera.viewport,i=this.worldDimensions,n=i.width,l=i.height;n?n<e.width?this.moveX=r:this.moveX=s:this.moveX=h,l?l<e.height?this.moveY=o:this.moveY=a:this.moveY=u,this.threshold=-1,this.moveX(e.x),this.moveY(e.y),this.threshold=t}),destroy:function(){this.parentContainer.removeChild(this.container),this.parentContainer=null,this.container=null,this.mouseVector&&(this.mouseVector.recycle(),this.mouseWorldOrigin.recycle()),this.boundingBox.recycle(),this.viewport.recycle(),this.worldCamera.viewport.recycle(),this.worldCamera.recycle(),this.message.viewport.recycle(),this.message.recycle(),this.cameraLoadedMessage.recycle(),this.worldDimensions.recycle(),this.forwardFollower.recycle(),this.lastFollow.recycle()}},publicMethods:{isOnCanvas:function(t){var e=this.canvas;return!t||!(t.x+t.width<0||t.x>e.width||t.y+t.height<0||t.y>e.height)},windowToWorld:function(t,e,i){var n=i||T.a.setUp();return n.x=t.x*this.worldPerWindowUnitWidth,n.y=t.y*this.worldPerWindowUnitHeight,!1!==e&&(n.x+=this.worldCamera.viewport.left,n.y+=this.worldCamera.viewport.top),n},worldToWindow:function(t,e,i){var n=i||T.a.setUp();return n.x=t.x*this.windowPerWorldUnitWidth,n.y=t.y*this.windowPerWorldUnitHeight,!1!==e&&(n.x+=this.viewport.x,n.y+=this.viewport.y),n}}}))},function(t,e,i){"use strict";var n=i(7),r=i(4);e.a=Object(r.a)({id:"CameraFollowMe",properties:{camera:{},mode:"forward",pause:!1},initialize:function(){this.pauseGame=this.pause&&this.camera.time?{time:this.camera.time}:null,this.camera=n.a.setUp("entity",this.owner,"mode",this.camera.mode||this.mode,"top",this.camera.top,"left",this.camera.left,"offsetX",this.camera.offsetX,"offsetY",this.camera.offsetY,"width",this.camera.width,"height",this.camera.height,"time",this.camera.time)},events:{"follow-me":function(t){var e=null;e=t?n.a.setUp("entity",this.owner,"mode",t.mode||this.camera.mode,"top",t.top||this.camera.top,"left",t.left||this.camera.left,"offsetX",t.offsetX||this.camera.offsetX,"offsetY",t.offsetY||this.camera.offsetY,"width",t.width||this.camera.width,"height",t.height||this.camera.height,"time",t.time||this.camera.time):n.a.setUp(this.camera),this.pauseGame&&(this.owner.parent.triggerEvent("pause-logic",this.pauseGame),this.owner.parent.triggerEvent("pause-render",this.pauseGame)),this.owner.parent.triggerEvent("follow",e),e.recycle()}},methods:{destroy:function(){this.camera.recycle()}}})},function(t,e,i){"use strict";var n,r,o,s,a,h,u,l,c,f,d,p,g,v,m,y,b,_,w,x,E=i(0),T=i(12),S=i(70),A=i(7),P=i(21),C=i(11),M=i(4),O=(_=function(t,e,i,n){n.myType===e&&n.hitType===i&&this.owner.triggerEvent(t,n)},w=function(t,e,i,n){var r=0;if(n.myType===e&&n.hitType===i)for(r=0;r<t.length;r++)this.owner.triggerEvent(t[r],n)},x=function(t,e,i,n){var r=n.x,o=n.y;!n.entity||r||o||(r=n.entity.x-this.owner.x,o=n.entity.y-this.owner.y),n.myType===e&&n.hitType===i&&(o>0&&t.bottom?this.owner.trigger(t.bottom,n):o<0&&t.top&&this.owner.trigger(t.top,n),r>0&&t.right?this.owner.trigger(t.right,n):r<0&&t.left&&this.owner.trigger(t.left,n),t.all&&this.owner.trigger(t.all,n))},function(t,e,i){return"string"==typeof e?_.bind(t,e,t.collisionType,i):Array.isArray(e)?w.bind(t,e,t.collisionType,i):x.bind(t,e,t.collisionType,i)}),I=(o=function(t,e,i){var n=e.keys,r=n.length,o=null;if(i)return(o=e.get(i))?o.getAABB():null;for(t.reset();r--;)t.include(e.get(n[r]).getAABB());return t},s=function(t,e){var i=t.get(e);return i?i.getPreviousAABB():null},a=function(t,e){var i=t.get(e);return i?i.getShapes():null},h=function(t,e){var i=t.get(e);return i?i.getPrevShapes():null},u=function(t,e,i){for(var n=t.keys,r=n.length;r--;)t.get(n[r]).prepareCollision(e,i)},n=function(t,e,i){var n=0,r=e.stuck;r&&(n=t.magnitude(),e.thatShape.owner&&Math.abs(r)>1&&(r*=.05),(!n||n>Math.abs(r))&&(e.vector.x&&(t.x=r,t.y=0),e.vector.y&&(t.x=0,t.y=r),i.stuckWith&&i.stuckWith.recycle(),i.stuckWith=C.a.setUp(e.thatShape.x,e.thatShape.y)))},r={position:null,unstick:null},l=function(t,e){var i=e.xData[0],o=e.yData[0],s=r,a=null;i&&(a=C.a.setUp(0,0,0),n(a,i,this)),o&&(a=a||C.a.setUp(0,0,0),n(a,o,this)),s.position=t,s.unstick=a,this.triggerEvent("relocate-entity",s),a&&a.recycle()},c=function(t,e){for(var i=t.keys,n=i.length;n--;)t.get(i[n]).movePreviousX(e)},f=function(){return this.collisionTypes},d=function(){return this.solidCollisionMap},p=function(){return this.getAABB()},g=function(){return this.getPreviousAABB()},v=function(){return this.getShapes()},m=function(){return this.getPrevShapes()},y=function(t,e){this.prepareCollision(t,e)},b=function(t){this.movePreviousX(t)},function(t,e){var i=e.collisionFunctions;i||(i=e.collisionFunctions=P.a.setUp(),e.aabb=T.a.setUp(),e.getAABB=o.bind(e,e.aabb,i),e.getPreviousAABB=s.bind(e,i),e.getShapes=a.bind(e,i),e.getPrevShapes=h.bind(e,i),e.prepareCollision=u.bind(e,i),e.relocateEntity=l.bind(e),e.movePreviousX=c.bind(e,i),e.getCollisionTypes=f.bind(e),e.getSolidCollisions=d.bind(e)),i.set(t.collisionType,A.a.setUp("getAABB",p.bind(t),"getPreviousAABB",g.bind(t),"getShapes",v.bind(t),"getPrevShapes",m.bind(t),"prepareCollision",y.bind(t),"movePreviousX",b.bind(t)))}),k=function(t,e,i,n,r){for(var o=t.length;o--;){var s=t[o];s.updateAll(e[o]),s.update(n,r),i.include(s.aABB)}this.updateShapes=R},R=function(t,e,i,n,r){for(var o=t.length;o--;){var s=t[o];s.update(n,r),i.include(s.aABB)}};e.a=Object(M.a)({id:"CollisionBasic",properties:{collisionType:"none",shapeType:"rectangle",ignoreOrientation:!1,regX:null,regY:null,width:0,height:0,radius:0,softCollisions:null,solidCollisions:null,margin:0,shapes:null},publicProperties:{collisionDirty:!1,immobile:!1,bullet:!1,jumpThrough:!1},initialize:function(t){var e=null,i=0,n="",r=null,o=this.regX,s=this.regY,a=this.width,h=this.height,u=this.radius,l=0,c=0,f=0,d=0;for("number"==typeof this.margin?(l=this.margin,c=this.margin,f=this.margin,d=this.margin):(l=this.margin.left||0,c=this.margin.right||0,f=this.margin.top||0,d=this.margin.bottom||0),null===o&&(o=this.regX=a/2),null===s&&(s=this.regY=h/2),C.a.assign(this.owner,"position","x","y","z"),C.a.assign(this.owner,"previousPosition","previousX","previousY","previousZ"),this.owner.previousX=this.owner.previousX||this.owner.x,this.owner.previousY=this.owner.previousY||this.owner.y,this.aabb=T.a.setUp(),this.prevAABB=T.a.setUp(),this.shapes?r=this.shapes:"circle"===this.shapeType?(u=u||((a||0)+(h||0))/4,r=[{regX:(isNaN(o)?u:o)-(c-l)/2,regY:(isNaN(s)?u:s)-(d-f)/2,radius:u,type:this.shapeType}]):r=[{regX:(isNaN(o)?(a||0)/2:o)+l,regY:(isNaN(s)?(h||0)/2:s)+f,points:t.points,width:(a||0)+l+c,height:(h||0)+f+d,type:this.shapeType}],this.owner.collisionTypes=this.owner.collisionTypes||E.a.setUp(),this.owner.collisionTypes.push(this.collisionType),this.shapes=E.a.setUp(),this.prevShapes=E.a.setUp(),this.entities=null,i=0;i<r.length;i++)this.shapes.push(S.a.setUp(this.owner,r[i],this.collisionType)),this.prevShapes.push(S.a.setUp(this.owner,r[i],this.collisionType)),this.prevAABB.include(this.prevShapes[i].aABB),this.aabb.include(this.shapes[i].aABB);if(this.updateShapes=R,I(this,this.owner),this.owner.solidCollisionMap=this.owner.solidCollisionMap||P.a.setUp(),e=this.owner.solidCollisionMap.set(this.collisionType,E.a.setUp()),this.solidCollisions)for(n in this.solidCollisions)this.solidCollisions.hasOwnProperty(n)&&(e.push(n),this.solidCollisions[n]&&this.addEventListener("hit-by-"+n,O(this,this.solidCollisions[n],"solid")));if(this.owner.softCollisionMap=this.owner.softCollisionMap||P.a.setUp(),e=this.owner.softCollisionMap.set(this.collisionType,E.a.setUp()),this.softCollisions)for(n in this.softCollisions)this.softCollisions.hasOwnProperty(n)&&(e.push(n),this.softCollisions[n]&&this.addEventListener("hit-by-"+n,O(this,this.softCollisions[n],"soft")));this.active=!0,this.stuck=!1},events:{"collide-on":function(t){var e=this.owner,i=this.collisionType,n=e.collisionTypes;this.active||"string"==typeof t&&t!==i||(e.parent.triggerEvent("remove-collision-entity",e),-1===n.indexOf(i)&&n.push(i),e.parent.triggerEvent("add-collision-entity",e),this.active=!0,this.collisionDirty=!0)},"collide-off":function(t){var e=0,i=this.owner,n=i.parent,r=this.collisionType,o=i.collisionTypes;!this.active||"string"==typeof t&&t!==r||(n.triggerEvent("remove-collision-entity",i),(e=o.indexOf(r))>=0&&Object(E.c)(o,e),this.active=!1,o.length&&n.triggerEvent("add-collision-entity",i))},"relocate-entity":function(t,e){var i,n,r=t.unstick,o=0,s=0,a=this.aabb,h=this.owner,u=null,l=this.shapes,c=t.position||t;for(r&&(o=r.magnitude()),this.move&&(this.move.recycle(),this.move=null),t.relative||e?h.position.setVector(h.previousPosition).add(c):h.position.setVector(c),this.stuck&&(o>0?h.position.add(r):this.stuck=!1),i=h.x,n=h.y,a.reset(),s=l.length;s--;)(u=l[s]).update(i,n),a.include(u.aABB);h.previousPosition.setVector(h.position),o>0&&(this.stuck||(this.stuck=!0),this.move=h.stuckWith.copy().add(-i,-n).normalize())},"handle-logic":function(){this.move&&this.owner.position.add(this.move)},"orientation-updated":function(t){var e=0;if(!this.ignoreOrientation){for(e=0;e<this.shapes.length;e++)this.shapes[e].multiply(t);this.updateShapes=k,this.collisionDirty=!0}}},methods:{getAABB:function(){return this.aabb},getPreviousAABB:function(){return this.prevAABB},getShapes:function(){return this.shapes},getPrevShapes:function(){return this.prevShapes},prepareCollision:function(t,e){var i=this.shapes,n=this.prevShapes,r=this.aabb;this.owner.x=t,this.owner.y=e,this.prevShapes=i,this.shapes=n,this.prevAABB.set(r),r.reset(),this.updateShapes(n,i,r,t,e),this.collisionDirty&&(this.collisionDirty=!1)},movePreviousX:function(t){var e=0;for(this.prevAABB.moveX(t),e=0;e<this.prevShapes.length;e++)this.prevShapes[e].setXWithEntityX(t)},destroy:function(){var t=this.owner.collisionFunctions,e=this.collisionType,i=this.owner.collisionTypes?this.owner.collisionTypes.indexOf(e):-1,n=this.owner;for(n.parent.triggerEvent("remove-collision-entity",n),this.aabb.recycle(),delete this.aabb,this.prevAABB.recycle(),delete this.prevAABB,i>=0&&Object(E.c)(n.collisionTypes,i),n.collisionTypes&&(n.solidCollisionMap.has(e)&&E.a.recycle(n.solidCollisionMap.delete(e)),n.softCollisionMap.has(e)&&E.a.recycle(n.softCollisionMap.delete(e)),t.delete(e).recycle()),i=this.shapes.length;i--;)this.shapes[i].recycle(),this.prevShapes[i].recycle();E.a.recycle(this.shapes),E.a.recycle(this.prevShapes),this.shapes=null,this.prevShapes=null,this.entities=null,n.collisionTypes&&(n.collisionTypes.length?n.parent.triggerEvent("add-collision-entity",n):(t.recycle(),n.collisionFunctions=null,n.solidCollisionMap.recycle(),n.solidCollisionMap=null,n.softCollisionMap.recycle(),n.softCollisionMap=null,n.aabb.recycle(),n.aabb=null,E.a.recycle(n.collisionTypes),n.collisionTypes=null))}}})},function(t,e,i){"use strict";var n,r,o=i(4);e.a=(n=function(t,e,i){this.state.get(t)&&this.trigger(e,i)},r=function(t,e,i){this.state.get(t)||this.trigger(e,i)},Object(o.a)({id:"CollisionFilter",properties:{collisions:{},state:""},initialize:function(){var t="",e=this.collisions,i=this.state;if(e)if("!"===i[0])for(t in i=i.substring(1),e)e.hasOwnProperty(t)&&this.addEventListener(t,r.bind(this.owner,i,e[t]));else for(t in e)e.hasOwnProperty(t)&&this.addEventListener(t,n.bind(this.owner,i,e[t]))}}))},function(t,e,i){"use strict";var n=i(0),r=i(12),o=i(21),s=i(11),a=i(4);e.a=Object(a.a)({id:"CollisionGroup",initialize:function(){this.solidEntities=n.a.setUp(),this.collisionTypes=n.a.setUp(),this.shapes=n.a.setUp(),this.prevShapes=n.a.setUp(),this.terrain=null,this.aabb=r.a.setUp(this.owner.x,this.owner.y),this.prevAABB=r.a.setUp(this.owner.x,this.owner.y),this.filteredAABB=r.a.setUp(),s.a.assign(this.owner,"position","x","y","z"),s.a.assign(this.owner,"previousPosition","previousX","previousY","previousZ"),this.owner.previousX=this.owner.previousX||this.owner.x,this.owner.previousY=this.owner.previousY||this.owner.y,this.collisionGroup=this.owner.collisionGroup={getAllEntities:function(){var t=0,e=0,i=null;for(t=0;t<this.solidEntities.length;t++)(i=this.solidEntities[t])!==this.owner&&i.collisionGroup?e+=i.collisionGroup.getAllEntities():e+=1;return e}.bind(this),getSize:function(){return this.solidEntities.length}.bind(this),getCollisionTypes:function(){return this.getCollisionTypes()}.bind(this),getSolidCollisions:function(){return this.getSolidCollisions()}.bind(this),getAABB:function(t){return this.getAABB(t)}.bind(this),getPreviousAABB:function(t){return this.getPreviousAABB(t)}.bind(this),getShapes:function(t){return this.getShapes(t)}.bind(this),getPrevShapes:function(t){return this.getPrevShapes(t)}.bind(this),prepareCollision:function(t,e){return this.prepareCollision(t,e)}.bind(this),relocateEntity:function(t,e){return this.relocateEntity(t,e)}.bind(this),movePreviousX:function(t){return this.movePreviousX(t)}.bind(this),getSolidEntities:function(){return this.solidEntities}.bind(this),jumpThrough:!1}},events:{"child-entity-added":function(t){this.addCollisionEntity(t)},"add-collision-entity":function(t){this.addCollisionEntity(t)},"child-entity-removed":function(t){this.removeCollisionEntity(t)},"remove-collision-entity":function(t){this.removeCollisionEntity(t)},"relocate-entity":function(){this.owner.previousPosition.setVector(this.owner.position),this.updateAABB()}},methods:{addCollisionEntity:function(t){var e=0,i=t.collisionTypes;if(i){for(e=i.length;e--;)t.solidCollisionMap.get(i[e]).length&&!t.immobile&&(this.solidEntities[this.solidEntities.length]=t);this.updateAABB()}},removeCollisionEntity:function(t){var e=0,i=0,r=t.collisionTypes;if(r){for(i=r.length;i--;)t.solidCollisionMap.get(r[i]).length&&(e=this.solidEntities.indexOf(t))>=0&&Object(n.c)(this.solidEntities,e);this.updateAABB()}},getCollisionTypes:function(){var t=null,e=this.collisionTypes,i=this.solidEntities,r=i.length;for(e.length=0;r--;)(t=i[r])!==this.owner&&t.collisionGroup&&(t=t.collisionGroup),Object(n.d)(e,t.getCollisionTypes());return e},getSolidCollisions:function(){var t=0,e="",i=null,r=null,s=o.a.setUp(),a=null,h=0,u=null,l=null,c=!1;for(t=0;t<this.solidEntities.length;t++){for(c=!1,(r=this.solidEntities[t])!==this.owner&&r.collisionGroup&&(r=r.collisionGroup,c=!0),h=(i=(a=r.getSolidCollisions()).keys).length;h--;)e=i[h],u=s.get(e),l=a.get(e),u||(u=s.set(e,n.a.setUp())),Object(n.d)(u,l),c&&l.recycle();c&&a.recycle()}return s},getAABB:function(t){var e=0,i=this.filteredAABB,n=null,r=null,o=this.solidEntities;if(t){for(i.reset(),e=o.length;e--;)(n=o[e])!==this.owner&&n.collisionGroup&&(n=n.collisionGroup),(r=n.getAABB(t))&&i.include(r);return i}return this.aabb},getPreviousAABB:function(t){var e=0,i=this.filteredAABB,n=null,r=null,o=this.solidEntities;if(t){for(i.reset(),e=o.length;e--;)(n=o[e])!==this.owner&&n.collisionGroup&&(n=n.collisionGroup),(r=n.getPreviousAABB(t))&&i.include(r);return i}return this.prevAABB},updateAABB:function(){var t=this.aabb,e=this.solidEntities,i=null,n=e.length,r=this.owner;for(t.reset();n--;)i=e[n],t.include(i!==r&&i.getCollisionGroupAABB?i.getCollisionGroupAABB():i.getAABB())},getShapes:function(t){var e=0,i=null,r=this.shapes,o=null;for(r.length=0,e=0;e<this.solidEntities.length;e++)(i=this.solidEntities[e])!==this.owner&&i.collisionGroup&&(i=i.collisionGroup),(o=i.getShapes(t))&&Object(n.d)(r,o);return r},getPrevShapes:function(t){var e=0,i=null,r=null,o=this.prevShapes;for(o.length=0,e=0;e<this.solidEntities.length;e++)(i=this.solidEntities[e])!==this.owner&&i.collisionGroup&&(i=i.collisionGroup),(r=i.getPrevShapes(t))&&Object(n.d)(o,r);return o},prepareCollision:function(t,e){var i=0,n=null,r=0,o=0;for(i=0;i<this.solidEntities.length;i++)(n=this.solidEntities[i]).saveDX=n.x-n.previousX,n.saveDY=n.y-n.previousY,r=n.saveOX=this.owner.previousX-n.previousX,o=n.saveOY=this.owner.previousY-n.previousY,n!==this.owner&&n.collisionGroup&&(n=n.collisionGroup),n.prepareCollision(t-r,e-o)},movePreviousX:function(t){var e=null,i=0,n=0;for(n=0;n<this.solidEntities.length;n++)i=(e=this.solidEntities[n]).saveOX,e!==this.owner&&e.collisionGroup&&(e=e.collisionGroup),e.movePreviousX(t-i)},relocateEntity:function(t,e){var i=null,n=null,r=0,o=null,a=this.owner,h=this.solidEntities,u=null;for(a.saveDX-=t.x-a.previousX,a.saveDY-=t.y-a.previousY,r=(o=e.xData).length;r--;)if(o[r].thisShape.owner===a){a.saveDX=0;break}for(r=(o=e.yData).length;r--;)if(o[r].thisShape.owner===a){a.saveDY=0;break}for(r=0;r<h.length;r++)(i=n=h[r])!==a&&i.collisionGroup&&(i=i.collisionGroup),u=s.a.setUp(t.x-n.saveOX,t.y-n.saveOY,i.z),i.relocateEntity(u,e),u.recycle(),n.x+=n.saveDX,n.y+=n.saveDY,n!==a&&(n.x+=a.saveDX,n.y+=a.saveDY)},destroy:function(){n.a.recycle(this.solidEntities),n.a.recycle(this.collisionTypes),n.a.recycle(this.shapes),n.a.recycle(this.prevShapes),this.aabb.recycle(),this.prevAABB.recycle(),this.filteredAABB.recycle()}},publicMethods:{getCollisionGroupAABB:function(){return this.getAABB()},getWorldEntities:function(){return this.owner.parent.getWorldEntities()},getWorldTerrain:function(){return this.owner.parent.getWorldTerrain()}}})},function(t,e,i){"use strict";var n,r,o,s,a,h,u,l,c,f,d,p=i(12),g=i(70),v=i(7),m=i(0),y=i(4);e.a=(n=function(){return this.collisionType},r=function(t){return this.collisionTypeMap[268435455&t]||this.collisionType},o=function(t){return 0===t?t:1610612736^t},s=function(t){return 0===t?t:-1610612736^t},a=function(t){return 0===t?t:2147483648^t},h=function(t){return 0===t?t:1073741824^t},u=function(t){return 0===t?t:536870912&t?1610612736^t:-1610612736^t},l=function(t){return 0===t?t:-1073741824^t},c=function(t){return 0===t?t:536870912&t?-1610612736^t:1610612736^t},f=function(t,e,i,n,r){var o=0,s=0,a=m.a.setUp();for(s=0;s<r;s++)for(a[s]=m.a.setUp(),o=0;o<n;o++)a[s][o]=t[e+o][i+s];return a},d={diagonal:function(t,e,i,n,r){var s=f(t,e,i,n,r),a=o,h=0,u=0;for(h=0;h<n;h++)for(u=0;u<r;u++)t[e+h][i+u]=a(s[h][u]);return m.a.recycle(s,2),t},"diagonal-inverse":function(t,e,i,n,r){var o=f(t,e,i,n,r),a=s,h=0,u=0;for(h=0;h<n;h++)for(u=0;u<r;u++)t[e+n-h-1][i+r-u-1]=a(o[h][u]);return m.a.recycle(o,2),t},horizontal:function(t,e,i,n,r){var o=f(t,e,i,n,r),s=a,h=0,u=0;for(u=0;u<r;u++)for(h=0;h<n;h++)t[e+n-h-1][i+u]=s(o[u][h]);return m.a.recycle(o,2),t},vertical:function(t,e,i,n,r){var o=f(t,e,i,n,r),s=h,a=0,u=0;for(u=0;u<r;u++)for(a=0;a<n;a++)t[e+a][i+r-u-1]=s(o[u][a]);return m.a.recycle(o,2),t},"rotate-90":function(t,e,i,n,r){var o=f(t,e,i,n,r),s=u,a=0,h=0;for(h=0;h<r;h++)for(a=0;a<n;a++)t[e+r-h-1][i+a]=s(o[h][a]);return m.a.recycle(o,2),t},"rotate-180":function(t,e,i,n,r){var o=f(t,e,i,n,r),s=l,a=0,h=0;for(h=0;h<r;h++)for(a=0;a<n;a++)t[e+n-a-1][i+r-h-1]=s(o[h][a]);return m.a.recycle(o,2),t},"rotate-270":function(t,e,i,n,r){var o=f(t,e,i,n,r),s=c,a=0,h=0;for(h=0;h<r;h++)for(a=0;a<n;a++)t[e+h][i+n-a-1]=s(o[h][a]);return m.a.recycle(o,2),t},translate:function(t,e,i,n,r,o,s){var a=function(t,e,i,n,r){var o=0,s=0,a=m.a.setUp();for(s=0;s<r;s++)for(a[s]=m.a.setUp(),o=0;o<n;o++)a[s][o]=t[e+o][i+s],t[e+o][i+s]=-1;return a}(t,e,i,n,r),h=0,u=0;for(u=0;u<r;u++)for(h=0;h<n;h++)t[e+h+o][i+u+s]=a[u][h];return m.a.recycle(a,2),t}},Object(y.a)({id:"CollisionTiles",properties:{collisionTypeMap:null,collisionType:"tiles",top:0,left:0},publicProperties:{collisionMap:[],tileWidth:10,tileHeight:10},initialize:function(){this.tileOffsetLeft=this.tileWidth/2+this.left,this.tileOffsetTop=this.tileHeight/2+this.top,this.columns=this.collisionMap.length,this.rows=this.collisionMap[0].length,this.shapeDefinition=v.a.setUp("x",0,"y",0,"type","rectangle","width",this.tileWidth,"height",this.tileHeight),this.storedTiles=m.a.setUp(),this.serveTiles=m.a.setUp(),this.storedTileIndex=0,this.aabb=p.a.setUp(),this.aabb.setBounds(this.left,this.top,this.tileWidth*this.columns+this.left,this.tileHeight*this.rows+this.top),this.collisionTypeMap?this.getType=r:this.getType=n},events:{transform:function(t){this.transform(t)},translate:function(t){this.translate(t)}},methods:{getShape:function(t,e,i){var n=this.storedTileIndex,r=null,o=this.storedTiles;return n===o.length?(r=g.a.setUp(null,this.shapeDefinition,i),o.push(r)):(r=o[n]).collisionType=i,r.update(t*this.tileWidth+this.tileOffsetLeft,e*this.tileHeight+this.tileOffsetTop),this.storedTileIndex+=1,r},addShape:function(t,e,i,n,r){var o=this.collisionMap[i][n],s=268435455&o,a=268435456,h=536870912,u=2147483648,l=1073741824;return o&&this.getType(s)===r&&((a&=o)?(l&=o,(h&=o)&&(u&=o)?e.left>=(i+1)*this.tileWidth+this.left&&t.push(this.getShape(i,n,r)):h?e.right<=i*this.tileWidth+this.left&&t.push(this.getShape(i,n,r)):l?e.top>=(n+1)*this.tileHeight+this.top&&t.push(this.getShape(i,n,r)):e.bottom<=n*this.tileHeight+this.top&&t.push(this.getShape(i,n,r))):t.push(this.getShape(i,n,r))),t},destroy:function(){var t=this.storedTiles,e=t.length;for(this.shapeDefinition.recycle(),this.shapeDefinition=null;e--;)t[e].recycle();m.a.recycle(t),this.storedTiles=null,m.a.recycle(this.serveTiles),this.serveTiles=null,this.aabb.recycle(),this.aabb=null}},publicMethods:{getAABB:function(){return this.aabb},isTile:function(t,e){return!(t<0||e<0||t>=this.columns||e>=this.rows||-1===this.collisionMap[t][e])},getTileShapes:function(t,e,i){var n=i||"tiles",r=this.left,o=this.top,s=this.tileHeight,a=this.tileWidth,h=Math.max(Math.floor((t.left-r)/a),0),u=Math.max(Math.floor((t.top-o)/s),0),l=Math.min(Math.ceil((t.right-r)/a),this.columns),c=Math.min(Math.ceil((t.bottom-o)/s),this.rows),f=0,d=0,p=this.serveTiles;for(p.length=0,this.storedTileIndex=0,f=h;f<l;f++)for(d=u;d<c;d++)this.addShape(p,e,f,d,n);return p},transform:function(t){var e=t||{},i=e.left||0,n=e.top||0,r=e.width||this.rows,o=e.height||this.columns,s=e.type||"horizontal";return d[s]?d[s](this.collisionMap,i,n,r,o):null},translate:function(t){var e=t||{},i=e.left||0,n=e.top||0,r=e.width||this.rows,o=e.height||this.columns,s=e.dx||0,a=e.dy||0;return d.translate(this.collisionMap,i,n,r,o,s,a)},getCollisionMatrix:function(t,e,i,n){return f(this.collisionMap,t,e,i,n)},setCollisionMatrix:function(t,e,i,n,r){return function(t,e,i,n,r,o){var s=0,a=0;for(a=0;a<o;a++)for(s=0;s<r;s++)t[i+s][n+a]=e[a][s];return t}(this.collisionMap,t,e,i,n,r)}}}))},function(t,e,i){"use strict";var n,r=i(0),o=i(4);e.a=(n=function(t){this.switches.push(t)},Object(o.a)({id:"ComponentSwitcher",properties:{componentMap:null},initialize:function(){var t="";if(this.switches=r.a.setUp(),this.componentMap)for(t in this.componentMap)this.componentMap.hasOwnProperty(t)&&this.addEventListener(t,n.bind(this,t))},events:{"prepare-logic":function(){var t=0;if(this.switches.length){for(t=0;t<this.switches.length;t++)this.switchComponents(this.componentMap[this.switches[t]]);this.switches.length=0}}},methods:{switchComponents:function(t){var e=0,i=0,n=this.owner,r=n.components,o=t.remove,s=t.add;if(o)if(Array.isArray(o))for(e=0;e<o.length;e++)for(i=r.length-1;i>-1;i--)r[i].type===o[e]&&n.removeComponent(r[i]);else for(e=r.length-1;e>-1;e--)r[e].type===o&&n.removeComponent(r[e]);if(s)if(Array.isArray(s))for(e=0;e<s.length;e++)n.addComponent(new platypus.components[s[e].type](n,s[e]));else n.addComponent(new platypus.components[s.type](n,s));n.parent.triggerEvent("child-entity-updated",n),n.triggerEvent("add-remove-component-complete")},destroy:function(){r.a.recycle(this.switches)}},getAssetList:function(t,e,i){var n=t.componentMap||e.componentMap||i.componentMap,o="",s=0,a=null,h=r.a.setUp(),u=null;for(o in n)if(n.hasOwnProperty(o))for(s=0;s<n[o].add.length;s++)(a=platypus.components[n[o].add[s].type])&&(u=a.getAssetList(n[o].add[s],e,i),Object(r.d)(h,u),r.a.recycle(u));return h}}))},function(t,e,i){"use strict";var n=i(7),r=i(4);e.a=Object(r.a)({id:"Counter",publicProperties:{total:0},initialize:function(){this.count=0,this.lastTotal=0,this.lastCount=0,this.message=n.a.setUp("text","")},events:{"handle-logic":function(){var t=!1,e=this.message;this.total!==this.lastTotal&&(this.lastTotal=this.total,t=!0),this.count!==this.lastCount&&(this.lastCount=this.count,t=!0),t&&(this.total?e.text=String(this.count)+"/"+String(this.total):e.text=String(this.count),this.owner.triggerEvent("update-content",e))},"change-total":function(t){this.total=t},"change-count":function(t){this.count=t},"increment-count":function(){this.count+=1}},methods:{destroy:function(){this.message.recycle()}}})},function(t,e,i){"use strict";var n,r,o,s=i(0),a=i(49),h=i(7),u=i(23),l=i(40),c=i(4);e.a=(o=Object(c.a)({id:"EntityContainer",properties:{childEvents:[]},initialize:(r=function(t,e){this.addEntity(t,e)},function(t,e){var i=0,n=null,o=this.childEvents,h=null;for(l.a.initialize(this),this.newAdds=s.a.setUp(),n=t.entities&&this.owner.entities?t.entities.concat(this.owner.entities):t.entities||this.owner.entities||null,this.owner.entities=this.entities=s.a.setUp(),this.childEvents=s.a.setUp(),i=0;i<o.length;i++)this.addNewPublicEvent(o[i]);if(this.addNewPrivateEvent("peer-entity-added"),this.addNewPrivateEvent("peer-entity-removed"),n){for(h=s.a.setUp(),i=0;i<n.length;i++)h.push(r.bind(this,n[i]));return a.a.setUp(h,e),s.a.recycle(h),!0}return!1}),events:{"add-entity":function(t,e){this.addEntity(t,e)},"remove-entity":function(t){this.removeEntity(t)},"child-entity-updated":function(t){this.updateChildEventListeners(t)},"handle-logic":function(){var t=null,e=this.newAdds,i=e.length,n=0,r=null;if(i){for(r=s.a.setUp(),n=0;n<i;n++)((t=e[n]).destroyed||!t.loadingComponents||t.loadingComponents.attemptResolution())&&r.push(n);for(n=r.length;n--;)Object(s.c)(e,r[n]);s.a.recycle(r)}}},methods:{addNewPublicEvent:function(t){var e=0;for(this.addNewPrivateEvent(t),e=0;e<this.childEvents.length;e++)if(this.childEvents[e]===t)return!1;return this.childEvents.push(t),this.addEventListener(t,function(t){return function(e,i){this.triggerOnChildren(t,e,i)}}(t)),!0},addNewPrivateEvent:function(t){var e=0,i=0;if(this._listeners[t])return!1;for(this._listeners[t]=s.a.setUp(),e=0;e<this.entities.length;e++)if(this.entities[e]._listeners[t])for(i=0;i<this.entities[e]._listeners[t].length;i++)this.addChildEventListener(this.entities[e],t,this.entities[e]._listeners[t][i]);return!0},updateChildEventListeners:function(t){this.removeChildEventListeners(t),this.addChildEventListeners(t)},addChildEventListeners:function(t){var e=0,i="";for(i in this._listeners)if(this._listeners.hasOwnProperty(i)&&t._listeners[i])for(e=0;e<t._listeners[i].length;e++)this.addChildEventListener(t,i,t._listeners[i][e])},removeChildEventListeners:function(t){var e=0,i=null,n=null;if(t.containerListener){for(i=t.containerListener.events,n=t.containerListener.messages,e=0;e<i.length;e++)this.removeChildEventListener(t,i[e],n[e]);s.a.recycle(i),s.a.recycle(n),t.containerListener.recycle(),t.containerListener=null}},addChildEventListener:function(t,e,i){t.containerListener||(t.containerListener=h.a.setUp("events",s.a.setUp(),"messages",s.a.setUp())),t.containerListener.events.push(e),t.containerListener.messages.push(i),this.on(e,i,i._priority||0)},removeChildEventListener:function(t,e,i){var n=0,r=t.containerListener.events,o=t.containerListener.messages;for(n=0;n<r.length;n++)r[n]!==e||i&&o[n]!==i||this.off(e,o[n])},destroy:function(){for(var t=Object(s.b)(this.entities),e=t.length,i=null;e--;)i=t[e],this.removeChildEventListeners(i),i.destroy();s.a.recycle(t),s.a.recycle(this.entities),this.owner.entities=null,s.a.recycle(this.childEvents),this.childEvents=null,s.a.recycle(this.newAdds),this.newAdds=null}},publicMethods:{getEntityById:function(t){var e=0,i=null;for(e=0;e<this.entities.length;e++){if(this.entities[e].id===t)return this.entities[e];if(this.entities[e].getEntityById&&(i=this.entities[e].getEntityById(t)))return i}return null},getEntitiesByType:function(t){var e=0,i=null,n=s.a.setUp();for(e=0;e<this.entities.length;e++)this.entities[e].type===t&&n.push(this.entities[e]),this.entities[e].getEntitiesByType&&(i=this.entities[e].getEntitiesByType(t),Object(s.d)(n,i),s.a.recycle(i));return n},addEntity:(n=function(t,e){var i=this.owner,n=this.entities,r=n.length;for(e.triggerEvent("adopted",e);r--&&e.triggerEvent("peer-entity-added",n[r]););this.triggerEventOnChildren("peer-entity-added",e),this.addChildEventListeners(e),n.push(e),i.triggerEvent("child-entity-added",e),t&&t(e)},function(t,e){var i=null,r=this.owner;return t instanceof u.a?((i=t).parent=r,n.call(this,e,i)):(i="string"==typeof t?new u.a(platypus.game.settings.entities[t],null,n.bind(this,e),r):t.id?new u.a(t,null,n.bind(this,e),r):new u.a(platypus.game.settings.entities[t.type],t,n.bind(this,e),r),this.owner.triggerEvent("entity-created",i)),this.newAdds.push(i),i}),removeEntity:function(t){var e=this.entities.indexOf(t);return e>=0&&(this.removeChildEventListeners(t),Object(s.c)(this.entities,e),this.triggerEventOnChildren("peer-entity-removed",t),this.owner.triggerEvent("child-entity-removed",t),t.destroy(),t.parent=null,t)},triggerEventOnChildren:function(t,e,i){return this.destroyed?0:(this._listeners[t]||this.addNewPrivateEvent(t),this.triggerEvent(t,e,i))},triggerOnChildren:function(t){return this.destroyed?0:(this._listeners[t]||this.addNewPrivateEvent(t),this.trigger.apply(this,arguments))}},getAssetList:function(t,e,i){var n=0,r=s.a.setUp(),o=s.a.setUp(),a=null;for(t.entities&&Object(s.d)(o,t.entities),e&&e.entities?Object(s.d)(o,e.entities):i&&i.entities&&Object(s.d)(o,i.entities),n=0;n<o.length;n++)a=u.a.getAssetList(o[n]),Object(s.d)(r,a),s.a.recycle(a);return s.a.recycle(o),r}}),l.a.mixin(o),o)},function(t,e,i){"use strict";var n,r,o,s,a,h,u=i(85),l=i(7),c=i(21),f=i(27),d=i(0),p=i(4);e.a=(o=[null,null,null,null,["east","south","west","north"],null,null,null,["east","southeast","south","southwest","west","northwest","north","northeast"],null,null,null,null,null,null,null,["east","east-southeast","southeast","south-southeast","south","south-southwest","southwest","west-southwest","west","west-northwest","northwest","north-northwest","north","north-northeast","northeast","east-northeast"]],s=["left-button","middle-button","right-button"],a=function(t,e){this.paused||this.owner.trigger(t,e)},h=function(t,e,i){!this.paused&&i[t]&&this.owner.trigger(e,i)},Object(p.a)({id:"EntityController",properties:{controlMap:{},joystick:null,stateMaps:{}},publicProperties:{paused:!1},initialize:function(t){var e="",i=null;if(this.actions=c.a.setUp(),this.stateMaps)for(e in this.stateMaps)this.stateMaps.hasOwnProperty(e)&&(i=f.a.setUp(e),this.addMap(this.stateMaps[e],e,i),i.recycle());this.addMap(this.controlMap,"default"),t.joystick&&(this.joystick=l.a.setUp("directions",t.joystick.directions||4,"handleEdge",t.joystick.handleEdge||!1,"innerRadius",t.joystick.innerRadius||0,"outerRadius",t.joystick.outerRadius||1/0))},events:{"handle-controller":function(){for(var t=this.actions,e=t.keys,i=e.length,n="",r=d.a.setUp(),o=this.owner.state;i--;)(n=t.get(e[i])).update(o)&&r.push(n);for(i=r.length;i--;)r[i].resolve();d.a.recycle(r)},pointerdown:function(t){"mouse"===t.pixiEvent.data.pointerType&&this.owner.triggerEvent("mouse:"+s[t.event.button||0]+":down",t.event),this.joystick&&(this.owner.triggerEvent("joystick:down",t.event),this.handleJoy(t))},pressup:function(t){var e=this.owner;"mouse"===t.pixiEvent.data.pointerType&&e.triggerEvent("mouse:"+s[t.event.button||0]+":up",t.event),this.joystick&&(e.triggerEvent("joystick:up",t.event),e.triggerEvent("stop"))},pressmove:function(t){this.joystick&&this.handleJoy(t)},"pause-controls":function(){this.paused=!0},"unpause-controls":function(){this.paused=!1}},methods:{handleJoy:function(t){var e,i,n,r,s=this.joystick,a=this.owner,h=Math.PI/(s.directions/2),u=(e=a,n=(i=t).x-e.x,r=i.y-e.y,Math.sqrt(n*n+r*r)),l=0,c="",f="";u>s.outerRadius||u<s.innerRadius||this.paused||(l=function(t,e,i){var n=e.x-t.x,r=e.y-t.y,o=0,s=2*Math.PI;return i?(o=Math.acos(n/i),r<0&&(o=s-o),o):o}(a,t,u),c=o[s.directions][Math.floor((l+h/2)%(2*Math.PI)/h)],s.handleEdge&&(h=Math.PI/s.directions,(f=o[2*s.directions][Math.floor((l+h/2)%(2*Math.PI)/h)])!==c&&a.triggerEvent(f.replace(c,"").replace("-",""),t)),a.triggerEvent("stop"),a.triggerEvent(c,t),a.triggerEvent("joystick-orientation",l))},addController:(n=function(t){this.inputs[t]=!1},r=function(t){this.inputs[t]=!0},function(t,e,i,o,s){var l=this.actions,c=e+"-"+i+"-"+(s||"all"),f=l.get(c);f||(f=s?l.set(c,u.a.setUp(i,o,h.bind(this,s))):l.set(c,u.a.setUp(i,o,a.bind(this)))),this.addEventListener(t+":up",n.bind(f,f.inputs.length)),this.addEventListener(t+":down",r.bind(f,f.inputs.length)),f.inputs.push(!1)}),addMap:function(t,e,i){var n=null,r=0,o="",s="";for(s in t)if(t.hasOwnProperty(s))if("string"==typeof(n=t[s]))this.addController(s,e,n,i);else if(Array.isArray(n))for(r=0;r<n.length;r++)this.addController(s,e,n[r],i);else for(o in n)if(n.hasOwnProperty(o))if("string"==typeof n[o])this.addController(s,e,n[o],i,o);else for(r=0;r<n[o].length;r++)this.addController(s,e,n[o][r],i,o)},destroy:function(){for(var t=this.actions,e=t.keys,i=e.length;i--;)t.get(e[i]).recycle();t.recycle(),this.joystick&&this.joystick.recycle()}}}))},function(t,e,i){"use strict";var n,r,o,s,a,h,u,l,c,f,d,p,g,v=i(0),m=i(12),y=i(86),b=i(101),_=i(7),w=i(21),x=i(11),E=i(4);e.a=(d=function(t,e){return t<<16|65535&e},p={entity:null,target:null,type:null,x:0,y:0,hitType:null,myType:null},g=function(t,e){return t.collisionGroup.getAllEntities()-e.collisionGroup.getAllEntities()},Object(E.a)({id:"HandlerCollision",properties:{gridBits:8},initialize:function(){this.againstGrid=_.a.setUp(),this.solidEntitiesLive=v.a.setUp(),this.softEntitiesLive=v.a.setUp(),this.allEntitiesLive=v.a.setUp(),this.groupsLive=v.a.setUp(),this.nonColliders=v.a.setUp(),this.terrain=null,this.owner.previousX=this.owner.previousX||this.owner.x,this.owner.previousY=this.owner.previousY||this.owner.y,this.relocationMessage=_.a.setUp("position",x.a.setUp(),"relative",!1)},events:{"child-entity-added":function(t){t.collideOff||this.addCollisionEntity(t)},"add-collision-entity":function(t){this.addCollisionEntity(t)},"child-entity-removed":function(t){this.removeCollisionEntity(t)},"remove-collision-entity":function(t){this.removeCollisionEntity(t)},"child-entity-updated":function(t){this.removeCollisionEntity(t),this.addCollisionEntity(t)},"check-collision-group":function(t){this.checkCamera(t.camera,t.entities),this.checkGroupCollisions(),this.checkSolidCollisions(),this.resolveNonCollisions(),this.checkSoftCollisions(t)}},methods:{mapDown:function(t){var e=m.a.setUp(),i=this.gridBits;return e.setBounds(t.left>>i,t.top>>i,t.right>>i,t.bottom>>i)},getAgainstGrid:function(t,e,i){var n=this.mapDown(e),r=_.a.setUp(),o=null,s=this.againstGrid,a=0,h=0;if(t&&e.equals(t.againstAABB))return this.getEntityAgainstGrid(t,i);for(a=n.left;a<=n.right;a++)for(h=n.top;h<=n.bottom;h++)(o=s[d(a,h)])&&this.mergeAGCell(o,r,i);return n.recycle(),r},getEntityAgainstGrid:function(t,e){for(var i=t.againstGrid,n=_.a.setUp(),r=i.length;r--;)this.mergeAGCell(i[r],n,e);return n},mergeAGCell:function(t,e,i){for(var n=i.length;n--;){var r=i[n],o=t.get(r);if(o&&o.length){var s=e[r];s?Object(v.d)(s,o):e[r]=Object(v.d)(v.a.setUp(),o)}}},removeAgainst:function(t){for(var e=t.againstGrid,i=t.collisionTypes,n=null,r=e.length,o=0,s=0,a=i.length,h=null;r--;)for(h=e[r],o=a;o--;)(n=h.get(i[o]))&&(s=n.indexOf(t))>=0&&Object(v.c)(n,s);e.length=0},updateAgainst:function(t){var e=null,i=0,n="",r=t.collisionTypes,o=this.mapDown(t.getAABB()),s=t.againstGrid,a=0,h=null,u=this.againstGrid,l=0,c=0;if(!o.equals(t.againstAABB))for(t.againstAABB.set(o),this.removeAgainst(t),l=o.left;l<=o.right;l++)for(c=o.top;c<=o.bottom;c++){for((h=u[a=d(l,c)])||(h=u[a]=w.a.setUp()),i=r.length;i--;)n=r[i],(e=h.get(n))||(e=h.set(n,v.a.setUp())),e.push(t);s.push(h)}o.recycle()},addCollisionEntity:function(t){t.getTileShapes?this.terrain=t:t.collisionTypes&&!t.againstGrid&&(t.againstGrid=v.a.setUp(),t.againstAABB=m.a.setUp(),this.updateAgainst(t))},removeCollisionEntity:function(t){t.againstGrid&&(this.removeAgainst(t),v.a.recycle(t.againstGrid),t.againstGrid=null,t.againstAABB.recycle(),t.againstAABB=null)},checkCamera:function(t,e){var i=e.length,n=0,r=this.allEntitiesLive,o=this.softEntitiesLive,s=this.solidEntitiesLive,a=this.nonColliders,h=this.groupsLive,u=null,l=null,c=!1;for(r.length=0,s.length=0,o.length=0,a.length=0,h.length=0;i--;)if(c=!1,l=(u=e[i]).collisionTypes,!u.immobile&&l&&l.length){if(r.push(u),u!==this.owner)for(n=l.length;n--;)if(u.solidCollisionMap.get(l[n]).length){s.push(u),c=!0;break}for(n=l.length;n--;)if(u.softCollisionMap.get(l[n]).length){o.push(u);break}c||a.push(u),u.collisionGroup&&h.push(u)}h.sort(g)},resolveNonCollisions:function(){var t=null,e=this.relocationMessage,i=this.nonColliders,n=i.length;for(e.relative=!1;n--;)(t=i[n]).position.x===t.previousPosition.x&&t.position.y===t.previousPosition.y||(e.position.setVector(t.position),t.triggerEvent("relocate-entity",e),this.updateAgainst(t))},checkGroupCollisions:(f=function(t,e,i,n,r,o,s,a){var h=p;h.entity=e,h.target=t,h.myType=i,h.type=n,h.x=r,h.y=o,h.direction=a,h.hitType=s,t.triggerEvent("hit-by-"+n,h),e&&(h.entity=t,h.target=e,h.type=i,h.myType=n,h.x=-r,h.y=-o,h.direction=a.getInverse(),h.hitType=s,e.triggerEvent("hit-by-"+i,h),h.direction.recycle())},function(){for(var t=0,e=this.groupsLive,i=e.length,n=null,r=null,o=null,s=null;i--;)if((n=e[i]).collisionGroup.getSize()>1){for(t=(r=(s=this.checkSolidEntityCollision(n,n.collisionGroup)).xData).length;t--;)o=r[t],f(o.thisShape.owner,o.thatShape.owner,o.thisShape.collisionType,o.thatShape.collisionType,o.direction,0,"solid",o.vector);for(t=(r=s.yData).length;t--;)o=r[t],f(o.thisShape.owner,o.thatShape.owner,o.thisShape.collisionType,o.thatShape.collisionType,0,o.direction,"solid",o.vector);s.recycle()}}),checkSolidCollisions:function(){var t=function(t,e,i,n,r,o,s,a){var h=p;h.entity=e,h.target=t,h.myType=i,h.type=n,h.x=r,h.y=o,h.direction=a,h.hitType=s,t.triggerEvent("hit-by-"+n,h),e&&(h.entity=t,h.target=e,h.type=i,h.myType=n,h.x=-r,h.y=-o,h.direction=a.getInverse(),h.hitType=s,e.triggerEvent("hit-by-"+i,h),h.direction.recycle())};return function(){for(var e=0,i=this.solidEntitiesLive,n=i.length,r=null,o=null,s=null,a=null,h=t;n--;){for(r=i[n],e=(o=(a=this.checkSolidEntityCollision(r,r)).xData).length;e--;)h((s=o[e]).thisShape.owner,s.thatShape.owner,s.thisShape.collisionType,s.thatShape.collisionType,s.direction,0,"solid",s.vector);for(e=(o=a.yData).length;e--;)h((s=o[e]).thisShape.owner,s.thatShape.owner,s.thisShape.collisionType,s.thatShape.collisionType,0,s.direction,"solid",s.vector);a.recycle()}}}(),checkSolidEntityCollision:function(t,e){var i=b.a.setUp(),n=0,r=null,o=null,s=t.previousX,a=t.previousY,h=t.x-s,u=t.y-a,l=1/0,c=1/0,f=e.getCollisionTypes(),d=0,p=!1,g=null;if(e.getSolidEntities&&(p=e.getSolidEntities()),r=x.a.setUp(t.position),h||u||t.collisionDirty){if(t.bullet){for(g=Math.min,d=f.length;d--;)l=g(l,(o=e.getAABB(f[d])).width),c=g(c,o.height);for(h/=n=g(n=Math.ceil(Math.max(Math.abs(h)/l,Math.abs(u)/c)),100),u/=n;n--;){if(e.prepareCollision(t.previousX+h,t.previousY+u),(r=this.processCollisionStep(t,e,p,i,r.setVector(t.position),h,u,f)).x===t.previousX&&r.y===t.previousY){e.relocateEntity(r,i);break}e.relocateEntity(r,i)}}else e.prepareCollision(t.previousX+h,t.previousY+u),r=this.processCollisionStep(t,e,p,i,r,h,u,f),e.relocateEntity(r,i);r.x===s&&r.y===a||this.updateAgainst(t)}return r.recycle(),i},processCollisionStep:(l=m.a.setUp(),c=function(t,e,i,n,r,o){var s=0;if(i===t)return!1;if(i.jumpThrough&&e.bottom>n.top)return!1;if(t.jumpThrough&&n.bottom>e.top)return!1;if(r)for(s=r.length;s--;)if(i===r[s])return!1;return o.collides(n)},function(t,e,i,n,r,o,s,a){for(var h=a.length,u=0,f=0,d=0,p=c,g=!1,m=v.a.setUp(),y=null,b=null,_=null,w=null,x=null,E="",T=null,S=null,A=null,P=this.terrain,C=null,M=e.getSolidCollisions(),O=null,I=l;h--;){for(m[h]=y=v.a.setUp(),w=a[h],b=e.getPreviousAABB(w),_=e.getAABB(w),I.set(_),I.include(b),O=M.get(w),C=this.getAgainstGrid(t,I,O),u=O.length;u--;)if(A=C[E=O[u]]){for(f=A.length;f--;)if(T=(x=A[f]).getAABB(E),p(t,b,x,T,i,I)){for(d=(S=x.getShapes(E)).length;d--;)y.push(S[d]);g=!0}v.a.recycle(A)}else if(P)for(f=(S=P.getTileShapes(I,b,E)).length;f--;)y.push(S[f]),g=!0;C.recycle()}return g&&(r=this.resolveCollisionPosition(t,e,r,m,n,a,o,s)),v.a.recycle(m,2),r}),resolveCollisionPosition:function(t,e,i,n,r,o,s,a){var h=0,u=null;if(0!==s)for(h=o.length;h--;)(u=this.findMinAxisMovement(t,e,o[h],"x",n[h])).occurred&&r.tryToAddX(u)||u.recycle();if(u=r.xData[0],i.x=u?t.previousX+u.deltaMovement*u.direction:t.x,e.movePreviousX(i.x),0!==a)for(h=o.length;h--;)(u=this.findMinAxisMovement(t,e,o[h],"y",n[h])).occurred&&r.tryToAddY(u)||u.recycle();return u=r.yData[0],i.y=u?t.previousY+u.deltaMovement*u.direction:t.y,i},findMinAxisMovement:function(t,e,i,n,r){for(var o=y.a.setUp(),s=e.getShapes(i),a=e.getPrevShapes(i),h=null,u=s.length;u--;)(h=this.findMinShapeMovementCollision(a[u],s[u],n,r)).occurred&&(!o.occurred||h.deltaMovement<o.deltaMovement)?(o.recycle(),o=h):h.recycle();return o},findMinShapeMovementCollision:(r={position:0,contactVector:x.a.setUp()},o=function(t,e){var i=Math.pow;return Math.sqrt(i(e,2)-i(t,2))},s=function(t,e,i){var n=t-e;return n-n/Math.abs(n)*i},a=function(t,e,i,n,r){var a=0,h=e.aABB,u=h.halfWidth,l=t.x,c=t.y;return c>=h.top&&c<=h.bottom?u+t.radius:(c=s(c,e.y,h.halfHeight),a=u+o(c,t.radius),i===t?(r.x=-s(l-n*a,e.x,u)/2,c=-c):r.x=s(l,e.x-n*a,u)/2,r.y=c,r.normalize(),a)},h=function(t,e,i,n,r){var a=0,h=e.aABB,u=h.halfHeight,l=t.x,c=t.y;return l>=h.left&&l<=h.right?u+t.radius:(l=s(l,e.x,h.halfWidth),a=u+o(l,t.radius),i===t?(l=-l,r.y=-s(c-n*a,e.y,u)/2):r.y=s(c,e.y-n*a,u)/2,r.x=l,r.normalize(),a)},u={x:{rectangle:{rectangle:function(t,e,i){var n=r;return n.position=i.x-t*(i.aABB.halfWidth+e.aABB.halfWidth),n.contactVector.setXYZ(t,0),n},circle:function(t,e,i){var n=r;return n.position=i.x-t*a(i,e,e,t,n.contactVector.setXYZ(t,0)),n}},circle:{rectangle:function(t,e,i){var n=r;return n.position=i.x-t*a(e,i,e,t,n.contactVector.setXYZ(t,0)),n},circle:function(t,e,i){var n=i.y-e.y,s=i.x-t*o(n,e.radius+i.radius),a=r;return a.contactVector.setXYZ(i.x-s,n).normalize(),a.position=s,a}}},y:{rectangle:{rectangle:function(t,e,i){var n=r;return n.position=i.y-t*(i.aABB.halfHeight+e.aABB.halfHeight),n.contactVector.setXYZ(0,t),n},circle:function(t,e,i){var n=r;return n.position=i.y-t*h(i,e,e,t,n.contactVector.setXYZ(0,t)),n}},circle:{rectangle:function(t,e,i){var n=r;return n.position=i.y-t*h(e,i,e,t,n.contactVector.setXYZ(0,t)),n},circle:function(t,e,i){var n=i.x-e.x,s=i.y-t*o(n,e.radius+i.radius),a=r;return a.contactVector.setXYZ(n,i.y-s).normalize(),a.position=s,a}}}},function(t,e,i,n){var r=0,o=t[i],s=e[i],a=t,h=o<s?1:-1,l=s,c=null,f=y.a.setUp(),d=null,p=s,g=null;if(o!==s)for(g=u[i][a.type],"x"===i?a.moveX(s):"y"===i&&a.moveY(s),r=n.length;r--;)c=n[r],l=s,a.collides(c)&&(l=(d=g[c.type](h,a,c)).position,h>0?l<p&&(l<o&&(l=o),p=l,f.set(!0,h,p,Math.abs(p-o),c.aABB,e,c,d.contactVector,0)):l>p&&(l>o&&(l=o),p=l,f.set(!0,h,p,Math.abs(p-o),c.aABB,e,c,d.contactVector,0)));return f}),checkSoftCollisions:(n=function(t){this.triggerEvent("hit-by-"+t.type,t)},function(){for(var t=this.softEntitiesLive,e=null,i=t.length,r=n;i--;)e=t[i],this.checkEntityForSoftCollisions(e,r.bind(e))}),checkEntityForSoftCollisions:function(t,e){var i=null,n=null,r=p,o=t.collisionTypes.length,s=0,a=0,h=0,u=0,l=null,c=null,f=null,d=null,g=null,m=null,y=!1;for(r.x=0,r.y=0;o--;){for(l=t.collisionTypes[o],c=t.softCollisionMap.get(l),i=this.getEntityAgainstGrid(t,c),s=c.length;s--;)if(f=i[d=c[s]]){for(a=f.length;a--;)if((n=f[a])!==t&&t.getAABB(l).collides(n.getAABB(d)))for(y=!1,g=t.getShapes(l),m=n.getShapes(d),h=g.length;h--;){for(u=m.length;u--;)if(g[h].collides(m[u])){r.entity=n,r.target=t,r.type=d,r.myType=l,r.shape=m[u],r.hitType="soft",e(r),y=!0;break}if(y)break}v.a.recycle(f)}i.recycle()}},checkShapeForCollisions:function(t,e,i){var n=null,r=null,o=p,s=0,a=0,h=0,u=null,l=null,c=null;for(o.x=0,o.y=0,n=this.getAgainstGrid(null,t.getAABB(),e),s=e.length;s--;)if(u=n[l=e[s]]){for(a=u.length;a--;)if(r=u[a],t.getAABB().collides(r.getAABB(l)))for(h=(c=r.getShapes(l)).length;h--;)if(t.collides(c[h])){o.entity=r,o.target=null,o.type=l,o.myType="",o.shape=c[h],o.hitType="soft",i(o);break}v.a.recycle(u)}n.recycle()},checkPointForCollisions:function(t,e,i,n){var r=this.gridBits,o=this.againstGrid[function(t,e,i){return d(t>>i,e>>i)}(t,e,r)],s=null,a=p,h=0,u=0,l=0,c=null,f=null,g=null;if(a.x=0,a.y=0,o)for(h=i.length;h--;)if(f=i[h],c=o.get(f))for(u=c.length;u--;)if((s=c[u]).getAABB(f).containsPoint(t,e))for(l=(g=s.getShapes(f)).length;l--;)if(g[l].containsPoint(t,e)){a.entity=s,a.target=null,a.type=f,a.myType="",a.shape=g[l],a.hitType="soft",n(a);break}},destroy:function(){var t=this.againstGrid,e=null,i="",n=null,r=0;for(i in v.a.recycle(this.groupsLive),v.a.recycle(this.nonColliders),v.a.recycle(this.allEntitiesLive),v.a.recycle(this.softEntitiesLive),v.a.recycle(this.solidEntitiesLive),this.relocationMessage.position.recycle(),this.relocationMessage.recycle(),t)if(t.hasOwnProperty(i)){for(r=(n=(e=t[i]).keys).length;r--;)v.a.recycle(e.get(n[r]));e.recycle()}t.recycle(),this.againstGrid=null}},publicMethods:{getWorldEntities:function(){return this.allEntitiesLive},getWorldTerrain:function(){return this.terrain},getEntityCollisions:function(t){var e=v.a.setUp();return this.checkEntityForSoftCollisions(t,(function(t){e.push(_.a.setUp(t))})),e},getShapeCollisions:function(t,e){var i=v.a.setUp();return this.checkShapeForCollisions(t,e,(function(t){i.push(_.a.setUp(t))})),i},getPointCollisions:function(t,e,i){var n=v.a.setUp();return this.checkPointForCollisions(t,e,i,(function(t){n.push(_.a.setUp(t))})),n}}}))},function(t,e,i){"use strict";var n,r=i(4);e.a=(n={kc0:"unknown",kc8:"backspace",kc9:"tab",kc12:"numpad-5-shift",kc13:"enter",kc16:"shift",kc17:"ctrl",kc18:"alt",kc19:"pause",kc20:"caps-lock",kc27:"esc",kc32:"space",kc33:"page-up",kc34:"page-down",kc35:"end",kc36:"home",kc37:"left-arrow",kc38:"up-arrow",kc39:"right-arrow",kc40:"down-arrow",kc42:"numpad-multiply",kc43:"numpad-add",kc44:"print-screen",kc45:"insert",kc46:"delete",kc47:"numpad-division",kc48:"0",kc49:"1",kc50:"2",kc51:"3",kc52:"4",kc53:"5",kc54:"6",kc55:"7",kc56:"8",kc57:"9",kc59:"semicolon",kc61:"equals",kc65:"a",kc66:"b",kc67:"c",kc68:"d",kc69:"e",kc70:"f",kc71:"g",kc72:"h",kc73:"i",kc74:"j",kc75:"k",kc76:"l",kc77:"m",kc78:"n",kc79:"o",kc80:"p",kc81:"q",kc82:"r",kc83:"s",kc84:"t",kc85:"u",kc86:"v",kc87:"w",kc88:"x",kc89:"y",kc90:"z",kc91:"left-windows-start",kc92:"right-windows-start",kc93:"windows-menu",kc96:"back-quote",kc106:"numpad-multiply",kc107:"numpad-add",kc109:"numpad-minus",kc110:"numpad-period",kc111:"numpad-division",kc112:"f1",kc113:"f2",kc114:"f3",kc115:"f4",kc116:"f5",kc117:"f6",kc118:"f7",kc119:"f8",kc120:"f9",kc121:"f10",kc122:"f11",kc123:"f12",kc144:"num-lock",kc145:"scroll-lock",kc186:"semicolon",kc187:"equals",kc188:"comma",kc189:"hyphen",kc190:"period",kc191:"forward-slash",kc192:"back-quote",kc219:"open-bracket",kc220:"back-slash",kc221:"close-bracket",kc222:"quote"},Object(r.a)({id:"HandlerController",initialize:function(){this.callbackKeyUp=null,this.callbackKeyDown=null,platypus.game.settings.debug?(this.callbackKeyDown=function(t){this.keyDown(t)}.bind(this),this.callbackKeyUp=function(t){this.keyUp(t)}.bind(this)):(this.callbackKeyDown=function(t){this.keyDown(t),t.preventDefault()}.bind(this),this.callbackKeyUp=function(t){this.keyUp(t),t.preventDefault()}.bind(this)),window.addEventListener("keydown",this.callbackKeyDown,!0),window.addEventListener("keyup",this.callbackKeyUp,!0)},events:{tick:function(t){this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("handle-controller",t)}},methods:{keyDown:function(t){this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("key:"+(n["kc"+t.keyCode]||"key-code-"+t.keyCode)+":down",t)},keyUp:function(t){this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("key:"+(n["kc"+t.keyCode]||"key-code-"+t.keyCode)+":up",t)},destroy:function(){window.removeEventListener("keydown",this.callbackKeyDown),window.removeEventListener("keyup",this.callbackKeyUp)}}}))},function(t,e,i){"use strict";var n,r,o,s,a=i(0),h=i(12),u=i(4);e.a=(n=function(t,e){var i=t.length;for(e.length=0;i--;)e.push(t[i])},r=function(t,e){return t.alwaysOn||t.aabb&&e.collides(t.getAABB())||void 0===t.x||e.containsPoint(t.x,t.y)},o=function(t,e,i){var n=t.length,o=null;for(e.length=0;n--;)o=t[n],r(o,i)&&e.push(o)},s=function(t){return"handle-logic"===t||"handle-post-collision-logic"===t||"prepare-logic"===t||"state-changed"===t||"handle-movement"===t},Object(u.a)({id:"HandlerLogic",properties:{alwaysOn:!1},publicProperties:{buffer:-1,stepLength:5,maxStepsPerTick:100,timeMultiplier:1},initialize:function(){this.entities=a.a.setUp(),this.activeEntities=a.a.setUp(),this.removals=a.a.setUp(),this.inLogicLoop=!1,this.alwaysOn?(this.updateList=n,this.camera=null):(this.updateList=o,this.camera=h.a.setUp()),this.paused=0,this.leftoverTime=0,this.message={delta:this.stepLength,tick:null,camera:this.camera,entities:this.activeEntities}},events:{"child-entity-updated":function(t){var e=this.entities.indexOf(t),i=t.getMessageIds().some(s);i&&e<0?(this.entities.push(t),!this.inLogicLoop||this.camera&&!r(t,this.camera)||this.activeEntities.push(t)):!i&&e>=0&&(Object(a.c)(this.entities,e),this.inLogicLoop&&this.removals.push(t))},"child-entity-added":function(t){t.getMessageIds().some(s)&&(this.entities.push(t),!this.inLogicLoop||this.camera&&!r(t,this.camera)||this.activeEntities.push(t))},"child-entity-removed":function(t){var e=this.entities.indexOf(t);e>=0&&(Object(a.c)(this.entities,e),this.inLogicLoop&&this.removals.push(t))},"pause-logic":function(t){t&&t.time?this.paused=t.time:this.paused=-1,this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("logic-paused")},"unpause-logic":function(){this.paused=0,this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("logic-unpaused")},"camera-update":function(t){var e=this.buffer,i=this.camera,n=null;i&&(-1===e&&(e=t.viewport.width/10),n=t.viewport,i.setBounds(n.left-e,n.top-e,n.right+e,n.bottom+e))},tick:function(t){var e=0,i=0,n=0,r=null,o=this.message,s=this.activeEntities,h=this.removals,u=this.stepLength;for(this.leftoverTime+=t.delta*this.timeMultiplier,n=Math.floor(this.leftoverTime/u)||1,o.delta=u,this.leftoverTime=Math.max(this.leftoverTime-n*u,0),o.tick=t,this.updateList(this.entities,s,this.camera),n=Math.min(n,this.maxStepsPerTick);n--;)if(this.paused>0&&(this.paused-=u,this.paused<0&&(this.paused=0)),!this.paused){for(this.inLogicLoop=!0,this.owner.triggerEvent("handle-logic",o),this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("handle-ai",o),e=s.length;e--;)(r=s[e]).triggerEvent("prepare-logic",o),r.triggerEvent("handle-logic",o),r.triggerEvent("handle-movement",o);if(this.inLogicLoop=!1,h.length){for(e=h.length;e--;)(i=s.indexOf(h[e]))>=0&&Object(a.c)(s,i);h.length=0}if(e=s.length,this.owner.triggerEvent("check-collision-group",o))for(;e--;)(r=s[e]).triggerEvent("handle-post-collision-logic",o),r.lastState.update(r.state)&&r.triggerEvent("state-changed",r.state);else for(;e--;)(r=s[e]).lastState.update(r.state)&&r.triggerEvent("state-changed",r.state)}}},methods:{destroy:function(){a.a.recycle(this.entities),this.entities=null,a.a.recycle(this.activeEntities),this.activeEntities=null,a.a.recycle(this.removals),this.removals=null}}}))},function(t,e,i){"use strict";var n=i(9),r=i(7),o=i(78),s=i(4);e.a=Object(s.a)({id:"HandlerRender",properties:{interactive:!1},publicProperties:{worldContainer:null},initialize:function(){var t=null;this.worldContainer=this.worldContainer||new n.Container,this.worldContainer.name="",this.interactive&&(t=r.a.setUp("container",this.worldContainer,"hitArea",this.interactive.hitArea,"hover",this.interactive.hover,"relativeToSelf",!0),this.owner.addComponent(new o.a(this.owner,t)),t.recycle()),this.renderMessage=r.a.setUp("delta",0,"container",this.worldContainer)},events:{load:function(){this.owner.triggerEvent("render-world",{world:this.worldContainer}),this.owner.triggerEvent("input-on")},"child-entity-added":function(t){t.container&&this.setParentRenderContainer(t,t.renderParent),t.triggerEvent("handle-render-load",this.renderMessage)},"pause-render":function(t){t&&t.time?this.paused=t.time:this.paused=-1,this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("render-paused")},"unpause-render":function(){this.paused=0,this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("render-unpaused")},tick:function(t){var e=this.renderMessage,i=this.worldContainer;e.delta=t.delta,this.paused>0&&(this.paused-=t.delta,this.paused<=0&&(this.paused=0)),this.paused||(this.owner.triggerEvent("handle-render",e),this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("handle-render",e)),i.reorder&&(i.reorder=!1,i.children.sort((function(t,e){return t.z-e.z})))},"set-parent-render-container":function(t,e){this.setParentRenderContainer(t,e)}},methods:{setParentRenderContainer:function(t,e){var i=null;if(t.removeFromParentContainer(),e)if("string"==typeof e){var n=this.owner.getEntityById(e);n?i=n.container:(platypus.debug.warn("Trying to add to non-existent entity, added to World container instead."),i=this.worldContainer)}else i=e.container;else i=this.worldContainer;t.addToParentContainer(i)},destroy:function(){this.worldContainer=null,this.renderMessage.recycle(),this.renderMessage=null}}})},function(t,e,i){"use strict";var n,r,o,s,a,h,u,l,c,f,d=i(0),p=i(4),g=i(105);e.a=(n=function(t,e){return t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24)>>>0},r=function(t,e){return t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24)>>>0},o=function(t,e){var i=4,o=[],s=atob(t.replace(/\\/g,""));if("zlib"===e)for(s=Object(g.inflate)(s);i<=s.length;)o.push(r(s,i-4)),i+=4;else for(;i<=s.length;)o.push(n(s,i-4)),i+=4;return o},s=function(t){return"base64"===t.encoding&&(t.data=o(t.data,t.compression),t.encoding="csv"),t},a=function(t,e,i,n,r,o){var s=0,a=0,h=0,u=Object(d.b)(t);if("horizontal"===o){for(a=r-1;a>=0;a--)for(s=a*n,h=0;s<(a+1)*n;s++,h++)u.splice((a+1)*e+h,0,i[s]);return u}return"vertical"===o?t.concat(i):null},h=function(t,e,i,n){var r=0,o="",s=Object(d.b)(t),a=null;for(r=0;r<e.length;r++){for(o in a={},e[r])e[r].hasOwnProperty(o)&&(a[o]=e[r][o]);"horizontal"===n?a.x+=i:"vertical"===n&&(a.y+=i),s.push(a)}return s},u=function(t,e,i){var n=0,r="";for(t.tilewidth||t.tileheight?t.tilewidth===e.tilewidth&&t.tileheight===e.tileheight||platypus.debug.warn("Component LevelBuilder: Your map has segments with different tile sizes. All tile sizes must match. Segment: "+e):(t.tilewidth=e.tilewidth,t.tileheight=e.tileheight),"horizontal"===i?0===t.height?t.height=e.height:t.height!==e.height&&platypus.debug.warn("Component LevelBuilder: You are trying to merge segments with different heights. All segments need to have the same height. Level: "+t+" Segment: "+e):"vertical"===i&&(0===t.width?t.width=e.width:t.width!==e.width&&platypus.debug.warn("Component LevelBuilder: You are trying to merge segments with different widths. All segments need to have the same width. Level: "+t+" Segment: "+e)),n=0;n<e.layers.length;n++)if(t.layers[n])t.layers[n].type===e.layers[n].type?t.layers[n].data&&e.layers[n].data?(s(e.layers[n]),"horizontal"===i?(t.layers[n].data=a(t.layers[n].data,t.width,e.layers[n].data,e.width,t.height,i),t.layers[n].width+=e.width):"vertical"===i&&(t.layers[n].data=a(t.layers[n].data,t.height,e.layers[n].data,e.height,t.width,i),t.layers[n].height+=e.height)):t.layers[n].objects&&e.layers[n].objects&&("horizontal"===i?t.layers[n].objects=h(t.layers[n].objects,e.layers[n].objects,t.width*t.tilewidth,i):"vertical"===i&&(t.layers[n].objects=h(t.layers[n].objects,e.layers[n].objects,t.height*t.tileheight,i))):platypus.debug.warn("Component LevelBuilder: The layers in your level segments do not match. Level: "+t+" Segment: "+e);else{var o=t.layers[n]={};for(r in s(e.layers[n]),e.layers[n])e.layers[n].hasOwnProperty(r)&&(o[r]=e.layers[n][r]);o.objects&&("horizontal"===i?o.objects=h([],o.objects,t.width*t.tilewidth,i):"vertical"===i&&(o.objects=h([],o.objects,t.height*t.tileheight,i)))}for(r in"horizontal"===i?t.width+=e.width:"vertical"===i&&(t.height+=e.height),e)e.hasOwnProperty(r)&&!t[r]&&(t[r]=e[r])},l=function(t){var e=0,i=0,n=platypus.game.settings.levels,r={height:0,width:0,layers:[]},o={height:0,width:0,layers:[]};for(e=0;e<t.length;e++){for(r={height:0,width:0,layers:[]},i=0;i<t[e].length;i++)if("string"==typeof t[e][i]){var s=t[e][i],a=s.indexOf(":"),h=n[s];if(!h&&a>=0){var l=s.substring(a+1);h=n[s.substring(0,a)],"mirror"===l&&(h=n[s]=c(h))}u(r,h,"horizontal")}else u(r,t[e][i],"horizontal");u(o,r,"vertical")}return o},c=function(t){for(var e={layers:[]},i=t.width*t.tilewidth,n=0;n<t.layers.length;n++){var r=e.layers[n]={},o=t.layers[n];for(var a in s(o),o)o.hasOwnProperty(a)&&(r[a]=o[a]);if(o.data)for(var h=o.data,u=r.data=[],l=t.width,c=0;c<h.length;c++){var d=h[l*(c/l>>0)+l-1-c%l];u[c]=d?2147483648^d:0}if(o.objects)for(var p=o.objects,g=r.objects=[],v=0;v<p.length;v++){var m=p[v],y=g[v]={};for(var b in m)m.hasOwnProperty(b)&&(y[b]=m[b]);y.x=i-m.x-(m.width||0),m.rotation&&(y.rotation=-m.rotation),m.polygon&&(y.polygon=f(m.polygon)),m.polyline&&(y.polyline=f(m.polyline))}}for(var _ in t)t.hasOwnProperty(_)&&!e[_]&&(e[_]=t[_]);return e},f=function(t){for(var e=[],i=t.length;i--;)e.push({x:-t[i].x,y:t[i].y});return e.unshift(e.pop()),e},Object(p.a)({id:"LevelBuilder",properties:{useUniques:!0,levelTemplate:null,levelPieces:null},publicProperties:{},initialize:function(){this.levelMessage={level:null,persistentData:null}},events:{"layer-loaded":function(t){var e=null,i=null,n="",r=0,o=0,s=0;if(this.levelMessage.persistentData=t,this.levelTemplate=t&&t.levelTemplate||this.levelTemplate,this.useUniques=t&&t.useUniques||this.useUniques,i=t&&t.levelPieces||this.levelPieces,this.levelPieces={},i)for(n in i)if(i.hasOwnProperty(n))if("string"==typeof i[n])this.levelPieces[n]=i[n];else{if(!i[n].length)throw"Level Builder: Level pieces of incorrect type: "+i[n];for(this.levelPieces[n]=[],r=0;r<i[n].length;r++)this.levelPieces[n].push(i[n][r])}if(this.levelTemplate)if(this.levelTemplate)for(this.levelMessage.level=[],o=0;o<this.levelTemplate.length;o++)if("string"==typeof(e=this.levelTemplate[o]))this.levelMessage.level[o]=this.getLevelPiece(e);else{if(!e.length)throw"Level Builder: Template row is neither a string or array. What is it?";for(this.levelMessage.level[o]=[],s=0;s<e.length;s++)this.levelMessage.level[o][s]=this.getLevelPiece(e[s])}else platypus.debug.warn("Level Builder: Template is not defined");else platypus.debug.warn("Level Builder: There is no level template.");this.levelMessage.level&&(this.levelMessage.level=l(this.levelMessage.level),this.owner.triggerEvent("created-level",this.levelMessage),this.owner.triggerEvent("load-level",this.levelMessage))}},methods:{getLevelPiece:function(t){var e=this.levelPieces[t]||t,i=null,n=0;if(e){if("string"==typeof e)return this.useUniques?(i=e,this.levelPieces[t]=null,i):e;if(e.length)return n=Math.floor(Math.random()*e.length),this.useUniques?Object(d.c)(this.levelPieces[t],n):e[n];throw"Level Builder: There are no MORE level pieces of type: "+t}throw"Level Builder: There are no level pieces of type: "+t},destroy:function(){this.levelMessage.level=null,this.levelMessage.persistentData=null,this.levelMessage=null}},publicMethods:{mergeLevels:function(t){return l(t)}},getAssetList:function(t,e,i){var n=0,r=null,o=d.a.setUp(),s="",a=null;if(t&&t.levelPieces?a=t.levelPieces:e&&e.levelPieces?a=e.levelPieces:i&&i.levelPieces&&(a=i.levelPieces),a)for(s in a)if(a.hasOwnProperty(s))if(Array.isArray(a[s]))for(n=0;n<a[s].length;n++)r=platypus.components.TiledLoader.getAssetList({level:a[s][n]},e,i),Object(d.d)(o,r),d.a.recycle(r);else r=platypus.components.TiledLoader.getAssetList({level:a[s]},e,i),Object(d.d)(o,r),d.a.recycle(r);return o}}))},function(t,e,i){"use strict";var n=i(0),r=i(4);e.a=Object(r.a)({id:"LogicAngularMovement",properties:{maxVelocity:3,acceleration:.01,visualOffset:0,startAngle:0},publicProperties:{},initialize:function(){this.angle=this.startAngle,this.v=n.a.setUp(0,0),this.moving=!1,this.piOverTwo=Math.PI/2,this.owner.rotation=this.owner.rotation||this.visualOffset},events:{"handle-logic":function(t){var e=Math.PI,i=Math.sin,n=Math.cos,r=Math.min,o=Math.max,s=t.delta,a=0;this.moving&&(this.v[0]+=this.acceleration*n(this.angle)*s,this.v[1]+=this.acceleration*i(this.angle)*s,0===this.v[0]?a=this.v[1]>0?this.piOverTwo:this.v[1]<0?-this.piOverTwo:this.angle:(a=Math.atan(this.v[1]/this.v[0]),this.v[0]<0&&(a=e+a)),this.v[0]>=0?this.v[0]=r(this.v[0],this.maxVelocity*n(a)):this.v[0]=o(this.v[0],this.maxVelocity*n(a)),this.v[1]>=0?this.v[1]=r(this.v[1],this.maxVelocity*i(a)):this.v[1]=o(this.v[1],this.maxVelocity*i(a)),this.owner.x+=this.v[0],this.owner.y+=this.v[1],this.owner.rotation=a*(180/e)+this.visualOffset)},"set-angle":function(t){this.angle=t},move:function(){this.moving=!0},stop:function(){this.moving=!1,this.v[0]=0,this.v[1]=0},"set-max-velocity":function(t){this.maxVelocity=t}},methods:{destroy:function(){this.v.recycle()}}})},function(t,e,i){"use strict";var n,r=i(23),o=i(0),s=i(4);e.a=(n=function(){var t=this.attachment;t&&t.trigger.apply(t,arguments)},Object(s.a)({id:"LogicAttachment",properties:{attachState:"attached",attachment:"",events:null,startAttached:!1,offsetX:0,offsetY:0,offsetZ:.01},initialize:function(){var t="",e=this.events;if(this.state=this.owner.state,this.state.set(this.attachState,this.startAttached),this.attachmentPosition={x:0,y:0,z:0,dx:0,dy:0},this.attachmentProperties={type:this.attachment,properties:this.attachmentPosition},this.attachment=null,this.isAttached=this.startAttached,e)for(t in e)e.hasOwnProperty(t)&&this.addEventListener(t,n.bind(this,e[t]))},events:{"handle-logic":function(){var t=0,e=this.state;this.isAttached?(this.attachment||(this.attachmentPosition.x=this.owner.x,this.attachmentPosition.y=this.owner.y,this.attachmentPosition.z=this.owner.z,this.attachment=this.owner.parent.addEntity(this.attachmentProperties)),this.attachment.destroyed?(this.owner.parent.removeEntity(this.attachment),this.attachment=null,this.isAttached=!1):(this.attachment.x=this.owner.x,t=this.offsetX,e.get("left")?(t*=-1,this.attachment.rotation=180):e.get("right")&&(this.attachment.rotation=0),this.attachment.x+=t,this.attachment.y=this.owner.y,t=this.offsetY,e.get("top")?(t*=-1,this.attachment.rotation=90):e.get("bottom")&&(this.attachment.rotation=-90),this.attachment.y+=t,this.attachment.z=this.owner.z,this.attachment.z+=this.offsetZ)):this.attachment&&(this.owner.parent.removeEntity(this.attachment),this.attachment=null),e.set(this.attachState,this.isAttached)},attach:function(t){this.isAttached=!t||!1!==t.pressed},detach:function(){this.isAttached=!1},"change-attachment-offset":function(t){void 0!==t.x?this.offsetX=t.x:void 0!==t.y?this.offsetY=t.y:void 0!==t.z&&(this.offsetZ=t.z)}},methods:{destroy:function(){this.state.set(this.attachState,!1),this.attachment&&(this.owner.parent.removeEntity(this.attachment),this.attachment=null),this.isAttached=!1,this.state=null}},getAssetList:function(t,e,i){var n=t.attachment||e.attachment||i.attachment;return n?r.a.getAssetList({type:n}):o.a.setUp()}}))},function(t,e,i){"use strict";var n=i(12),r=i(7),o=i(4);e.a=Object(o.a)({id:"LogicButton",properties:{onPress:"",onRelease:"",onCancel:"",onHover:"",useOnce:!1,disabled:!1,toggle:!1,pressed:!1},publicProperties:{bottom:null,left:null,right:null,top:null},initialize:function(){var t=this.owner.state;this.aabb=n.a.setUp(),this.lastBottom=null,this.lastLeft=null,this.lastRight=null,this.lastTop=null,this.state=t,t.set("disabled",this.disabled),t.set("released",!this.pressed),t.set("pressed",this.pressed),t.set("highlighted",!1),this.owner.buttonMode=!this.disabled,this.cancelled=!1,this.readyToToggle=!1},events:{"handle-logic":function(){var t=this.bottom,e=this.left,i=this.right,n=this.top;this.lastBottom===t&&this.lastLeft===e&&this.lastRight===i&&this.lastTop===n||(this.updatePosition(this.aabb),this.lastBottom=t,this.lastLeft=e,this.lastRight=i,this.lastTop=n)},"camera-update":function(t){this.aabb.set(t.viewport),this.updatePosition(this.aabb)},pointerdown:function(t){this.state.get("disabled")||(this.toggle?this.readyToToggle=!0:(this.onPress&&this.owner.trigger(this.onPress),this.updateStateAndTrigger("pressed"),t&&t.pixiEvent&&t.pixiEvent.stopPropagation&&t.pixiEvent.stopPropagation(),this.useOnce&&this.removeEventListener&&this.removeEventListener("pointerdown")))},pressup:function(t){var e=this.state;e.get("disabled")||(this.cancelled?(this.onCancel&&this.owner.trigger(this.onCancel),this.updateStateAndTrigger("cancelled")):this.toggle?this.readyToToggle&&(e.get("pressed")?this.updateStateAndTrigger("released"):this.updateStateAndTrigger("pressed")):(this.onRelease&&this.owner.trigger(this.onRelease),this.updateStateAndTrigger("released")),t&&t.pixiEvent&&t.pixiEvent.stopPropagation&&t.pixiEvent.stopPropagation(),this.useOnce&&this.removeEventListener&&(this.removeEventListener("pressup"),this.state.set("disabled",!0),this.owner.buttonMode=!1)),this.cancelled=!1,this.readyToToggle=!1},pointerover:function(){this.onHover&&this.owner.trigger(this.onHover),this.state.get("pressed")&&(this.cancelled=!1)},pointerout:function(){this.state.get("pressed")&&(this.cancelled=!0)},disable:function(){this.state.set("disabled",!0),this.owner.buttonMode=!1},enable:function(){this.state.set("disabled",!1),this.owner.buttonMode=!0},"toggle-disabled":function(){var t=this.state.get("disabled");this.owner.buttonMode=t,this.state.set("disabled",!t)},highlight:function(){this.state.set("highlighted",!0)},unhighlight:function(){this.state.set("highlighted",!1)},"toggle-highlight":function(){var t=this.state;t.set("highlighted",!t.get("highlighted"))}},methods:{updatePosition:function(t){var e=this.bottom,i=this.left,n=this.owner,r=this.right,o=this.top;"number"==typeof i?n.x=t.left+i:"number"==typeof r&&(n.x=t.right-r),"number"==typeof o?n.y=t.top+o:"number"==typeof e&&(n.y=t.bottom-e)},updateStateAndTrigger:function(t){var e=null,i=this.owner,n=this.state,o=n.get("pressed"),s=n.get("released"),a=!1;s&&"pressed"===t?(n.set("pressed",!0),n.set("released",!1),a=!0):!o||"released"!==t&&"cancelled"!==t||(n.set("pressed",!1),n.set("released",!0),a=!0),a&&(e=r.a.setUp("released",o,"pressed",s,"triggered",s,"entity",i),i.triggerEvent(t,e),e.recycle())},destroy:function(){this.aabb.recycle(),this.aabb=null,this.owner.buttonMode=!1,this.state=null}}})},function(t,e,i){"use strict";var n=i(4);e.a=Object(n.a)({id:"LogicCarrier",initialize:function(){},events:{load:function(){this.owner.triggerEvent("add-collision-entity",this.owner)||(this.owner.addComponent(new platypus.components.CollisionGroup(this.owner,{})),this.owner.triggerEvent("add-collision-entity",this.owner))},"carry-me":function(t){this.owner.triggerEvent("add-collision-entity",t.entity)},"release-me":function(t){this.owner.triggerEvent("remove-collision-entity",t.entity)}}})},function(t,e,i){"use strict";var n=i(4);e.a=Object(n.a)({id:"LogicDestroyMe",properties:{delay:0,destroyed:!1},events:{"prepare-logic":function(t){var e=t.delta;this.destroyed&&!this.owner.state.get("paused")&&(this.delay-=e,this.delay<=0&&this.owner.parent.removeEntity(this.owner))},"destroy-me":function(){this.destroyed=!0}}})},function(t,e,i){"use strict";var n,r,o,s,a=i(11),h=i(4);e.a=(r=function(t){return function(e){this[t]=!e||!1!==e.pressed}},o=function(){},s={x:function(t,e){t!==e&&(t>180&&e<=180||t<=180&&e>180)&&this.owner.triggerEvent("transform","vertical")},y:function(t,e){t!==e&&(t>90&&t<=270&&(e<=90||e>270)||(t<=90||t>270)&&e>90&&e<=270)&&this.owner.triggerEvent("transform","horizontal")},z:function(t,e){t!==e&&this.owner.triggerEvent("replace-transform","rotate-"+t)}},Object(h.a)({id:"LogicDirectionalMovement",properties:{axis:"y",speed:.3},initialize:function(){var t=this.state=this.owner.state;"number"==typeof this.speed&&(this.speed=[this.speed,0,0]),this.initialVector=a.a.setUp(this.speed),this.reorient=s[this.axis],this.reorient||(this.reorient=o),this.moving=t.set("moving",!1),this.left=t.set("left",!1),this.right=t.set("right",!1),this.up=t.set("up",!1),this.down=t.set("down",!1),this.upLeft=!1,this.upRight=!1,this.downLeft=!1,this.downRight=!1,this.heading=0,this.owner.heading=this.owner.heading||0},events:{"component-added":function(t){if(t===this){if(!this.owner.addMover)return void platypus.debug.warn('The "LogicDirectionalMovement" component requires a "Mover" component to function correctly.');this.direction=this.owner.addMover({velocity:this.speed,drag:0,friction:0,stopOnCollision:!1,orient:!1,aliases:{moving:"control-velocity"}}).velocity,this.owner.heading!==this.heading&&(this.direction.setVector(this.initialVector).rotate(this.owner.heading/180*Math.PI),this.heading=this.owner.heading),this.owner.triggerEvent("moving",this.moving)}},"handle-logic":function(){var t=this.state,e=this.up||this.upLeft||this.upRight,i=this.upLeft||this.up&&this.left,n=this.left||this.upLeft||this.downLeft,r=this.downLeft||this.down&&this.left,o=this.down||this.downLeft||this.downRight,s=this.downRight||this.down&&this.right,a=this.right||this.upRight||this.downRight,h=this.upRight||this.up&&this.right;if(n&&a||e&&o)this.moving=!1;else if(i)this.moving=!0,this.heading=225;else if(h)this.moving=!0,this.heading=315;else if(r)this.moving=!0,this.heading=135;else if(s)this.moving=!0,this.heading=45;else if(n)this.moving=!0,this.heading=180;else if(a)this.moving=!0,this.heading=0;else if(e)this.moving=!0,this.heading=270;else if(o)this.moving=!0,this.heading=90;else switch(this.moving=!1,this.heading){case 270:e=!0;break;case 90:o=!0;break;case 180:n=!0;break;case 225:e=!0,n=!0;break;case 315:e=!0,a=!0;break;case 135:o=!0,n=!0;break;case 45:o=!0,a=!0;break;case 0:default:a=!0}this.owner.heading!==this.heading&&(this.direction.setVector(this.initialVector).rotate(this.heading/180*Math.PI),this.reorient(this.heading,this.owner.heading),this.owner.heading=this.heading),t.get("moving")!==this.moving&&(this.owner.triggerEvent("moving",this.moving),t.set("moving",this.moving)),t.set("up",e),t.set("right",a),t.set("down",o),t.set("left",n)},"go-down":r("down"),"go-south":r("down"),"go-down-left":r("downLeft"),"go-southwest":r("downLeft"),"go-left":r("left"),"go-west":r("left"),"go-up-left":r("upLeft"),"go-northwest":r("upLeft"),"go-up":r("up"),"go-north":r("up"),"go-up-right":r("upRight"),"go-northeast":r("upRight"),"go-right":r("right"),"go-east":r("right"),"go-down-right":r("downRight"),"go-southeast":r("downRight"),stop:function(t){t&&!1===t.pressed||(this.left=!1,this.right=!1,this.up=!1,this.down=!1,this.upLeft=!1,this.upRight=!1,this.downLeft=!1,this.downRight=!1)},face:(n={up:270,north:270,down:90,south:90,left:180,west:180,right:0,east:0,"up-left":225,northwest:225,"up-right":315,northeast:315,"down-left":135,southwest:135,"down-right":45,southeast:45},function(t){this.heading=n[t]||0}),accelerate:function(t){this.initialVector.normalize().multiply(t),this.direction.normalize().multiply(t)}},methods:{destroy:function(){this.initialVector.recycle(),this.state=null}}}))},function(t,e,i){"use strict";var n=i(12),r=i(9),o=i(4),s=new r.Rectangle(-2e3,-2e3,4e3,4e3);e.a=Object(o.a)({id:"LogicDragDrop",properties:{dragRenderParent:"",stickyClick:!1},initialize:function(){this.aabb=n.a.setUp(),this.nextX=this.owner.x,this.nextY=this.owner.y,this.lastZ=this.owner.z,this.grabOffsetX=0,this.grabOffsetY=0,this.state=this.owner.state,this.state.set("dragging",!1),this.state.set("noDrop",!1),this.tryDrop=!1,this.hitSomething=!1,this.hasCollision=!1,platypus.supports.mobile&&(this.stickyClick=!1)},events:{"camera-update":function(t){this.aabb.set(t.viewport),this.checkCamera()},"component-added":function(t){"CollisionBasic"===t.type&&(this.hasCollision=!0)},"prepare-logic":function(){this.checkCamera()},"handle-logic":function(){this.state.get("dragging")&&(this.owner.x=this.nextX,this.owner.y=this.nextY,this.owner.triggerEvent("hovering")),this.state.set("noDrop",!1)},"handle-post-collision-logic":function(){this.tryDrop?(this.tryDrop=!1,this.hitSomething?(this.dropFailed=!1,this.state.set("noDrop",!0),this.state.set("dragging",!0),this.owner.dragMode=!0):(this.state.set("noDrop",!1),this.state.set("dragging",!1),this.owner.dragMode=!1)):this.hitSomething&&this.state.set("noDrop",!0),this.hitSomething=!1},pointerdown:function(t){this.sticking?(this.sticking=!1,this.releasePointer(),this.release()):(this.nextX=this.owner.x,this.nextY=this.owner.y,this.lastZ=this.owner.z,this.grabOffsetX=(t.x>>0)-this.owner.x,this.grabOffsetY=(t.y>>0)-this.owner.y,this.state.set("dragging",!0),this.dragRenderParent!==this.owner.renderParent&&(this.originalRenderParent=this.owner.renderParent,this.owner.parent.triggerEvent("set-parent-render-container",this.owner,this.dragRenderParent)),this.owner.dragMode=!0,this.sticking=this.stickyClick,this.sticking&&this.claimPointer()),t.pixiEvent.stopPropagation()},pressup:function(t){this.sticking||this.release(),t.pixiEvent.stopPropagation()},pointermove:function(t){this.sticking&&(this.nextX=t.x-this.grabOffsetX,this.nextY=t.y-this.grabOffsetY,t.event.preventDefault(),t.pixiEvent.stopPropagation())},pressmove:function(t){this.nextX=t.x-this.grabOffsetX,this.nextY=t.y-this.grabOffsetY,!this.sticking||this.nextX===this.owner.x&&this.nextY===this.owner.y||(this.sticking=!1,this.releasePointer()),t.event.preventDefault(),t.pixiEvent.stopPropagation()},"no-drop":function(){this.hitSomething=!0}},methods:{checkCamera:function(){this.state&&this.state.get("dragging")&&!this.aabb.containsPoint(this.nextX+this.grabOffsetX,this.nextY+this.grabOffsetY)&&(this.sticking&&(this.sticking=!1,this.releasePointer()),this.release())},claimPointer:function(){this.lastHitArea=this.owner.container.hitArea,this.owner.container.hitArea=s},releasePointer:function(){this.owner.container.hitArea=this.lastHitArea},release:function(){this.hasCollision?this.tryDrop=!0:(this.state.set("noDrop",!1),this.state.set("dragging",!1),this.originalRenderParent&&this.owner.parent.triggerEvent("set-parent-render-container",this.owner,this.originalRenderParent),this.owner.dragMode=!1,this.owner.z=this.lastZ),this.owner.triggerEvent("dropped",this.owner)},destroy:function(){this.state.set("dragging",!1),this.owner.dragMode=!1,this.state.set("noDrop",!1),this.state=null,this.aabb.recycle(),this.aabb=null,this.owner.z=this.lastZ}}})},function(t,e,i){"use strict";var n=i(11),r=i(4);e.a=Object(r.a)({id:"LogicImpactLaunch",properties:{accelerationX:-.3,accelerationY:-.8,flipX:!0,flipY:!1},initialize:function(t){this.stunState=t.state||"stunned",this.flipX=this.flipX?-1:1,this.flipY=this.flipY?-1:1,this.justJumped=!1,this.stunned=!1,this.state=this.owner.state,this.state.set("impact",!1),this.state.set(this.stunState,!1)},events:{"component-added":function(t){if(t===this){if(!this.owner.addMover)return void platypus.debug.warn('The "LogicDirectionalMovement" component requires a "Mover" component to function correctly.');this.direction=this.owner.addMover({velocity:[0,0,0],orient:!1}).velocity,this.vector=n.a.setUp()}},"handle-logic":function(){this.state.set("impact",this.justJumped),this.state.set(this.stunState,this.stunned),this.justJumped&&(this.direction.setVector(this.vector),this.justJumped=!1,this.stunned=!0)},"impact-launch":function(t){var e=t.x,i=t.y;t.entity&&(e=t.entity.x-this.owner.x,i=t.entity.y-this.owner.y),this.stunned||(this.justJumped=!0,e>=0?this.vector.x=this.accelerationX:e<0&&(this.vector.x=this.accelerationX*this.flipX),i>=0?this.vector.y=this.accelerationY:i<0&&(this.vector.y=this.accelerationY*this.flipY))},"hit-solid":function(t){this.stunned&&t.y>0&&(this.direction.x=0,this.direction.y=0,this.stunned=!1)}},methods:{destroy:function(){this.vector.recycle(),this.state=null}}})},function(t,e,i){"use strict";var n=i(4);e.a=Object(n.a)({id:"LogicPacingPlatform",initialize:function(t){this.ang=this.owner.angle||t.angle||0,this.dist=this.owner.distance||t.distance||128,this.dX=this.dist*Math.cos(this.ang),this.dY=this.dist*Math.sin(this.ang),this.period=this.owner.period||t.period||4e3,this.time=0,this.startPos=this.owner.startPos||t.startPos||0,this.offset=0,this.originX=this.owner.x,this.originY=this.owner.y},events:{"handle-logic":function(t){var e=this.period,i=t.delta;this.time+=i,this.time>e&&(this.time=this.time%e),this.offset=this.time/e*(2*Math.PI),this.owner.x=this.originX+Math.sin(this.offset+this.startPos)*this.dX,this.owner.y=this.originY+Math.sin(this.offset+this.startPos)*this.dY}}})},function(t,e,i){"use strict";var n=i(4);e.a=Object(n.a)({id:"LogicPortable",properties:{portableDirections:{down:!0}},initialize:function(){this.carrier=this.lastCarrier=null,this.message={entity:this.owner}},events:{"handle-logic":function(){var t=this.message;this.carrierConnected?(this.carrier!==this.lastCarrier&&(this.lastCarrier&&this.lastCarrier.triggerEvent("release-me",t),this.carrier.triggerEvent("carry-me",t)),this.carrierConnected=!1):this.carrier&&(this.carrier.triggerEvent("release-me",t),this.carrier=null),this.lastCarrier=this.carrier},"hit-solid":function(t){t.y>0?this.updateCarrier(t.entity,"down"):t.y<0?this.updateCarrier(t.entity,"up"):t.x<0?this.updateCarrier(t.entity,"left"):t.x>0&&this.updateCarrier(t.entity,"right")},"force-release":function(){this.carrier&&this.carrier.triggerEvent("release-me",this.message),this.carrier=null,this.lastCarrier=this.carrier,this.carrierConnected=!1}},methods:{updateCarrier:function(t,e){this.portableDirections[e]&&t&&(t!==this.carrier&&(this.carrier=t),this.carrierConnected=!0)}}})},function(t,e,i){"use strict";var n=i(21),r=i(4);e.a=Object(r.a)({id:"LogicPortal",initialize:function(t){var e=0,i=t.entrants||t.entrant||"no one",r=this.owner.state;if(this.destination=this.owner.destination||t.destination,this.used=!1,this.ready=!1,this.wasReady=!1,this.entrants=n.a.setUp(),Array.isArray(i))for(e=0;e<i.length;e++)this.entrants.set(i[e],!1);else this.entrants.set(i,!1);this.state=r,r.set("occupied",!1),r.set("ready",!0)},events:{"handle-logic":function(){var t=this.entrants,e=t.keys,i=e.length,n=!1,r=!0,o=this.state;for(!this.used&&this.activated?(this.owner.triggerEvent("port-"+this.destination),this.used=!0):this.ready&&!this.wasReady?(this.owner.triggerEvent("portal-waiting"),this.wasReady=!0):this.wasReady&&!this.ready&&(this.owner.triggerEvent("portal-not-waiting"),this.wasReady=!1);i--;)t[e[i]]?(n=!0,t.set(e[i],!1)):r=!1;o.set("occupied",n),o.set("ready",r),this.ready=!1},"occupied-portal":function(t){var e=this.entrants,i=e.keys,n=i.length;for(e.set(t.entity.type,!0);n--;)if(!e.get(i[n]))return;this.ready=!0},"activate-portal":function(){this.activated=!0}},methods:{destroy:function(){this.state=null,this.entrants.recycle(),this.entrants=null}}})},function(t,e,i){"use strict";var n,r=i(0),o=i(4);e.a=(n=function(t,e){return t/Math.abs(t)*e},Object(o.a)({id:"LogicPushable",initialize:function(t){this.yPush=t.push||t.yPush||0,this.xPush=t.push||t.xPush||.1,t.roll?(this.radius=t.radius||this.owner.radius||(this.owner.width||this.owner.height||2)/2,this.owner.orientation=this.owner.orientation||0):this.radius=0,this.currentPushX=0,this.currentPushY=0,this.lastX=this.owner.x,this.lastY=this.owner.y,this.pushers=r.a.setUp()},events:{"handle-logic":function(t){var e=0,i=t.delta;for(this.currentPushY&&(this.owner.y+=n(this.currentPushY,this.yPush*i),this.currentPushY=0),this.currentPushX&&(this.owner.x+=n(this.currentPushX,this.xPush*i),this.currentPushX=0),this.lastX===this.owner.x&&this.lastY===this.owner.y||(this.radius&&(this.owner.orientation+=(this.owner.x+this.owner.y-this.lastX-this.lastY)/this.radius),this.lastX=this.owner.x,this.lastY=this.owner.y),e=0;e<this.pushers.length;e++)this.pushers[e].triggerEvent("pushed",this.owner);this.pushers.length=0},"push-entity":function(t){var e=t.x||0,i=t.y||0;this.currentPushX-=e,this.currentPushY-=i,(this.yPush&&i||this.xPush&&e)&&this.pushers.push(t.entity)},"hit-solid":function(t){return t.y>0&&this.vY>0||t.y<0&&this.vY<0?this.vY=0:(t.x<0&&this.vX<0||t.x>0&&this.vX>0)&&(this.vX=0),!0}},methods:{destroy:function(){r.a.recycle(this.pushers)}}}))},function(t,e,i){"use strict";var n=i(11),r=i(0),o=i(4);e.a=Object(o.a)({id:"LogicRebounder",initialize:function(t){n.a.assign(this.owner,"velocity","dx","dy","dz"),this.owner.mass=this.owner.mass||t.mass||1,this.elasticity=t.elasticity||.8,this.v=n.a.setUp(0,0,0),this.incidentVector=n.a.setUp(0,0,0),this.staticCollisionOccurred=!1,this.nonStaticCollisionOccurred=!1,this.hitThisTick=r.a.setUp(),this.otherV=n.a.setUp(0,0,0),this.otherVelocityData=r.a.setUp()},events:{"handle-logic":function(){var t=0;for(this.hitThisTick.length=0,t=0;t<this.otherVelocityData.length;t++)this.otherVelocityData[t].velocity.recycle();this.otherVelocityData.length=0},"hit-static":function(t){var e,i=t.entity,n=0;for(n=0;n<this.hitThisTick.length;n++)if(i===this.hitThisTick[n])return;this.hitThisTick.push(i),this.v.setVector(this.owner.velocity),this.incidentVector.setVector(t.direction),e=this.v.scalarProjection(this.incidentVector),isNaN(e)||(this.incidentVector.scale(e*(1+this.elasticity)),this.v.subtractVector(this.incidentVector)),this.owner.velocity.setVector(this.v)},"hit-non-static":function(t){var e,i=0,n=t.entity,r=!1,o=0,s=0;if(!((i=this.hitThisTick.indexOf(n))>=0)){for(this.hitThisTick.push(n),i=0;i<this.otherVelocityData.length;i++)if(n===this.otherVelocityData[i].entity){this.otherV.setVector(this.otherVelocityData[i].velocity),r=!0;break}r||(this.otherV.setVector(n.velocity),n.triggerEvent("share-velocity",this.owner)),this.v.setVector(this.owner.velocity),this.incidentVector.setVector(t.direction),o=this.v.scalarProjection(this.incidentVector),o=isNaN(o)?0:o,s=this.otherV.scalarProjection(this.incidentVector),s=isNaN(s)?0:s,e=(o*(this.owner.mass-n.mass)+2*n.mass*s)/(this.owner.mass+n.mass),this.incidentVector.scale(e-o),this.owner.velocity.setVector(this.incidentVector)}},"share-velocity":function(t){this.otherVelocityData.push({entity:t,velocity:n.a.setUp(t.velocity)})}},methods:{destroy:function(){this.v.recycle(),this.incidentVector.recycle(),this.otherV.recycle(),r.a.recycle(this.hitThisTick),r.a.recycle(this.otherVelocityData)}},publicMethods:{}})},function(t,e,i){"use strict";var n=i(23),r=i(0),o=i(4);e.a=Object(o.a)({id:"LogicRegionSpawner",initialize:function(t){var e=0,i=0,n=1,o=1,s=0,a=0,h=0,u=0;if(this.spawnPosition={x:0,y:0},this.spawnProperties={type:t.spawn,properties:this.spawnPosition},this.regions=null,this.usedRegions=null,this.regionWidth=0,this.regionHeight=0,t.regions)for(this.regions=r.a.setUp(),this.usedRegions=r.a.setUp(),this.regionWidth=s=t.regions.width||this.owner.width,this.regionHeight=a=t.regions.height||this.owner.height,n=Math.round(this.owner.width/s),o=Math.round(this.owner.height/a),e=0;e<n;e++)for(i=0;i<o;i++)h=Math.min(s,this.owner.width-e*s),u=Math.min(a,this.owner.height-i*a),this.regions.push({x:e*s,y:i*a,width:h,height:u});this.interval=this.owner.interval||t.interval||1e3,this.time=0},events:{"handle-logic":function(t){var e=this.regions,i=null;this.time+=t.delta,this.time>this.interval&&(this.time-=this.interval,e?(e.length||(this.regions=this.usedRegions,this.usedRegions=e,e=this.regions),i=e[Math.floor(e.length*Math.random())],this.spawnPosition.x=this.owner.x-(this.owner.regX||0)+(i.x+Math.random()*i.width),this.spawnPosition.y=this.owner.y-(this.owner.regY||0)+(i.y+Math.random()*i.height)):(this.spawnPosition.x=this.owner.x-(this.owner.regX||0)+Math.random()*this.owner.width,this.spawnPosition.y=this.owner.y-(this.owner.regY||0)+Math.random()*this.owner.height),this.owner.parent.addEntity(this.spawnProperties))}},methods:{destroy:function(){this.regions&&(r.a.recycle(this.regions),r.a.recycle(this.usedRegions))}},getAssetList:function(t,e,i){var o=t.spawn||e.spawn||i.spawn;return o?n.a.getAssetList({type:o}):r.a.setUp()}})},function(t,e,i){"use strict";var n,r,o=i(4);e.a=(n=Math.cos,r=Math.sin,Object(o.a)({id:"LogicRotationalMovement",properties:{speed:.3,angle:0,degree:1},initialize:function(){var t=this.owner.state;this.magnitude=0,this.state=t,t.set("moving",!1),t.set("turningRight",!1),t.set("turningLeft",!1),this.owner.orientation=0,this.moving=!1,this.turningRight=!1,this.turningLeft=!1},events:{"handle-logic":function(t){var e,i,o=this.state;this.turningRight&&(this.angle+=this.degree*t.delta/15),this.turningLeft&&(this.angle-=this.degree*t.delta/15),this.moving&&(this.owner.x+=(e=this.magnitude,i=this.angle,e*n(i)*t.delta),this.owner.y+=function(t,e){return t*r(e)}(this.magnitude,this.angle)*t.delta),o.set("moving",this.moving),o.set("turningLeft",this.turningLeft),o.set("turningRight",this.turningRight),this.owner.orientation!==this.angle*Math.PI/180&&(this.owner.orientation=this.angle*Math.PI/180,this.owner.triggerEvent("orientation-updated"))},rotate:function(t){this.angle+=t},"turn-right":function(t){this.turningRight=!t||t.pressed},"turn-left":function(t){this.turningLeft=!t||t.pressed},"go-forward":function(t){!t||t.pressed?(this.moving=!0,this.magnitude=this.speed):this.moving=!1},"go-backward":function(t){!t||t.pressed?(this.moving=!0,this.magnitude=-this.speed):this.moving=!1},stop:function(t){t&&!t.pressed||(this.moving=!1,this.turningLeft=!1,this.turningRight=!1)},"stop-moving":function(t){t&&!t.pressed||(this.moving=!1)},"stop-turning":function(t){t&&!t.pressed||(this.turningLeft=!1,this.turningRight=!1)}},methods:{destroy:function(){this.state=null}}}))},function(t,e,i){"use strict";var n=i(23),r=i(0),o=i(4);e.a=Object(o.a)({id:"LogicSpawner",initialize:function(t){var e=this.owner.spawneeClass||t.spawneeClass,i="",n=0;if(this.state=this.owner.state,this.stateName=t.state||"spawning",this.originalZ=platypus.game.settings.entities[e]&&platypus.game.settings.entities[e].properties&&platypus.game.settings.entities[e].properties.z||0,this.speed=t.speed||this.owner.speed||0,this.state.set(this.stateName,!1),this.spawneeProperties={x:0,y:0,z:0,dx:0,dy:0,spawner:this.owner},t.passOnProperties)for(n=0;n<t.passOnProperties.length;n++)i=t.passOnProperties[n],this.owner[i]&&(this.spawneeProperties[i]=this.owner[i]);this.propertiesContainer={type:e,properties:this.spawneeProperties},this.offsetX=this.owner.offsetX||t.offsetX||0,this.offsetY=this.owner.offsetY||t.offsetY||0,this.firing=!1},events:{"handle-logic":function(){var t=0,e=this.state;this.firing&&(this.spawneeProperties.x=this.owner.x,this.spawneeProperties.y=this.owner.y,this.spawneeProperties.z=this.owner.z+this.originalZ,t=this.offsetX,e.get("left")&&(t*=-1),this.spawneeProperties.x+=t,t=this.offsetY,e.get("top")&&(t*=-1),this.spawneeProperties.y+=t,this.speed?(e.get("top")?this.spawneeProperties.dy=-this.speed:e.get("bottom")?this.spawneeProperties.dy=this.speed:delete this.spawneeProperties.dy,e.get("left")?this.spawneeProperties.dx=-this.speed:e.get("right")?this.spawneeProperties.dx=this.speed:delete this.spawneeProperties.dx):(delete this.spawneeProperties.dx,delete this.spawneeProperties.dy),this.parent.addEntity(this.propertiesContainer)),e.set(this.stateName,this.firing),this.firing=!1},spawn:function(t){this.firing=!t||!1!==t.pressed,this.parent=this.owner.parent}},methods:{destroy:function(){this.state=null}},getAssetList:function(t,e,i){var o=t.spawneeClass||e.spawneeClass||i.spawneeClass;return o?n.a.getAssetList({type:o}):r.a.setUp()}})},function(t,e,i){"use strict";var n,r,o,s,a=i(0),h=i(21),u=i(27),l=i(4);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=(n=function(t,e){e.update(t)},r=function(t,e){e.set(t,!0)},o=null,s=null,o=function(t,e,i,n,r,a,h){var u,l=0,c="",f=n.message||0===n.message||!1===n.message,d=null;if(r){if("string"==typeof n)return void a.triggerEvent(n);if(Array.isArray(n)){for(l=0;l<n.length;l++)o(t,e,i,n[l],r,a,h);return}if(n.event&&(f||n.delay))return void(n.delay?h.push(n):a.trigger(n.event,n.message));n.get&&(d=n.get("true"))&&o(t,e,i,d,r,a,h)}if(u=n.keys)for(l=u.length;l--;)"true"!==(c=u[l])&&s(c,e,i,n.get(c),r,a,h)},s=function(t,e,i,n,r,s,a){var h=r,u=!1,l="",c=!1;"!"===t.charAt(0)?(l=t.substring(1),u=!1===(c=e.get(l)),"outputs"!==t&&i.get(l)!==c&&(h=!0)):(u=!0===(c=e.get(t)),"outputs"!==t&&i.get(t)!==c&&(h=!0)),(u||"outputs"===t)&&o(t,e,i,n,h,s,a)},Object(l.a)({id:"LogicStateMachine",properties:{inputs:null,outputs:null},initialize:function(t){var e=0,i=this.inputs,o="",s=null,l=null,f=null,d=t["sustained-inputs"],p=this.owner.state;if(this.state=p,i){for(o in f=a.a.setUp(),i)if(i.hasOwnProperty(o))for(l=u.a.setUp(i[o]),f.push(l),this.addEventListener(o,n.bind(this,l,p)),e=(s=l.keys).length;e--;)p.has(s[e])||p.set(s[e],!1);this.stateObjects=f}if(this.sustainedState=u.a.setUp(),d)for(o in d)d.hasOwnProperty(o)&&(this.addEventListener(o,r.bind(this,d[o],this.sustainedState)),this.sustainedState.set(d[o],!1),p.set(d[o],!1));this.snapshot=u.a.setUp(),this.last=u.a.setUp(),this.queueTimes=a.a.setUp(),this.queue=a.a.setUp(),this.outputs=function t(e){var i=null,n="";if(!e||"object"!==c(e)||Array.isArray(e)||e.event)return e;for(n in i=h.a.setUp(),e)e.hasOwnProperty(n)&&i.set(n,t(e[n]));return i}(this.outputs)},events:{"handle-logic":function(t){for(var e=this.sustainedState,i="",n=e.keys,r=n.length,o=this.state;r--;)i=n[r],o.set(i,e.get(i)),e.set(i,!1);for(r=this.queue.length;r--;)this.queueTimes[r]-=t.delta,this.queueTimes[r]<=0&&(this.owner.trigger(this.queue[r].event,this.queue[r].message),Object(a.c)(this.queueTimes,r),Object(a.c)(this.queue,r))},"update-state":function(t){this.state.update(t)},"state-changed":function(t){var e=0,i=null,n=this.snapshot;if(this.outputs){for(n.update(t),i=a.a.setUp(),s("outputs",n,this.last,this.outputs,!1,this.owner,i),e=i.length;e--;)this.queue.push(i[e]),this.queueTimes.push(i[e].delay);a.a.recycle(i),this.last.update(n)}}},methods:{destroy:function(){var t=0,e=this.stateObjects;if(a.a.recycle(this.queueTimes),a.a.recycle(this.queue),e){for(t=e.length;t--;)e[t].recycle();a.a.recycle(e),this.stateObjects=null}this.sustainedState.recycle(),this.snapshot.recycle(),this.last.recycle(),this.state=null,this.inputs=null}}}))},function(t,e,i){"use strict";var n=i(4);e.a=Object(n.a)({id:"LogicSwitch",initialize:function(t){this.state=this.owner.state,this.pressed=!1,this.wasPressed=this.pressed,this.sticky=t.sticky||!1,this.state.set("pressed",!1),this.initialPress=!0},events:{"handle-logic":function(){this.sticky?this.pressed&&!this.wasPressed&&(this.state.set("pressed",!0),this.wasPressed=!0,this.owner.triggerEvent("switch-on")):(this.pressed!==this.wasPressed&&(this.pressed?(this.state.set("pressed",!0),this.owner.triggerEvent("switch-on")):(this.state.set("pressed",!1),this.owner.triggerEvent("switch-off"))),this.wasPressed=this.pressed,this.pressed=!1)},"switch-pressed":function(){this.pressed=!0,this.initialPress&&(this.owner.triggerEvent("initial-press"),this.initialPress=!1)}},methods:{destroy:function(){this.state=null}}})},function(t,e,i){"use strict";var n=i(11),r=i(4);e.a=Object(r.a)({id:"LogicTeleportee",initialize:function(){this.teleportDestination=n.a.setUp(),this.teleportNow=!1,this.DestinationSet=!1,this.message={position:this.teleportDestination}},events:{"handle-logic":function(){this.teleportNow&&(this.owner.triggerEvent("relocate-entity",this.message),this.teleportNow=!1,this.owner.triggerEvent("teleport-complete"))},teleport:function(){this.destinationSet&&(this.teleportNow=!0)},"set-destination":function(t){this.setDestination(t)},"hit-telepoint":function(t){this.setDestination(t.entity)}},methods:{setDestination:function(t){this.teleportDestination.setXYZ(t.x,t.y,this.owner.z),this.destinationSet=!0},destroy:function(){this.teleportDestination.recycle()}}})},function(t,e,i){"use strict";var n=i(4);e.a=Object(n.a)({id:"LogicTeleporter",initialize:function(t){this.destination=null,this.linkId=this.owner.teleportId||t.teleportId,this.facing=this.owner.facing||t.facing||!1,this.facing&&this.owner.state.set("facing-"+this.facing,!0)},events:{"peer-entity-added":function(t){this.destination||t.linkId!==this.linkId||(this.destination=t)},"teleport-entity":function(t){switch(this.facing){case"up":t.y<0&&t.entity.triggerEvent("teleport",this.destination);break;case"right":t.x>0&&t.entity.triggerEvent("teleport",this.destination);break;case"down":t.y>0&&t.entity.triggerEvent("teleport",this.destination);break;case"left":t.x<0&&t.entity.triggerEvent("teleport",this.destination);break;default:t.entity.triggerEvent("teleport",this.destination)}}},methods:{destroy:function(){this.destination=null}}})},function(t,e,i){"use strict";var n=i(4);e.a=Object(n.a)({id:"LogicTimer",properties:{time:0,alarmTime:0,isInterval:!1,alarmMessage:"",updateMessage:"",isOn:!0,isIncrementing:!0,maxTime:36e5,resetOnStop:!1},initialize:function(){this.prevTime=this.time},events:{"handle-logic":function(t){this.isOn&&(this.prevTime=this.time,this.isIncrementing?this.time+=t.delta:this.time-=t.delta,Math.abs(this.time)>this.maxTime&&(this.time>0?this.time=this.maxTime:this.time<0&&(this.time=-this.maxTime),this.triggerEvent("stop-timer")),0!==this.alarmTime&&(this.isInterval?this.isIncrementing?Math.floor(this.time/this.alarmTime)>Math.floor(this.prevTime/this.alarmTime)&&this.owner.trigger(this.alarmMessage):Math.floor(this.time/this.alarmTime)<Math.floor(this.prevTime/this.alarmTime)&&this.owner.trigger(this.alarmMessage):this.isIncrementing?this.time>this.alarmTime&&this.prevTime<this.alarmTime&&this.owner.trigger(this.alarmMessage):this.time<this.alarmTime&&this.prevTime>this.alarmTime&&this.owner.trigger(this.alarmMessage))),this.owner.trigger(this.updateMessage,{time:this.time})},"set-timer":function(t){this.time=t.time},"start-timer":function(){this.isOn=!0},"stop-timer":function(){this.isOn=!1,this.resetOnStop&&(this.time=0)}}})},function(t,e,i){"use strict";var n=i(4);e.a=Object(n.a)({id:"LogicWindUpRacer",properties:{speed:.3,raceTime:5e3,windTime:500},initialize:function(){var t=this.owner.state;this.windProgress=0,this.winding=!1,this.racing=!1,this.blocked=!1,this.right=!1,this.left=!1,this.state=t,t.set("windingUp",!1),t.set("racing",!1),t.set("blocked",!1)},events:{"handle-logic":function(t){var e=this.state;this.racing?!this.blocked&&this.right&&e.get("right")?(this.owner.x+=this.speed*t.delta,this.owner.triggerEvent("racing")):!this.blocked&&this.left&&e.get("left")?(this.owner.x-=this.speed*t.delta,this.owner.triggerEvent("racing")):(this.racing=!1,this.owner.triggerEvent("stopped-racing")):this.winding?((this.right&&e.get("right")||this.left&&e.get("left"))&&(this.windProgress+=t.delta),this.owner.triggerEvent("winding",this.windProgress/this.windTime)):this.windProgress&&(this.windProgress>=this.windTime&&(this.racing=!0),this.windProgress=0,this.owner.triggerEvent("stopped-winding")),e.set("windingUp",this.winding),e.set("racing",this.racing),e.set("blocked",this.blocked),this.blocked=!1},"stop-racing":function(){this.racing=!1,this.owner.triggerEvent("stopped-racing")},"wind-up":function(t){this.winding=!t||!1!==t.pressed,this.right=this.state.get("right"),this.left=this.state.get("left")},"hit-solid":function(t){t.x&&this.racing&&(this.right&&t.x>0||this.left&&t.x<0)&&(this.blocked=!0,this.owner.triggerEvent("blocked",t))}},methods:{destroy:function(){this.state.set("windingUp",!1),this.state.set("racing",!1),this.state.set("blocked",!1),this.state=null}}})},function(t,e,i){"use strict";var n,r,o,s,a=i(11),h=i(4);e.a=(n=function(){return!0},r=function(t,e){return t.get(e)},o=function(t,e,i){var n=t(),r=e();if(this.activeVelocity){if(this.enact&&!r&&(this.ready=!1),this.ready&&this.enact&&n)this.ready=!1,this.velocity.setVector(this.instant),i&&this.owner.triggerEvent(i);else if(this.ready||this.enact&&n){if(r)return null}else this.ready=!0,this.decay();return this.velocity}return null},s=function(t,e){return this.activeVelocity&&t()?(this.activeAcceleration&&this.move(e),this.velocity):null},Object(h.a)({id:"Motion",properties:{orient:!0,acceleration:0,activeAcceleration:!0,activeVelocity:!0,maxMagnitude:1/0,controlState:"",instant:!1,instantState:"",instantSuccess:"",instantDecay:null,velocity:0,stopOnCollision:!0,drag:-1,friction:-1},initialize:function(t){this.acceleration||(this.activeAcceleration=!1),this.acceleration=a.a.setUp(this.acceleration),this.velocity=a.a.setUp(this.velocity),this.triggered=!1,this.ready=!0,"number"==typeof this.instantDecay?this.capMagnitude=this.velocity.magnitude()*this.instantDecay:this.capMagnitude=-1,function(t,e){var i=t.owner.state,a=e.controlState?r.bind(null,i,e.controlState):n,h=e.instantState?r.bind(null,i,e.instantState):n;t.instant||e.instantState?(t.instant=!0,t.update=o.bind(t,h,a,e.instantSuccess)):t.update=s.bind(t,a)}(this,t),this.instant&&(this.enact=!1,this.instant=a.a.setUp(this.velocity),this.velocity.setXYZ(0,0,0)),this.orient&&(this.owner.triggerEvent("orient-vector",this.velocity),this.owner.triggerEvent("orient-vector",this.acceleration))},events:{"control-velocity":function(t){this.activeVelocity=t&&!1!==t.pressed},"stop-velocity":function(){this.activeVelocity=!1},"start-velocity":function(){this.activeVelocity=!0},"control-acceleration":function(t){this.activeAcceleration=t&&!1!==t.pressed},"stop-acceleration":function(){this.activeAcceleration=!1},"start-acceleration":function(){this.activeAcceleration=!0},"instant-motion":function(t){this.enact=t&&!1!==t.triggered},"instant-begin":function(){this.enact=!0},"instant-end":function(){this.enact=!1},"set-motion":function(t){t.acceleration&&this.acceleration.set(t.acceleration),t.velocity&&(this.velocity.set(t.velocity),"number"==typeof this.instantDecay?this.capMagnitude=this.velocity.magnitude()*this.instantDecay:this.capMagnitude=-1),"number"==typeof t.maxMagnitude&&(this.maxMagnitude=t.maxMagnitude)}},methods:{move:function(t){var e=a.a.setUp(this.acceleration).multiply(t);return this.velocity.add(e),e.recycle(),this.velocity.magnitude()>this.maxMagnitude&&this.velocity.normalize().multiply(this.maxMagnitude),this.velocity},decay:function(){this.capMagnitude>=0&&this.velocity.magnitude()>this.capMagnitude&&this.velocity.normalize().multiply(this.capMagnitude)},destroy:function(){this.orient&&(this.owner.triggerEvent("remove-vector",this.acceleration),this.owner.triggerEvent("remove-vector",this.velocity)),this.acceleration.recycle(),this.velocity.recycle(),this.instant&&this.instant.recycle()}},publicMethods:{}}))},function(t,e,i){"use strict";var n,r,o,s,a=i(0),h=i(11),u=i(4);e.a=(n=h.a.setUp(),r=function(t,e,i,n){return t&&e!==i?e<i?Math.min(e+t*n,i):Math.max(e-t*n,i):e},o=function(t,e){var i=this.maxMagnitudeInterim=r(this.maxMagnitudeDelta,this.maxMagnitudeInterim,this.maxMagnitude,e);t.magnitude()>i&&t.normalize().multiply(i)},s=function(t,e){var i=this.maxMagnitude,n=this.maxMagnitudeDelta,o=this.maxMagnitudeInterim;o.up=r(n,o.up,i.up,e),o.right=r(n,o.right,i.right,e),o.down=r(n,o.down,i.down,e),o.left=r(n,o.left,i.left,e),t.x>0?t.x>o.right&&(t.x=o.right):t.x<0&&t.x<-o.left&&(t.x=-o.left),t.y>0?t.y>o.down&&(t.y=o.down):t.y<0&&t.y<-o.up&&(t.y=-o.up)},Object(u.a)({id:"Mover",properties:{ground:[0,1]},publicProperties:{movers:[],gravity:0,jump:0,speed:0,drag:.01,friction:.06,maxMagnitude:1/0,maxMagnitudeDelta:0,reorientVelocities:!0},initialize:function(){var t=1/0,e=this.maxMagnitude,i=this.owner.state;h.a.assign(this.owner,"position","x","y","z"),h.a.assign(this.owner,"velocity","dx","dy","dz"),this.position=this.owner.position,this.velocity=this.owner.velocity,this.lastVelocity=h.a.setUp(this.velocity),this.collision=null,this.pause=!1,this.moversCopy=this.movers,this.movers=a.a.setUp(),this.velocityChanges=a.a.setUp(),this.velocityDirections=a.a.setUp(),this.ground=h.a.setUp(this.ground),this.state=i,i.set("grounded",!1),Object.defineProperty(this.owner,"maxMagnitude",{get:function(){return t},set:function(e){"number"==typeof e?(this.clamp=o,t=e,this.maxMagnitudeDelta||(this.maxMagnitudeInterim=e)):(this.clamp=s,"number"==typeof t&&(t={up:t,right:t,down:t,left:t}),"number"==typeof e.up&&(t.up=e.up),"number"==typeof e.right&&(t.right=e.right),"number"==typeof e.down&&(t.down=e.down),"number"==typeof e.left&&(t.left=e.left),"number"==typeof this.maxMagnitudeInterim?this.maxMagnitudeDelta?this.maxMagnitudeInterim={up:this.maxMagnitudeInterim,right:this.maxMagnitudeInterim,down:this.maxMagnitudeInterim,left:this.maxMagnitudeInterim}:this.maxMagnitudeInterim={up:t.up,right:t.right,down:t.down,left:t.left}:this.maxMagnitudeDelta||(this.maxMagnitudeInterim.up=t.up,this.maxMagnitudeInterim.right=t.right,this.maxMagnitudeInterim.down=t.down,this.maxMagnitudeInterim.left=t.left))}.bind(this)}),this.maxMagnitudeInterim=0,this.maxMagnitude=e},events:{"component-added":function(t){"Motion"===t.type&&this.movers.push(t)},"component-removed":function(t){var e=0;"Motion"===t.type&&(e=this.movers.indexOf(t))>=0&&Object(a.c)(this.movers,e)},load:function(){var t=0,e=this.moversCopy;for(delete this.moversCopy,t=0;t<e.length;t++)this.addMover(e[t]);this.externalForces=this.addMover({velocity:[0,0,0],orient:!1}).velocity,this.speed&&(isNaN(this.speed)||(this.speed=[this.speed,0,0]),this.speed=this.addMover({velocity:this.speed,controlState:"moving"}).velocity),this.gravity&&(isNaN(this.gravity)||(this.gravity=[0,this.gravity,0]),this.gravity=this.addMover({acceleration:this.gravity,orient:!1,aliases:{gravitate:"control-acceleration"}}).acceleration),this.jump&&(isNaN(this.jump)||(this.jump=[0,this.jump,0]),this.jump=this.addMover({velocity:this.jump,instant:!0,controlState:"grounded",state:"jumping",instantSuccess:"just-jumped",instantDecay:.2,aliases:{jump:"instant-motion"}}).instant)},"handle-movement":function(t){var e=t.delta,i=null,n=this.state,r=null,o=this.velocity,s=this.position,a=this.movers,u=a.length;if(!n.get("paused")&&!this.paused){for(o.equals(this.lastVelocity,2)||this.externalForces.addVector(o).subtractVector(this.lastVelocity),o.setXYZ(0,0,0);u--;)(i=a[u].update(e))&&(this.grounded?-1!==a[u].friction?i.multiply(1-a[u].friction):i.multiply(1-this.friction):-1!==a[u].drag?i.multiply(1-a[u].drag):i.multiply(1-this.drag),o.add(i));this.clamp(o,e),this.lastVelocity.setVector(o),r=h.a.setUp(o).multiply(e),s.add(r),r.recycle(),n.set("grounded",this.grounded),this.grounded=!1}},"hit-solid":function(t){var e=0,i=0,n=t.entity&&t.entity.velocity,r=t.direction,o=!0,s=this.velocityChanges,a=this.velocityDirections,u=s.length;if(r.dot(this.ground)>0&&(this.grounded=!0),(e=this.velocity.scalarProjection(r))>0){for(e=n&&(i=Math.max(n.scalarProjection(r),0))<e?i:0;u--;)if(e<s[u]&&a[u].dot(r)>0){s[u]=e,a[u].setVector(r),o=!1;break}o&&(s.push(e),a.push(h.a.setUp(r)))}},"handle-post-collision-logic":function(){var t=null,e=this.movers,i=this.velocityChanges,r=this.velocityDirections,o=i.length,s=e.length,h=null,u=0,l=null,c=n;if(o){for(l=a.a.setUp();s--;)(h=e[s]).stopOnCollision&&l.push(h);for(;o--;){for(t=r[o],u=i[o]/(s=l.length);s--;)h=l[s],c.setVector(t).normalize().multiply(u-h.velocity.scalarProjection(t)),h.velocity.add(c);t.recycle()}i.length=0,r.length=0,a.a.recycle(l)}},"set-mover":function(t){"number"==typeof t.maxMagnitudeDelta&&(this.maxMagnitudeDelta=t.maxMagnitudeDelta),t.maxMagnitude&&(this.maxMagnitude=t.maxMagnitude)},"pause-movement":function(){this.paused=!0},"unpause-movement":function(){this.paused=!1},"orientation-updated":function(t){this.reorientVelocities||this.lastVelocity.multiply(t)}},methods:{destroy:function(){var t=0,e=this.maxMagnitude;for(t=this.movers.length-1;t>=0;t--)this.removeMover(this.movers[t]);a.a.recycle(this.movers),this.ground.recycle(),this.lastVelocity.recycle(),a.a.recycle(this.velocityChanges),a.a.recycle(this.velocityDirections),delete this.owner.maxMagnitude,this.owner.maxMagnitude=e,this.state=null}},publicMethods:{addMover:function(t){return this.owner.addComponent(new platypus.components.Motion(this.owner,t))},removeMover:function(t){this.owner.removeComponent(t)}}}))},function(t,e,i){"use strict";var n=i(0),r=i(11),o=i(4);e.a=Object(o.a)({id:"Node",publicProperties:{x:0,y:0,z:0},initialize:function(t){this.nodeId=t.nodeId||this.owner.nodeId||this.owner.id||String(Math.random()),"string"!=typeof this.nodeId&&this.nodeId.length&&(this.nodeId=t.nodeId.join("|")),this.owner.nodeId=this.nodeId,this.owner.isNode=!0,this.map=this.owner.map=this.owner.map||this.owner.parent||null,this.contains=this.owner.contains=n.a.setUp(),this.edgesContain=this.owner.edgesContain=n.a.setUp(),r.a.assign(this.owner,"position","x","y","z"),this.neighbors=this.owner.neighbors=t.neighbors||this.owner.neighbors||{}},events:{"add-neighbors":function(t){var e=0,i=null;for(i in t)t.hasOwnProperty(i)&&(this.neighbors[i]=t[i]);for(e=0;e<this.contains.length;e++)this.contains[e].triggerEvent("set-directions")},"remove-neighbor":function(t){var e=null,i=t;for(e in"string"!=typeof i&&(i=i.nodeId),this.neighbors)if(this.neighbors.hasOwnProperty(e))if("string"==typeof this.neighbors[e]){if(this.neighbors[e]===i){delete this.neighbors[e];break}}else if(this.neighbors[e].nodeId===i){delete this.neighbors[e];break}}},methods:{destroy:function(){n.a.recycle(this.contains),this.contains=this.owner.contains=null,n.a.recycle(this.edgesContain),this.edgesContain=this.owner.edgesContain=null}},publicMethods:{getNode:function(t){var e=null;if(!this.map&&this.owner.map&&(this.map=this.owner.map),this.neighbors[t]){if((e=this.neighbors[t]).isNode)return e;if("string"==typeof e){if(e=this.map.getNode(e))return this.neighbors[t]=e,e}else if(e.length&&(e=this.map.getNode(e.join("|"))))return this.neighbors[t]=e,e;return null}return null},addToNode:function(t){var e=0;for(e=0;e<this.contains.length;e++)if(this.contains[e]===t)return!1;return this.contains.push(t),t},removeFromNode:function(t){var e=0;for(e=0;e<this.contains.length;e++)if(this.contains[e]===t)return Object(n.c)(this.contains,e);return!1},addToEdge:function(t){var e=0;for(e=0;e<this.edgesContain.length;e++)if(this.edgesContain[e]===t)return!1;return this.edgesContain.push(t),t},removeFromEdge:function(t){var e=0;for(e=0;e<this.edgesContain.length;e++)if(this.edgesContain[e]===t)return Object(n.c)(this.edgesContain,e);return!1}}})},function(t,e,i){"use strict";var n,r,o=i(0),s=i(23),a=i(11),h=i(14),u=i.n(h),l=i(4),c=i(20);e.a=((r=(n=function(t,e){t.id?"string"==typeof t.id?this.id=t.id:Array.isArray(t.id)?this.id=t.id.join("|"):this.id=String(Math.random()):this.id=String(Math.random()),this.isNode=!0,this.map=e,this.contains=o.a.setUp(),this.type=t.type||"",this.position||a.a.assign(this,"position","x","y","z"),this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.neighbors=t.neighbors||{}}).prototype).getNode=function(t){var e=null;if(this.neighbors[t]){if((e=this.neighbors[t]).isNode)return e;if("string"==typeof e){if(e=this.map.getNode(e))return this.neighbors[t]=e,e}else if(Array.isArray(e)&&(e=this.map.getNode(e.join("|"))))return this.neighbors[t]=e,e;return null}return null},r.add=function(t){var e=0;for(e=0;e<this.contains.length;e++)if(this.contains[e]===t)return!1;return this.contains.push(t),t},r.remove=function(t){var e=0;for(e=0;e<this.contains.length;e++)if(this.contains[e]===t)return Object(o.c)(this.contains,e);return!1},c.a.add(n,"Node",n,(function(){o.a.recycle(this.contains)}),!0,u.a.dev),Object(l.a)({id:"NodeMap",publicProperties:{map:[]},initialize:function(){var t=0,e=this.map;for(this.map=o.a.setUp(),this.nodes={},this.residentsAwaitingNode=o.a.setUp(),t=0;t<e.length;t++)this.addNode(n.setUp(e[t],this))},events:{"add-node":function(t){var e=0,i=null,r=null;for(t.isNode?(r=t,t.map=this):r=n.setUp(t,this),this.addNode(r),e=this.residentsAwaitingNode.length-1;e>=0;e--)i=this.residentsAwaitingNode[e],r.id===i.nodeId&&(Object(o.c)(this.residentsAwaitingNode,e),i.node=this.getNode(i.nodeId),i.triggerEvent("on-node",i.node))},"child-entity-added":function(t){t.isNode?this.owner.triggerEvent("add-node",t):t.nodeId&&(t.node=this.getNode(t.nodeId),t.node?t.triggerEvent("on-node",t.node):this.residentsAwaitingNode.push(t))}},methods:{addNode:function(t){this.map.push(t),this.nodes[t.id]=t},destroy:function(){var t=0;for(t=0;t<this.map.length;t++)this.map[t]instanceof s.a||this.map[t].recycle();o.a.recycle(this.map),o.a.recycle(this.residentsAwaitingNode)}},publicMethods:{getNode:function(){var t=0,e="",i="",n=arguments;if(1===n.length){if(n[0].isNode)return n[0];Array.isArray(n[0])&&(n=n[0])}for(t=0;t<n.length;t++)e+=i+n[t],i="|";return this.nodes[e]||null},getClosestNode:function(t,e,i){var n=0,r=a.a.setUp(t),o=a.a.setUp(),s=0,h=e||this.map,u=null,l=1/0;for(n=0;n<h.length;n++)if((s=o.setVector(r).subtractVector(h[n].position).magnitude())<l){if(i&&i.indexOf(h[n])>=0)break;l=s,u=h[n]}return r.recycle(),o.recycle(),u}}}))},function(t,e,i){"use strict";var n,r,o,s,a,h,u,l,c=i(0),f=i(4);e.a=(a=function(t,e,i){return function(){var n=e.getNode(t);return!!this.isPassable(n)&&(this.destinationNodes.length=0,this.destinationNodes.push(n),this.node?this.onEdge(n):this.distance=0,this.progress=0,this.setState("going-"+i),!0)}},h=function(t,e){var i=e.x-t.x,n=e.y-t.y,r=e.z-t.z;return Math.sqrt(i*i+n*n+r*r)},u=function(t,e,i,n){var r=e.x-t.x,o=e.y-t.y,s=0;return t.rotation&&e.rotation?((r=(t.rotation+180)%360)*(1-n)+(o=(e.rotation+180)%360)*n+180)%360:i?(s=Math.acos(r/i),o<0&&(s=2*Math.PI-s),180*s/Math.PI):s},l=function(t,e,i,n){return e*(1-t)+i*t+n},Object(f.a)({id:"NodeResident",publicProperties:{speed:0},initialize:function(t){var e=t.offset||this.owner.nodeOffset||{};this.nodeId=this.owner.nodeId=t.nodeId||this.owner.nodeId,this.neighbors={},this.friendlyNodes=t.nodes||null,this.friendlyEntities=t.shares||null,this.snapToNodes=t.snapToNodes||!1,this.updateOrientation=t.updateOrientation||!1,this.distance=0,this.buffer=t.buffer||0,this.progress=0,this.offset={x:e.x||0,y:e.y||0,z:e.z||0},this.destinationNodes=c.a.setUp(),this.algorithm=t.algorithm||h,this.state=this.owner.state,this.state.set("moving",!1),this.state.set("on-node",!1),this.currentState=""},events:{"set-algorithm":function(t){this.algorithm=t||h},"handle-logic":function(t){var e=0,i=0,n=0,r=null,o=null;if(this.owner.node||(o=c.a.setUp(this.owner.x,this.owner.y),this.owner.triggerEvent("on-node",this.owner.parent.getClosestNode(o)),c.a.recycle(o),this.owner.triggerEvent("in-location",this.owner)),this.followEntity?(r=this.followEntity.node||this.followEntity)&&r.isNode&&r!==this.node?(this.lag=0,this.state.set("moving",this.gotoNode()),this.followDistance&&(n=this.lag)):this.followEntity=null:n=this.speed*t.delta,this.blocked&&(this.blocked=!1,this.goingToNode&&this.owner.triggerEvent("goto-closest-node",this.goingToNode)),this.destinationNodes.length){if(this.state.set("moving",0!==this.speed),this.node)this.onEdge(this.destinationNodes[0]);else if(!this.lastNode&&(this.owner.triggerEvent("on-node",this.destinationNodes[0]),this.destinationNodes.shift(),!this.destinationNodes.length))return void this.state.set("moving",!1);if(this.snapToNodes){for(e=0;e<this.destinationNodes.length;e++)this.owner.triggerEvent("on-node",this.destinationNodes[e]);this.destinationNodes.length=0}else for(;this.destinationNodes.length&&n;)this.progress+n>=this.distance?(r=this.destinationNodes[0],n-=this.distance-this.progress,this.progress=0,this.destinationNodes.shift(),this.owner.triggerEvent("on-node",r),this.destinationNodes.length&&n&&this.onEdge(this.destinationNodes[0])):(this.progress+=n,i=this.progress/this.distance,this.owner.x=l(i,this.lastNode.x,this.destinationNodes[0].x,this.offset.x),this.owner.y=l(i,this.lastNode.y,this.destinationNodes[0].y,this.offset.y),this.owner.z=l(i,this.lastNode.z,this.destinationNodes[0].z,this.offset.z),this.updateOrientation&&(this.owner.rotation=u(this.lastNode,this.destinationNodes[0],this.distance,i)),n=0)}else this.state.set("moving",!1)},"on-node":function(t){var e=0,i=null;for(this.owner.node=this.node=t,this.node.removeFromEdge(this.owner),this.lastNode&&this.lastNode.removeFromEdge(this.owner),this.node.addToNode(this.owner),this.setState("on-node"),this.owner.x=this.node.x+this.offset.x,this.owner.y=this.node.y+this.offset.y,this.owner.z=this.node.z+this.offset.z,this.updateOrientation&&this.node.rotation&&(this.owner.rotation=this.node.rotation),this.owner.triggerEvent("set-directions"),this.friendlyNodes&&this.friendlyNodes[t.type]&&this.owner.trigger(this.friendlyNodes[t.type],t),i=t.contains,e=0;e<i.length;e++)this.owner!==i[e]&&(i[e].triggerEvent("with-"+this.owner.type,this.owner),this.owner.triggerEvent("with-"+i[e].type,i[e]))},"leave-node":function(){this.node&&(this.node.removeFromNode(this.owner),this.owner.triggerEvent("left-node",this.node),this.owner.triggerEvent("remove-directions")),this.lastNode=this.node,this.node=null},"goto-node":function(t){this.gotoNode(t)},follow:function(t){t.entity?(this.followDistance=t.distance,this.followEntity=t.entity):(this.followDistance=0,this.followEntity=t)},"goto-closest-node":(r=function(t,e){var i=0;for(i=0;i<e.length;i++)if(e[i]===t)return!0;return!1},o=function(t,e){return t.type===e},s=function(t,e){return t.type===e.type},function(t){var e=null,i=this.node||this.lastNode,n=null,a=t.steps||0,h=null;this.goingToNode=t,n="string"==typeof t?o:"string"==typeof t.type?s:r,i&&t&&!n(i,t)&&(h=c.a.setUp(),(e=this.traverseNode({depth:20,origin:i,position:i,test:n,destination:t,nodes:h,shortestPath:1/0,distance:0,found:!1,algorithm:this.algorithm,blocked:!1})).distance-=this.progress,e.found?this.followEntity&&this.followDistance?e.distance+(this.followEntity.progress||0)>this.followDistance?(this.lag=e.distance+(this.followEntity.progress||0)-this.followDistance,this.setPath(e,a)):this.lag=0:this.setPath(e,a):e.blocked&&(this.blocked=!0),c.a.recycle(h))}),"set-directions":function(){var t="",e=0,i=null,n=this.node,r=null;for(t in this.owner.triggerEvent("remove-directions"),n.neighbors)if(n.neighbors.hasOwnProperty(t)&&(this.neighbors[t]=a(n.neighbors[t],n.map,t),this.addEventListener(t,this.neighbors[t]),r=n.map.getNode(n.neighbors[t])))for(i=r.contains,e=0;e<i.length;e++)i[e].triggerEvent("next-to-"+this.owner.type,this.owner),this.owner.triggerEvent("next-to-"+i[e].type,i[e])},"remove-directions":function(){var t="";for(t in this.neighbors)this.neighbors.hasOwnProperty(t)&&(this.removeEventListener(t,this.neighbors[t]),delete this.neighbors[t])}},methods:{gotoNode:(n=function(t,e){return t===e},function(t){var e=null,i=this.node||this.lastNode,r=null,o=!1;return!t&&this.followEntity&&(t=this.followEntity.node||this.followEntity.lastNode||this.followEntity),i&&t&&this.node!==t&&(r=c.a.setUp(),(e=this.traverseNode({depth:20,origin:i,position:i,test:n,destination:t,nodes:r,shortestPath:1/0,distance:0,found:!1,algorithm:this.algorithm,blocked:!1})).distance-=this.progress,e.found?this.followEntity&&this.followDistance?e.distance+(this.followEntity.progress||0)>this.followDistance?(this.lag=e.distance+(this.followEntity.progress||0)-this.followDistance,this.setPath(e),o=!0):this.lag=0:(this.setPath(e),o=!0):e.blocked&&(this.blocked=!0),c.a.recycle(r)),o}),isPassable:function(t){return t&&this.node!==t&&(!this.friendlyNodes||void 0!==this.friendlyNodes[t.type])&&(!t.contains.length||function(t,e){var i=0,n=0,r=!1;if(null===e)return!0;for(i=0;i<t.length;i++){for(n=0;n<e.length;n++)t[i].type===e[n]&&(r=!0);if(!r)return!1;r=!1}return!0}(t.contains,this.friendlyEntities))},traverseNode:function(t){var e=1,i="",n=t.position.map,r=null,o=null,s=null,a=null,u=t.algorithm||h,l={shortestPath:1/0,found:!1,blocked:!1},f=!0,d=!1;if(0===t.depth||t.distance>t.shortestPath)return t;if(t.test(t.position,t.destination))return t.found=!0,t.shortestPath=t.distance,t;for(s=t.nodes,e=1;e<s.length-1;e++)if(s[e]===t.position)return t;for(i in r=t.position.neighbors)r.hasOwnProperty(i)&&(o=n.getNode(r[i]),d=!0,this.isPassable(o)&&((s=Object(c.b)(t.nodes)).push(o),a=this.traverseNode({depth:t.depth-1,origin:t.origin,position:o,destination:t.destination,test:t.test,algorithm:u,nodes:s,shortestPath:t.shortestPath,distance:t.distance+u(t.position,o),gateway:t.gateway||i,found:!1,blocked:!1}),c.a.recycle(s),a.found&&l.shortestPath>a.shortestPath&&(l=a),f=!1));return l.blocked=d&&f,l},setPath:function(t,e){t.nodes[0]===this.node&&t.nodes.shift(),c.a.recycle(this.destinationNodes),this.destinationNodes=Object(c.b)(t.nodes),e&&(this.destinationNodes.length=Math.min(e,this.destinationNodes.length))},setState:function(t){"on-node"===t?this.state.set("on-node",!0):(this.state.set("on-node",!1),this.currentState&&this.state.set(this.currentState,!1),this.currentState=t,this.state.set(t,!0))},onEdge:function(t){this.distance=h(this.node,t),this.updateOrientation&&(this.owner.rotation=u(this.node,t,this.distance,this.progress/this.distance)),this.node.addToEdge(this.owner),t.addToEdge(this.owner),this.owner.triggerEvent("leave-node")},destroy:function(){c.a.recycle(this.destinationNodes),this.destinationNodes=null,this.state=null}}}))},function(t,e,i){"use strict";var n,r,o,s,a,h,u,l,c,f,d,p=i(0),g=i(7),v=i(11),m=i(4),y=i(41);e.a=(u=v.a.setUp(0,0,1),l=v.a.setUp(1,0,0),c={identity:[[1,0,0],[0,1,0],[0,0,1]],horizontal:[[-1,0,0],[0,1,0],[0,0,-1]],vertical:[[1,0,0],[0,-1,0],[0,0,-1]],diagonal:[[0,1,0],[1,0,0],[0,0,-1]],"diagonal-inverse":[[0,-1,0],[-1,0,0],[0,0,-1]],"rotate-90":[[0,-1,0],[1,0,0],[0,0,1]],"rotate-180":[[-1,0,0],[0,-1,0],[0,0,1]],"rotate-270":[[0,1,0],[-1,0,0],[0,0,1]]},n=function(t,e,i){var n=0,r=0;for(n=0;n<t.length;n++)r+=t[n]*i[n][e];return r},f=function(t,e,i){var r=0,o=0,s=p.a.setUp();for(r=0;r<t.length;r++)for(o=0;o<t[0].length;o++)s.push(n(t[r],o,e));for(r=0;r<t.length;r++)for(o=0;o<t[0].length;o++)i[r][o]=s.shift();p.a.recycle(s)},d=function(t){var e=0,i=0;for(e=0;e<3;e++)for(i=0;i<3;i++)t[e][i]=e===i?1:0;return t},Object(m.a)({id:"Orientation",publicProperties:{scaleX:1,scaleY:1,rotation:0,orientation:0,orientationMatrix:null},initialize:function(){this.loadedOrientationMatrix=this.orientationMatrix,this.matrix=p.a.setUp(p.a.setUp(1,0,0),p.a.setUp(0,1,0),p.a.setUp(0,0,1)),this.matrixTween=p.a.setUp(p.a.setUp(1,0,0),p.a.setUp(0,1,0),p.a.setUp(0,0,1)),this.relocationMessage=g.a.setUp("position",null),this.vectors=p.a.setUp(),this.inverses=p.a.setUp(),this.tweens=p.a.setUp(),this.orientationVector=function(t,e){var i=v.a.setUp(1,0,0),n=t.owner,r=p.a.setUp(p.a.setUp(1,0,0),p.a.setUp(0,1,0),p.a.setUp(0,0,1));return Object.defineProperty(n,"orientationMatrix",{get:function(){return f(t.matrixTween,t.matrix,d(r)),r},enumerable:!0}),delete n.orientation,Object.defineProperty(n,"orientation",{get:function(){return i.signedAngleTo(l,u)},set:function(t){i.setVector(l).rotate(t)},enumerable:!0}),Object.defineProperty(n,"rotation",{get:function(){return n.orientation/Math.PI*180},set:function(t){n.orientation=t*Math.PI/180},enumerable:!0}),e&&("number"!=typeof e?i.set(e):i.rotate(e)),i}(this,this.orientation),this.owner.triggerEvent("orient-vector",this.orientationVector),this.owner.state.set("reorienting",!1)},events:{load:function(){this.loadedOrientationMatrix?this.transform(this.loadedOrientationMatrix):(this.scaleX&&this.scaleX<0&&(this.scaleX=-this.scaleX,this.transform("horizontal")),this.scaleY&&this.scaleY<0&&(this.scaleY=-this.scaleY,this.transform("vertical")),this.rotation&&((this.rotation+270)%360==0?(this.rotation=0,this.transform("rotate-90")):(this.rotation+180)%360==0?(this.rotation=0,this.transform("rotate-180")):(this.rotation+90)%360==0&&(this.rotation=0,this.transform("rotate-270")))),delete this.loadedOrientationMatrix},"handle-logic":function(t){var e=this.tweens.length,i=t.delta,n=this.owner.state,r=null,o=null,s=this.relocationMessage;if(e){for(r=p.a.setUp(),n.set("reorienting",!0),d(this.matrixTween);e--;)this.updateTween(this.tweens[e],i)&&r.push(Object(p.c)(this.tweens,e));for(e=this.vectors.length;e--;)this.updateVector(this.vectors[e],this.inverses[e]);for(e=r.length;e--;)o=r[e],this.transform(o.endMatrix),o.anchor&&(o.offset.multiply(o.endMatrix).addVector(o.anchor),s.position=o.offset,this.owner.triggerEvent("relocate-entity",s),o.recycleOffset&&o.offset.recycle()),o.onFinished(o.endMatrix),o.recycle();p.a.recycle(r)}else n.get("reorienting")&&(d(this.matrixTween),n.set("reorienting",!1))},"complete-tweens":function(){var t=0;for(t=0;t<this.tweens.length;t++)this.tweens[t].time=this.tweens[t].endTime},"drop-tweens":function(){var t=0;for(t=this.tweens.length;t--;)this.tweens[t].offset&&this.tweens[t].offset.recycle();for(this.tweens.length=0,t=this.vectors.length;t--;)this.updateVector(this.vectors[t],this.inverses[t])},"orient-vector":function(t){var e=t.aligned||!1;t.vector&&(t=t.vector),-1===this.vectors.indexOf(t)&&(e||t.multiply(this.matrix),this.vectors.push(t),this.inverses.push(v.a.setUp()))},"remove-vector":function(t){var e=this.vectors.indexOf(t);e>=0&&(Object(p.c)(this.vectors,e),Object(p.c)(this.inverses,e).recycle())},"tween-transform":(s=function(){},a=function(){return!0},h=function(t){return t},function(t){var e=null,i=t.angle||0,n=t.matrix,r=g.a.setUp("transform",t.transform,"anchor",t.anchor,"endTime",t.time||0,"time",0,"tween",t.tween||h,"onFinished",t.onFinished||s,"beforeTick",t.beforeTick||a,"afterTick",t.afterTick||s);if(n||(n=c[t.transform]),r.endMatrix=n,!i&&0===t.transform.indexOf("rotate"))switch(t.transform){case"rotate-90":i=Math.PI/2;break;case"rotate-180":i=Math.PI;break;case"rotate-270":i=-Math.PI/2;break;default:i=(e=Object(y.a)(t.transform,"-"))[1]/180*Math.PI,p.a.recycle(e)}r.angle=i,t.anchor&&(r.offset=t.offset,r.offset||(r.offset=this.owner.position.copy().subtractVector(t.anchor,2),r.recycleOffset=!0)),this.tweens.push(r)}),transform:function(t){this.transform(t)},"prepend-transform":function(t){this.transform(t)},"append-transform":function(t){this.transform(t,!0)},"replace-transform":function(t){Array.isArray(t)?this.replace(t):"string"==typeof t&&c[t]&&this.replace(c[t])}},methods:{transform:function(t,e){Array.isArray(t)?this.multiply(t,e):"string"==typeof t&&c[t]&&this.multiply(c[t],e)},multiply:function(t,e){var i=0;for(e?f(this.matrix,t,this.matrix):f(t,this.matrix,this.matrix),i=0;i<this.vectors.length;i++)this.vectors[i].multiply(t),this.inverses[i].multiply(t);this.owner.triggerEvent("orientation-updated",t)},replace:(o=function(t,e,i,n){return t*n-e*i},function(t){var e,i,n,r=(e=this.matrix,i=p.a.setUp(p.a.setUp(),p.a.setUp(),p.a.setUp()),n=1/function(t){var e=0,i=0;for(e=0;e<3;e++)i+=t[e][0]*t[(e+1)%3][1]*t[(e+2)%3][2],i-=t[e][2]*t[(e+1)%3][1]*t[(e+2)%3][0];return i}(e),i[0].push(o(e[1][1],e[1][2],e[2][1],e[2][2])*n),i[0].push(o(e[0][2],e[0][1],e[2][2],e[2][1])*n),i[0].push(o(e[0][1],e[0][2],e[1][1],e[1][2])*n),i[1].push(o(e[1][2],e[1][0],e[2][2],e[2][0])*n),i[1].push(o(e[0][0],e[0][2],e[2][0],e[2][2])*n),i[1].push(o(e[0][2],e[0][0],e[1][2],e[1][0])*n),i[2].push(o(e[1][0],e[1][1],e[2][0],e[2][1])*n),i[2].push(o(e[0][1],e[0][0],e[2][1],e[2][0])*n),i[2].push(o(e[0][0],e[0][1],e[1][0],e[1][1])*n),i);this.multiply(r),this.multiply(t),p.a.recycle(r,2)}),updateTween:(r=function(t,e,i){return t*(1-i)+e*i},function(t,e){var i,n,o=1,s=0,a=0,h=1,u=1,l=0,c=t.endMatrix,d=null,g=null;return t.beforeTick(t.time)&&(t.time+=e),t.time>=t.endTime||(i=t.tween(t.time/t.endTime),t.angle?(l=i*t.angle,o=h=Math.cos(l),a=-(s=Math.sin(l))):(o=r(o,c[0][0],i),s=r(s,c[1][0],i),a=r(a,c[0][1],i),h=r(h,c[1][1],i),u=r(u,c[2][2],i)),n=p.a.setUp(p.a.setUp(o,a,0),p.a.setUp(s,h,0),p.a.setUp(0,0,u)),f(this.matrixTween,n,this.matrixTween),t.anchor&&(d=v.a.setUp(t.offset).multiply(1-i),g=v.a.setUp(t.offset).multiply(i),this.owner.triggerEvent("relocate-entity",{position:d.add(g).multiply(n).addVector(t.anchor)}),d.recycle(),g.recycle()),t.afterTick(i,n),p.a.recycle(n,2),!1)}),updateVector:function(t,e){e.setVector(t.add(e)),t.multiply(this.matrixTween),e.subtractVector(t)},destroy:function(){p.a.recycle(this.vectors),this.vectors=null,p.a.recycle(this.inverses),this.inverses=null,p.a.recycle(this.tweens),this.tweens=null,this.orientationVector.recycle(),this.orientationVector=null,p.a.recycle(this.orientationMatrix,2),p.a.recycle(this.matrix,2),this.matrix=null,p.a.recycle(this.matrixTween,2),this.matrixTween=null,this.relocationMessage.recycle(),this.relocationMessage=null}}}))},function(t,e,i){"use strict";var n,r=i(4);e.a=(n=function(t){return function(e,i){this.owner.trigger(t[Math.floor(Math.random()*t.length)],e,i)}},Object(r.a)({id:"RandomEvents",initialize:function(t){var e="";if(t.events)for(e in t.events)t.events.hasOwnProperty(e)&&this.addEventListener(e,n(t.events[e]))}}))},function(t,e,i){"use strict";var n=i(12),r=i(4);e.a=Object(r.a)({id:"RelativePosition",properties:{cameraSizes:null},publicProperties:{bottom:null,left:null,right:null,top:null,scaleX:1,scaleY:1,x:0,y:0},initialize:function(){this.aabb=n.a.setUp(),this.lastBottom=null,this.lastLeft=null,this.lastRight=null,this.lastTop=null,this.cameraSizesIndex=-1},events:{"handle-logic":function(){var t=this.bottom,e=this.left,i=this.right,n=this.top;this.lastBottom===t&&this.lastLeft===e&&this.lastRight===i&&this.lastTop===n||(this.updatePosition(this.aabb),this.lastBottom=t,this.lastLeft=e,this.lastRight=i,this.lastTop=n)},"camera-update":function(t){this.aabb.set(t.viewport),this.cameraSizes&&this.checkCamera(this.aabb),this.updatePosition(this.aabb)}},methods:{checkCamera:function(t){var e=this.cameraSizes,i=0,n=t.width/t.height;for(i=0;i<e.length;i++)if(n>e[i].minRatio){i!==this.cameraSizesIndex&&(this.updateProperties(e[i]),this.cameraSizesIndex=i);break}},updateProperties:function(t){this.right="number"==typeof t.right?t.right:null,this.left="number"==typeof t.left?t.left:null,this.top="number"==typeof t.top?t.top:null,this.bottom="number"==typeof t.bottom?t.bottom:null,"number"==typeof t.x&&(this.x=t.x),"number"==typeof t.y&&(this.y=t.y),"number"==typeof t.scaleX&&(this.scaleX=t.scaleX),"number"==typeof t.scaleY&&(this.scaleY=t.scaleY)},updatePosition:function(t){var e=this.bottom,i=this.left,n=this.owner,r=this.right,o=this.top;"number"==typeof i?n.x=t.left+i:"number"==typeof r&&(n.x=t.right-r),"number"==typeof o?n.y=t.top+o:"number"==typeof e&&(n.y=t.bottom-e)},destroy:function(){this.aabb.recycle(),this.aabb=null}}})},function(t,e,i){"use strict";var n=i(0),r=i(4);e.a=Object(r.a)({id:"RelayFamily",properties:{events:null},initialize:function(){var t="";if(this.events)for(t in this.events)this.events.hasOwnProperty(t)&&this.addEventListener(t,this.broadcast.bind(this,null,this.events[t]));this.owner.familyLinks=n.a.setUp(this.owner)},events:{"link-family":function(t){var e=0,i=this.owner.familyLinks,r=Object(n.d)(Object(n.d)(n.a.setUp(),t),i);for(e=0;e<r.length;e++)r[e].familyLinks=r;this.broadcast(t,"family-members-added",i),this.broadcast(i,"family-members-added",t),n.a.recycle(i)},"entity-created":function(t){t.triggerEvent("link-family",this.owner.familyLinks)||(t.addComponent(new platypus.components.RelayFamily(t,{})),t.triggerEvent("link-family",this.owner.familyLinks))}},methods:{broadcast:function(t){var e=t||this.owner.familyLinks,i=0,r=Object(n.b)(arguments);for(r.shift(),i=0;i<e.length;i++)e[i].trigger.apply(e[i],r);n.a.recycle(r)},destroy:function(){var t=this.owner.familyLinks,e=t.indexOf(this.owner);e>=0&&Object(n.c)(t,e),this.broadcast(t,"family-member-removed",this.owner),this.events=null}}})},function(t,e,i){"use strict";var n,r=i(4);e.a=(n=function(){platypus.game.triggerOnChildren.apply(platypus.game,arguments)},Object(r.a)({id:"RelayGame",properties:{events:null},initialize:function(){var t="",e=this.events;if(e)for(t in e)e.hasOwnProperty(t)&&this.addEventListener(t,n.bind(this,e[t]))}}))},function(t,e,i){"use strict";var n=i(4),r=i(0),o={},s=function(){for(var t=this.channel,e=0;e<t.length;e++){var i;(i=t[e]).trigger.apply(i,arguments)}};e.a=Object(n.a)({id:"RelayLinker",properties:{linkId:"linked",events:null},initialize:function(){if(this.events)for(var t in this.events)this.events.hasOwnProperty(t)&&this.addEventListener(t,s.bind(this,this.events[t]));this.owner.linkId||(this.owner.linkId=this.linkId),this.channel=o[this.linkId],this.channel||(this.channel=o[this.linkId]=[])},events:{load:function(){this.channel.push(this.owner)}},methods:{destroy:function(){var t=this.channel.indexOf(this.owner);t>=0?Object(r.c)(this.channel,t):platypus.debug.warn("RelayLinker: Component destroyed, but entity not found on channel."),this.events=null}}})},function(t,e,i){"use strict";var n,r=i(4);e.a=(n=function(){var t=this.owner.parent;t&&t.trigger.apply(t,arguments)},Object(r.a)({id:"RelayParent",properties:{events:null},initialize:function(){var t="",e=this.events;if(e)for(t in e)e.hasOwnProperty(t)&&this.addEventListener(t,n.bind(this,e[t]))}}))},function(t,e,i){"use strict";var n,r=i(4);e.a=(n=function(){var t=this.owner;t.trigger.apply(t,arguments)},Object(r.a)({id:"RelaySelf",properties:{events:null},initialize:function(){var t="",e=this.events;if(e)for(t in e)e.hasOwnProperty(t)&&this.addEventListener(t,n.bind(this,e[t]))}}))},function(t,e,i){"use strict";var n,r,o=i(9),s=i(0),a=i(14),h=i.n(a),u=i(4),l={},c=function(t){var e,i,n=t.charCodeAt(0)||0,r=t.charCodeAt(1)||0,o=t.charCodeAt(2)||0;return r-=e=Math.min(n,r,o),o-=e,((n=204*(n-=e)/(i=Math.max(n,r,o,1))>>0)<<8)+((r=204*r/i>>0)<<4)+(o=204*o/i>>0)};e.a=(n=function(t,e,i,n,r,s,a,h){var u=(new o.Graphics).beginFill(e,.1);switch(h&&u.lineStyle(h,e),t){case"rectangle":u.drawRect(i,n,r,s);break;case"circle":u.drawCircle(0,0,r)}return u.z=a,u},r=function(t){return"string"==typeof t?parseInt(t.replace("#",""),16):t},Object(u.a)({id:"RenderDebug",properties:{aabbColor:16746751,collisionColor:0,groupColor:65280,renderColor:255,width:100,height:100,offsetZ:1e4},initialize:function(){this.container=new o.Container,this.parentContainer=this.owner.parent.worldContainer,this.parentContainer.addChild(this.container),this.parentContainer.reorder=!0,this.needsCameraCheck=!0,this.shapes=s.a.setUp(),this.isOutdated=!0,this.aabbColor=r(this.aabbColor),this.collisionColor=this.collisionColor?r(this.collisionColor):0,this.groupColor=r(this.groupColor),this.renderColor=r(this.renderColor)},events:{load:function(){h.a.dev||this.owner.removeComponent(this)},"camera-update":function(){this.needsCameraCheck=!0},"handle-render":function(){var t=null;this.isOutdated&&(this.updateSprites(),this.isOutdated=!1),this.owner.getCollisionGroupAABB&&(t=this.owner.getCollisionGroupAABB(),this.groupShape||(this.groupShape=n("rectangle",this.groupColor,-.5,-.5,1,1,this.offsetZ),this.container.addChild(this.groupShape)),this.groupShape.scaleX=t.width,this.groupShape.scaleY=t.height,this.groupShape.x=t.x-this.owner.x,this.groupShape.y=t.y-this.owner.y),this.update()},"orientation-updated":function(){this.isOutdated=!0},"collide-on":function(){this.isOutdated=!0},"collide-off":function(){this.isOutdated=!0}},methods:{update:function(){var t,e;t=this.owner.x,e=this.owner.y,this.container.z!==this.owner.z+1e-6&&(this.parentContainer.reorder=!0,this.container.z=this.owner.z+1e-6),this.container.setTransform(t,e,1,1,0,0,0),this.needsCameraCheck||(this.needsCameraCheck=this.lastX!==this.owner.x||this.lastY!==this.owner.y),this.needsCameraCheck&&(this.isOnCamera=this.owner.parent.isOnCanvas(this.container.getBounds(!1)),this.needsCameraCheck=!1),this.lastX=this.owner.x,this.lastY=this.owner.y,this.container.visible=this.isOnCamera},updateSprites:function(){var t=this.owner,e=this.offsetZ,i=0,r=0,o=this.width,s=this.height,a=null,h=null,u=null;for(i=0;i<this.shapes.length;i++)this.container.removeChild(this.shapes[i]);if(this.shapes.length=0,t.getAABB)for(r=0;r<t.collisionTypes.length;r++){var f=t.collisionTypes[r],d=this.collisionColor||l[f];for(d||(d=l[f]=c(f)),h=t.getAABB(f),o=this.initialWidth=h.width,s=this.initialHeight=h.height,a=t.getShapes(f),u=n("rectangle",this.aabbColor,h.left-t.x,h.top-t.y,o,s,e--),this.shapes.push(u),this.container.addChild(u),i=0;i<a.length;i++)o=a[i].width-2,s=a[i].height-2,u=n(a[i].type,d,a[i].offsetX-o/2,a[i].offsetY-s/2,a[i].radius?a[i].radius-2:o,s,e--,2),this.shapes.push(u),this.container.addChild(u)}else u=n("rectangle",this.renderColor,-o/2,-s/2,o,s,e--),this.shapes.push(u),this.container.addChild(u)},destroy:function(){var t=0;for(t=0;t<this.shapes.length;t++)this.container.removeChild(this.shapes[t]);s.a.recycle(this.shapes),this.parentContainer.removeChild(this.container),this.container=null}}}))},function(t,e,i){"use strict";var n=i(0),r=i(4);e.a=Object(r.a)({id:"RenderDestroyMe",properties:{animationId:"",animationIds:null},initialize:function(t){this.animationId?this.animationIds=n.a.setUp(t.animationId):this.animationIds&&(this.animationIds=Object(n.b)(this.animationIds))},events:{"animation-ended":function(t){(!this.animationIds||this.animationIds.indexOf(t)>=0)&&this.owner.parent.removeEntity(this.owner)}},methods:{destroy:function(){this.animationIds&&(n.a.recycle(this.animationIds),this.animationIds=null)}}})},function(t,e,i){"use strict";var n=i(9),r=i(4);e.a=Object(r.a)({id:"RenderProgress",properties:{backgroundColor:0,color:16777215,mirror:!1,flip:!1,width:100,height:20,regX:0,regY:0},publicProperties:{x:0,y:0,z:0},initialize:function(){var t=new n.Graphics,e=new n.Graphics,i=new n.Container;this.parentContainer=null,this.background=t,this.progress=e,this.container=i,"string"==typeof this.backgroundColor&&(this.backgroundColor=+this.backgroundColor.replace("#","0x")),"string"==typeof this.color&&(this.color=+this.color.replace("#","0x")),t.f(this.backgroundColor).drawRect(-this.regX,-this.regY,this.width,this.height),e.f(this.color).drawRect(-this.regX,-this.regY,this.width,this.height),e.scale=new n.Point(1e-4,1),i.addChild(t),i.addChild(e)},events:{"handle-render-load":function(t){!this.parentContainer&&t&&t.container&&(this.parentContainer=t.container,this.parentContainer.addChild(this.container))},"handle-render":function(t){this.container&&(this.parentContainer||(t&&t.container?(this.parentContainer=t.container,this.parentContainer.addChild(this.container)):(platypus.debug.warn('No PIXI Stage, removing ProgressRender component from "'+this.owner.type+'".'),this.owner.removeComponent(this))),this.container.x=this.x,this.container.y=this.y,this.container.z=this.z)},"update-progress":function(t){isNaN(t)?"number"==typeof t.fraction?this.progress.scale.x=t.fraction:"number"==typeof t.total&&"number"==typeof t.progress&&(this.progress.scale.x=t.progress/t.total):this.progress.scale.x=t}},methods:{destroy:function(){this.parentContainer&&(this.parentContainer.removeChild(this.container),this.parentContainer=null),this.container=null}}})},function(t,e,i){"use strict";var n,r,o,s,a,h,u,l=i(9),c=i(0),f=i(7),d=i(79),p=i(50),g=i(27),v=i(4);e.a=(a=l.BaseTexture,h=function(t){return t},u=function(t,e,i){return i.includes(e)?t:null},Object(v.a)({id:"RenderSpine",properties:{animationStates:null,animationEvents:null,animationMap:null,skinMap:null,localScaleX:1,localScaleY:1,mask:null,interactive:!1,mixTimes:0,offsetX:0,offsetY:0,offsetZ:0,atlas:"",skeleton:null,mirror:!1,flip:!1,visible:!0,eventBased:!1,preMultipliedAlpha:!0,stateBased:!0},publicProperties:{dragMode:!1,scaleX:1,scaleY:1,skewX:0,skewY:0,x:0,y:0,z:0},initialize:(r=function(t,e,i,n){var r=function(t,e){var i=platypus.assetCache.get(t.substring(t.lastIndexOf("/")+1,t.lastIndexOf(".")));return i||platypus.debug.warn('RenderSpine: "'+t+'" is not a loaded asset.'),new a(i,{alphaMode:e?l.ALPHA_MODES.PMA:l.ALPHA_MODES.UNPACK})}(i,t);n(r),r.isLoading?r.on("loaded",e):e()},o=function(t,e){this.owner.triggerEvent("animation-ended",this.currentAnimations[t],e)},s=function(t,e){var i=e.data.name;this.playAnimation(i)&&this.spine.update(1e-6),this.owner.trigger(i,e.data)},function(t,e){var i=this,n=l.spine,a=n&&n.core,v=n&&n.Spine;if(!v||!a)return platypus.debug.error("RenderSpine requires `PIXI.spine` to function."),!1;var m,y,b=a.TextureAtlas,_=a.AtlasAttachmentLoader,w=a.SkeletonJson,x=platypus.game.settings,E=x.atlases[this.atlas],T=x.skeletons[this.skeleton],S=new w(new _(new b(E,r.bind(null,this.preMultipliedAlpha,e)))).readSkeletonData(T),A=this.spine=new v(S),P=function(t,e){var i=null,n="";if(t)return t;for(n in i={},e)e.hasOwnProperty(n)&&(i[n]=n);return i}(this.animationMap,T.animations),C="";if(A.state.addListener({event:s.bind(this),complete:o.bind(this)}),A.autoUpdate=!1,this.stateBased=P&&this.stateBased,this.eventBased=P&&this.eventBased,P){var M=f.a.setUp("animationEvents",this.eventBased?this.animationEvents||P:null,"animationStates",this.stateBased?this.animationStates||P:null,"forcePlayThrough",this.forcePlayThrough,"component",this);this.owner.addComponent(new d.a(this.owner,M)),M.recycle(),C=P.default||""}if(this.mixTimes&&this.setMixTimes(this.mixTimes),this.currentAnimations=c.a.setUp(),C&&this.playAnimation(C),A.x=this.offsetX,A.y=this.offsetY,A.z=this.offsetZ,A.scale.x=this.localScaleX,A.scale.y=this.localScaleY,this.skinMap){var O=function(t){this.currentSkin!==t&&(this.currentSkin=t,this.spine.skeleton.setSkin(null),this.spine.skeleton.setSlotsToSetupPose(),this.spine.state.apply(this.spine.skeleton),t&&(this.spine.skeleton.setSkinByName(t),this.spine.skeleton.setSlotsToSetupPose(),this.spine.state.apply(this.spine.skeleton)))},I=this.skinMap;if(this.currentSkin=null,this.eventBased)for(var k in I)I.hasOwnProperty(k)&&this.addEventListener(k,O.bind(this,I[k]));if(this.stateBased){for(var R in this.state=this.owner.state,this.stateChange=!0,this.checkStates=c.a.setUp(),this.skins=c.a.setUp(),I)I.hasOwnProperty(R)&&(this.checkStates.push((m=R,y=I[R],"default"===m?h.bind(null,y):u.bind(null,y,g.a.setUp(m)))),this.skins.push(R));this.addEventListener("state-changed",(function(){i.stateChange=!0})),this.addEventListener("handle-render",(function(){if(i.stateChange){for(var t=0;t<i.checkStates.length;t++){var e=i.checkStates[t](i.state);if(null!==e){O.call(i,e);break}}i.stateChange=!1}}))}}if(this.owner.container)this.addToContainer();else{var L=f.a.setUp("interactive",this.interactive,"mask",this.mask,"mirror",this.mirror,"flip",this.flip,"visible",this.visible,"cache",this.cache,"ignoreOpacity",this.ignoreOpacity,"scaleX",this.scaleX,"scaleY",this.scaleY,"skewX",this.skewX,"skewY",this.skewY);this.owner.addComponent(new p.a(this.owner,L,this.addToContainer.bind(this))),L.recycle()}return!0}),events:{"handle-render":function(t){this.spine&&(this.owner.triggerEvent("update-animation",!0),this.spine.update(t.delta/1e3))},"set-mix-times":function(t){this.setMixTimes(t)},hide:function(){this.visible=!1},show:function(){this.visible=!0},"stop-animation":function(t){this.stopAnimation(t)},"play-animation":function(t,e){this.playAnimation(t,e)}},methods:{addToContainer:function(){var t=this.owner.container;t.addChild(this.spine),t.reorder=!0},playAnimation:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.spine,n=0,r=t;r;){var o=r.indexOf(";"),s=o>=0?r.substring(0,o):r;r=o>=0?r.substring(o+1):"",i.state.hasAnimation(s)&&(this.currentAnimations[n]=s,i.state.setAnimation(n,s,e)),n+=1}return n},stopAnimation:function(t){for(var e=this.spine,i=0,n=t;n;){var r=n.indexOf(";"),o=r>=0?n.substring(0,r):n;n=r>=0?n.substring(r+1):"",e.state.hasAnimation(o)&&(this.currentAnimations[i]=o,e.state.setAnimation(i,o,!1)),i+=1}return this.paused=!0,i},setMixTimes:function(t){var e=this.spine,i=e.spineData.animations,n=0,r=0,o=0,s="",a=e.stateData;if("number"==typeof t)for(r=i.length;r--;)for(o=i.length;o--;)r!==o&&a.setMix(i[r].name,i[o].name,t);else for(s in t)t.hasOwnProperty(s)&&(n=s.indexOf(":"))>=0&&a.setMix(s.substring(0,n),s.substring(n+1),t[s]);this.mixTimes=a.animationToMixTime},destroy:function(){this.owner.container.removeChild(this.spine),this.spine.destroy(),this.spine=null,this.mixTimes=null}},getAssetList:(n=function(t,e){var i=c.a.setUp();if(t){var n=/\r/g,r=t.replace(n,"").split("\n"),o=r.length;if(1===r.length){if(!(t=e[t]))return i;o=(r=t.replace(n,"").split("\n")).length}for(;o--;)".png"===r[o].substr(r[o].length-4)&&i.push(r[o])}return i},function(t,e,i){var r=null,o=0,s=null,a=platypus.game.settings.atlases,h=t.atlas||e.atlas||i.atlas;if(Array.isArray(h)){for(o=h.length,s=c.a.setUp();o--;)r=n(h[o],a),Object(c.d)(s,r),c.a.recycle(r);return s}return n(h,a)})}))},function(t,e,i){"use strict";var n,r=i(50),o=i(9),s=i(4);e.a=(n={horizontal:{left:0,middle:.5,center:.5,right:1},vertical:{top:0,middle:.5,center:.5,bottom:1}},Object(s.a)({id:"RenderText",properties:{offsetX:0,offsetY:0,offsetZ:0,text:"",style:null},initialize:function(t){var e=n.horizontal[this.style.align],i=n.vertical[this.style.verticalAlign];this.sprite=new o.Text(this.text,this.style),this.sprite.anchor.x="number"==typeof e?e:.5,this.sprite.anchor.y="number"==typeof i?i:1,this.sprite.x=this.offsetX,this.sprite.y=this.offsetY,this.sprite.z=this.offsetZ,this.owner.container?this.addToContainer():this.owner.addComponent(new r.a(this.owner,t,this.addToContainer.bind(this)))},events:{"set-text":function(t){if("string"==typeof t)this.sprite.text=t;else{if(t.style){var e=this.sprite.style;for(var i in t.style)t.style.hasOwnProperty(i)&&(e[i]=t.style[i])}"string"==typeof t.text&&(this.sprite.text=t.text)}}},methods:{addToContainer:function(){var t=this.owner.container;t.addChild(this.sprite),t.reorder=!0},destroy:function(){this.owner.container.removeChild(this.sprite),this.sprite.destroy(),this.sprite=null}}}))},function(t,e,i){"use strict";var n,r,o,s,a,h,u,l,c=i(9),f=i(0),d=i(12),p=i(55),g=i(50),v=i(14),m=i.n(v),y=i(4),b=i(20);e.a=(r=function(){return null},o=d.a.setUp(),s=function(t,e){return t.z-e.z},a=function(t){for(var e=1;e<t;)e*=2;return e},u={getNext:r,destroy:r},(l=(h=function(t,e,i){this.id=e,this.instances=f.a.setUp(),this.index=0,this.tileSpriteSheet=t,this.getNext=this.initializeAndGetNext,this.uninitializedTiles=i,i.push(this)}).prototype).initializeAndGetNext=function(){return this.initialize(),this.index+=1,this.instances[0]},l.initialize=function(){var t=+this.id.substring(4),e="tile"+(268435455&t),i=new c.Sprite((this.tileSpriteSheet._animations[e]||this.tileSpriteSheet._animations.default).texture);!function(t,e){if(2147483648&t&&(e.scale.x=-1),1073741824&t&&(e.scale.y=-1),536870912&t){var i=e.scale.x;e.scale.x=e.scale.y,e.scale.y=-i,e.rotation=Math.PI/2}}(t,i),i.template=this,this.instances.push(i),Object(f.c)(this.uninitializedTiles,this.uninitializedTiles.indexOf(this)),delete this.getNext},l.getNext=function(){var t=this.instances[this.index],e=null;return t||(e=this.instances[0],(t=this.instances[this.index]=new c.Sprite(e.texture)).scale=e.scale,t.rotation=e.rotation,t.anchor=e.anchor||e._animation.anchor),this.index+=1,t},l.clear=function(){this.index=0},l.destroy=function(){var t=0;for(t=0;t<this.instances.length;t++)this.instances[t].destroy();f.a.recycle(this.instances),this.recycle()},b.a.add(h,"Template",h,null,!0,m.a.dev),Object(y.a)({id:"RenderTiles",properties:{buffer:0,cacheAll:!1,entityCache:!1,imageMap:[],maximumBuffer:2048,scaleX:1,scaleY:1,spriteSheet:null,tileCache:!0,tileHeight:10,tileWidth:10,top:0,left:0},initialize:function(t){var e=this.imageMap;this.doMap=null,this.cachedDisplayObjects=null,this.populate=this.populateTiles,this.tiles={},this.renderer=platypus.game.renderer,this.tilesSprite=null,this.cacheTexture=null,this.mapContainer=null,this.laxCam=d.a.setUp(),this.worldWidth=this.tileWidth,this.worldHeight=this.tileHeight,this.cache=d.a.setUp(),this.cachePixels=d.a.setUp(),this.uninitializedTiles=f.a.setUp(),this.spriteSheet=p.a.formatSpriteSheet(this.spriteSheet),this.tileSpriteSheet=new p.a(this.spriteSheet),this.tileContainer=new c.Container,this.mapContainer=new c.Container,this.mapContainer.addChild(this.tileContainer),this.reorderedStage=!1,this.updateCache=!1,this.imageMap=f.a.setUp(this.createMap(e)),this.tilesWidth=this.imageMap[0].length,this.tilesHeight=this.imageMap[0][0].length,this.layerWidth=this.tilesWidth*this.tileWidth,this.layerHeight=this.tilesHeight*this.tileHeight,this.cacheWidth=Math.min(a(this.layerWidth+2),this.maximumBuffer),this.cacheHeight=Math.min(a(this.layerHeight+2),this.maximumBuffer),this.tileCache||(this.buffer=0,this.cacheAll=!1),this.ready=!1,this.owner.container?this.addToContainer():this.owner.addComponent(new g.a(this.owner,t,this.addToContainer.bind(this)))},events:{"cache-sprite":function(t){this.cacheSprite(t)},"peer-entity-added":function(t){this.cacheSprite(t)},"add-tiles":function(t){var e=t.imageMap;e&&(this.imageMap.push(this.createMap(e)),this.updateCache=!0)},"change-tile":function(t,e,i,n){var r=this.imageMap;r&&(this.updateTile(t,r[n||0],e,i),this.updateCache=!0)},"camera-loaded":function(t){this.worldWidth=t.world.width,this.worldHeight=t.world.height,this.buffer&&!this.cacheAll&&this.updateBufferRegion(t.viewport)},"camera-update":function(t){this.ready&&this.updateCamera(t)},"handle-render":function(){this.updateCache?(this.updateCache=!1,this.cacheGrid?this.updateGrid():this.update(this.cacheTexture,this.cache)):this.uninitializedTiles.length&&this.uninitializedTiles[0].initialize()}},methods:{addToContainer:function(){var t=this.container=this.owner.container,e=this.mapContainer,i=null,n=this.owner.z;t.reorder=!0,this.ready=!0,this.updateRegion(0),this.tileCache?(this.mapContainerWrapper=new c.Container,this.mapContainerWrapper.addChild(e),this.layerWidth<=this.cacheWidth&&this.layerHeight<=this.cacheHeight?(this.cacheAll=!0,this.render=this.renderCache,this.cacheTexture=c.RenderTexture.create(this.cacheWidth,this.cacheHeight),this.tilesSprite=i=new c.Sprite(this.cacheTexture),i.scale.x=this.scaleX,i.scale.y=this.scaleY,i.z=n,this.cache.setBounds(0,0,this.tilesWidth-1,this.tilesHeight-1),this.update(this.cacheTexture,this.cache),t.addChild(i)):this.cacheAll||this.layerWidth<=2*this.cacheWidth&&this.layerHeight<=this.cacheHeight||this.layerWidth<=this.cacheWidth&&this.layerHeight<=2*this.cacheHeight?(this.cacheAll=!0,this.cacheWidth=Math.min(a(this.layerWidth+2),this.maximumBuffer),this.cacheHeight=Math.min(a(this.layerHeight+2),this.maximumBuffer),this.updateRegion(2),this.render=this.renderCacheWithExtrusion,this.cacheGrid=this.createGrid(t),this.updateCache=!0):(this.render=this.renderCache,this.cacheAll=!1,this.cacheTexture=c.RenderTexture.create(this.cacheWidth,this.cacheHeight),this.tilesSprite=new c.Sprite(this.cacheTexture),this.tilesSprite.scale.x=this.scaleX,this.tilesSprite.scale.y=this.scaleY,this.tilesSprite.z=n,this.cacheTexture.alternate=c.RenderTexture.create(this.cacheWidth,this.cacheHeight),this.tilesSpriteCache=new c.Sprite(this.cacheTexture.alternate),this.cacheTexture.alternate.alternate=this.cacheTexture,t.addChild(this.tilesSprite))):(this.render=r,e.scale.x=this.scaleX,e.scale.y=this.scaleY,e.x=this.left,e.y=this.top,e.z=n,t.addChild(e))},cacheSprite:function(t){var e=0,i=0,n=t.cacheRender,r=null,o=0,s=0,a=0,h=0;if(this.entityCache&&n){for(this.doMap||(this.doMap=f.a.setUp(),this.cachedDisplayObjects=f.a.setUp(),this.populate=this.populateTilesAndEntities),this.cachedDisplayObjects.push(n),(r=n.getBounds(n.transformMatrix)).x-=this.left,r.y-=this.top,o=Math.max(0,Math.floor(r.y/this.tileHeight)),s=Math.min(this.tilesHeight,Math.ceil((r.y+r.height)/this.tileHeight)),h=Math.max(0,Math.floor(r.x/this.tileWidth)),a=Math.min(this.tilesWidth,Math.ceil((r.x+r.width)/this.tileWidth)),e=h;e<a;e++)for(this.doMap[e]||(this.doMap[e]=f.a.setUp()),i=o;i<s;i++)this.doMap[e][i]||(this.doMap[e][i]=f.a.setUp()),this.doMap[e][i].push(n);t.removeComponent("RenderSprite"),this.updateCache=!0}},convertCamera:function(t){var e=this.worldWidth/this.scaleX,i=e-t.width,n=this.worldHeight/this.scaleY,r=n-t.height,o=this.laxCam;return e!==this.layerWidth&&i?o.moveX((t.left-this.left)*(this.layerWidth-t.width)/i+t.halfWidth+this.left):o.moveX(t.x),n!==this.layerHeight&&r?o.moveY((t.top-this.top)*(this.layerHeight-t.height)/r+t.halfHeight+this.top):o.moveY(t.y),t.width===o.width&&t.height===o.height||o.resize(t.width,t.height),o},createTile:function(t){return"tile-1"===t?u:h.setUp(this.tileSpriteSheet,t,this.uninitializedTiles)},createMap:function(t){var e=0,i=0,n="",r=null;if("string"!=typeof t[0][0])return t;for(r=f.a.setUp(),e=0;e<t.length;e++)for(r[e]=f.a.setUp(),i=0;i<t[e].length;i++)n=t[e][i],this.updateTile(n,r,e,i);return r},updateCamera:function(t){var e=0,i=0,n=!1,r=null,s=0,a=0,h=0,u=0,l=this.cache,c=this.cachePixels,f=t.viewport,d=this.buffer&&(f.width!==this.laxCam.width||f.height!==this.laxCam.height),p=o,g=this.convertCamera(f);if(!this.cacheAll&&(c.empty||!c.contains(g))&&this.imageMap.length>0&&(d&&this.updateBufferRegion(g),h=(s=this.cacheTilesWidth-1)/2,u=(a=this.cacheTilesHeight-1)/2,p.setAll(Math.round((g.x-this.left)/this.tileWidth-h)+h,Math.round((g.y-this.top)/this.tileHeight-u)+u,s,a),p.left<0?p.moveX(p.halfWidth):p.right>this.tilesWidth-1&&p.moveX(this.tilesWidth-1-p.halfWidth),p.top<0?p.moveY(p.halfHeight):p.bottom>this.tilesHeight-1&&p.moveY(this.tilesHeight-1-p.halfHeight),this.tileCache?!l.empty&&p.contains(l)||(this.tilesSpriteCache.texture=this.cacheTexture,this.cacheTexture=this.cacheTexture.alternate,this.tilesSprite.texture=this.cacheTexture,this.update(this.cacheTexture,p,this.tilesSpriteCache,l)):this.update(null,p),c.setAll((l.x+.5)*this.tileWidth+this.left,(l.y+.5)*this.tileHeight+this.top,(l.width+1)*this.tileWidth,(l.height+1)*this.tileHeight)),this.cacheGrid)for(e=0;e<this.cacheGrid.length;e++)for(i=0;i<this.cacheGrid[e].length;i++)r=this.cacheGrid[e][i],c.setAll((e+.5)*this.cacheClipWidth+this.left,(i+.5)*this.cacheClipHeight+this.top,this.cacheClipWidth,this.cacheClipHeight),n=c.intersects(g),r.visible&&!n?r.visible=!1:!r.visible&&n&&(r.visible=!0),r.visible&&n&&(r.x=f.left-g.left+e*this.cacheClipWidth+this.left,r.y=f.top-g.top+i*this.cacheClipHeight+this.top);else this.tileCache&&(this.tilesSprite.x=f.left-g.left+l.left*this.tileWidth+this.left,this.tilesSprite.y=f.top-g.top+l.top*this.tileHeight+this.top)},updateTile:function(t,e,i,n){var r=null,o=this.tiles;t.id&&(t=t.id),(r=o[t])||null===r||(r=o[t]=this.createTile(t)),e[i][n]=r},createGrid:function(t){var e=this.cacheHeight,i=this.cacheWidth,n=this.cacheTilesHeight,r=this.cacheTilesWidth,o=0,s=0,h=null,u=this.scaleX,l=this.scaleY,d=this.tileHeight,p=this.tileWidth,g=this.tilesHeight,v=this.tilesWidth,m=0,y=0,b=this.owner.z,_=null,w=null,x=f.a.setUp();for(m=0;m<v;m+=r)for(_=f.a.setUp(),x.push(_),y=0;y<g;y+=n)s=Math.min(a((v-m)*p+2),i),o=Math.min(a((g-y)*d+2),e),(h=c.RenderTexture.create(s,o)).frame=new c.Rectangle(1,1,((s-2)/p>>0)*p+1,((o-2)/d>>0)*d+1),(w=new c.Sprite(h)).z=b,w.scale.x=u,w.scale.y=l,_.push(w),t.addChild(w),b-=1e-6;return x},updateRegion:function(t){var e=this.tileWidth*this.scaleX,i=this.tileHeight*this.scaleY,n=Math.min(this.tilesWidth,(this.cacheWidth-2)/e>>0),r=Math.min(this.tilesHeight,(this.cacheHeight-2)/i>>0);n||platypus.debug.warn('"'+this.owner.type+'" RenderTiles: The tiles are '+e+"px wide which is larger than "+(this.cacheWidth-2)+"px (maximum cache size of "+this.cacheWidth+"px minus a 2px edge bleed). Increase the maximum cache size or reduce tile size."),r||platypus.debug.warn('"'+this.owner.type+'" RenderTiles: The tiles are '+i+"px high which is larger than "+(this.cacheHeight-2)+"px (maximum cache size of "+this.cacheHeight+"px minus a 2px edge bleed). Increase the maximum cache size or reduce tile size."),this.cacheTilesWidth=n,this.cacheTilesHeight=r,this.cacheClipWidth=n*e,this.cacheClipHeight=r*i,this.tileCache&&(this.mapContainer.mask=(new c.Graphics).beginFill(0).drawRect(0,0,this.cacheClipWidth+t,this.cacheClipHeight+t).endFill())},updateBufferRegion:function(t){var e=this.tileWidth*this.scaleX,i=this.tileHeight*this.scaleY;this.cacheTilesWidth=Math.min(this.tilesWidth,Math.ceil((t.width+2*this.buffer)/e),this.cacheWidth/e>>0),this.cacheTilesHeight=Math.min(this.tilesHeight,Math.ceil((t.height+2*this.buffer)/i),this.cacheHeight/i>>0),this.cacheClipWidth=this.cacheTilesWidth*e,this.cacheClipHeight=this.cacheTilesHeight*i,this.mapContainer.mask=(new c.Graphics).beginFill(0).drawRect(0,0,this.cacheClipWidth,this.cacheClipHeight).endFill()},update:function(t,e,i,n){this.populate(e,n),this.render(e,t,this.mapContainer,this.mapContainerWrapper,i,n),n&&n.set(e)},populateTiles:function(t,e){var i=0,n=0,r=0,o=0,s=null,a=f.a.setUp();for(this.tileContainer.removeChildren(),i=t.left;i<=t.right;i++)for(n=t.top;n<=t.bottom;n++)if(!e||e.empty||n>e.bottom||n<e.top||i>e.right||i<e.left)for(o=0;o<this.imageMap.length;o++)(s=this.imageMap[o][i][n].getNext())&&(s.template&&a.push(s.template),s.x=(i+.5)*this.tileWidth,s.y=(n+.5)*this.tileHeight,this.tileContainer.addChild(s));for(r=0;r<a.length;r++)a[r].clear();f.a.recycle(a)},populateTilesAndEntities:function(t,e){var i=0,n=0,r=0,o=0,a=null,h=null,u=f.a.setUp(),l=f.a.setUp(),c=null;for(this.tileContainer.removeChildren(),i=t.left;i<=t.right;i++)for(n=t.top;n<=t.bottom;n++)if(!e||e.empty||n>e.bottom||n<e.top||i>e.right||i<e.left){for(o=0;o<this.imageMap.length;o++)(a=this.imageMap[o][i][n].getNext())&&(a.template&&l.push(a.template),a.x=(i+.5)*this.tileWidth,a.y=(n+.5)*this.tileHeight,this.tileContainer.addChild(a));if(this.doMap[i]&&this.doMap[i][n])for(c=this.doMap[i][n],r=0;r<c.length;r++)c[r].drawn||(c[r].drawn=!0,u.push(c[r]))}if(this.mapContainer.removeChildren(),this.mapContainer.addChild(this.tileContainer),u.length)for(u.sort(s),r=0;r<u.length;r++)delete(h=u[r]).drawn,this.mapContainer.addChild(h),h.mask&&this.mapContainer.addChild(h.mask);for(r=0;r<l.length;r++)l[r].clear();f.a.recycle(l),f.a.recycle(u)},renderCache:function(t,e,i,n,r,o){var s=this.renderer;r&&!o.empty&&(r.x=o.left*this.tileWidth,r.y=o.top*this.tileHeight,i.addChild(r)),i.x=-t.left*this.tileWidth,i.y=-t.top*this.tileHeight,s.render(n,e),e.requiresUpdate=!0},renderCacheWithExtrusion:function(t,e,i,n){var r=new c.Graphics,o=this.renderer;r.lineStyle(1,0),r.drawRect(.5,.5,this.cacheClipWidth+1,this.cacheClipHeight+1),n.mask=r,i.x=-t.left*this.tileWidth,i.y=-t.top*this.tileHeight+1,o.render(n,e),i.x=-t.left*this.tileWidth+1,i.y=-t.top*this.tileHeight,o.render(n,e),i.x=-t.left*this.tileWidth+2,i.y=-t.top*this.tileHeight+1,o.render(n,e),i.x=-t.left*this.tileWidth+1,i.y=-t.top*this.tileHeight+2,o.render(n,e),n.mask=null,i.x=-t.left*this.tileWidth+1,i.y=-t.top*this.tileHeight+1,o.render(n,e),e.requiresUpdate=!0},updateGrid:function(){var t=this.cache,e=this.cacheTilesHeight,i=this.cacheTilesWidth,n=this.tilesHeight-1,r=this.tilesWidth-1,o=0,s=0,a=this.cacheGrid;for(o=0;o<a.length;o++)for(s=0;s<a[o].length;s++)t.setBounds(o*i,s*e,Math.min((o+1)*i,r),Math.min((s+1)*e,n)),this.update(a[o][s].texture,t)},toJSON:function(){for(var t=this.imageMap[0],e=[],i=t.length,n=0;i--;)for(n=t[i].length,e[i]=[];n--;)e[i][n]=t[i][n].id;return{type:"RenderTiles",buffer:this.buffer,cacheAll:this.cacheAll,entityCache:this.entityCache,imageMap:e,maximumBuffer:this.maximumBuffer,scaleX:this.scaleX,scaleY:this.scaleY,spriteSheet:this.spriteSheet,tileCache:this.tileCache,tileHeight:this.tileHeight,tileWidth:this.tileWidth,top:this.top,left:this.left}},destroy:function(){var t=0,e=0,i="",n=this.cacheGrid,r=this.doMap,o=this.imageMap;if(n){for(t=0;t<n.length;t++)for(e=0;e<n[t].length;e++)n[t][e].texture.destroy(!0),this.container.removeChild(n[t][e]);f.a.recycle(n,2),delete this.cacheGrid}else this.tilesSprite?(this.tilesSprite.texture.alternate&&this.tilesSprite.texture.alternate.destroy(!0),this.tilesSprite.texture.destroy(!0),this.container.removeChild(this.tilesSprite)):this.container.removeChild(this.mapContainer);for(i in f.a.recycle(o,2),this.tiles)this.tiles.hasOwnProperty(i)&&this.tiles[i].destroy();if(this.tiles=null,this.container=null,this.tilesSprite=null,this.spriteSheet.recycleSpriteSheet(),r){for(t=0;t<this.cachedDisplayObjects.length;t++)this.cachedDisplayObjects[t].destroy();for(f.a.recycle(this.cachedDisplayObjects),t=0;t<r.length;t++)if(r[t]){for(e=0;e<r.length;e++)r[t][e]&&r[t][e].recycle();f.a.recycle(r[t])}f.a.recycle(r)}this.laxCam.recycle(),this.cache.recycle(),this.cachePixels.recycle(),f.a.recycle(this.uninitializedTiles)}},getAssetList:(n=function t(e,i){if(e){if("string"==typeof e)return t(i[e],i);if(e.images)return Object(f.b)(e.images)}return f.a.setUp()},function(t,e,i){var r=null,o=0,s=null,a=platypus.game.settings.spriteSheets,h=t.spriteSheet||e.spriteSheet||i.spriteSheet;if(h){if("string"==typeof h&&"import"!==h)return n(h,a);if(Array.isArray(h)){for(o=h.length,s=f.a.setUp();o--;)r=n(h[o],a),Object(f.d)(s,r),f.a.recycle(r);return s}if(h.images)return Object(f.b)(h.images)}return f.a.setUp()})}))},function(t,e,i){"use strict";var n=i(7),r=i(4);e.a=Object(r.a)({id:"SceneChanger",properties:{loadLayers:null,scene:"",unloadLayers:null,persistentData:null},initialize:function(){this.persistentData=n.a.setUp(this.persistentData)},events:{"new-scene":function(t){var e=t&&t.loadLayers||this.loadLayers,i=t&&t.scene||this.scene,n=t&&t.unloadLayers||this.unloadLayers,r=t&&t.persistentData||this.persistentData;if(n&&n.length)for(var o=0;o<n.length;o++)platypus.game.unload(n[o]);if(e&&e.length)for(var s=0;s<e.length;s++)platypus.game.load(e[s],r);i&&platypus.game.loadScene(i,r)},"set-scene":function(t){this.scene=t},"set-persistent-scene-data":function(t){var e=this.persistentData,i="";for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}},methods:{destroy:function(){}}})},function(t,e,i){"use strict";var n,r,o,s,a,h,u,l,c,f,d,p,g,v,m,y,b,_,w,x,E,T,S,A,P=i(0),C=i(12),M=i(7),O=i(21),I=i(23),k=i(11),R=i(4),L=i(105);function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=(c=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([\/.]*?(?:[^?]+)?\/)?(?:(([^\/?]+)\.(\w+))|([^\/?]+))(?:\?((?:(?:[^&]*?[\/=])?(?:((?:(?:[^\/?&=]+)\.(\w+)))\S*?)|\S+))?)?$/,n=function(t,e){return t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24)>>>0},r=function(t,e){return t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24)>>>0},f=function(t,e){var i=4,o=[],s=atob(t.replace(/\\/g,""));if("zlib"===e)for(s=Object(L.inflate)(s);i<=s.length;)o.push(r(s,i-4)),i+=4;else for(;i<=s.length;)o.push(n(s,i-4)),i+=4;return o},d=function(t){return"base64"===t.encoding&&(t.data=f(t.data,t.compression),t.encoding="csv"),t},p=function(t){var e=t.match(c);return e[5]||e[7]},g=function(t,e,i,n,r,o,s,a){var h=this,u=M.a.setUp("level",null,"world",C.a.setUp(),"tile",C.a.setUp(),"camera",null,"lazyLoads",this.lazyLoads);this.lazyLoads.sort((function(t,e){return e.aabb.left-t.aabb.left})),u.level=t,u.camera=this.followEntity,u.width=n,u.height=r,u.world.setBounds(e,i,e+n,i+r),u.tile.setBounds(0,0,o,s),this.owner.triggerEvent("world-loaded",u),u.world.recycle(),u.tile.recycle(),u.recycle(),this.lazyLoads.length?(this.addEventListener("camera-update",(function(t){var e=h.lazyLoads,i=C.a.setUp(t.viewport),n=e.length;for(i.resize(1.5*i.width,1.5*i.height);n--;){var r=e[n],o=r.aabb;if(i.intersects(o)){o.recycle(),r.aabb=null,h.owner.addEntity(r);for(var s=n+1;s<e.length;s++)e[s-1]=e[s];e.length-=1}else if(o.left>i.right)break}})),this.backgroundLoad&&this.addEventListener("tick",(function(){var t=this.lazyLoads,e=t.length;if(e){var i=t.pop(e-1);i.aabb.recycle(),i.aabb=null,this.owner.addEntity(i)}}))):this.owner.removeComponent(this),a&&a()},v=function(t){for(var e=1;e<t;)e*=10;return e},m={x:1,y:1,id:-1},y=function(t,e){var i=0;if(t){if(Array.isArray(t)){for(i=t.length;i--;)if(t[i].name===e)return t[i].value;return null}return t[e]}return null},b=function(t,e,i){var n=0;if(t)if(Array.isArray(t)){for(n=t.length;n--;)if(t[n].name===e)return t[n].type=D(i),void(t[n].value=i);t.push({name:e,type:D(i),value:i})}else t[e]=i},_=function(t){var e=m,i=!!(1073741824&t),n=!!(2147483648&t);return e.id=268435455&t,e.x=1,e.y=1,i&&(e.y=-1),n&&(e.x=-1),e},w=function(t,e){var i=0,n=t.gid||-1,r={},o={gid:-1,transform:null,properties:r,type:""},s=null,a=null,h=0;if(-1!==n&&(o.transform=_(n),n=o.gid=m.id),e){for(i=0;i<e.length&&!(e[i].firstgid>n);i++)a=e[i];a&&(h=n-a.firstgid,a.tileproperties&&a.tileproperties[h]&&(s=a.tileproperties[h]),a.tiles&&a.tiles[h]&&(o.type=a.tiles[h].type||""))}return o.type=t.type||o.type,o.type?(o.transform?(r.scaleX=o.transform.x,r.scaleY=o.transform.y):(r.scaleX=1,r.scaleY=1),x(s,o.properties),x(t.properties,o.properties),o):null},x=function(t,e){var i=0,n="";if(t&&e)if(Array.isArray(t))for(i=0;i<t.length;i++)b(e,t[i].name,E(t[i].value));else for(n in t)t.hasOwnProperty(n)&&b(e,n,E(t[n]));return e},E=function(t){var e=0;if("string"==typeof t){if(0===(e=parseFloat(t)||parseInt(t))||e)return e;if("true"===t)return!0;if("false"===t)return!1;if(t.length>1&&("{"===t[0]&&"}"===t[t.length-1]||"["===t[0]&&"]"===t[t.length-1]))try{return JSON.parse(t)}catch(t){}}return t},T={"render-layer":{id:"render-layer",components:[{type:"RenderTiles",spriteSheet:"import",imageMap:"import",entityCache:!0}]},"collision-layer":{id:"collision-layer",components:[{type:"CollisionTiles",collisionMap:"import"}]},"image-layer":{id:"image-layer",components:[{type:"RenderTiles",spriteSheet:"import",imageMap:"import"}]}},S=function(t){var e="",i=platypus.game.settings.levels[t.source.replace(".json","")];for(e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return delete t.source,t},A=function(t){var e=0;for(e=0;e<t.length;e++)t[e].source&&(t[e]=S(t[e]));return t},Object(R.a)({id:"TiledLoader",properties:{offsetMap:!1,showCollisionTiles:!1,images:null,layerIncrement:1e3,separateTiles:!1,spriteSheet:null,backgroundLoad:!0},publicProperties:{level:null,entityPositionX:"center",entityPositionY:"bottom",manuallyLoad:!1},initialize:function(){this.assetCache=platypus.assetCache,this.layerZ=0,this.followEntity=!1,this.lazyLoads=P.a.setUp()},events:{"layer-loaded":function(t,e){this.manuallyLoad||(e.count+=1,this.loadLevel({level:this.level||t.level,persistentData:t},e.release))},"load-level":function(t,e){this.loadLevel(t,e)}},methods:{createLayer:function(t,e,i,n,r,o,s,a,h,u,l){var c=null,f=null,p=e.width,g=e.height,v=e.tileheight||o,m=e.tilewidth||r,b=0,w=0,E=0,S=0,A=0,P=JSON.parse(JSON.stringify(platypus.game.settings.entities[t]||T[t])),C={},M=[],O=[],k=[],R={images:e.image?[e.image]:h,frames:O,animations:C},L=!1,D=0,F=0,N=0,U=null,B=function(t,e,i,n){var r=i.margin||0,o=i.spacing||0,s=i.tilewidth,a=i.tileheight,h=s/2,u=a/2,l=s+o,c=a+o,f=2*r-o,d=i.columns||i.imagewidth/l+f>>0,p=i.imageheight/c+f>>0,g=0,v=0;for(s*=n,a*=n,h*=n,u*=n,l*=n,c*=n,v=0;v<p;v++)for(g=0;g<d;g++)t.push([r+g*l,r+v*c,s,a,e,h,u])};if(d(e),U=e.data,i+=e.offsetx||0,n+=e.offsety||0,P.properties=P.properties||{},e.properties){if((S=y(e.properties,"width"))&&(b=parseInt(S,10)),(E=y(e.properties,"height"))&&(w=parseInt(E,10)),b||w){for(b=b||p,w=w||g,U=[],F=0;F<b;F++)for(N=0;N<w;N++)U[F+N*b]=F<p&&N<g?e.data[F+N*p]:0;p=b,g=w}x(e.properties,P.properties)}if(P.properties.width=m*p,P.properties.height=v*g,P.properties.columns=p,P.properties.rows=g,P.properties.tileWidth=m,P.properties.tileHeight=v,P.properties.scaleX=1,P.properties.scaleY=1,P.properties.layerZ=this.layerZ,P.properties.left=P.properties.x||i,P.properties.top=P.properties.y||n,P.properties.z=P.properties.z||this.layerZ,s.length){for(F=0;F<s.length;F++)B(O,F,s[F],1);for(A=(c=s[s.length-1]).firstgid+c.tilecount,F=-1;F<A;F++)C["tile"+F]=F}for(F=0;F<p;F++)for(M[F]=[],k[F]=[],N=0;N<g;N++)if(D=+U[F+N*p]-1,k[F][N]="tile"+D,D+=1,M[F][N]=D,a){var j=_(D);if(a.has(j.id)){var X=i+r*(j.x>0?F:F+1),V=n+o*(j.y>0?N:N+1);this.setUpEntities(a.get(j.id),X,V,r,o,s,j,l)}}for(F=0;F<P.components.length;F++)"RenderTiles"===P.components[F].type&&(L=P.components[F]),"import"===P.components[F].spriteSheet?P.components[F].spriteSheet=R:P.components[F].spriteSheet&&("string"==typeof P.components[F].spriteSheet&&platypus.game.settings.spriteSheets[P.components[F].spriteSheet]&&(P.components[F].spriteSheet=platypus.game.settings.spriteSheets[P.components[F].spriteSheet]),P.components[F].spriteSheet.animations||(P.components[F].spriteSheet.animations=C)),"import"===P.components[F].collisionMap&&(P.components[F].collisionMap=M),"import"===P.components[F].imageMap&&(P.components[F].imageMap=k);return"render-layer"===t&&!this.separateTiles&&u&&u.tileHeight===v&&u.tileWidth===m&&u.columns===p&&u.rows===g?(u.triggerEvent("add-tiles",L),this.updateLoadingProgress(l),u):(f={},"render-layer"===t&&this.spriteSheet&&("string"==typeof this.spriteSheet?f.spriteSheet=platypus.game.settings.spriteSheets[this.spriteSheet]:f.spriteSheet=this.spriteSheet,f.spriteSheet.animations||(f.spriteSheet.animations=C)),this.owner.addEntity(new I.a(P,{properties:f},this.updateLoadingProgress.bind(this,l),this.owner)))},convertImageLayer:function(t){var e,i=null,n=0,r="",o=t.properties||{},s=y(o,"repeat"),a=y(o,"repeat-x"),h=y(o,"repeat-y"),u={data:[],image:"",height:1,name:t.name,type:"tilelayer",width:1,tileheight:1,tilewidth:1,x:t.x,y:t.y,properties:o};for(s&&(u.width=+s,u.height=+s),a&&(u.width=+a),h&&(u.height=+h),e=u.width*u.height,n=0;n<e;n++)u.data.push(1);return(i=this.assetCache.get(t.name))?(u.image=t.name,u.tileheight=i.height,u.tilewidth=i.width):(r=p(t.image),(i=this.assetCache.get(r))?(platypus.debug.warn('Component TiledLoader: Did not find a spritesheet for "'+t.name+'", so using "'+t.image+'" instead.'),u.image=r,u.tileheight=i.height,u.tilewidth=i.width):(platypus.debug.warn('Component TiledLoader: Cannot find the "'+t.name+'" sprite sheet. Add it to the list of assets in config.json and give it the id "'+t.name+'".'),u.image=t.image)),u.tileset={columns:1,image:u.image,imageheight:u.tileheight,imagewidth:u.tilewidth,margin:0,name:t.name,spacing:0,tilecount:1,tileheight:u.tileheight,tilewidth:u.tilewidth,type:"tileset"},u},loadLevel:function(t,e){var i,n,r,o,s,a,h=null,u=0,l="",c=null,f=null,d=null,m=null,y=O.a.setUp(),b=M.a.setUp("count",0,"progress",0,"total",0),_=0,w=0;if(i=(h="string"==typeof t.level?platypus.game.settings.levels[t.level]:t.level).layers,r=A(h.tilesets),o=h.tilewidth,s=h.tileheight,function(t,e){for(var i=0;i<e.length;i++){var n=e[i],r=n.tiles;if(r)for(var o=0;o<r.length;o++){var s=r[o];s.objectgroup&&t.set(s.id+n.firstgid,s.objectgroup)}}}(y,r),h.properties&&x(h.properties,this.owner),0===(c=this.images?Object(P.b)(this.images):P.a.setUp()).length)for(u=0;u<r.length;u++)m=r[u],this.assetCache.get(m.name)?c.push(m.name):(l=p(m.image),this.assetCache.get(l)?(platypus.debug.warn('Component TiledLoader: Did not find a spritesheet for "'+m.name+'", so using "'+m.image+'" instead.'),c.push(l)):(platypus.debug.warn('Component TiledLoader: Cannot find the "'+m.name+'" sprite sheet. Add it to the list of assets in config.json and give it the id "'+m.name+'".'),c.push(m.image)));for(a=h.width*o,n=h.height*s,this.offsetMap&&(_=v(a),w=v(n)),b.total=u=i.length,this.finishedLoading=g.bind(this,h,_,w,a,n,o,s,e),u=0;u<i.length;u++){switch((d=i[u]).type){case"imagelayer":f=this.convertImageLayer(d),f=this.createLayer("image-layer",f,_,w,f.tilewidth,f.tileheight,[f.tileset],null,c,f,b);break;case"objectgroup":this.setUpEntities(d,_,w,o,s,r,null,b),f=null,this.updateLoadingProgress(b);break;case"tilelayer":f=this.setupLayer(d,f,_,w,o,s,r,y,c,b);break;default:platypus.debug.warn('Component TiledLoader: Platypus does not support Tiled layers of type "'+d.type+'". This layer will not be loaded.'),this.updateLoadingProgress(b)}this.layerZ+=this.layerIncrement}y.recycle()},setUpEntities:(o=function(t){return M.a.setUp("x",-t.x,"y",-t.y)},s=function(t){return M.a.setUp("x",t.x,"y",t.y)},a=function(t){return M.a.setUp("x",-t.x,"y",t.y)},h=function(t){return M.a.setUp("x",t.x,"y",-t.y)},u=function(t,e,i){var n=P.a.setUp(),r=e?i?o:a:i?h:s;if(e^i){for(var u=t.length;u--;)n.push(r(t[u]));n.unshift(n.pop())}else for(var l=0;l<t.length;l++)n.push(r(t[l]));return n},l=function(t,e,i,n,r){var o={type:t,points:u(e,i,n)};if(r){var s=[],a=0;for(a=0;a<r.length;a++)s.push(u(r[a],i,n));o.decomposedPolygon=s}return o},function(t,e,i,n,r,o,s,a){var h=0,u=0,c=0,f=0,d=null,p=0,g=null,v=null,m=y(t.properties,"entityPositionX")||this.entityPositionX,b=y(t.properties,"entityPositionY")||this.entityPositionY,_=-1,x=1/0,E=-1/0,T=1/0,S=-1/0,A=null,P=0,M=0,O=s?s.x:1,I=s?s.y:1,R=t.objects.length;for(e+=t.offsetx||0,i+=t.offsety||0,a.total+=R,p=0;p<R;p++){var L=t.objects[p],D=w(L,o);if(D){var F=D.properties,N=D.type,U={properties:F};if(_=D.gid,(g=platypus.game.settings.entities[N])?(v=g.properties||null,U.type=N):(v=null,U.id=N),L.polygon||L.polyline){for(x=1/0,E=-1/0,T=1/0,S=-1/0,A=null,L.polygon?A=L.polygon:L.polyline&&(A=L.polyline),c=0;c<A.length;c++)A[c].x>E&&(E=A[c].x),A[c].x<x&&(x=A[c].x),A[c].y>S&&(S=A[c].y),A[c].y<T&&(T=A[c].y);F.width=E-x,F.height=S-T,F.x=L.x+e,F.y=L.y+i,h=0,u=0,L.polygon?F.shape=l("polygon",A,-1===O,-1===I,F.decomposedPolygon):L.polyline&&(F.shape=l("polyline",A,-1===O,-1===I,null)),L.rotation&&(F.rotation=L.rotation)}else{if(P=n,M=r,h=0,u=0,F.width=L.width||0,F.height=L.height||0,v&&("number"==typeof v.width&&(F.width=v.width,h=P),"number"==typeof v.height&&(F.height=v.height,u=M)),L.point||(F.width||(F.width=P),F.height||(F.height=M),h=h||F.width,u=u||F.height),F.x=L.x,F.y=L.y,L.rotation){var B=F.width/2,j=F.height/2;F.rotation=L.rotation,(B||j)&&(f=L.rotation/180%2*Math.PI,d=k.a.setUp(B,-j).rotate(f),F.x=Math.round(1e3*(F.x+d.x-B))/1e3,F.y=Math.round(1e3*(F.y+d.y+j))/1e3,d.recycle())}"left"===m?F.regX=0:"center"===m?(F.regX=F.width/2,F.x+=h/2):"right"===m&&(F.regX=F.width,F.x+=h),F.x=e+F.x*O,-1===_&&(F.y+=F.height),"bottom"===b?F.regY=F.height:"center"===b?(F.regY=F.height/2,F.y-=u/2):"top"===b&&(F.regY=0,F.y-=u),F.y=i+F.y*I,L.ellipse?(F.shape={},F.shape.type="circle",F.shape.width=F.width,F.shape.height=F.height,F.shape.radius=(F.width+F.height)/4):L.width&&L.height&&(F.shape={},F.shape.type="rectangle",F.shape.width=F.width,F.shape.height=F.height)}if(v&&(F.scaleX*=v.scaleX||1,F.scaleY*=v.scaleY||1),F.scaleX*=O,F.scaleY*=I,F.layerZ=this.layerZ,F.z?F.z+=this.layerZ:v&&"number"==typeof v.z?F.z=this.layerZ+v.z:F.z=this.layerZ,F.lazyLoad||v&&v.lazyLoad)U.aabb=C.a.setUp(F.x+F.width/2-F.regX,F.y+F.height/2-F.regY,F.width||1,F.height||1),this.lazyLoads.push(U),this.updateLoadingProgress(a);else{var X=this.owner.addEntity(U,this.updateLoadingProgress.bind(this,a));X&&X.camera&&(this.followEntity={entity:X,mode:X.camera})}}else this.updateLoadingProgress(a)}}),setupLayer:function(t,e,i,n,r,o,s,a,h,u){var l,c=!1,f=y(t.properties,"entity")||"render-layer",d=0;if(l=platypus.game.settings.entities[f]||T[f])for(d=l.components.length;d--;)if("RenderTiles"===l.components[d].type){c=!0;break}return c?this.createLayer(f,t,i,n,r,o,s,a,h,e,u):(this.createLayer(f,t,i,n,r,o,s,a,h,e,u),null)},updateLoadingProgress:function(t){t.count+=1,t.progress=t.count/t.total,this.owner.triggerEvent("level-loading-progress",t),t.count===t.total&&(t.recycle(),this.finishedLoading())},destroy:function(){P.a.recycle(this.lazyLoads),this.lazyLoads=null}},getAssetList:function(t,e,i,n){var r=e||{},o=i||{},s=t.spriteSheet||r.spriteSheet||o.spriteSheet,a=t.images||r.images||o.images,h=function(t,e){var i=function(t,e,i){for(var n=e.objects,r=0;r<n.length;r++){var o=w(n[r],i);if(o){var s=I.a.getAssetList(o);Object(P.d)(t,s),P.a.recycle(s)}}},n=0,r=P.a.setUp(),o=null,s=P.a.setUp(),a=null,h=null;if("string"==typeof t&&(t=platypus.game.settings.levels[t]),t)if(t.tilesets&&(t.tilesets=A(t.tilesets)),t.assets)Object(P.d)(s,t.assets);else if(t.layers){for(n=0;n<t.layers.length;n++){var u=t.layers[n];if("objectgroup"===u.type)i(s,u,t.tilesets);else if("imagelayer"===u.type)Object(P.d)(s,[u.image]);else{var l=P.a.setUp();d(u),Object(P.d)(l,u.data);for(var c=0;c<l.length;c++)for(var f=268435455&l[c],p=0;p<t.tilesets.length;p++){var g=t.tilesets[p].tiles;if(g)for(var v=0;v<g.length;v++){var m=g[v];m.id===f&&m.objectgroup&&i(s,m.objectgroup)}}(h=y(t.layers[n].properties,"entity"))&&(a=M.a.setUp("type",h),o=I.a.getAssetList(a),Object(P.d)(s,o),P.a.recycle(o),a.recycle())}}if(!e){for(n=0;n<t.tilesets.length;n++)r.push(t.tilesets[n].image);Object(P.d)(s,r),P.a.recycle(r)}t.assets=Object(P.b)(s)}return s}(n&&n.level||t.level||r.level||o.level,s);return s&&("string"==typeof s?Object(P.d)(h,platypus.game.settings.spriteSheets[s].images):Object(P.d)(h,s.images)),a&&Object(P.d)(h,a),h}}))},function(t,e,i){"use strict";var n,r,o,s=i(0),a=i(7),h=i(4);e.a=(n=function(){this.active--},r=function(){this.active++},o=function(t){this.timelineInstances.push(this.createTimeStampedTimeline(this.timelines[t]))},Object(h.a)({id:"Timeline",properties:{timelines:{}},initialize:function(){var t=0;for(t in this.timelineInstances=s.a.setUp(),this.timelines)this.timelines.hasOwnProperty(t)&&this.addEventListener(t,o.bind(this,t))},events:{"handle-logic":function(t){for(var e=t.delta,i=null,n=this.timelineInstances,r=n.length;r--;)(i=n[r]).remove?(Object(s.c)(n,r),s.a.recycle(i.timeline),i.recycle()):i.active&&(0===i.timeline.length?(Object(s.c)(n,r),s.a.recycle(i.timeline),i.recycle()):this.progressTimeline(i,e))},"stop-active-timelines":function(){for(var t=this.timelineInstances,e=t.length;e--;)t[e].remove=!0}},methods:{createTimeStampedTimeline:function(t){var e=s.a.setUp(),i=0,o=0,h=null;for(i=0;i<t.length;i++)"number"==typeof(h=t[i])?o+=h:e.push(a.a.setUp("time",o,"value",h));return e.reverse(),a.a.setUp("timeline",e,"time",0,"active",1,"pause",n,"play",r,"remove",!1)},progressTimeline:function(t,e){var i=t.timeline,n=i.length,r=null,o=null,s=this.owner;for(t.time+=e;n--;){if(!((r=i[n]).time<=t.time))return;if("string"==typeof(o=r.value)?this.owner.triggerEvent(o):(o.entity&&((s=this.owner.getEntityById?this.owner.getEntityById(o.entity):this.owner.parent.getEntityById(o.entity))||(platypus.debug.warn("No entity of that id"),s=this.owner)),o.message?s.triggerEvent(o.event,o.message):s.trigger(o.event)),r.recycle(),i.pop(),!t.active)return;r=null,o=null,s=this.owner}},destroy:function(){for(var t=null,e=this.timelineInstances,i=e.length;i--;)t=e[i],s.a.recycle(t.timeline),t.recycle();s.a.recycle(e),this.timelineInstances=null}}}))},function(t,e,i){"use strict";var n,r,o=i(4),s=i(0);e.a=(n=function(t){var e=null;for(e in this.watchedEntities)t.type===e&&this.watchedEntities[e].push(t)},r=function(t){var e=0,i=t.type;for(e=this.watchedEntities[i].length-1;e>=0;e--)if(this.watchedEntities[i][e]===t){this.watchedEntities[i].splice(e,1);break}},Object(o.a)({id:"Tutorial",properties:{tutorialDefs:[]},initialize:function(){var t=0,e=null,i=null,n=null;for(this.playing=null,this.theQueue=[],this.watchedEntities={},this.tutorials=[],t=0;t<this.tutorialDefs.length;t++)if(n={},(i=this.tutorialDefs[t]).events){for(e in n.events=Object(s.b)(i.events),n.originalEvents=Object(s.b)(i.events),n.priority=i.priority||0,n.queue=i.queue||!1,n.timesToReplay="number"==typeof i.timesToReplay?i.timesToReplay:1/0,n.replayDelay=i.replayDelay||null,n.replayDelayTimer=n.replayDelay,n.level=i.level,n.requirements={},i.requirements)i.requirements.hasOwnProperty(e)&&(n.requirements[e]=Object(s.b)(i.requirements[e]),this.watchedEntities[e]||(this.watchedEntities[e]=[]));this.tutorials.push(n)}else platypus.debug.warn("Tutorial definition lacks events.")},events:{"child-entity-added":n,"peer-entity-added":n,"child-entity-removed":r,"peer-entity-removed":r,"handle-logic":function(t){var e=t.delta,i=0,n=null,r=null,o=-1,s=!1,a=null;for(i=0;i<this.tutorials.length;i++)if(s=!1,n=this.tutorials[i],this.playing||0!==this.theQueue.length?!this.playing&&this.theQueue.length>0&&n.priority>this.theQueue[0].priority?s=!0:this.playing&&this.playing.priority<n.priority?s=!0:n.queue&&(s=!0):s=!0,s&&this.checkRequirements(n.requirements)){if(n.replayDelay&&n.replayDelayTimer>0&&(n.replayDelayTimer-=e,n.replayDelayTimer>0))continue;(!r||r.priority<n.priority)&&(r=n,o=i)}r?(a=this.tutorials.splice(o,1)[0],this.playing?a.priority>this.playing.priority?(this.owner.triggerEvent("stop-audio"),this.play(a)):this.queue(a):this.theQueue.length>0?a.priority>this.theQueue[0].priority?this.play(a):(this.play(this.theQueue.splice(0,1)[0]),this.queue(a)):this.play(a)):!this.playing&&this.theQueue.length>0&&this.play(this.theQueue.splice(0,1)[0])},"sequence-complete":function(){this.playing.timesToReplay>=0&&this.tutorials.push(this.playing),this.playing=null}},methods:{play:function(t){var e;this.playing=t,0===this.playing.events.length&&(this.playing.events=Object(s.b)(this.playing.originalEvents)),e=this.playing.events.splice(Math.floor(Math.random()*this.playing.events.length),1)[0],this.owner.triggerEvent(e),t.timesToReplay-=1,t.replayDelayTimer=t.replayDelay},queue:function(t){var e=0,i=!1;for(e=0;e<this.theQueue.length;e++)if(this.theQueue[e].priority<t.priority){this.theQueue.splice(e,0,t),i=!0;break}i||this.theQueue.push(t)},checkRequirements:function(t){var e=0,i=0,n=null,r=null,o=null,s=!0;for(n in t)if(t.hasOwnProperty(n)){for(r=t[n],i=this.watchedEntities[n].length-1;i>=0;i--){for(o=this.watchedEntities[n][i],s=!0,e=0;e<r.length;e++)if(!o.state.get(r[e])){s=!1;break}if(s)break}if(!s)return!1}return!0},destroy:function(){this.watchedEntities=null,this.theQueue=null,this.playing=null,this.tutorials=null}}}))},function(t,e,i){"use strict";var n=i(7),r=i(42),o=i(0),s=i(4),a=r.a.Easing,h=r.a.Group,u=r.a.Interpolation,l=r.a.Tween,c=function(){var t={};for(var e in a)if(a.hasOwnProperty(e))for(var i in a[e])a[e].hasOwnProperty(i)&&(t[e+"."+i]=a[e][i]);return t}(),f=function(){this.trigger.apply(this,arguments)};e.a=Object(s.a)({id:"Tween",properties:{events:null},initialize:function(){var t="",e=this.events;if(this.group=new h,this.waitingToChain=n.a.setUp(),this.tweens=n.a.setUp(),this.time=0,e)for(t in e)if(e.hasOwnProperty(t)){var i=this.tweens[t]=this.createTweens(e[t]);if(this.addEventListener(t,this.runTween.bind(this,t)),this.waitingToChain[t]){for(var r=this.waitingToChain[t],s=0;s<r.length;s++)r[s].chain(i);o.a.recycle(r),delete this.waitingToChain[t]}}},events:{tween:function(t){this.runTween(t)},"handle-logic":function(t){this.time+=t.delta,this.group.update(this.time)},"stop-tween":function(){this.group.removeAll()}},methods:{createTween:function(t,e){var i=this.owner,n=t.target?"string"==typeof t.target?i.parent.getEntityById(t.target):t.target:i;if(n){if(t.to&&t.time){var r=new l(n,this.group);if(r.to(t.to,t.time),t.onUpdate&&r.onUpdate("function"!=typeof t.onUpdate?f.bind(i,t.onUpdate):t.onUpdate),t.onStart&&r.onStart("function"!=typeof t.onStart?f.bind(i,t.onStart):t.onStart),t.onStop&&r.onStop("function"!=typeof t.onStop?f.bind(i,t.onStop):t.onStop),t.onComplete&&r.onComplete("function"!=typeof t.onComplete?f.bind(i,t.onComplete):t.onComplete),t.onRepeat&&r.onRepeat("function"!=typeof t.onRepeat?f.bind(i,t.onRepeat):t.onRepeat),t.chain&&(e?"string"==typeof t.chain?this.tweens[t.chain]?r.chain(this.tweens[t.chain]):(this.waitingToChain[t.chain]||(this.waitingToChain[t.chain]=o.a.setUp()),this.waitingToChain[t.chain].push(r)):r.chain(t.chain):platypus.debug.warn("Component Tween: ignoring `chain` on tween since it is part of an array of tweens.")),t.repeat&&r.repeat(t.repeat),t.yoyo&&r.yoyo(),t.delay&&r.delay(t.delay),t.repeatDelay&&r.repeatDelay(t.repeatDelay),t.interpolation&&("function"==typeof t.interpolation?r.interpolation(t.interpolation):u[t.interpolation]?r.interpolation(u[t.interpolation]):platypus.debug.warn('Component Tween: "'+t.interpolation+'" is not a valid interpolation value; must be "Linear", "Bezier", or "CatmullRom".')),t.easing)if("function"==typeof t.easing)r.easing(t.easing);else if(c[t.easing])r.easing(c[t.easing]);else{var s='".',a='", or "';for(var h in c)c.hasOwnProperty(h)&&(s=a+h+s,a='", "');platypus.debug.warn('Component Tween: "'+t.easing+'" is not a valid easing value; must be '+s.substring(3))}return r}return platypus.debug.warn("Component Tween: Both `time` and `to` must be specified to create tween."),null}return platypus.debug.warn("Component Tween: Could not find entity as specified by `target` - "+t.target),null},createTweens:function(t){if(Array.isArray(t)){for(var e=t.length,i=null;e--;){var n=this.createTween(t[e],!i);i&&n.chain(i),i=n}return i}return this.createTween(t,!0)},destroy:function(){this.group.removeAll()},runTween:function(t){var e="string"==typeof t?this.tweens[t]:this.createTweens(t);e?e.start(this.time):platypus.debug.warn("Component Tween: Unable to run requested tween.",t)}}})},function(t,e,i){"use strict";var n,r,o,s,a=i(0),h=i(49),u=i(104),l=i(106),c=i(4);e.a=(n=function(t,e){return" "===e?t+"default":t+e},r=function(t,e,i){this.owner.addComponent(new t(this.owner,e,i))},o=function(t,e,i,r){var o=0,s="",h={},u=0,l="",c="",f=t.voice,d=t.mouthCues;if("string"==typeof t)h.sound=t,h.events=a.a.setUp();else if("string"==typeof t.sound)h.sound=t.sound,t.events?h.events=Object(a.b)(t.events):h.events=a.a.setUp();else{for(s in t.sound)t.sound.hasOwnProperty(s)&&(h[s]=t.sound[s]);h.events?h.events=Object(a.b)(h.events):h.events=a.a.setUp()}if(f||d||!platypus.game.settings.mouthCues||(d=platypus.game.settings.mouthCues[h.sound.substring(h.sound.lastIndexOf("/")+1)]),f)for(f+=" ",o=0;o<f.length;o++)(c=f[o])!==l&&(l=c,h.events.push({time:u,event:n(i,c)})),u+=r;else if(d)for(o=0;o<d.length;o++)c=d[o],h.events.push({time:1e3*c.start,event:n(i,c.value)}),u+=r;return h},s=function(t,e,i,n){var r=0,s=a.a.setUp();if(e[" "]||(e[" "]=e.default),Array.isArray(t)){for(r=0;r<t.length;r++)"number"==typeof t[r]?s.push(t[r]):s.push(o(t[r],0,i,n));return s}return o(t,0,i,n)},Object(c.a)({id:"VoiceOver",properties:{animationMap:{default:"default"},renderComponent:"",frameLength:100,messagePrefix:"",voiceOverMap:{}},initialize:function(t,e){var i="",o=a.a.setUp(),c={audioMap:{},aliases:t.aliases},f={acceptInput:t.acceptInput,aliases:t.aliases,animation:t.animation,animationMap:{},eventBased:!0,flip:t.flip,hidden:t.hidden,interactive:t.interactive,mask:t.mask,mirror:t.mirror,offsetZ:t.offsetZ,regX:t.regX,regY:t.regY,restart:t.restart,scaleX:t.scaleX,scaleY:t.scaleY,spriteSheet:t.spriteSheet,stateBased:t.stateBased||!1};for(i in this.messagePrefix?this.message=this.messagePrefix+"-":this.message="",this.animationMap)this.animationMap.hasOwnProperty(i)&&(f.animationMap[n(this.message,i)]=this.animationMap[i]);for(i in f.animationMap.default=this.animationMap.default,this.renderComponent?o.push(r.bind(this,platypus.components[this.renderComponent],f)):o.push(r.bind(this,l.a,f)),this.voiceOverMap)this.voiceOverMap.hasOwnProperty(i)&&(c.audioMap[i]=s(this.voiceOverMap[i],this.animationMap,this.message,this.frameLength));return o.push(r.bind(this,u.a,c)),h.a.setUp(o,e),a.a.recycle(o),!0},events:{load:function(){this.owner.removeComponent(this)}},getAssetList:function(t,e,i){var n=t.spriteSheet||e.spriteSheet||i&&i.spriteSheet;return"string"==typeof n?Object(a.b)(platypus.game.settings.spriteSheets[n].images):n?Object(a.b)(n.images):a.a.setUp()}}))},function(t,e,i){"use strict";var n=i(4);e.a=function(){var t=window.XMLHttpRequest;return Object(n.a)({id:"XHR",properties:{method:"GET",path:"",responseType:"text",withCredentials:!1},initialize:function(t){this.setProperties(t)},events:{request:function(t){if(this.setProperties(t),"GET"===this.method)this.get();else{if("POST"!==this.method)throw"Method must be GET or POST";this.post()}}},methods:{setProperties:function(t){var e="",i="",n=t||this;if(this.method=n.method||this.method||"GET",this.path=n.path||this.path||null,this.responseType=n.responseType||this.responseType||"text",this.withCredentials=n.withCredentials||this.withCredentials||!1,n!==this&&n.data)for(e in this.data="",n.data)n.data.hasOwnProperty(e)&&(this.data+=i+e+"="+n.data[e],i="&");else this.data="";this.onload=n.onload||this.onload||function(){200===this.status&&this.owner.triggerEvent("response",this.responseText)}.bind(this)},get:function(){var e=new t,i=this.path;this.data&&(i+="?"+this.data),e.open(this.method,i,!0),e.withCredentials=this.withCredentials,e.responseType=this.responseType,e.onload=this.onload,e.send()},post:function(){var e=new t;e.open(this.method,this.path,!0),e.withCredentials=this.withCredentials,e.responseType=this.responseType,e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onload=this.onload,e.send(this.data)}}})}()},,function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i.d(e,"a",(function(){return r}));var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name="GoogleAnalytics",this.panel=document.createElement("div"),this.logs=document.createElement("div")}var e,i;return e=t,(i=[{key:"preload",value:function(){return Promise.resolve()}},{key:"init",value:function(){}},{key:"start",value:function(t){this.app=t,this.loggingPanel=t.getPlugin("LoggingPanel"),void 0!==this.loggingPanel&&(this.render=this.loggingPanel.addPanel({name:"Google Analytics"}),this.logs.className="container",this.logs.style.overflowY="scroll",this.logs.style.maxHeight="80vh",this.panel.appendChild(this.logs),this.render(this.panel))}},{key:"render",value:function(t){}},{key:"getFormattedDate",value:function(){var t=new Date,e=t.getHours()+":",i=t.getMinutes();e+=i<10?"0".concat(i):i,e+=":";var n=t.getSeconds();return e+(n<10?"0".concat(n):n)}},{key:"event",value:function(t,e,i,n){var r={hitType:"event"};void 0!==t&&(r.eventCategory=t),void 0!==e&&(r.eventAction=e),void 0!==i&&(r.eventLabel=i),void 0!==n&&(r.eventValue=n),this.app.container.connected&&this.app.container.send("googleAnalyticsEvent",r),this.renderRecord("Event",[t,e,i,n])}},{key:"renderRecord",value:function(t,e){if(void 0!==this.loggingPanel){var i=document.createElement("div");i.className="container";var n=document.createElement("div");n.className="bg-dkblue container";var r=document.createElement("div");r.className="half-width bold",r.innerText=t.toUpperCase(),n.appendChild(r);var o=document.createElement("div");o.innerText=this.getFormattedDate(),o.className="half-width bold",n.appendChild(o);var s=document.createElement("div");s.className="clear--both",n.appendChild(s),i.appendChild(n);var a=document.createElement("div");a.className="bg-blue full-width container",a.style.textAlign="center",a.innerText=e.filter((function(t){return void 0!==t})).join(" ➜ "),i.appendChild(a);var h=document.createElement("div");h.className="clear--both",i.appendChild(h),this.logs.insertBefore(i,this.logs.firstChild),this.render(this.panel)}}}])&&n(e.prototype,i),t}()},function(t,e,i){"use strict";var n=i(3),r=(n.n,i(5)),o=function(t){function e(e,i,n){void 0===e&&(e=4),void 0===i&&(i=3),void 0===n&&(n=!1),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",n?"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}\n":"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}"),this.uniforms.uOffset=new Float32Array(2),this._pixelSize=new r.g,this.pixelSize=1,this._clamp=n,this._kernels=null,Array.isArray(e)?this.kernels=e:(this._blur=e,this.quality=i)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={kernels:{configurable:!0},clamp:{configurable:!0},pixelSize:{configurable:!0},quality:{configurable:!0},blur:{configurable:!0}};return e.prototype.apply=function(t,e,i,n){var r,o=this.pixelSize.x/e._frame.width,s=this.pixelSize.y/e._frame.height;if(1===this._quality||0===this._blur)r=this._kernels[0]+.5,this.uniforms.uOffset[0]=r*o,this.uniforms.uOffset[1]=r*s,t.applyFilter(this,e,i,n);else{for(var a,h=t.getFilterTexture(),u=e,l=h,c=this._quality-1,f=0;f<c;f++)r=this._kernels[f]+.5,this.uniforms.uOffset[0]=r*o,this.uniforms.uOffset[1]=r*s,t.applyFilter(this,u,l,!0),a=u,u=l,l=a;r=this._kernels[c]+.5,this.uniforms.uOffset[0]=r*o,this.uniforms.uOffset[1]=r*s,t.applyFilter(this,u,i,n),t.returnFilterTexture(h)}},e.prototype._generateKernels=function(){var t=this._blur,e=this._quality,i=[t];if(t>0)for(var n=t,r=t/e,o=1;o<e;o++)n-=r,i.push(n);this._kernels=i},i.kernels.get=function(){return this._kernels},i.kernels.set=function(t){Array.isArray(t)&&t.length>0?(this._kernels=t,this._quality=t.length,this._blur=Math.max.apply(Math,t)):(this._kernels=[0],this._quality=1)},i.clamp.get=function(){return this._clamp},i.pixelSize.set=function(t){"number"==typeof t?(this._pixelSize.x=t,this._pixelSize.y=t):Array.isArray(t)?(this._pixelSize.x=t[0],this._pixelSize.y=t[1]):t instanceof r.g?(this._pixelSize.x=t.x,this._pixelSize.y=t.y):(this._pixelSize.x=1,this._pixelSize.y=1)},i.pixelSize.get=function(){return this._pixelSize},i.quality.get=function(){return this._quality},i.quality.set=function(t){this._quality=Math.max(1,Math.round(t)),this._generateKernels()},i.blur.get=function(){return this._blur},i.blur.set=function(t){this._blur=t,this._generateKernels()},Object.defineProperties(e.prototype,i),e}(n.n),s=i(10),a="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",h=function(t){function e(e){void 0===e&&(e=.5),t.call(this,a,"\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform float threshold;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    // A simple & fast algorithm for getting brightness.\n    // It's inaccuracy , but good enought for this feature.\n    float _max = max(max(color.r, color.g), color.b);\n    float _min = min(min(color.r, color.g), color.b);\n    float brightness = (_max + _min) * 0.5;\n\n    if(brightness > threshold) {\n        gl_FragColor = color;\n    } else {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n}\n"),this.threshold=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={threshold:{configurable:!0}};return i.threshold.get=function(){return this.uniforms.threshold},i.threshold.set=function(t){this.uniforms.threshold=t},Object.defineProperties(e.prototype,i),e}(n.n),u=(n.n,n.n,i(2)),l=(n.n,i(6)),c=i(103),f=i(80),d=(n.n,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}"),p="uniform float radius;\nuniform float strength;\nuniform vec2 center;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nvoid main()\n{\n    vec2 coord = vTextureCoord * filterArea.xy;\n    coord -= center * dimensions.xy;\n    float distance = length(coord);\n    if (distance < radius) {\n        float percent = distance / radius;\n        if (strength > 0.0) {\n            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n        } else {\n            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n        }\n    }\n    coord += center * dimensions.xy;\n    coord /= filterArea.xy;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    gl_FragColor = color;\n}\n",g=(n.n,function(t){function e(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=1),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform sampler2D colorMap;\nuniform float _mix;\nuniform float _size;\nuniform float _sliceSize;\nuniform float _slicePixelSize;\nuniform float _sliceInnerSize;\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord.xy);\n\n    vec4 adjusted;\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n        float innerWidth = _size - 1.0;\n        float zSlice0 = min(floor(color.b * innerWidth), innerWidth);\n        float zSlice1 = min(zSlice0 + 1.0, innerWidth);\n        float xOffset = _slicePixelSize * 0.5 + color.r * _sliceInnerSize;\n        float s0 = xOffset + (zSlice0 * _sliceSize);\n        float s1 = xOffset + (zSlice1 * _sliceSize);\n        float yOffset = _sliceSize * 0.5 + color.g * (1.0 - _sliceSize);\n        vec4 slice0Color = texture2D(colorMap, vec2(s0,yOffset));\n        vec4 slice1Color = texture2D(colorMap, vec2(s1,yOffset));\n        float zOffset = fract(color.b * innerWidth);\n        adjusted = mix(slice0Color, slice1Color, zOffset);\n\n        color.rgb *= color.a;\n    }\n    gl_FragColor = vec4(mix(color, adjusted, _mix).rgb, color.a);\n\n}"),this._size=0,this._sliceSize=0,this._slicePixelSize=0,this._sliceInnerSize=0,this._scaleMode=null,this._nearest=!1,this.nearest=i,this.mix=n,this.colorMap=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={colorSize:{configurable:!0},colorMap:{configurable:!0},nearest:{configurable:!0}};return e.prototype.apply=function(t,e,i,n){this.uniforms._mix=this.mix,t.applyFilter(this,e,i,n)},i.colorSize.get=function(){return this._size},i.colorMap.get=function(){return this._colorMap},i.colorMap.set=function(t){t instanceof n.E||(t=n.E.from(t)),t&&t.baseTexture&&(t.baseTexture.scaleMode=this._scaleMode,t.baseTexture.mipmap=!1,this._size=t.height,this._sliceSize=1/this._size,this._slicePixelSize=this._sliceSize/this._size,this._sliceInnerSize=this._slicePixelSize*(this._size-1),this.uniforms._size=this._size,this.uniforms._sliceSize=this._sliceSize,this.uniforms._slicePixelSize=this._slicePixelSize,this.uniforms._sliceInnerSize=this._sliceInnerSize,this.uniforms.colorMap=t),this._colorMap=t},i.nearest.get=function(){return this._nearest},i.nearest.set=function(t){this._nearest=t,this._scaleMode=t?l.k.NEAREST:l.k.LINEAR;var e=this._colorMap;e&&e.baseTexture&&(e.baseTexture._glTextures={},e.baseTexture.scaleMode=this._scaleMode,e.baseTexture.mipmap=!1,e._updateID++,e.baseTexture.emit("update",e.baseTexture))},e.prototype.updateColorMap=function(){var t=this._colorMap;t&&t.baseTexture&&(t._updateID++,t.baseTexture.emit("update",t.baseTexture),this.colorMap=t)},e.prototype.destroy=function(e){this._colorMap&&this._colorMap.destroy(e),t.prototype.destroy.call(this)},Object.defineProperties(e.prototype,i),e}(n.n)),v=(n.n,n.n,n.n,n.n,n.n,n.n,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}"),m="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform vec3 color;\n\nuniform vec2 shift;\nuniform vec4 inputSize;\n\nvoid main(void){\n    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);\n\n    // Premultiply alpha\n    sample.rgb = color.rgb * sample.a;\n\n    // alpha user alpha\n    sample *= alpha;\n\n    gl_FragColor = sample;\n}",y=(n.n,n.n,function(t){function e(e){void 0===e&&(e={}),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","// precision highp float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\nuniform float aspect;\n\nuniform sampler2D displacementMap;\nuniform float offset;\nuniform float sinDir;\nuniform float cosDir;\nuniform int fillMode;\n\nuniform float seed;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nconst int TRANSPARENT = 0;\nconst int ORIGINAL = 1;\nconst int LOOP = 2;\nconst int CLAMP = 3;\nconst int MIRROR = 4;\n\nvoid main(void)\n{\n    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;\n\n    if (coord.x > 1.0 || coord.y > 1.0) {\n        return;\n    }\n\n    float cx = coord.x - 0.5;\n    float cy = (coord.y - 0.5) * aspect;\n    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;\n\n    // displacementMap: repeat\n    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);\n\n    // displacementMap: mirror\n    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);\n\n    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));\n\n    float displacement = (dc.r - dc.g) * (offset / filterArea.x);\n\n    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);\n\n    if (fillMode == CLAMP) {\n        coord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    } else {\n        if( coord.x > filterClamp.z ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x -= filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x = filterClamp.z * 2.0 - coord.x;\n            }\n        } else if( coord.x < filterClamp.x ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x += filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x *= -filterClamp.z;\n            }\n        }\n\n        if( coord.y > filterClamp.w ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y -= filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y = filterClamp.w * 2.0 - coord.y;\n            }\n        } else if( coord.y < filterClamp.y ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y += filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y *= -filterClamp.w;\n            }\n        }\n    }\n\n    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;\n    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;\n    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;\n    gl_FragColor.a = texture2D(uSampler, coord).a;\n}\n"),this.uniforms.dimensions=new Float32Array(2),e=Object.assign({slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},e),this.direction=e.direction,this.red=e.red,this.green=e.green,this.blue=e.blue,this.offset=e.offset,this.fillMode=e.fillMode,this.average=e.average,this.seed=e.seed,this.minSize=e.minSize,this.sampleSize=e.sampleSize,this._canvas=document.createElement("canvas"),this._canvas.width=4,this._canvas.height=this.sampleSize,this.texture=n.E.from(this._canvas,{scaleMode:l.k.NEAREST}),this._slices=0,this.slices=e.slices}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={sizes:{configurable:!0},offsets:{configurable:!0},slices:{configurable:!0},direction:{configurable:!0},red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return e.prototype.apply=function(t,e,i,n){var r=e.filterFrame.width,o=e.filterFrame.height;this.uniforms.dimensions[0]=r,this.uniforms.dimensions[1]=o,this.uniforms.aspect=o/r,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,t.applyFilter(this,e,i,n)},e.prototype._randomizeSizes=function(){var t=this._sizes,e=this._slices-1,i=this.sampleSize,n=Math.min(this.minSize/i,.9/this._slices);if(this.average){for(var r=this._slices,o=1,s=0;s<e;s++){var a=o/(r-s),h=Math.max(a*(1-.6*Math.random()),n);t[s]=h,o-=h}t[e]=o}else{for(var u=1,l=Math.sqrt(1/this._slices),c=0;c<e;c++){var f=Math.max(l*u*Math.random(),n);t[c]=f,u-=f}t[e]=u}this.shuffle()},e.prototype.shuffle=function(){for(var t=this._sizes,e=this._slices-1;e>0;e--){var i=Math.random()*e>>0,n=t[e];t[e]=t[i],t[i]=n}},e.prototype._randomizeOffsets=function(){for(var t=0;t<this._slices;t++)this._offsets[t]=Math.random()*(Math.random()<.5?-1:1)},e.prototype.refresh=function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()},e.prototype.redraw=function(){var t,e=this.sampleSize,i=this.texture,n=this._canvas.getContext("2d");n.clearRect(0,0,8,e);for(var r=0,o=0;o<this._slices;o++){t=Math.floor(256*this._offsets[o]);var s=this._sizes[o]*e,a=t>0?t:0,h=t<0?-t:0;n.fillStyle="rgba("+a+", "+h+", 0, 1)",n.fillRect(0,r>>0,e,s+1>>0),r+=s}i.baseTexture.update(),this.uniforms.displacementMap=i},i.sizes.set=function(t){for(var e=Math.min(this._slices,t.length),i=0;i<e;i++)this._sizes[i]=t[i]},i.sizes.get=function(){return this._sizes},i.offsets.set=function(t){for(var e=Math.min(this._slices,t.length),i=0;i<e;i++)this._offsets[i]=t[i]},i.offsets.get=function(){return this._offsets},i.slices.get=function(){return this._slices},i.slices.set=function(t){this._slices!==t&&(this._slices=t,this.uniforms.slices=t,this._sizes=this.uniforms.slicesWidth=new Float32Array(t),this._offsets=this.uniforms.slicesOffset=new Float32Array(t),this.refresh())},i.direction.get=function(){return this._direction},i.direction.set=function(t){if(this._direction!==t){this._direction=t;var e=t*r.b;this.uniforms.sinDir=Math.sin(e),this.uniforms.cosDir=Math.cos(e)}},i.red.get=function(){return this.uniforms.red},i.red.set=function(t){this.uniforms.red=t},i.green.get=function(){return this.uniforms.green},i.green.set=function(t){this.uniforms.green=t},i.blue.get=function(){return this.uniforms.blue},i.blue.set=function(t){this.uniforms.blue=t},e.prototype.destroy=function(){this.texture.destroy(!0),this.texture=null,this._canvas=null,this.red=null,this.green=null,this.blue=null,this._sizes=null,this._offsets=null},Object.defineProperties(e.prototype,i),e}(n.n));
/*!
 * @pixi/filter-adjustment - v3.1.0
 * Compiled Tue, 03 Mar 2020 12:42:37 UTC
 *
 * @pixi/filter-adjustment is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */y.TRANSPARENT=0,y.ORIGINAL=1,y.LOOP=2,y.CLAMP=3,y.MIRROR=4;(function(t){function e(i){var n=Object.assign({},e.defaults,i),r=n.distance,o=n.outerStrength,s=n.innerStrength,a=n.color,h=n.knockout,u=n.quality;r=Math.round(r),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float outerStrength;\nuniform float innerStrength;\n\nuniform vec4 glowColor;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform bool knockout;\n\nconst float PI = 3.14159265358979323846264;\n\nconst float DIST = __DIST__;\nconst float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);\nconst float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);\n\nconst float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n\n    float totalAlpha = 0.0;\n\n    vec2 direction;\n    vec2 displaced;\n    vec4 curColor;\n\n    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {\n       direction = vec2(cos(angle), sin(angle)) * px;\n\n       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {\n           displaced = clamp(vTextureCoord + direction * \n                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);\n\n           curColor = texture2D(uSampler, displaced);\n\n           totalAlpha += (DIST - curDistance) * curColor.a;\n       }\n    }\n    \n    curColor = texture2D(uSampler, vTextureCoord);\n\n    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);\n\n    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;\n    float innerGlowStrength = min(1.0, innerGlowAlpha);\n    \n    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);\n\n    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);\n    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);\n\n    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;\n    \n    if (knockout) {\n      float resultAlpha = outerGlowAlpha + innerGlowAlpha;\n      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);\n    }\n    else {\n      gl_FragColor = innerColor + outerGlowColor;\n    }\n}\n".replace(/__ANGLE_STEP_SIZE__/gi,""+(1/u/r).toFixed(7)).replace(/__DIST__/gi,r.toFixed(0)+".0")),this.uniforms.glowColor=new Float32Array([0,0,0,1]),Object.assign(this,{color:a,outerStrength:o,innerStrength:s,padding:r,knockout:h})}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={color:{configurable:!0},outerStrength:{configurable:!0},innerStrength:{configurable:!0},knockout:{configurable:!0}};return i.color.get=function(){return Object(u.rgb2hex)(this.uniforms.glowColor)},i.color.set=function(t){Object(u.hex2rgb)(t,this.uniforms.glowColor)},i.outerStrength.get=function(){return this.uniforms.outerStrength},i.outerStrength.set=function(t){this.uniforms.outerStrength=t},i.innerStrength.get=function(){return this.uniforms.innerStrength},i.innerStrength.set=function(t){this.uniforms.innerStrength=t},i.knockout.get=function(){return this.uniforms.knockout},i.knockout.set=function(t){this.uniforms.knockout=t},Object.defineProperties(e.prototype,i),e}(n.n)).defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1};
/*!
 * @pixi/filter-godray - v3.1.0
 * Compiled Tue, 03 Mar 2020 12:42:37 UTC
 *
 * @pixi/filter-godray is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var b="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",_="vec3 mod289(vec3 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 mod289(vec4 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 permute(vec4 x)\n{\n    return mod289(((x * 34.0) + 1.0) * x);\n}\nvec4 taylorInvSqrt(vec4 r)\n{\n    return 1.79284291400159 - 0.85373472095314 * r;\n}\nvec3 fade(vec3 t)\n{\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = Pi0.zzzz;\n    vec4 iz1 = Pi1.zzzz;\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n    vec4 gx0 = ixy0 * (1.0 / 7.0);\n    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n    vec4 sz0 = step(gz0, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    vec4 gx1 = ixy1 * (1.0 / 7.0);\n    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx1 = fract(gx1);\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n    vec4 sz1 = step(gz1, vec4(0.0));\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n    g000 *= norm0.x;\n    g010 *= norm0.y;\n    g100 *= norm0.z;\n    g110 *= norm0.w;\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n    g001 *= norm1.x;\n    g011 *= norm1.y;\n    g101 *= norm1.z;\n    g111 *= norm1.w;\n    float n000 = dot(g000, Pf0);\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n    float n111 = dot(g111, Pf1);\n    vec3 fade_xyz = fade(Pf0);\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n    return 2.2 * n_xyz;\n}\nfloat turb(vec3 P, vec3 rep, float lacunarity, float gain)\n{\n    float sum = 0.0;\n    float sc = 1.0;\n    float totalgain = 1.0;\n    for (float i = 0.0; i < 6.0; i++)\n    {\n        sum += totalgain * pnoise(P * sc, rep);\n        sc *= lacunarity;\n        totalgain *= gain;\n    }\n    return abs(sum);\n}\n",w="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform vec2 light;\nuniform bool parallel;\nuniform float aspect;\n\nuniform float gain;\nuniform float lacunarity;\nuniform float time;\n\n${perlin}\n\nvoid main(void) {\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    float d;\n\n    if (parallel) {\n        float _cos = light.x;\n        float _sin = light.y;\n        d = (_cos * coord.x) + (_sin * coord.y * aspect);\n    } else {\n        float dx = coord.x - light.x / dimensions.x;\n        float dy = (coord.y - light.y / dimensions.y) * aspect;\n        float dis = sqrt(dx * dx + dy * dy) + 0.00001;\n        d = dy / dis;\n    }\n\n    vec3 dir = vec3(d, d, 0.0);\n\n    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);\n    noise = mix(noise, 0.0, 0.3);\n    //fade vertically.\n    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);\n    mist.a = 1.0;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;\n}\n",x=(n.n,n.n,n.n,n.n,function(t){function e(i,n,r){void 0===i&&(i=1),void 0===n&&(n=0),void 0===r&&(r=.1);var o=Math.max(r*e.MAX_SAMPLES,e.MIN_SAMPLES),s=(2*Math.PI/o).toFixed(7);t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 thickness;\nuniform vec4 outlineColor;\nuniform vec4 filterClamp;\n\nconst float DOUBLE_PI = 3.14159265358979323846264 * 2.;\n\nvoid main(void) {\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float maxAlpha = 0.;\n    vec2 displaced;\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += ${angleStep}) {\n        displaced.x = vTextureCoord.x + thickness.x * cos(angle);\n        displaced.y = vTextureCoord.y + thickness.y * sin(angle);\n        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n        maxAlpha = max(maxAlpha, curColor.a);\n    }\n    float resultAlpha = max(maxAlpha, ownColor.a);\n    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);\n}\n".replace(/\$\{angleStep\}/,s)),this.uniforms.thickness=new Float32Array([0,0]),this.thickness=i,this.uniforms.outlineColor=new Float32Array([0,0,0,1]),this.color=n,this.quality=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={color:{configurable:!0}};return e.prototype.apply=function(t,e,i,n){this.uniforms.thickness[0]=this.thickness/e._frame.width,this.uniforms.thickness[1]=this.thickness/e._frame.height,t.applyFilter(this,e,i,n)},i.color.get=function(){return Object(u.rgb2hex)(this.uniforms.outlineColor)},i.color.set=function(t){Object(u.hex2rgb)(t,this.uniforms.outlineColor)},Object.defineProperties(e.prototype,i),e}(n.n));x.MIN_SAMPLES=1,x.MAX_SAMPLES=100;
/*!
 * @pixi/filter-pixelate - v3.1.0
 * Compiled Tue, 03 Mar 2020 12:42:37 UTC
 *
 * @pixi/filter-pixelate is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
n.n,n.n,n.n,n.n,n.n,n.n;var E=function(t){function e(e,i,n,o){void 0===e&&(e=100),void 0===i&&(i=600),void 0===n&&(n=null),void 0===o&&(o=null),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    color /= total;\n    color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n"),this.uniforms.blur=e,this.uniforms.gradientBlur=i,this.uniforms.start=n||new r.g(0,window.innerHeight/2),this.uniforms.end=o||new r.g(600,window.innerHeight/2),this.uniforms.delta=new r.g(30,30),this.uniforms.texSize=new r.g(window.innerWidth,window.innerHeight),this.updateDelta()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={blur:{configurable:!0},gradientBlur:{configurable:!0},start:{configurable:!0},end:{configurable:!0}};return e.prototype.updateDelta=function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0},i.blur.get=function(){return this.uniforms.blur},i.blur.set=function(t){this.uniforms.blur=t},i.gradientBlur.get=function(){return this.uniforms.gradientBlur},i.gradientBlur.set=function(t){this.uniforms.gradientBlur=t},i.start.get=function(){return this.uniforms.start},i.start.set=function(t){this.uniforms.start=t,this.updateDelta()},i.end.get=function(){return this.uniforms.end},i.end.set=function(t){this.uniforms.end=t,this.updateDelta()},Object.defineProperties(e.prototype,i),e}(n.n),T=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.updateDelta=function(){var t=this.uniforms.end.x-this.uniforms.start.x,e=this.uniforms.end.y-this.uniforms.start.y,i=Math.sqrt(t*t+e*e);this.uniforms.delta.x=t/i,this.uniforms.delta.y=e/i},e}(E),S=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.updateDelta=function(){var t=this.uniforms.end.x-this.uniforms.start.x,e=this.uniforms.end.y-this.uniforms.start.y,i=Math.sqrt(t*t+e*e);this.uniforms.delta.x=-e/i,this.uniforms.delta.y=t/i},e}(E),A=(n.n,n.n,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}"),P="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uCenter;\nuniform float uStrength;\nuniform float uInnerRadius;\nuniform float uRadius;\n\nconst float MAX_KERNEL_SIZE = 32.0;\n\n// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand(vec2 co, float seed) {\n    const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);\n    return fract(sin(sn) * c + seed);\n}\n\nvoid main() {\n\n    float minGradient = uInnerRadius * 0.3;\n    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;\n\n    float gradient = uRadius * 0.3;\n    float radius = (uRadius - gradient * 0.5) / filterArea.x;\n\n    float countLimit = MAX_KERNEL_SIZE;\n\n    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);\n    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));\n\n    float strength = uStrength;\n\n    float delta = 0.0;\n    float gap;\n    if (dist < innerRadius) {\n        delta = innerRadius - dist;\n        gap = minGradient;\n    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity\n        delta = dist - radius;\n        gap = gradient;\n    }\n\n    if (delta > 0.0) {\n        float normalCount = gap / filterArea.x;\n        delta = (normalCount - delta) / normalCount;\n        countLimit *= delta;\n        strength *= delta;\n        if (countLimit < 1.0)\n        {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n    }\n\n    // randomize the lookup values to hide the fixed number of samples\n    float offset = rand(vTextureCoord, 0.0);\n\n    float total = 0.0;\n    vec4 color = vec4(0.0);\n\n    dir *= strength;\n\n    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {\n        float percent = (t + offset) / MAX_KERNEL_SIZE;\n        float weight = 4.0 * (percent - percent * percent);\n        vec2 p = vTextureCoord + dir * percent;\n        vec4 sample = texture2D(uSampler, p);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n\n        if (t > countLimit){\n            break;\n        }\n    }\n\n    color /= total;\n    // switch back from pre-multiplied alpha\n    // color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n";n.n;i.d(e,"a",(function(){return g}))},,function(t,e,i){"use strict";i(253);var n,r=(n=i(425))&&n.__esModule?n:{default:n};r.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),r.default._babelPolyfill=!0},function(t,e,i){"use strict";i(254),i(397),i(399),i(402),i(404),i(406),i(408),i(410),i(412),i(414),i(416),i(418),i(420),i(424)},function(t,e,i){i(255),i(258),i(259),i(260),i(261),i(262),i(263),i(264),i(265),i(266),i(267),i(268),i(269),i(270),i(271),i(272),i(273),i(274),i(275),i(276),i(277),i(278),i(279),i(280),i(281),i(282),i(283),i(284),i(285),i(286),i(287),i(288),i(289),i(290),i(291),i(292),i(293),i(294),i(295),i(296),i(297),i(298),i(299),i(301),i(302),i(303),i(304),i(305),i(306),i(307),i(308),i(309),i(310),i(311),i(312),i(313),i(314),i(315),i(316),i(317),i(318),i(319),i(320),i(321),i(322),i(323),i(324),i(325),i(326),i(327),i(328),i(329),i(330),i(331),i(332),i(333),i(334),i(336),i(337),i(339),i(340),i(341),i(342),i(343),i(344),i(345),i(347),i(348),i(349),i(350),i(351),i(352),i(353),i(354),i(355),i(356),i(357),i(358),i(359),i(127),i(360),i(157),i(361),i(158),i(362),i(363),i(364),i(365),i(159),i(368),i(369),i(370),i(371),i(372),i(373),i(374),i(375),i(376),i(377),i(378),i(379),i(380),i(381),i(382),i(383),i(384),i(385),i(386),i(387),i(388),i(389),i(390),i(391),i(392),i(393),i(394),i(395),i(396),t.exports=i(26)},function(t,e,i){"use strict";var n=i(16),r=i(36),o=i(28),s=i(8),a=i(34),h=i(58).KEY,u=i(17),l=i(87),c=i(71),f=i(61),d=i(22),p=i(108),g=i(138),v=i(257),m=i(90),y=i(18),b=i(19),_=i(32),w=i(38),x=i(57),E=i(60),T=i(65),S=i(141),A=i(46),P=i(89),C=i(29),M=i(63),O=A.f,I=C.f,k=S.f,R=n.Symbol,L=n.JSON,D=L&&L.stringify,F=d("_hidden"),N=d("toPrimitive"),U={}.propertyIsEnumerable,B=l("symbol-registry"),j=l("symbols"),X=l("op-symbols"),V=Object.prototype,z="function"==typeof R&&!!P.f,Y=n.QObject,W=!Y||!Y.prototype||!Y.prototype.findChild,G=o&&u((function(){return 7!=T(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=O(V,e);n&&delete V[e],I(t,e,i),n&&t!==V&&I(V,e,n)}:I,H=function(t){var e=j[t]=T(R.prototype);return e._k=t,e},q=z&&"symbol"==typeof R.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof R},Z=function(t,e,i){return t===V&&Z(X,e,i),y(t),e=x(e,!0),y(i),r(j,e)?(i.enumerable?(r(t,F)&&t[F][e]&&(t[F][e]=!1),i=T(i,{enumerable:E(0,!1)})):(r(t,F)||I(t,F,E(1,{})),t[F][e]=!0),G(t,e,i)):I(t,e,i)},K=function(t,e){y(t);for(var i,n=v(e=w(e)),r=0,o=n.length;o>r;)Z(t,i=n[r++],e[i]);return t},J=function(t){var e=U.call(this,t=x(t,!0));return!(this===V&&r(j,t)&&!r(X,t))&&(!(e||!r(this,t)||!r(j,t)||r(this,F)&&this[F][t])||e)},Q=function(t,e){if(t=w(t),e=x(e,!0),t!==V||!r(j,e)||r(X,e)){var i=O(t,e);return!i||!r(j,e)||r(t,F)&&t[F][e]||(i.enumerable=!0),i}},$=function(t){for(var e,i=k(w(t)),n=[],o=0;i.length>o;)r(j,e=i[o++])||e==F||e==h||n.push(e);return n},tt=function(t){for(var e,i=t===V,n=k(i?X:w(t)),o=[],s=0;n.length>s;)!r(j,e=n[s++])||i&&!r(V,e)||o.push(j[e]);return o};z||(a((R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(i){this===V&&e.call(X,i),r(this,F)&&r(this[F],t)&&(this[F][t]=!1),G(this,t,E(1,i))};return o&&W&&G(V,t,{configurable:!0,set:e}),H(t)}).prototype,"toString",(function(){return this._k})),A.f=Q,C.f=Z,i(66).f=S.f=$,i(82).f=J,P.f=tt,o&&!i(62)&&a(V,"propertyIsEnumerable",J,!0),p.f=function(t){return H(d(t))}),s(s.G+s.W+s.F*!z,{Symbol:R});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;et.length>it;)d(et[it++]);for(var nt=M(d.store),rt=0;nt.length>rt;)g(nt[rt++]);s(s.S+s.F*!z,"Symbol",{for:function(t){return r(B,t+="")?B[t]:B[t]=R(t)},keyFor:function(t){if(!q(t))throw TypeError(t+" is not a symbol!");for(var e in B)if(B[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!z,"Object",{create:function(t,e){return void 0===e?T(t):K(T(t),e)},defineProperty:Z,defineProperties:K,getOwnPropertyDescriptor:Q,getOwnPropertyNames:$,getOwnPropertySymbols:tt});var ot=u((function(){P.f(1)}));s(s.S+s.F*ot,"Object",{getOwnPropertySymbols:function(t){return P.f(_(t))}}),L&&s(s.S+s.F*(!z||u((function(){var t=R();return"[null]"!=D([t])||"{}"!=D({a:t})||"{}"!=D(Object(t))}))),"JSON",{stringify:function(t){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=e=n[1],(b(e)||void 0!==t)&&!q(t))return m(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!q(e))return e}),n[1]=e,D.apply(L,n)}}),R.prototype[N]||i(37)(R.prototype,N,R.prototype.valueOf),c(R,"Symbol"),c(Math,"Math",!0),c(n.JSON,"JSON",!0)},function(t,e,i){t.exports=i(87)("native-function-to-string",Function.toString)},function(t,e,i){var n=i(63),r=i(89),o=i(82);t.exports=function(t){var e=n(t),i=r.f;if(i)for(var s,a=i(t),h=o.f,u=0;a.length>u;)h.call(t,s=a[u++])&&e.push(s);return e}},function(t,e,i){var n=i(8);n(n.S,"Object",{create:i(65)})},function(t,e,i){var n=i(8);n(n.S+n.F*!i(28),"Object",{defineProperty:i(29).f})},function(t,e,i){var n=i(8);n(n.S+n.F*!i(28),"Object",{defineProperties:i(140)})},function(t,e,i){var n=i(38),r=i(46).f;i(47)("getOwnPropertyDescriptor",(function(){return function(t,e){return r(n(t),e)}}))},function(t,e,i){var n=i(32),r=i(67);i(47)("getPrototypeOf",(function(){return function(t){return r(n(t))}}))},function(t,e,i){var n=i(32),r=i(63);i(47)("keys",(function(){return function(t){return r(n(t))}}))},function(t,e,i){i(47)("getOwnPropertyNames",(function(){return i(141).f}))},function(t,e,i){var n=i(19),r=i(58).onFreeze;i(47)("freeze",(function(t){return function(e){return t&&n(e)?t(r(e)):e}}))},function(t,e,i){var n=i(19),r=i(58).onFreeze;i(47)("seal",(function(t){return function(e){return t&&n(e)?t(r(e)):e}}))},function(t,e,i){var n=i(19),r=i(58).onFreeze;i(47)("preventExtensions",(function(t){return function(e){return t&&n(e)?t(r(e)):e}}))},function(t,e,i){var n=i(19);i(47)("isFrozen",(function(t){return function(e){return!n(e)||!!t&&t(e)}}))},function(t,e,i){var n=i(19);i(47)("isSealed",(function(t){return function(e){return!n(e)||!!t&&t(e)}}))},function(t,e,i){var n=i(19);i(47)("isExtensible",(function(t){return function(e){return!!n(e)&&(!t||t(e))}}))},function(t,e,i){var n=i(8);n(n.S+n.F,"Object",{assign:i(142)})},function(t,e,i){var n=i(8);n(n.S,"Object",{is:i(143)})},function(t,e,i){var n=i(8);n(n.S,"Object",{setPrototypeOf:i(112).set})},function(t,e,i){"use strict";var n=i(83),r={};r[i(22)("toStringTag")]="z",r+""!="[object z]"&&i(34)(Object.prototype,"toString",(function(){return"[object "+n(this)+"]"}),!0)},function(t,e,i){var n=i(8);n(n.P,"Function",{bind:i(144)})},function(t,e,i){var n=i(29).f,r=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in r||i(28)&&n(r,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,i){"use strict";var n=i(19),r=i(67),o=i(22)("hasInstance"),s=Function.prototype;o in s||i(29).f(s,o,{value:function(t){if("function"!=typeof this||!n(t))return!1;if(!n(this.prototype))return t instanceof this;for(;t=r(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,i){var n=i(8),r=i(146);n(n.G+n.F*(parseInt!=r),{parseInt:r})},function(t,e,i){var n=i(8),r=i(147);n(n.G+n.F*(parseFloat!=r),{parseFloat:r})},function(t,e,i){"use strict";var n=i(16),r=i(36),o=i(52),s=i(114),a=i(57),h=i(17),u=i(66).f,l=i(46).f,c=i(29).f,f=i(72).trim,d=n.Number,p=d,g=d.prototype,v="Number"==o(i(65)(g)),m="trim"in String.prototype,y=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){var i,n,r,o=(e=m?e.trim():f(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(i=e.charCodeAt(2))||120===i)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+e}for(var s,h=e.slice(2),u=0,l=h.length;u<l;u++)if((s=h.charCodeAt(u))<48||s>r)return NaN;return parseInt(h,n)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof d&&(v?h((function(){g.valueOf.call(i)})):"Number"!=o(i))?s(new p(y(e)),i,d):y(e)};for(var b,_=i(28)?u(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;_.length>w;w++)r(p,b=_[w])&&!r(d,b)&&c(d,b,l(p,b));d.prototype=g,g.constructor=d,i(34)(n,"Number",d)}},function(t,e,i){"use strict";var n=i(8),r=i(45),o=i(148),s=i(115),a=1..toFixed,h=Math.floor,u=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",c=function(t,e){for(var i=-1,n=e;++i<6;)n+=t*u[i],u[i]=n%1e7,n=h(n/1e7)},f=function(t){for(var e=6,i=0;--e>=0;)i+=u[e],u[e]=h(i/t),i=i%t*1e7},d=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==u[t]){var i=String(u[t]);e=""===e?i:e+s.call("0",7-i.length)+i}return e},p=function(t,e,i){return 0===e?i:e%2==1?p(t,e-1,i*t):p(t*t,e/2,i)};n(n.P+n.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i(17)((function(){a.call({})}))),"Number",{toFixed:function(t){var e,i,n,a,h=o(this,l),u=r(t),g="",v="0";if(u<0||u>20)throw RangeError(l);if(h!=h)return"NaN";if(h<=-1e21||h>=1e21)return String(h);if(h<0&&(g="-",h=-h),h>1e-21)if(i=(e=function(t){for(var e=0,i=t;i>=4096;)e+=12,i/=4096;for(;i>=2;)e+=1,i/=2;return e}(h*p(2,69,1))-69)<0?h*p(2,-e,1):h/p(2,e,1),i*=4503599627370496,(e=52-e)>0){for(c(0,i),n=u;n>=7;)c(1e7,0),n-=7;for(c(p(10,n,1),0),n=e-1;n>=23;)f(1<<23),n-=23;f(1<<n),c(1,1),f(2),v=d()}else c(0,i),c(1<<-e,0),v=d()+s.call("0",u);return v=u>0?g+((a=v.length)<=u?"0."+s.call("0",u-a)+v:v.slice(0,a-u)+"."+v.slice(a-u)):g+v}})},function(t,e,i){"use strict";var n=i(8),r=i(17),o=i(148),s=1..toPrecision;n(n.P+n.F*(r((function(){return"1"!==s.call(1,void 0)}))||!r((function(){s.call({})}))),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?s.call(e):s.call(e,t)}})},function(t,e,i){var n=i(8);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,i){var n=i(8),r=i(16).isFinite;n(n.S,"Number",{isFinite:function(t){return"number"==typeof t&&r(t)}})},function(t,e,i){var n=i(8);n(n.S,"Number",{isInteger:i(149)})},function(t,e,i){var n=i(8);n(n.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,i){var n=i(8),r=i(149),o=Math.abs;n(n.S,"Number",{isSafeInteger:function(t){return r(t)&&o(t)<=9007199254740991}})},function(t,e,i){var n=i(8);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,i){var n=i(8);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,i){var n=i(8),r=i(147);n(n.S+n.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},function(t,e,i){var n=i(8),r=i(146);n(n.S+n.F*(Number.parseInt!=r),"Number",{parseInt:r})},function(t,e,i){var n=i(8),r=i(150),o=Math.sqrt,s=Math.acosh;n(n.S+n.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:r(t-1+o(t-1)*o(t+1))}})},function(t,e,i){var n=i(8),r=Math.asinh;n(n.S+n.F*!(r&&1/r(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,i){var n=i(8),r=Math.atanh;n(n.S+n.F*!(r&&1/r(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,i){var n=i(8),r=i(116);n(n.S,"Math",{cbrt:function(t){return r(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,i){var n=i(8);n(n.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,i){var n=i(8),r=Math.exp;n(n.S,"Math",{cosh:function(t){return(r(t=+t)+r(-t))/2}})},function(t,e,i){var n=i(8),r=i(117);n(n.S+n.F*(r!=Math.expm1),"Math",{expm1:r})},function(t,e,i){var n=i(8);n(n.S,"Math",{fround:i(300)})},function(t,e,i){var n=i(116),r=Math.pow,o=r(2,-52),s=r(2,-23),a=r(2,127)*(2-s),h=r(2,-126);t.exports=Math.fround||function(t){var e,i,r=Math.abs(t),u=n(t);return r<h?u*(r/h/s+1/o-1/o)*h*s:(i=(e=(1+s/o)*r)-(e-r))>a||i!=i?u*(1/0):u*i}},function(t,e,i){var n=i(8),r=Math.abs;n(n.S,"Math",{hypot:function(t,e){for(var i,n,o=0,s=0,a=arguments.length,h=0;s<a;)h<(i=r(arguments[s++]))?(o=o*(n=h/i)*n+1,h=i):o+=i>0?(n=i/h)*n:i;return h===1/0?1/0:h*Math.sqrt(o)}})},function(t,e,i){var n=i(8),r=Math.imul;n(n.S+n.F*i(17)((function(){return-5!=r(4294967295,5)||2!=r.length})),"Math",{imul:function(t,e){var i=+t,n=+e,r=65535&i,o=65535&n;return 0|r*o+((65535&i>>>16)*o+r*(65535&n>>>16)<<16>>>0)}})},function(t,e,i){var n=i(8);n(n.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,i){var n=i(8);n(n.S,"Math",{log1p:i(150)})},function(t,e,i){var n=i(8);n(n.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,i){var n=i(8);n(n.S,"Math",{sign:i(116)})},function(t,e,i){var n=i(8),r=i(117),o=Math.exp;n(n.S+n.F*i(17)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(r(t)-r(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,i){var n=i(8),r=i(117),o=Math.exp;n(n.S,"Math",{tanh:function(t){var e=r(t=+t),i=r(-t);return e==1/0?1:i==1/0?-1:(e-i)/(o(t)+o(-t))}})},function(t,e,i){var n=i(8);n(n.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,i){var n=i(8),r=i(64),o=String.fromCharCode,s=String.fromCodePoint;n(n.S+n.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(t){for(var e,i=[],n=arguments.length,s=0;n>s;){if(e=+arguments[s++],r(e,1114111)!==e)throw RangeError(e+" is not a valid code point");i.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return i.join("")}})},function(t,e,i){var n=i(8),r=i(38),o=i(25);n(n.S,"String",{raw:function(t){for(var e=r(t.raw),i=o(e.length),n=arguments.length,s=[],a=0;i>a;)s.push(String(e[a++])),a<n&&s.push(String(arguments[a]));return s.join("")}})},function(t,e,i){"use strict";i(72)("trim",(function(t){return function(){return t(this,3)}}))},function(t,e,i){"use strict";var n=i(118)(!0);i(119)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})}))},function(t,e,i){"use strict";var n=i(8),r=i(118)(!1);n(n.P,"String",{codePointAt:function(t){return r(this,t)}})},function(t,e,i){"use strict";var n=i(8),r=i(25),o=i(120),s="".endsWith;n(n.P+n.F*i(122)("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),i=arguments.length>1?arguments[1]:void 0,n=r(e.length),a=void 0===i?n:Math.min(r(i),n),h=String(t);return s?s.call(e,h,a):e.slice(a-h.length,a)===h}})},function(t,e,i){"use strict";var n=i(8),r=i(120);n(n.P+n.F*i(122)("includes"),"String",{includes:function(t){return!!~r(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){var n=i(8);n(n.P,"String",{repeat:i(115)})},function(t,e,i){"use strict";var n=i(8),r=i(25),o=i(120),s="".startsWith;n(n.P+n.F*i(122)("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),i=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return s?s.call(e,n,i):e.slice(i,i+n.length)===n}})},function(t,e,i){"use strict";i(35)("anchor",(function(t){return function(e){return t(this,"a","name",e)}}))},function(t,e,i){"use strict";i(35)("big",(function(t){return function(){return t(this,"big","","")}}))},function(t,e,i){"use strict";i(35)("blink",(function(t){return function(){return t(this,"blink","","")}}))},function(t,e,i){"use strict";i(35)("bold",(function(t){return function(){return t(this,"b","","")}}))},function(t,e,i){"use strict";i(35)("fixed",(function(t){return function(){return t(this,"tt","","")}}))},function(t,e,i){"use strict";i(35)("fontcolor",(function(t){return function(e){return t(this,"font","color",e)}}))},function(t,e,i){"use strict";i(35)("fontsize",(function(t){return function(e){return t(this,"font","size",e)}}))},function(t,e,i){"use strict";i(35)("italics",(function(t){return function(){return t(this,"i","","")}}))},function(t,e,i){"use strict";i(35)("link",(function(t){return function(e){return t(this,"a","href",e)}}))},function(t,e,i){"use strict";i(35)("small",(function(t){return function(){return t(this,"small","","")}}))},function(t,e,i){"use strict";i(35)("strike",(function(t){return function(){return t(this,"strike","","")}}))},function(t,e,i){"use strict";i(35)("sub",(function(t){return function(){return t(this,"sub","","")}}))},function(t,e,i){"use strict";i(35)("sup",(function(t){return function(){return t(this,"sup","","")}}))},function(t,e,i){var n=i(8);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,i){"use strict";var n=i(8),r=i(32),o=i(57);n(n.P+n.F*i(17)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=r(this),i=o(e);return"number"!=typeof i||isFinite(i)?e.toISOString():null}})},function(t,e,i){var n=i(8),r=i(335);n(n.P+n.F*(Date.prototype.toISOString!==r),"Date",{toISOString:r})},function(t,e,i){"use strict";var n=i(17),r=Date.prototype.getTime,o=Date.prototype.toISOString,s=function(t){return t>9?t:"0"+t};t.exports=n((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))}))||!n((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(r.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),i=t.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+("00000"+Math.abs(e)).slice(n?-6:-4)+"-"+s(t.getUTCMonth()+1)+"-"+s(t.getUTCDate())+"T"+s(t.getUTCHours())+":"+s(t.getUTCMinutes())+":"+s(t.getUTCSeconds())+"."+(i>99?i:"0"+s(i))+"Z"}:o},function(t,e,i){var n=Date.prototype,r=n.toString,o=n.getTime;new Date(NaN)+""!="Invalid Date"&&i(34)(n,"toString",(function(){var t=o.call(this);return t==t?r.call(this):"Invalid Date"}))},function(t,e,i){var n=i(22)("toPrimitive"),r=Date.prototype;n in r||i(37)(r,n,i(338))},function(t,e,i){"use strict";var n=i(18),r=i(57);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return r(n(this),"number"!=t)}},function(t,e,i){var n=i(8);n(n.S,"Array",{isArray:i(90)})},function(t,e,i){"use strict";var n=i(43),r=i(8),o=i(32),s=i(152),a=i(123),h=i(25),u=i(124),l=i(125);r(r.S+r.F*!i(91)((function(t){Array.from(t)})),"Array",{from:function(t){var e,i,r,c,f=o(t),d="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,v=void 0!==g,m=0,y=l(f);if(v&&(g=n(g,p>2?arguments[2]:void 0,2)),null==y||d==Array&&a(y))for(i=new d(e=h(f.length));e>m;m++)u(i,m,v?g(f[m],m):f[m]);else for(c=y.call(f),i=new d;!(r=c.next()).done;m++)u(i,m,v?s(c,g,[r.value,m],!0):r.value);return i.length=m,i}})},function(t,e,i){"use strict";var n=i(8),r=i(124);n(n.S+n.F*i(17)((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){for(var t=0,e=arguments.length,i=new("function"==typeof this?this:Array)(e);e>t;)r(i,t,arguments[t++]);return i.length=e,i}})},function(t,e,i){"use strict";var n=i(8),r=i(38),o=[].join;n(n.P+n.F*(i(81)!=Object||!i(39)(o)),"Array",{join:function(t){return o.call(r(this),void 0===t?",":t)}})},function(t,e,i){"use strict";var n=i(8),r=i(111),o=i(52),s=i(64),a=i(25),h=[].slice;n(n.P+n.F*i(17)((function(){r&&h.call(r)})),"Array",{slice:function(t,e){var i=a(this.length),n=o(this);if(e=void 0===e?i:e,"Array"==n)return h.call(this,t,e);for(var r=s(t,i),u=s(e,i),l=a(u-r),c=new Array(l),f=0;f<l;f++)c[f]="String"==n?this.charAt(r+f):this[r+f];return c}})},function(t,e,i){"use strict";var n=i(8),r=i(44),o=i(32),s=i(17),a=[].sort,h=[1,2,3];n(n.P+n.F*(s((function(){h.sort(void 0)}))||!s((function(){h.sort(null)}))||!i(39)(a)),"Array",{sort:function(t){return void 0===t?a.call(o(this)):a.call(o(this),r(t))}})},function(t,e,i){"use strict";var n=i(8),r=i(48)(0),o=i(39)([].forEach,!0);n(n.P+n.F*!o,"Array",{forEach:function(t){return r(this,t,arguments[1])}})},function(t,e,i){var n=i(19),r=i(90),o=i(22)("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),n(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,i){"use strict";var n=i(8),r=i(48)(1);n(n.P+n.F*!i(39)([].map,!0),"Array",{map:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(8),r=i(48)(2);n(n.P+n.F*!i(39)([].filter,!0),"Array",{filter:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(8),r=i(48)(3);n(n.P+n.F*!i(39)([].some,!0),"Array",{some:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(8),r=i(48)(4);n(n.P+n.F*!i(39)([].every,!0),"Array",{every:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(8),r=i(154);n(n.P+n.F*!i(39)([].reduce,!0),"Array",{reduce:function(t){return r(this,t,arguments.length,arguments[1],!1)}})},function(t,e,i){"use strict";var n=i(8),r=i(154);n(n.P+n.F*!i(39)([].reduceRight,!0),"Array",{reduceRight:function(t){return r(this,t,arguments.length,arguments[1],!0)}})},function(t,e,i){"use strict";var n=i(8),r=i(88)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(s||!i(39)(o)),"Array",{indexOf:function(t){return s?o.apply(this,arguments)||0:r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(8),r=i(38),o=i(45),s=i(25),a=[].lastIndexOf,h=!!a&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(h||!i(39)(a)),"Array",{lastIndexOf:function(t){if(h)return a.apply(this,arguments)||0;var e=r(this),i=s(e.length),n=i-1;for(arguments.length>1&&(n=Math.min(n,o(arguments[1]))),n<0&&(n=i+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}})},function(t,e,i){var n=i(8);n(n.P,"Array",{copyWithin:i(155)}),i(68)("copyWithin")},function(t,e,i){var n=i(8);n(n.P,"Array",{fill:i(126)}),i(68)("fill")},function(t,e,i){"use strict";var n=i(8),r=i(48)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),n(n.P+n.F*o,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(68)("find")},function(t,e,i){"use strict";var n=i(8),r=i(48)(6),o="findIndex",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),n(n.P+n.F*s,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(68)(o)},function(t,e,i){i(74)("Array")},function(t,e,i){var n=i(16),r=i(114),o=i(29).f,s=i(66).f,a=i(121),h=i(92),u=n.RegExp,l=u,c=u.prototype,f=/a/g,d=/a/g,p=new u(f)!==f;if(i(28)&&(!p||i(17)((function(){return d[i(22)("match")]=!1,u(f)!=f||u(d)==d||"/a/i"!=u(f,"i")})))){u=function(t,e){var i=this instanceof u,n=a(t),o=void 0===e;return!i&&n&&t.constructor===u&&o?t:r(p?new l(n&&!o?t.source:t,e):l((n=t instanceof u)?t.source:t,n&&o?h.call(t):e),i?this:c,u)};for(var g=function(t){t in u||o(u,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},v=s(l),m=0;v.length>m;)g(v[m++]);c.constructor=u,u.prototype=c,i(34)(n,"RegExp",u)}i(74)("RegExp")},function(t,e,i){"use strict";i(158);var n=i(18),r=i(92),o=i(28),s=/./.toString,a=function(t){i(34)(RegExp.prototype,"toString",t,!0)};i(17)((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?a((function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?r.call(t):void 0)})):"toString"!=s.name&&a((function(){return s.call(this)}))},function(t,e,i){"use strict";var n=i(18),r=i(25),o=i(129),s=i(93);i(94)("match",1,(function(t,e,i,a){return[function(i){var n=t(this),r=null==i?void 0:i[e];return void 0!==r?r.call(i,n):new RegExp(i)[e](String(n))},function(t){var e=a(i,t,this);if(e.done)return e.value;var h=n(t),u=String(this);if(!h.global)return s(h,u);var l=h.unicode;h.lastIndex=0;for(var c,f=[],d=0;null!==(c=s(h,u));){var p=String(c[0]);f[d]=p,""===p&&(h.lastIndex=o(u,r(h.lastIndex),l)),d++}return 0===d?null:f}]}))},function(t,e,i){"use strict";var n=i(18),r=i(32),o=i(25),s=i(45),a=i(129),h=i(93),u=Math.max,l=Math.min,c=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g;i(94)("replace",2,(function(t,e,i,p){return[function(n,r){var o=t(this),s=null==n?void 0:n[e];return void 0!==s?s.call(n,o,r):i.call(String(o),n,r)},function(t,e){var r=p(i,t,this,e);if(r.done)return r.value;var c=n(t),f=String(this),d="function"==typeof e;d||(e=String(e));var v=c.global;if(v){var m=c.unicode;c.lastIndex=0}for(var y=[];;){var b=h(c,f);if(null===b)break;if(y.push(b),!v)break;""===String(b[0])&&(c.lastIndex=a(f,o(c.lastIndex),m))}for(var _,w="",x=0,E=0;E<y.length;E++){b=y[E];for(var T=String(b[0]),S=u(l(s(b.index),f.length),0),A=[],P=1;P<b.length;P++)A.push(void 0===(_=b[P])?_:String(_));var C=b.groups;if(d){var M=[T].concat(A,S,f);void 0!==C&&M.push(C);var O=String(e.apply(void 0,M))}else O=g(T,f,S,A,C,e);S>=x&&(w+=f.slice(x,S)+O,x=S+T.length)}return w+f.slice(x)}];function g(t,e,n,o,s,a){var h=n+t.length,u=o.length,l=d;return void 0!==s&&(s=r(s),l=f),i.call(a,l,(function(i,r){var a;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(h);case"<":a=s[r.slice(1,-1)];break;default:var l=+r;if(0===l)return i;if(l>u){var f=c(l/10);return 0===f?i:f<=u?void 0===o[f-1]?r.charAt(1):o[f-1]+r.charAt(1):i}a=o[l-1]}return void 0===a?"":a}))}}))},function(t,e,i){"use strict";var n=i(18),r=i(143),o=i(93);i(94)("search",1,(function(t,e,i,s){return[function(i){var n=t(this),r=null==i?void 0:i[e];return void 0!==r?r.call(i,n):new RegExp(i)[e](String(n))},function(t){var e=s(i,t,this);if(e.done)return e.value;var a=n(t),h=String(this),u=a.lastIndex;r(u,0)||(a.lastIndex=0);var l=o(a,h);return r(a.lastIndex,u)||(a.lastIndex=u),null===l?-1:l.index}]}))},function(t,e,i){"use strict";var n=i(121),r=i(18),o=i(84),s=i(129),a=i(25),h=i(93),u=i(128),l=i(17),c=Math.min,f=[].push,d=!l((function(){RegExp(4294967295,"y")}));i(94)("split",2,(function(t,e,i,l){var p;return p="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!n(t))return i.call(r,t,e);for(var o,s,a,h=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,d=void 0===e?4294967295:e>>>0,p=new RegExp(t.source,l+"g");(o=u.call(p,r))&&!((s=p.lastIndex)>c&&(h.push(r.slice(c,o.index)),o.length>1&&o.index<r.length&&f.apply(h,o.slice(1)),a=o[0].length,c=s,h.length>=d));)p.lastIndex===o.index&&p.lastIndex++;return c===r.length?!a&&p.test("")||h.push(""):h.push(r.slice(c)),h.length>d?h.slice(0,d):h}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,n){var r=t(this),o=null==i?void 0:i[e];return void 0!==o?o.call(i,r,n):p.call(String(r),i,n)},function(t,e){var n=l(p,t,this,e,p!==i);if(n.done)return n.value;var u=r(t),f=String(this),g=o(u,RegExp),v=u.unicode,m=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(d?"y":"g"),y=new g(d?u:"^(?:"+u.source+")",m),b=void 0===e?4294967295:e>>>0;if(0===b)return[];if(0===f.length)return null===h(y,f)?[f]:[];for(var _=0,w=0,x=[];w<f.length;){y.lastIndex=d?w:0;var E,T=h(y,d?f:f.slice(w));if(null===T||(E=c(a(y.lastIndex+(d?0:w)),f.length))===_)w=s(f,w,v);else{if(x.push(f.slice(_,w)),x.length===b)return x;for(var S=1;S<=T.length-1;S++)if(x.push(T[S]),x.length===b)return x;w=_=E}}return x.push(f.slice(_)),x}]}))},function(t,e,i){var n=i(16),r=i(130).set,o=n.MutationObserver||n.WebKitMutationObserver,s=n.process,a=n.Promise,h="process"==i(52)(s);t.exports=function(){var t,e,i,u=function(){var n,r;for(h&&(n=s.domain)&&n.exit();t;){r=t.fn,t=t.next;try{r()}catch(n){throw t?i():e=void 0,n}}e=void 0,n&&n.enter()};if(h)i=function(){s.nextTick(u)};else if(!o||n.navigator&&n.navigator.standalone)if(a&&a.resolve){var l=a.resolve(void 0);i=function(){l.then(u)}}else i=function(){r.call(n,u)};else{var c=!0,f=document.createTextNode("");new o(u).observe(f,{characterData:!0}),i=function(){f.data=c=!c}}return function(n){var r={fn:n,next:void 0};e&&(e.next=r),t||(t=r,i()),e=r}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,i){"use strict";var n=i(162),r=i(69);t.exports=i(97)("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=n.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(r(this,"Map"),0===t?0:t,e)}},n,!0)},function(t,e,i){"use strict";var n=i(162),r=i(69);t.exports=i(97)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return n.def(r(this,"Set"),t=0===t?0:t,t)}},n)},function(t,e,i){"use strict";var n,r=i(16),o=i(48)(0),s=i(34),a=i(58),h=i(142),u=i(163),l=i(19),c=i(69),f=i(69),d=!r.ActiveXObject&&"ActiveXObject"in r,p=a.getWeak,g=Object.isExtensible,v=u.ufstore,m=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(t){if(l(t)){var e=p(t);return!0===e?v(c(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(c(this,"WeakMap"),t,e)}},b=t.exports=i(97)("WeakMap",m,y,u,!0,!0);f&&d&&(h((n=u.getConstructor(m,"WeakMap")).prototype,y),a.NEED=!0,o(["delete","has","get","set"],(function(t){var e=b.prototype,i=e[t];s(e,t,(function(e,r){if(l(e)&&!g(e)){this._f||(this._f=new n);var o=this._f[t](e,r);return"set"==t?this:o}return i.call(this,e,r)}))})))},function(t,e,i){"use strict";var n=i(163),r=i(69);i(97)("WeakSet",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return n.def(r(this,"WeakSet"),t,!0)}},n,!1,!0)},function(t,e,i){"use strict";var n=i(8),r=i(98),o=i(131),s=i(18),a=i(64),h=i(25),u=i(19),l=i(16).ArrayBuffer,c=i(84),f=o.ArrayBuffer,d=o.DataView,p=r.ABV&&l.isView,g=f.prototype.slice,v=r.VIEW;n(n.G+n.W+n.F*(l!==f),{ArrayBuffer:f}),n(n.S+n.F*!r.CONSTR,"ArrayBuffer",{isView:function(t){return p&&p(t)||u(t)&&v in t}}),n(n.P+n.U+n.F*i(17)((function(){return!new f(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(t,e){if(void 0!==g&&void 0===e)return g.call(s(this),t);for(var i=s(this).byteLength,n=a(t,i),r=a(void 0===e?i:e,i),o=new(c(this,f))(h(r-n)),u=new d(this),l=new d(o),p=0;n<r;)l.setUint8(p++,u.getUint8(n++));return o}}),i(74)("ArrayBuffer")},function(t,e,i){var n=i(8);n(n.G+n.W+n.F*!i(98).ABV,{DataView:i(131).DataView})},function(t,e,i){i(54)("Int8",1,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},function(t,e,i){i(54)("Uint8",1,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},function(t,e,i){i(54)("Uint8",1,(function(t){return function(e,i,n){return t(this,e,i,n)}}),!0)},function(t,e,i){i(54)("Int16",2,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},function(t,e,i){i(54)("Uint16",2,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},function(t,e,i){i(54)("Int32",4,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},function(t,e,i){i(54)("Uint32",4,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},function(t,e,i){i(54)("Float32",4,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},function(t,e,i){i(54)("Float64",8,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},function(t,e,i){var n=i(8),r=i(44),o=i(18),s=(i(16).Reflect||{}).apply,a=Function.apply;n(n.S+n.F*!i(17)((function(){s((function(){}))})),"Reflect",{apply:function(t,e,i){var n=r(t),h=o(i);return s?s(n,e,h):a.call(n,e,h)}})},function(t,e,i){var n=i(8),r=i(65),o=i(44),s=i(18),a=i(19),h=i(17),u=i(144),l=(i(16).Reflect||{}).construct,c=h((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),f=!h((function(){l((function(){}))}));n(n.S+n.F*(c||f),"Reflect",{construct:function(t,e){o(t),s(e);var i=arguments.length<3?t:o(arguments[2]);if(f&&!c)return l(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(u.apply(t,n))}var h=i.prototype,d=r(a(h)?h:Object.prototype),p=Function.apply.call(t,d,e);return a(p)?p:d}})},function(t,e,i){var n=i(29),r=i(8),o=i(18),s=i(57);r(r.S+r.F*i(17)((function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,e,i){o(t),e=s(e,!0),o(i);try{return n.f(t,e,i),!0}catch(t){return!1}}})},function(t,e,i){var n=i(8),r=i(46).f,o=i(18);n(n.S,"Reflect",{deleteProperty:function(t,e){var i=r(o(t),e);return!(i&&!i.configurable)&&delete t[e]}})},function(t,e,i){"use strict";var n=i(8),r=i(18),o=function(t){this._t=r(t),this._i=0;var e,i=this._k=[];for(e in t)i.push(e)};i(151)(o,"Object",(function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}})),n(n.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,i){var n=i(46),r=i(67),o=i(36),s=i(8),a=i(19),h=i(18);s(s.S,"Reflect",{get:function t(e,i){var s,u,l=arguments.length<3?e:arguments[2];return h(e)===l?e[i]:(s=n.f(e,i))?o(s,"value")?s.value:void 0!==s.get?s.get.call(l):void 0:a(u=r(e))?t(u,i,l):void 0}})},function(t,e,i){var n=i(46),r=i(8),o=i(18);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return n.f(o(t),e)}})},function(t,e,i){var n=i(8),r=i(67),o=i(18);n(n.S,"Reflect",{getPrototypeOf:function(t){return r(o(t))}})},function(t,e,i){var n=i(8);n(n.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,i){var n=i(8),r=i(18),o=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(t){return r(t),!o||o(t)}})},function(t,e,i){var n=i(8);n(n.S,"Reflect",{ownKeys:i(165)})},function(t,e,i){var n=i(8),r=i(18),o=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(t){r(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,i){var n=i(29),r=i(46),o=i(67),s=i(36),a=i(8),h=i(60),u=i(18),l=i(19);a(a.S,"Reflect",{set:function t(e,i,a){var c,f,d=arguments.length<4?e:arguments[3],p=r.f(u(e),i);if(!p){if(l(f=o(e)))return t(f,i,a,d);p=h(0)}if(s(p,"value")){if(!1===p.writable||!l(d))return!1;if(c=r.f(d,i)){if(c.get||c.set||!1===c.writable)return!1;c.value=a,n.f(d,i,c)}else n.f(d,i,h(0,a));return!0}return void 0!==p.set&&(p.set.call(d,a),!0)}})},function(t,e,i){var n=i(8),r=i(112);r&&n(n.S,"Reflect",{setPrototypeOf:function(t,e){r.check(t,e);try{return r.set(t,e),!0}catch(t){return!1}}})},function(t,e,i){i(398),t.exports=i(26).Array.includes},function(t,e,i){"use strict";var n=i(8),r=i(88)(!0);n(n.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(68)("includes")},function(t,e,i){i(400),t.exports=i(26).Array.flatMap},function(t,e,i){"use strict";var n=i(8),r=i(401),o=i(32),s=i(25),a=i(44),h=i(153);n(n.P,"Array",{flatMap:function(t){var e,i,n=o(this);return a(t),e=s(n.length),i=h(n,0),r(i,n,n,e,0,1,t,arguments[1]),i}}),i(68)("flatMap")},function(t,e,i){"use strict";var n=i(90),r=i(19),o=i(25),s=i(43),a=i(22)("isConcatSpreadable");t.exports=function t(e,i,h,u,l,c,f,d){for(var p,g,v=l,m=0,y=!!f&&s(f,d,3);m<u;){if(m in h){if(p=y?y(h[m],m,i):h[m],g=!1,r(p)&&(g=void 0!==(g=p[a])?!!g:n(p)),g&&c>0)v=t(e,i,p,o(p.length),v,c-1)-1;else{if(v>=9007199254740991)throw TypeError();e[v]=p}v++}m++}return v}},function(t,e,i){i(403),t.exports=i(26).String.padStart},function(t,e,i){"use strict";var n=i(8),r=i(166),o=i(96),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);n(n.P+n.F*s,"String",{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,i){i(405),t.exports=i(26).String.padEnd},function(t,e,i){"use strict";var n=i(8),r=i(166),o=i(96),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);n(n.P+n.F*s,"String",{padEnd:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,i){i(407),t.exports=i(26).String.trimLeft},function(t,e,i){"use strict";i(72)("trimLeft",(function(t){return function(){return t(this,1)}}),"trimStart")},function(t,e,i){i(409),t.exports=i(26).String.trimRight},function(t,e,i){"use strict";i(72)("trimRight",(function(t){return function(){return t(this,2)}}),"trimEnd")},function(t,e,i){i(411),t.exports=i(108).f("asyncIterator")},function(t,e,i){i(138)("asyncIterator")},function(t,e,i){i(413),t.exports=i(26).Object.getOwnPropertyDescriptors},function(t,e,i){var n=i(8),r=i(165),o=i(38),s=i(46),a=i(124);n(n.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,i,n=o(t),h=s.f,u=r(n),l={},c=0;u.length>c;)void 0!==(i=h(n,e=u[c++]))&&a(l,e,i);return l}})},function(t,e,i){i(415),t.exports=i(26).Object.values},function(t,e,i){var n=i(8),r=i(167)(!1);n(n.S,"Object",{values:function(t){return r(t)}})},function(t,e,i){i(417),t.exports=i(26).Object.entries},function(t,e,i){var n=i(8),r=i(167)(!0);n(n.S,"Object",{entries:function(t){return r(t)}})},function(t,e,i){"use strict";i(159),i(419),t.exports=i(26).Promise.finally},function(t,e,i){"use strict";var n=i(8),r=i(26),o=i(16),s=i(84),a=i(161);n(n.P+n.R,"Promise",{finally:function(t){var e=s(this,r.Promise||o.Promise),i="function"==typeof t;return this.then(i?function(i){return a(e,t()).then((function(){return i}))}:t,i?function(i){return a(e,t()).then((function(){throw i}))}:t)}})},function(t,e,i){i(421),i(422),i(423),t.exports=i(26)},function(t,e,i){var n=i(16),r=i(8),o=i(96),s=[].slice,a=/MSIE .\./.test(o),h=function(t){return function(e,i){var n=arguments.length>2,r=!!n&&s.call(arguments,2);return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,i)}};r(r.G+r.B+r.F*a,{setTimeout:h(n.setTimeout),setInterval:h(n.setInterval)})},function(t,e,i){var n=i(8),r=i(130);n(n.G+n.B,{setImmediate:r.set,clearImmediate:r.clear})},function(t,e,i){for(var n=i(127),r=i(63),o=i(34),s=i(16),a=i(37),h=i(73),u=i(22),l=u("iterator"),c=u("toStringTag"),f=h.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=r(d),g=0;g<p.length;g++){var v,m=p[g],y=d[m],b=s[m],_=b&&b.prototype;if(_&&(_[l]||a(_,l,f),_[c]||a(_,c,m),h[m]=f,y))for(v in n)_[v]||o(_,v,n[v],!0)}},function(t,e,i){var n=function(t){"use strict";var e=Object.prototype,i=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function a(t,e,i,n){var r=e&&e.prototype instanceof l?e:l,o=Object.create(r.prototype),s=new x(n||[]);return o._invoke=function(t,e,i){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return T()}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var a=b(s,i);if(a){if(a===u)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var l=h(t,e,i);if("normal"===l.type){if(n=i.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n="completed",i.method="throw",i.arg=l.arg)}}}(t,i,s),o}function h(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var u={};function l(){}function c(){}function f(){}var d={};d[r]=function(){return this};var p=Object.getPrototypeOf,g=p&&p(p(E([])));g&&g!==e&&i.call(g,r)&&(d=g);var v=f.prototype=l.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function y(t){var e;this._invoke=function(n,r){function o(){return new Promise((function(e,o){!function e(n,r,o,s){var a=h(t[n],t,r);if("throw"!==a.type){var u=a.arg,l=u.value;return l&&"object"==typeof l&&i.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,o,s)}),(function(t){e("throw",t,o,s)})):Promise.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return e("throw",t,o,s)}))}s(a.arg)}(n,r,e,o)}))}return e=e?e.then(o,o):o()}}function b(t,e){var i=t.iterator[e.method];if(void 0===i){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=h(i,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var r=n.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function E(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return c.prototype=v.constructor=f,f.constructor=c,f[s]=c.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===c||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(y.prototype),y.prototype[o]=function(){return this},t.AsyncIterator=y,t.async=function(e,i,n,r){var o=new y(a(e,i,n,r));return t.isGeneratorFunction(i)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(v),v[s]="Generator",v[r]=function(){return this},v.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=E,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(i,n){return s.type="throw",s.arg=t,e.next=i,n&&(e.method="next",e.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=i.call(o,"catchLoc"),h=i.call(o,"finallyLoc");if(a&&h){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),w(i),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;w(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:E(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),u}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,e,i){i(426),t.exports=i(168).global},function(t,e,i){var n=i(427);n(n.G,{global:i(132)})},function(t,e,i){var n=i(132),r=i(168),o=i(428),s=i(430),a=i(437),h=function(t,e,i){var u,l,c,f=t&h.F,d=t&h.G,p=t&h.S,g=t&h.P,v=t&h.B,m=t&h.W,y=d?r:r[e]||(r[e]={}),b=y.prototype,_=d?n:p?n[e]:(n[e]||{}).prototype;for(u in d&&(i=e),i)(l=!f&&_&&void 0!==_[u])&&a(y,u)||(c=l?_[u]:i[u],y[u]=d&&"function"!=typeof _[u]?i[u]:v&&l?o(c,n):m&&_[u]==c?function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(c):g&&"function"==typeof c?o(Function.call,c):c,g&&((y.virtual||(y.virtual={}))[u]=c,t&h.R&&b&&!b[u]&&s(b,u,c)))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,t.exports=h},function(t,e,i){var n=i(429);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var n=i(431),r=i(436);t.exports=i(134)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(432),r=i(433),o=i(435),s=Object.defineProperty;e.f=i(134)?Object.defineProperty:function(t,e,i){if(n(t),e=o(e,!0),n(i),r)try{return s(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){var n=i(133);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){t.exports=!i(134)&&!i(169)((function(){return 7!=Object.defineProperty(i(434)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,i){var n=i(133),r=i(132).document,o=n(r)&&n(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,i){var n=i(133);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){(function(t){var e,i,n,r=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});!function(t){!function(t){var e,i,n,o=function(){function t(t,e,i){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.timelineIds=[];for(var n=0;n<e.length;n++)this.timelineIds[e[n].getPropertyId()]=!0;this.duration=i}return t.prototype.hasTimeline=function(t){return 1==this.timelineIds[t]},t.prototype.apply=function(t,e,i,n,r,o,s,a){if(null==t)throw new Error("skeleton cannot be null.");n&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));for(var h=this.timelines,u=0,l=h.length;u<l;u++)h[u].apply(t,e,i,r,o,s,a)},t.binarySearch=function(t,e,i){void 0===i&&(i=1);var n=0,r=t.length/i-2;if(0==r)return i;for(var o=r>>>1;;){if(t[(o+1)*i]<=e?n=o+1:r=o,n==r)return(n+1)*i;o=n+r>>>1}},t.linearSearch=function(t,e,i){for(var n=0,r=t.length-i;n<=r;n+=i)if(t[n]>e)return n;return-1},t}();t.Animation=o,function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(e=t.MixBlend||(t.MixBlend={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(i=t.MixDirection||(t.MixDirection={})),function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"}(n=t.TimelineType||(t.TimelineType={}));var s=function(){function e(i){if(i<=0)throw new Error("frameCount must be > 0: "+i);this.curves=t.Utils.newFloatArray((i-1)*e.BEZIER_SIZE)}return e.prototype.getFrameCount=function(){return this.curves.length/e.BEZIER_SIZE+1},e.prototype.setLinear=function(t){this.curves[t*e.BEZIER_SIZE]=e.LINEAR},e.prototype.setStepped=function(t){this.curves[t*e.BEZIER_SIZE]=e.STEPPED},e.prototype.getCurveType=function(t){var i=t*e.BEZIER_SIZE;if(i==this.curves.length)return e.LINEAR;var n=this.curves[i];return n==e.LINEAR?e.LINEAR:n==e.STEPPED?e.STEPPED:e.BEZIER},e.prototype.setCurve=function(t,i,n,r,o){var s=.03*(2*-i+r),a=.03*(2*-n+o),h=.006*(3*(i-r)+1),u=.006*(3*(n-o)+1),l=2*s+h,c=2*a+u,f=.3*i+s+.16666667*h,d=.3*n+a+.16666667*u,p=t*e.BEZIER_SIZE,g=this.curves;g[p++]=e.BEZIER;for(var v=f,m=d,y=p+e.BEZIER_SIZE-1;p<y;p+=2)g[p]=v,g[p+1]=m,f+=l,d+=c,l+=h,c+=u,v+=f,m+=d},e.prototype.getCurvePercent=function(i,n){n=t.MathUtils.clamp(n,0,1);var r=this.curves,o=i*e.BEZIER_SIZE,s=r[o];if(s==e.LINEAR)return n;if(s==e.STEPPED)return 0;for(var a=0,h=++o,u=o+e.BEZIER_SIZE-1;o<u;o+=2)if((a=r[o])>=n){var l=void 0,c=void 0;return o==h?(l=0,c=0):(l=r[o-2],c=r[o-1]),c+(r[o+1]-c)*(n-l)/(a-l)}var f=r[o-1];return f+(1-f)*(n-a)/(1-a)},e.LINEAR=0,e.STEPPED=1,e.BEZIER=2,e.BEZIER_SIZE=19,e}();t.CurveTimeline=s;var a=function(i){function s(e){var n=i.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e<<1),n}return r(s,i),s.prototype.getPropertyId=function(){return(n.rotate<<24)+this.boneIndex},s.prototype.setFrame=function(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+s.ROTATION]=i},s.prototype.apply=function(t,i,n,r,a,h,u){var l=this.frames,c=t.bones[this.boneIndex];if(c.active)if(n<l[0])switch(h){case e.setup:return void(c.rotation=c.data.rotation);case e.first:var f=c.data.rotation-c.rotation;c.rotation+=(f-360*(16384-(16384.499999999996-f/360|0)))*a}else if(n>=l[l.length-s.ENTRIES]){var d=l[l.length+s.PREV_ROTATION];switch(h){case e.setup:c.rotation=c.data.rotation+d*a;break;case e.first:case e.replace:d+=c.data.rotation-c.rotation,d-=360*(16384-(16384.499999999996-d/360|0));case e.add:c.rotation+=d*a}}else{var p=o.binarySearch(l,n,s.ENTRIES),g=l[p+s.PREV_ROTATION],v=l[p],m=this.getCurvePercent((p>>1)-1,1-(n-v)/(l[p+s.PREV_TIME]-v)),y=l[p+s.ROTATION]-g;switch(y=g+(y-360*(16384-(16384.499999999996-y/360|0)))*m,h){case e.setup:c.rotation=c.data.rotation+(y-360*(16384-(16384.499999999996-y/360|0)))*a;break;case e.first:case e.replace:y+=c.data.rotation-c.rotation;case e.add:c.rotation+=(y-360*(16384-(16384.499999999996-y/360|0)))*a}}},s.ENTRIES=2,s.PREV_TIME=-2,s.PREV_ROTATION=-1,s.ROTATION=1,s}(s);t.RotateTimeline=a;var h=function(i){function s(e){var n=i.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*s.ENTRIES),n}return r(s,i),s.prototype.getPropertyId=function(){return(n.translate<<24)+this.boneIndex},s.prototype.setFrame=function(t,e,i,n){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.X]=i,this.frames[t+s.Y]=n},s.prototype.apply=function(t,i,n,r,a,h,u){var l=this.frames,c=t.bones[this.boneIndex];if(c.active)if(n<l[0])switch(h){case e.setup:return c.x=c.data.x,void(c.y=c.data.y);case e.first:c.x+=(c.data.x-c.x)*a,c.y+=(c.data.y-c.y)*a}else{var f=0,d=0;if(n>=l[l.length-s.ENTRIES])f=l[l.length+s.PREV_X],d=l[l.length+s.PREV_Y];else{var p=o.binarySearch(l,n,s.ENTRIES);f=l[p+s.PREV_X],d=l[p+s.PREV_Y];var g=l[p],v=this.getCurvePercent(p/s.ENTRIES-1,1-(n-g)/(l[p+s.PREV_TIME]-g));f+=(l[p+s.X]-f)*v,d+=(l[p+s.Y]-d)*v}switch(h){case e.setup:c.x=c.data.x+f*a,c.y=c.data.y+d*a;break;case e.first:case e.replace:c.x+=(c.data.x+f-c.x)*a,c.y+=(c.data.y+d-c.y)*a;break;case e.add:c.x+=f*a,c.y+=d*a}}},s.ENTRIES=3,s.PREV_TIME=-3,s.PREV_X=-2,s.PREV_Y=-1,s.X=1,s.Y=2,s}(s);t.TranslateTimeline=h;var u=function(s){function a(t){return s.call(this,t)||this}return r(a,s),a.prototype.getPropertyId=function(){return(n.scale<<24)+this.boneIndex},a.prototype.apply=function(n,r,s,h,u,l,c){var f=this.frames,d=n.bones[this.boneIndex];if(d.active)if(s<f[0])switch(l){case e.setup:return d.scaleX=d.data.scaleX,void(d.scaleY=d.data.scaleY);case e.first:d.scaleX+=(d.data.scaleX-d.scaleX)*u,d.scaleY+=(d.data.scaleY-d.scaleY)*u}else{var p=0,g=0;if(s>=f[f.length-a.ENTRIES])p=f[f.length+a.PREV_X]*d.data.scaleX,g=f[f.length+a.PREV_Y]*d.data.scaleY;else{var v=o.binarySearch(f,s,a.ENTRIES);p=f[v+a.PREV_X],g=f[v+a.PREV_Y];var m=f[v],y=this.getCurvePercent(v/a.ENTRIES-1,1-(s-m)/(f[v+a.PREV_TIME]-m));p=(p+(f[v+a.X]-p)*y)*d.data.scaleX,g=(g+(f[v+a.Y]-g)*y)*d.data.scaleY}if(1==u)l==e.add?(d.scaleX+=p-d.data.scaleX,d.scaleY+=g-d.data.scaleY):(d.scaleX=p,d.scaleY=g);else{var b=0,_=0;if(c==i.mixOut)switch(l){case e.setup:b=d.data.scaleX,_=d.data.scaleY,d.scaleX=b+(Math.abs(p)*t.MathUtils.signum(b)-b)*u,d.scaleY=_+(Math.abs(g)*t.MathUtils.signum(_)-_)*u;break;case e.first:case e.replace:b=d.scaleX,_=d.scaleY,d.scaleX=b+(Math.abs(p)*t.MathUtils.signum(b)-b)*u,d.scaleY=_+(Math.abs(g)*t.MathUtils.signum(_)-_)*u;break;case e.add:b=d.scaleX,_=d.scaleY,d.scaleX=b+(Math.abs(p)*t.MathUtils.signum(b)-d.data.scaleX)*u,d.scaleY=_+(Math.abs(g)*t.MathUtils.signum(_)-d.data.scaleY)*u}else switch(l){case e.setup:b=Math.abs(d.data.scaleX)*t.MathUtils.signum(p),_=Math.abs(d.data.scaleY)*t.MathUtils.signum(g),d.scaleX=b+(p-b)*u,d.scaleY=_+(g-_)*u;break;case e.first:case e.replace:b=Math.abs(d.scaleX)*t.MathUtils.signum(p),_=Math.abs(d.scaleY)*t.MathUtils.signum(g),d.scaleX=b+(p-b)*u,d.scaleY=_+(g-_)*u;break;case e.add:b=t.MathUtils.signum(p),_=t.MathUtils.signum(g),d.scaleX=Math.abs(d.scaleX)*b+(p-Math.abs(d.data.scaleX)*b)*u,d.scaleY=Math.abs(d.scaleY)*_+(g-Math.abs(d.data.scaleY)*_)*u}}}},a}(h);t.ScaleTimeline=u;var l=function(t){function i(e){return t.call(this,e)||this}return r(i,t),i.prototype.getPropertyId=function(){return(n.shear<<24)+this.boneIndex},i.prototype.apply=function(t,n,r,s,a,h,u){var l=this.frames,c=t.bones[this.boneIndex];if(c.active)if(r<l[0])switch(h){case e.setup:return c.shearX=c.data.shearX,void(c.shearY=c.data.shearY);case e.first:c.shearX+=(c.data.shearX-c.shearX)*a,c.shearY+=(c.data.shearY-c.shearY)*a}else{var f=0,d=0;if(r>=l[l.length-i.ENTRIES])f=l[l.length+i.PREV_X],d=l[l.length+i.PREV_Y];else{var p=o.binarySearch(l,r,i.ENTRIES);f=l[p+i.PREV_X],d=l[p+i.PREV_Y];var g=l[p],v=this.getCurvePercent(p/i.ENTRIES-1,1-(r-g)/(l[p+i.PREV_TIME]-g));f+=(l[p+i.X]-f)*v,d+=(l[p+i.Y]-d)*v}switch(h){case e.setup:c.shearX=c.data.shearX+f*a,c.shearY=c.data.shearY+d*a;break;case e.first:case e.replace:c.shearX+=(c.data.shearX+f-c.shearX)*a,c.shearY+=(c.data.shearY+d-c.shearY)*a;break;case e.add:c.shearX+=f*a,c.shearY+=d*a}}},i}(h);t.ShearTimeline=l;var c=function(i){function s(e){var n=i.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*s.ENTRIES),n}return r(s,i),s.prototype.getPropertyId=function(){return(n.color<<24)+this.slotIndex},s.prototype.setFrame=function(t,e,i,n,r,o){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.R]=i,this.frames[t+s.G]=n,this.frames[t+s.B]=r,this.frames[t+s.A]=o},s.prototype.apply=function(t,i,n,r,a,h,u){var l=t.slots[this.slotIndex];if(l.bone.active){var c=this.frames;if(n<c[0])switch(h){case e.setup:return void l.color.setFromColor(l.data.color);case e.first:var f=l.color,d=l.data.color;f.add((d.r-f.r)*a,(d.g-f.g)*a,(d.b-f.b)*a,(d.a-f.a)*a)}else{var p=0,g=0,v=0,m=0;if(n>=c[c.length-s.ENTRIES]){var y=c.length;p=c[y+s.PREV_R],g=c[y+s.PREV_G],v=c[y+s.PREV_B],m=c[y+s.PREV_A]}else{var b=o.binarySearch(c,n,s.ENTRIES);p=c[b+s.PREV_R],g=c[b+s.PREV_G],v=c[b+s.PREV_B],m=c[b+s.PREV_A];var _=c[b],w=this.getCurvePercent(b/s.ENTRIES-1,1-(n-_)/(c[b+s.PREV_TIME]-_));p+=(c[b+s.R]-p)*w,g+=(c[b+s.G]-g)*w,v+=(c[b+s.B]-v)*w,m+=(c[b+s.A]-m)*w}if(1==a)l.color.set(p,g,v,m);else{f=l.color;h==e.setup&&f.setFromColor(l.data.color),f.add((p-f.r)*a,(g-f.g)*a,(v-f.b)*a,(m-f.a)*a)}}}},s.ENTRIES=5,s.PREV_TIME=-5,s.PREV_R=-4,s.PREV_G=-3,s.PREV_B=-2,s.PREV_A=-1,s.R=1,s.G=2,s.B=3,s.A=4,s}(s);t.ColorTimeline=c;var f=function(i){function s(e){var n=i.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*s.ENTRIES),n}return r(s,i),s.prototype.getPropertyId=function(){return(n.twoColor<<24)+this.slotIndex},s.prototype.setFrame=function(t,e,i,n,r,o,a,h,u){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.R]=i,this.frames[t+s.G]=n,this.frames[t+s.B]=r,this.frames[t+s.A]=o,this.frames[t+s.R2]=a,this.frames[t+s.G2]=h,this.frames[t+s.B2]=u},s.prototype.apply=function(t,i,n,r,a,h,u){var l=t.slots[this.slotIndex];if(l.bone.active){var c=this.frames;if(n<c[0])switch(h){case e.setup:return l.color.setFromColor(l.data.color),void l.darkColor.setFromColor(l.data.darkColor);case e.first:var f=l.color,d=l.darkColor,p=l.data.color,g=l.data.darkColor;f.add((p.r-f.r)*a,(p.g-f.g)*a,(p.b-f.b)*a,(p.a-f.a)*a),d.add((g.r-d.r)*a,(g.g-d.g)*a,(g.b-d.b)*a,0)}else{var v=0,m=0,y=0,b=0,_=0,w=0,x=0;if(n>=c[c.length-s.ENTRIES]){var E=c.length;v=c[E+s.PREV_R],m=c[E+s.PREV_G],y=c[E+s.PREV_B],b=c[E+s.PREV_A],_=c[E+s.PREV_R2],w=c[E+s.PREV_G2],x=c[E+s.PREV_B2]}else{var T=o.binarySearch(c,n,s.ENTRIES);v=c[T+s.PREV_R],m=c[T+s.PREV_G],y=c[T+s.PREV_B],b=c[T+s.PREV_A],_=c[T+s.PREV_R2],w=c[T+s.PREV_G2],x=c[T+s.PREV_B2];var S=c[T],A=this.getCurvePercent(T/s.ENTRIES-1,1-(n-S)/(c[T+s.PREV_TIME]-S));v+=(c[T+s.R]-v)*A,m+=(c[T+s.G]-m)*A,y+=(c[T+s.B]-y)*A,b+=(c[T+s.A]-b)*A,_+=(c[T+s.R2]-_)*A,w+=(c[T+s.G2]-w)*A,x+=(c[T+s.B2]-x)*A}if(1==a)l.color.set(v,m,y,b),l.darkColor.set(_,w,x,1);else{f=l.color,d=l.darkColor;h==e.setup&&(f.setFromColor(l.data.color),d.setFromColor(l.data.darkColor)),f.add((v-f.r)*a,(m-f.g)*a,(y-f.b)*a,(b-f.a)*a),d.add((_-d.r)*a,(w-d.g)*a,(x-d.b)*a,0)}}}},s.ENTRIES=8,s.PREV_TIME=-8,s.PREV_R=-7,s.PREV_G=-6,s.PREV_B=-5,s.PREV_A=-4,s.PREV_R2=-3,s.PREV_G2=-2,s.PREV_B2=-1,s.R=1,s.G=2,s.B=3,s.A=4,s.R2=5,s.G2=6,s.B2=7,s}(s);t.TwoColorTimeline=f;var d=function(){function r(e){this.frames=t.Utils.newFloatArray(e),this.attachmentNames=new Array(e)}return r.prototype.getPropertyId=function(){return(n.attachment<<24)+this.slotIndex},r.prototype.getFrameCount=function(){return this.frames.length},r.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i},r.prototype.apply=function(t,n,r,s,a,h,u){var l=t.slots[this.slotIndex];if(l.bone.active)if(u!=i.mixOut||h!=e.setup){var c=this.frames;if(r<c[0]){if(h==e.setup||h==e.first){var f=l.data.attachmentName;l.setAttachment(null==f?null:t.getAttachment(this.slotIndex,f))}}else{var d=0;d=r>=c[c.length-1]?c.length-1:o.binarySearch(c,r,1)-1;var p=this.attachmentNames[d];t.slots[this.slotIndex].setAttachment(null==p?null:t.getAttachment(this.slotIndex,p))}}else{var g=l.data.attachmentName;l.setAttachment(null==g?null:t.getAttachment(this.slotIndex,g))}},r}();t.AttachmentTimeline=d;var p=null,g=function(i){function s(e){var n=i.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e),n.frameVertices=new Array(e),null==p&&(p=t.Utils.newFloatArray(64)),n}return r(s,i),s.prototype.getPropertyId=function(){return(n.deform<<27)+ +this.attachment.id+this.slotIndex},s.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.frameVertices[t]=i},s.prototype.apply=function(i,n,r,s,a,h,u){var l=i.slots[this.slotIndex];if(l.bone.active){var c=l.getAttachment();if(c instanceof t.VertexAttachment&&c.deformAttachment==this.attachment){var f=l.deform;0==f.length&&(h=e.setup);var d=this.frameVertices,p=d[0].length,g=this.frames;if(r<g[0]){var v=c;switch(h){case e.setup:return void(f.length=0);case e.first:if(1==a){f.length=0;break}var m=t.Utils.setArraySize(f,p);if(null==v.bones)for(var y=v.vertices,b=0;b<p;b++)m[b]+=(y[b]-m[b])*a;else{a=1-a;for(b=0;b<p;b++)m[b]*=a}}}else{var _=t.Utils.setArraySize(f,p);if(r>=g[g.length-1]){var w=d[g.length-1];if(1==a)if(h==e.add)if(null==(v=c).bones){y=v.vertices;for(var x=0;x<p;x++)_[x]+=w[x]-y[x]}else for(var E=0;E<p;E++)_[E]+=w[E];else t.Utils.arrayCopy(w,0,_,0,p);else switch(h){case e.setup:var T=c;if(null==T.bones){y=T.vertices;for(var S=0;S<p;S++){var A=y[S];_[S]=A+(w[S]-A)*a}}else for(var P=0;P<p;P++)_[P]=w[P]*a;break;case e.first:case e.replace:for(var C=0;C<p;C++)_[C]+=(w[C]-_[C])*a;break;case e.add:if(null==(v=c).bones){y=v.vertices;for(var M=0;M<p;M++)_[M]+=(w[M]-y[M])*a}else for(var O=0;O<p;O++)_[O]+=w[O]*a}}else{var I=o.binarySearch(g,r),k=d[I-1],R=d[I],L=g[I],D=this.getCurvePercent(I-1,1-(r-L)/(g[I-1]-L));if(1==a)if(h==e.add)if(null==(v=c).bones){y=v.vertices;for(var F=0;F<p;F++){var N=k[F];_[F]+=N+(R[F]-N)*D-y[F]}}else for(var U=0;U<p;U++){N=k[U];_[U]+=N+(R[U]-N)*D}else for(var B=0;B<p;B++){N=k[B];_[B]=N+(R[B]-N)*D}else switch(h){case e.setup:var j=c;if(null==j.bones){y=j.vertices;for(var X=0;X<p;X++){N=k[X],A=y[X];_[X]=A+(N+(R[X]-N)*D-A)*a}}else for(var V=0;V<p;V++){N=k[V];_[V]=(N+(R[V]-N)*D)*a}break;case e.first:case e.replace:for(var z=0;z<p;z++){N=k[z];_[z]+=(N+(R[z]-N)*D-_[z])*a}break;case e.add:if(null==(v=c).bones){y=v.vertices;for(var Y=0;Y<p;Y++){N=k[Y];_[Y]+=(N+(R[Y]-N)*D-y[Y])*a}}else for(var W=0;W<p;W++){N=k[W];_[W]+=(N+(R[W]-N)*D)*a}}}}}}},s}(s);t.DeformTimeline=g;var v=function(){function e(e){this.frames=t.Utils.newFloatArray(e),this.events=new Array(e)}return e.prototype.getPropertyId=function(){return n.event<<24},e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},e.prototype.apply=function(t,e,i,n,r,s,a){if(null!=n){var h=this.frames,u=this.frames.length;if(e>i)this.apply(t,e,Number.MAX_VALUE,n,r,s,a),e=-1;else if(e>=h[u-1])return;if(!(i<h[0])){var l=0;if(e<h[0])l=0;else for(var c=h[l=o.binarySearch(h,e)];l>0&&h[l-1]==c;)l--;for(;l<u&&i>=h[l];l++)n.push(this.events[l])}}},e}();t.EventTimeline=v;var m=function(){function r(e){this.frames=t.Utils.newFloatArray(e),this.drawOrders=new Array(e)}return r.prototype.getPropertyId=function(){return n.drawOrder<<24},r.prototype.getFrameCount=function(){return this.frames.length},r.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.drawOrders[t]=i},r.prototype.apply=function(n,r,s,a,h,u,l){var c=n.drawOrder,f=n.slots;if(l!=i.mixOut||u!=e.setup){var d=this.frames;if(s<d[0])u!=e.setup&&u!=e.first||t.Utils.arrayCopy(n.slots,0,n.drawOrder,0,n.slots.length);else{var p=0;p=s>=d[d.length-1]?d.length-1:o.binarySearch(d,s)-1;var g=this.drawOrders[p];if(null==g)t.Utils.arrayCopy(f,0,c,0,f.length);else for(var v=0,m=g.length;v<m;v++)c[v]=f[g[v]]}}else t.Utils.arrayCopy(n.slots,0,n.drawOrder,0,n.slots.length)},r}();t.DrawOrderTimeline=m;var y=function(s){function a(e){var i=s.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return r(a,s),a.prototype.getPropertyId=function(){return(n.ikConstraint<<24)+this.ikConstraintIndex},a.prototype.setFrame=function(t,e,i,n,r,o,s){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.MIX]=i,this.frames[t+a.SOFTNESS]=n,this.frames[t+a.BEND_DIRECTION]=r,this.frames[t+a.COMPRESS]=o?1:0,this.frames[t+a.STRETCH]=s?1:0},a.prototype.apply=function(t,n,r,s,h,u,l){var c=this.frames,f=t.ikConstraints[this.ikConstraintIndex];if(f.active)if(r<c[0])switch(u){case e.setup:return f.mix=f.data.mix,f.softness=f.data.softness,f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,void(f.stretch=f.data.stretch);case e.first:f.mix+=(f.data.mix-f.mix)*h,f.softness+=(f.data.softness-f.softness)*h,f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,f.stretch=f.data.stretch}else if(r>=c[c.length-a.ENTRIES])u==e.setup?(f.mix=f.data.mix+(c[c.length+a.PREV_MIX]-f.data.mix)*h,f.softness=f.data.softness+(c[c.length+a.PREV_SOFTNESS]-f.data.softness)*h,l==i.mixOut?(f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,f.stretch=f.data.stretch):(f.bendDirection=c[c.length+a.PREV_BEND_DIRECTION],f.compress=0!=c[c.length+a.PREV_COMPRESS],f.stretch=0!=c[c.length+a.PREV_STRETCH])):(f.mix+=(c[c.length+a.PREV_MIX]-f.mix)*h,f.softness+=(c[c.length+a.PREV_SOFTNESS]-f.softness)*h,l==i.mixIn&&(f.bendDirection=c[c.length+a.PREV_BEND_DIRECTION],f.compress=0!=c[c.length+a.PREV_COMPRESS],f.stretch=0!=c[c.length+a.PREV_STRETCH]));else{var d=o.binarySearch(c,r,a.ENTRIES),p=c[d+a.PREV_MIX],g=c[d+a.PREV_SOFTNESS],v=c[d],m=this.getCurvePercent(d/a.ENTRIES-1,1-(r-v)/(c[d+a.PREV_TIME]-v));u==e.setup?(f.mix=f.data.mix+(p+(c[d+a.MIX]-p)*m-f.data.mix)*h,f.softness=f.data.softness+(g+(c[d+a.SOFTNESS]-g)*m-f.data.softness)*h,l==i.mixOut?(f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,f.stretch=f.data.stretch):(f.bendDirection=c[d+a.PREV_BEND_DIRECTION],f.compress=0!=c[d+a.PREV_COMPRESS],f.stretch=0!=c[d+a.PREV_STRETCH])):(f.mix+=(p+(c[d+a.MIX]-p)*m-f.mix)*h,f.softness+=(g+(c[d+a.SOFTNESS]-g)*m-f.softness)*h,l==i.mixIn&&(f.bendDirection=c[d+a.PREV_BEND_DIRECTION],f.compress=0!=c[d+a.PREV_COMPRESS],f.stretch=0!=c[d+a.PREV_STRETCH]))}},a.ENTRIES=6,a.PREV_TIME=-6,a.PREV_MIX=-5,a.PREV_SOFTNESS=-4,a.PREV_BEND_DIRECTION=-3,a.PREV_COMPRESS=-2,a.PREV_STRETCH=-1,a.MIX=1,a.SOFTNESS=2,a.BEND_DIRECTION=3,a.COMPRESS=4,a.STRETCH=5,a}(s);t.IkConstraintTimeline=y;var b=function(i){function s(e){var n=i.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*s.ENTRIES),n}return r(s,i),s.prototype.getPropertyId=function(){return(n.transformConstraint<<24)+this.transformConstraintIndex},s.prototype.setFrame=function(t,e,i,n,r,o){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.ROTATE]=i,this.frames[t+s.TRANSLATE]=n,this.frames[t+s.SCALE]=r,this.frames[t+s.SHEAR]=o},s.prototype.apply=function(t,i,n,r,a,h,u){var l=this.frames,c=t.transformConstraints[this.transformConstraintIndex];if(c.active)if(n<l[0]){var f=c.data;switch(h){case e.setup:return c.rotateMix=f.rotateMix,c.translateMix=f.translateMix,c.scaleMix=f.scaleMix,void(c.shearMix=f.shearMix);case e.first:c.rotateMix+=(f.rotateMix-c.rotateMix)*a,c.translateMix+=(f.translateMix-c.translateMix)*a,c.scaleMix+=(f.scaleMix-c.scaleMix)*a,c.shearMix+=(f.shearMix-c.shearMix)*a}}else{var d=0,p=0,g=0,v=0;if(n>=l[l.length-s.ENTRIES]){var m=l.length;d=l[m+s.PREV_ROTATE],p=l[m+s.PREV_TRANSLATE],g=l[m+s.PREV_SCALE],v=l[m+s.PREV_SHEAR]}else{var y=o.binarySearch(l,n,s.ENTRIES);d=l[y+s.PREV_ROTATE],p=l[y+s.PREV_TRANSLATE],g=l[y+s.PREV_SCALE],v=l[y+s.PREV_SHEAR];var b=l[y],_=this.getCurvePercent(y/s.ENTRIES-1,1-(n-b)/(l[y+s.PREV_TIME]-b));d+=(l[y+s.ROTATE]-d)*_,p+=(l[y+s.TRANSLATE]-p)*_,g+=(l[y+s.SCALE]-g)*_,v+=(l[y+s.SHEAR]-v)*_}if(h==e.setup){f=c.data;c.rotateMix=f.rotateMix+(d-f.rotateMix)*a,c.translateMix=f.translateMix+(p-f.translateMix)*a,c.scaleMix=f.scaleMix+(g-f.scaleMix)*a,c.shearMix=f.shearMix+(v-f.shearMix)*a}else c.rotateMix+=(d-c.rotateMix)*a,c.translateMix+=(p-c.translateMix)*a,c.scaleMix+=(g-c.scaleMix)*a,c.shearMix+=(v-c.shearMix)*a}},s.ENTRIES=5,s.PREV_TIME=-5,s.PREV_ROTATE=-4,s.PREV_TRANSLATE=-3,s.PREV_SCALE=-2,s.PREV_SHEAR=-1,s.ROTATE=1,s.TRANSLATE=2,s.SCALE=3,s.SHEAR=4,s}(s);t.TransformConstraintTimeline=b;var _=function(i){function s(e){var n=i.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*s.ENTRIES),n}return r(s,i),s.prototype.getPropertyId=function(){return(n.pathConstraintPosition<<24)+this.pathConstraintIndex},s.prototype.setFrame=function(t,e,i){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.VALUE]=i},s.prototype.apply=function(t,i,n,r,a,h,u){var l=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(n<l[0])switch(h){case e.setup:return void(c.position=c.data.position);case e.first:c.position+=(c.data.position-c.position)*a}else{var f=0;if(n>=l[l.length-s.ENTRIES])f=l[l.length+s.PREV_VALUE];else{var d=o.binarySearch(l,n,s.ENTRIES);f=l[d+s.PREV_VALUE];var p=l[d],g=this.getCurvePercent(d/s.ENTRIES-1,1-(n-p)/(l[d+s.PREV_TIME]-p));f+=(l[d+s.VALUE]-f)*g}h==e.setup?c.position=c.data.position+(f-c.data.position)*a:c.position+=(f-c.position)*a}},s.ENTRIES=2,s.PREV_TIME=-2,s.PREV_VALUE=-1,s.VALUE=1,s}(s);t.PathConstraintPositionTimeline=_;var w=function(t){function i(e){return t.call(this,e)||this}return r(i,t),i.prototype.getPropertyId=function(){return(n.pathConstraintSpacing<<24)+this.pathConstraintIndex},i.prototype.apply=function(t,n,r,s,a,h,u){var l=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(r<l[0])switch(h){case e.setup:return void(c.spacing=c.data.spacing);case e.first:c.spacing+=(c.data.spacing-c.spacing)*a}else{var f=0;if(r>=l[l.length-i.ENTRIES])f=l[l.length+i.PREV_VALUE];else{var d=o.binarySearch(l,r,i.ENTRIES);f=l[d+i.PREV_VALUE];var p=l[d],g=this.getCurvePercent(d/i.ENTRIES-1,1-(r-p)/(l[d+i.PREV_TIME]-p));f+=(l[d+i.VALUE]-f)*g}h==e.setup?c.spacing=c.data.spacing+(f-c.data.spacing)*a:c.spacing+=(f-c.spacing)*a}},i}(_);t.PathConstraintSpacingTimeline=w;var x=function(i){function s(e){var n=i.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*s.ENTRIES),n}return r(s,i),s.prototype.getPropertyId=function(){return(n.pathConstraintMix<<24)+this.pathConstraintIndex},s.prototype.setFrame=function(t,e,i,n){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.ROTATE]=i,this.frames[t+s.TRANSLATE]=n},s.prototype.apply=function(t,i,n,r,a,h,u){var l=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(n<l[0])switch(h){case e.setup:return c.rotateMix=c.data.rotateMix,void(c.translateMix=c.data.translateMix);case e.first:c.rotateMix+=(c.data.rotateMix-c.rotateMix)*a,c.translateMix+=(c.data.translateMix-c.translateMix)*a}else{var f=0,d=0;if(n>=l[l.length-s.ENTRIES])f=l[l.length+s.PREV_ROTATE],d=l[l.length+s.PREV_TRANSLATE];else{var p=o.binarySearch(l,n,s.ENTRIES);f=l[p+s.PREV_ROTATE],d=l[p+s.PREV_TRANSLATE];var g=l[p],v=this.getCurvePercent(p/s.ENTRIES-1,1-(n-g)/(l[p+s.PREV_TIME]-g));f+=(l[p+s.ROTATE]-f)*v,d+=(l[p+s.TRANSLATE]-d)*v}h==e.setup?(c.rotateMix=c.data.rotateMix+(f-c.data.rotateMix)*a,c.translateMix=c.data.translateMix+(d-c.data.translateMix)*a):(c.rotateMix+=(f-c.rotateMix)*a,c.translateMix+=(d-c.translateMix)*a)}},s.ENTRIES=3,s.PREV_TIME=-3,s.PREV_ROTATE=-2,s.PREV_TRANSLATE=-1,s.ROTATE=1,s.TRANSLATE=2,s}(s);t.PathConstraintMixTimeline=x}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(e){this.tracks=new Array,this.timeScale=1,this.events=new Array,this.listeners=new Array,this.queue=new r(this),this.propertyIDs=new t.IntSet,this.animationsChanged=!1,this.trackEntryPool=new t.Pool((function(){return new i})),this.data=e}return e.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,i=0,n=e.length;i<n;i++){var r=e[i];if(null!=r){r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast;var o=t*r.timeScale;if(r.delay>0){if(r.delay-=o,r.delay>0)continue;o=-r.delay,r.delay=0}var s=r.next;if(null!=s){var a=r.trackLast-s.delay;if(a>=0){for(s.delay=0,s.trackTime+=0==r.timeScale?0:(a/r.timeScale+t)*s.timeScale,r.trackTime+=o,this.setCurrent(i,s,!0);null!=s.mixingFrom;)s.mixTime+=t,s=s.mixingFrom;continue}}else if(r.trackLast>=r.trackEnd&&null==r.mixingFrom){e[i]=null,this.queue.end(r),this.disposeNext(r);continue}if(null!=r.mixingFrom&&this.updateMixingFrom(r,t)){var h=r.mixingFrom;for(r.mixingFrom=null,null!=h&&(h.mixingTo=null);null!=h;)this.queue.end(h),h=h.mixingFrom}r.trackTime+=o}}this.queue.drain()},e.prototype.updateMixingFrom=function(t,e){var i=t.mixingFrom;if(null==i)return!0;var n=this.updateMixingFrom(i,e);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=i.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=i.mixingFrom,null!=i.mixingFrom&&(i.mixingFrom.mixingTo=t),t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),n):(i.trackTime+=e*i.timeScale,t.mixTime+=e,!1)},e.prototype.apply=function(i){if(null==i)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var n=this.events,r=this.tracks,o=!1,s=0,a=r.length;s<a;s++){var h=r[s];if(!(null==h||h.delay>0)){o=!0;var u=0==s?t.MixBlend.first:h.mixBlend,l=h.alpha;null!=h.mixingFrom?l*=this.applyMixingFrom(h,i,u):h.trackTime>=h.trackEnd&&null==h.next&&(l=0);var c=h.animationLast,f=h.getAnimationTime(),d=h.animation.timelines.length,p=h.animation.timelines;if(0==s&&1==l||u==t.MixBlend.add)for(var g=0;g<d;g++)t.Utils.webkit602BugfixHelper(l,u),p[g].apply(i,c,f,n,l,u,t.MixDirection.mixIn);else{var v=h.timelineMode,m=0==h.timelinesRotation.length;m&&t.Utils.setArraySize(h.timelinesRotation,d<<1,null);var y=h.timelinesRotation;for(g=0;g<d;g++){var b=p[g],_=(v[g]&e.NOT_LAST-1)==e.SUBSEQUENT?u:t.MixBlend.setup;b instanceof t.RotateTimeline?this.applyRotateTimeline(b,i,f,l,_,y,g<<1,m):(t.Utils.webkit602BugfixHelper(l,u),b.apply(i,c,f,n,l,_,t.MixDirection.mixIn))}}this.queueEvents(h,f),n.length=0,h.nextAnimationLast=f,h.nextTrackLast=h.trackTime}}return this.queue.drain(),o},e.prototype.applyMixingFrom=function(i,n,r){var o=i.mixingFrom;null!=o.mixingFrom&&this.applyMixingFrom(o,n,r);var s=0;0==i.mixDuration?(s=1,r==t.MixBlend.first&&(r=t.MixBlend.setup)):((s=i.mixTime/i.mixDuration)>1&&(s=1),r!=t.MixBlend.first&&(r=o.mixBlend));var a=s<o.eventThreshold?this.events:null,h=s<o.attachmentThreshold,u=s<o.drawOrderThreshold,l=o.animationLast,c=o.getAnimationTime(),f=o.animation.timelines.length,d=o.animation.timelines,p=o.alpha*i.interruptAlpha,g=p*(1-s);if(r==t.MixBlend.add)for(var v=0;v<f;v++)d[v].apply(n,l,c,a,g,r,t.MixDirection.mixOut);else{var m=o.timelineMode,y=o.timelineHoldMix,b=0==o.timelinesRotation.length;b&&t.Utils.setArraySize(o.timelinesRotation,f<<1,null);var _=o.timelinesRotation;o.totalAlpha=0;for(v=0;v<f;v++){var w=d[v],x=t.MixDirection.mixOut,E=void 0,T=0;switch(m[v]&e.NOT_LAST-1){case e.SUBSEQUENT:if(E=r,!h&&w instanceof t.AttachmentTimeline){if((m[v]&e.NOT_LAST)==e.NOT_LAST)continue;E=t.MixBlend.setup}if(!u&&w instanceof t.DrawOrderTimeline)continue;T=g;break;case e.FIRST:E=t.MixBlend.setup,T=g;break;case e.HOLD:E=t.MixBlend.setup,T=p;break;default:E=t.MixBlend.setup;var S=y[v];T=p*Math.max(0,1-S.mixTime/S.mixDuration)}o.totalAlpha+=T,w instanceof t.RotateTimeline?this.applyRotateTimeline(w,n,c,T,E,_,v<<1,b):(t.Utils.webkit602BugfixHelper(T,r),E==t.MixBlend.setup&&(w instanceof t.AttachmentTimeline?(h||(m[v]&e.NOT_LAST)==e.NOT_LAST)&&(x=t.MixDirection.mixIn):w instanceof t.DrawOrderTimeline&&u&&(x=t.MixDirection.mixIn)),w.apply(n,l,c,a,T,E,x))}}return i.mixDuration>0&&this.queueEvents(o,c),this.events.length=0,o.nextAnimationLast=c,o.nextTrackLast=o.trackTime,s},e.prototype.applyRotateTimeline=function(e,i,n,r,o,s,a,h){if(h&&(s[a]=0),1!=r){var u=e,l=u.frames,c=i.bones[u.boneIndex];if(c.active){var f=0,d=0;if(n<l[0])switch(o){case t.MixBlend.setup:c.rotation=c.data.rotation;default:return;case t.MixBlend.first:f=c.rotation,d=c.data.rotation}else if(f=o==t.MixBlend.setup?c.data.rotation:c.rotation,n>=l[l.length-t.RotateTimeline.ENTRIES])d=c.data.rotation+l[l.length+t.RotateTimeline.PREV_ROTATION];else{var p=t.Animation.binarySearch(l,n,t.RotateTimeline.ENTRIES),g=l[p+t.RotateTimeline.PREV_ROTATION],v=l[p],m=u.getCurvePercent((p>>1)-1,1-(n-v)/(l[p+t.RotateTimeline.PREV_TIME]-v));d=l[p+t.RotateTimeline.ROTATION]-g,d=g+(d-=360*(16384-(16384.499999999996-d/360|0)))*m+c.data.rotation,d-=360*(16384-(16384.499999999996-d/360|0))}var y=0,b=d-f;if(0==(b-=360*(16384-(16384.499999999996-b/360|0))))y=s[a];else{var _=0,w=0;h?(_=0,w=b):(_=s[a],w=s[a+1]);var x=b>0,E=_>=0;t.MathUtils.signum(w)!=t.MathUtils.signum(b)&&Math.abs(w)<=90&&(Math.abs(_)>180&&(_+=360*t.MathUtils.signum(_)),E=x),y=b+_-_%360,E!=x&&(y+=360*t.MathUtils.signum(_)),s[a]=y}s[a+1]=b,f+=y*r,c.rotation=f-360*(16384-(16384.499999999996-f/360|0))}}else e.apply(i,0,n,null,1,o,t.MixDirection.mixIn)},e.prototype.queueEvents=function(t,e){for(var i=t.animationStart,n=t.animationEnd,r=n-i,o=t.trackLast%r,s=this.events,a=0,h=s.length;a<h;a++){var u=s[a];if(u.time<o)break;u.time>n||this.queue.event(t,u)}for((t.loop?0==r||o>t.trackTime%r:e>=n&&t.animationLast<n)&&this.queue.complete(t);a<h;a++){s[a].time<i||this.queue.event(t,s[a])}},e.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,i=this.tracks.length;e<i;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},e.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var i=e;;){var n=i.mixingFrom;if(null==n)break;this.queue.end(n),i.mixingFrom=null,i.mixingTo=null,i=n}this.tracks[e.trackIndex]=null,this.queue.drain()}}},e.prototype.setCurrent=function(t,e,i){var n=this.expandToIndex(t);this.tracks[t]=e,null!=n&&(i&&this.queue.interrupt(n),e.mixingFrom=n,n.mixingTo=e,e.mixTime=0,null!=n.mixingFrom&&n.mixDuration>0&&(e.interruptAlpha*=Math.min(1,n.mixTime/n.mixDuration)),n.timelinesRotation.length=0),this.queue.start(e)},e.prototype.setAnimation=function(t,e,i){var n=this.data.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,n,i)},e.prototype.setAnimationWith=function(t,e,i){if(null==e)throw new Error("animation cannot be null.");var n=!0,r=this.expandToIndex(t);null!=r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.disposeNext(r),r=r.mixingFrom,n=!1):this.disposeNext(r));var o=this.trackEntry(t,e,i,r);return this.setCurrent(t,o,n),this.queue.drain(),o},e.prototype.addAnimation=function(t,e,i,n){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,i,n)},e.prototype.addAnimationWith=function(t,e,i,n){if(null==e)throw new Error("animation cannot be null.");var r=this.expandToIndex(t);if(null!=r)for(;null!=r.next;)r=r.next;var o=this.trackEntry(t,e,i,r);if(null==r)this.setCurrent(t,o,!0),this.queue.drain();else if(r.next=o,n<=0){var s=r.animationEnd-r.animationStart;0!=s?(r.loop?n+=s*(1+(r.trackTime/s|0)):n+=Math.max(s,r.trackTime),n-=this.data.getMix(r.animation,e)):n=r.trackTime}return o.delay=n,o},e.prototype.setEmptyAnimation=function(t,i){var n=this.setAnimationWith(t,e.emptyAnimation,!1);return n.mixDuration=i,n.trackEnd=i,n},e.prototype.addEmptyAnimation=function(t,i,n){n<=0&&(n-=i);var r=this.addAnimationWith(t,e.emptyAnimation,!1,n);return r.mixDuration=i,r.trackEnd=i,r},e.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,n=this.tracks.length;i<n;i++){var r=this.tracks[i];null!=r&&this.setEmptyAnimation(r.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},e.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(t.Utils.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)},e.prototype.trackEntry=function(e,i,n,r){var o=this.trackEntryPool.obtain();return o.trackIndex=e,o.animation=i,o.loop=n,o.holdPrevious=!1,o.eventThreshold=0,o.attachmentThreshold=0,o.drawOrderThreshold=0,o.animationStart=0,o.animationEnd=i.duration,o.animationLast=-1,o.nextAnimationLast=-1,o.delay=0,o.trackTime=0,o.trackLast=-1,o.nextTrackLast=-1,o.trackEnd=Number.MAX_VALUE,o.timeScale=1,o.alpha=1,o.interruptAlpha=1,o.mixTime=0,o.mixDuration=null==r?0:this.data.getMix(r.animation,i),o.mixBlend=t.MixBlend.replace,o},e.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},e.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var e=0,i=this.tracks.length;e<i;e++){if(null!=(n=this.tracks[e])){for(;null!=n.mixingFrom;)n=n.mixingFrom;do{null!=n.mixingFrom&&n.mixBlend==t.MixBlend.add||this.computeHold(n),n=n.mixingTo}while(null!=n)}}this.propertyIDs.clear();for(e=this.tracks.length-1;e>=0;e--)for(var n=this.tracks[e];null!=n;)this.computeNotLast(n),n=n.mixingFrom},e.prototype.computeHold=function(i){var n=i.mixingTo,r=i.animation.timelines,o=i.animation.timelines.length,s=t.Utils.setArraySize(i.timelineMode,o);i.timelineHoldMix.length=0;var a=t.Utils.setArraySize(i.timelineHoldMix,o),h=this.propertyIDs;if(null!=n&&n.holdPrevious)for(var u=0;u<o;u++)h.add(r[u].getPropertyId()),s[u]=e.HOLD;else t:for(u=0;u<o;u++){var l=r[u],c=l.getPropertyId();if(h.add(c))if(null==n||l instanceof t.AttachmentTimeline||l instanceof t.DrawOrderTimeline||l instanceof t.EventTimeline||!n.animation.hasTimeline(c))s[u]=e.FIRST;else{for(var f=n.mixingTo;null!=f;f=f.mixingTo)if(!f.animation.hasTimeline(c)){if(i.mixDuration>0){s[u]=e.HOLD_MIX,a[u]=f;continue t}break}s[u]=e.HOLD}else s[u]=e.SUBSEQUENT}},e.prototype.computeNotLast=function(i){for(var n=i.animation.timelines,r=i.animation.timelines.length,o=i.timelineMode,s=this.propertyIDs,a=0;a<r;a++)if(n[a]instanceof t.AttachmentTimeline){var h=n[a];s.add(h.slotIndex)||(o[a]|=e.NOT_LAST)}},e.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},e.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},e.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},e.prototype.clearListeners=function(){this.listeners.length=0},e.prototype.clearListenerNotifications=function(){this.queue.clear()},e.prototype.setAnimationByName=function(t,i,n){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,i,n)},e.prototype.addAnimationByName=function(t,i,n,r){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,i,n,r)},e.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},e.prototype.hasAnimationByName=function(t){return e.deprecatedWarning3||(e.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},e.emptyAnimation=new t.Animation("<empty>",[],0),e.SUBSEQUENT=0,e.FIRST=1,e.HOLD=2,e.HOLD_MIX=3,e.NOT_LAST=4,e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e.deprecatedWarning3=!1,e}();t.AnimationState=e;var i=function(){function e(){this.mixBlend=t.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return e.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},e.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},e.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},e.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},e.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(e.prototype,"time",{get:function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endTime",{get:function(){return e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(t){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t},enumerable:!0,configurable:!0}),e.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e}();t.TrackEntry=i;var n,r=function(){function e(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return e.prototype.start=function(t){this.objects.push(n.start),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.interrupt=function(t){this.objects.push(n.interrupt),this.objects.push(t)},e.prototype.end=function(t){this.objects.push(n.end),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.dispose=function(t){this.objects.push(n.dispose),this.objects.push(t)},e.prototype.complete=function(t){this.objects.push(n.complete),this.objects.push(t)},e.prototype.event=function(t,e){this.objects.push(n.event),this.objects.push(t),this.objects.push(e)},e.prototype.deprecateStuff=function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},e.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,i=this.animState.listeners,r=0;r<e.length;r+=2){var o=e[r],s=e[r+1];switch(o){case n.start:null!=s.listener&&s.listener.start&&s.listener.start(s);for(var a=0;a<i.length;a++)i[a].start&&i[a].start(s);s.onStart&&this.deprecateStuff()&&s.onStart(s.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(s.trackIndex);break;case n.interrupt:null!=s.listener&&s.listener.interrupt&&s.listener.interrupt(s);for(a=0;a<i.length;a++)i[a].interrupt&&i[a].interrupt(s);break;case n.end:null!=s.listener&&s.listener.end&&s.listener.end(s);for(a=0;a<i.length;a++)i[a].end&&i[a].end(s);s.onEnd&&this.deprecateStuff()&&s.onEnd(s.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(s.trackIndex);case n.dispose:null!=s.listener&&s.listener.dispose&&s.listener.dispose(s);for(a=0;a<i.length;a++)i[a].dispose&&i[a].dispose(s);this.animState.trackEntryPool.free(s);break;case n.complete:null!=s.listener&&s.listener.complete&&s.listener.complete(s);for(a=0;a<i.length;a++)i[a].complete&&i[a].complete(s);var h=t.MathUtils.toInt(s.loopsCount());s.onComplete&&this.deprecateStuff()&&s.onComplete(s.trackIndex,h),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(s.trackIndex,h);break;case n.event:var u=e[2+r++];null!=s.listener&&s.listener.event&&s.listener.event(s,u);for(a=0;a<i.length;a++)i[a].event&&i[a].event(s,u);s.onEvent&&this.deprecateStuff()&&s.onEvent(s.trackIndex,u),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(s.trackIndex,u)}}this.clear(),this.drainDisabled=!1}},e.prototype.clear=function(){this.objects.length=0},e.deprecatedWarning1=!1,e}();t.EventQueue=r,function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(n=t.EventType||(t.EventType={}));var o=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}();t.AnimationStateAdapter=o}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,i){var n=this.skeletonData.findAnimation(t);if(null==n)throw new Error("Animation not found: "+t);var r=this.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);this.setMixWith(n,r,i)},t.prototype.setMixByName=function(e,i,n){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(e,i,n)},t.prototype.setMixWith=function(t,e,i){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var n=t.name+"."+e.name;this.animationToMixTime[n]=i},t.prototype.getMix=function(t,e){var i=t.name+"."+e.name,n=this.animationToMixTime[i];return void 0===n?this.defaultMix:n},t.deprecatedWarning1=!1,t}();t.AnimationStateData=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(t){this.atlas=t}return e.prototype.newRegionAttachment=function(e,i,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (region attachment: "+i+")");var o=new t.RegionAttachment(i);return o.region=r,o},e.prototype.newMeshAttachment=function(e,i,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+i+")");var o=new t.MeshAttachment(i);return o.region=r,o},e.prototype.newBoundingBoxAttachment=function(e,i){return new t.BoundingBoxAttachment(i)},e.prototype.newPathAttachment=function(e,i){return new t.PathAttachment(i)},e.prototype.newPointAttachment=function(e,i){return new t.PointAttachment(i)},e.prototype.newClippingAttachment=function(e,i){return new t.ClippingAttachment(i)},e}();t.AtlasAttachmentLoader=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){!function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(t.BlendMode||(t.BlendMode={}))}(t.core||(t.core={}))}(n||(n={})),function(e){!function(e){var i=function(){function i(e,i,n){if(this.matrix=new t.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,null==e)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=i,this.parent=n,this.setToSetupPose()}return Object.defineProperty(i.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!0,configurable:!0}),i.prototype.isActive=function(){return this.active},i.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},i.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},i.prototype.updateWorldTransformWith=function(t,n,r,o,s,a,h){this.ax=t,this.ay=n,this.arotation=r,this.ascaleX=o,this.ascaleY=s,this.ashearX=a,this.ashearY=h,this.appliedValid=!0;var u=this.parent,l=this.matrix,c=this.skeleton.scaleX,f=i.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==u){var d=this.skeleton,p=r+90+h;return l.a=e.MathUtils.cosDeg(r+a)*o*c,l.c=e.MathUtils.cosDeg(p)*s*c,l.b=e.MathUtils.sinDeg(r+a)*o*f,l.d=e.MathUtils.sinDeg(p)*s*f,l.tx=t*c+d.x,void(l.ty=n*f+d.y)}var g=u.matrix.a,v=u.matrix.c,m=u.matrix.b,y=u.matrix.d;switch(l.tx=g*t+v*n+u.matrix.tx,l.ty=m*t+y*n+u.matrix.ty,this.data.transformMode){case e.TransformMode.Normal:p=r+90+h;var b=e.MathUtils.cosDeg(r+a)*o,_=e.MathUtils.cosDeg(p)*s,w=e.MathUtils.sinDeg(r+a)*o,x=e.MathUtils.sinDeg(p)*s;return l.a=g*b+v*w,l.c=g*_+v*x,l.b=m*b+y*w,void(l.d=m*_+y*x);case e.TransformMode.OnlyTranslation:p=r+90+h;l.a=e.MathUtils.cosDeg(r+a)*o,l.c=e.MathUtils.cosDeg(p)*s,l.b=e.MathUtils.sinDeg(r+a)*o,l.d=e.MathUtils.sinDeg(p)*s;break;case e.TransformMode.NoRotationOrReflection:var E=0;(A=g*g+m*m)>1e-4?(v=m*(A=Math.abs(g*y-v*m)/A),y=g*A,E=Math.atan2(m,g)*e.MathUtils.radDeg):(g=0,m=0,E=90-Math.atan2(y,v)*e.MathUtils.radDeg);var T=r+a-E,S=r+h-E+90;b=e.MathUtils.cosDeg(T)*o,_=e.MathUtils.cosDeg(S)*s,w=e.MathUtils.sinDeg(T)*o,x=e.MathUtils.sinDeg(S)*s;l.a=g*b-v*w,l.c=g*_-v*x,l.b=m*b+y*w,l.d=m*_+y*x;break;case e.TransformMode.NoScale:case e.TransformMode.NoScaleOrReflection:var A,P=e.MathUtils.cosDeg(r),C=e.MathUtils.sinDeg(r),M=(g*P+v*C)/c,O=(m*P+y*C)/f;(A=Math.sqrt(M*M+O*O))>1e-5&&(A=1/A),M*=A,O*=A,A=Math.sqrt(M*M+O*O),this.data.transformMode==e.TransformMode.NoScale&&g*y-v*m<0!=(i.yDown?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(A=-A);var I=Math.PI/2+Math.atan2(O,M),k=Math.cos(I)*A,R=Math.sin(I)*A;b=e.MathUtils.cosDeg(a)*o,_=e.MathUtils.cosDeg(90+h)*s,w=e.MathUtils.sinDeg(a)*o,x=e.MathUtils.sinDeg(90+h)*s;l.a=M*b+k*w,l.c=M*_+k*x,l.b=O*b+R*w,l.d=O*_+R*x}l.a*=c,l.c*=c,l.b*=f,l.d*=f},i.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},i.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*e.MathUtils.radDeg},i.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*e.MathUtils.radDeg},i.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},i.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},i.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent,i=this.matrix;if(null==t)return this.ax=i.tx,this.ay=i.ty,this.arotation=Math.atan2(i.b,i.a)*e.MathUtils.radDeg,this.ascaleX=Math.sqrt(i.a*i.a+i.b*i.b),this.ascaleY=Math.sqrt(i.c*i.c+i.d*i.d),this.ashearX=0,void(this.ashearY=Math.atan2(i.a*i.c+i.b*i.d,i.a*i.d-i.b*i.c)*e.MathUtils.radDeg);var n=t.matrix,r=1/(n.a*n.d-n.b*n.c),o=i.tx-n.tx,s=i.ty-n.ty;this.ax=o*n.d*r-s*n.c*r,this.ay=s*n.a*r-o*n.b*r;var a=r*n.d,h=r*n.a,u=r*n.c,l=r*n.b,c=a*i.a-u*i.b,f=a*i.c-u*i.d,d=h*i.b-l*i.a,p=h*i.d-l*i.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(c*c+d*d),this.ascaleX>1e-4){var g=c*p-f*d;this.ascaleY=g/this.ascaleX,this.ashearY=Math.atan2(c*f+d*p,g)*e.MathUtils.radDeg,this.arotation=Math.atan2(d,c)*e.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(f*f+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,f)*e.MathUtils.radDeg},i.prototype.worldToLocal=function(t){var e=this.matrix,i=e.a,n=e.c,r=e.b,o=e.d,s=1/(i*o-n*r),a=t.x-e.tx,h=t.y-e.ty;return t.x=a*o*s-h*n*s,t.y=h*i*s-a*r*s,t},i.prototype.localToWorld=function(t){var e=this.matrix,i=t.x,n=t.y;return t.x=i*e.a+n*e.c+e.tx,t.y=i*e.b+n*e.d+e.ty,t},i.prototype.worldToLocalRotation=function(t){var i=e.MathUtils.sinDeg(t),n=e.MathUtils.cosDeg(t),r=this.matrix;return Math.atan2(r.a*i-r.b*n,r.d*n-r.c*i)*e.MathUtils.radDeg},i.prototype.localToWorldRotation=function(t){var i=e.MathUtils.sinDeg(t),n=e.MathUtils.cosDeg(t),r=this.matrix;return Math.atan2(n*r.b+i*r.d,n*r.a+i*r.c)*e.MathUtils.radDeg},i.prototype.rotateWorld=function(t){var i=this.matrix,n=i.a,r=i.c,o=i.b,s=i.d,a=e.MathUtils.cosDeg(t),h=e.MathUtils.sinDeg(t);i.a=a*n-h*o,i.c=a*r-h*s,i.b=h*n+a*o,i.d=h*r+a*s,this.appliedValid=!1},i.yDown=!1,i}();e.Bone=i}(e.core||(e.core={}))}(n||(n={})),function(t){!function(t){var e,i=function(i,n,r){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=e.Normal,this.skinRequired=!1,this.color=new t.Color,i<0)throw new Error("index must be >= 0.");if(null==n)throw new Error("name cannot be null.");this.index=i,this.name=n,this.parent=r};t.BoneData=i,function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(e=t.TransformMode||(t.TransformMode={}))}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(t,e,i){this.name=t,this.order=e,this.skinRequired=i};t.ConstraintData=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e};t.Event=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(t){this.name=t};t.EventData=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},e.prototype.apply1=function(e,i,n,r,o,s,a){e.appliedValid||e.updateAppliedTransform();var h=e.parent.matrix,u=1/(h.a*h.d-h.b*h.c),l=i-h.tx,c=n-h.ty,f=(l*h.d-c*h.c)*u-e.ax,d=(c*h.a-l*h.b)*u-e.ay,p=Math.atan2(d,f)*t.MathUtils.radDeg-e.ashearX-e.arotation;e.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);var g=e.ascaleX,v=e.ascaleY;if(r||o){var m=e.data.length*g,y=Math.sqrt(f*f+d*d);if(r&&y<m||o&&y>m&&m>1e-4){var b=(y/m-1)*a+1;g*=b,s&&(v*=b)}}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+p*a,g,v,e.ashearX,e.ashearY)},e.prototype.apply2=function(e,i,n,r,o,s,a,h){if(0!=h){e.appliedValid||e.updateAppliedTransform(),i.appliedValid||i.updateAppliedTransform();var u=e.ax,l=e.ay,c=e.ascaleX,f=c,d=e.ascaleY,p=i.ascaleX,g=e.matrix,v=0,m=0,y=0;c<0?(c=-c,v=180,y=-1):(v=0,y=1),d<0&&(d=-d,y=-y),p<0?(p=-p,m=180):m=0;var b=i.ax,_=0,w=0,x=0,E=g.a,T=g.c,S=g.b,A=g.d,P=Math.abs(c-d)<=1e-4;P?(w=E*b+T*(_=i.ay)+g.tx,x=S*b+A*_+g.ty):(_=0,w=E*b+g.tx,x=S*b+g.ty);var C=e.parent.matrix;E=C.a,T=C.c,S=C.b;var M,O,I=1/(E*(A=C.d)-T*S),k=w-C.tx,R=x-C.ty,L=(k*A-R*T)*I-u,D=(R*E-k*S)*I-l,F=Math.sqrt(L*L+D*D),N=i.data.length*p;if(F<1e-4)return this.apply1(e,n,r,!1,s,!1,h),void i.updateWorldTransformWith(b,_,0,i.ascaleX,i.ascaleY,i.ashearX,i.ashearY);var U=((k=n-C.tx)*A-(R=r-C.ty)*T)*I-u,B=(R*E-k*S)*I-l,j=U*U+B*B;if(0!=a){a*=c*(p+1)/2;var X=Math.sqrt(j),V=X-F-N*c+a;if(V>0){var z=Math.min(1,V/(2*a))-1;j=(U-=(z=(V-a*(1-z*z))/X)*U)*U+(B-=z*B)*B}}t:if(P){var Y=(j-F*F-(N*=c)*N)/(2*F*N);Y<-1?Y=-1:Y>1&&(Y=1,s&&(f*=(Math.sqrt(j)/(F+N)-1)*h+1)),O=Math.acos(Y)*o,E=F+N*Y,T=N*Math.sin(O),M=Math.atan2(B*E-U*T,U*E+B*T)}else{var W=(E=c*N)*E,G=(T=d*N)*T,H=Math.atan2(B,U),q=-2*G*F,Z=G-W;if((A=q*q-4*Z*(S=G*F*F+W*j-W*G))>=0){var K=Math.sqrt(A);q<0&&(K=-K);var J=(K=-(q+K)/2)/Z,Q=S/K,$=Math.abs(J)<Math.abs(Q)?J:Q;if($*$<=j){R=Math.sqrt(j-$*$)*o,M=H-Math.atan2(R,$),O=Math.atan2(R/d,($-F)/c);break t}}var tt=t.MathUtils.PI,et=F-E,it=et*et,nt=0,rt=0,ot=F+E,st=ot*ot,at=0;(S=-E*F/(W-G))>=-1&&S<=1&&(S=Math.acos(S),(A=(k=E*Math.cos(S)+F)*k+(R=T*Math.sin(S))*R)<it&&(tt=S,it=A,et=k,nt=R),A>st&&(rt=S,st=A,ot=k,at=R)),j<=(it+st)/2?(M=H-Math.atan2(nt*o,et),O=tt*o):(M=H-Math.atan2(at*o,ot),O=rt*o)}var ht=Math.atan2(_,b)*y,ut=e.arotation;(M=(M-ht)*t.MathUtils.radDeg+v-ut)>180?M-=360:M<-180&&(M+=360),e.updateWorldTransformWith(u,l,ut+M*h,f,e.ascaleY,0,0),ut=i.arotation,(O=((O+ht)*t.MathUtils.radDeg-i.ashearX)*y+m-ut)>180?O-=360:O<-180&&(O+=360),i.updateWorldTransformWith(b,_,ut+O*h,i.ascaleX,i.ascaleY,i.ashearX,i.ashearY)}else i.updateWorldTransform()},e}();t.IkConstraint=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(t){function e(e){var i=t.call(this,e,0,!1)||this;return i.bones=new Array,i.bendDirection=1,i.compress=!1,i.stretch=!1,i.uniform=!1,i.mix=1,i.softness=0,i}return r(e,t),e}(t.ConstraintData);t.IkConstraintData=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var i=0,n=t.bones.length;i<n;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var i=this.target.getAttachment();if(i instanceof t.PathAttachment){var n=this.rotateMix,r=this.translateMix,o=n>0;if(r>0||o){var s=this.data,a=s.spacingMode,h=a==t.SpacingMode.Length,u=s.rotateMode,l=u==t.RotateMode.Tangent,c=u==t.RotateMode.ChainScale,f=this.bones.length,d=l?f:f+1,p=this.bones,g=t.Utils.setArraySize(this.spaces,d),v=null,m=this.spacing;if(c||h){c&&(v=t.Utils.setArraySize(this.lengths,f));for(var y=0,b=d-1;y<b;){var _=(O=p[y]).data.length;if(_<e.epsilon)c&&(v[y]=0),g[++y]=0;else{var w=_*O.matrix.a,x=_*O.matrix.b,E=Math.sqrt(w*w+x*x);c&&(v[y]=E),g[++y]=(h?_+m:m)*E/_}}}else for(y=1;y<d;y++)g[y]=m;var T=this.computeWorldPositions(i,d,l,s.positionMode==t.PositionMode.Percent,a==t.SpacingMode.Percent),S=T[0],A=T[1],P=s.offsetRotation,C=!1;if(0==P)C=u==t.RotateMode.Chain;else C=!1,P*=(M=this.target.bone.matrix).a*M.d-M.b*M.c>0?t.MathUtils.degRad:-t.MathUtils.degRad;y=0;for(var M=3;y<f;y++,M+=3){var O,I=(O=p[y]).matrix;I.tx+=(S-I.tx)*r,I.ty+=(A-I.ty)*r;var k=(w=T[M])-S,R=(x=T[M+1])-A;if(c){var L=v[y];if(0!=L){var D=(Math.sqrt(k*k+R*R)/L-1)*n+1;I.a*=D,I.b*=D}}if(S=w,A=x,o){var F=I.a,N=I.c,U=I.b,B=I.d,j=0,X=0,V=0;if(j=l?T[M-1]:0==g[y+1]?T[M+2]:Math.atan2(R,k),j-=Math.atan2(U,F),C){X=Math.cos(j),V=Math.sin(j);var z=O.data.length;S+=(z*(X*F-V*U)-k)*n,A+=(z*(V*F+X*U)-R)*n}else j+=P;j>t.MathUtils.PI?j-=t.MathUtils.PI2:j<-t.MathUtils.PI&&(j+=t.MathUtils.PI2),j*=n,X=Math.cos(j),V=Math.sin(j),I.a=X*F-V*U,I.c=X*N-V*B,I.b=V*F+X*U,I.d=V*N+X*B}O.appliedValid=!1}}}},e.prototype.computeWorldPositions=function(i,n,r,o,s){var a=this.target,h=this.position,u=this.spaces,l=t.Utils.setArraySize(this.positions,3*n+2),c=null,f=i.closed,d=i.worldVerticesLength,p=d/6,g=e.NONE;if(!i.constantSpeed){var v=i.lengths,m=v[p-=f?1:2];if(o&&(h*=m),s)for(var y=0;y<n;y++)u[y]*=m;c=t.Utils.setArraySize(this.world,8);y=0;for(var b=0,_=0;y<n;y++,b+=3){var w=h+=W=u[y];if(f)(w%=m)<0&&(w+=m),_=0;else{if(w<0){g!=e.BEFORE&&(g=e.BEFORE,i.computeWorldVertices(a,2,4,c,0,2)),this.addBeforePosition(w,c,0,l,b);continue}if(w>m){g!=e.AFTER&&(g=e.AFTER,i.computeWorldVertices(a,d-6,4,c,0,2)),this.addAfterPosition(w-m,c,0,l,b);continue}}for(;;_++){var x=v[_];if(!(w>x)){if(0==_)w/=x;else w=(w-(Z=v[_-1]))/(x-Z);break}}_!=g&&(g=_,f&&_==p?(i.computeWorldVertices(a,d-4,4,c,0,2),i.computeWorldVertices(a,0,4,c,4,2)):i.computeWorldVertices(a,6*_+2,8,c,0,2)),this.addCurvePosition(w,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],l,b,r||y>0&&0==W)}return l}f?(d+=2,c=t.Utils.setArraySize(this.world,d),i.computeWorldVertices(a,2,d-4,c,0,2),i.computeWorldVertices(a,0,2,c,d-4,2),c[d-2]=c[0],c[d-1]=c[1]):(p--,d-=4,c=t.Utils.setArraySize(this.world,d),i.computeWorldVertices(a,2,d,c,0,2));for(var E=t.Utils.setArraySize(this.curves,p),T=0,S=c[0],A=c[1],P=0,C=0,M=0,O=0,I=0,k=0,R=0,L=0,D=0,F=0,N=0,U=0,B=0,j=0,X=(y=0,2);y<p;y++,X+=6)P=c[X],C=c[X+1],M=c[X+2],O=c[X+3],N=2*(R=.1875*(S-2*P+M))+(D=.09375*(3*(P-M)-S+(I=c[X+4]))),U=2*(L=.1875*(A-2*C+O))+(F=.09375*(3*(C-O)-A+(k=c[X+5]))),B=.75*(P-S)+R+.16666667*D,j=.75*(C-A)+L+.16666667*F,T+=Math.sqrt(B*B+j*j),B+=N,j+=U,N+=D,U+=F,T+=Math.sqrt(B*B+j*j),B+=N,j+=U,T+=Math.sqrt(B*B+j*j),B+=N+D,j+=U+F,T+=Math.sqrt(B*B+j*j),E[y]=T,S=I,A=k;if(o&&(h*=T),s)for(y=0;y<n;y++)u[y]*=T;for(var V=this.segments,z=0,Y=(y=0,b=0,_=0,0);y<n;y++,b+=3){var W;w=h+=W=u[y];if(f)(w%=T)<0&&(w+=T),_=0;else{if(w<0){this.addBeforePosition(w,c,0,l,b);continue}if(w>T){this.addAfterPosition(w-T,c,d-4,l,b);continue}}for(;;_++){var G=E[_];if(!(w>G)){if(0==_)w/=G;else w=(w-(Z=E[_-1]))/(G-Z);break}}if(_!=g){g=_;var H=6*_;for(S=c[H],A=c[H+1],P=c[H+2],C=c[H+3],M=c[H+4],O=c[H+5],N=2*(R=.03*(S-2*P+M))+(D=.006*(3*(P-M)-S+(I=c[H+6]))),U=2*(L=.03*(A-2*C+O))+(F=.006*(3*(C-O)-A+(k=c[H+7]))),B=.3*(P-S)+R+.16666667*D,j=.3*(C-A)+L+.16666667*F,z=Math.sqrt(B*B+j*j),V[0]=z,H=1;H<8;H++)B+=N,j+=U,N+=D,U+=F,z+=Math.sqrt(B*B+j*j),V[H]=z;B+=N,j+=U,z+=Math.sqrt(B*B+j*j),V[8]=z,B+=N+D,j+=U+F,z+=Math.sqrt(B*B+j*j),V[9]=z,Y=0}for(w*=z;;Y++){var q=V[Y];if(!(w>q)){var Z;if(0==Y)w/=q;else w=Y+(w-(Z=V[Y-1]))/(q-Z);break}}this.addCurvePosition(.1*w,S,A,P,C,M,O,I,k,l,b,r||y>0&&0==W)}return l},e.prototype.addBeforePosition=function(t,e,i,n,r){var o=e[i],s=e[i+1],a=e[i+2]-o,h=e[i+3]-s,u=Math.atan2(h,a);n[r]=o+t*Math.cos(u),n[r+1]=s+t*Math.sin(u),n[r+2]=u},e.prototype.addAfterPosition=function(t,e,i,n,r){var o=e[i+2],s=e[i+3],a=o-e[i],h=s-e[i+1],u=Math.atan2(h,a);n[r]=o+t*Math.cos(u),n[r+1]=s+t*Math.sin(u),n[r+2]=u},e.prototype.addCurvePosition=function(t,e,i,n,r,o,s,a,h,u,l,c){(0==t||isNaN(t))&&(t=1e-4);var f=t*t,d=f*t,p=1-t,g=p*p,v=g*p,m=p*t,y=3*m,b=p*y,_=y*t,w=e*v+n*b+o*_+a*d,x=i*v+r*b+s*_+h*d;u[l]=w,u[l+1]=x,c&&(u[l+2]=Math.atan2(x-(i*g+r*m*2+s*f),w-(e*g+n*m*2+o*f)))},e.NONE=-1,e.BEFORE=-2,e.AFTER=-3,e.epsilon=1e-5,e}();t.PathConstraint=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(t){function e(e){var i=t.call(this,e,0,!1)||this;return i.bones=new Array,i}return r(e,t),e}(t.ConstraintData);t.PathConstraintData=e,function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(t.PositionMode||(t.PositionMode={})),function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent"}(t.SpacingMode||(t.SpacingMode={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(t.RotateMode||(t.RotateMode={}))}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(e){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var i=0;i<e.bones.length;i++){var n=e.bones[i],r=void 0;if(null==n.parent)r=new t.Bone(n,this,null);else{var o=this.bones[n.parent.index];r=new t.Bone(n,this,o),o.children.push(r)}this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(i=0;i<e.slots.length;i++){var s=e.slots[i],a=(r=this.bones[s.boneData.index],new t.Slot(s,r));this.slots.push(a),this.drawOrder.push(a)}this.ikConstraints=new Array;for(i=0;i<e.ikConstraints.length;i++){var h=e.ikConstraints[i];this.ikConstraints.push(new t.IkConstraint(h,this))}this.transformConstraints=new Array;for(i=0;i<e.transformConstraints.length;i++){var u=e.transformConstraints[i];this.transformConstraints.push(new t.TransformConstraint(u,this))}this.pathConstraints=new Array;for(i=0;i<e.pathConstraints.length;i++){var l=e.pathConstraints[i];this.pathConstraints.push(new t.PathConstraint(l,this))}this.color=new t.Color(1,1,1,1),this.updateCache()}return e.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,i=t.length;e<i;e++){(r=t[e]).sorted=r.data.skinRequired,r.active=!r.sorted}if(null!=this.skin){var n=this.skin.bones;for(e=0,i=this.skin.bones.length;e<i;e++){var r=this.bones[n[e].index];do{r.sorted=!1,r.active=!0,r=r.parent}while(null!=r)}}var o=this.ikConstraints,s=this.transformConstraints,a=this.pathConstraints,h=o.length,u=s.length,l=a.length,c=h+u+l;t:for(e=0;e<c;e++){for(var f=0;f<h;f++){if((d=o[f]).data.order==e){this.sortIkConstraint(d);continue t}}for(f=0;f<u;f++){if((d=s[f]).data.order==e){this.sortTransformConstraint(d);continue t}}for(f=0;f<l;f++){var d;if((d=a[f]).data.order==e){this.sortPathConstraint(d);continue t}}}for(e=0,i=t.length;e<i;e++)this.sortBone(t[e])},e.prototype.sortIkConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){var i=e.target;this.sortBone(i);var n=e.bones,r=n[0];if(this.sortBone(r),n.length>1){var o=n[n.length-1];this._updateCache.indexOf(o)>-1||this.updateCacheReset.push(o)}this._updateCache.push(e),this.sortReset(r.children),n[n.length-1].sorted=!0}},e.prototype.sortPathConstraint=function(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){var i=e.target,n=i.data.index,r=i.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,n,r),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,r);for(var o=0,s=this.data.skins.length;o<s;o++)this.sortPathConstraintAttachment(this.data.skins[o],n,r);var a=i.getAttachment();a instanceof t.PathAttachment&&this.sortPathConstraintAttachmentWith(a,r);var h=e.bones,u=h.length;for(o=0;o<u;o++)this.sortBone(h[o]);this._updateCache.push(e);for(o=0;o<u;o++)this.sortReset(h[o].children);for(o=0;o<u;o++)h[o].sorted=!0}},e.prototype.sortTransformConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){this.sortBone(e.target);var i=e.bones,n=i.length;if(e.data.local)for(var r=0;r<n;r++){var o=i[r];this.sortBone(o.parent),this._updateCache.indexOf(o)>-1||this.updateCacheReset.push(o)}else for(r=0;r<n;r++)this.sortBone(i[r]);this._updateCache.push(e);for(var s=0;s<n;s++)this.sortReset(i[s].children);for(s=0;s<n;s++)i[s].sorted=!0}},e.prototype.sortPathConstraintAttachment=function(t,e,i){var n=t.attachments[e];if(n)for(var r in n)this.sortPathConstraintAttachmentWith(n[r],i)},e.prototype.sortPathConstraintAttachmentWith=function(e,i){if(e instanceof t.PathAttachment){var n=e.bones;if(null==n)this.sortBone(i);else for(var r=this.bones,o=0;o<n.length;)for(var s=n[o++],a=o+s;o<a;o++){var h=n[o];this.sortBone(r[h])}}},e.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},e.prototype.sortReset=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];n.active&&(n.sorted&&this.sortReset(n.children),n.sorted=!1)}},e.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,i=t.length;e<i;e++){var n=t[e];n.ax=n.x,n.ay=n.y,n.arotation=n.rotation,n.ascaleX=n.scaleX,n.ascaleY=n.scaleY,n.ashearX=n.shearX,n.ashearY=n.shearY,n.appliedValid=!0}var r=this._updateCache;for(e=0,i=r.length;e<i;e++)r[e].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].setToSetupPose();var n=this.ikConstraints;for(e=0,i=n.length;e<i;e++){(a=n[e]).mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}var r=this.transformConstraints;for(e=0,i=r.length;e<i;e++){var o=(a=r[e]).data;a.rotateMix=o.rotateMix,a.translateMix=o.translateMix,a.scaleMix=o.scaleMix,a.shearMix=o.shearMix}var s=this.pathConstraints;for(e=0,i=s.length;e<i;e++){var a;o=(a=s[e]).data;a.position=o.position,a.spacing=o.spacing,a.rotateMix=o.rotateMix,a.translateMix=o.translateMix}},e.prototype.setSlotsToSetupPose=function(){var e=this.slots;t.Utils.arrayCopy(e,0,this.drawOrder,0,e.length);for(var i=0,n=e.length;i<n;i++)e[i].setToSetupPose()},e.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},e.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1},e.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1},e.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},e.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,i=0,n=e.length;i<n;i++){var r=e[i],o=r.data.attachmentName;if(null!=o){var s=t.getAttachment(i,o);null!=s&&r.setAttachment(s)}}this.skin=t,this.updateCache()}},e.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},e.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var i=this.skin.getAttachment(t,e);if(null!=i)return i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},e.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,n=0,r=i.length;n<r;n++){var o=i[n];if(o.data.name==t){var s=null;if(null!=e&&null==(s=this.getAttachment(n,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void o.setAttachment(s)}}throw new Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.getBounds=function(e,i,n){if(void 0===n&&(n=new Array(2)),null==e)throw new Error("offset cannot be null.");if(null==i)throw new Error("size cannot be null.");for(var r=this.drawOrder,o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,u=0,l=r.length;u<l;u++){var c=r[u];if(c.bone.active){var f=0,d=null,p=c.getAttachment();if(p instanceof t.RegionAttachment)f=8,d=t.Utils.setArraySize(n,f,0),p.computeWorldVertices(c.bone,d,0,2);else if(p instanceof t.MeshAttachment){var g=p;f=g.worldVerticesLength,d=t.Utils.setArraySize(n,f,0),g.computeWorldVertices(c,0,f,d,0,2)}if(null!=d)for(var v=0,m=d.length;v<m;v+=2){var y=d[v],b=d[v+1];o=Math.min(o,y),s=Math.min(s,b),a=Math.max(a,y),h=Math.max(h,b)}}}e.set(o,s),i.set(a-o,h-s)},e.prototype.update=function(t){this.time+=t},Object.defineProperty(e.prototype,"flipX",{get:function(){return-1==this.scaleX},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flipY",{get:function(){return-1==this.scaleY},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1},enumerable:!0,configurable:!0}),e.deprecatedWarning1=!1,e}();t.Skeleton=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(n){var r=this.scale,o=new t.SkeletonData;o.name="";var s=new i(n);o.hash=s.readString(),o.version=s.readString(),o.x=s.readFloat(),o.y=s.readFloat(),o.width=s.readFloat(),o.height=s.readFloat();var a=s.readBoolean();a&&(o.fps=s.readFloat(),o.imagesPath=s.readString(),o.audioPath=s.readString());var h=0;h=s.readInt(!0);for(var u=0;u<h;u++)s.strings.push(s.readString());h=s.readInt(!0);for(u=0;u<h;u++){var l=s.readString(),c=0==u?null:o.bones[s.readInt(!0)];(p=new t.BoneData(u,l,c)).rotation=s.readFloat(),p.x=s.readFloat()*r,p.y=s.readFloat()*r,p.scaleX=s.readFloat(),p.scaleY=s.readFloat(),p.shearX=s.readFloat(),p.shearY=s.readFloat(),p.length=s.readFloat()*r,p.transformMode=e.TransformModeValues[s.readInt(!0)],p.skinRequired=s.readBoolean(),a&&t.Color.rgba8888ToColor(p.color,s.readInt32()),o.bones.push(p)}h=s.readInt(!0);for(u=0;u<h;u++){var f=s.readString(),d=o.bones[s.readInt(!0)],p=new t.SlotData(u,f,d);t.Color.rgba8888ToColor(p.color,s.readInt32());var g=s.readInt32();-1!=g&&t.Color.rgb888ToColor(p.darkColor=new t.Color,g),p.attachmentName=s.readStringRef(),p.blendMode=e.BlendModeValues[s.readInt(!0)],o.slots.push(p)}h=s.readInt(!0);u=0;for(var v=void 0;u<h;u++){(p=new t.IkConstraintData(s.readString())).order=s.readInt(!0),p.skinRequired=s.readBoolean(),v=s.readInt(!0);for(var m=0;m<v;m++)p.bones.push(o.bones[s.readInt(!0)]);p.target=o.bones[s.readInt(!0)],p.mix=s.readFloat(),p.softness=s.readFloat()*r,p.bendDirection=s.readByte(),p.compress=s.readBoolean(),p.stretch=s.readBoolean(),p.uniform=s.readBoolean(),o.ikConstraints.push(p)}h=s.readInt(!0);for(u=0,v=void 0;u<h;u++){(p=new t.TransformConstraintData(s.readString())).order=s.readInt(!0),p.skinRequired=s.readBoolean(),v=s.readInt(!0);for(m=0;m<v;m++)p.bones.push(o.bones[s.readInt(!0)]);p.target=o.bones[s.readInt(!0)],p.local=s.readBoolean(),p.relative=s.readBoolean(),p.offsetRotation=s.readFloat(),p.offsetX=s.readFloat()*r,p.offsetY=s.readFloat()*r,p.offsetScaleX=s.readFloat(),p.offsetScaleY=s.readFloat(),p.offsetShearY=s.readFloat(),p.rotateMix=s.readFloat(),p.translateMix=s.readFloat(),p.scaleMix=s.readFloat(),p.shearMix=s.readFloat(),o.transformConstraints.push(p)}h=s.readInt(!0);for(u=0,v=void 0;u<h;u++){(p=new t.PathConstraintData(s.readString())).order=s.readInt(!0),p.skinRequired=s.readBoolean(),v=s.readInt(!0);for(m=0;m<v;m++)p.bones.push(o.bones[s.readInt(!0)]);p.target=o.slots[s.readInt(!0)],p.positionMode=e.PositionModeValues[s.readInt(!0)],p.spacingMode=e.SpacingModeValues[s.readInt(!0)],p.rotateMode=e.RotateModeValues[s.readInt(!0)],p.offsetRotation=s.readFloat(),p.position=s.readFloat(),p.positionMode==t.PositionMode.Fixed&&(p.position*=r),p.spacing=s.readFloat(),p.spacingMode!=t.SpacingMode.Length&&p.spacingMode!=t.SpacingMode.Fixed||(p.spacing*=r),p.rotateMix=s.readFloat(),p.translateMix=s.readFloat(),o.pathConstraints.push(p)}var y=this.readSkin(s,o,!0,a);null!=y&&(o.defaultSkin=y,o.skins.push(y));u=o.skins.length;for(t.Utils.setArraySize(o.skins,h=u+s.readInt(!0));u<h;u++)o.skins[u]=this.readSkin(s,o,!1,a);h=this.linkedMeshes.length;for(u=0;u<h;u++){var b=this.linkedMeshes[u],_=null==b.skin?o.defaultSkin:o.findSkin(b.skin);if(null==_)throw new Error("Skin not found: "+b.skin);var w=_.getAttachment(b.slotIndex,b.parent);if(null==w)throw new Error("Parent mesh not found: "+b.parent);b.mesh.deformAttachment=b.inheritDeform?w:b.mesh,b.mesh.setParentMesh(w)}this.linkedMeshes.length=0,h=s.readInt(!0);for(u=0;u<h;u++){(p=new t.EventData(s.readStringRef())).intValue=s.readInt(!1),p.floatValue=s.readFloat(),p.stringValue=s.readString(),p.audioPath=s.readString(),null!=p.audioPath&&(p.volume=s.readFloat(),p.balance=s.readFloat()),o.events.push(p)}h=s.readInt(!0);for(u=0;u<h;u++)o.animations.push(this.readAnimation(s,s.readString(),o));return o},e.prototype.readSkin=function(e,i,n,r){var o=null,s=0;if(n){if(0==(s=e.readInt(!0)))return null;o=new t.Skin("default")}else{(o=new t.Skin(e.readStringRef())).bones.length=e.readInt(!0);for(var a=0,h=o.bones.length;a<h;a++)o.bones[a]=i.bones[e.readInt(!0)];for(a=0,h=e.readInt(!0);a<h;a++)o.constraints.push(i.ikConstraints[e.readInt(!0)]);for(a=0,h=e.readInt(!0);a<h;a++)o.constraints.push(i.transformConstraints[e.readInt(!0)]);for(a=0,h=e.readInt(!0);a<h;a++)o.constraints.push(i.pathConstraints[e.readInt(!0)]);s=e.readInt(!0)}for(a=0;a<s;a++)for(var u=e.readInt(!0),l=0,c=e.readInt(!0);l<c;l++){var f=e.readStringRef(),d=this.readAttachment(e,i,o,u,f,r);null!=d&&o.setAttachment(u,f,d)}return o},e.prototype.readAttachment=function(i,r,o,s,a,h){var u=this.scale,l=i.readStringRef();null==l&&(l=a);var c=i.readByte();switch(e.AttachmentTypeValues[c]){case t.AttachmentType.Region:var f=i.readStringRef(),d=i.readFloat(),p=i.readFloat(),g=i.readFloat(),v=i.readFloat(),m=i.readFloat(),y=i.readFloat(),b=i.readFloat(),_=i.readInt32();null==f&&(f=l);var w=this.attachmentLoader.newRegionAttachment(o,l,f);return null==w?null:(w.path=f,w.x=p*u,w.y=g*u,w.scaleX=v,w.scaleY=m,w.rotation=d,w.width=y*u,w.height=b*u,t.Color.rgba8888ToColor(w.color,_),w);case t.AttachmentType.BoundingBox:var x=i.readInt(!0),E=this.readVertices(i,x),T=(_=h?i.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(o,l));return null==T?null:(T.worldVerticesLength=x<<1,T.vertices=E.vertices,T.bones=E.bones,h&&t.Color.rgba8888ToColor(T.color,_),T);case t.AttachmentType.Mesh:f=i.readStringRef(),_=i.readInt32(),x=i.readInt(!0);var S=this.readFloatArray(i,x<<1,1),A=this.readShortArray(i),P=(E=this.readVertices(i,x),i.readInt(!0)),C=null;y=0,b=0;return h&&(C=this.readShortArray(i),y=i.readFloat(),b=i.readFloat()),null==f&&(f=l),null==(M=this.attachmentLoader.newMeshAttachment(o,l,f))?null:(M.path=f,t.Color.rgba8888ToColor(M.color,_),M.bones=E.bones,M.vertices=E.vertices,M.worldVerticesLength=x<<1,M.triangles=A,M.regionUVs=new Float32Array(S),M.hullLength=P<<1,h&&(M.edges=C,M.width=y*u,M.height=b*u),M);case t.AttachmentType.LinkedMesh:f=i.readStringRef(),_=i.readInt32();var M,O=i.readStringRef(),I=i.readStringRef(),k=i.readBoolean();y=0,b=0;return h&&(y=i.readFloat(),b=i.readFloat()),null==f&&(f=l),null==(M=this.attachmentLoader.newMeshAttachment(o,l,f))?null:(M.path=f,t.Color.rgba8888ToColor(M.color,_),h&&(M.width=y*u,M.height=b*u),this.linkedMeshes.push(new n(M,O,s,I,k)),M);case t.AttachmentType.Path:for(var R=i.readBoolean(),L=i.readBoolean(),D=(x=i.readInt(!0),E=this.readVertices(i,x),t.Utils.newArray(x/3,0)),F=0,N=D.length;F<N;F++)D[F]=i.readFloat()*u;_=h?i.readInt32():0;return null==(f=this.attachmentLoader.newPathAttachment(o,l))?null:(f.closed=R,f.constantSpeed=L,f.worldVerticesLength=x<<1,f.vertices=E.vertices,f.bones=E.bones,f.lengths=D,h&&t.Color.rgba8888ToColor(f.color,_),f);case t.AttachmentType.Point:d=i.readFloat(),p=i.readFloat(),g=i.readFloat(),_=h?i.readInt32():0;var U=this.attachmentLoader.newPointAttachment(o,l);return null==U?null:(U.x=p*u,U.y=g*u,U.rotation=d,h&&t.Color.rgba8888ToColor(U.color,_),U);case t.AttachmentType.Clipping:var B=i.readInt(!0),j=(x=i.readInt(!0),E=this.readVertices(i,x),_=h?i.readInt32():0,this.attachmentLoader.newClippingAttachment(o,l));return null==j?null:(j.endSlot=r.slots[B],j.worldVerticesLength=x<<1,j.vertices=E.vertices,j.bones=E.bones,h&&t.Color.rgba8888ToColor(j.color,_),j)}return null},e.prototype.readVertices=function(e,i){var n=i<<1,o=new r,s=this.scale;if(!e.readBoolean())return o.vertices=this.readFloatArray(e,n,s),o;for(var a=new Array,h=new Array,u=0;u<i;u++){var l=e.readInt(!0);h.push(l);for(var c=0;c<l;c++)h.push(e.readInt(!0)),a.push(e.readFloat()*s),a.push(e.readFloat()*s),a.push(e.readFloat())}return o.vertices=t.Utils.toFloatArray(a),o.bones=h,o},e.prototype.readFloatArray=function(t,e,i){var n=new Array(e);if(1==i)for(var r=0;r<e;r++)n[r]=t.readFloat();else for(r=0;r<e;r++)n[r]=t.readFloat()*i;return n},e.prototype.readShortArray=function(t){for(var e=t.readInt(!0),i=new Array(e),n=0;n<e;n++)i[n]=t.readShort();return i},e.prototype.readAnimation=function(i,n,r){for(var o=new Array,s=this.scale,a=0,h=new t.Color,u=new t.Color,l=0,c=i.readInt(!0);l<c;l++)for(var f=i.readInt(!0),d=0,p=i.readInt(!0);d<p;d++){var g=i.readByte(),v=i.readInt(!0);switch(g){case e.SLOT_ATTACHMENT:(_=new t.AttachmentTimeline(v)).slotIndex=f;for(var m=0;m<v;m++)_.setFrame(m,i.readFloat(),i.readStringRef());o.push(_),a=Math.max(a,_.frames[v-1]);break;case e.SLOT_COLOR:(_=new t.ColorTimeline(v)).slotIndex=f;for(m=0;m<v;m++){var y=i.readFloat();t.Color.rgba8888ToColor(h,i.readInt32()),_.setFrame(m,y,h.r,h.g,h.b,h.a),m<v-1&&this.readCurve(i,m,_)}o.push(_),a=Math.max(a,_.frames[(v-1)*t.ColorTimeline.ENTRIES]);break;case e.SLOT_TWO_COLOR:(_=new t.TwoColorTimeline(v)).slotIndex=f;for(m=0;m<v;m++){y=i.readFloat();t.Color.rgba8888ToColor(h,i.readInt32()),t.Color.rgb888ToColor(u,i.readInt32()),_.setFrame(m,y,h.r,h.g,h.b,h.a,u.r,u.g,u.b),m<v-1&&this.readCurve(i,m,_)}o.push(_),a=Math.max(a,_.frames[(v-1)*t.TwoColorTimeline.ENTRIES])}}for(l=0,c=i.readInt(!0);l<c;l++){var b=i.readInt(!0);for(d=0,p=i.readInt(!0);d<p;d++){g=i.readByte(),v=i.readInt(!0);switch(g){case e.BONE_ROTATE:(_=new t.RotateTimeline(v)).boneIndex=b;for(m=0;m<v;m++)_.setFrame(m,i.readFloat(),i.readFloat()),m<v-1&&this.readCurve(i,m,_);o.push(_),a=Math.max(a,_.frames[(v-1)*t.RotateTimeline.ENTRIES]);break;case e.BONE_TRANSLATE:case e.BONE_SCALE:case e.BONE_SHEAR:var _=void 0,w=1;g==e.BONE_SCALE?_=new t.ScaleTimeline(v):g==e.BONE_SHEAR?_=new t.ShearTimeline(v):(_=new t.TranslateTimeline(v),w=s),_.boneIndex=b;for(m=0;m<v;m++)_.setFrame(m,i.readFloat(),i.readFloat()*w,i.readFloat()*w),m<v-1&&this.readCurve(i,m,_);o.push(_),a=Math.max(a,_.frames[(v-1)*t.TranslateTimeline.ENTRIES])}}}for(l=0,c=i.readInt(!0);l<c;l++){var x=i.readInt(!0);v=i.readInt(!0);(_=new t.IkConstraintTimeline(v)).ikConstraintIndex=x;for(m=0;m<v;m++)_.setFrame(m,i.readFloat(),i.readFloat(),i.readFloat()*s,i.readByte(),i.readBoolean(),i.readBoolean()),m<v-1&&this.readCurve(i,m,_);o.push(_),a=Math.max(a,_.frames[(v-1)*t.IkConstraintTimeline.ENTRIES])}for(l=0,c=i.readInt(!0);l<c;l++){x=i.readInt(!0),v=i.readInt(!0);(_=new t.TransformConstraintTimeline(v)).transformConstraintIndex=x;for(m=0;m<v;m++)_.setFrame(m,i.readFloat(),i.readFloat(),i.readFloat(),i.readFloat(),i.readFloat()),m<v-1&&this.readCurve(i,m,_);o.push(_),a=Math.max(a,_.frames[(v-1)*t.TransformConstraintTimeline.ENTRIES])}for(l=0,c=i.readInt(!0);l<c;l++){x=i.readInt(!0);var E=r.pathConstraints[x];for(d=0,p=i.readInt(!0);d<p;d++){g=i.readByte(),v=i.readInt(!0);switch(g){case e.PATH_POSITION:case e.PATH_SPACING:_=void 0,w=1;g==e.PATH_SPACING?(_=new t.PathConstraintSpacingTimeline(v),E.spacingMode!=t.SpacingMode.Length&&E.spacingMode!=t.SpacingMode.Fixed||(w=s)):(_=new t.PathConstraintPositionTimeline(v),E.positionMode==t.PositionMode.Fixed&&(w=s)),_.pathConstraintIndex=x;for(m=0;m<v;m++)_.setFrame(m,i.readFloat(),i.readFloat()*w),m<v-1&&this.readCurve(i,m,_);o.push(_),a=Math.max(a,_.frames[(v-1)*t.PathConstraintPositionTimeline.ENTRIES]);break;case e.PATH_MIX:(_=new t.PathConstraintMixTimeline(v)).pathConstraintIndex=x;for(m=0;m<v;m++)_.setFrame(m,i.readFloat(),i.readFloat(),i.readFloat()),m<v-1&&this.readCurve(i,m,_);o.push(_),a=Math.max(a,_.frames[(v-1)*t.PathConstraintMixTimeline.ENTRIES])}}}for(l=0,c=i.readInt(!0);l<c;l++){var T=r.skins[i.readInt(!0)];for(d=0,p=i.readInt(!0);d<p;d++){f=i.readInt(!0);for(var S=0,A=i.readInt(!0);S<A;S++){var P=T.getAttachment(f,i.readStringRef()),C=null!=P.bones,M=P.vertices,O=C?M.length/3*2:M.length;v=i.readInt(!0);(_=new t.DeformTimeline(v)).slotIndex=f,_.attachment=P;for(m=0;m<v;m++){y=i.readFloat();var I=void 0,k=i.readInt(!0);if(0==k)I=C?t.Utils.newFloatArray(O):M;else{I=t.Utils.newFloatArray(O);var R=i.readInt(!0);if(k+=R,1==s)for(var L=R;L<k;L++)I[L]=i.readFloat();else for(L=R;L<k;L++)I[L]=i.readFloat()*s;if(!C){L=0;for(var D=I.length;L<D;L++)I[L]+=M[L]}}_.setFrame(m,y,I),m<v-1&&this.readCurve(i,m,_)}o.push(_),a=Math.max(a,_.frames[v-1])}}}var F=i.readInt(!0);if(F>0){_=new t.DrawOrderTimeline(F);var N=r.slots.length;for(l=0;l<F;l++){y=i.readFloat();var U=i.readInt(!0),B=t.Utils.newArray(N,0);for(d=N-1;d>=0;d--)B[d]=-1;var j=t.Utils.newArray(N-U,0),X=0,V=0;for(d=0;d<U;d++){for(f=i.readInt(!0);X!=f;)j[V++]=X++;B[X+i.readInt(!0)]=X++}for(;X<N;)j[V++]=X++;for(d=N-1;d>=0;d--)-1==B[d]&&(B[d]=j[--V]);_.setFrame(l,y,B)}o.push(_),a=Math.max(a,_.frames[F-1])}var z=i.readInt(!0);if(z>0){for(_=new t.EventTimeline(z),l=0;l<z;l++){y=i.readFloat();var Y=r.events[i.readInt(!0)],W=new t.Event(y,Y);W.intValue=i.readInt(!1),W.floatValue=i.readFloat(),W.stringValue=i.readBoolean()?i.readString():Y.stringValue,null!=W.data.audioPath&&(W.volume=i.readFloat(),W.balance=i.readFloat()),_.setFrame(l,W)}o.push(_),a=Math.max(a,_.frames[z-1])}return new t.Animation(n,o,a)},e.prototype.readCurve=function(t,i,n){switch(t.readByte()){case e.CURVE_STEPPED:n.setStepped(i);break;case e.CURVE_BEZIER:this.setCurve(n,i,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat())}},e.prototype.setCurve=function(t,e,i,n,r,o){t.setCurve(e,i,n,r,o)},e.AttachmentTypeValues=[0,1,2,3,4,5,6],e.TransformModeValues=[t.TransformMode.Normal,t.TransformMode.OnlyTranslation,t.TransformMode.NoRotationOrReflection,t.TransformMode.NoScale,t.TransformMode.NoScaleOrReflection],e.PositionModeValues=[t.PositionMode.Fixed,t.PositionMode.Percent],e.SpacingModeValues=[t.SpacingMode.Length,t.SpacingMode.Fixed,t.SpacingMode.Percent],e.RotateModeValues=[t.RotateMode.Tangent,t.RotateMode.Chain,t.RotateMode.ChainScale],e.BlendModeValues=[t.BlendMode.Normal,t.BlendMode.Additive,t.BlendMode.Multiply,t.BlendMode.Screen],e.BONE_ROTATE=0,e.BONE_TRANSLATE=1,e.BONE_SCALE=2,e.BONE_SHEAR=3,e.SLOT_ATTACHMENT=0,e.SLOT_COLOR=1,e.SLOT_TWO_COLOR=2,e.PATH_POSITION=0,e.PATH_SPACING=1,e.PATH_MIX=2,e.CURVE_LINEAR=0,e.CURVE_STEPPED=1,e.CURVE_BEZIER=2,e}();t.SkeletonBinary=e;var i=function(){function t(t,e,i,n){void 0===e&&(e=new Array),void 0===i&&(i=0),void 0===n&&(n=new DataView(t.buffer)),this.strings=e,this.index=i,this.buffer=n}return t.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},t.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},t.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},t.prototype.readInt=function(t){var e=this.readByte(),i=127&e;return 0!=(128&e)&&(i|=(127&(e=this.readByte()))<<7,0!=(128&e)&&(i|=(127&(e=this.readByte()))<<14,0!=(128&e)&&(i|=(127&(e=this.readByte()))<<21,0!=(128&e)&&(i|=(127&(e=this.readByte()))<<28)))),t?i:i>>>1^-(1&i)},t.prototype.readStringRef=function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]},t.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",i=0;i<t;){var n=this.readByte();switch(n>>4){case 12:case 13:e+=String.fromCharCode((31&n)<<6|63&this.readByte()),i+=2;break;case 14:e+=String.fromCharCode((15&n)<<12|(63&this.readByte())<<6|63&this.readByte()),i+=3;break;default:e+=String.fromCharCode(n),i++}}return e},t.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},t.prototype.readBoolean=function(){return 0!=this.readByte()},t}(),n=function(t,e,i,n,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=n,this.inheritDeform=r},r=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.bones=t,this.vertices=e}}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new t.Pool((function(){return t.Utils.newFloatArray(16)}))}return e.prototype.update=function(e,i){if(null==e)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,r=this.polygons,o=this.polygonPool,s=e.slots,a=s.length;n.length=0,o.freeAll(r),r.length=0;for(var h=0;h<a;h++){var u=s[h];if(u.bone.active){var l=u.getAttachment();if(l instanceof t.BoundingBoxAttachment){var c=l;n.push(c);var f=o.obtain();f.length!=c.worldVerticesLength&&(f=t.Utils.newFloatArray(c.worldVerticesLength)),r.push(f),c.computeWorldVertices(u,0,c.worldVerticesLength,f,0,2)}}}i?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},e.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=this.polygons,o=0,s=r.length;o<s;o++)for(var a=r[o],h=a,u=0,l=a.length;u<l;u+=2){var c=h[u],f=h[u+1];t=Math.min(t,c),e=Math.min(e,f),i=Math.max(i,c),n=Math.max(n,f)}this.minX=t,this.minY=e,this.maxX=i,this.maxY=n},e.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},e.prototype.aabbIntersectsSegment=function(t,e,i,n){var r=this.minX,o=this.minY,s=this.maxX,a=this.maxY;if(t<=r&&i<=r||e<=o&&n<=o||t>=s&&i>=s||e>=a&&n>=a)return!1;var h=(n-e)/(i-t),u=h*(r-t)+e;if(u>o&&u<a)return!0;if((u=h*(s-t)+e)>o&&u<a)return!0;var l=(o-e)/h+t;return l>r&&l<s||(l=(a-e)/h+t)>r&&l<s},e.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},e.prototype.containsPoint=function(t,e){for(var i=this.polygons,n=0,r=i.length;n<r;n++)if(this.containsPointPolygon(i[n],t,e))return this.boundingBoxes[n];return null},e.prototype.containsPointPolygon=function(t,e,i){for(var n=t,r=t.length,o=r-2,s=!1,a=0;a<r;a+=2){var h=n[a+1],u=n[o+1];if(h<i&&u>=i||u<i&&h>=i){var l=n[a];l+(i-h)/(u-h)*(n[o]-l)<e&&(s=!s)}o=a}return s},e.prototype.intersectsSegment=function(t,e,i,n){for(var r=this.polygons,o=0,s=r.length;o<s;o++)if(this.intersectsSegmentPolygon(r[o],t,e,i,n))return this.boundingBoxes[o];return null},e.prototype.intersectsSegmentPolygon=function(t,e,i,n,r){for(var o=t,s=t.length,a=e-n,h=i-r,u=e*r-i*n,l=o[s-2],c=o[s-1],f=0;f<s;f+=2){var d=o[f],p=o[f+1],g=l*p-c*d,v=l-d,m=c-p,y=a*m-h*v,b=(u*v-a*g)/y;if((b>=l&&b<=d||b>=d&&b<=l)&&(b>=e&&b<=n||b>=n&&b<=e)){var _=(u*m-h*g)/y;if((_>=c&&_<=p||_>=p&&_<=c)&&(_>=i&&_<=r||_>=r&&_<=i))return!0}l=d,c=p}return!1},e.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},e}();t.SkeletonBounds=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(){this.triangulator=new t.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return e.prototype.clipStart=function(i,n){if(null!=this.clipAttachment)return 0;this.clipAttachment=n;var r=n.worldVerticesLength,o=t.Utils.setArraySize(this.clippingPolygon,r);n.computeWorldVertices(i,0,r,o,0,2);var s=this.clippingPolygon;e.makeClockwise(s);for(var a=this.clippingPolygons=this.triangulator.decompose(s,this.triangulator.triangulate(s)),h=0,u=a.length;h<u;h++){var l=a[h];e.makeClockwise(l),l.push(l[0]),l.push(l[1])}return a.length},e.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},e.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},e.prototype.isClipping=function(){return null!=this.clipAttachment},e.prototype.clipTriangles=function(e,i,n,r,o,s,a,h){var u=this.clipOutput,l=this.clippedVertices,c=this.clippedTriangles,f=this.clippingPolygons,d=this.clippingPolygons.length,p=h?12:8,g=0;l.length=0,c.length=0;t:for(var v=0;v<r;v+=3)for(var m=n[v]<<1,y=e[m],b=e[m+1],_=o[m],w=o[m+1],x=e[m=n[v+1]<<1],E=e[m+1],T=o[m],S=o[m+1],A=e[m=n[v+2]<<1],P=e[m+1],C=o[m],M=o[m+1],O=0;O<d;O++){var I=l.length;if(!this.clip(y,b,x,E,A,P,f[O],u)){(j=t.Utils.setArraySize(l,I+3*p))[I]=y,j[I+1]=b,j[I+2]=s.r,j[I+3]=s.g,j[I+4]=s.b,j[I+5]=s.a,h?(j[I+6]=_,j[I+7]=w,j[I+8]=a.r,j[I+9]=a.g,j[I+10]=a.b,j[I+11]=a.a,j[I+12]=x,j[I+13]=E,j[I+14]=s.r,j[I+15]=s.g,j[I+16]=s.b,j[I+17]=s.a,j[I+18]=T,j[I+19]=S,j[I+20]=a.r,j[I+21]=a.g,j[I+22]=a.b,j[I+23]=a.a,j[I+24]=A,j[I+25]=P,j[I+26]=s.r,j[I+27]=s.g,j[I+28]=s.b,j[I+29]=s.a,j[I+30]=C,j[I+31]=M,j[I+32]=a.r,j[I+33]=a.g,j[I+34]=a.b,j[I+35]=a.a):(j[I+6]=_,j[I+7]=w,j[I+8]=x,j[I+9]=E,j[I+10]=s.r,j[I+11]=s.g,j[I+12]=s.b,j[I+13]=s.a,j[I+14]=T,j[I+15]=S,j[I+16]=A,j[I+17]=P,j[I+18]=s.r,j[I+19]=s.g,j[I+20]=s.b,j[I+21]=s.a,j[I+22]=C,j[I+23]=M),I=c.length,(Z=t.Utils.setArraySize(c,I+3))[I]=g,Z[I+1]=g+1,Z[I+2]=g+2,g+=3;continue t}var k=u.length;if(0!=k){for(var R=E-P,L=A-x,D=y-A,F=P-b,N=1/(R*D+L*(b-P)),U=k>>1,B=this.clipOutput,j=t.Utils.setArraySize(l,I+U*p),X=0;X<k;X+=2){var V=B[X],z=B[X+1];j[I]=V,j[I+1]=z,j[I+2]=s.r,j[I+3]=s.g,j[I+4]=s.b,j[I+5]=s.a;var Y=V-A,W=z-P,G=(R*Y+L*W)*N,H=(F*Y+D*W)*N,q=1-G-H;j[I+6]=_*G+T*H+C*q,j[I+7]=w*G+S*H+M*q,h&&(j[I+8]=a.r,j[I+9]=a.g,j[I+10]=a.b,j[I+11]=a.a),I+=p}I=c.length;var Z=t.Utils.setArraySize(c,I+3*(U-2));U--;for(X=1;X<U;X++)Z[I]=g,Z[I+1]=g+X,Z[I+2]=g+X+1,I+=3;g+=U+1}}},e.prototype.clip=function(t,e,i,n,r,o,s,a){var h=a,u=!1,l=null;s.length%4>=2?(l=a,a=this.scratch):l=this.scratch,l.length=0,l.push(t),l.push(e),l.push(i),l.push(n),l.push(r),l.push(o),l.push(t),l.push(e),a.length=0;for(var c=s,f=s.length-4,d=0;;d+=2){for(var p=c[d],g=c[d+1],v=c[d+2],m=c[d+3],y=p-v,b=g-m,_=l,w=l.length-2,x=a.length,E=0;E<w;E+=2){var T=_[E],S=_[E+1],A=_[E+2],P=_[E+3],C=y*(P-m)-b*(A-v)>0;if(y*(S-m)-b*(T-v)>0){if(C){a.push(A),a.push(P);continue}var M=((I=A-T)*(g-S)-(O=P-S)*(p-T))/(O*(v-p)-I*(m-g));a.push(p+(v-p)*M),a.push(g+(m-g)*M)}else if(C){var O,I;M=((I=A-T)*(g-S)-(O=P-S)*(p-T))/(O*(v-p)-I*(m-g));a.push(p+(v-p)*M),a.push(g+(m-g)*M),a.push(A),a.push(P)}u=!0}if(x==a.length)return h.length=0,!0;if(a.push(a[0]),a.push(a[1]),d==f)break;var k=a;(a=l).length=0,l=k}if(h!=a){h.length=0;d=0;for(var R=a.length-2;d<R;d++)h[d]=a[d]}else h.length=h.length-2;return u},e.makeClockwise=function(t){for(var e=t,i=t.length,n=e[i-2]*e[1]-e[0]*e[i-1],r=0,o=0,s=0,a=0,h=i-3;a<h;a+=2)r=e[a],o=e[a+1],s=e[a+2],n+=r*e[a+3]-s*o;if(!(n<0)){a=0;var u=i-2;for(h=i>>1;a<h;a+=2){var l=e[a],c=e[a+1],f=u-a;e[a]=e[f],e[a+1]=e[f+1],e[f]=l,e[f+1]=c}}},e}();t.SkeletonClipping=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t}();t.SkeletonData=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){t.FAIL_ON_NON_EXISTING_SKIN=!1;var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(i){var n=this.scale,r=new t.SkeletonData,o="string"==typeof i?JSON.parse(i):i,s=o.skeleton;if(null!=s){if(r.hash=s.hash,r.version=s.spine,"3.8"!==s.spine.substr(0,3)){var a="PixiJS Spine plugin supports only format for Spine 3.8. Your model has version "+s.spine+". Please look in pixi-spine repository README for another branch.";console.error(a)}r.x=s.x,r.y=s.y,r.width=s.width,r.height=s.height,r.fps=s.fps,r.imagesPath=s.images}if(o.bones)for(var h=0;h<o.bones.length;h++){var u=o.bones[h],l=null,c=this.getValue(u,"parent",null);if(null!=c&&null==(l=r.findBone(c)))throw new Error("Parent bone not found: "+c);(g=new t.BoneData(r.bones.length,u.name,l)).length=this.getValue(u,"length",0)*n,g.x=this.getValue(u,"x",0)*n,g.y=this.getValue(u,"y",0)*n,g.rotation=this.getValue(u,"rotation",0),g.scaleX=this.getValue(u,"scaleX",1),g.scaleY=this.getValue(u,"scaleY",1),g.shearX=this.getValue(u,"shearX",0),g.shearY=this.getValue(u,"shearY",0),g.transformMode=e.transformModeFromString(this.getValue(u,"transform","normal")),g.skinRequired=this.getValue(u,"skin",!1),r.bones.push(g)}if(o.slots)for(h=0;h<o.slots.length;h++){var f=(P=o.slots[h]).name,d=P.bone,p=r.findBone(d);if(null==p)throw new Error("Slot bone not found: "+d);var g=new t.SlotData(r.slots.length,f,p),v=this.getValue(P,"color",null);null!=v&&g.color.setFromString(v);var m=this.getValue(P,"dark",null);null!=m&&(g.darkColor=new t.Color(1,1,1,1),g.darkColor.setFromString(m)),g.attachmentName=this.getValue(P,"attachment",null),g.blendMode=e.blendModeFromString(this.getValue(P,"blend","normal")),r.slots.push(g)}if(o.ik)for(h=0;h<o.ik.length;h++){var y=o.ik[h];(g=new t.IkConstraintData(y.name)).order=this.getValue(y,"order",0),g.skinRequired=this.getValue(y,"skin",!1);for(var b=0;b<y.bones.length;b++){d=y.bones[b];if(null==(T=r.findBone(d)))throw new Error("IK bone not found: "+d);g.bones.push(T)}var _=y.target;if(g.target=r.findBone(_),null==g.target)throw new Error("IK target bone not found: "+_);g.mix=this.getValue(y,"mix",1),g.softness=this.getValue(y,"softness",0)*n,g.bendDirection=this.getValue(y,"bendPositive",!0)?1:-1,g.compress=this.getValue(y,"compress",!1),g.stretch=this.getValue(y,"stretch",!1),g.uniform=this.getValue(y,"uniform",!1),r.ikConstraints.push(g)}if(o.transform)for(h=0;h<o.transform.length;h++){y=o.transform[h];(g=new t.TransformConstraintData(y.name)).order=this.getValue(y,"order",0),g.skinRequired=this.getValue(y,"skin",!1);for(b=0;b<y.bones.length;b++){d=y.bones[b];if(null==(T=r.findBone(d)))throw new Error("Transform constraint bone not found: "+d);g.bones.push(T)}_=y.target;if(g.target=r.findBone(_),null==g.target)throw new Error("Transform constraint target bone not found: "+_);g.local=this.getValue(y,"local",!1),g.relative=this.getValue(y,"relative",!1),g.offsetRotation=this.getValue(y,"rotation",0),g.offsetX=this.getValue(y,"x",0)*n,g.offsetY=this.getValue(y,"y",0)*n,g.offsetScaleX=this.getValue(y,"scaleX",0),g.offsetScaleY=this.getValue(y,"scaleY",0),g.offsetShearY=this.getValue(y,"shearY",0),g.rotateMix=this.getValue(y,"rotateMix",1),g.translateMix=this.getValue(y,"translateMix",1),g.scaleMix=this.getValue(y,"scaleMix",1),g.shearMix=this.getValue(y,"shearMix",1),r.transformConstraints.push(g)}if(o.path)for(h=0;h<o.path.length;h++){y=o.path[h];(g=new t.PathConstraintData(y.name)).order=this.getValue(y,"order",0),g.skinRequired=this.getValue(y,"skin",!1);for(b=0;b<y.bones.length;b++){d=y.bones[b];if(null==(T=r.findBone(d)))throw new Error("Transform constraint bone not found: "+d);g.bones.push(T)}_=y.target;if(g.target=r.findSlot(_),null==g.target)throw new Error("Path target slot not found: "+_);g.positionMode=e.positionModeFromString(this.getValue(y,"positionMode","percent")),g.spacingMode=e.spacingModeFromString(this.getValue(y,"spacingMode","length")),g.rotateMode=e.rotateModeFromString(this.getValue(y,"rotateMode","tangent")),g.offsetRotation=this.getValue(y,"rotation",0),g.position=this.getValue(y,"position",0),g.positionMode==t.PositionMode.Fixed&&(g.position*=n),g.spacing=this.getValue(y,"spacing",0),g.spacingMode!=t.SpacingMode.Length&&g.spacingMode!=t.SpacingMode.Fixed||(g.spacing*=n),g.rotateMix=this.getValue(y,"rotateMix",1),g.translateMix=this.getValue(y,"translateMix",1),r.pathConstraints.push(g)}if(o.skins)for(h=0;h<o.skins.length;h++){var w=o.skins[h],x=new t.Skin(w.name);if(w.bones)for(var E=0;E<w.bones.length;E++){var T;if(null==(T=r.findBone(w.bones[E])))throw new Error("Skin bone not found: "+w.bones[h]);x.bones.push(T)}if(w.ik)for(E=0;E<w.ik.length;E++){if(null==(S=r.findIkConstraint(w.ik[E])))throw new Error("Skin IK constraint not found: "+w.ik[h]);x.constraints.push(S)}if(w.transform)for(E=0;E<w.transform.length;E++){if(null==(S=r.findTransformConstraint(w.transform[E])))throw new Error("Skin transform constraint not found: "+w.transform[h]);x.constraints.push(S)}if(w.path)for(E=0;E<w.path.length;E++){var S;if(null==(S=r.findPathConstraint(w.path[E])))throw new Error("Skin path constraint not found: "+w.path[h]);x.constraints.push(S)}for(var f in w.attachments){var A=r.findSlot(f);if(null==A)throw new Error("Slot not found: "+f);var P=w.attachments[f];for(var C in P){var M=this.readAttachment(P[C],x,A.index,C,r);null!=M&&x.setAttachment(A.index,C,M)}}r.skins.push(x),"default"==x.name&&(r.defaultSkin=x)}h=0;for(var O=this.linkedMeshes.length;h<O;h++){var I=this.linkedMeshes[h];if(null==(x=null==I.skin?r.defaultSkin:r.findSkin(I.skin)))throw new Error("Skin not found: "+I.skin);var k=x.getAttachment(I.slotIndex,I.parent);if(null==k)throw new Error("Parent mesh not found: "+I.parent);I.mesh.deformAttachment=I.inheritDeform?k:I.mesh,I.mesh.setParentMesh(k)}if(this.linkedMeshes.length=0,o.events)for(var R in o.events){var L=o.events[R];(g=new t.EventData(R)).intValue=this.getValue(L,"int",0),g.floatValue=this.getValue(L,"float",0),g.stringValue=this.getValue(L,"string",""),g.audioPath=this.getValue(L,"audio",null),null!=g.audioPath&&(g.volume=this.getValue(L,"volume",1),g.balance=this.getValue(L,"balance",0)),r.events.push(g)}if(o.animations)for(var D in o.animations){var F=o.animations[D];this.readAnimation(F,D,r)}return r},e.prototype.readAttachment=function(e,n,r,o,s){var a=this.scale;switch(o=this.getValue(e,"name",o),this.getValue(e,"type","region")){case"region":var h=this.getValue(e,"path",o),u=this.attachmentLoader.newRegionAttachment(n,o,h);return null==u?null:(u.path=h,u.x=this.getValue(e,"x",0)*a,u.y=this.getValue(e,"y",0)*a,u.scaleX=this.getValue(e,"scaleX",1),u.scaleY=this.getValue(e,"scaleY",1),u.rotation=this.getValue(e,"rotation",0),u.width=e.width*a,u.height=e.height*a,null!=(w=this.getValue(e,"color",null))&&u.color.setFromString(w),u);case"boundingbox":var l=this.attachmentLoader.newBoundingBoxAttachment(n,o);return null==l?null:(this.readVertices(e,l,e.vertexCount<<1),null!=(w=this.getValue(e,"color",null))&&l.color.setFromString(w),l);case"mesh":case"linkedmesh":h=this.getValue(e,"path",o);var c=this.attachmentLoader.newMeshAttachment(n,o,h);if(null==c)return null;c.path=h,null!=(w=this.getValue(e,"color",null))&&c.color.setFromString(w),c.width=this.getValue(e,"width",0)*a,c.height=this.getValue(e,"height",0)*a;var f=this.getValue(e,"parent",null);if(null!=f)return this.linkedMeshes.push(new i(c,this.getValue(e,"skin",null),r,f,this.getValue(e,"deform",!0))),c;var d=e.uvs;return this.readVertices(e,c,d.length),c.triangles=e.triangles,c.regionUVs=new Float32Array(d),c.edges=this.getValue(e,"edges",null),c.hullLength=2*this.getValue(e,"hull",0),c;case"path":if(null==(h=this.attachmentLoader.newPathAttachment(n,o)))return null;h.closed=this.getValue(e,"closed",!1),h.constantSpeed=this.getValue(e,"constantSpeed",!0);var p=e.vertexCount;this.readVertices(e,h,p<<1);for(var g=t.Utils.newArray(p/3,0),v=0;v<e.lengths.length;v++)g[v]=e.lengths[v]*a;return h.lengths=g,null!=(w=this.getValue(e,"color",null))&&h.color.setFromString(w),h;case"point":var m=this.attachmentLoader.newPointAttachment(n,o);return null==m?null:(m.x=this.getValue(e,"x",0)*a,m.y=this.getValue(e,"y",0)*a,m.rotation=this.getValue(e,"rotation",0),null!=(w=this.getValue(e,"color",null))&&m.color.setFromString(w),m);case"clipping":var y=this.attachmentLoader.newClippingAttachment(n,o);if(null==y)return null;var b=this.getValue(e,"end",null);if(null!=b){var _=s.findSlot(b);if(null==_)throw new Error("Clipping end slot not found: "+b);y.endSlot=_}var w;p=e.vertexCount;return this.readVertices(e,y,p<<1),null!=(w=this.getValue(e,"color",null))&&y.color.setFromString(w),y}return null},e.prototype.readVertices=function(e,i,n){var r=this.scale;i.worldVerticesLength=n;var o=e.vertices;if(n!=o.length){var s=new Array,a=new Array;for(c=0,f=o.length;c<f;){var h=o[c++];a.push(h);for(var u=c+4*h;c<u;c+=4)a.push(o[c]),s.push(o[c+1]*r),s.push(o[c+2]*r),s.push(o[c+3])}i.bones=a,i.vertices=t.Utils.toFloatArray(s)}else{var l=t.Utils.toFloatArray(o);if(1!=r)for(var c=0,f=o.length;c<f;c++)l[c]*=r;i.vertices=l}},e.prototype.readAnimation=function(e,i,n){var r=this.scale,o=new Array,s=0;if(e.slots)for(var a in e.slots){var h=e.slots[a];if(-1==(K=n.findSlotIndex(a)))throw new Error("Slot not found: "+a);for(var u in h){var l=h[u];if("attachment"==u){(_=new t.AttachmentTimeline(l.length)).slotIndex=K;for(var c=0,f=0;f<l.length;f++){var d=l[f];_.setFrame(c++,this.getValue(d,"time",0),d.name)}o.push(_),s=Math.max(s,_.frames[_.getFrameCount()-1])}else if("color"==u){(_=new t.ColorTimeline(l.length)).slotIndex=K;for(c=0,f=0;f<l.length;f++){d=l[f];var p=new t.Color;p.setFromString(d.color||"ffffffff"),_.setFrame(c,this.getValue(d,"time",0),p.r,p.g,p.b,p.a),this.readCurve(d,_,c),c++}o.push(_),s=Math.max(s,_.frames[(_.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else{if("twoColor"!=u)throw new Error("Invalid timeline type for a slot: "+u+" ("+a+")");(_=new t.TwoColorTimeline(l.length)).slotIndex=K;for(c=0,f=0;f<l.length;f++){d=l[f];var g=new t.Color,v=new t.Color;g.setFromString(d.light),v.setFromString(d.dark),_.setFrame(c,this.getValue(d,"time",0),g.r,g.g,g.b,g.a,v.r,v.g,v.b),this.readCurve(d,_,c),c++}o.push(_),s=Math.max(s,_.frames[(_.getFrameCount()-1)*t.TwoColorTimeline.ENTRIES])}}}if(e.bones)for(var m in e.bones){var y=e.bones[m],b=n.findBoneIndex(m);if(-1==b)throw new Error("Bone not found: "+m);for(var u in y){l=y[u];if("rotate"===u){(_=new t.RotateTimeline(l.length)).boneIndex=b;for(c=0,f=0;f<l.length;f++){d=l[f];_.setFrame(c,this.getValue(d,"time",0),this.getValue(d,"angle",0)),this.readCurve(d,_,c),c++}o.push(_),s=Math.max(s,_.frames[(_.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else{if("translate"!==u&&"scale"!==u&&"shear"!==u)throw new Error("Invalid timeline type for a bone: "+u+" ("+m+")");var _=null,w=1,x=0;"scale"===u?(_=new t.ScaleTimeline(l.length),x=1):"shear"===u?_=new t.ShearTimeline(l.length):(_=new t.TranslateTimeline(l.length),w=r),_.boneIndex=b;for(c=0,f=0;f<l.length;f++){d=l[f];var E=this.getValue(d,"x",x),T=this.getValue(d,"y",x);_.setFrame(c,this.getValue(d,"time",0),E*w,T*w),this.readCurve(d,_,c),c++}o.push(_),s=Math.max(s,_.frames[(_.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}}}if(e.ik)for(var S in e.ik){var A=e.ik[S],P=n.findIkConstraint(S);(_=new t.IkConstraintTimeline(A.length)).ikConstraintIndex=n.ikConstraints.indexOf(P);for(c=0,f=0;f<A.length;f++){d=A[f];_.setFrame(c,this.getValue(d,"time",0),this.getValue(d,"mix",1),this.getValue(d,"softness",0)*r,this.getValue(d,"bendPositive",!0)?1:-1,this.getValue(d,"compress",!1),this.getValue(d,"stretch",!1)),this.readCurve(d,_,c),c++}o.push(_),s=Math.max(s,_.frames[(_.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}if(e.transform)for(var S in e.transform){A=e.transform[S],P=n.findTransformConstraint(S);(_=new t.TransformConstraintTimeline(A.length)).transformConstraintIndex=n.transformConstraints.indexOf(P);for(c=0,f=0;f<A.length;f++){d=A[f];_.setFrame(c,this.getValue(d,"time",0),this.getValue(d,"rotateMix",1),this.getValue(d,"translateMix",1),this.getValue(d,"scaleMix",1),this.getValue(d,"shearMix",1)),this.readCurve(d,_,c),c++}o.push(_),s=Math.max(s,_.frames[(_.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}if(e.path)for(var S in e.path){A=e.path[S];var C=n.findPathConstraintIndex(S);if(-1==C)throw new Error("Path constraint not found: "+S);var M=n.pathConstraints[C];for(var u in A){l=A[u];if("position"===u||"spacing"===u){_=null,w=1;"spacing"===u?(_=new t.PathConstraintSpacingTimeline(l.length),M.spacingMode!=t.SpacingMode.Length&&M.spacingMode!=t.SpacingMode.Fixed||(w=r)):(_=new t.PathConstraintPositionTimeline(l.length),M.positionMode==t.PositionMode.Fixed&&(w=r)),_.pathConstraintIndex=C;for(c=0,f=0;f<l.length;f++){d=l[f];_.setFrame(c,this.getValue(d,"time",0),this.getValue(d,u,0)*w),this.readCurve(d,_,c),c++}o.push(_),s=Math.max(s,_.frames[(_.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===u){(_=new t.PathConstraintMixTimeline(l.length)).pathConstraintIndex=C;for(c=0,f=0;f<l.length;f++){d=l[f];_.setFrame(c,this.getValue(d,"time",0),this.getValue(d,"rotateMix",1),this.getValue(d,"translateMix",1)),this.readCurve(d,_,c),c++}o.push(_),s=Math.max(s,_.frames[(_.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}}if(e.deform)for(var O in e.deform){var I=e.deform[O],k=n.findSkin(O);if(null!=k)for(var a in I){h=I[a];if(-1==(K=n.findSlotIndex(a)))throw new Error("Slot not found: "+h.name);for(var u in h){l=h[u];var R=k.getAttachment(K,u);if(null==R)throw new Error("Deform attachment not found: "+l.name);var L=null!=R.bones,D=R.vertices,F=L?D.length/3*2:D.length;(_=new t.DeformTimeline(l.length)).slotIndex=K,_.attachment=R;c=0;for(var N=0;N<l.length;N++){d=l[N];var U=void 0,B=this.getValue(d,"vertices",null);if(null==B)U=L?t.Utils.newFloatArray(F):D;else{U=t.Utils.newFloatArray(F);var j=this.getValue(d,"offset",0);if(t.Utils.arrayCopy(B,0,U,j,B.length),1!=r)for(var X=(f=j)+B.length;f<X;f++)U[f]*=r;if(!L)for(f=0;f<F;f++)U[f]+=D[f]}_.setFrame(c,this.getValue(d,"time",0),U),this.readCurve(d,_,c),c++}o.push(_),s=Math.max(s,_.frames[_.getFrameCount()-1])}}else if(t.FAIL_ON_NON_EXISTING_SKIN)throw new Error("Skin not found: "+O)}var V=e.drawOrder;if(null==V&&(V=e.draworder),null!=V){_=new t.DrawOrderTimeline(V.length);var z=n.slots.length;for(c=0,N=0;N<V.length;N++){var Y=V[N],W=null,G=this.getValue(Y,"offsets",null);if(null!=G){W=t.Utils.newArray(z,-1);var H=t.Utils.newArray(z-G.length,0),q=0,Z=0;for(f=0;f<G.length;f++){var K,J=G[f];if(-1==(K=n.findSlotIndex(J.slot)))throw new Error("Slot not found: "+J.slot);for(;q!=K;)H[Z++]=q++;W[q+J.offset]=q++}for(;q<z;)H[Z++]=q++;for(f=z-1;f>=0;f--)-1==W[f]&&(W[f]=H[--Z])}_.setFrame(c++,this.getValue(Y,"time",0),W)}o.push(_),s=Math.max(s,_.frames[_.getFrameCount()-1])}if(e.events){for(_=new t.EventTimeline(e.events.length),c=0,f=0;f<e.events.length;f++){var Q=e.events[f],$=n.findEvent(Q.name);if(null==$)throw new Error("Event not found: "+Q.name);var tt=new t.Event(t.Utils.toSinglePrecision(this.getValue(Q,"time",0)),$);tt.intValue=this.getValue(Q,"int",$.intValue),tt.floatValue=this.getValue(Q,"float",$.floatValue),tt.stringValue=this.getValue(Q,"string",$.stringValue),null!=tt.data.audioPath&&(tt.volume=this.getValue(Q,"volume",1),tt.balance=this.getValue(Q,"balance",0)),_.setFrame(c++,tt)}o.push(_),s=Math.max(s,_.frames[_.getFrameCount()-1])}if(isNaN(s))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new t.Animation(i,o,s))},e.prototype.readCurve=function(t,e,i){if(t.hasOwnProperty("curve"))if("stepped"===t.curve)e.setStepped(i);else{var n=t.curve;e.setCurve(i,n,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},e.prototype.getValue=function(t,e,i){return void 0!==t[e]?t[e]:i},e.blendModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.BlendMode.Normal;if("additive"==e)return t.BlendMode.Additive;if("multiply"==e)return t.BlendMode.Multiply;if("screen"==e)return t.BlendMode.Screen;throw new Error("Unknown blend mode: "+e)},e.positionModeFromString=function(e){if("fixed"==(e=e.toLowerCase()))return t.PositionMode.Fixed;if("percent"==e)return t.PositionMode.Percent;throw new Error("Unknown position mode: "+e)},e.spacingModeFromString=function(e){if("length"==(e=e.toLowerCase()))return t.SpacingMode.Length;if("fixed"==e)return t.SpacingMode.Fixed;if("percent"==e)return t.SpacingMode.Percent;throw new Error("Unknown position mode: "+e)},e.rotateModeFromString=function(e){if("tangent"==(e=e.toLowerCase()))return t.RotateMode.Tangent;if("chain"==e)return t.RotateMode.Chain;if("chainscale"==e)return t.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+e)},e.transformModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.TransformMode.Normal;if("onlytranslation"==e)return t.TransformMode.OnlyTranslation;if("norotationorreflection"==e)return t.TransformMode.NoRotationOrReflection;if("noscale"==e)return t.TransformMode.NoScale;if("noscaleorreflection"==e)return t.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+e)},e}();t.SkeletonJson=e;var i=function(t,e,i,n,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=n,this.inheritDeform=r}}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(t,e,i){this.slotIndex=t,this.name=e,this.attachment=i};t.SkinEntry=e;var i=function(){function i(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return i.prototype.setAttachment=function(t,e,i){if(null==i)throw new Error("attachment cannot be null.");var n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=i},i.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var i=t.bones[e],n=!1,r=0;r<this.bones.length;r++)if(this.bones[r]==i){n=!0;break}n||this.bones.push(i)}for(e=0;e<t.constraints.length;e++){var o=t.constraints[e];for(n=!1,r=0;r<this.constraints.length;r++)if(this.constraints[r]==o){n=!0;break}n||this.constraints.push(o)}var s=t.getAttachments();for(e=0;e<s.length;e++){var a=s[e];this.setAttachment(a.slotIndex,a.name,a.attachment)}},i.prototype.copySkin=function(e){for(var i=0;i<e.bones.length;i++){for(var n=e.bones[i],r=!1,o=0;o<this.bones.length;o++)if(this.bones[o]==n){r=!0;break}r||this.bones.push(n)}for(i=0;i<e.constraints.length;i++){var s=e.constraints[i];for(r=!1,o=0;o<this.constraints.length;o++)if(this.constraints[o]==s){r=!0;break}r||this.constraints.push(s)}var a=e.getAttachments();for(i=0;i<a.length;i++){var h=a[i];null!=h.attachment&&(h.attachment instanceof t.MeshAttachment?(h.attachment=h.attachment.newLinkedMesh(),this.setAttachment(h.slotIndex,h.name,h.attachment)):(h.attachment=h.attachment.copy(),this.setAttachment(h.slotIndex,h.name,h.attachment)))}},i.prototype.getAttachment=function(t,e){var i=this.attachments[t];return i?i[e]:null},i.prototype.removeAttachment=function(t,e){var i=this.attachments[t];i&&(i[e]=null)},i.prototype.getAttachments=function(){for(var t=new Array,i=0;i<this.attachments.length;i++){var n=this.attachments[i];if(n)for(var r in n){var o=n[r];o&&t.push(new e(i,r,o))}}return t},i.prototype.getAttachmentsForSlot=function(t,i){var n=this.attachments[t];if(n)for(var r in n){var o=n[r];o&&i.push(new e(t,r,o))}},i.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},i.prototype.attachAll=function(t,e){for(var i=0,n=0;n<t.slots.length;n++){var r=t.slots[n],o=r.getAttachment();if(o&&i<e.attachments.length){var s=e.attachments[i];for(var a in s){if(o==s[a]){var h=this.getAttachment(i,a);null!=h&&r.setAttachment(h);break}}}i++}},i}();t.Skin=i}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(e,i){if(this.deform=new Array,null==e)throw new Error("data cannot be null.");if(null==i)throw new Error("bone cannot be null.");this.data=e,this.bone=i,this.color=new t.Color,this.darkColor=null==e.darkColor?null:new t.Color,this.setToSetupPose(),this.blendMode=this.data.blendMode}return e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},e.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},e}();t.Slot=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(e,i,n){if(this.color=new t.Color(1,1,1,1),e<0)throw new Error("index must be >= 0.");if(null==i)throw new Error("name cannot be null.");if(null==n)throw new Error("boneData cannot be null.");this.index=e,this.name=i,this.boneData=n};t.SlotData=e}(t.core||(t.core={}))}(n||(n={})),function(e){!function(e){var i,n,r=function(){function t(t){this._image=t}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return i.Nearest;case"linear":return i.Linear;case"mipmap":return i.MipMap;case"mipmapnearestnearest":return i.MipMapNearestNearest;case"mipmaplinearnearest":return i.MipMapLinearNearest;case"mipmapnearestlinear":return i.MipMapNearestLinear;case"mipmaplinearlinear":return i.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},t.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return n.MirroredRepeat;case"clamptoedge":return n.ClampToEdge;case"repeat":return n.Repeat;default:throw new Error("Unknown texture wrap "+t)}},t}();e.Texture=r,function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(i=e.TextureFilter||(e.TextureFilter={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(n=e.TextureWrap||(e.TextureWrap={}));var o=function(){function e(){this.size=null}return Object.defineProperty(e.prototype,"width",{get:function(){var e=this.texture;return"3"==t.VERSION[0]?e.crop.width:e.trim?e.trim.width:e.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var e=this.texture;return"3"==t.VERSION[0]?e.crop.height:e.trim?e.trim.height:e.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetY",{get:function(){return console.warn("Deprecation Warning: @Hackerham: I guess, if you are using PIXI-SPINE ATLAS region.offsetY, you want a texture, right? Use region.texture from now on."),this.spineOffsetY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalWidth",{get:function(){var e=this.texture;return"3"==t.VERSION[0]?e.trim?e.trim.width:e.crop.width:e.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalHeight",{get:function(){var e=this.texture;return"3"==t.VERSION[0]?e.trim?e.trim.height:e.crop.height:e.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!0,configurable:!0}),e}();e.TextureRegion=o}(e.core||(e.core={}))}(n||(n={})),function(e){!function(e){var i=function(){function i(t,e,i){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,i)}return i.prototype.addTexture=function(t,i){for(var n=this.pages,r=null,a=0;a<n.length;a++)if(n[a].baseTexture===i.baseTexture){r=n[a];break}if(null===r){(r=new o).name="texturePage";var h=i.baseTexture;r.width=h.realWidth,r.height=h.realHeight,r.baseTexture=h,r.minFilter=r.magFilter=e.TextureFilter.Nearest,r.uWrap=e.TextureWrap.ClampToEdge,r.vWrap=e.TextureWrap.ClampToEdge,n.push(r)}var u=new s;return u.name=t,u.page=r,u.texture=i,u.index=-1,this.regions.push(u),u},i.prototype.addTextureHash=function(t,e){for(var i in t)t.hasOwnProperty(i)&&this.addTexture(e&&-1!==i.indexOf(".")?i.substr(0,i.lastIndexOf(".")):i,t[i])},i.prototype.addSpineAtlas=function(t,e,i){return this.load(t,e,i)},i.prototype.load=function(i,r,a){var h=this;if(null==r)throw new Error("textureLoader cannot be null.");var u=new n(i),l=new Array(4),c=null,f=function(){for(;;){var i=u.readLine();if(null==i)return a&&a(h);if(0==(i=i.trim()).length)c=null;else{if(!c){(c=new o).name=i,2==u.readTuple(l)&&(c.width=parseInt(l[0]),c.height=parseInt(l[1]),u.readTuple(l)),u.readTuple(l),c.minFilter=e.Texture.filterFromString(l[0]),c.magFilter=e.Texture.filterFromString(l[1]);var n=u.readValue();c.uWrap=e.TextureWrap.ClampToEdge,c.vWrap=e.TextureWrap.ClampToEdge,"x"==n?c.uWrap=e.TextureWrap.Repeat:"y"==n?c.vWrap=e.TextureWrap.Repeat:"xy"==n&&(c.uWrap=c.vWrap=e.TextureWrap.Repeat),r(i,(function(t){if(null===t)return h.pages.splice(h.pages.indexOf(c),1),a&&a(null);c.baseTexture=t,t.valid||t.setSize(c.width,c.height),h.pages.push(c),c.setFilters(),c.width&&c.height||(c.width=t.realWidth,c.height=t.realHeight,c.width&&c.height||console.log("ERROR spine atlas page "+c.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),f()})),h.pages.push(c);break}var d=new s;d.name=i,d.page=c;var p=u.readValue(),g=0;g="true"==p.toLocaleLowerCase()?6:"false"==p.toLocaleLowerCase()?0:(720-parseFloat(p))%360/45,u.readTuple(l);var v=parseInt(l[0]),m=parseInt(l[1]);u.readTuple(l);var y=parseInt(l[0]),b=parseInt(l[1]),_=c.baseTexture.resolution;v/=_,m/=_,y/=_,b/=_;var w=new t.Rectangle(v,m,g?b:y,g?y:b);4==u.readTuple(l)&&4==u.readTuple(l)&&u.readTuple(l);var x=parseInt(l[0])/_,E=parseInt(l[1])/_;u.readTuple(l);var T=parseInt(l[0])/_,S=parseInt(l[1])/_,A=new t.Rectangle(0,0,x,E),P=new t.Rectangle(T,E-b-S,y,b);if("3"!=t.VERSION[0])d.texture=new t.Texture(d.page.baseTexture,w,A,P,g);else{var C=new t.Rectangle(v,m,y,b),M=C.clone();P.width=x,P.height=E,d.texture=new t.Texture(d.page.baseTexture,C,M,P,g)}d.index=parseInt(u.readValue()),d.texture.updateUvs(),h.regions.push(d)}}};f()},i.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},i.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()},i}();e.TextureAtlas=i;var n=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},t.prototype.readTuple=function(t){var e=this.readLine(),i=e.indexOf(":");if(-1==i)throw new Error("Invalid line: "+e);for(var n=0,r=i+1;n<3;n++){var o=e.indexOf(",",r);if(-1==o)break;t[n]=e.substr(r,o-r).trim(),r=o+1}return t[n]=e.substring(r).trim(),n+1},t}(),o=function(){function i(){}return i.prototype.setFilters=function(){var i=this.baseTexture,n=this.minFilter;n==e.TextureFilter.Linear?i.scaleMode=t.SCALE_MODES.LINEAR:this.minFilter==e.TextureFilter.Nearest?i.scaleMode=t.SCALE_MODES.NEAREST:(i.mipmap=t.MIPMAP_MODES.POW2,n==e.TextureFilter.MipMapNearestNearest?i.scaleMode=t.SCALE_MODES.NEAREST:i.scaleMode=t.SCALE_MODES.LINEAR)},i}();e.TextureAtlasPage=o;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(e.TextureRegion);e.TextureAtlasRegion=s}(e.core||(e.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(e,i){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new t.Vector2,this.active=!1,null==e)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=e,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix,this.bones=new Array;for(var n=0;n<e.bones.length;n++)this.bones.push(i.findBone(e.bones[n].name));this.target=i.findBone(e.target.name)}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},e.prototype.applyAbsoluteWorld=function(){for(var e=this.rotateMix,i=this.translateMix,n=this.scaleMix,r=this.shearMix,o=this.target,s=o.matrix,a=s.a,h=s.c,u=s.b,l=s.d,c=a*l-h*u>0?t.MathUtils.degRad:-t.MathUtils.degRad,f=this.data.offsetRotation*c,d=this.data.offsetShearY*c,p=this.bones,g=0,v=p.length;g<v;g++){var m=p[g],y=!1,b=m.matrix;if(0!=e){var _=b.a,w=b.c,x=b.b,E=b.d;(M=Math.atan2(u,a)-Math.atan2(x,_)+f)>t.MathUtils.PI?M-=t.MathUtils.PI2:M<-t.MathUtils.PI&&(M+=t.MathUtils.PI2),M*=e;var T=Math.cos(M),S=Math.sin(M);b.a=T*_-S*x,b.c=T*w-S*E,b.b=S*_+T*x,b.d=S*w+T*E,y=!0}if(0!=i){var A=this.temp;o.localToWorld(A.set(this.data.offsetX,this.data.offsetY)),b.tx+=(A.x-b.tx)*i,b.ty+=(A.y-b.ty)*i,y=!0}if(n>0){var P=Math.sqrt(b.a*b.a+b.b*b.b),C=Math.sqrt(a*a+u*u);P>1e-5&&(P=(P+(C-P+this.data.offsetScaleX)*n)/P),b.a*=P,b.b*=P,P=Math.sqrt(b.c*b.c+b.d*b.d),C=Math.sqrt(h*h+l*l),P>1e-5&&(P=(P+(C-P+this.data.offsetScaleY)*n)/P),b.c*=P,b.d*=P,y=!0}if(r>0){w=b.c,E=b.d;var M,O=Math.atan2(E,w);(M=Math.atan2(l,h)-Math.atan2(u,a)-(O-Math.atan2(b.b,b.a)))>t.MathUtils.PI?M-=t.MathUtils.PI2:M<-t.MathUtils.PI&&(M+=t.MathUtils.PI2),M=O+(M+d)*r;P=Math.sqrt(w*w+E*E);b.c=Math.cos(M)*P,b.d=Math.sin(M)*P,y=!0}y&&(m.appliedValid=!1)}},e.prototype.applyRelativeWorld=function(){for(var e=this.rotateMix,i=this.translateMix,n=this.scaleMix,r=this.shearMix,o=this.target,s=o.matrix,a=s.a,h=s.c,u=s.b,l=s.d,c=a*l-h*u>0?t.MathUtils.degRad:-t.MathUtils.degRad,f=this.data.offsetRotation*c,d=this.data.offsetShearY*c,p=this.bones,g=0,v=p.length;g<v;g++){var m=p[g],y=!1,b=m.matrix;if(0!=e){var _=b.a,w=b.c,x=b.b,E=b.d;(C=Math.atan2(u,a)+f)>t.MathUtils.PI?C-=t.MathUtils.PI2:C<-t.MathUtils.PI&&(C+=t.MathUtils.PI2),C*=e;var T=Math.cos(C),S=Math.sin(C);b.a=T*_-S*x,b.c=T*w-S*E,b.b=S*_+T*x,b.d=S*w+T*E,y=!0}if(0!=i){var A=this.temp;o.localToWorld(A.set(this.data.offsetX,this.data.offsetY)),b.tx+=A.x*i,b.ty+=A.y*i,y=!0}if(n>0){var P=(Math.sqrt(a*a+u*u)-1+this.data.offsetScaleX)*n+1;b.a*=P,b.b*=P,P=(Math.sqrt(h*h+l*l)-1+this.data.offsetScaleY)*n+1,b.c*=P,b.d*=P,y=!0}if(r>0){var C;(C=Math.atan2(l,h)-Math.atan2(u,a))>t.MathUtils.PI?C-=t.MathUtils.PI2:C<-t.MathUtils.PI&&(C+=t.MathUtils.PI2);w=b.c,E=b.d;C=Math.atan2(E,w)+(C-t.MathUtils.PI/2+d)*r;P=Math.sqrt(w*w+E*E);b.c=Math.cos(C)*P,b.d=Math.sin(C)*P,y=!0}y&&(m.appliedValid=!1)}},e.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var o=this.bones,s=0,a=o.length;s<a;s++){var h=o[s];h.appliedValid||h.updateAppliedTransform();var u=h.arotation;if(0!=t){var l=r.arotation-u+this.data.offsetRotation;u+=(l-=360*(16384-(16384.499999999996-l/360|0)))*t}var c=h.ax,f=h.ay;0!=e&&(c+=(r.ax-c+this.data.offsetX)*e,f+=(r.ay-f+this.data.offsetY)*e);var d=h.ascaleX,p=h.ascaleY;i>0&&(d>1e-5&&(d=(d+(r.ascaleX-d+this.data.offsetScaleX)*i)/d),p>1e-5&&(p=(p+(r.ascaleY-p+this.data.offsetScaleY)*i)/p));var g=h.ashearY;if(n>0){l=r.ashearY-g+this.data.offsetShearY;l-=360*(16384-(16384.499999999996-l/360|0)),h.shearY+=l*n}h.updateWorldTransformWith(c,f,u,d,p,h.ashearX,g)}},e.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var o=this.bones,s=0,a=o.length;s<a;s++){var h=o[s];h.appliedValid||h.updateAppliedTransform();var u=h.arotation;0!=t&&(u+=(r.arotation+this.data.offsetRotation)*t);var l=h.ax,c=h.ay;0!=e&&(l+=(r.ax+this.data.offsetX)*e,c+=(r.ay+this.data.offsetY)*e);var f=h.ascaleX,d=h.ascaleY;i>0&&(f>1e-5&&(f*=(r.ascaleX-1+this.data.offsetScaleX)*i+1),d>1e-5&&(d*=(r.ascaleY-1+this.data.offsetScaleY)*i+1));var p=h.ashearY;n>0&&(p+=(r.ashearY+this.data.offsetShearY)*n),h.updateWorldTransformWith(l,c,u,f,d,h.ashearX,p)}},e}();t.TransformConstraint=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(t){function e(e){var i=t.call(this,e,0,!1)||this;return i.bones=new Array,i.rotateMix=0,i.translateMix=0,i.scaleMix=0,i.shearMix=0,i.offsetRotation=0,i.offsetX=0,i.offsetY=0,i.offsetScaleX=0,i.offsetScaleY=0,i.offsetShearY=0,i.relative=!1,i.local=!1,i}return r(e,t),e}(t.ConstraintData);t.TransformConstraintData=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool((function(){return new Array})),this.polygonIndicesPool=new t.Pool((function(){return new Array}))}return e.prototype.triangulate=function(t){var i=t,n=t.length>>1,r=this.indicesArray;r.length=0;for(var o=0;o<n;o++)r[o]=o;var s=this.isConcaveArray;s.length=0;o=0;for(var a=n;o<a;++o)s[o]=e.isConcave(o,n,i,r);var h=this.triangles;for(h.length=0;n>3;){for(var u=n-1,l=(o=0,1);;){t:if(!s[o]){for(var c=r[u]<<1,f=r[o]<<1,d=r[l]<<1,p=i[c],g=i[c+1],v=i[f],m=i[f+1],y=i[d],b=i[d+1],_=(l+1)%n;_!=u;_=(_+1)%n)if(s[_]){var w=r[_]<<1,x=i[w],E=i[w+1];if(e.positiveArea(y,b,p,g,x,E)&&e.positiveArea(p,g,v,m,x,E)&&e.positiveArea(v,m,y,b,x,E))break t}break}if(0==l){do{if(!s[o])break;o--}while(o>0);break}u=o,o=l,l=(l+1)%n}h.push(r[(n+o-1)%n]),h.push(r[o]),h.push(r[(o+1)%n]),r.splice(o,1),s.splice(o,1);var T=(--n+o-1)%n,S=o==n?0:o;s[T]=e.isConcave(T,n,i,r),s[S]=e.isConcave(S,n,i,r)}return 3==n&&(h.push(r[2]),h.push(r[0]),h.push(r[1])),h},e.prototype.decompose=function(t,i){var n=t,r=this.convexPolygons;this.polygonPool.freeAll(r),r.length=0;var o=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(o),o.length=0;var s=this.polygonIndicesPool.obtain();s.length=0;var a=this.polygonPool.obtain();a.length=0;for(var h=-1,u=0,l=0,c=i.length;l<c;l+=3){var f=i[l]<<1,d=i[l+1]<<1,p=i[l+2]<<1,g=n[f],v=n[f+1],m=n[d],y=n[d+1],b=n[p],_=n[p+1],w=!1;if(h==f){var x=a.length-4,E=e.winding(a[x],a[x+1],a[x+2],a[x+3],b,_),T=e.winding(b,_,a[0],a[1],a[2],a[3]);E==u&&T==u&&(a.push(b),a.push(_),s.push(p),w=!0)}w||(a.length>0?(r.push(a),o.push(s)):(this.polygonPool.free(a),this.polygonIndicesPool.free(s)),(a=this.polygonPool.obtain()).length=0,a.push(g),a.push(v),a.push(m),a.push(y),a.push(b),a.push(_),(s=this.polygonIndicesPool.obtain()).length=0,s.push(f),s.push(d),s.push(p),u=e.winding(g,v,m,y,b,_),h=f)}a.length>0&&(r.push(a),o.push(s));for(l=0,c=r.length;l<c;l++)if(0!=(s=o[l]).length)for(var S=s[0],A=s[s.length-1],P=(a=r[l])[x=a.length-4],C=a[x+1],M=a[x+2],O=a[x+3],I=a[0],k=a[1],R=a[2],L=a[3],D=e.winding(P,C,M,O,I,k),F=0;F<c;F++)if(F!=l){var N=o[F];if(3==N.length){var U=N[0],B=N[1],j=N[2],X=r[F];b=X[X.length-2],_=X[X.length-1];if(U==S&&B==A){E=e.winding(P,C,M,O,b,_),T=e.winding(b,_,I,k,R,L);E==D&&T==D&&(X.length=0,N.length=0,a.push(b),a.push(_),s.push(j),P=M,C=O,M=b,O=_,F=0)}}}for(l=r.length-1;l>=0;l--)0==(a=r[l]).length&&(r.splice(l,1),this.polygonPool.free(a),s=o[l],o.splice(l,1),this.polygonIndicesPool.free(s));return r},e.isConcave=function(t,e,i,n){var r=n[(e+t-1)%e]<<1,o=n[t]<<1,s=n[(t+1)%e]<<1;return!this.positiveArea(i[r],i[r+1],i[o],i[o+1],i[s],i[s+1])},e.positiveArea=function(t,e,i,n,r,o){return t*(o-n)+i*(e-o)+r*(n-e)>=0},e.winding=function(t,e,i,n,r,o){var s=i-t,a=n-e;return r*a-o*s+s*e-t*a>=0?1:-1},e}();t.Triangulator=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function t(){this.array=new Array}return t.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},t.prototype.contains=function(t){return null!=this.array[0|t]},t.prototype.remove=function(t){this.array[0|t]=void 0},t.prototype.clear=function(){this.array.length=0},t}();t.IntSet=e;var i=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.r=t,this.g=e,this.b=i,this.a=n}return t.prototype.set=function(t,e,i,n){return this.r=t,this.g=e,this.b=i,this.a=n,this.clamp(),this},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},t.prototype.add=function(t,e,i,n){return this.r+=t,this.g+=e,this.b+=i,this.a+=n,this.clamp(),this},t.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},t.rgba8888ToColor=function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255},t.rgb888ToColor=function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}();t.Color=i;var n=function(){function t(){}return t.clamp=function(t,e,i){return t<e?e:t>i?i:t},t.cosDeg=function(e){return Math.cos(e*t.degRad)},t.sinDeg=function(e){return Math.sin(e*t.degRad)},t.signum=function(t){return t>0?1:t<0?-1:0},t.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},t.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},t.randomTriangular=function(e,i){return t.randomTriangularWith(e,i,.5*(e+i))},t.randomTriangularWith=function(t,e,i){var n=Math.random(),r=e-t;return n<=(i-t)/r?t+Math.sqrt(n*r*(i-t)):e-Math.sqrt((1-n)*r*(e-i))},t.PI=3.1415927,t.PI2=2*t.PI,t.radiansToDegrees=180/t.PI,t.radDeg=t.radiansToDegrees,t.degreesToRadians=t.PI/180,t.degRad=t.degreesToRadians,t}();t.MathUtils=n;var o=function(){function t(){}return t.prototype.apply=function(t,e,i){return t+(e-t)*this.applyInternal(i)},t}();t.Interpolation=o;var s=function(t){function e(e){var i=t.call(this)||this;return i.power=2,i.power=e,i}return r(e,t),e.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},e}(o);t.Pow=s;var a=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},e}(s);t.PowOut=a;var h=function(){function t(){}return t.arrayCopy=function(t,e,i,n,r){for(var o=e,s=n;o<e+r;o++,s++)i[s]=t[o]},t.setArraySize=function(t,e,i){void 0===i&&(i=0);var n=t.length;if(n==e)return t;if(t.length=e,n<e)for(var r=n;r<e;r++)t[r]=i;return t},t.ensureArrayCapacity=function(e,i,n){return void 0===n&&(n=0),e.length>=i?e:t.setArraySize(e,i,n)},t.newArray=function(t,e){for(var i=new Array(t),n=0;n<t;n++)i[n]=e;return i},t.newFloatArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var i=new Array(e),n=0;n<i.length;n++)i[n]=0;return i},t.newShortArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var i=new Array(e),n=0;n<i.length;n++)i[n]=0;return i},t.toFloatArray=function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},t.toSinglePrecision=function(e){return t.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e},t.webkit602BugfixHelper=function(t,e){},t.contains=function(t,e,i){void 0===i&&(i=!0);for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},t.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,t}();t.Utils=h;var u=function(){function t(){}return t.logBones=function(t){for(var e=0;e<t.bones.length;e++){var i=t.bones[e],n=i.matrix;console.log(i.data.name+", "+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.tx+", "+n.ty)}},t}();t.DebugUtils=u;var l=function(){function t(t){this.items=new Array,this.instantiator=t}return t.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},t.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},t.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)t[e].reset&&t[e].reset(),this.items[e]=t[e]},t.prototype.clear=function(){this.items.length=0},t}();t.Pool=l;var c=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t}();t.Vector2=c;var f=function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return t.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t}();t.TimeKeeper=f;var d=function(){function t(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return t.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},t.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},t.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},t}();t.WindowedMean=d}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(t){if(null==t)throw new Error("name cannot be null.");this.name=t};t.Attachment=e;var i=function(e){function i(t){var n=e.call(this,t)||this;return n.id=(65535&i.nextID++)<<11,n.worldVerticesLength=0,n.deformAttachment=n,n}return r(i,e),i.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},i.prototype.computeWorldVertices=function(t,e,i,n,r,o){i=r+(i>>1)*o;var s=t.bone.skeleton,a=t.deform,h=this.vertices,u=this.bones;if(null!=u){for(var l=0,c=0,f=0;f<e;f+=2){l+=(v=u[l])+1,c+=v}var d=s.bones;if(0==a.length)for(C=r,T=3*c;C<i;C+=o){var p=0,g=0,v=u[l++];for(v+=l;l<v;l++,T+=3){_=d[u[l]].matrix,M=h[T],O=h[T+1];var m=h[T+2];p+=(M*_.a+O*_.c+_.tx)*m,g+=(M*_.b+O*_.d+_.ty)*m}n[C]=p,n[C+1]=g}else for(var y=a,b=(C=r,T=3*c,c<<1);C<i;C+=o){p=0,g=0,v=u[l++];for(v+=l;l<v;l++,T+=3,b+=2){_=d[u[l]].matrix,M=h[T]+y[b],O=h[T+1]+y[b+1],m=h[T+2];p+=(M*_.a+O*_.c+_.tx)*m,g+=(M*_.b+O*_.d+_.ty)*m}n[C]=p,n[C+1]=g}}else{a.length>0&&(h=a);for(var _,w=(_=t.bone.matrix).tx,x=_.ty,E=_.a,T=_.c,S=_.b,A=_.d,P=e,C=r;C<i;P+=2,C+=o){var M=h[P],O=h[P+1];n[C]=M*E+O*T+w,n[C+1]=M*S+O*A+x}}},i.prototype.copyTo=function(e){null!=this.bones?(e.bones=new Array(this.bones.length),t.Utils.arrayCopy(this.bones,0,e.bones,0,this.bones.length)):e.bones=null,null!=this.vertices?(e.vertices=t.Utils.newFloatArray(this.vertices.length),t.Utils.arrayCopy(this.vertices,0,e.vertices,0,this.vertices.length)):e.vertices=null,e.worldVerticesLength=this.worldVerticesLength,e.deformAttachment=this.deformAttachment},i.nextID=0,i}(e);t.VertexAttachment=i}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"}(t.AttachmentType||(t.AttachmentType={}))}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.color=new t.Color(1,1,1,1),n}return r(i,e),i.prototype.copy=function(){var t=new i(name);return this.copyTo(t),t.color.setFromColor(this.color),t},i}(t.VertexAttachment);t.BoundingBoxAttachment=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.color=new t.Color(.2275,.2275,.8078,1),n}return r(i,e),i.prototype.copy=function(){var t=new i(name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},i}(t.VertexAttachment);t.ClippingAttachment=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.color=new t.Color(1,1,1,1),n.tempColor=new t.Color(0,0,0,0),n}return r(i,e),i.prototype.getParentMesh=function(){return this.parentMesh},i.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},i.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var e=new i(this.name);return e.region=this.region,e.path=this.path,e.color.setFromColor(this.color),this.copyTo(e),e.regionUVs=new Float32Array(this.regionUVs.length),t.Utils.arrayCopy(this.regionUVs,0,e.regionUVs,0,this.regionUVs.length),e.uvs=new Array(this.uvs.length),t.Utils.arrayCopy(this.uvs,0,e.uvs,0,this.uvs.length),e.triangles=new Array(this.triangles.length),t.Utils.arrayCopy(this.triangles,0,e.triangles,0,this.triangles.length),e.hullLength=this.hullLength,null!=this.edges&&(e.edges=new Array(this.edges.length),t.Utils.arrayCopy(this.edges,0,e.edges,0,this.edges.length)),e.width=this.width,e.height=this.height,e},i.prototype.newLinkedMesh=function(){var t=new i(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t},i}(t.VertexAttachment);t.MeshAttachment=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.closed=!1,n.constantSpeed=!1,n.color=new t.Color(1,1,1,1),n}return r(i,e),i.prototype.copy=function(){var e=new i(name);return this.copyTo(e),e.lengths=new Array(this.lengths.length),t.Utils.arrayCopy(this.lengths,0,e.lengths,0,this.lengths.length),e.closed=closed,e.constantSpeed=this.constantSpeed,e.color.setFromColor(this.color),e},i}(t.VertexAttachment);t.PathAttachment=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.color=new t.Color(.38,.94,0,1),n}return r(i,e),i.prototype.computeWorldPosition=function(t,e){var i=t.matrix;return e.x=this.x*i.a+this.y*i.c+t.worldX,e.y=this.x*i.b+this.y*i.d+t.worldY,e},i.prototype.computeWorldRotation=function(e){var i=e.matrix,n=t.MathUtils.cosDeg(this.rotation),r=t.MathUtils.sinDeg(this.rotation),o=n*i.a+r*i.c,s=n*i.b+r*i.d;return Math.atan2(s,o)*t.MathUtils.radDeg},i.prototype.copy=function(){var t=new i(name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},i}(t.VertexAttachment);t.PointAttachment=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new t.Color(1,1,1,1),n.offset=t.Utils.newFloatArray(8),n.uvs=t.Utils.newFloatArray(8),n.tempColor=new t.Color(1,1,1,1),n}return r(i,e),i.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*t,r=-this.height/2*this.scaleY+this.region.offsetY*e,o=n+this.region.width*t,s=r+this.region.height*e,a=this.rotation*Math.PI/180,h=Math.cos(a),u=Math.sin(a),l=n*h+this.x,c=n*u,f=r*h+this.y,d=r*u,p=o*h+this.x,g=o*u,v=s*h+this.y,m=s*u,y=this.offset;y[i.OX1]=l-d,y[i.OY1]=f+c,y[i.OX2]=l-m,y[i.OY2]=v+c,y[i.OX3]=p-m,y[i.OY3]=v+g,y[i.OX4]=p-d,y[i.OY4]=f+g},i.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},i.prototype.computeWorldVertices=function(t,e,n,r){var o=this.offset,s=t.matrix,a=s.tx,h=s.ty,u=s.a,l=s.c,c=s.b,f=s.d,d=0,p=0;d=o[i.OX1],p=o[i.OY1],e[n]=d*u+p*l+a,e[n+1]=d*c+p*f+h,n+=r,d=o[i.OX2],p=o[i.OY2],e[n]=d*u+p*l+a,e[n+1]=d*c+p*f+h,n+=r,d=o[i.OX3],p=o[i.OY3],e[n]=d*u+p*l+a,e[n+1]=d*c+p*f+h,n+=r,d=o[i.OX4],p=o[i.OY4],e[n]=d*u+p*l+a,e[n+1]=d*c+p*f+h},i.prototype.copy=function(){var e=new i(name);return e.region=this.region,e.rendererObject=this.rendererObject,e.path=this.path,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.rotation=this.rotation,e.width=this.width,e.height=this.height,t.Utils.arrayCopy(this.uvs,0,e.uvs,0,8),t.Utils.arrayCopy(this.offset,0,e.offset,0,8),e.color.setFromColor(this.color),e},i.OX1=0,i.OY1=1,i.OX2=2,i.OY2=3,i.OX3=4,i.OY3=5,i.OX4=6,i.OY4=7,i.X1=0,i.Y1=1,i.C1R=2,i.C1G=3,i.C1B=4,i.C1A=5,i.U1=6,i.V1=7,i.X2=8,i.Y2=9,i.C2R=10,i.C2G=11,i.C2B=12,i.C2A=13,i.U2=14,i.V2=15,i.X3=16,i.Y3=17,i.C3R=18,i.C3G=19,i.C3B=20,i.C3A=21,i.U3=22,i.V3=23,i.X4=24,i.Y4=25,i.C4R=26,i.C4G=27,i.C4B=28,i.C4A=29,i.U4=30,i.V4=31,i}(t.Attachment);t.RegionAttachment=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return e.prototype.begin=function(t){},e.prototype.transform=function(e,i,n,r){e.x+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY),e.y+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},e.prototype.end=function(){},e}();t.JitterEffect=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return e.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},e.prototype.transform=function(i,n,r,o){var s=this.angle*t.MathUtils.degreesToRadians,a=i.x-this.worldX,h=i.y-this.worldY,u=Math.sqrt(a*a+h*h);if(u<this.radius){var l=e.interpolation.apply(0,s,(this.radius-u)/this.radius),c=Math.cos(l),f=Math.sin(l);i.x=c*a-f*h+this.worldX,i.y=f*a+c*h+this.worldY}},e.prototype.end=function(){},e.interpolation=new t.PowOut(2),e}();t.SwirlEffect=e}(t.core||(t.core={}))}(n||(n={})),Math.fround||(Math.fround=Math.fround=(i=new Float32Array(1),function(t){return i[0]=t,i[0]})),function(e){e.core.Bone.yDown=!0;var i=[0,0,0],n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.region=null,e.attachment=null,e}return r(e,t),e}(t.Sprite);e.SpineSprite=n;var o=t.GraphicsGeometry.prototype;if(!o.invalidate){var s=[];o.invalidate=function(){var t=this.graphicsData;s.push(0),this.graphicsData=s,this.clear(),this.graphicsData=t}}var a=function(t){function e(e,i,n,r,o){var s=t.call(this,e,i,n,r,o)||this;return s.region=null,s.attachment=null,s}return r(e,t),e}(t.SimpleMesh);e.SpineMesh=a;var h=function(o){function s(t){var i=o.call(this)||this;if(!t)throw new Error("The spineData param is required.");if("string"==typeof t)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');i.spineData=t,i.skeleton=new e.core.Skeleton(t),i.skeleton.updateWorldTransform(),i.stateData=new e.core.AnimationStateData(t),i.state=new e.core.AnimationState(i.stateData),i.slotContainers=[],i.tempClipContainers=[];for(var n=0,r=i.skeleton.slots.length;n<r;n++){var s=i.skeleton.slots[n],a=s.getAttachment(),h=i.newContainer();if(i.slotContainers.push(h),i.addChild(h),i.tempClipContainers.push(null),a instanceof e.core.RegionAttachment){var u=a.region.name,l=i.createSprite(s,a,u);s.currentSprite=l,s.currentSpriteName=u,h.addChild(l)}else if(a instanceof e.core.MeshAttachment){var c=i.createMesh(s,a);s.currentMesh=c,s.currentMeshName=a.name,h.addChild(c)}else{if(!(a instanceof e.core.ClippingAttachment))continue;i.createGraphics(s,a),h.addChild(s.clippingContainer),h.addChild(s.currentGraphics)}}return i.tintRgb=new Float32Array([1,1,1]),i.autoUpdate=!0,i.visible=!0,i}return r(s,o),Object.defineProperty(s.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,this.updateTransform=e?s.prototype.autoUpdateTransform:t.Container.prototype.updateTransform)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"visible",{get:function(){return this._visible},set:function(t){t!==this._visible&&(this._visible=t,t&&(this.lastTime=0))},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"tint",{get:function(){return t.utils.rgb2hex(this.tintRgb)},set:function(e){this.tintRgb=t.utils.hex2rgb(e,this.tintRgb)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"delayLimit",{get:function(){return(void 0!==this.localDelayLimit?this.localDelayLimit:s.globalDelayLimit)||Number.MAX_VALUE},enumerable:!0,configurable:!0}),s.prototype.update=function(n){var r=this.delayLimit;if(n>r&&(n=r),this.state.update(n),this.state.apply(this.skeleton),this.skeleton){this.skeleton.updateWorldTransform();var o=this.skeleton.slots,s=this.color,a=null,h=null;s?(a=s.light,h=s.dark):a=this.tintRgb;for(var u=0,l=o.length;u<l;u++){var c=(C=o[u]).getAttachment(),f=this.slotContainers[u];if(c){var d=null,p=c.color;if(c instanceof e.core.RegionAttachment){var g=c.region;if(g){C.currentMesh&&(C.currentMesh.visible=!1,C.currentMesh=null,C.currentMeshName=void 0);var v=g;if(C.currentSpriteName&&C.currentSpriteName===v.name)C.currentSpriteName!==v.name||C.hackRegion||this.setSpriteRegion(c,C.currentSprite,g);else{var m=v.name;if(C.currentSprite&&(C.currentSprite.visible=!1),C.sprites=C.sprites||{},void 0!==C.sprites[m])C.sprites[m].visible=!0;else{var y=this.createSprite(C,c,m);f.addChild(y)}C.currentSprite=C.sprites[m],C.currentSpriteName=m}}(b=f.transform).setFromMatrix(C.bone.matrix),C.currentSprite.color?d=C.currentSprite.color:(i[0]=a[0]*C.color.r*p.r,i[1]=a[1]*C.color.g*p.g,i[2]=a[2]*C.color.b*p.b,C.currentSprite.tint=t.utils.rgb2hex(i)),C.currentSprite.blendMode=C.blendMode}else if(c instanceof e.core.MeshAttachment){var b;if(C.currentSprite)C.currentSprite.visible=!1,C.currentSprite=null,C.currentSpriteName=void 0,(b=new t.Transform)._parentID=-1,b._worldID=f.transform._worldID,f.transform=b;if(!C.currentMeshName||C.currentMeshName!==c.name){var _=c.name;if(C.currentMesh&&(C.currentMesh.visible=!1),C.meshes=C.meshes||{},void 0!==C.meshes[_])C.meshes[_].visible=!0;else{var w=this.createMesh(C,c);f.addChild(w)}C.currentMesh=C.meshes[_],C.currentMeshName=_}c.computeWorldVerticesOld(C,C.currentMesh.vertices),C.currentMesh.color?d=C.currentMesh.color:(i[0]=a[0]*C.color.r*p.r,i[1]=a[1]*C.color.g*p.g,i[2]=a[2]*C.color.b*p.b,C.currentMesh.tint=t.utils.rgb2hex(i)),C.currentMesh.blendMode=C.blendMode}else{if(!(c instanceof e.core.ClippingAttachment)){f.visible=!1;continue}C.currentGraphics||(this.createGraphics(C,c),f.addChild(C.clippingContainer),f.addChild(C.currentGraphics)),this.updateGraphics(C,c)}if(f.visible=!0,d){var x=C.color.r*p.r,E=C.color.g*p.g,T=C.color.b*p.b;d.setLight(a[0]*x+h[0]*(1-x),a[1]*E+h[1]*(1-E),a[2]*T+h[2]*(1-T)),C.darkColor?(x=C.darkColor.r,E=C.darkColor.g,T=C.darkColor.b):(x=0,E=0,T=0),d.setDark(a[0]*x+h[0]*(1-x),a[1]*E+h[1]*(1-E),a[2]*T+h[2]*(1-T))}f.alpha=C.color.a}else f.visible=!1}var S=this.skeleton.drawOrder,A=null,P=null;for(u=0,l=S.length;u<l;u++){var C=o[S[u].data.index];f=this.slotContainers[S[u].data.index];if(P||null!==f.parent&&f.parent!==this&&(f.parent.removeChild(f),f.parent=this),C.currentGraphics&&C.getAttachment())P=C.clippingContainer,A=C.getAttachment(),P.children.length=0,this.children[u]=f,A.endSlot==C.data&&(A.endSlot=null);else if(P){var M=this.tempClipContainers[u];M||((M=this.tempClipContainers[u]=this.newContainer()).visible=!1),this.children[u]=M,f.parent=null,P.addChild(f),A.endSlot==C.data&&(P.renderable=!0,P=null,A=null)}else this.children[u]=f}}},s.prototype.setSpriteRegion=function(t,i,n){i.attachment===t&&i.region===n||(i.region=n,i.attachment=t,i.texture=n.texture,i.rotation=t.rotation*e.core.MathUtils.degRad,i.position.x=t.x,i.position.y=t.y,i.alpha=t.color.a,n.size?(i.scale.x=n.size.width/n.originalWidth,i.scale.y=-n.size.height/n.originalHeight):(i.scale.x=t.scaleX*t.width/n.originalWidth,i.scale.y=-t.scaleY*t.height/n.originalHeight))},s.prototype.setMeshRegion=function(t,e,i){e.attachment===t&&e.region===i||(e.region=i,e.attachment=t,e.texture=i.texture,i.texture.updateUvs(),e.uvBuffer.update(t.regionUVs))},s.prototype.autoUpdateTransform=function(){if(s.globalAutoUpdate){this.lastTime=this.lastTime||Date.now();var e=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(e)}else this.lastTime=0;t.Container.prototype.updateTransform.call(this)},s.prototype.createSprite=function(t,e,i){var n=e.region;t.hackAttachment===e&&(n=t.hackRegion);var r=n.texture,o=this.newSprite(r);return o.anchor.set(.5),this.setSpriteRegion(e,o,e.region),t.sprites=t.sprites||{},t.sprites[i]=o,o},s.prototype.createMesh=function(e,i){var n=i.region;e.hackAttachment===i&&(n=e.hackRegion,e.hackAttachment=null,e.hackRegion=null);var r=this.newMesh(n.texture,new Float32Array(i.regionUVs.length),i.regionUVs,new Uint16Array(i.triangles),t.DRAW_MODES.TRIANGLES);return r.canvasPadding&&(r.canvasPadding=1.5),r.alpha=i.color.a,r.region=i.region,this.setMeshRegion(i,r,n),e.meshes=e.meshes||{},e.meshes[i.name]=r,r},s.prototype.createGraphics=function(e,i){var n=this.newGraphics(),r=new t.Polygon([]);return n.clear(),n.beginFill(16777215,1),n.drawPolygon(r),n.renderable=!1,e.currentGraphics=n,e.clippingContainer=this.newContainer(),e.clippingContainer.mask=e.currentGraphics,n},s.prototype.updateGraphics=function(t,e){var i=t.currentGraphics.geometry,n=i.graphicsData[0].shape.points,r=e.worldVerticesLength;n.length=r,e.computeWorldVertices(t,0,r,n,0,2),i.invalidate()},s.prototype.hackTextureBySlotIndex=function(t,i,n){void 0===i&&(i=null),void 0===n&&(n=null);var r=this.skeleton.slots[t];if(!r)return!1;var o=r.getAttachment(),s=o.region;return i?((s=new e.core.TextureRegion).texture=i,s.size=n,r.hackRegion=s,r.hackAttachment=o):(r.hackRegion=null,r.hackAttachment=null),r.currentSprite&&r.currentSprite.region!=s?(this.setSpriteRegion(o,r.currentSprite,s),r.currentSprite.region=s):r.currentMesh&&r.currentMesh.region!=s&&this.setMeshRegion(o,r.currentMesh,s),!0},s.prototype.hackTextureBySlotName=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=this.skeleton.findSlotIndex(t);return-1!=n&&this.hackTextureBySlotIndex(n,e,i)},s.prototype.newContainer=function(){return new t.Container},s.prototype.newSprite=function(t){return new n(t)},s.prototype.newGraphics=function(){return new t.Graphics},s.prototype.newMesh=function(t,e,i,n,r){return new a(t,e,i,n,r)},s.prototype.transformHack=function(){return 1},s.prototype.hackAttachmentGroups=function(t,e,i){if(t){for(var n=[],r=[],o=0,s=this.skeleton.slots.length;o<s;o++){var a=this.skeleton.slots[o],h=a.currentSpriteName||a.currentMeshName||"",u=a.currentSprite||a.currentMesh;h.endsWith(t)?(u.parentGroup=e,r.push(u)):i&&u&&(u.parentGroup=i,n.push(u))}return[n,r]}},s.prototype.destroy=function(t){for(var e=0,i=this.skeleton.slots.length;e<i;e++){var n=this.skeleton.slots[e];for(var r in n.meshes)n.meshes[r].destroy(t);for(var s in n.meshes=null,n.sprites)n.sprites[s].destroy(t);n.sprites=null}for(e=0,i=this.slotContainers.length;e<i;e++)this.slotContainers[e].destroy(t);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,o.prototype.destroy.call(this,t)},s.globalAutoUpdate=!0,s.globalDelayLimit=0,s.clippingPolygon=[],s}(t.Container);e.Spine=h}(n||(n={})),function(e){t.spine=e;var i=t.Texture.prototype;i._updateUvs||(i._updateUvs=i.updateUvs)}(n||(n={})),function(e){t.LoaderResource.setExtensionXhrType("skel",t.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var i=function(){function i(){}return i.use=function(i,o){if(!i.data)return o();var s=function(e){return e.type===t.LoaderResource.TYPE.JSON}(i)&&i.data.bones,a=function(e){return e.xhrType===t.LoaderResource.XHR_RESPONSE_TYPE.BUFFER}(i)&&("skel"===i.extension||i.metadata.spineMetadata);if(!s&&!a)return o();var h=null,u=i.data;s?h=new e.core.SkeletonJson(null):(h=new e.core.SkeletonBinary(null),i.data instanceof ArrayBuffer&&(u=new Uint8Array(i.data)));var l=i.metadata||{},c=l?i.metadata.spineSkeletonScale:null;c&&(h.scale=c);var f=l?i.metadata.spineAtlas:null;if(!1===f)return o();if(f&&f.pages)return h.attachmentLoader=new e.core.AtlasAttachmentLoader(f),i.spineData=h.readSkeletonData(u),i.spineAtlas=f,o();var d=l.spineAtlasSuffix||".atlas",p=i.url,g=p.indexOf("?");g>0&&(p=p.substr(0,g)),p=p.substr(0,p.lastIndexOf("."))+d,i.metadata&&i.metadata.spineAtlasFile&&(p=i.metadata.spineAtlasFile),p=p.replace(this.baseUrl,"");var v={crossOrigin:i.crossOrigin,xhrType:t.LoaderResource.XHR_RESPONSE_TYPE.TEXT,metadata:l.spineMetadata||null,parentResource:i},m={crossOrigin:i.crossOrigin,metadata:l.imageMetadata||null,parentResource:i},y=i.url.substr(0,i.url.lastIndexOf("/")+1);y=y.replace(this.baseUrl,"");var b=l.imageNamePrefix||i.name+"_atlas_page_",_=l.images?r(l.images):l.image?r({default:l.image}):l.imageLoader?l.imageLoader(this,b,y,m):n(this,b,y,m),w=function(t){new e.core.TextureAtlas(t,_,(function(t){t&&(h.attachmentLoader=new e.core.AtlasAttachmentLoader(t),i.spineData=h.readSkeletonData(u),i.spineAtlas=t),o()}))};i.metadata&&i.metadata.atlasRawData?w(i.metadata.atlasRawData):this.add(i.name+"_atlas",p,v,(function(t){t.error?o():w(t.data)}))},i}();function n(t,e,i,n){return i&&i.lastIndexOf("/")!==i.length-1&&(i+="/"),function(r,o){var s=e+r,a=i+r,h=t.resources[s];if(h){function u(){o(h.texture.baseTexture)}h.texture?u():h.onAfterMiddleware.add(u)}else t.add(s,a,n,(function(t){t.error?o(null):o(t.texture.baseTexture)}))}}function r(t){return function(e,i){var n=t[e]||t.default;n&&n.baseTexture?i(n.baseTexture):i(n)}}e.AtlasParser=i,e.imageLoaderAdapter=n,e.syncImageLoaderAdapter=function(e,i){return e&&e.lastIndexOf("/")!==e.length-1&&(e+="/"),function(e,n){n(t.BaseTexture.from(e,i))}},e.staticImageLoader=r,t.Loader&&t.Loader.registerPlugin(i)}(n||(n={}))}).call(this,i(9))},function(t,e,i){"use strict";(function(t){var e=i(178),n=i(179),r=i.n(n);
/*!
 * @pixi/polyfill - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
window.Promise||(window.Promise=e.Polyfill),Object.assign||(Object.assign=r.a);var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!o.performance||!o.performance.now){var s=Date.now();o.performance||(o.performance={}),o.performance.now=function(){return Date.now()-s}}for(var a=Date.now(),h=["ms","moz","webkit","o"],u=0;u<h.length&&!o.requestAnimationFrame;++u){var l=h[u];o.requestAnimationFrame=o[l+"RequestAnimationFrame"],o.cancelAnimationFrame=o[l+"CancelAnimationFrame"]||o[l+"CancelRequestAnimationFrame"]}o.requestAnimationFrame||(o.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),i=16+a-e;return i<0&&(i=0),a=e,setTimeout((function(){a=Date.now(),t(performance.now())}),i)}),o.cancelAnimationFrame||(o.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array)}).call(this,i(77))},function(t,e,i){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(r.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new o(r.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},i(441),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(77))},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var n,r,o,s,a,h=1,u={},l=!1,c=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},n=function(t){o.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,n=function(t){var e=c.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):n=function(t){setTimeout(p,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&p(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),n=function(e){t.postMessage(s+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var r={callback:t,args:e};return u[h]=r,n(h),h++},f.clearImmediate=d}function d(t){delete u[t]}function p(t){if(l)setTimeout(p,0,t);else{var e=u[t];if(e){l=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(void 0,i)}}(e)}finally{d(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(77),i(170))},function(t,e,i){(function(t,n){var r;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof n&&n;s.global!==s&&s.window!==s&&s.self;var a,h=2147483647,u=/^xn--/,l=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,p=String.fromCharCode;function g(t){throw new RangeError(f[t])}function v(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function m(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+v((t=t.replace(c,".")).split("."),e).join(".")}function y(t){for(var e,i,n=[],r=0,o=t.length;r<o;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<o?56320==(64512&(i=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--):n.push(e);return n}function b(t){return v(t,(function(t){var e="";return t>65535&&(e+=p((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=p(t)})).join("")}function _(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function w(t,e,i){var n=0;for(t=i?d(t/700):t>>1,t+=d(t/e);t>455;n+=36)t=d(t/35);return d(n+36*t/(t+38))}function x(t){var e,i,n,r,o,s,a,u,l,c,f,p=[],v=t.length,m=0,y=128,_=72;for((i=t.lastIndexOf("-"))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&g("not-basic"),p.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<v;){for(o=m,s=1,a=36;r>=v&&g("invalid-input"),((u=(f=t.charCodeAt(r++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:36)>=36||u>d((h-m)/s))&&g("overflow"),m+=u*s,!(u<(l=a<=_?1:a>=_+26?26:a-_));a+=36)s>d(h/(c=36-l))&&g("overflow"),s*=c;_=w(m-o,e=p.length+1,0==o),d(m/e)>h-y&&g("overflow"),y+=d(m/e),m%=e,p.splice(m++,0,y)}return b(p)}function E(t){var e,i,n,r,o,s,a,u,l,c,f,v,m,b,x,E=[];for(v=(t=y(t)).length,e=128,i=0,o=72,s=0;s<v;++s)(f=t[s])<128&&E.push(p(f));for(n=r=E.length,r&&E.push("-");n<v;){for(a=h,s=0;s<v;++s)(f=t[s])>=e&&f<a&&(a=f);for(a-e>d((h-i)/(m=n+1))&&g("overflow"),i+=(a-e)*m,e=a,s=0;s<v;++s)if((f=t[s])<e&&++i>h&&g("overflow"),f==e){for(u=i,l=36;!(u<(c=l<=o?1:l>=o+26?26:l-o));l+=36)x=u-c,b=36-c,E.push(p(_(c+x%b,0))),u=d(x/b);E.push(p(_(u,0))),o=w(i,m,n==r),i=0,++n}++i,++e}return E.join("")}a={version:"1.4.1",ucs2:{decode:y,encode:b},decode:x,encode:E,toASCII:function(t){return m(t,(function(t){return l.test(t)?"xn--"+E(t):t}))},toUnicode:function(t){return m(t,(function(t){return u.test(t)?x(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return a}.call(e,i,e,t))||(t.exports=r)}()}).call(this,i(443)(t),i(77))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,i){"use strict";e.decode=e.parse=i(446),e.encode=e.stringify=i(447)},function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,o){e=e||"&",i=i||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var h=1e3;o&&"number"==typeof o.maxKeys&&(h=o.maxKeys);var u=t.length;h>0&&u>h&&(u=h);for(var l=0;l<u;++l){var c,f,d,p,g=t[l].replace(a,"%20"),v=g.indexOf(i);v>=0?(c=g.substr(0,v),f=g.substr(v+1)):(c=g,f=""),d=decodeURIComponent(c),p=decodeURIComponent(f),n(s,d)?r(s[d])?s[d].push(p):s[d]=[s[d],p]:s[d]=p}return s};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),(function(s){var a=encodeURIComponent(n(s))+i;return r(t[s])?o(t[s],(function(t){return a+encodeURIComponent(n(t))})).join(e):a+encodeURIComponent(n(t[s]))})).join(e):a?encodeURIComponent(n(a))+i+encodeURIComponent(n(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var s=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(t){t.exports=JSON.parse('{"_args":[["git+https://github.com/PBS-KIDS/Platypus.git#6f748185f35fc58ebe3c5ff96f568ff54dde0483","/home/jenkins/agent/workspace/WIL/Amazin_Amazon"]],"_development":true,"_from":"git+https://github.com/PBS-KIDS/Platypus.git#6f748185f35fc58ebe3c5ff96f568ff54dde0483","_id":"platypus@git+https://github.com/PBS-KIDS/Platypus.git#6f748185f35fc58ebe3c5ff96f568ff54dde0483","_inBundle":false,"_integrity":"","_location":"/platypus","_phantomChildren":{},"_requested":{"type":"git","raw":"git+https://github.com/PBS-KIDS/Platypus.git#6f748185f35fc58ebe3c5ff96f568ff54dde0483","rawSpec":"git+https://github.com/PBS-KIDS/Platypus.git#6f748185f35fc58ebe3c5ff96f568ff54dde0483","saveSpec":"git+https://github.com/PBS-KIDS/Platypus.git#6f748185f35fc58ebe3c5ff96f568ff54dde0483","fetchSpec":"https://github.com/PBS-KIDS/Platypus.git","gitCommittish":"6f748185f35fc58ebe3c5ff96f568ff54dde0483"},"_requiredBy":["#DEV:/"],"_resolved":"git+https://github.com/PBS-KIDS/Platypus.git#6f748185f35fc58ebe3c5ff96f568ff54dde0483","_spec":"git+https://github.com/PBS-KIDS/Platypus.git#6f748185f35fc58ebe3c5ff96f568ff54dde0483","_where":"/home/jenkins/agent/workspace/WIL/Amazin_Amazon","bugs":{"url":"https://github.com/PBS-KIDS/Platypus/issues"},"dependencies":{"@tweenjs/tween.js":"18.3.1","pixi-sound":"3.0.3","pixi-spine":"2.1.4","pixi.js":"5.2.0","recycle":"git+https://github.com/gopherwood/recycle.git#master","springroll":"2.2.0"},"description":"Platypus Docs","devDependencies":{"grunt":"^0.4.5","grunt-contrib-compress":"^0.13.0","grunt-contrib-concat":"^1.0.1","grunt-contrib-copy":"^0.8.0","grunt-contrib-uglify":"^0.9.1","grunt-contrib-yuidoc":"^0.8.0","lodash":"^3.10.0","pako":"^0.2.8","webpack":"^4.35.2","webpack-cli":"^3.3.5"},"engine":"node >= 0.10.22","homepage":"https://github.com/PBS-KIDS/Platypus#readme","license":"MIT","logo":"assets/platypus-title.png","main":"lib/platypus.js","module":"src/index.js","name":"platypus","repository":{"type":"git","url":"git+https://github.com/PBS-KIDS/Platypus.git"},"scripts":{"build:debug":"webpack --env.dev","build:release":"webpack --env.prod","start":"webpack-dev-server --env.dev"},"url":"https://github.com/PBS-KIDS/Platypus","version":"2.0.0-beta"}')},function(t,e,i){"use strict";var n=i(450),r=i(59),o=i(175),s=i(135),a=i(176),h=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=r.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var i=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==i)throw new Error(s[i]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var l;if(l="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(i=n.deflateSetDictionary(this.strm,l)))throw new Error(s[i]);this._dict_set=!0}}function l(t,e){var i=new u(e);if(i.push(t,!0),i.err)throw i.msg||s[i.err];return i.result}u.prototype.push=function(t,e){var i,s,a=this.strm,u=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=o.string2buf(t):"[object ArrayBuffer]"===h.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new r.Buf8(u),a.next_out=0,a.avail_out=u),1!==(i=n.deflate(a,s))&&0!==i)return this.onEnd(i),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(o.buf2binstring(r.shrinkBuf(a.output,a.next_out))):this.onData(r.shrinkBuf(a.output,a.next_out)))}while((a.avail_in>0||0===a.avail_out)&&1!==i);return 4===s?(i=n.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,0===i):2!==s||(this.onEnd(0),a.avail_out=0,!0)},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=u,e.deflate=l,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,l(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,l(t,e)}},function(t,e,i){"use strict";var n,r=i(59),o=i(451),s=i(173),a=i(174),h=i(135);function u(t,e){return t.msg=h[e],e}function l(t){return(t<<1)-(t>4?9:0)}function c(t){for(var e=t.length;--e>=0;)t[e]=0}function f(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(r.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function d(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,f(t.strm)}function p(t,e){t.pending_buf[t.pending++]=e}function g(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function v(t,e){var i,n,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,h=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,u=t.window,l=t.w_mask,c=t.prev,f=t.strstart+258,d=u[o+s-1],p=u[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(u[(i=e)+s]===p&&u[i+s-1]===d&&u[i]===u[o]&&u[++i]===u[o+1]){o+=2,i++;do{}while(u[++o]===u[++i]&&u[++o]===u[++i]&&u[++o]===u[++i]&&u[++o]===u[++i]&&u[++o]===u[++i]&&u[++o]===u[++i]&&u[++o]===u[++i]&&u[++o]===u[++i]&&o<f);if(n=258-(f-o),o=f-258,n>s){if(t.match_start=e,s=n,n>=a)break;d=u[o+s-1],p=u[o+s]}}}while((e=c[e&l])>h&&0!=--r);return s<=t.lookahead?s:t.lookahead}function m(t){var e,i,n,o,h,u,l,c,f,d,p=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=p+(p-262)){r.arraySet(t.window,t.window,p,p,0),t.match_start-=p,t.strstart-=p,t.block_start-=p,e=i=t.hash_size;do{n=t.head[--e],t.head[e]=n>=p?n-p:0}while(--i);e=i=p;do{n=t.prev[--e],t.prev[e]=n>=p?n-p:0}while(--i);o+=p}if(0===t.strm.avail_in)break;if(u=t.strm,l=t.window,c=t.strstart+t.lookahead,f=o,d=void 0,(d=u.avail_in)>f&&(d=f),i=0===d?0:(u.avail_in-=d,r.arraySet(l,u.input,u.next_in,d,c),1===u.state.wrap?u.adler=s(u.adler,l,d,c):2===u.state.wrap&&(u.adler=a(u.adler,l,d,c)),u.next_in+=d,u.total_in+=d,d),t.lookahead+=i,t.lookahead+t.insert>=3)for(h=t.strstart-t.insert,t.ins_h=t.window[h],t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+3-1])&t.hash_mask,t.prev[h&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=h,h++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function y(t,e){for(var i,n;;){if(t.lookahead<262){if(m(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-262&&(t.match_length=v(t,i)),t.match_length>=3)if(n=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}function b(t,e){for(var i,n,r;;){if(t.lookahead<262){if(m(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-262&&(t.match_length=v(t,i),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(d(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=o._tr_tally(t,0,t.window[t.strstart-1]))&&d(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}function _(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(1146),this.dyn_dtree=new r.Buf16(122),this.bl_tree=new r.Buf16(78),c(this.dyn_ltree),c(this.dyn_dtree),c(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(16),this.heap=new r.Buf16(573),c(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(573),c(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function x(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):u(t,-2)}function E(t){var e,i=x(t);return 0===i&&((e=t.state).window_size=2*e.w_size,c(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),i}function T(t,e,i,n,o,s){if(!t)return-2;var a=1;if(-1===e&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),o<1||o>9||8!==i||n<8||n>15||e<0||e>9||s<0||s>4)return u(t,-2);8===n&&(n=9);var h=new w;return t.state=h,h.strm=t,h.wrap=a,h.gzhead=null,h.w_bits=n,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=o+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new r.Buf8(2*h.w_size),h.head=new r.Buf16(h.hash_size),h.prev=new r.Buf16(h.w_size),h.lit_bufsize=1<<o+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new r.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=s,h.method=i,E(t)}n=[new _(0,0,0,0,(function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(m(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,d(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(d(t,!1),t.strm.avail_out),1)})),new _(4,4,8,4,y),new _(4,5,16,8,y),new _(4,6,32,32,y),new _(4,4,16,16,b),new _(8,16,32,32,b),new _(8,16,128,128,b),new _(8,32,128,256,b),new _(32,128,258,1024,b),new _(32,258,258,4096,b)],e.deflateInit=function(t,e){return T(t,e,8,15,8,0)},e.deflateInit2=T,e.deflateReset=E,e.deflateResetKeep=x,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},e.deflate=function(t,e){var i,r,s,h;if(!t||!t.state||e>5||e<0)return t?u(t,-2):-2;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&4!==e)return u(t,0===t.avail_out?-5:-2);if(r.strm=t,i=r.last_flush,r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,p(r,31),p(r,139),p(r,8),r.gzhead?(p(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),p(r,255&r.gzhead.time),p(r,r.gzhead.time>>8&255),p(r,r.gzhead.time>>16&255),p(r,r.gzhead.time>>24&255),p(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),p(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(p(r,255&r.gzhead.extra.length),p(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=a(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(p(r,0),p(r,0),p(r,0),p(r,0),p(r,0),p(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),p(r,3),r.status=113);else{var v=8+(r.w_bits-8<<4)<<8;v|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(v|=32),v+=31-v%31,r.status=113,g(r,v),0!==r.strstart&&(g(r,t.adler>>>16),g(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),f(t),s=r.pending,r.pending!==r.pending_buf_size));)p(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),f(t),s=r.pending,r.pending===r.pending_buf_size)){h=1;break}h=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,p(r,h)}while(0!==h);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===h&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),f(t),s=r.pending,r.pending===r.pending_buf_size)){h=1;break}h=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,p(r,h)}while(0!==h);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===h&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&f(t),r.pending+2<=r.pending_buf_size&&(p(r,255&t.adler),p(r,t.adler>>8&255),t.adler=0,r.status=113)):r.status=113),0!==r.pending){if(f(t),0===t.avail_out)return r.last_flush=-1,0}else if(0===t.avail_in&&l(e)<=l(i)&&4!==e)return u(t,-5);if(666===r.status&&0!==t.avail_in)return u(t,-5);if(0!==t.avail_in||0!==r.lookahead||0!==e&&666!==r.status){var y=2===r.strategy?function(t,e){for(var i;;){if(0===t.lookahead&&(m(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}(r,e):3===r.strategy?function(t,e){for(var i,n,r,s,a=t.window;;){if(t.lookahead<=258){if(m(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=a[r=t.strstart-1])===a[++r]&&n===a[++r]&&n===a[++r]){s=t.strstart+258;do{}while(n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&r<s);t.match_length=258-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}(r,e):n[r.level].func(r,e);if(3!==y&&4!==y||(r.status=666),1===y||3===y)return 0===t.avail_out&&(r.last_flush=-1),0;if(2===y&&(1===e?o._tr_align(r):5!==e&&(o._tr_stored_block(r,0,0,!1),3===e&&(c(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),f(t),0===t.avail_out))return r.last_flush=-1,0}return 4!==e?0:r.wrap<=0?1:(2===r.wrap?(p(r,255&t.adler),p(r,t.adler>>8&255),p(r,t.adler>>16&255),p(r,t.adler>>24&255),p(r,255&t.total_in),p(r,t.total_in>>8&255),p(r,t.total_in>>16&255),p(r,t.total_in>>24&255)):(g(r,t.adler>>>16),g(r,65535&t.adler)),f(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},e.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?u(t,-2):(t.state=null,113===e?u(t,-3):0):-2},e.deflateSetDictionary=function(t,e){var i,n,o,a,h,u,l,f,d=e.length;if(!t||!t.state)return-2;if(2===(a=(i=t.state).wrap)||1===a&&42!==i.status||i.lookahead)return-2;for(1===a&&(t.adler=s(t.adler,e,d,0)),i.wrap=0,d>=i.w_size&&(0===a&&(c(i.head),i.strstart=0,i.block_start=0,i.insert=0),f=new r.Buf8(i.w_size),r.arraySet(f,e,d-i.w_size,i.w_size,0),e=f,d=i.w_size),h=t.avail_in,u=t.next_in,l=t.input,t.avail_in=d,t.next_in=0,t.input=e,m(i);i.lookahead>=3;){n=i.strstart,o=i.lookahead-2;do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+3-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++}while(--o);i.strstart=n,i.lookahead=2,m(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=u,t.input=l,t.avail_in=h,i.wrap=a,0},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,i){"use strict";var n=i(59);function r(t){for(var e=t.length;--e>=0;)t[e]=0}var o=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u=new Array(576);r(u);var l=new Array(60);r(l);var c=new Array(512);r(c);var f=new Array(256);r(f);var d=new Array(29);r(d);var p,g,v,m=new Array(30);function y(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function b(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function _(t){return t<256?c[t]:c[256+(t>>>7)]}function w(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function x(t,e,i){t.bi_valid>16-i?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function E(t,e,i){x(t,i[2*e],i[2*e+1])}function T(t,e){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}function S(t,e,i){var n,r,o=new Array(16),s=0;for(n=1;n<=15;n++)o[n]=s=s+i[n-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=T(o[a]++,a))}}function A(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function P(t){t.bi_valid>8?w(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function C(t,e,i,n){var r=2*e,o=2*i;return t[r]<t[o]||t[r]===t[o]&&n[e]<=n[i]}function M(t,e,i){for(var n=t.heap[i],r=i<<1;r<=t.heap_len&&(r<t.heap_len&&C(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!C(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=n}function O(t,e,i){var n,r,a,h,u=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],r=t.pending_buf[t.l_buf+u],u++,0===n?E(t,r,e):(E(t,(a=f[r])+256+1,e),0!==(h=o[a])&&x(t,r-=d[a],h),E(t,a=_(--n),i),0!==(h=s[a])&&x(t,n-=m[a],h))}while(u<t.last_lit);E(t,256,e)}function I(t,e){var i,n,r,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,h=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<h;i++)0!==o[2*i]?(t.heap[++t.heap_len]=u=i,t.depth[i]=0):o[2*i+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=s[2*r+1]);for(e.max_code=u,i=t.heap_len>>1;i>=1;i--)M(t,o,i);r=h;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],M(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,o[2*r]=o[2*i]+o[2*n],t.depth[r]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,o[2*i+1]=o[2*n+1]=r,t.heap[1]=r++,M(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,n,r,o,s,a,h=e.dyn_tree,u=e.max_code,l=e.stat_desc.static_tree,c=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(o=0;o<=15;o++)t.bl_count[o]=0;for(h[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)(o=h[2*h[2*(n=t.heap[i])+1]+1]+1)>p&&(o=p,g++),h[2*n+1]=o,n>u||(t.bl_count[o]++,s=0,n>=d&&(s=f[n-d]),a=h[2*n],t.opt_len+=a*(o+s),c&&(t.static_len+=a*(l[2*n+1]+s)));if(0!==g){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(o=p;0!==o;o--)for(n=t.bl_count[o];0!==n;)(r=t.heap[--i])>u||(h[2*r+1]!==o&&(t.opt_len+=(o-h[2*r+1])*h[2*r],h[2*r+1]=o),n--)}}(t,e),S(o,u,t.bl_count)}function k(t,e,i){var n,r,o=-1,s=e[1],a=0,h=7,u=4;for(0===s&&(h=138,u=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)r=s,s=e[2*(n+1)+1],++a<h&&r===s||(a<u?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,o=r,0===s?(h=138,u=3):r===s?(h=6,u=3):(h=7,u=4))}function R(t,e,i){var n,r,o=-1,s=e[1],a=0,h=7,u=4;for(0===s&&(h=138,u=3),n=0;n<=i;n++)if(r=s,s=e[2*(n+1)+1],!(++a<h&&r===s)){if(a<u)do{E(t,r,t.bl_tree)}while(0!=--a);else 0!==r?(r!==o&&(E(t,r,t.bl_tree),a--),E(t,16,t.bl_tree),x(t,a-3,2)):a<=10?(E(t,17,t.bl_tree),x(t,a-3,3)):(E(t,18,t.bl_tree),x(t,a-11,7));a=0,o=r,0===s?(h=138,u=3):r===s?(h=6,u=3):(h=7,u=4)}}r(m);var L=!1;function D(t,e,i,r){x(t,0+(r?1:0),3),function(t,e,i,r){P(t),r&&(w(t,i),w(t,~i)),n.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}(t,e,i,!0)}e._tr_init=function(t){L||(!function(){var t,e,i,n,r,h=new Array(16);for(i=0,n=0;n<28;n++)for(d[n]=i,t=0;t<1<<o[n];t++)f[i++]=n;for(f[i-1]=n,r=0,n=0;n<16;n++)for(m[n]=r,t=0;t<1<<s[n];t++)c[r++]=n;for(r>>=7;n<30;n++)for(m[n]=r<<7,t=0;t<1<<s[n]-7;t++)c[256+r++]=n;for(e=0;e<=15;e++)h[e]=0;for(t=0;t<=143;)u[2*t+1]=8,t++,h[8]++;for(;t<=255;)u[2*t+1]=9,t++,h[9]++;for(;t<=279;)u[2*t+1]=7,t++,h[7]++;for(;t<=287;)u[2*t+1]=8,t++,h[8]++;for(S(u,287,h),t=0;t<30;t++)l[2*t+1]=5,l[2*t]=T(t,5);p=new y(u,o,257,286,15),g=new y(l,s,0,30,15),v=new y(new Array(0),a,0,19,7)}(),L=!0),t.l_desc=new b(t.dyn_ltree,p),t.d_desc=new b(t.dyn_dtree,g),t.bl_desc=new b(t.bl_tree,v),t.bi_buf=0,t.bi_valid=0,A(t)},e._tr_stored_block=D,e._tr_flush_block=function(t,e,i,n){var r,o,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),I(t,t.l_desc),I(t,t.d_desc),s=function(t){var e;for(k(t,t.dyn_ltree,t.l_desc.max_code),k(t,t.dyn_dtree,t.d_desc.max_code),I(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*h[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=r&&(r=o)):r=o=i+5,i+4<=r&&-1!==e?D(t,e,i,n):4===t.strategy||o===r?(x(t,2+(n?1:0),3),O(t,u,l)):(x(t,4+(n?1:0),3),function(t,e,i,n){var r;for(x(t,e-257,5),x(t,i-1,5),x(t,n-4,4),r=0;r<n;r++)x(t,t.bl_tree[2*h[r]+1],3);R(t,t.dyn_ltree,e-1),R(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),O(t,t.dyn_ltree,t.dyn_dtree)),A(t),n&&P(t)},e._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(f[i]+256+1)]++,t.dyn_dtree[2*_(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){x(t,2,3),E(t,256,u),function(t){16===t.bi_valid?(w(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,i){"use strict";var n=i(453),r=i(59),o=i(175),s=i(177),a=i(135),h=i(176),u=i(456),l=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var i=n.inflateInit2(this.strm,e.windowBits);if(i!==s.Z_OK)throw new Error(a[i]);if(this.header=new u,n.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=o.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(i=n.inflateSetDictionary(this.strm,e.dictionary))!==s.Z_OK))throw new Error(a[i])}function f(t,e){var i=new c(e);if(i.push(t,!0),i.err)throw i.msg||a[i.err];return i.result}c.prototype.push=function(t,e){var i,a,h,u,c,f=this.strm,d=this.options.chunkSize,p=this.options.dictionary,g=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?f.input=o.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new r.Buf8(d),f.next_out=0,f.avail_out=d),(i=n.inflate(f,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&p&&(i=n.inflateSetDictionary(this.strm,p)),i===s.Z_BUF_ERROR&&!0===g&&(i=s.Z_OK,g=!1),i!==s.Z_STREAM_END&&i!==s.Z_OK)return this.onEnd(i),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&i!==s.Z_STREAM_END&&(0!==f.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(h=o.utf8border(f.output,f.next_out),u=f.next_out-h,c=o.buf2string(f.output,h),f.next_out=u,f.avail_out=d-u,u&&r.arraySet(f.output,f.output,h,u,0),this.onData(c)):this.onData(r.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((f.avail_in>0||0===f.avail_out)&&i!==s.Z_STREAM_END);return i===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(i=n.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),f.avail_out=0,!0)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=c,e.inflate=f,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},e.ungzip=f},function(t,e,i){"use strict";var n=i(59),r=i(173),o=i(174),s=i(454),a=i(455);function h(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function l(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(852),e.distcode=e.distdyn=new n.Buf32(592),e.sane=1,e.back=-1,0):-2}function c(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,l(t)):-2}function f(t,e){var i,n;return t&&t.state?(n=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,c(t))):-2}function d(t,e){var i,n;return t?(n=new u,t.state=n,n.window=null,0!==(i=f(t,e))&&(t.state=null),i):-2}var p,g,v=!0;function m(t){if(v){var e;for(p=new n.Buf32(512),g=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,p,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,g,0,t.work,{bits:5}),v=!1}t.lencode=p,t.lenbits=9,t.distcode=g,t.distbits=5}function y(t,e,i,r){var o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),r>=s.wsize?(n.arraySet(s.window,e,i-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((o=s.wsize-s.wnext)>r&&(o=r),n.arraySet(s.window,e,i-r,o,s.wnext),(r-=o)?(n.arraySet(s.window,e,i-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}e.inflateReset=c,e.inflateReset2=f,e.inflateResetKeep=l,e.inflateInit=function(t){return d(t,15)},e.inflateInit2=d,e.inflate=function(t,e){var i,u,l,c,f,d,p,g,v,b,_,w,x,E,T,S,A,P,C,M,O,I,k,R,L=0,D=new n.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(i=t.state).mode&&(i.mode=13),f=t.next_out,l=t.output,p=t.avail_out,c=t.next_in,u=t.input,d=t.avail_in,g=i.hold,v=i.bits,b=d,_=p,I=0;t:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;v<16;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(2&i.wrap&&35615===g){i.check=0,D[0]=255&g,D[1]=g>>>8&255,i.check=o(i.check,D,2,0),g=0,v=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&g)<<8)+(g>>8))%31){t.msg="incorrect header check",i.mode=30;break}if(8!=(15&g)){t.msg="unknown compression method",i.mode=30;break}if(v-=4,O=8+(15&(g>>>=4)),0===i.wbits)i.wbits=O;else if(O>i.wbits){t.msg="invalid window size",i.mode=30;break}i.dmax=1<<O,t.adler=i.check=1,i.mode=512&g?10:12,g=0,v=0;break;case 2:for(;v<16;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(i.flags=g,8!=(255&i.flags)){t.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=g>>8&1),512&i.flags&&(D[0]=255&g,D[1]=g>>>8&255,i.check=o(i.check,D,2,0)),g=0,v=0,i.mode=3;case 3:for(;v<32;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}i.head&&(i.head.time=g),512&i.flags&&(D[0]=255&g,D[1]=g>>>8&255,D[2]=g>>>16&255,D[3]=g>>>24&255,i.check=o(i.check,D,4,0)),g=0,v=0,i.mode=4;case 4:for(;v<16;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}i.head&&(i.head.xflags=255&g,i.head.os=g>>8),512&i.flags&&(D[0]=255&g,D[1]=g>>>8&255,i.check=o(i.check,D,2,0)),g=0,v=0,i.mode=5;case 5:if(1024&i.flags){for(;v<16;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}i.length=g,i.head&&(i.head.extra_len=g),512&i.flags&&(D[0]=255&g,D[1]=g>>>8&255,i.check=o(i.check,D,2,0)),g=0,v=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&((w=i.length)>d&&(w=d),w&&(i.head&&(O=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),n.arraySet(i.head.extra,u,c,w,O)),512&i.flags&&(i.check=o(i.check,u,w,c)),d-=w,c+=w,i.length-=w),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===d)break t;w=0;do{O=u[c+w++],i.head&&O&&i.length<65536&&(i.head.name+=String.fromCharCode(O))}while(O&&w<d);if(512&i.flags&&(i.check=o(i.check,u,w,c)),d-=w,c+=w,O)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===d)break t;w=0;do{O=u[c+w++],i.head&&O&&i.length<65536&&(i.head.comment+=String.fromCharCode(O))}while(O&&w<d);if(512&i.flags&&(i.check=o(i.check,u,w,c)),d-=w,c+=w,O)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;v<16;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(g!==(65535&i.check)){t.msg="header crc mismatch",i.mode=30;break}g=0,v=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=12;break;case 10:for(;v<32;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}t.adler=i.check=h(g),g=0,v=0,i.mode=11;case 11:if(0===i.havedict)return t.next_out=f,t.avail_out=p,t.next_in=c,t.avail_in=d,i.hold=g,i.bits=v,2;t.adler=i.check=1,i.mode=12;case 12:if(5===e||6===e)break t;case 13:if(i.last){g>>>=7&v,v-=7&v,i.mode=27;break}for(;v<3;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}switch(i.last=1&g,v-=1,3&(g>>>=1)){case 0:i.mode=14;break;case 1:if(m(i),i.mode=20,6===e){g>>>=2,v-=2;break t}break;case 2:i.mode=17;break;case 3:t.msg="invalid block type",i.mode=30}g>>>=2,v-=2;break;case 14:for(g>>>=7&v,v-=7&v;v<32;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if((65535&g)!=(g>>>16^65535)){t.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&g,g=0,v=0,i.mode=15,6===e)break t;case 15:i.mode=16;case 16:if(w=i.length){if(w>d&&(w=d),w>p&&(w=p),0===w)break t;n.arraySet(l,u,c,w,f),d-=w,c+=w,p-=w,f+=w,i.length-=w;break}i.mode=12;break;case 17:for(;v<14;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(i.nlen=257+(31&g),g>>>=5,v-=5,i.ndist=1+(31&g),g>>>=5,v-=5,i.ncode=4+(15&g),g>>>=4,v-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;v<3;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}i.lens[F[i.have++]]=7&g,g>>>=3,v-=3}for(;i.have<19;)i.lens[F[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,k={bits:i.lenbits},I=a(0,i.lens,0,19,i.lencode,0,i.work,k),i.lenbits=k.bits,I){t.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;S=(L=i.lencode[g&(1<<i.lenbits)-1])>>>16&255,A=65535&L,!((T=L>>>24)<=v);){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(A<16)g>>>=T,v-=T,i.lens[i.have++]=A;else{if(16===A){for(R=T+2;v<R;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(g>>>=T,v-=T,0===i.have){t.msg="invalid bit length repeat",i.mode=30;break}O=i.lens[i.have-1],w=3+(3&g),g>>>=2,v-=2}else if(17===A){for(R=T+3;v<R;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}v-=T,O=0,w=3+(7&(g>>>=T)),g>>>=3,v-=3}else{for(R=T+7;v<R;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}v-=T,O=0,w=11+(127&(g>>>=T)),g>>>=7,v-=7}if(i.have+w>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=30;break}for(;w--;)i.lens[i.have++]=O}}if(30===i.mode)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,k={bits:i.lenbits},I=a(1,i.lens,0,i.nlen,i.lencode,0,i.work,k),i.lenbits=k.bits,I){t.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,k={bits:i.distbits},I=a(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,k),i.distbits=k.bits,I){t.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===e)break t;case 20:i.mode=21;case 21:if(d>=6&&p>=258){t.next_out=f,t.avail_out=p,t.next_in=c,t.avail_in=d,i.hold=g,i.bits=v,s(t,_),f=t.next_out,l=t.output,p=t.avail_out,c=t.next_in,u=t.input,d=t.avail_in,g=i.hold,v=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;S=(L=i.lencode[g&(1<<i.lenbits)-1])>>>16&255,A=65535&L,!((T=L>>>24)<=v);){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(S&&0==(240&S)){for(P=T,C=S,M=A;S=(L=i.lencode[M+((g&(1<<P+C)-1)>>P)])>>>16&255,A=65535&L,!(P+(T=L>>>24)<=v);){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}g>>>=P,v-=P,i.back+=P}if(g>>>=T,v-=T,i.back+=T,i.length=A,0===S){i.mode=26;break}if(32&S){i.back=-1,i.mode=12;break}if(64&S){t.msg="invalid literal/length code",i.mode=30;break}i.extra=15&S,i.mode=22;case 22:if(i.extra){for(R=i.extra;v<R;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}i.length+=g&(1<<i.extra)-1,g>>>=i.extra,v-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;S=(L=i.distcode[g&(1<<i.distbits)-1])>>>16&255,A=65535&L,!((T=L>>>24)<=v);){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(0==(240&S)){for(P=T,C=S,M=A;S=(L=i.distcode[M+((g&(1<<P+C)-1)>>P)])>>>16&255,A=65535&L,!(P+(T=L>>>24)<=v);){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}g>>>=P,v-=P,i.back+=P}if(g>>>=T,v-=T,i.back+=T,64&S){t.msg="invalid distance code",i.mode=30;break}i.offset=A,i.extra=15&S,i.mode=24;case 24:if(i.extra){for(R=i.extra;v<R;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}i.offset+=g&(1<<i.extra)-1,g>>>=i.extra,v-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===p)break t;if(w=_-p,i.offset>w){if((w=i.offset-w)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=30;break}w>i.wnext?(w-=i.wnext,x=i.wsize-w):x=i.wnext-w,w>i.length&&(w=i.length),E=i.window}else E=l,x=f-i.offset,w=i.length;w>p&&(w=p),p-=w,i.length-=w;do{l[f++]=E[x++]}while(--w);0===i.length&&(i.mode=21);break;case 26:if(0===p)break t;l[f++]=i.length,p--,i.mode=21;break;case 27:if(i.wrap){for(;v<32;){if(0===d)break t;d--,g|=u[c++]<<v,v+=8}if(_-=p,t.total_out+=_,i.total+=_,_&&(t.adler=i.check=i.flags?o(i.check,l,_,f-_):r(i.check,l,_,f-_)),_=p,(i.flags?g:h(g))!==i.check){t.msg="incorrect data check",i.mode=30;break}g=0,v=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;v<32;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(g!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=30;break}g=0,v=0}i.mode=29;case 29:I=1;break t;case 30:I=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=f,t.avail_out=p,t.next_in=c,t.avail_in=d,i.hold=g,i.bits=v,(i.wsize||_!==t.avail_out&&i.mode<30&&(i.mode<27||4!==e))&&y(t,t.output,t.next_out,_-t.avail_out)?(i.mode=31,-4):(b-=t.avail_in,_-=t.avail_out,t.total_in+=b,t.total_out+=_,i.total+=_,i.wrap&&_&&(t.adler=i.check=i.flags?o(i.check,l,_,t.next_out-_):r(i.check,l,_,t.next_out-_)),t.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0===b&&0===_||4===e)&&0===I&&(I=-5),I)},e.inflateEnd=function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},e.inflateGetHeader=function(t,e){var i;return t&&t.state?0==(2&(i=t.state).wrap)?-2:(i.head=e,e.done=!1,0):-2},e.inflateSetDictionary=function(t,e){var i,n=e.length;return t&&t.state?0!==(i=t.state).wrap&&11!==i.mode?-2:11===i.mode&&r(1,e,n,0)!==i.check?-3:y(t,e,n,n)?(i.mode=31,-4):(i.havedict=1,0):-2},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,i){"use strict";t.exports=function(t,e){var i,n,r,o,s,a,h,u,l,c,f,d,p,g,v,m,y,b,_,w,x,E,T,S,A;i=t.state,n=t.next_in,S=t.input,r=n+(t.avail_in-5),o=t.next_out,A=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),h=i.dmax,u=i.wsize,l=i.whave,c=i.wnext,f=i.window,d=i.hold,p=i.bits,g=i.lencode,v=i.distcode,m=(1<<i.lenbits)-1,y=(1<<i.distbits)-1;t:do{p<15&&(d+=S[n++]<<p,p+=8,d+=S[n++]<<p,p+=8),b=g[d&m];e:for(;;){if(d>>>=_=b>>>24,p-=_,0===(_=b>>>16&255))A[o++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=g[(65535&b)+(d&(1<<_)-1)];continue e}if(32&_){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}w=65535&b,(_&=15)&&(p<_&&(d+=S[n++]<<p,p+=8),w+=d&(1<<_)-1,d>>>=_,p-=_),p<15&&(d+=S[n++]<<p,p+=8,d+=S[n++]<<p,p+=8),b=v[d&y];i:for(;;){if(d>>>=_=b>>>24,p-=_,!(16&(_=b>>>16&255))){if(0==(64&_)){b=v[(65535&b)+(d&(1<<_)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(x=65535&b,p<(_&=15)&&(d+=S[n++]<<p,(p+=8)<_&&(d+=S[n++]<<p,p+=8)),(x+=d&(1<<_)-1)>h){t.msg="invalid distance too far back",i.mode=30;break t}if(d>>>=_,p-=_,x>(_=o-s)){if((_=x-_)>l&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(E=0,T=f,0===c){if(E+=u-_,_<w){w-=_;do{A[o++]=f[E++]}while(--_);E=o-x,T=A}}else if(c<_){if(E+=u+c-_,(_-=c)<w){w-=_;do{A[o++]=f[E++]}while(--_);if(E=0,c<w){w-=_=c;do{A[o++]=f[E++]}while(--_);E=o-x,T=A}}}else if(E+=c-_,_<w){w-=_;do{A[o++]=f[E++]}while(--_);E=o-x,T=A}for(;w>2;)A[o++]=T[E++],A[o++]=T[E++],A[o++]=T[E++],w-=3;w&&(A[o++]=T[E++],w>1&&(A[o++]=T[E++]))}else{E=o-x;do{A[o++]=A[E++],A[o++]=A[E++],A[o++]=A[E++],w-=3}while(w>2);w&&(A[o++]=A[E++],w>1&&(A[o++]=A[E++]))}break}}break}}while(n<r&&o<a);n-=w=p>>3,d&=(1<<(p-=w<<3))-1,t.next_in=n,t.next_out=o,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=o<a?a-o+257:257-(o-a),i.hold=d,i.bits=p}},function(t,e,i){"use strict";var n=i(59),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,i,h,u,l,c,f){var d,p,g,v,m,y,b,_,w,x=f.bits,E=0,T=0,S=0,A=0,P=0,C=0,M=0,O=0,I=0,k=0,R=null,L=0,D=new n.Buf16(16),F=new n.Buf16(16),N=null,U=0;for(E=0;E<=15;E++)D[E]=0;for(T=0;T<h;T++)D[e[i+T]]++;for(P=x,A=15;A>=1&&0===D[A];A--);if(P>A&&(P=A),0===A)return u[l++]=20971520,u[l++]=20971520,f.bits=1,0;for(S=1;S<A&&0===D[S];S++);for(P<S&&(P=S),O=1,E=1;E<=15;E++)if(O<<=1,(O-=D[E])<0)return-1;if(O>0&&(0===t||1!==A))return-1;for(F[1]=0,E=1;E<15;E++)F[E+1]=F[E]+D[E];for(T=0;T<h;T++)0!==e[i+T]&&(c[F[e[i+T]]++]=T);if(0===t?(R=N=c,y=19):1===t?(R=r,L-=257,N=o,U-=257,y=256):(R=s,N=a,y=-1),k=0,T=0,E=S,m=l,C=P,M=0,g=-1,v=(I=1<<P)-1,1===t&&I>852||2===t&&I>592)return 1;for(;;){b=E-M,c[T]<y?(_=0,w=c[T]):c[T]>y?(_=N[U+c[T]],w=R[L+c[T]]):(_=96,w=0),d=1<<E-M,S=p=1<<C;do{u[m+(k>>M)+(p-=d)]=b<<24|_<<16|w|0}while(0!==p);for(d=1<<E-1;k&d;)d>>=1;if(0!==d?(k&=d-1,k+=d):k=0,T++,0==--D[E]){if(E===A)break;E=e[i+c[T]]}if(E>P&&(k&v)!==g){for(0===M&&(M=P),m+=S,O=1<<(C=E-M);C+M<A&&!((O-=D[C+M])<=0);)C++,O<<=1;if(I+=1<<C,1===t&&I>852||2===t&&I>592)return 1;u[g=k&v]=P<<24|C<<16|m-l|0}}return 0!==k&&(u[m+k]=E-M<<24|64<<16|0),f.bits=P,0}},function(t,e,i){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}}]]);