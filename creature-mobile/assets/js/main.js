function removeTouchEvents(a){"use strict";$(a).unbind("contextmenu"),$(a).unbind("mousedown"),$(a).unbind("mouseup"),$(a).unbind("mousemove"),$(a).unbind("mouseleave"),$(a).unbind("click"),$(a).unbind("touchstart"),$(a).unbind("touchend"),$(a).unbind("touchmove")}function touchInit(){"use strict";CreatureGame.support.iOS&&(document.ontouchmove=function(a){})}function touchEvents(a){"use strict";var b,c={item:null,down:function(){return void 0},up:function(){return void 0},move:function(){return void 0},stopEvent:!0,allowMultiple:!1,allowUpWithoutDown:!0},d=!1,e=!1,f=null,g=null;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);void 0!==c.item&&null!==c.item&&(removeTouchEvents(a.item),c.item.TouchEventInfo=c,$(c.item).on("contextmenu",function(){return!1}),CreatureGame.support.desktop&&($(c.item).on("mousedown",function(a){(!e&&!d||c.allowMultiple)&&(e=!0,c.down(a,this),c.stopEvent&&a.stopPropagation())}),$(c.item).on("mouseup",function(a){(e||c.allowUpWithoutDown)&&(e=!1,c.up(a,this),c.stopEvent&&a.stopPropagation())}),$(c.item).on("mouseleave",function(a){e&&(e=!1,c.up(a,this),c.stopEvent&&a.stopPropagation())}),$(c.item).on("mousemove",function(a){if(null!==f){var b=a.pageX-f.pageX,d=a.pageY-f.pageY;(0!==b||0!==d)&&c.move(a,b,d,this)}f=a,c.stopEvent&&a.stopPropagation()})),CreatureGame.support.mobile&&($(c.item).on("click",function(a){a.preventDefault()}),$(c.item).on("touchstart",function(a){a.preventDefault(),(!e&&!d||c.allowMultiple)&&(d=!0,c.down(a,this),g=null,c.stopEvent&&a.stopPropagation())}),$(c.item).on("touchend",function(a){a.preventDefault(),(d||c.allowUpWithoutDown)&&(d=!1,c.up(a,this),c.stopEvent&&a.stopPropagation())}),$(c.item).on("touchmove",function(a){var b,d,e=a.originalEvent;e.preventDefault();try{null!==g&&(b=e.touches[0].pageX-g[0],d=e.touches[0].pageY-g[1],(0!==b||0!==d)&&c.move(e,b,d,this)),g=[e.touches[0].pageX,e.touches[0].pageY]}catch(f){}c.stopEvent&&e.stopPropagation()})))}function createButton(a,b,c,d,e,f){"use strict";var g,h,i,j={up:"",down:"",event:function(){return void 0},sound:null,text:null,extraRadius:0,allowUpWithoutDown:!0},k=document.createElementNS(svgns,"g"),l=document.createElementNS(svgns,"image"),m=document.createElementNS(svgns,"image");for(g in f)f.hasOwnProperty(g)&&(j[g]=f[g]);return k.className.baseVal="gameButton",l.setAttributeNS(xlinkns,"href",j.up),m.setAttributeNS(xlinkns,"href",j.down),l.setAttribute("preserveAspectRatio","none"),m.setAttribute("preserveAspectRatio","none"),k.setAttribute("transform","translate("+a+","+b+")"),l.setAttribute("x","0"),l.setAttribute("class","upimg"),l.setAttribute("y","0"),l.setAttribute("width",c),l.setAttribute("height",d),m.setAttribute("x","0"),m.setAttribute("class","downimg"),m.setAttribute("y","0"),m.setAttribute("width",c),m.setAttribute("height",d),j.extraRadius>0&&(h=document.createElementNS(svgns,"circle"),h.setAttribute("fill","rgba(0,0,0,0)"),h.setAttribute("r",j.extraRadius.toString()),h.setAttribute("cx",(c/2).toString()),h.setAttribute("cy",(d/2).toString()),k.appendChild(h)),i=null,null!==j.text&&(i=document.createElementNS(svgns,"text"),i.setAttribute("x",(c/2).toString()),i.setAttribute("y","40"),i.setAttribute("font-size","30"),i.setAttribute("fill","white"),i.setAttribute("stroke","black"),i.setAttribute("stroke-width","0.5"),i.setAttribute("text-anchor","middle"),i.textContent=j.text),touchEvents({item:k,down:function(){goStart===!1&&(l.setAttribute("style","display:none;"),m.setAttribute("style",""))},up:function(){goStart===!1&&(m.setAttribute("style","display:none;"),l.setAttribute("style",""),null!==j.sound&&app.sound.play(j.sound),j.event())},allowUpWithoutDown:j.allowUpWithoutDown}),e.appendChild(k),k.appendChild(m),k.appendChild(l),i&&k.appendChild(i),k.setText=function(a){i.textContent=a},k}function createSelectionBox(a,b,c,d,e,f){"use strict";function g(){var a,b,c=[],d=$(".powerSlot");for(t=0;t<u.entries.length;t+=1){for(b=!1,a=0;a<d.length&&!b;a+=1)u.entries[t]===d[a].getAttribute("data-speedpower")&&(b=!0);b||c.push(u.entries[t])}return c}function h(){A||goStart||(tutorialManager.markTutorialFlashComplete(x?"animalPicker":"levelPicker"),isAvivaTalking()||(x?tutorialManager.trigger("powers_cycle"):tutorialManager.trigger("levels_oncycle")),app.sound.play("click"),s=g(),s.length<1||(v-=1,0>v&&(v=s.length-1),x?(r=AnimalPowers.special[s[v]]||AnimalPowers.movement[s[v]],m.textContent=r.displayName):m.textContent=s[v],u.onchange(s[v],u.entries!==f.entries)))}function i(){A||goStart||(tutorialManager.markTutorialFlashComplete(x?"animalPicker":"levelPicker"),isAvivaTalking()||(x?tutorialManager.trigger("powers_cycle"):tutorialManager.trigger("levels_oncycle")),app.sound.play("click"),s=g(),s.length<1||(v+=1,v>s.length-1&&(v=0),x?(r=AnimalPowers.special[s[v]]||AnimalPowers.movement[s[v]],m.textContent=r.displayName):m.textContent=s[v],u.onchange(s[v],u.entries!==f.entries)))}var j,k,l,m,n,o,p,q,r,s,t,u={entries:[],title:"",titleAlign:"",onchange:function(){return void 0},swipeAreaCallback:function(){return void 0}},v=0,w=null,x=!1,y=null,z=0,A=!1;for(j in f)f.hasOwnProperty(j)&&(u[j]=f[j]);return k=u.entries,l=document.createElementNS(svgns,"g"),l.setAttribute("transform","translate("+a+","+b+")"),m=document.createElementNS(svgns,"text"),m.setAttribute("x",(c/2).toString()),m.setAttribute("y",(d/2+14).toString()),m.setAttribute("font-size","24px"),m.setAttribute("text-anchor","middle"),m.setAttribute("fill","black"),m.setAttribute("stroke","none"),m.setAttribute("transform","translate(0,0)"),""!==u.title&&(n=document.createElementNS(svgns,"text"),n.setAttribute("x","20"),n.setAttribute("y","20"),n.setAttribute("font-size","24px"),n.setAttribute("fill","white"),n.setAttribute("stroke","black"),n.setAttribute("stroke-width","0.5"),n.setAttribute("style","font-family: badaboom"),n.textContent=u.title,"right"===u.titleAlign&&(n.setAttribute("text-anchor","end"),n.setAttribute("x",(c-32).toString())),l.appendChild(n)),void 0!==u.tabs&&u.tabs.length>1&&(w=u.page2Entries,x=!0,y=document.getElementById("power_select_background"),o=document.createElementNS(svgns,"rect"),o.setAttribute("x","0"),o.setAttribute("y","-45"),o.setAttribute("width","125"),o.setAttribute("height","64"),o.setAttribute("fill","rgba(0,0,255,0)"),o.setAttribute("stroke","none"),p=document.createElementNS(svgns,"rect"),p.setAttribute("x","125"),p.setAttribute("y","-45"),p.setAttribute("width","125"),p.setAttribute("height","64"),p.setAttribute("fill","rgba(255,0,0,0)"),p.setAttribute("stroke","none"),l.appendChild(o),l.appendChild(p),touchEvents({item:o,down:function(a,b){goStart===!1&&(isAvivaTalking()||tutorialManager.trigger("left_tab"),app.sound.play("click"),y.setAttributeNS(xlinkns,"href","./assets/images/LabAssets/creature_select_move.png"),u.entries=k,l.changeTo(u.entries[0]))}}),touchEvents({item:p,down:function(a,b){goStart===!1&&(isAvivaTalking()||tutorialManager.trigger("right_tab"),tutorialManager.markTutorialFlashComplete("animalTabs"),app.sound.play("click"),y.setAttributeNS(xlinkns,"href","./assets/images/LabAssets/creature_select_defend.png"),u.entries=w,l.changeTo(u.entries[0]))}})),x?(r=AnimalPowers.special[u.entries[0]]||AnimalPowers.movement[u.entries[0]],m.textContent=r.displayName):m.textContent=u.entries[0],l.appendChild(m),e.appendChild(l),q=document.createElementNS(svgns,"rect"),q.setAttribute("x","-20"),q.setAttribute("y","18"),q.setAttribute("width","290"),q.setAttribute("height","260"),q.setAttribute("fill","rgba(0,255,255,0.0)"),l.appendChild(q),touchEvents({item:q,down:function(a,b){z=0,A=!0,m.transform.baseVal.getItem(0).matrix.e=0},move:function(a,b,c,d){A&&(z+=b,z=CreatureGame.MathFunctions.clamp(z,-80,80),m.transform.baseVal.getItem(0).matrix.e=z/3)},up:function(a,b){A=!1,m.transform.baseVal.getItem(0).matrix.e=0,z>15?h():-15>z?i():u.swipeAreaCallback()}}),createButton(-18,13,30,57,l,{up:"./assets/images/LabAssets/arrow_left.png",down:"./assets/images/LabAssets/arrow_left_press.png",event:h,extraRadius:40,allowUpWithoutDown:!1}),createButton(235,13,30,57,l,{up:"./assets/images/LabAssets/arrow_right.png",down:"./assets/images/LabAssets/arrow_right_press.png",event:i,extraRadius:40,allowUpWithoutDown:!1}),u.onchange(u.entries[v],u.entries!==f.entries),l.changeTo=function(a,b){if(b){for(t=0;t<k.length;t+=1)if(k[t]===a)return v=t,u.entries=k,y.setAttributeNS(xlinkns,"href","./assets/images/LabAssets/creature_select_move.png"),x?(r=AnimalPowers.special[k[v]]||AnimalPowers.movement[k[v]],m.textContent=r.displayName):m.textContent=k[v],void u.onchange(k[v],u.entries!==f.entries);for(t=0;t<w.length;t+=1)if(w[t]===a)return v=t,u.entries=w,y.setAttributeNS(xlinkns,"href","./assets/images/LabAssets/creature_select_defend.png"),x?(r=AnimalPowers.special[w[v]]||AnimalPowers.movement[w[v]],m.textContent=r.displayName):m.textContent=w[v],void u.onchange(w[v],u.entries!==f.entries)}else{var c=g();for(t=0;t<u.entries.length;t+=1)if(c[t]===a)return v=t,x?(r=AnimalPowers.special[c[v]]||AnimalPowers.movement[c[v]],m.textContent=r.displayName):m.textContent=c[v],void u.onchange(c[v],u.entries!==f.entries)}v=0,s=g(),x?(r=AnimalPowers.special[s[v]]||AnimalPowers.movement[s[v]]||{displayName:"None Available"},m.textContent=r.displayName):m.textContent=s[v]||"None Available",u.onchange(s[v],u.entries!==f.entries)},l}function canvasCircle(a,b,c,d,e,f){"use strict";CreatureGame.frontContext.lineWidth=f||1,CreatureGame.frontContext.arc(a,b,c,0,2*Math.PI),void 0!==d&&(CreatureGame.frontContext.fillStyle=d||"#000000"),void 0!==e&&(CreatureGame.frontContext.strokeStyle=e||"#000000")}function setupAnimation(a,b){"use strict";var c,d,e,f,g,h={frames:1,time:.6,direction:"x",startPaused:!1,playOnce:!1,onComplete:null,reverse:!1,preventEffectReplace:!1},i=0,j=[],k=(new Date).getTime()/1e3;for(c in b)b.hasOwnProperty(c)&&(h[c]=b[c]);for(d=h.time/h.frames,e=h.startPaused,f="x"===h.direction?a.naturalWidth/h.frames:a.naturalHeight/h.frames,a.setAttribute("data-animated","true"),g=0;g<h.frames;g+=1)j[g]={sx:"x"===h.direction?f*g:0,sy:"x"===h.direction?0:f*g,sw:"x"===h.direction?f:a.naturalWidth,sh:"x"===h.direction?a.naturalHeight:f};a.animDetails={preventEffectReplace:h.preventEffectReplace,pause:function(a){e=a,k=(new Date).getTime()/1e3},reset:function(){i=0},setFrame:function(a){i=a},reverse:function(a){h.reverse=a},update:function(){var b=(new Date).getTime()/1e3;if(e)k=b;else for(;b-k>d;)if(k+=d,i+=1,i>=h.frames){if(null!==h.onComplete&&(h.onComplete(a),k=b),h.playOnce)return void(e=!0);i=0}},draw:function(b,c,d,e,f,g){var k,l,m,n=h.reverse?h.frames-i-1:i,o=g||!1,p=e,q=f,r=0,s=0;o&&(k=j[n].sw/j[n].sh,l=e/f,m=k>l?e/j[n].sw:f/j[n].sh,p=j[n].sw*m,q=j[n].sh*m,r=e>p?(e-p)/2:0,s=f>q?(f-q)/2:0),b.drawImage(a,j[n].sx,j[n].sy,j[n].sw,j[n].sh,c+r,d+s,p,q)}}}function drawFitImage(a,b,c,d,e,f,g,h,i,j){"use strict";var k=e/f,l=i/j,m=k>l?i/e:j/f,n=e*m,o=f*m,p=i>n?(i-n)/2:0,q=j>o?(j-o)/2:0;a.drawImage(b,c,d,e,f,g+p,h+q,n,o)}function AlternateAudio(){"use strict";var a=document.getElementById("GameSounds"),b={},c={},d=1,e=!1,f={init:function(){return void 0},loadSound:function(c,d,e,f,g){var h="./assets/sound/vo/"+d+".ogg",i="./assets/sound/vo/"+d+".mp3",j=document.createElement("audio"),k=document.createElement("source"),l=document.createElement("source");l.setAttribute("type","audio/mpeg"),k.setAttribute("type","audio/ogg"),l.src=i,k.src=h,j.appendChild(l),j.appendChild(k),a.appendChild(j),j.setAttribute("preload","metadata"),j.load(),b[c]={elem:j,volume:f,looping:!1,type:e},void 0!==g&&null!==g&&g()},playSound:function(a,c,e){if(void 0!==b[a]&&null!==b[a]){if(CreatureGame.support.android&&!CreatureGame.support.chrome&&"dialog"!==b[a].type)return void(void 0!==e&&null!==e&&e());b[a].callback=e,b[a].isPlaying=!0;var f=function(){void 0!==b[a].callback&&null!==b[a].callback&&b[a].callback(),b[a].isPlaying=!1};b[a].looping=b[a].elem.loop=c||!1,b[a].elem.volume=CreatureGame.MathFunctions.clamp(b[a].volume*d,0,1),void 0!==b[a].elem.onended?b[a].elem.onended=f:($(b[a].elem).unbind("ended"),b[a].elem.addEventListener("ended",f)),b[a].elem.play()}},stopSound:function(a){if(void 0!==b[a]&&null!==b[a])try{b[a].elem.pause(),b[a].elem.currentTime=0}catch(c){}},stopAllNonLoopSounds:function(){var a;for(a in b)b.hasOwnProperty(a)&&(b[a].looping||CreatureGame.audio.stopSound(a))},stopAllSounds:function(){var a;for(a in b)b.hasOwnProperty(a)&&CreatureGame.audio.stopSound(a)},setSoundVolume:function(a,c){void 0!==b[a]&&null!==b[a]&&(b[a].volume=c,b[a].elem.volume=CreatureGame.MathFunctions.clamp(b[a].volume*d,0,1))},setMasterVolume:function(a){var c;d=a;for(c in b)b.hasOwnProperty(c)&&(b[c].elem.volume=CreatureGame.MathFunctions.clamp(b[c].volume*(e?0:d),0,1))},setSoundSpeed:function(a,b){return void 0},mute:function(){var a;e=!0;for(a in b)b.hasOwnProperty(a)&&(b[a].elem.volume=0)},unmute:function(){var a;e=!1;for(a in b)b.hasOwnProperty(a)&&(b[a].elem.volume=CreatureGame.MathFunctions.clamp(b[a].volume*d,0,1))},pause:function(){var a;for(a in b)b.hasOwnProperty(a)&&b[a].isPlaying&&(this.stopSound(a),("music"===b[a].type||"effect"===b[a].type)&&(c[a]=b[a]))},resume:function(){var a;for(a in c)c.hasOwnProperty(a)&&this.playSound(a,b[a].looping,b[a].callback);c=[]}};return f.init(),f}function initAudio(){"use strict";function a(){}if(!CreatureGame.support.webAudio)return new AlternateAudio;window.AudioContext=window.AudioContext||window.webkitAudioContext;var b,c=null,d={},e={},f={},g=1,h=!1;return b={init:function(){c=new AudioContext,c.createGain=c.createGain||c.createGainNode,c.createDelay=c.createDelay||c.createDelayNode,c.createScriptProcessor=c.createScriptProcessor||c.createJavaScriptNode,c.setTargetAtTime=c.setTargetAtTime||c.setTargetValueAtTime,f.gain=c.createGain(),f.gain.connect(c.destination)},loadSound:function(b,e,g,h,i){var j,k="./assets/sound/";if(k+=CreatureGame.support.ogg?"vo/"+e+".ogg":"vo/"+e+".mp3",void 0!==d[b])return void i();if(d[b]={ready:!0,buffer:null,volume:c.createGain(),type:g},void 0!==d[b])return void i();void 0!==h&&null!==h&&(d[b].volume.gain.value=h);var l=createjs.RequestUtils.isCrossDomain(k),m={},n=null;window.XMLHttpRequest&&(j=new XMLHttpRequest,l&&void 0===j.withCredentials&&window.XDomainRequest&&(j=new XDomainRequest)),l&&n instanceof XMLHttpRequest&&1==this._xhrLevel&&(m.Origin="Access-Control-Allow-Origin: *"),l||m["X-Requested-With"]||(m["X-Requested-With"]="XMLHttpRequest"),null===k.mimeType&&createjs.RequestUtils.isText(k.type)&&(k.mimeType="text/plain; charset=utf-8"),l?j.open(createjs.AbstractLoader.GET,k,!0):(j.open("GET",k,!0),j.responseType="arraybuffer",j.onload=function(){200===j.status?c.decodeAudioData(j.response,function(a){d[b].buffer=a,d[b].ready=!0,d[b].looping=!1,d[b].volume.connect(f.gain),void 0!==i&&null!==i&&i()},a):a()}),j.send()},playSound:function(a,b,e){if(void 0!==d[a]&&null!==d[a]&&d[a].ready){d[a].callback=e,d[a].isPlaying=!0;var f=function(){void 0!==d[a].callback&&d[a].callback(),d[a].isPlaying=!1};d[a].source=c.createBufferSource(),d[a].source.start=d[a].source.start||d[a].source.noteOn,d[a].source.stop=d[a].source.stop||d[a].source.noteOff,d[a].source.loop=b||!1,d[a].looping=d[a].source.loop,d[a].source.buffer=d[a].buffer,d[a].source.connect(d[a].volume),void 0!==d[a].source.onended?d[a].source.onended=f:d[a].timeout=setTimeout(f,1e3*d[a].buffer.duration),d[a].source.start(0)}},playAudio:function(a,b){if(void 0!==d[a]&&null!==d[a]&&d[a].ready){d[a].callback=b,d[a].isPlaying=!0;var c=function(){void 0!==d[a].callback&&d[a].callback(),d[a].isPlaying=!1};app.voPlayer.stop(),app.voPlayer.play(a,function(){c(),tutorialManager.ready=!0})}},playDialog:function(a,b){if(void 0!==d[a]&&null!==d[a]&&d[a].ready){d[a].callback=b,d[a].isPlaying=!0;var c=function(){void 0!==d[a].callback&&d[a].callback(),d[a].isPlaying=!1};app.sound.play(a,function(){c(),tutorialManager.ready=!0})}},stopSound:function(a){if(void 0!==d[a]&&null!==d[a]&&d[a].ready&&void 0!==d[a].source&&null!==d[a].source)try{d[a].source.stop(0),void 0!==d[a].timeout&&null!==d[a].timeout&&clearTimeout(d[a].timeout)}catch(b){}},stopAllNonLoopSounds:function(){var a;for(a in d)d.hasOwnProperty(a)&&(d[a].looping||CreatureGame.audio.stopSound(a))},stopAllSounds:function(){app.sound.stopAll(),app.voPlayer.stop();var a;for(a in d)d.hasOwnProperty(a)&&CreatureGame.audio.stopSound(a)},setSoundVolume:function(a,b){void 0!==d[a]&&null!==d[a]&&(d[a].volume.gain.value=b)},setMasterVolume:function(a){g=a,f.gain.gain.value=h?0:a},setSoundSpeed:function(a,b){b!==d[a].source.playbackRate.value&&(d[a].source.playbackRate.value=b)},mute:function(){h=!0,f.gain.gain.value=0},unmute:function(){h=!1,f.gain.gain.value=g},pause:function(){var a;for(a in d)d.hasOwnProperty(a)&&d[a].isPlaying&&(this.stopSound(a),("music"===d[a].type||"effect"===d[a].type)&&(e[a]=d[a]))},resume:function(){var a;for(a in e)e.hasOwnProperty(a)&&this.playSound(a,d[a].looping,d[a].callback);e=[]}},b.init(),b}function detectPlatform(){"use strict";var a,b,c,d=navigator.userAgent.toLowerCase(),e={performanceMode:"normal",canvas:!1,touch:!!window.hasOwnProperty("ontouchstart"),iPod:d.search("ipod")>-1,iPhone:d.search("iphone")>-1,iPad:d.search("ipad")>-1,safari:d.search("safari")>-1,ie:d.search("msie")>-1,firefox:d.search("firefox")>-1,android:d.search("android")>-1,chrome:d.search("chrome")>-1,silk:d.search("silk")>-1,iOS:!1,mobile:!1,desktop:!1,multitouch:!1,ogg:!0,m4a:!0,mp3:!0,webAudio:!1};e.iOS=e.iPod||e.iPhone||e.iPad,e.mobile=e.iOS||e.android||e.silk,e.desktop=!e.mobile,e.iOS?e.performanceMode="low":e.mobile&&(e.performanceMode="low"),e.touch&&(e.android?parseInt(d.slice(d.indexOf("android")+8),10)>2&&(e.multitouch=!0):e.multitouch=!0),a=document.createElement("audio"),!a.canPlayType||a.canPlayType&&""!==a.canPlayType('audio/ogg; codecs="vorbis"')||(e.ogg=!1,(e.ie||!a.canPlayType||""===a.canPlayType("audio/mp4"))&&(e.m4a=!1));try{b=void 0!==window.AudioContext?new AudioContext:new window.webkitAudioContext,b.createBufferSource(),e.webAudio=!0}catch(f){}c=document.createElement("canvas");try{e.canvas=!!c.getContext("2d")}catch(f){e.canvas=!!c.getContext}return e}function supportsSvg(){"use strict";return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}function getPerformanceValues(a){"use strict";return"low"===a?{svgClass:"performanceMode",floorClass:"perspective",drawDistance:300,drawMaxAngle:.85,drawGradient:!1,drawAllProps:!1,maxRenderProps:70,horizon:262,frameTime:50}:"high"===a?{svgClass:"superMode",floorClass:"perspective",drawDistance:800,drawMaxAngle:1.4,drawGradient:!0,drawAllProps:!0,maxRenderProps:999,horizon:250,frameTime:26}:{svgClass:"",floorClass:"perspective",drawDistance:800,drawMaxAngle:1,drawGradient:!0,drawAllProps:!1,maxRenderProps:500,horizon:250,frameTime:33}}function elemToFront(a){"use strict";a.parentNode.appendChild(a)}function debugInit(){"use strict";CreatureGame.support.mobile&&$("#debugBox").remove(),CreatureGame.debugWatch=[{name:"Race Leader",value:"CreatureGame.raceStatus.leader"},{name:"ZachProgress",value:"racingZach.getProgress();"},{name:"Racer Weight",value:"CreatureGame.RacerWeight"},{name:"DT",value:"CreatureGame.dt"},{name:"difference",value:"debugDifficultyValue"},{name:"Prop Count",value:"debugDrawCount"},{name:"UpdateCount",value:'debugUpdateCount + "/" + CreatureGame.levelInfo.PropLocations.length'}]}function debugUpdate(){"use strict";return void 0}function orientationChange(){return 180===window.orientation||0===window.orientation?"portrait":"landscape"}function resizeContent(){(currentView!==prevMode||null===prevMode)&&(CreatureGame.support.iPhone?$("#gamepage").css("width","91%").css("height","91%"):$("#gamepage").css("width","95%").css("height","95%"))}function gameResize(){currentView=orientationChange(),setTimeout(function(){var a=$("#"+CreatureGame.MAIN_ELEMENT)[0].getClientRects(),b=a[0].width/a[0].height,c=CreatureGame.FrameSize.x/CreatureGame.FrameSize.y,d=b>c?a[0].height/CreatureGame.FrameSize.y:a[0].width/CreatureGame.FrameSize.x;$("#GameCenter")[0].setAttribute("style","transform: scale("+d+"); -webkit-transform: scale("+d+")"),stageWidth=window.innerWidth,(currentView!==prevMode||null===prevMode)&&(!CreatureGame.support.iOS||180!==window.orientation&&0!==window.orientation||null===oreintation?$("#gamepage").css("width","100%").css("height","100%"):(oreintation=window.orientation,CreatureGame.support.iPhone?$("#gamepage").css("width","91%").css("height","91%"):$("#gamepage").css("width","95%").css("height","95%"))),null===oreintation&&(oreintation=window.orientation),prevMode=currentView},500)}function GameInit(){function a(){setTimeout(function(){var a=$("#"+CreatureGame.MAIN_ELEMENT)[0].getClientRects(),b=a[0].width/a[0].height,c=CreatureGame.FrameSize.x/CreatureGame.FrameSize.y,d=b>c?a[0].height/CreatureGame.FrameSize.y:a[0].width/CreatureGame.FrameSize.x;$("#GameCenter")[0].setAttribute("style","transform: scale("+d+"); -webkit-transform: scale("+d+")")},500)}var b,c=supportsSvg();if(!c)return void(location.href="./svg_not_supported.html");!window.console,window.Array&&!window.Array.isArray&&(window.Array.isArray=function(a){return a instanceof Array});try{CreatureGame.minigame=new PBS.KIDS.KartKingdom.minigame(CreatureGame.GUID_GAME,CreatureGame.MAIN_ELEMENT,CreatureGame.pause,CreatureGame.resume)}catch(d){CreatureGame.minigame=null}CreatureGame.support=detectPlatform(),CreatureGame.performance=getPerformanceValues(CreatureGame.support.performanceMode),CreatureGame.audio=initAudio(),CreatureGame.help=initHelp(),CreatureGame.powerUpScreen=initPowerUpScreen(),CreatureGame.currentPowerUp=new PowerUp(PowerUpInfo.PowerUpTypes.None),touchInit(),debugInit(),$("#svgCanvas")[0].setAttribute("class",CreatureGame.performance.svgClass),$("#FloorCanvas")[0].setAttribute("class",CreatureGame.performance.floorClass),document.body.onorientationchange=a,window.onresize=a,a(),setTimeout(function(){a()},500),CreatureGame.pauseElement=document.createElementNS(svgns,"rect"),CreatureGame.pauseElement.setAttribute("x","0"),CreatureGame.pauseElement.setAttribute("y","0"),CreatureGame.pauseElement.setAttribute("width",CreatureGame.FrameSize.x.toString()),CreatureGame.pauseElement.setAttribute("height",CreatureGame.FrameSize.y.toString()),CreatureGame.pauseElement.setAttribute("fill","rgba(0,0,0,0)"),CreatureGame.pauseElement.setAttribute("style","display:none"),CreatureGame.frontCanvas=document.getElementById("GameCanvas"),CreatureGame.frontContext=CreatureGame.frontCanvas.getContext("2d"),CreatureGame.floorCanvas=document.getElementById("FloorCanvas"),CreatureGame.floorContext=CreatureGame.floorCanvas.getContext("2d"),CreatureGame.sceneManager=new SceneManager,CreatureGame.sceneManager.addScene(createRacingScene()),CreatureGame.sceneManager.addScene(createLabScene()),CreatureGame.sceneManager.addScene(createSplashScene()),CreatureGame.timer=createGameTimer(CreatureGame.performance.frameTime,function(){var a=new Date,b=a-CreatureGame.time;CreatureGame.dt=b/1e3,CreatureGame.time=a,app.gamePaused?CreatureGame.isPaused=!0:CreatureGame.isPaused=!1,CreatureGame.isPaused?CreatureGame.audio.pause():(CreatureGame.audio.resume(),CreatureGame.sceneManager.update(),CreatureGame.sceneManager.draw(CreatureGame.frontContext)),debugUpdate(),CreatureGame.support.iOS&&window.scrollTo(0,0)}),b={images:[{name:"help_close",src:"./assets/images/LabAssets/help_close.png"},{name:"help_close_press",src:"./assets/images/LabAssets/help_close_press.png"},{name:"help",src:"./assets/images/LabAssets/help.png"},{name:"loadingBackground",src:"./assets/images/AvivaLoading2.png"},{name:"loadingAvivaAnim",src:"./assets/images/Animations/Aviva_loading_285x500.png",anim:{frames:4,direction:"x",time:.4,startPaused:!0}},{name:"staticAnim",src:"./assets/images/Animations/channel_change248x144.png",anim:{frames:2,direction:"y",time:.2,startPaused:!0}},{name:"loading_racer_cheetah",src:"./assets/images/Racers/cheetah.png"},{name:"loading_racer_falcon",src:"./assets/images/Racers/falcon.png"},{name:"loading_racer_pronghorn",src:"./assets/images/Racers/pronghorn.png"},{name:"loading_racer_skunk",src:"./assets/images/Racers/skunk.png"},{name:"loading_racer_tortoise",src:"./assets/images/Racers/tortoise.png"}],sounds:[{name:"click",path:"click",type:"effect"}]},CreatureGame.PreLoadFromList(b.images,b.sounds,function(){app.sound.preload("click",CreatureGame.sceneManager.changeScene("splashScene")),setupKeys(),CreatureGame.timer.start(),app.start=!0})}function gameUpdate(){setTimeout(function(){CreatureGame.sceneManager.update(),loopTime++,calltime>loopTime&&gameUpdate()},1e3)}function onVisibilityChange(){if(void 0!==CreatureGame.audio||null!==CreatureGame.audio){document.visibilityState}}function preparePauseMenu(a){"use strict";createButton(20,450,171,100,a,{text:"",sound:"click",up:"./assets/images/Menu UI/quit_off.png",down:"./assets/images/Menu UI/quit_on.png",event:function(){app.sound.play("click"),CreatureGame.help.close(),app.sound.stopAll(),CreatureGame.sceneManager.preloadScene(),app.sound.preload(app.labAudio,function(){CreatureGame.sceneManager.changeScene("labScene")})}}),createButton(220,450,171,100,a,{text:"",sound:"click",up:"./assets/images/Menu UI/restart_off.png",down:"./assets/images/Menu UI/restart_on.png",event:function(){app.sound.play("click"),CreatureGame.help.close(),CreatureGame.sceneManager.reset()}}),createButton(420,450,171,100,a,{text:"",sound:"click",up:"./assets/images/Menu UI/resume_off.png",down:"./assets/images/Menu UI/resume_on.png",event:function(){app.sound.play("click"),CreatureGame.help.close()}})}function initHelp(){"use strict";var a=!1,b=0,c=[],d={screen:$("#lab_help_screen_svg")[0],helpToggle:$("#help_toggle_button")[0],openButton:$("#help_button_open")[0],closeButton:$("#help_button_close")[0],contentId:"#lab_help"},e=$("#helpPageButtons")[0];return d.currentButtonGroup=d.openButton,d.open=function(){a||goStart||(elemToFront(d.screen),$("#help_content").children().hide(),$(d.contentId).show(),c=$(d.contentId).children(".helpPage"),b=0,c.length>1?(d.showPage(b),$(e).show()):$(e).hide(),$(d.screen).show(),a=!0,d.currentButtonGroup=d.closeButton,elemToFront(d.helpToggle),elemToFront(d.currentButtonGroup))},d.showPage=function(a){$(c).hide(),$(c[a]).show(),$("#pageCountText")[0].textContent="Page "+(a+1)+"/"+c.length},d.nextPage=function(){b<c.length-1&&(b+=1,d.showPage(b))},d.previousPage=function(){b>0&&(b-=1,d.showPage(b))},d.close=function(){$(d.screen).hide(),a=!1,d.currentButtonGroup=d.openButton,elemToFront(d.helpToggle),elemToFront(d.currentButtonGroup)},touchEvents({item:d.helpToggle,down:function(){$(d.currentButtonGroup).children("image")[1].setAttribute("style","")},up:function(){$(d.currentButtonGroup).children("image")[1].setAttribute("style","display:none;"),a?d.close():d.open()}}),createButton(770,488,62,61,e,{text:"",sound:"click",up:"./assets/images/Menu UI/left_off.png",down:"./assets/images/Menu UI/left_on.png",event:d.previousPage}),createButton(845,488,62,61,e,{text:"",sound:"click",up:"./assets/images/Menu UI/right_off.png",down:"./assets/images/Menu UI/right_on.png",event:d.nextPage}),preparePauseMenu($("#race_pause")[0]),d}function setupKeys(){"use strict";document.body.onkeydown=function(a){keyStates[a.keyCode]=!0,192===a.keyCode&&$("#debugBox").toggle(),BlockDefaultKeys.indexOf(a.keyCode)>-1&&(a.preventDefault(),a.stopPropagation())},document.body.onkeyup=function(a){keyStates[a.keyCode]=!1,BlockDefaultKeys.indexOf(a.keyCode)>-1&&(a.preventDefault(),a.stopPropagation())}}function isKeyDown(a){"use strict";return void 0!==keyStates[a]&&null!==keyStates[a]?keyStates[a]:!1}function leftControl(){"use strict";return RacingPlayer.controls.left||isKeyDown(37)||isKeyDown(65)}function rightControl(){"use strict";return RacingPlayer.controls.right||isKeyDown(39)||isKeyDown(68)}function getRaceTimes(a){"use strict";var b,c;for(b in a)a.hasOwnProperty(b)&&(BestTimes[b]=0,c=CookieJar.read(b+"_best_time"),null!==c&&(BestTimes[b]=parseInt(c,10)))}function saveRaceTime(a,b){"use strict";BestTimes[a]=b,CookieJar.write(a+"_best_time",b)}function createLabScene(){"use strict";function a(){var a=4===$(".powerSlot[data-speedpower]").length;J=a?"":"ADD ABILITY",I=a?null:document.getElementById("image_addbutton")}function b(){function a(){b=h,k.animDetails.reset(),l.animDetails.reset(),i=!1}var b,c,d=.466,e=320,f=D,g=!0,h=null,i=!1,j=!1,k=document.getElementById("image_avivaTalkLeft"),l=document.getElementById("image_avivaTalkRight"),m=document.getElementById("image_avivaTurnHead"),n=document.getElementById("image_avivaReactLeft"),o=document.getElementById("image_avivaReactRight"),p={x:430,y:220,w:e*d,h:e};return k.animDetails.pause(!0),l.animDetails.pause(!0),b=k,setupAnimation(m,{frames:6,direction:"x",time:.7,startPaused:!1,playOnce:!0,onComplete:a}),setupAnimation(n,{frames:8,direction:"x",time:1,startPaused:!0,playOnce:!0,onComplete:a}),setupAnimation(o,{frames:8,direction:"x",time:1,startPaused:!0,playOnce:!0,onComplete:a}),isAvivaTalking=function(){return j},c={update:function(){f===D||E!==D||i||(0!==D||g?0!==D&&g&&(h=l,b=m,b.animDetails.reset(),b.animDetails.reverse(!1),b.animDetails.pause(!1),g=!1):(h=k,b=m,b.animDetails.reset(),b.animDetails.reverse(!0),b.animDetails.pause(!1),g=!0),f=D),void 0!==b.animDetails&&b.animDetails.update()},draw:function(a){void 0!==b.animDetails?b.animDetails.draw(a,p.x,p.y,p.w,p.h):a.drawImage(b,p.x,p.y,p.w,p.h)},talk:function(a){k.animDetails.pause(!a),l.animDetails.pause(!a),j=a},react:function(){i||(h=b,b=b===l?o:n,b.animDetails.reset(),b.animDetails.pause(!1),i=!0)}}}function c(){var a=$(".powerSlot");CreatureGame.RacerWeight=0,CreatureGame.CurrentPowers=[],a.each(function(a,b){if(b.hasAttribute("data-speedpower")){var c=b.getAttribute("data-speedpower");v=AnimalPowers.movement[c]||AnimalPowers.special[c],CreatureGame.CurrentPowers.push(c),CreatureGame.RacerWeight+=v.stats.Weight.value}}),CreatureGame.RacerWeight=CreatureGame.MathFunctions.clamp(CreatureGame.RacerWeight,.01,1),CreatureGame.RacerWeight>.8&&tutorialManager.trigger("racer_overweight"),a.each(function(a,b){var c,d,e=$(b).children(".slotfg")[0];null!==e&&void 0!==e&&(b.hasAttribute("data-speedpower")?(c=b.getAttribute("data-speedpower"),d=AnimalPowers.movement[c]||AnimalPowers.special[c],d.effect.height>10&&CreatureGame.RacerWeight>.8?e.setAttribute("style","fill:red"):e.setAttribute("style","")):e.setAttribute("style",""))})}function d(){c(),CreatureGame.CurrentLevelInfo=B[C],CreatureGame.CurrentLevelName=C,CreatureGame.sceneManager.preloadScene(),app.sound.preload(app.raceAudio,function(){CreatureGame.sceneManager.changeScene("racingScene")}),setTimeout(function(){goStart=!1},500)}function e(){E===PAN_MAX&&A===!1?(A=!0,tutorialManager.markTutorialFlashComplete("go"),tutorialManager.stopAllSounds(),goStart=!0,app.sound.stopAll(),app.voPlayer.stop(),app.voPlayer.play("lets_race",function(){d(),$(s).hide(),$(l).show(),$(m).children(".upimg")[0].setAttributeNS(xlinkns,"href","./assets/images/LabAssets/right_off.png"),app.sound.unload(app.labAudio)})):goStart===!1&&(tutorialManager.trigger("levels_next"),tutorialManager.trigger("powers_intro"),D=PAN_MAX,$(n).show(),$(s).show(),$(l).hide(),$(m).children(".upimg")[0].setAttributeNS(xlinkns,"href","./assets/images/LabAssets/right_go.png"),$("#powerSlots").fadeIn(),tutorialManager.markTutorialFlashComplete("next"))}function f(){goStart===!1&&(D=PAN_MIN,$(n).hide(),$(s).hide(),$(l).show(),$(m).children(".upimg")[0].setAttributeNS(xlinkns,"href","./assets/images/LabAssets/right_off.png"))}function g(){if(goStart===!1){var b,d=$(".powerSlot:not([data-speedpower])"),e=d[0],f=e;if(app.sound.play("click"),tutorialManager.markTutorialFlashComplete("addButton"),null===f||null===G||void 0===f||void 0===G)return;b=G.id.substr(6),f.setAttribute("data-speedpower",b),$(f).children(".slotIcon")[0].setAttributeNS(xlinkns,"href",document.getElementById("image_icon_"+b).src),$(f).children(".slotIcon")[0].setAttribute("style",""),$(f).children(".slotempty")[0].setAttribute("style","display:none;"),isAvivaTalking()||tutorialManager.trigger("powers_add"),
4===d.length&&tutorialManager.trigger("powers_full"),e.TouchEventInfo.down(null,e),a(),c()}}function h(b,c){if(goStart===!1){app.sound.play("click"),$(w).attr("class","powerSlot"),$(c).attr("class","powerSlot selected");var d,e=c.getAttribute("data-speedpower");null!==e?(u.changeTo(e,!1),a()):(null!==G&&(d=G.id.substr(6),u.changeTo(d),a()),isAvivaTalking()||tutorialManager.trigger("select_empty"))}}function i(a,b){return void 0}function j(a,b){goStart===!1&&(v=b.parentNode.getAttribute("data-speedpower"),b.parentNode.removeAttribute("data-speedpower"),$(b.parentNode).children(".slotIcon")[0].setAttribute("style","display: none;"),$(b.parentNode).children(".slotempty")[0].setAttribute("style",""),isAvivaTalking()||tutorialManager.trigger("powers_remove"),b.parentNode.TouchEventInfo.down(a,b.parentNode),u.changeTo(v),c())}var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=!1,B=app.levels.levels,C=null,D=0,E=0,F=document.getElementById("lab_screen_svg"),G=null,H=null,I=null,J="ADD ABILITY",K=null,L=!1,M=0,N=[],O=[],P=[];k={name:"labScene",preloadItems:{images:[{name:"wide_bg",src:"./assets/images/LabAssets/wide_background.jpg"},{name:"start_race_button_off",src:"./assets/images/LabAssets/button_off.png"},{name:"start_race_button_on",src:"./assets/images/LabAssets/button_on.png"},{name:"help_button_off",src:"./assets/images/LabAssets/help.png"},{name:"help_button_on",src:"./assets/images/LabAssets/help_press.png"},{name:"help_close_button_off",src:"./assets/images/LabAssets/help_close.png"},{name:"help_close_button_on",src:"./assets/images/LabAssets/help_close_press.png"},{name:"left_arrow_off",src:"./assets/images/LabAssets/arrow_left.png"},{name:"left_arrow_on",src:"./assets/images/LabAssets/arrow_left_press.png"},{name:"right_arrow_off",src:"./assets/images/LabAssets/arrow_right.png"},{name:"right_arrow_on",src:"./assets/images/LabAssets/arrow_right_press.png"},{name:"racer_screen",src:"./assets/images/LabAssets/racer_screen.png"},{name:"addbutton",src:"./assets/images/LabAssets/icon_add.png"},{name:"removebutton",src:"./assets/images/LabAssets/icon_remove.png"},{name:"level_info",src:"./assets/images/LabAssets/level_info.png"},{name:"racer_base",src:"./assets/images/Racers/base_racer.png"},{name:"avivaTalkLeft",src:"./assets/images/Animations/Aviva_TalkLeft_233x500.png",anim:{frames:3,direction:"x",time:.3}},{name:"avivaTalkRight",src:"./assets/images/Animations/Aviva_TalkRight_233x500.png",anim:{frames:3,direction:"x",time:.3}},{name:"avivaTurnHead",src:"./assets/images/Animations/Aviva_TurnHead_233x500.png"},{name:"avivaReactLeft",src:"./assets/images/Animations/Aviva_Laugh_Left233x510.png"},{name:"avivaReactRight",src:"./assets/images/Animations/Aviva_Laugh_Right233x510.png"}],sounds:[{name:"labintro",path:"labintro",type:"dialog"},{name:"powersintro",path:"powersintro",type:"dialog"},{name:"lab_tuts_levelconditions",path:"lab_tuts_levelconditions",type:"dialog"},{name:"lab_tuts_hitnext",path:"lab_tuts_hitnext",type:"dialog"},{name:"lab_tuts_powers",path:"lab_tuts_powers",type:"dialog"},{name:"lab_tuts_remove",path:"lab_tuts_remove",type:"dialog"},{name:"lab_tuts_begin",path:"lab_tuts_begin",type:"dialog"},{name:"lab_tuts_powerstats",path:"lab_tuts_powerstats",type:"dialog"},{name:"lab_description_weight",path:"lab_description_weight",type:"dialog"},{name:"lab_description_cost",path:"lab_description_cost",type:"dialog"},{name:"lab_description_duration",path:"lab_description_duration",type:"dialog"},{name:"lab_tuts_movement_attachments",path:"lab_tuts_movement_attachments",type:"dialog"},{name:"lab_tuts_defensive_attachments",path:"lab_tuts_defensive_attachments",type:"dialog"},{name:"lab_tuts_emptyslot",path:"lab_tuts_emptyslot",type:"dialog"},{name:"racer_too_heavy",path:"racer_too_heavy",type:"dialog"},{name:"attachment_removed",path:"attachment_removed",type:"dialog"},{name:"lets_race",path:"lets_race",type:"dialog"},{name:"add_1",path:"add_1",type:"dialog"},{name:"add_2",path:"add_2",type:"dialog"},{name:"add_3",path:"add_3",type:"dialog"},{name:"aviva_react_1",path:"aviva_react_1",type:"effect"},{name:"aviva_react_2",path:"aviva_react_2",type:"effect"},{name:"aviva_react_3",path:"aviva_react_3",type:"effect"},{name:"aviva_react_4",path:"aviva_react_4",type:"effect"},{name:"activate_Cheetah2",path:"activate_Cheetah2",type:"effect"},{name:"activate_otter",path:"activate_otter",type:"effect"},{name:"activate_hummingbird",path:"activate_hummingbird",type:"effect"},{name:"activate_falcon2",path:"activate_falcon2",type:"effect"},{name:"activate_dolphin",path:"activate_dolphin",type:"effect"},{name:"activate_skunk",path:"activate_bison",type:"effect"},{name:"activate_bison",path:"activate_bison",type:"effect"},{name:"setup_intro",path:"setup_intro",type:"dialog"}]},init:function(){var a,c=$("#help_button_open > image");getRaceTimes(B),c[0].setAttributeNS(xlinkns,"href","./assets/images/LabAssets/help.png"),c[1].setAttributeNS(xlinkns,"href","./assets/images/LabAssets/help_press.png"),CreatureGame.help.contentId="#lab_help",F.setAttribute("style",""),app.sound.play("music_loop_menu01",{loop:!0});for(a in AnimalPowers.movement)AnimalPowers.movement.hasOwnProperty(a)&&null===G&&(G=document.getElementById("image_"+a));A=!1,D=0,E=0,K=CreatureGame.labAviva=b(),$(n).hide(),app.onresize=!0,tutorialManager.trigger("setup_intro"),tutorialManager.trigger("levels_intro")},uninit:function(){F.setAttribute("style","display:none"),app.sound.stop("music_loop_menu01"),tutorialManager.stopAllSounds();for(var a=$("#GameImages").children().length;a--;)for(var b=0;b<labsceneImages.length-1;b++)if($("#GameImages").children()[a].id&&$("#GameImages").children()[a].id==="image_"+labsceneImages[b].name){$("#image_"+labsceneImages[b].name).remove();break}},update:function(){D>E?E+=CreatureGame.dt*PAN_SPEED:E>D&&(E-=CreatureGame.dt*PAN_SPEED),E=CreatureGame.MathFunctions.clamp(E,PAN_MIN,PAN_MAX),L||0===M||(M*=.8,Math.abs(M)<1&&(M=0)),null!==G&&G.animDetails.update(),K.update(),tutorialManager.updateTutorialFlash(D===PAN_MIN?"left":"right")},draw:function(b){var c,d,e,f,g,h,i,j,k,l,m,n=CreatureGame.MathFunctions.clamp(E-M/2,PAN_MIN,PAN_MAX),s=!1;for(document.getElementById("lab_screen_svg").transform.baseVal.getItem(0).matrix.e=-n,b.setTransform(1,0,0,1,0,0),b.fillStyle="black",b.fillRect(0,0,988,556),b.setTransform(1,0,0,1,-n,0),b.drawImage(document.getElementById("image_wide_bg"),0,0,1427,556),b.fillStyle="#1B1B27",b.fillRect(710,330,197,20),b.fillStyle=CreatureGame.RacerWeight<=.8?"#4870B6":"red",b.fillRect(710,330,197*CreatureGame.RacerWeight,20),b.fillStyle="white",b.font="24px DINE",b.fillText("Weight",640,348),b.drawImage(document.getElementById("image_terrain_"+C),80,169,287,155),b.drawImage(document.getElementById("image_level_info"),70,359,312,116),b.textAlign="start",b.fillStyle="#75F8E6",b.font="28px DINE",b.fillText("DIFFICULTY",100,420),b.fillText("BEST TIME",100,450),c=BestTimes[C],d=parseInt(c/60,10),e=parseInt(c-60*d,10),f=10>e?":0":":",b.fillText(d+f+e,230,450),CreatureGame.frontContext.beginPath(),o=0;LEVEL_DIFFICULTY_MAX>o;o+=1)CreatureGame.frontContext.moveTo(237+20*o,410),B[C].difficulty>o?canvasCircle(230+20*o,410,7,"#75F8E6","#75F8E6",2):(s===!1&&(s=!0,CreatureGame.frontContext.fill(),CreatureGame.frontContext.stroke(),CreatureGame.frontContext.beginPath()),canvasCircle(230+20*o,410,7,"#001225","#75F8E6",2));CreatureGame.frontContext.fill(),CreatureGame.frontContext.stroke(),null===I&&a(),null!==I&&b.drawImage(I,1120,295,33,33),b.textAlign="start",b.fillStyle="white",b.strokeStyle="black",b.font="28px DINE",b.fillText(J,1170,320),null!==G&&G.animDetails.draw(b,1058,151,275,145,!0),E>PAN_MAX_60?(p=$(".powerSlot.selected")[0],q=p.getAttribute("data-speedpower"),null!==q?drawFitImage(b,document.getElementById("image_racer_"+q),0,0,450,260,488,35,495,246):drawFitImage(b,document.getElementById("image_racer_base"),0,0,450,260,488,35,495,246)):PAN_MAX_40>E&&(r=document.getElementById("image_terrain_large_"+C),drawFitImage(b,document.getElementById("image_terrain_large_"+C),0,0,r.naturalWidth,r.naturalHeight,468,35,495,286)),K.draw(b),i=null!==H?H:{Weight:{value:0,display:!0},Cost:{value:0,display:!0},Duration:{value:0,display:!0}},g=1055,h=425;for(l in i)i.hasOwnProperty(l)&&i[l].display&&(b.textAlign="start",b.fillStyle="white",b.strokeStyle="black",b.font="24px DINE",b.fillText(l,g,h),h+=28,b.fillStyle="black",b.fillRect(1180,h-45,180,15),b.fillStyle="#4870B6",b.fillRect(1180,h-45,180*(i[l].value/ITEM_INFO_MAX[l]),15));k=0;for(l in i)if(i.hasOwnProperty(l))for(j in COMPARABLE_INFO)if(COMPARABLE_INFO[j]===l){m=50*i[l].value,k=m>k?m:k;break}b.fillStyle="white",b.fillText("Top Speed",1055,380),b.fillStyle="#4870B6",b.fillText(k+DEFAULT_VELOCITY+"mph",1180,380)}},touchEvents({item:$("#desc_weight")[0],down:function(){isAvivaTalking()||tutorialManager.trigger("description_weight")}}),touchEvents({item:$("#desc_cost")[0],down:function(){isAvivaTalking()||tutorialManager.trigger("description_cost")}}),touchEvents({item:$("#desc_duration")[0],down:function(){isAvivaTalking()||tutorialManager.trigger("description_duration")}}),s=document.createElementNS(svgns,"image"),s.setAttributeNS(xlinkns,"href","./assets/images/LabAssets/icon_go.png"),s.setAttribute("x","17"),s.setAttribute("y","26"),s.setAttribute("width","50"),s.setAttribute("height","50"),t=s.cloneNode(!0),t.setAttributeNS(xlinkns,"href","./assets/images/LabAssets/icon_terrain.png"),t.setAttribute("x","35"),l=s.cloneNode(!0),l.setAttributeNS(xlinkns,"href","./assets/images/LabAssets/icon_powers.png"),m=createButton(860,463,100,100,F,{text:"",sound:"click",up:"./assets/images/LabAssets/right_off.png",down:"./assets/images/LabAssets/right_press.png",event:e}),n=createButton(753,463,100,100,F,{text:"",sound:"click",up:"./assets/images/LabAssets/left_off.png",down:"./assets/images/LabAssets/left_press.png",event:f}),m.appendChild(s),m.appendChild(l),n.appendChild(t),$(s).hide();for(z in B)B.hasOwnProperty(z)&&(N.push(z),k.preloadItems.images.push({name:"terrain_"+z,src:"./assets/images/LabAssets/MapImages/"+B[z].image}),k.preloadItems.images.push({name:"terrain_large_"+z,src:"./assets/images/LabAssets/MapImages/"+B[z].image_large}));createSelectionBox(98,100,250,70,F,{entries:N,title:"Terrain",titleAlign:"right",onchange:function(a){C=a,CreatureGame.CurrentLevel=B[a].levelfile}});for(z in AnimalPowers.movement)AnimalPowers.movement.hasOwnProperty(z)&&(v=AnimalPowers.movement[z],O.push(z),k.preloadItems.images.push({name:z,src:"./assets/images/Animations/"+v.images.animation,anim:v.images.animationDetails}),k.preloadItems.images.push({name:"icon_"+z,src:"./assets/images/LabAssets/AnimalIcons/"+v.images.icon}),k.preloadItems.images.push({name:"racer_"+z,src:"./assets/images/Racers/"+v.images.racer}));for(z in AnimalPowers.special)AnimalPowers.special.hasOwnProperty(z)&&(v=AnimalPowers.special[z],P.push(z),k.preloadItems.images.push({name:z,src:"./assets/images/Animations/"+v.images.animation,anim:v.images.animationDetails}),k.preloadItems.images.push({name:"icon_"+z,src:"./assets/images/LabAssets/AnimalIcons/"+v.images.icon}),k.preloadItems.images.push({name:"racer_"+z,src:"./assets/images/Racers/"+v.images.racer}));for(u=createSelectionBox(1072,71,250,70,F,{entries:O,page2Entries:P,title:"",onchange:function(b,c){if(goStart===!1){try{G=document.getElementById("image_"+b),H=c?AnimalPowers.special[b].stats:AnimalPowers.movement[b].stats}catch(d){H=null}a()}},tabs:["Movement","Special"],swipeAreaCallback:g}),a(),w=$(".powerSlot"),o=0;o<w.length;o+=1)touchEvents({item:w[o],down:h,up:i}),touchEvents({item:$(w[o]).children(".removeButton")[0],down:j});return touchEvents({item:$("#avivaButton")[0],down:function(){goStart===!1&&K.react()}}),x=$("#lab_tutorial_highlights")[0],x.parentNode.appendChild(x),y=document.createElementNS(svgns,"path"),y.setAttribute("d","m239,0 775,0 0,370 -430,0 0,-162 -120,0 0,337 121,0 0,-73 172,0 0,75 -733,0 0,-194 378,0 0,-245"),y.setAttribute("fill","rgba(0,255,255,0.0)"),F.appendChild(y),touchEvents({item:y,down:function(a,b){L=!0},move:function(a,b,c,d){L&&(M+=b,M=CreatureGame.MathFunctions.clamp(M,-200,200),-200===M&&D===PAN_MIN?(e(),L=!1):200===M&&(f(),L=!1))},up:function(a,b){L=!1}}),k}function PathAnimation(a,b,c,d){"use strict";var e,f,g,h,i=a,j=i[0],k=0,l=c||function(){return void 0},m={avgTotalLength:0,avgLengthByIndex:[],lengthsByIndex:[]};for(e=0;e<i.length;e+=1)k=i[e].index>k?i[e].index:k,void 0===m.lengthsByIndex[i[e].index]&&(m.lengthsByIndex[i[e].index]=[]),i[e].segmentLength=i[e].path.getTotalLength(),m.lengthsByIndex[i[e].index].push(i[e].segmentLength);for(e=0;e<m.lengthsByIndex.length;e+=1){for(g=0,f=0;f<m.lengthsByIndex[e].length;f+=1)g+=m.lengthsByIndex[e][f];m.avgLengthByIndex[e]=g/m.lengthsByIndex[e].length,m.avgTotalLength+=m.avgLengthByIndex[e]}this.getPointAtTime=function(a){if(void 0===j)return{x:0,y:0};if("racing"!==CreatureGame.raceStatus.state&&(a=CreatureGame.MathFunctions.clamp(a,0,1)),a>1&&(a-=1,j.index===k?(CreatureGame.EndGame(d),l()):j=this.changeToPath(j.index+1)),void 0===j)return{x:0,y:0};if(0>a&&(a+=1,j=this.changeToPath(j.index-1)),void 0===j)return{x:0,y:0};var b=j.segmentLength;return j.path.getPointAtLength(b*a)},this.getLookAheadPointAtTime=function(a){"racing"!==CreatureGame.raceStatus.state&&(a=CreatureGame.MathFunctions.clamp(a,0,1));var b=j;return a>1&&(a-=1,b=this.changeToPath(j.index+1)),0>a&&(a+=1,b=this.changeToPath(j.index-1)),void 0===b?{x:0,y:0}:(h=b.segmentLength,b.path.getPointAtLength(h*a))},this.getMaxTime=function(){return void 0===j?0:j.segmentLength},this.changeToPath=function(a){a=CreatureGame.MathFunctions.clamp(a,0,k);var c=0,d=[];for(e=0;e<i.length;e+=1)i[e].index===a&&d.push(i[e]);return d.length>1?c=null===b||void 0===b?Math.floor(Math.random()*d.length):b(d):d.length>0&&(c=0),d[c]},this.getRaceLength=function(){return m.avgTotalLength},this.getRaceProgress=function(a){var b,c=0,d=0;for(b=0;k>=b;b+=1)b===j.index?(c+=a,d+=j.segmentLength):(b<j.index&&(c+=m.avgLengthByIndex[b]),d+=m.avgLengthByIndex[b]);return c/d}}function preparePowerUpButtons(a){"use strict";anyPowerUpAvailable=!1,CreatureGame.currentPowerUp.type=PowerUpInfo.PowerUpTypes.None}function initPowerUpScreen(){"use strict";var a,b,c=!1,d=$("#racing_power_up_screen")[0],e=$("#power_up_page_buttons")[0],f=null;return d.open=function(a){preparePowerUpButtons(e),!c&&anyPowerUpAvailable&&(elemToFront(d),$(d).show(),f=a,CreatureGame.pause(),c=!0)},d.close=function(){c&&($(d).hide(),null!==f&&void 0!==f&&f(),CreatureGame.resume(),c=!1)},a=document.createElementNS(svgns,"image"),a.setAttributeNS(xlinkns,"href",GO_ICON.image),a.setAttribute("x",GO_ICON.x.toString()),a.setAttribute("y",GO_ICON.y.toString()),a.setAttribute("width",GO_ICON.width.toString()),a.setAttribute("height",GO_ICON.height.toString()),b=createButton(GO_BUTTON.x,GO_BUTTON.y,GO_BUTTON.width,GO_BUTTON.height,e,{text:"",sound:"click",up:GO_BUTTON.upimg,down:GO_BUTTON.downimg,event:d.close}),b.appendChild(a),d}function PowerUp(a,b,c){"use strict";this.type=void 0!==a?a:PowerUpInfo.PowerUpTypes.None,this.onUse=void 0!==b?b:function(){},this.onComplete=void 0!==c?c:function(){};var d=!1,e=0;switch(a){case PowerUpInfo.PowerUpTypes.TurboBoost:e=PowerUpInfo.TurboBoostDuration;break;case PowerUpInfo.PowerUpTypes.FalconDistractor:e=PowerUpInfo.FalconDistractorDuration;break;case PowerUpInfo.PowerUpTypes.RhinoProtector:e=PowerUpInfo.RhinoProtectorDuration;break;default:e=0}this.use=function(){this.onUse(),d=!0},this.complete=function(){this.onComplete(),this.type=PowerUpInfo.PowerUpTypes.None,d=!1},this.update=function(){d&&e>=0&&this.type!==PowerUpInfo.PowerUpTypes.FalconDistractor&&(e=Math.max(0,e-CreatureGame.dt),0===e&&this.complete())}}function NumberQueue(a){"use strict";var b=[],c=a;this.addValue=function(a){b.push(a),b.length>c&&b.shift()},this.getAverage=function(){var a,c=0;for(a=0;a<b.length;a+=1)c+=b[a];return b.length>0&&(c/=b.length),c},this.clear=function(){b=[]}}function prepareLevelGroups(a,b){"use strict";for(i=0;mapDivisionCount>i;i+=1)for(a.push([]),j=0;mapDivisionCount>j;j+=1)a[i].push([]);for(i=0;i<b.length;i+=1)xIndex=CreatureGame.MathFunctions.clamp(Math.floor(b[i][1]/mapDivisionSize),0,mapDivisionCount-1),yIndex=CreatureGame.MathFunctions.clamp(Math.floor(b[i][2]/mapDivisionSize),0,mapDivisionCount-1),a[xIndex][yIndex].push(i)}function updateMiniMap(){"use strict";void 0===CreatureGame.miniMap&&(CreatureGame.miniMap=$("#path_svg")[0],CreatureGame.miniMap.mapZoom=1),CreatureGame.miniMap.zachPos=$("#zachRepresentation")[0].transform.baseVal.getItem(0).matrix,CreatureGame.miniMap.playerPos=$("#playerRepresentation")[0].transform.baseVal.getItem(0).matrix,CreatureGame.miniMap.scale=CreatureGame.miniMap.transform.baseVal.getItem(0).matrix,CreatureGame.miniMap.translate=CreatureGame.miniMap.transform.baseVal.getItem(1).matrix,direction=[CreatureGame.miniMap.zachPos.e-CreatureGame.miniMap.playerPos.e,CreatureGame.miniMap.zachPos.f-CreatureGame.miniMap.playerPos.f],distance=Math.sqrt(Math.pow(direction[0],2)+Math.pow(direction[1],2))||1,CreatureGame.miniMap.mapZoom=CreatureGame.MathFunctions.clamp(75/Math.abs(distance),.001,.6),CreatureGame.miniMap.scale.a=CreatureGame.miniMap.mapZoom,CreatureGame.miniMap.scale.d=CreatureGame.miniMap.mapZoom,CreatureGame.miniMap.translate.e=-CreatureGame.miniMap.zachPos.e+direction[0]/2,CreatureGame.miniMap.translate.f=-CreatureGame.miniMap.zachPos.f+direction[1]/2}function clearRewardSlot(){"use strict";rewardSlot=$("#rewardSlot .button")[0],null!==rewardSlot.fg&&void 0!==rewardSlot.fg&&rewardSlot.fg.setAttributeNS(xlinkns,"href",document.getElementById("image_powerup_empty").getAttribute("src"))}function createGradColor(c,d,e){"use strict";return r=c[0],g=c[1],b=c[2],a=d,mult=e||1,"rgba("+Math.round(r*mult)+","+Math.round(g*mult)+","+Math.round(b*mult)+","+a+")"}function createRacingScene(){"use strict";var a,b=[],c=[],d="white",e=0,f=null,g=[],h=[],k=new Date,l=null,m=null,n=null,o=[],p=260,q=.65,r=[Math.ceil(1024*q),Math.ceil(449*q)],s=["music_loop_race01","music_loop_race02","music_loop_race03"],t=290,u=373,v=-15,w=[[828,496],[928,436],[828,376],[928,316]],z=[[1,0],[2,0],[2,1],[3,2],[3,1]],A={state:"idle",countdown:4,countSounds:3,lastPassSound:new Date,playerProgress:0,zachProgress:0,leader:"zach"},B=0,C=0,D=1.5,E=!1,F=0,G=[],H={x:0,y:0},I={x:0,y:0},J=!1,K={x:-300,y:-150,width:300,height:150,moveRight:!0,passes:0},L=[],M=[{name:"chris_cheer1_128x225",animName:"npc_chrisCheer",aspect:.5688,found:!1,active:!1,callback:function(){tutorialManager.trigger("move")}},{name:"flag",animName:"npc_flag",aspect:1.209,found:!0,active:!0,callback:function(){return void 0}}];return CreatureGame.raceStatus=A,racingZach=new ZachEnemyPlayer,raceFlash=function(a,b){e=b,d=a},showControlsReminder=function(){D=1.5},touchEvents({item:document.getElementById("controlLeft"),down:function(a,b){a.stopPropagation(),RacingPlayer.controls.left=!0,b.setAttribute("fill","url(#leftButtonGrad)")},up:function(a,b){a.stopPropagation(),RacingPlayer.controls.left=!1,b.setAttribute("fill","none")}}),touchEvents({item:document.getElementById("controlRight"),down:function(a,b){a.stopPropagation(),RacingPlayer.controls.right=!0,b.setAttribute("fill","url(#rightButtonGrad)")},up:function(a,b){a.stopPropagation(),RacingPlayer.controls.right=!1,b.setAttribute("fill","none")}}),CreatureGame.playEffect=function(a){if(currentAnim=document.getElementById("image_effect_"+a),o.indexOf(currentAnim)<0)o.push(currentAnim);else if(void 0!==currentAnim.animDetails.preventEffectReplace&&currentAnim.animDetails.preventEffectReplace)return;currentAnim.animDetails.reset(),currentAnim.animDetails.pause(!1),currentAnim.AnimMode="show"},createButton(514,410,171,100,$("#endgame")[0],{text:"",sound:"click",up:"./assets/images/EndGame/button_back.png",down:"./assets/images/EndGame/button_back_press.png",event:function(){app.sound.stopAll(),CreatureGame.sceneManager.preloadScene(),app.sound.preload(app.labAudio,function(){CreatureGame.sceneManager.changeScene("labScene")})}}),createButton(303,410,171,100,$("#endgame")[0],{text:"",sound:"click",up:"./assets/images/EndGame/button_again.png",down:"./assets/images/EndGame/button_again_press.png",event:function(){CreatureGame.sceneManager.reset()}}),CreatureGame.PowerUpSelected=function(){function b(){RacingPlayer.Fuel.available=Math.min(RacingPlayer.Fuel.total,RacingPlayer.Fuel.available+PowerUpInfo.EnergyBonusAmount)}function c(){clearRewardSlot()}function d(){powerManager.turbo=PowerUpInfo.TurboBoostSpeedIncrement,RacingPlayer.resetTime()}function e(){powerManager.turbo=0,clearRewardSlot()}function f(){CreatureGame.audio.playAudio("falcon_dive"),J=!0,K.x=-K.width,K.y=-K.height,K.moveRight=!0,K.passes=0}function g(){J=!1,clearRewardSlot()}function h(){H={x:0,y:0},I={x:0,y:0},RacingPlayer.protectorActive=!0}function i(){RacingPlayer.protectorActive=!1,clearRewardSlot()}function j(){CreatureGame.currentPowerUp.use()}function k(){}if(CreatureGame.currentPowerUp.type!==PowerUpInfo.PowerUpTypes.None)switch(a=$("#rewardSlot .button")[0],a.fg=$("#rewardSlot image")[0],CreatureGame.currentPowerUp.type){case PowerUpInfo.PowerUpTypes.EnergyBonus:CreatureGame.currentPowerUp=new PowerUp(CreatureGame.currentPowerUp.type,b,c),a.fg.setAttributeNS(xlinkns,"href",document.getElementById("image_energy_button_off").getAttribute("src")),a.pressedImage="image_energy_button_on";break;case PowerUpInfo.PowerUpTypes.TurboBoost:CreatureGame.currentPowerUp=new PowerUp(CreatureGame.currentPowerUp.type,d,e),a.fg.setAttributeNS(xlinkns,"href",document.getElementById("image_boost_button_off").getAttribute("src")),a.pressedImage="image_boost_button_on";break;case PowerUpInfo.PowerUpTypes.FalconDistractor:CreatureGame.currentPowerUp=new PowerUp(CreatureGame.currentPowerUp.type,f,g),a.fg.setAttributeNS(xlinkns,"href",document.getElementById("image_falcon_button_off").getAttribute("src")),a.pressedImage="image_falcon_button_on";break;case PowerUpInfo.PowerUpTypes.RhinoProtector:CreatureGame.currentPowerUp=new PowerUp(CreatureGame.currentPowerUp.type,h,i),a.fg.setAttributeNS(xlinkns,"href",document.getElementById("image_rhino_button_off").getAttribute("src")),a.pressedImage="image_rhino_button_on"}touchEvents({item:a,down:function(b,c){if(CreatureGame.currentPowerUp.type!==PowerUpInfo.PowerUpTypes.None&&"racing"===A.state){if(CreatureGame.currentPowerUp.type===PowerUpInfo.PowerUpTypes.EnergyBonus&&RacingPlayer.Fuel.available===RacingPlayer.Fuel.total)return;CreatureGame.usePowerUp(CreatureGame.currentPowerUp.type,j,k),a.fg.setAttributeNS(xlinkns,"href",document.getElementById(a.pressedImage).getAttribute("src"))}}})},CreatureGame.EndGame=function(a){var c,d,e,f,g=!1,h=!0,j=!0;if(A.state=a?"playerWin":"zachWin",a){for((void 0===BestTimes[CreatureGame.CurrentLevelName]||0===parseInt(BestTimes[CreatureGame.CurrentLevelName],10)||B<BestTimes[CreatureGame.CurrentLevelName])&&saveRaceTime(CreatureGame.CurrentLevelName,B),i=0;i<CreatureGame.CurrentPowers.length;i+=1)power=AnimalPowers.special[CreatureGame.CurrentPowers[i]]||AnimalPowers.movement[CreatureGame.CurrentPowers[i]],RacingPlayer.Fuel.available>=power.stats.Cost.value&&(g=!0),"mammal"!==power.stats.Classification&&(h=!1);g&&CreatureGame.event(CreatureGame.GUID_REMAINING_ENERGY),h&&CreatureGame.CurrentPowers.length>=MaxCreaturePowers&&CreatureGame.event(CreatureGame.GUID_WIN_WITH_ONLY_MAMMAL_PARTS),RacingPlayer.hitZackBot||CreatureGame.event(CreatureGame.GUID_DODGE_ALL_ZACK_BOTS);for(d in BestTimes)if(BestTimes.hasOwnProperty(d)&&(void 0===BestTimes[d]||0===BestTimes[d])){j=!1;break}e=CookieJar.read("firstTimeBeatZachEveryLevel"),j&&null===e&&(CookieJar.write("firstTimeBeatZachEveryLevel",!0),CreatureGame.event(CreatureGame.GUID_BEAT_ZACK_EVERY_LEVEL)),f=CookieJar.read("firstTimeBeatZach"),null===f?(CookieJar.write("firstTimeBeatZach",!0),CreatureGame.event(CreatureGame.GUID_BEAT_ZACK_FIRST_TIME)):CreatureGame.event(CreatureGame.GUID_BEAT_ZACK)}for(c=0,i=0;i<b.length;i+=1)c+=b[i];c/=b.length,20>c&&CookieJar.write("shouldUseLowQuality","1"),$(a?"#loseBanner":"#winBanner").hide(),$(a?"#endgame, #winBanner":"#endgame, #loseBanner").show(),CreatureGame.levelComplete()},{name:"racingScene",getPreloadItems:function(){var a,b,c={images:[{name:"prototype_sky",src:"./assets/images/prototype_sky.jpg"},{name:"mountain_sky",src:"./assets/images/mountain_sky.jpg"},{name:"snowy_sky",src:"./assets/images/snowy_sky.jpg"},{name:"controls",src:"./assets/images/controls-01.png"},{name:"consolebg",src:"./assets/images/CockpitUI/console_bg.png"},{name:"minimap",src:"./assets/images/CockpitUI/minimap.png"},{name:"joystick",src:"./assets/images/CockpitUI/joystick.png"},{name:"horn",src:"./assets/images/PowerUps/horn.png"},{name:"rhino_protector",src:"./assets/images/PowerUps/rhino.png"},{name:"falcon_distractor",src:"./assets/images/PowerUps/falcon.png"},{name:"anim_moveLeft",src:"./assets/images/CockpitUI/left_key256x198.png",anim:{frames:9,direction:"y",time:.76}},{name:"anim_moveRight",src:"./assets/images/CockpitUI/right_key.png",anim:{frames:9,direction:"y",time:.76}},{name:"anim_energyIcon",src:"./assets/images/CockpitUI/energy_icon.png",anim:{frames:4,direction:"y",time:.5}},{name:"npc_chrisCheer",src:"./assets/images/Animations/chris_cheer1_128x225.png",anim:{frames:10,direction:"x",time:.7}},{name:"effect_go",src:"./assets/images/Animations/go_animation.png",anim:{frames:5,direction:"y",time:.56,playOnce:!0,onComplete:function(a){a.AnimMode="remove"}}},{name:"effect_skunk",src:"./assets/images/Animations/skunk_effect.png",anim:{frames:6,direction:"y",time:.45,playOnce:!0,onComplete:function(a){a.AnimMode="fadeout"}}},{name:"effect_rocksplode",src:"./assets/images/Animations/rock_explode450x250.png",anim:{frames:6,direction:"y",time:.42,playOnce:!0,onComplete:function(a){a.AnimMode="remove"}}},{name:"effect_botsplode",src:"./assets/images/Animations/zachbot_explode450x250.png",anim:{frames:4,direction:"y",time:.3,playOnce:!0,onComplete:function(a){a.AnimMode="remove"}}},{name:"effect_logsplode",src:"./assets/images/Animations/log_explode450x250.png",anim:{frames:7,direction:"y",time:.49,playOnce:!0,onComplete:function(a){a.AnimMode="remove"}}},{name:"effect_water",src:"./assets/images/Animations/particles_water.png",anim:{frames:8,direction:"y",time:.5,playOnce:!0,preventEffectReplace:!0,onComplete:function(a){a.AnimMode="remove"}}},{name:"effect_mud",src:"./assets/images/Animations/particles_mud.png",anim:{frames:8,direction:"y",time:.5,playOnce:!0,preventEffectReplace:!0,onComplete:function(a){a.AnimMode="remove"}}},{name:"effect_snow",src:"./assets/images/Animations/particles_snow.png",anim:{frames:8,direction:"y",time:.5,playOnce:!0,preventEffectReplace:!0,onComplete:function(a){a.AnimMode="remove"}}},{name:"banner_lose",src:"./assets/images/EndGame/Lose_988x556.png"},{name:"banner_win",src:"./assets/images/EndGame/Win_988x556.png"},{name:"npc_flag",src:"./assets/images/Animations/flag_animation.png",anim:{frames:3,direction:"x",time:.4}}],sounds:[{name:"race_bg",path:"badracingmusic",type:"music"},{name:"playerpass",path:"pass2",type:"effect"},{name:"zachpass",path:"pass1",type:"effect"},{name:"cool",path:"thisiscool",type:"dialog"},{name:"carsound",path:"carsound",type:"effect"},{name:"offroad",path:"offroad",type:"effect"},{name:"smart",path:"smart",type:"dialog"},{name:"winsound",path:"winsound",type:"dialog"},{name:"losesound",path:"losesound",type:"dialog"},{name:"take_lead_1",path:"take_lead_1",type:"dialog"},{name:"take_lead_2",path:"take_lead_2",type:"dialog"},{name:"take_lead_3",path:"take_lead_3",type:"dialog"},{name:"lose_lead",path:"lose_lead",type:"dialog"},{name:"tutorial_move",path:"tutorial_move",type:"dialog"},{name:"tutorial_power",path:"tutorial_power",type:"dialog"},{name:"tutorial_power_reminder",path:"tutorial_power_reminder",type:"dialog"},{name:"tutorial_region",path:"tutorial_region",type:"dialog"},{name:"tutorial_defense",path:"tutorial_defense",type:"dialog"},{name:"tutorial_offroad",path:"tutorial_offroad",type:"dialog"},{name:"did_you_pick_321GO",path:"did_you_pick_321GO",type:"dialog"},{name:"3",path:"3",type:"dialog"},{name:"2",path:"2",type:"dialog"},{name:"1",path:"1",type:"dialog"},{name:"GO",path:"GO",type:"dialog"},{name:"watch_out_bots",path:"watch_out_bots",type:"dialog"},{name:"falcon_dive",path:"activate_falcon2",type:"effect"},{name:"bot_hit",path:"oddwoosh"}]};app.unload(app.levels),app.load("./assets/config/config.json",function(a){app.levels=a.levels}),CreatureGame.currlevel=CreatureGame.CurrentLevel.slice(0,7),CreatureGame.levelInfo=f=app.levels[CreatureGame.currlevel],g=[],prepareLevelGroups(g,f.PropLocations);for(a in f.Props)f.Props.hasOwnProperty(a)&&c.images.push({name:f.Props[a].Image,src:"./assets/images/Props/"+f.Props[a].ImageSource});for(i=0;i<f.StampPreload.length;i+=1)c.images.push({name:f.StampPreload[i].match(/.*(?=\.)/gi)[0],src:"./assets/images/FloorStamps/"+f.StampPreload[i]});for(i=0;i<f.FloorStamps.length;i+=1)f.FloorStamps[j].width>256&&f.FloorStamps[j].height===f.FloorStamps[j].width&&(f.FloorStamps[j].width=256,f.FloorStamps[j].height=256);return b=racingZach.getPreloadItems(),c.images=c.images.concat(b.images),c},init:function(){function a(a,b){var c,d;tutorialManager.timeSincePower=0,"racing"===CreatureGame.raceStatus.state&&(powerManager.getProgress()<=0||b!==l)&&(r=b.getAttribute("data-index"),d=powerManager.setActivePower(CreatureGame.CurrentPowers[r]),$(".powerBg").each(function(a,b){var c=AnimalPowers.special[CreatureGame.CurrentPowers[a]]||AnimalPowers.movement[CreatureGame.CurrentPowers[a]]||null;b.isDisabled=null!==c&&RacingPlayer.Fuel.available<c.stats.Cost.value,b.setAttribute("fill",b.isDisabled?"#775555":"#555555"),$(b.parentNode).children("image")[0].setAttribute("opacity",b.isDisabled?"0.2":"1")}),d?(raceFlash("rgb(100,255,255)",.5),l=b,tutorialManager.powerNotificationRequired=!1,b.bg.setAttribute("style","stroke: #55BBBB;"),b.fg.setAttribute("opacity","1"),G.indexOf(r)<0&&G.push(r),G.length>=4&&(c=CookieJar.read("firstTimeUsedEveryPower"),null===c&&(CookieJar.write("firstTimeUsedEveryPower",!0),CreatureGame.event(CreatureGame.GUID_USED_ALL_CREATURE_PARTS_FIRST_TIME)))):(b.bg.setAttribute("style","stroke: #995555;"),b.fg.setAttribute("opacity","0.2")))}function c(a,b){b.bg.setAttribute("style","")}function d(a,b){var c=AnimalPowers.special[CreatureGame.CurrentPowers[a]]||AnimalPowers.movement[CreatureGame.CurrentPowers[a]]||null;b.isDisabled=null!==c&&RacingPlayer.Fuel.available<c.stats.Cost.value,b.setAttribute("fill",b.isDisabled?"#775555":"#555555")}clearRewardSlot(),CreatureGame.powerUpScreen.open(CreatureGame.PowerUpSelected),raceFlash("white",1);var e,g,h,k,o,p,q,r,t=$("#help_button_open > image");if(t[0].setAttributeNS(xlinkns,"href","./assets/images/CockpitUI/pause_off.png"),t[1].setAttributeNS(xlinkns,"href","./assets/images/CockpitUI/pause_press.png"),b=[],CreatureGame.help.contentId="#race_pause",A.state="init",A.countdown=3.5,B=0,C=0,F=0,G=[],RacingPlayer.maxStrafingDistance=f.MapDetails.strafeDistance,CreatureGame.clearColor=f.MapDetails.clearColor,f=CreatureGame.levelInfo,void 0!==f.PathBranches){for(g=document.getElementById("levelPaths");void 0!==g.childNodes&&g.childNodes.length>0;)g.removeChild(g.childNodes[0]);for(i=0;i<f.PathBranches.length;i+=1)("string"==typeof f.PathBranches[i].index||f.PathBranches[i].index instanceof String)&&(f.PathBranches[i].index=parseInt(f.PathBranches[i].index,10)),e=document.createElementNS(svgns,"path"),"string"!=typeof f.PathBranches[i].path?e.setAttribute("d",CreatureGame.temp_path):(CreatureGame.temp_path=f.PathBranches[i].path,e.setAttribute("d",f.PathBranches[i].path)),e.setAttribute("class","motionPath"),e.setAttribute("stroke","#22325B"),e.setAttribute("stroke-width",(2*RacingPlayer.maxStrafingDistance/4+20).toString()),e.setAttribute("fill","none"),e.setAttribute("style","pointer-events:none;"),g.appendChild(e),f.PathBranches[i].path=e}for(i=0;i<f.PropLocations.length;i+=1)for(h=f.PropLocations[i][0],j=0;j<M.length;j+=1)h===M[j].name&&(f.Props[h].Image=M[j].animName,f.Props[h].Aspect=M[j].aspect,
M[j].found=!0,L.push({x:f.PropLocations[i][1],y:f.PropLocations[i][2],def:M[j]}));for(i=0;MaxCreaturePowers>i;i+=1)k=document.getElementById("powerButton"+i),i<CreatureGame.CurrentPowers.length?(k.setAttribute("style",""),o=$("#powerButton"+i+" .button")[0],o.setAttribute("data-index",i),o.bg=$(k).children(".powerBg")[0],o.bg.isDisabled=!1,o.fg=$("#powerButton"+i+" image")[0],o.fg.setAttributeNS(xlinkns,"href",document.getElementById("image_icon_"+CreatureGame.CurrentPowers[i]).getAttribute("src")),$(".powerBg").each(d),touchEvents({item:o,down:a,up:c})):k.setAttribute("style","display:none;");CreatureGame.MathFunctions.projection=CreatureGame.createProjectionMatrix(),RacingPlayer.reset(f),racingZach.reset(f),powerManager.reset(),A.countSounds=3,p=document.getElementById("racing_screen_svg"),p.setAttribute("style",""),app.bgMusic=s[CreatureGame.MathFunctions.randomInt(0,s.length-1)],void 0!==app.bgMusic&&null!==app.bgMusic&&app.sound.play(app.bgMusic,{loop:!0}),app.sound.play("carsound",{loop:!0,volume:.45}),$(CreatureGame.frontCanvas).hide(),CreatureGame.frontContext.setTransform(1,0,0,1,0,0),m=document.getElementById("image_"+CreatureGame.CurrentLevelInfo.sky+"_sky"),CreatureGame.frontContext.drawImage(m,0,0),q=CreatureGame.frontContext.getImageData(0,0,988,556),r=4e3,n="rgba("+q.data[r]+","+q.data[r+1]+","+q.data[r+2]+",1)",CreatureGame.frontContext.clearRect(0,0,988,556),$(CreatureGame.frontCanvas).show(),$("#endgame, #winBanner, #loseBanner").hide(),CreatureGame.help.close(),CreatureGame.audio.playAudio("did_you_pick_321GO",function(){A.state="countdown"})},uninit:function(){var a=document.getElementById("racing_screen_svg");a.setAttribute("style","display:none;"),app.sound.stop(app.bgMusic),app.sound.stop("carsound"),app.sound.stop("offroad")},update:function(){if("none"===$("#lab_help_screen_svg")[0].style.display&&!CreatureGame.isPaused){for(CreatureGame.currentPowerUp.update(),e=Math.max(e-CreatureGame.dt,0),updateMiniMap(),i=0;i<o.length;i+=1)if(void 0!==o[i]||null!==o[i])switch(o[i].animDetails.update(),o[i].AnimMode){case"show":o[i].alpha=1;break;case"fadeout":o[i].alpha-=.8*CreatureGame.dt,o[i].alpha<0&&(o[i]=null);break;case"remove":o[i]=null}for(;o.indexOf(null)>-1;)o.splice(o.indexOf(null),1);switch(A.state){case"init":break;case"countdown":A.countdown-=CreatureGame.dt,A.countdown<=0&&(A.countdown=1,A.showGo=!0,A.state="racing",CreatureGame.playEffect("go"),CreatureGame.audio.playAudio("GO"),tutorialManager.timeSinceMovement=0,tutorialManager.timeSincePower=0),A.countdown<A.countSounds&&(A.countSounds=A.countSounds-1,A.countSounds<3&&CreatureGame.audio.playAudio(Math.round(A.countdown).toString()));break;case"racing":if(tutorialManager.update(),RacingPlayer.update(),racingZach.update(),A.playerProgress=RacingPlayer.animation.getRaceProgress(RacingPlayer.currentTime),A.zachProgress=racingZach.getProgress(),B+=CreatureGame.dt,c.push(Math.round(1/CreatureGame.dt)),A.playerProgress>=.5&&!RacingPlayer.reachedHalfway&&(RacingPlayer.reachedHalfway=!0,CreatureGame.event(CreatureGame.GUID_REACH_HALF_WAY_MARK)),c.length>20){for(avg=0,i=0;i<c.length;i+=1)avg+=c[i];b.push(avg/c.length),c=[]}leader=A.playerProgress>A.zachProgress?"player":"zach","playerWin"===CreatureGame.raceStatus.state||"zachWin"===CreatureGame.raceStatus.state||leader!==A.leader&&(A.leader=leader,time=new Date,time-A.lastPassSound>2e3&&(A.lastPassSound=time,"player"===leader?app.sound.play("take_lead_"+Math.ceil(3*Math.random())):app.sound.play("lose_lead"))),A.countdown>0&&(A.countdown-=CreatureGame.dt,A.countdown<0&&(A.showGo=!1)),D>0&&(D=CreatureGame.MathFunctions.clamp(D-.5*CreatureGame.dt,0,2));break;case"playerWin":case"zachWin":case"idle":}for(i=0;i<f.Hazards.length;i+=1)hazard=f.Hazards[i],sqr_dist=Math.pow(hazard[2]-RacingPlayer.position.x,2)+Math.pow(hazard[3]-RacingPlayer.position.y,2),comp=f.Hazards[i][1]*f.Hazards[i][1]*16,comp>sqr_dist&&RacingPlayer.onCollision(hazard)&&"impact"===RacingPlayer.hazards[hazard[0]].type&&f.Hazards.splice(i,1);for(i=0;i<M.length;i+=1)npcDef=M[i],npcDef.found&&npcDef.active&&document.getElementById("image_"+npcDef.animName).animDetails.update();for(i=0;i<L.length;i+=1)npc=L[i],npc.def.active||Math.pow(npc.x-RacingPlayer.position.x,2)+Math.pow(npc.y-RacingPlayer.position.y,2)<4e4&&(L[i].def.active=!0,L[i].def.callback());E||(document.getElementById("image_anim_moveLeft").animDetails.update(),document.getElementById("image_anim_moveRight").animDetails.update()),document.getElementById("powerConsole").setAttribute("transform","translate(0,"+C+")"),RacingPlayer.Fuel.available<4?document.getElementById("image_anim_energyIcon").animDetails.update():document.getElementById("image_anim_energyIcon").animDetails.reset(),J&&(reachedEnd=!1,K.moveRight?(K.x+=HALF_SCREEN.x*CreatureGame.dt,K.x>=CreatureGame.FrameSize.x&&(K.moveRight=!1,K.passes=K.passes+1,reachedEnd=!0)):(K.x-=HALF_SCREEN.x*CreatureGame.dt,K.x<=-K.width&&(K.moveRight=!0,K.passes=K.passes+1,reachedEnd=!0)),K.passes>=PowerUpInfo.FalconDistractorPasses?CreatureGame.currentPowerUp.complete():reachedEnd&&(racingZach.onFalconDistractor(),CreatureGame.audio.playAudio("falcon_dive")),K.x=CreatureGame.MathFunctions.clamp(K.x,-K.width,CreatureGame.FrameSize.x),distractorWave=Math.sin((K.x+K.width)/DISTRACTOR_MAX_DISTANCE*Math.PI),K.y=DISTRACTOR_MIN_Y+distractorWave*DISTRACTOR_AMPLITUDE),RacingPlayer.protectorActive&&(H.y+=PI2*HORN_FREQUENCY*CreatureGame.dt,H.y>PI2&&(H.y-=PI2),H.x+=Math.PI*HORN_FREQUENCY*CreatureGame.dt,H.x>PI2&&(H.x-=PI2),hornWaveY=1+Math.sin(H.y)/2,I.y=HORN_AMPLITUDE*hornWaveY,I.x=HORN_POSITION_X+HORN_RANGE_X*Math.cos(H.x))}},draw:function(a){function b(a,b,c,d,e,f){return f.visible=!1,f.x=0,f.y=0,f.w=0,f.h=0,f.a=0,f.sortvalue=0,toProp=[a-RacingPlayer.position.x,b-RacingPlayer.position.y],distance=Math.sqrt(Math.pow(toProp[0],2)+Math.pow(toProp[1],2)),distance>CreatureGame.performance.drawDistance&&!drawAllProps?f:(toProp[0]/=distance,toProp[1]/=distance,angle=Math.atan2(toProp[0],toProp[1]),Math.abs(CreatureGame.MathFunctions.rotationDifference(-angle,RacingPlayer.position.rotation))>CreatureGame.performance.drawMaxAngle?f:(angle+=RacingPlayer.position.rotation,newVector=[-Math.sin(angle)*distance,-Math.cos(angle)*distance],propAlpha=drawAllProps?1:4.6*(CreatureGame.performance.drawDistance/800)- -newVector[1]/170,propAlpha=CreatureGame.MathFunctions.clamp(propAlpha,0,1),.01>propAlpha?f:(zOffset=e||0,transformedPoint=CreatureGame.MathFunctions.TransformPoint(newVector[0],20+playerCamera.posY,newVector[1],1,CreatureGame.MathFunctions.projection),transformedPoint2=CreatureGame.MathFunctions.TransformPoint(newVector[0],20+playerCamera.posY+c,newVector[1],1,CreatureGame.MathFunctions.projection),transformedPoint[1]<0?f:(transformedPoint[0]*=t,transformedPoint[0]+=494,transformedPoint[1]*=u,drawDistance=Math.abs(transformedPoint[1]-transformedPoint2[1])/(20+playerCamera.posY),transformedPoint[1]+=v,scale=drawDistance*c*20,propWidth=scale*d,transformedPoint[1]+=250,f.visible=!0,f.img=null,f.x=transformedPoint[0]-propWidth/2,f.y=transformedPoint[1]-scale-zOffset*Math.abs(500+newVector[1]),f.w=propWidth,f.h=scale,f.a=propAlpha,f.sortvalue=newVector[1],f))))}for(drawAllProps=CreatureGame.performance.drawAllProps,zOffset=0,DrawList=[],needUpdate=!0,p=CreatureGame.performance.horizon+.7*playerCamera.posY,horizonLookY=p+playerCamera.lookY,a.setTransform(1,0,0,1,0,0),a.clearRect(0,horizonLookY,988,556-horizonLookY),CreatureGame.floorContext.setTransform(1,0,0,1,0,0),CreatureGame.floorContext.fillStyle=CreatureGame.clearColor,CreatureGame.floorContext.fillRect(0,0,988,556),j=0;j<f.FloorStamps.length;j+=1)floorStamp=f.FloorStamps[j],CreatureGame.floorContext.setTransform(1,0,0,1,0,0),CreatureGame.floorContext.translate(CreatureGame.floorCanvas.width/2,CreatureGame.floorCanvas.height),CreatureGame.floorContext.rotate(-RacingPlayer.position.rotation+Math.PI),CreatureGame.floorContext.translate(-RacingPlayer.position.x+floorStamp.x,-RacingPlayer.position.y+floorStamp.y),CreatureGame.floorContext.rotate(floorStamp.rotation*(Math.PI/180)),CreatureGame.floorContext.translate(-floorStamp.width/2,-floorStamp.height/2),currentImage=document.getElementById("image_"+floorStamp.imageId),CreatureGame.floorContext.drawImage(currentImage,0,0,Math.floor(floorStamp.width),Math.floor(floorStamp.height));for(backgroundRotate=300*-RacingPlayer.position.rotation;backgroundRotate>r[0]/2;)backgroundRotate-=r[0];for(;backgroundRotate<-r[0]/2;)backgroundRotate+=r[0];if(a.fillStyle=n,a.fillRect(0,0,988,horizonLookY),a.setTransform(1,0,0,1,backgroundRotate,p-r[1]),a.drawImage(m,0,Math.floor(playerCamera.lookY),Math.floor(r[0]+1),Math.floor(r[1])),a.setTransform(1,0,0,1,backgroundRotate+r[0],p-r[1]),a.drawImage(m,0,Math.floor(playerCamera.lookY),Math.floor(r[0]+1),Math.floor(r[1])),a.setTransform(1,0,0,1,backgroundRotate-r[0],p-r[1]),a.drawImage(m,0,Math.floor(playerCamera.lookY),Math.floor(r[0]+1),Math.floor(r[1])),a.setTransform(1,0,0,1,0,0),CreatureGame.performance.drawGradient){for(sampleCount=15,currentTime=new Date,currentTime-k>500&&(k=currentTime,h.length>=sampleCount&&h.shift(),h.push(CreatureGame.floorContext.getImageData(494,80,1,1).data)),sampledColor=[0,0,0],i=0;sampleCount>i;i+=1)i<h.length&&(sampledColor[0]+=h[i][0],sampledColor[1]+=h[i][1],sampledColor[2]+=h[i][2]);sampledColor[0]/=h.length,sampledColor[1]/=h.length,sampledColor[2]/=h.length,grd=a.createLinearGradient(0,p+playerCamera.lookY,0,p+playerCamera.lookY+40),grd.addColorStop(0,createGradColor(sampledColor,1,1)),grd.addColorStop(.3,createGradColor(sampledColor,1,1)),grd.addColorStop(1,createGradColor(sampledColor,0,1)),a.fillStyle=grd,a.fillRect(0,p+playerCamera.lookY-5,988,556-(p+playerCamera.lookY-5))}for(propTestPoints=[[RacingPlayer.position.x,RacingPlayer.position.y],[RacingPlayer.position.x+Math.cos(RacingPlayer.position.rotation+PI_ON_TWO)*CreatureGame.performance.drawDistance,RacingPlayer.position.y+Math.sin(RacingPlayer.position.rotation+PI_ON_TWO)*CreatureGame.performance.drawDistance],[RacingPlayer.position.x+Math.cos(RacingPlayer.position.rotation+PI_ON_TWO+CreatureGame.performance.drawMaxAngle)*CreatureGame.performance.drawDistance,RacingPlayer.position.y+Math.sin(RacingPlayer.position.rotation+PI_ON_TWO+CreatureGame.performance.drawMaxAngle)*CreatureGame.performance.drawDistance],[RacingPlayer.position.x+Math.cos(RacingPlayer.position.rotation+PI_ON_TWO-CreatureGame.performance.drawMaxAngle)*CreatureGame.performance.drawDistance,RacingPlayer.position.y+Math.sin(RacingPlayer.position.rotation+PI_ON_TWO-CreatureGame.performance.drawMaxAngle)*CreatureGame.performance.drawDistance]],minx=propTestPoints[0][0],miny=propTestPoints[0][1],maxx=propTestPoints[0][0],maxy=propTestPoints[0][1],i=1;i<propTestPoints.length;i+=1)minx=Math.min(propTestPoints[i][0],minx),miny=Math.min(propTestPoints[i][1],miny),maxx=Math.max(propTestPoints[i][0],maxx),maxy=Math.max(propTestPoints[i][1],maxy);for(minx=CreatureGame.MathFunctions.clamp(Math.floor(minx/mapDivisionSize),0,mapDivisionCount-1),miny=CreatureGame.MathFunctions.clamp(Math.floor(miny/mapDivisionSize),0,mapDivisionCount-1),maxx=CreatureGame.MathFunctions.clamp(Math.floor(maxx/mapDivisionSize),0,mapDivisionCount-1),maxy=CreatureGame.MathFunctions.clamp(Math.floor(maxy/mapDivisionSize),0,mapDivisionCount-1),x=minx;maxx+1>x;x+=1)for(y=miny;maxy+1>y;y+=1)for(i=0;i<g[x][y].length;i+=1)currentPropLocation=f.PropLocations[g[x][y][i]],(void 0===currentPropLocation.drawResult||null===currentPropLocation.drawResult)&&(currentPropLocation.drawResult={visible:!1,x:0,y:0,w:0,h:0,a:0,sortvalue:0}),currentProp=f.Props[currentPropLocation[0]],b(currentPropLocation[1],currentPropLocation[2],currentProp.HeightScale,currentProp.Aspect,0,currentPropLocation.drawResult),currentPropLocation.drawResult.visible&&(currentPropLocation.drawResult.img=document.getElementById("image_"+currentProp.Image),currentPropLocation.drawResult.x=Math.floor(currentPropLocation.drawResult.x),currentPropLocation.drawResult.y=Math.floor(currentPropLocation.drawResult.y),currentPropLocation.drawResult.h=Math.floor(currentPropLocation.drawResult.h),currentPropLocation.drawResult.w=Math.floor(currentPropLocation.drawResult.w),DrawList.push(currentPropLocation.drawResult));for(racingZach.draw(a,b,DrawList),DrawList.sort(function(a,b){return a.sortvalue>b.sortvalue?1:-1}),i=CreatureGame.performance.maxRenderProps>DrawList.length?0:DrawList.length-CreatureGame.performance.maxRenderProps;i<DrawList.length;i+=1)a.globalAlpha=DrawList[i].a,void 0!==DrawList[i].flipH&&DrawList[i].flipH===!0?(a.setTransform(-1,0,0,1,DrawList[i].x+DrawList[i].w,DrawList[i].y+playerCamera.lookY),void 0!==DrawList[i].img.animDetails?DrawList[i].img.animDetails.draw(a,0,0,DrawList[i].w,DrawList[i].h):a.drawImage(DrawList[i].img,0,0,DrawList[i].w,DrawList[i].h)):void 0!==DrawList[i].img.animDetails?DrawList[i].img.animDetails.draw(a,DrawList[i].x,DrawList[i].y+playerCamera.lookY,DrawList[i].w,DrawList[i].h):a.drawImage(DrawList[i].img,DrawList[i].x,DrawList[i].y+playerCamera.lookY,DrawList[i].w,DrawList[i].h),a.setTransform(1,0,0,1,0,0);for(a.globalAlpha=1,J&&(K.moveRight===!1?(a.setTransform(-1,0,0,1,K.x+K.width,K.y+playerCamera.lookY),document.getElementById("image_falcon").animDetails.draw(a,0,0,K.width,K.height),a.setTransform(1,0,0,1,0,0)):document.getElementById("image_falcon").animDetails.draw(a,K.x,K.y,K.width,K.height,!1)),i=0;i<o.length;i+=1)a.globalAlpha=o[i].alpha,o[i].animDetails.draw(a,0,0,988,556);for(a.globalAlpha=1,e>0&&(a.fillStyle=d,a.globalAlpha=e,a.fillRect(0,0,988,556),a.globalAlpha=1),RacingPlayer.protectorActive&&a.drawImage(document.getElementById("image_horn"),Math.floor(I.x),Math.floor(I.y)),a.drawImage(document.getElementById("image_consolebg"),47,447),document.getElementById("image_anim_energyIcon").animDetails.draw(a,74,507,50,50),racerImageName="image_racer_"+powerManager.getCurrentRacerName(),J?racerImageName="image_falcon_distractor":RacingPlayer.protectorActive&&(racerImageName="image_rhino_protector"),drawFitImage(a,document.getElementById(racerImageName),0,0,450,250,583,462,158,76),E||(a.globalAlpha=D,a.fillStyle="rgba(181,271,267,0.2)",a.strokeStyle="#5BABA7",a.lineWidth=5,a.fillRect(244,40,500,300),a.strokeRect(244,40,500,300),document.getElementById("image_anim_moveLeft").animDetails.draw(a,244,150,99,128,!1),document.getElementById("image_anim_moveRight").animDetails.draw(a,645,150,99,128,!1),a.globalAlpha=1),a.font="120pt DINE",a.fillStyle="white",a.textAlign="center",a.strokeStyle="black",a.lineWidth=5,A.showGo?(a.fillStyle="#84db9d",a.fillText("GO",494,250),a.strokeText("GO",494,250)):A.countdown>0&&A.countdown<3&&(a.fillText(Math.ceil(A.countdown).toString(),494,250),a.strokeText(Math.ceil(A.countdown).toString(),494,250)),a.fillStyle="#22325B",a.fillRect(4,155,86,21),a.fillStyle="#0EDB6B",a.fillRect(4,155,86*A.playerProgress,21),a.fillStyle="#912921",a.fillRect(4+86*A.zachProgress-2.5,155,5,21),a.drawImage(document.getElementById("image_minimap"),0,0),gradStep=PI2/RacingPlayer.Fuel.total,F+=PI2*CreatureGame.dt,F>PI2&&(F-=PI2),CreatureGame.frontContext.beginPath(),i=0;i<RacingPlayer.Fuel.total;i+=1)currentStep=F+gradStep*i,colorOffset=(Math.sin(currentStep)+1)/2*75,colorFill="rgba("+Math.round(135+colorOffset)+","+Math.round(217+colorOffset)+",255, 1)",CreatureGame.frontContext.moveTo(148+20.5*i,536),i<RacingPlayer.Fuel.available?canvasCircle(138+20.5*i,536,10,colorFill,"#D6D6D6",2):(needUpdate&&(CreatureGame.frontContext.fill(),CreatureGame.frontContext.stroke(),CreatureGame.frontContext.beginPath(),needUpdate=!1),canvasCircle(138+20.5*i,536,10,"#001226","#D6D6D6",2));for(CreatureGame.frontContext.fill(),CreatureGame.frontContext.stroke(),CreatureGame.frontContext.beginPath(),i=0;i<powerManager.fuelBurnEffectCount;i+=1)i>=RacingPlayer.Fuel.available&&(CreatureGame.frontContext.moveTo(148+20.5*i,536),canvasCircle(138+20.5*i,536,10,"rgba("+Math.floor(255*(powerManager.fuelBurnEffectCount-i))+",18,38,1)","#D6D6D6",2));if(CreatureGame.frontContext.fill(),CreatureGame.frontContext.stroke(),a.textAlign="end",a.fillStyle="#001226",a.font="26px badaboom",a.fillText(parseInt(RacingPlayer.currentVelocity,10).toString(),465,505),minutes=parseInt(B/60,10),seconds=parseInt(B-60*minutes,10),timeSeparator=10>seconds?":0":":",a.fillText(minutes+timeSeparator+seconds,385,505),a.font="20px badaboom",a.fillText("MPH",495,505),a.textAlign="start",CreatureGame.CurrentPowers.length>0){for(a.strokeStyle="#22325B",a.lineWidth=40,a.beginPath(),a.arc(838,556+C,50,Math.PI,1.5*Math.PI),a.stroke(),i=0;i<z.length;i+=1)z[i][0]<CreatureGame.CurrentPowers.length&&(a.beginPath(),a.moveTo(w[z[i][0]][0],w[z[i][0]][1]+C),a.lineTo(w[z[i][1]][0],w[z[i][1]][1]+C),a.stroke());for(i=0;i<CreatureGame.CurrentPowers.length;i+=1)button=$("#powerButton"+i)[0],bg=$(button).children(".powerBg")[0],fg=$(button).children("image")[0],power=AnimalPowers.special[CreatureGame.CurrentPowers[i]]||AnimalPowers.movement[CreatureGame.CurrentPowers[i]],RacingPlayer.Fuel.available<power.stats.Cost.value?bg.isDisabled||(bg.isDisabled=!0,bg.setAttribute("fill","#775555"),fg.setAttribute("opacity","0.2")):bg.isDisabled&&(bg.isDisabled=!1,bg.setAttribute("fill","#555555"),fg.setAttribute("opacity","1"));null!==l&&(progress=powerManager.getProgress(),startAngle=Math.PI+PI_ON_TWO,endAngle=startAngle+PI2*progress,index=l.getAttribute("data-index"),bg=$("#powerButton"+index+" .powerBg")[0],grad=document.getElementById("activeGradient"),null!==grad&&void 0!==grad&&(gradRadius=0,.5>1-progress?(gradRadius=CreatureGame.MathFunctions.lerp(2*(1-progress),100,0),document.getElementById("activeGradStop1").setAttribute("stop-color","#00edff")):(gradRadius=CreatureGame.MathFunctions.lerp(2*(1-progress-.5),0,100),document.getElementById("activeGradStop1").setAttribute("stop-color","#dd2222")),grad.setAttribute("r",gradRadius+"%")),null!==bg&&void 0!==bg&&(progress>0?bg.setAttribute("fill","url(#activeGradient)"):(bg.setAttribute("fill",bg.isDisabled?"#775555":"#555555"),l.fg.setAttribute("opacity",bg.isDisabled?"0.2":"1"))),currentPowerPos=l.parentNode.transform.baseVal.getItem(0).matrix,a.strokeStyle=.25>progress?"rgba(200, 20, 20, 0.8)":"rgba(0, 195, 255, 0.8)",a.lineWidth=15,a.beginPath(),a.arc(currentPowerPos.e,currentPowerPos.f,parseInt(l.getAttribute("r"),10),startAngle,endAngle),a.stroke())}}}}function ZachEnemyPlayer(){"use strict";function a(a){tutorialManager.trigger("zachbot");var b={},c=100,d=a,e=[Position.x,Position.y],f=document.getElementById("image_zach_bot"),g=document.getElementById("zachBotsRepresentation"),h=document.createElementNS(svgns,"circle"),i=null,j=0,k=0,l=0;return h.setAttribute("cx","0"),h.setAttribute("cy","0"),h.setAttribute("r","5"),h.setAttribute("fill","yellow"),h.setAttribute("stroke","none"),g.appendChild(h),{update:function(){0>c||(e[0]+=d[0]*BOT_SPEED*CreatureGame.dt,e[1]+=d[1]*BOT_SPEED*CreatureGame.dt,c-=1,i=[e[0]-RacingPlayer.position.x,e[1]-RacingPlayer.position.y],j=Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2)),BOT_COLL_DIST>j&&(i[0]/=j,i[1]/=j,k=-Math.atan2(i[0],i[1]),l=Math.abs(CreatureGame.MathFunctions.rotationDifference(k,RacingPlayer.position.rotation)),1>l&&(RacingPlayer.onCollision(["zachbot",0,e[0],e[1]]),app.sound.play("oddwoosh")),c=-1),null!==h&&h.setAttribute("transform","translate("+e[0]/4+","+e[1]/4+")"))},draw:function(a,d,g){0>c||(b=d(e[0],e[1],BOT_SIZE.h,BOT_SIZE.a,BOT_GROUND_OFFSET,b),b.visible&&(b.img=f,g.push(b)))},isDead:function(){return null!==h&&0>c&&g.removeChild(h),0>c}}}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=null,r=null,s={},t=0,u=[],v=0,w=0,x=MAX_BOT_TIME,y=null,z=0,A=0,B=[0,0],C={winEvent:function(){CreatureGame.raceStatus.state="zachWin",app.sound.stop("carsound"),app.sound.stop("offroad"),app.sound.play("losesound")},getProgress:function(){return r.getRaceProgress(t)},reset:function(a){void 0!==a.PathBranches&&(r=new PathAnimation(a.PathBranches,null,C.winEvent,!1));var b=r.getPointAtTime(0);Position={x:4*b.x,y:4*b.y,h:1.5,aspect:400/300,rotation:0,flipImage:!1},C.updateMap(),v=0,t=0,z=0},getPreloadItems:function(){var a={images:[{name:"zach_back_straight",src:"./assets/images/Animations/zach_back_straight.png",anim:{direction:"y",frames:3,time:.2}},{name:"zach_back_angle1L",src:"./assets/images/Animations/zach_back_angled.png",anim:{direction:"y",frames:3,time:.2}},{name:"zach_back_angle2L",src:"./assets/images/Animations/zach_back_moar_angled.png",anim:{direction:"y",frames:3,time:.2}},{name:"zach_straight",src:"./assets/images/Animations/zach_straight.png",anim:{direction:"y",frames:3,time:.2}},{name:"zach_angle1L",src:"./assets/images/Animations/zach_angled.png",anim:{direction:"y",frames:3,time:.2}},{name:"zach_angle2L",src:"./assets/images/Animations/zach_moar_angled.png",anim:{direction:"y",frames:3,time:.2}},{name:"zach_bot",src:"./assets/images/Zach/zachbot.png"}]};return a},updateMap:function(){null===y&&(y=document.getElementById("zachRepresentation")),y.setAttribute("transform","translate("+Position.x/4+","+Position.y/4+") rotate("+Position.rotation*(180/Math.PI)+")"),document.getElementById("zachCircle").setAttribute("fill","red")},update:function(){for(b=r.getRaceProgress(t),c=RacingPlayer.animation.getRaceProgress(RacingPlayer.currentTime),d=r.getRaceLength(),e=(b-c)*d,x-=CreatureGame.dt,f=!(b>MIN_ATTACK_DIST&&.6>x),0>x&&(x=MAX_BOT_TIME,b>MIN_ATTACK_DIST&&"zach"===CreatureGame.raceStatus.leader&&(g=[RacingPlayer.position.x-Position.x,RacingPlayer.position.y-Position.y],h=Math.pow(g[0],2)+Math.pow(g[1],2),BOT_SPAWN_SQUARE_DIST>h&&(g[0]/=h,g[1]/=h,u.push(a(g))))),i=0;i<u.length;i+=1)u[i].update(),u[i].isDead()&&u.splice(i,1);if(null!==r){if(C.calculateSpeed(e),t+=CreatureGame.dt*v,j=r.getMaxTime(),k=r.getPointAtTime(t/j),Position.x=4*k.x,Position.y=4*k.y,t>j&&(t-=j,j=r.getMaxTime(),k=r.getPointAtTime(t/j),Position.x=4*k.x,Position.y=4*k.y),j>=t+LOOK_DIST){for(l=r.getPointAtTime((t+LOOK_DIST)/j),m=[l.x-k.x,l.y-k.y],n=Math.sqrt(Math.pow(m[0],2)+Math.pow(m[1],2)),B=[-m[1]/n,m[0]/n],Position.rotation=-Math.atan2(m[0],m[1]),o=RacingPlayer.position.rotation;o>Position.rotation+Math.PI;)o-=2*Math.PI;for(;o<Position.rotation-Math.PI;)o+=2*Math.PI;p=Position.rotation-o,Math.abs(p)<.3?q=document.getElementById(f?"image_zach_back_straight":"image_zach_straight"):Math.abs(p)<.6?0>p?(q=document.getElementById(f?"image_zach_back_angle1L":"image_zach_angle1L"),Position.flipImage=!1):(q=document.getElementById(f?"image_zach_back_angle1L":"image_zach_angle1L"),Position.flipImage=!0):0>p?(q=document.getElementById(f?"image_zach_back_angle2L":"image_zach_angle2L"),Position.flipImage=!1):(q=document.getElementById(f?"image_zach_back_angle2L":"image_zach_angle2L"),Position.flipImage=!0)}z+=v*CreatureGame.dt*.02,A=Math.sin(z)*RacingPlayer.maxStrafingDistance*.4,Position.x+=B[0]*A,Position.y+=B[1]*A,q.animDetails.update(),C.updateMap()}},draw:function(a,b,c){for(null!==q&&(s=b(Position.x,Position.y,Position.h,Position.aspect,0,s),s.visible&&(s.img=q,s.flipH=Position.flipImage,c.push(s))),i=0;i<u.length;i+=1)u[i].draw(a,b,c)},onSkunkAttack:function(){g=[RacingPlayer.position.x-Position.x,RacingPlayer.position.y-Position.y],h=Math.pow(g[0],2)+Math.pow(g[1],2),BOT_SPAWN_SQUARE_DIST>h&&(v*=SPEED_DECREASE_MULTIPLIER)},onFalconDistractor:function(){v*=SPEED_DECREASE_MULTIPLIER},calculateSpeed:function(a){var b,c,d,e=RacingPlayer.hazards.none;for(i=0;i<CreatureGame.levelInfo.Hazards.length;i+=1)"impact"!==RacingPlayer.hazards[CreatureGame.levelInfo.Hazards[i][0]].type&&(b=Math.sqrt(Math.pow(CreatureGame.levelInfo.Hazards[i][2]-Position.x,2)+Math.pow(CreatureGame.levelInfo.Hazards[i][3]-Position.y,2)),b<4*CreatureGame.levelInfo.Hazards[i][1]&&(e=RacingPlayer.hazards[CreatureGame.levelInfo.Hazards[i][0]]));w=DEFAULT_VELOCITY+DEFAULT_STATS[e.boost||"Run"]*VELOCITY_RANGE,w*=0>a?a>-DIFFICULTY_DISTANCE_1?1:a>-DIFFICULTY_DISTANCE_2?1.03:1.1:DIFFICULTY_DISTANCE_1>a?1:DIFFICULTY_DISTANCE_2>a?.9:.5,c=1,c-=.06*CreatureGame.RacerWeight,d=(w+Math.cos(z)*SPEED_VARIATION_LENGTH)*c,d>v?v+=CreatureGame.dt*ZACH_ACCEL:v>d&&(v-=CreatureGame.dt*ZACH_ACCEL)}};return C}function SceneManager(){"use strict";var a={},b=null,c=0,d="idle",e=1,f=1,g=[50,490,700,45],h=[{duration:2,aviva_frame:0,channel_frame:-1,asset_change:!1},{duration:.1,aviva_frame:1,channel_frame:-1,asset_change:!1},{duration:.1,aviva_frame:2,channel_frame:-1,asset_change:!1},{duration:.1,aviva_frame:3,channel_frame:0,asset_change:!1},{duration:.1,aviva_frame:0,channel_frame:1,asset_change:!0}],i=["image_loading_racer_cheetah","image_loading_racer_falcon","image_loading_racer_pronghorn","image_loading_racer_skunk","image_loading_racer_tortoise"],j=0,k=0,l=Math.floor(Math.random()*i.length);this.addScene=function(b){a[b.name]=b},this.reset=function(){if(null!==b){var a=b.name;b.uninit(),this.changeScene(a)}},this.preloadScene=function(){$("#splashImage").hide(),$("#svgCanvas").hide(),d="loading",c=0,this.draw(CreatureGame.frontContext)},this.changeScene=function(g){function h(){d="delay",e=1,f=e}if(null!==b&&b.uninit(),CreatureGame.audio.stopAllSounds(),b=a[g],void 0!==b.getPreloadItems){var i=b.getPreloadItems();CreatureGame.PreLoadFromList(i.images,i.sounds,function(){h()},function(a){c=a})}else void 0!==b.preloadItems&&null!==b.preloadItems?CreatureGame.PreLoadFromList(b.preloadItems.images,b.preloadItems.sounds,function(){h()},function(a){c=a}):h()},this.update=function(){if("idle"===d&&b.update(),"delay"===d&&(e-=CreatureGame.dt,0>e&&(b.init(),d="idle",$("#svgCanvas").show())),"loading"===d||"delay"===d){if(k+=1.5*CreatureGame.dt,k>h[j].duration&&(k=0,j+=1,j>=h.length&&(j=0),h[j].asset_change))for(var a=l;a===l;)l=Math.floor(Math.random()*i.length);document.getElementById("image_loadingAvivaAnim").animDetails.setFrame(h[j].aviva_frame),h[j].channel_frame>-1&&document.getElementById("image_staticAnim").animDetails.setFrame(h[j].channel_frame)}},this.draw=function(a){if("loading"===d||"delay"===d){CreatureGame.frontContext.setTransform(1,0,0,1,0,0),CreatureGame.frontContext.fillStyle="black",CreatureGame.frontContext.fillRect(0,0,988,556),a.drawImage(document.getElementById("image_loadingBackground"),0,0,988,566);var k=document.getElementById(i[l]);drawFitImage(a,k,0,0,k.naturalWidth,k.naturalHeight,160,45,476,268),h[j].channel_frame>-1&&document.getElementById("image_staticAnim").animDetails.draw(a,149,35,496,288),document.getElementById("image_loadingAvivaAnim").animDetails.draw(a,675,75,285,500),"delay"===d&&(a.globalAlpha=e/f),CreatureGame.frontContext.fillStyle="#222222",a.strokeStyle="black",a.lineWidth=2,CreatureGame.frontContext.fillRect(g[0],g[1],g[2],g[3]),CreatureGame.frontContext.strokeRect(g[0],g[1],g[2],g[3]),CreatureGame.frontContext.fillStyle="#005500",CreatureGame.frontContext.textAlign="center",CreatureGame.frontContext.font="26pt Calibri",CreatureGame.frontContext.fillText("Loading...",g[0]+g[2]/2,523),CreatureGame.frontContext.fillStyle="green",CreatureGame.frontContext.fillRect(g[0],g[1],g[2]*c,g[3]),a.save(),a.beginPath(),a.moveTo(g[0],g[1]),a.lineTo(g[0]+g[2]*c,g[1]),a.lineTo(g[0]+g[2]*c,g[1]+g[3]),a.lineTo(g[0],g[1]+g[3]),a.closePath(),a.clip(),CreatureGame.frontContext.fillStyle="white",CreatureGame.frontContext.fillText("Loading...",g[0]+g[2]/2,523),a.restore(),a.globalAlpha=1}else"idle"===d&&b.draw(a);CreatureGame.support.desktop&&$("#debugWatchBox").is(":visible")&&(CreatureGame.frontContext.setTransform(1,0,0,1,0,0),CreatureGame.frontContext.fillStyle="white",CreatureGame.font="10pt badaboom",CreatureGame.frontContext.fillText(Math.round(1/CreatureGame.dt)+"fps",800,40))}}function createSplashScene(){"use strict";function a(){var a;for(a=0;a<f.preloadItems.alternateSounds.length;a+=1)CreatureGame.audio.loadSound(f.preloadItems.alternateSounds[a].name,f.preloadItems.alternateSounds[a].path,f.preloadItems.alternateSounds[a].type,1)}var b={x:CreatureGame.FrameSize.x-200,y:0,width:200,height:200,image:"image_logo"},c={x:0,y:0,width:CreatureGame.FrameSize.x,height:CreatureGame.FrameSize.y,image:"image_splash"},d={x:CreatureGame.FrameSize.x-154,y:CreatureGame.FrameSize.y-120,width:154,height:120,imageEnabled:"./assets/images/Play_Button.png",imageDisabled:"./assets/images/Play_Button_Pressed.png"},e={x:350,y:100,fontSize:72,text:"Creature Mobile"},f={name:"splashScene",preloadItems:{images:[{name:"splash",src:"./assets/images/Splash.png"},{name:"logo",src:"./assets/images/Logo.png"}],alternateSounds:[{name:"setup_intro",path:"setup_intro",type:"dialog"},{name:"click",path:"click",type:"effect"},{name:"labintro",path:"labintro",type:"dialog"},{name:"powersintro",path:"powersintro",type:"dialog"},{name:"labtutorial_snow",path:"lab_tuts_levelconditions",type:"dialog"},{name:"labtutorial_next",path:"lab_tuts_hitnext",type:"dialog"},{name:"labtutorial_powers",path:"lab_tuts_powers",type:"dialog"},{name:"labtutorial_remove",path:"lab_tuts_remove",type:"dialog"},{name:"labtutorial_begin",path:"lab_tuts_begin",type:"dialog"},{name:"lab_tuts_powerstats",path:"lab_tuts_powerstats",type:"dialog"},{name:"lab_description_weight",path:"lab_description_weight",type:"dialog"},{name:"lab_description_cost",path:"lab_description_cost",type:"dialog"},{name:"lab_description_duration",path:"lab_description_duration",type:"dialog"},{name:"lab_tuts_movement_attachments",path:"lab_tuts_movement_attachments",type:"dialog"},{name:"lab_tuts_defensive_attachments",path:"lab_tuts_defensive_attachments",type:"dialog"},{name:"lab_tuts_emptyslot",path:"lab_tuts_emptyslot",type:"dialog"},{name:"racer_too_heavy",path:"racer_too_heavy",type:"dialog"},{name:"attachment_removed",path:"attachment_removed",type:"dialog"},{name:"lets_race",path:"lets_race",type:"dialog"},{name:"add_1",path:"added",type:"dialog"},{name:"add_2",path:"you_got_it",type:"dialog"},{name:"add_3",path:"racer_looks_good",type:"dialog"},{name:"aviva_react_1",path:"aviva_react_1",type:"effect"},{name:"aviva_react_2",path:"aviva_react_2",type:"effect"},{name:"aviva_react_3",path:"aviva_react_3",type:"effect"},{name:"aviva_react_4",path:"aviva_react_4",type:"effect"},{name:"race_bg",path:"badracingmusic",type:"music"},{name:"playerpass",path:"pass2",type:"effect"},{name:"zachpass",path:"pass1",type:"effect"},{name:"cool",path:"thisiscool",type:"dialog"},{name:"carsound",path:"carsound",type:"effect"},{name:"offroad",path:"offroad",type:"effect"},{name:"smart",path:"smart",type:"dialog"},{name:"winsound",path:"winsound",type:"dialog"},{name:"losesound",path:"losesound",type:"dialog"},{name:"take_lead_1",path:"see_ya_zach",type:"dialog"},{name:"take_lead_2",path:"youre_winning",type:"dialog"},{name:"take_lead_3",path:"woo",type:"dialog"},{name:"lose_lead",path:"zach_leading",type:"dialog"},{name:"tutorial_move",path:"tutorial_move",type:"dialog"},{name:"tutorial_power",path:"tutorial_power",type:"dialog"},{name:"tutorial_power_reminder",path:"tutorial_power_reminder",type:"dialog"},{name:"tutorial_region",path:"tutorial_region",type:"dialog"},{name:"tutorial_defense",path:"tutorial_defense",type:"dialog"},{name:"tutorial_offroad",path:"tutorial_wall",type:"dialog"},{name:"did_you_pick_321GO",path:"did_you_pick_321GO",type:"dialog"},{name:"3",path:"3",type:"dialog"},{name:"2",path:"2",type:"dialog"},{name:"1",path:"1",type:"dialog"},{name:"GO",path:"GO",type:"dialog"},{name:"watch_out_bots",path:"watch_out_bots",type:"dialog"},{name:"falcon_dive",path:"falcon2",type:"effect"},{name:"bot_hit",path:"oddwoosh"},{name:"activate_Cheetah2",path:"Cheetah2",type:"effect"},{name:"activate_otter",path:"otter",type:"effect"},{name:"activate_hummingbird",path:"hummingbird",type:"effect"},{name:"activate_falcon2",path:"falcon2",type:"effect"},{name:"activate_dolphin",path:"dolphin",type:"effect"},{name:"activate_skunk",path:"skunk",type:"effect"},{name:"activate_bison",path:"bison",type:"effect"}]},init:function(){var b,c=document.getElementById("svgCanvas"),f=document.createElementNS(svgns,"text");f.setAttribute("x",e.x.toString()),f.setAttribute("y",e.y.toString()),f.setAttribute("font-size",e.fontSize+"px"),f.setAttribute("fill","white"),f.setAttribute("stroke","black"),f.setAttribute("stroke-width","2.0"),
f.setAttribute("style","font-family: badaboom"),f.textContent=e.text,c.appendChild(f),b=createButton(d.x,d.y,d.width,d.height,c,{sound:"click",up:d.imageEnabled,down:d.imageDisabled,event:function(){app.sound.play("click",function(){CreatureGame.support.webAudio||a(),CreatureGame.sceneManager.preloadScene(),app.sound.preload(app.labAudio,function(){CreatureGame.sceneManager.changeScene("labScene")}),$(b).hide(),$(f).hide()})}}),$(document.getElementById("help_toggle_button")).hide()},uninit:function(){$(document.getElementById("help_toggle_button")).show()},update:function(){return void 0},draw:function(a){CreatureGame.support.iPhone&&(b={x:CreatureGame.FrameSize.x-200,y:0,width:200,height:200,image:"image_logo"},c={x:0,y:0,width:CreatureGame.FrameSize.x,height:CreatureGame.FrameSize.y,image:"image_splash"},d={x:CreatureGame.FrameSize.x-154,y:CreatureGame.FrameSize.y-120,width:154,height:120,imageEnabled:"./assets/images/Play_Button.png",imageDisabled:"./assets/images/Play_Button_Pressed.png"}),a.drawImage(document.getElementById(c.image),c.x,c.y,c.width,c.height),a.drawImage(document.getElementById(b.image),b.x,b.y,b.width,b.height)}};return f}function createGameTimer(a,b){"use strict";function c(){d=setTimeout(c,a),b()}if(!isNaN(a)&&void 0!==b&&null!==b){var d=null;return{start:function(){c()},stop:function(){clearTimeout(d)}}}}var DEFAULT_STATS={Run:0,Snow:-.2,Swim:-.2,Mud:-.1,Offroad:-.4},AnimalPowers={movement:{cheetah:{displayName:"Cheetah",images:{animation:"cheetah_run512x256.png",icon:"slot_icon_cheetah.png",animationDetails:{direction:"y",frames:10},racer:"cheetah.png"},stats:{Weight:{value:.2,display:!0},Run:{value:.5,display:!1},Snow:{value:-.2,display:!1},Swim:{value:-.2,display:!1},Mud:{value:-.2,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:0,display:!1},Jump:{value:.1,display:!1},Defense:{value:0,display:!1},Cost:{value:3,display:!0},Duration:{value:5,display:!0},Special:{value:0,display:!1},Classification:"mammal"},effect:{activateSound:"Cheetah2",height:0,onSetActive:function(){"use strict";return void 0},onComplete:function(){"use strict";return void 0},onCollision:function(){"use strict";return void 0}}},hare:{displayName:"Snowshoe Hare",images:{animation:"snowshoehare_run512x256.png",icon:"slot_icon_snowhare.png",animationDetails:{direction:"y",frames:8},racer:"hare.png"},stats:{Weight:{value:.1,display:!0},Run:{value:.1,display:!1},Snow:{value:.1,display:!1},Swim:{value:-.2,display:!1},Mud:{value:-.1,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:0,display:!1},Jump:{value:.4,display:!1},Defense:{value:0,display:!1},Cost:{value:3,display:!0},Duration:{value:15,display:!0},Special:{value:0,display:!1},Classification:"mammal"},effect:{height:-2,onSetActive:function(){"use strict";return void 0},onComplete:function(){"use strict";return void 0},onCollision:function(){"use strict";playerCamera.Jump()}}},otter:{displayName:"Otter",images:{animation:"otter_swim512x188.png",icon:"slot_icon_otter.png",animationDetails:{direction:"y",frames:10},racer:"otter.png"},stats:{Weight:{value:.2,display:!0},Run:{value:0,display:!1},Snow:{value:-.1,display:!1},Swim:{value:.1,display:!1},Mud:{value:0,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:0,display:!1},Jump:{value:0,display:!1},Defense:{value:0,display:!1},Cost:{value:2,display:!0},Duration:{value:10,display:!0},Special:{value:0,display:!1},Classification:"mammal"},effect:{activateSound:"otter",height:-2,onSetActive:function(){"use strict";return void 0},onComplete:function(){"use strict";return void 0},onCollision:function(){"use strict";return void 0}}},hummingbird:{displayName:"Hummingbird",images:{animation:"hummingbird_fly512x256.png",icon:"slot_icon_hummingbird.png",animationDetails:{direction:"y",frames:6},racer:"hummingbird.png"},stats:{Weight:{value:.1,display:!0},Run:{value:-.1,display:!1},Snow:{value:-.1,display:!1},Swim:{value:-.1,display:!1},Mud:{value:0,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:.3,display:!1},Jump:{value:0,display:!1},Defense:{value:0,display:!1},Cost:{value:3,display:!0},Duration:{value:20,display:!0},Special:{value:0,display:!1},Classification:"bird"},effect:{height:15,activateSound:"hummingbird",onSetActive:function(){"use strict";return void 0},onComplete:function(){"use strict";return void 0},onCollision:function(){"use strict";return void 0}}},falcon:{displayName:"Falcon",images:{animation:"falcon_glide512x256.png",icon:"slot_icon_falcon.png",animationDetails:{direction:"y",frames:6},racer:"falcon.png"},stats:{Weight:{value:.2,display:!0},Run:{value:0,display:!1},Snow:{value:0,display:!1},Swim:{value:0,display:!1},Mud:{value:0,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:.5,display:!1},Jump:{value:0,display:!1},Defense:{value:0,display:!1},Cost:{value:4,display:!0},Duration:{value:10,display:!0},Special:{value:0,display:!1},Classification:"bird"},effect:{activateSound:"falcon2",height:40,onSetActive:function(){"use strict";return void 0},onComplete:function(){"use strict";return void 0},onCollision:function(){"use strict";return void 0}}},antelope:{displayName:"Pronghorn Antelope",images:{animation:"pronghorn_run512x256.png",icon:"slot_icon_pronghorn.png",animationDetails:{direction:"y",frames:7},racer:"pronghorn.png"},stats:{Weight:{value:.3,display:!0},Run:{value:.4,display:!1},Snow:{value:-.2,display:!1},Swim:{value:-.2,display:!1},Mud:{value:-.2,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:0,display:!1},Jump:{value:0,display:!1},Defense:{value:0,display:!1},Cost:{value:4,display:!0},Duration:{value:15,display:!0},Special:{value:0,display:!1},Classification:"mammal"},effect:{height:3,onSetActive:function(){"use strict";return void 0},onComplete:function(){"use strict";return void 0},onCollision:function(){"use strict";return void 0}}},roadrunner:{displayName:"Roadrunner",images:{animation:"roadrunner_run512x200.png",icon:"slot_icon_roadrunner.png",animationDetails:{direction:"y",frames:8},racer:"roadrunner.png"},stats:{Weight:{value:.2,display:!0},Run:{value:.3,display:!1},Snow:{value:-.3,display:!1},Swim:{value:-.3,display:!1},Mud:{value:0,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:0,display:!1},Jump:{value:0,display:!1},Defense:{value:0,display:!1},Cost:{value:3,display:!0},Duration:{value:15,display:!0},Special:{value:0,display:!1},Classification:"bird"},effect:{height:-2,onSetActive:function(){"use strict";return void 0},onComplete:function(){"use strict";return void 0},onCollision:function(){"use strict";playerCamera.Jump()}}},dolphin:{displayName:"Dolphin",images:{animation:"dolphin_swim512x235.png",icon:"slot_icon_dolphin.png",animationDetails:{direction:"y",frames:6},racer:"dolphin.png"},stats:{Weight:{value:.3,display:!0},Run:{value:-.5,display:!1},Snow:{value:-.4,display:!1},Swim:{value:.3,display:!1},Mud:{value:-.4,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:0,display:!1},Jump:{value:0,display:!1},Defense:{value:0,display:!1},Cost:{value:3,display:!0},Duration:{value:20,display:!0},Special:{value:0,display:!1},Classification:"mammal"},effect:{activateSound:"dolphin",height:-4,onSetActive:function(){"use strict";return void 0},onComplete:function(){"use strict";return void 0},onCollision:function(){"use strict";return void 0}}}},special:{skunk:{displayName:"Skunk",images:{animation:"skunk_spray512x195.png",icon:"slot_icon_skunk.png",animationDetails:{direction:"y",frames:12},racer:"skunk.png"},stats:{Weight:{value:.1,display:!0},Run:{value:0,display:!1},Snow:{value:-.2,display:!1},Swim:{value:-.2,display:!1},Mud:{value:-.2,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:0,display:!1},Jump:{value:0,display:!1},Defense:{value:.3,display:!1},Cost:{value:2,display:!0},Duration:{value:0,display:!0},Special:{value:0,display:!1},Classification:"mammal"},effect:{activateSound:"skunk",height:-1,onSetActive:function(){"use strict";racingZach.onSkunkAttack()},onComplete:function(){"use strict";return void 0},onCollision:function(){"use strict";return void 0}}},tortoise:{displayName:"Tortoise",images:{animation:"tortoise_walk512x256.png",icon:"slot_icon_tortoise.png",animationDetails:{direction:"y",frames:10},racer:"tortoise.png"},stats:{Weight:{value:.3,display:!0},Run:{value:0,display:!1},Snow:{value:-.2,display:!1},Swim:{value:-.2,display:!1},Mud:{value:-.2,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:0,display:!1},Jump:{value:0,display:!1},Defense:{value:.5,display:!1},Cost:{value:4,display:!0},Duration:{value:30,display:!0},Special:{value:0,display:!1},Classification:"reptile"},effect:{height:0,onSetActive:function(){"use strict";return void 0},onComplete:function(){"use strict";return void 0},onCollision:function(a){"use strict";"zachbot"===a&&CreatureGame.playEffect("botsplode")}}},bison:{displayName:"Bison",images:{animation:"bison_toss_512x256.png",icon:"slot_icon_bison.png",animationDetails:{direction:"y",frames:7},racer:"bison.png"},stats:{Weight:{value:.4,display:!0},Run:{value:0,display:!1},Snow:{value:-.2,display:!1},Swim:{value:-.2,display:!1},Mud:{value:-.2,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:0,display:!1},Jump:{value:0,display:!1},Defense:{value:.4,display:!1},Cost:{value:3,display:!0},Duration:{value:20,display:!0},Special:{value:0,display:!1},Classification:"mammal"},effect:{height:6,activateSound:"bison",onSetActive:function(){"use strict";return void 0},onComplete:function(){"use strict";return void 0},onCollision:function(a){"use strict";switch(a){case"rock":CreatureGame.playEffect("rocksplode");break;case"log":CreatureGame.playEffect("logsplode");break;case"zachbot":CreatureGame.playEffect("botsplode")}}}}}},CookieJar={write:function(a,b){"use strict";document.cookie=a+"="+b},read:function(a){"use strict";try{return document.cookie.match(new RegExp(a+"=([^;]+)"))[1]}catch(b){return null}},remove:function(a){"use strict";document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}},CreatureGame={MAIN_ELEMENT:"gameView",GUID_GAME:"198080c8-4fab-4b22-9770-9019a75e4c4f",GUID_BEAT_ZACK_FIRST_TIME:"f68fd647-3a17-40f6-acdd-2f6a824010e6",GUID_BEAT_ZACK_EVERY_LEVEL:"10f1d871-36d4-4e98-999c-e617cf462c53",GUID_USED_ALL_CREATURE_PARTS_FIRST_TIME:"bac3c6e5-54aa-442b-a4cc-08d312f71cc4",GUID_BEAT_ZACK:"9998f5c5-6782-4f48-ae0a-ca58638ca830",GUID_DODGE_ALL_ZACK_BOTS:"2ad1ca67-ba33-4a92-bfb0-6aaf859c1629",GUID_REMAINING_ENERGY:"677f3050-98ca-43dd-9a22-20892c202dad",GUID_WIN_WITH_ONLY_MAMMAL_PARTS:"39723a0d-6509-40ca-9d77-71d0d64a817c",GUID_REACH_HALF_WAY_MARK:"3bf7d865-ae4a-40e8-8545-36d60fae2de6",InitialSettings:{MasterVolume:1,BackgroundMusicVolume:.4,disableLocalAudio:!1},FrameSize:{x:988,y:556},pauseElement:{},isPaused:!1,CurrentLevel:"testlevel",time:new Date,dt:0,clearColor:"#000000",averageFps:0,levelInfo:null,temp_path:null,currlevel:null},svgns="http://www.w3.org/2000/svg",xlinkns="http://www.w3.org/1999/xlink",calltime=1,loopTime=1;CreatureGame.event=function(a){"use strict";void 0!==CreatureGame.minigame&&null!==CreatureGame.minigame&&CreatureGame.minigame.event(a)},CreatureGame.hasPowerUp=function(a){"use strict";return void 0!==CreatureGame.minigame&&null!==CreatureGame.minigame?CreatureGame.minigame.hasPowerUp(a):!1},CreatureGame.usePowerUp=function(a,b,c){"use strict";if(void 0!==CreatureGame.minigame&&null!==CreatureGame.minigame){var d={};d[a]=1,CreatureGame.minigame.usePowerUps(d,b,c)}},CreatureGame.levelComplete=function(){"use strict";void 0!==CreatureGame.minigame&&null!==CreatureGame.minigame&&CreatureGame.minigame.levelComplete()};var currentView,prevMode=null,oreintation=null,stageWidth=null,autoresize=!1;document.addEventListener("visibilitychange",onVisibilityChange,!1),CreatureGame.PreLoadFromList=function(a,b,c,d){function e(){if(void 0!==d&&null!==d){var e=(o+p)/(a.length+b.length);d(e)}o===a.length&&p===b.length&&c()}function f(){o+=1,e()}function g(){p+=1,e()}var h,i,j,k,l,m,n,o=0,p=0;if((void 0===a||null===a)&&(a=[]),void 0!==b&&null!==b&&CreatureGame.support.webAudio||(b=[]),a.length+b.length===0)return void c();for(h=document.getElementById("GameImages"),l=function(){void 0!==this.anim&&setupAnimation(this,this.anim),f()},m=function(a){f()},i=0;i<a.length;i+=1)j="image_"+a[i].name,null!==document.getElementById(j)?f():(k=new Image,k.onload=l,k.onerror=m,k.src=a[i].src,h.appendChild(k),k.setAttribute("id",j),k.anim=a[i].anim);for(n=0;n<b.length;n+=1)CreatureGame.audio.loadSound(b[n].name,b[n].path,b[n].type,1,g)},CreatureGame.pause=function(){CreatureGame.audio.pause(),CreatureGame.isPaused=!0,document.getElementById("svgCanvas").appendChild(CreatureGame.pauseElement)},CreatureGame.resume=function(){var a=document.getElementById("svgCanvas");CreatureGame.pauseElement.parentNode===a&&a.removeChild(CreatureGame.pauseElement),CreatureGame.isPaused=!1,CreatureGame.audio.resume()},CreatureGame.createProjectionMatrix=function(){var a=60,b=500,c=1,d=1/Math.tan(.5*a*(Math.PI/180)),e=-(b/(b-c)),f=-(b*c/(b-c));return[d,0,0,0,0,d,0,0,0,0,e,f,0,0,-1,0]},CreatureGame.MathFunctions={TransformPoint:function(a,b,c,d,e){var f=a*e[0]+b*e[1]+c*e[2]+d*e[3],g=a*e[4]+b*e[5]+c*e[6]+d*e[7],h=a*e[8]+b*e[9]+c*e[10]+d*e[11],i=a*e[12]+b*e[13]+c*e[14]+d*e[15];return f/=i,g/=i,h/=i,[f,g,h]},TransformMatrix:function(a,b){var c,d,e=[];for(c=0;4>c;c+=1)for(d=0;4>d;d+=1)e[d+4*c]=a[4*c]*b[d]+a[4*c+1]*b[4+d]+a[4*c+2]*b[8+d]+a[4*c+3]*b[12+d];return e},clamp:function(a,b,c){return Math.min(Math.max(a,b),c)},rotationDifference:function(a,b){for(;a>b+Math.PI;)a-=2*Math.PI;for(;a<b-Math.PI;)a+=2*Math.PI;return b-a},lerp:function(a,b,c){return b+a*(c-b)},randomInt:function(a,b){return Math.floor(Math.random()*(b-a+1))+a}},CreatureGame.hexToRGBA=function(a,b,c){var d=parseInt(a.substr(1,2),16),e=parseInt(a.substr(3,2),16),f=parseInt(a.substr(5,2),16),g=b||1,h=c||1;return"rgba("+Math.round(d*h)+","+Math.round(e*h)+","+Math.round(f*h)+","+g+")"},CreatureGame.requestJson=function(a,b,c){var d=new XMLHttpRequest,e=b||!1;return d.open("GET",a+"?timer="+(new Date).getMilliseconds(),e),e&&(d.onload=function(a){if(200===d.status){var b=JSON.parse(d.responseText);c(b)}},d.onerror=function(a){}),d.send(),e?void 0:200===d.status?JSON.parse(d.responseText):null};var keyStates=[],BlockDefaultKeys=[37,38,39,40],ITEM_INFO_MAX={Weight:.5,Cost:5,Duration:30},LEVEL_DIFFICULTY_MAX=6,BestTimes={},PAN_MIN=0,PAN_MAX=439,PAN_MAX_60=263.4,PAN_MAX_40=439*.4,PAN_SPEED=1e3,COMPARABLE_INFO=["Run","Swim","Snow","Mud"],isAvivaTalking,goStart=!1,labsceneImages=[{name:"wide_bg",src:"./assets/images/LabAssets/wide_background.jpg"},{name:"start_race_button_off",src:"./assets/images/LabAssets/button_off.png"},{name:"start_race_button_on",src:"./assets/images/LabAssets/button_on.png"},{name:"help_button_off",src:"./assets/images/LabAssets/help.png"},{name:"help_button_on",src:"./assets/images/LabAssets/help_press.png"},{name:"help_close_button_off",src:"./assets/images/LabAssets/help_close.png"},{name:"help_close_button_on",src:"./assets/images/LabAssets/help_close_press.png"},{name:"left_arrow_off",src:"./assets/images/LabAssets/arrow_left.png"},{name:"left_arrow_on",src:"./assets/images/LabAssets/arrow_left_press.png"},{name:"right_arrow_off",src:"./assets/images/LabAssets/arrow_right.png"},{name:"right_arrow_on",src:"./assets/images/LabAssets/arrow_right_press.png"},{name:"addbutton",src:"./assets/images/LabAssets/icon_add.png"},{name:"removebutton",src:"./assets/images/LabAssets/icon_remove.png"},{name:"level_info",src:"./assets/images/LabAssets/level_info.png"},{name:"racer_base",src:"./assets/images/Racers/base_racer.png"}],GO_ICON={x:17,y:26,width:50,height:50,image:"./assets/images/LabAssets/icon_go.png"},GO_BUTTON={x:790,y:390,width:100,height:100,upimg:"./assets/images/LabAssets/right_go.png",downimg:"./assets/images/LabAssets/right_press.png"},SELECTOR_BUTTON={x:0,y:0,width:150,height:150,image:"./assets/images/PowerUps/power_up_selector.png"},ENERGY_BUTTON_INFO={x:149,y:230,width:150,height:150,imageEnabled:"./assets/images/PowerUps/energy_bonus_power_up.png",imageDisabled:"./assets/images/PowerUps/energy_bonus_power_up_disabled.png"},TURBO_BUTTON_INFO={x:329,y:230,width:150,height:150,imageEnabled:"./assets/images/PowerUps/turbo_boost_power_up.png",imageDisabled:"./assets/images/PowerUps/turbo_boost_power_up_disabled.png"},FALCON_BUTTON_INFO={x:509,y:230,width:150,height:150,imageEnabled:"./assets/images/PowerUps/falcon_distractor_power_up.png",imageDisabled:"./assets/images/PowerUps/falcon_distractor_power_up_disabled.png"},RHINO_BUTTON_INFO={x:689,y:230,width:150,height:150,imageEnabled:"./assets/images/PowerUps/rhino_protector_power_up.png",imageDisabled:"./assets/images/PowerUps/rhino_protector_power_up_disabled.png"},anyPowerUpAvailable=!1,energyBonusButton=null,turboBoostButton=null,falconDistractorButton=null,rhinoProtectorButton=null,powerUpSelector=null,PowerUpInfo={PowerUpTypes:{None:"None",EnergyBonus:"wk_energy_bonus",TurboBoost:"wk_turbo_boost",FalconDistractor:"wk_falcon_distractor",RhinoProtector:"wk_rhino_protector"},EnergyBonusAmount:5,TurboBoostSpeedIncrement:10,TurboBoostDuration:8,FalconDistractorPasses:4,FalconDistractorDuration:0,RhinoProtectorDuration:15},DEFAULT_VELOCITY=35,MIN_VELOCITY=10,VELOCITY_RANGE=50,MAX_WEIGHT_EFFECT=10,RacingPlayer={position:{x:0,y:0,rotation:0,rotationTarget:0},controls:{up:!1,down:!1,left:!1,right:!1},Fuel:{total:20,available:20},elapsedTime:0,currentTime:0,maxTime:1e3,maxVelocity:30,currentVelocity:0,initialVelocity:0,animation:{},currentStrafingDistance:0,maxStrafingDistance:45,strafeSpeed:1.5,strafingVelocity:60,rotationQueue:{},freeCam:!1,hazards:{},hazardInfo:{},currentHazard:{},colliding:!1,hitZackBot:!1,reachedHalfway:!1,protectorActive:!1,winEvent:function(){"use strict";CreatureGame.raceStatus.state="playerWin",app.sound.stop("carsound"),app.sound.stop("offroad"),app.sound.play("winsound")},toggleFreeCam:function(){"use strict";RacingPlayer.freeCam=!RacingPlayer.freeCam},reset:function(a){"use strict";RacingPlayer.currentTime=0,RacingPlayer.controls.up=!1,RacingPlayer.controls.down=!1,RacingPlayer.controls.left=!1,RacingPlayer.controls.right=!1,RacingPlayer.Fuel.available=20,RacingPlayer.currentVelocity=0,RacingPlayer.resetTime(),RacingPlayer.currentStrafingDistance=0,RacingPlayer.hitZackBot=!1,RacingPlayer.reachedHalfway=!1;var b,c,d=[{path:document.getElementById("motionPath"),index:0}];void 0!==a.PathBranches?RacingPlayer.animation=new PathAnimation(a.PathBranches,this.pathSelectCallback,RacingPlayer.winEvent,!0):RacingPlayer.animation=new PathAnimation(d,this.pathSelectCallback),RacingPlayer.rotationQueue=new NumberQueue(5),b=RacingPlayer.animation.getPointAtTime(0),c=RacingPlayer.animation.getPointAtTime(RacingPlayer.maxVelocity/RacingPlayer.animation.getMaxTime()),RacingPlayer.position.x=4*b.x,RacingPlayer.position.y=4*b.y,RacingPlayer.position.rotation=-Math.atan2(c.x-b.x,c.y-b.y),RacingPlayer.updateMiniMap(),RacingPlayer.hazards=app.levels.hazarddefs,RacingPlayer.currentHazard=RacingPlayer.hazards.none},resetTime:function(){"use strict";RacingPlayer.elapsedTime=0,RacingPlayer.initialVelocity=RacingPlayer.currentVelocity},update:function(){"use strict";RacingPlayer.elapsedTime+=CreatureGame.dt;var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o=RacingPlayer.elapsedTime,p=RacingPlayer.currentHazard.acceleration*(o*o)/2,q=RacingPlayer.initialVelocity+p,r=DEFAULT_VELOCITY+powerManager.getSpeedBoost(RacingPlayer.currentHazard);r>=q?RacingPlayer.currentVelocity=q:RacingPlayer.currentVelocity>r&&RacingPlayer.currentVelocity>MIN_VELOCITY&&(RacingPlayer.currentVelocity-=RacingPlayer.currentVelocity*CreatureGame.dt/2),leftControl()&&(RacingPlayer.freeCam?RacingPlayer.position.rotation-=.1:RacingPlayer.currentStrafingDistance<RacingPlayer.maxStrafingDistance&&(RacingPlayer.currentStrafingDistance+=RacingPlayer.strafingVelocity*CreatureGame.dt*RacingPlayer.strafeSpeed)),isKeyDown(38)||RacingPlayer.controls.up?RacingPlayer.freeCam&&(a=0,b=1,0!==RacingPlayer.position.rotation&&(a=Math.cos(RacingPlayer.position.rotation+Math.PI/2),b=Math.sin(RacingPlayer.position.rotation+Math.PI/2)),RacingPlayer.position.x+=a*CreatureGame.dt*200,RacingPlayer.position.y+=b*CreatureGame.dt*200):RacingPlayer.rotationQueue.clear(),rightControl()&&(RacingPlayer.freeCam?RacingPlayer.position.rotation+=.1:RacingPlayer.currentStrafingDistance>-RacingPlayer.maxStrafingDistance&&(RacingPlayer.currentStrafingDistance-=RacingPlayer.strafingVelocity*CreatureGame.dt*RacingPlayer.strafeSpeed)),isKeyDown(40)||RacingPlayer.controls.down||RacingPlayer.rotationQueue.clear(),k=RacingPlayer.animation.getMaxTime(),l=RacingPlayer.animation.getPointAtTime(RacingPlayer.currentTime/k),"racing"===CreatureGame.raceStatus.state&&(RacingPlayer.currentTime>k&&(RacingPlayer.currentTime-=k,k=RacingPlayer.animation.getMaxTime(),l=RacingPlayer.animation.getPointAtTime(RacingPlayer.currentTime/k)),RacingPlayer.currentTime<0&&(k=RacingPlayer.animation.getMaxTime(),RacingPlayer.currentTime+=k,l=RacingPlayer.animation.getPointAtTime(RacingPlayer.currentTime/k)),RacingPlayer.freeCam||(m=CreatureGame.MathFunctions.clamp((RacingPlayer.currentTime+RacingPlayer.maxVelocity)/k,0,1),n=RacingPlayer.animation.getLookAheadPointAtTime(m),a=n.x-l.x,b=n.y-l.y,c=Math.sqrt(a*a+b*b),a/=c,b/=c,0!==c&&(RacingPlayer.position.rotationTarget=-Math.atan2(a,b),d=-Math.atan2(a,b)-RacingPlayer.position.rotation,d=CreatureGame.MathFunctions.clamp(d,-.1,.1),RacingPlayer.rotationQueue.addValue(d),RacingPlayer.currentStrafingDistance+=RacingPlayer.rotationQueue.getAverage()*RacingPlayer.maxStrafingDistance*2,RacingPlayer.currentStrafingDistance=CreatureGame.MathFunctions.clamp(RacingPlayer.currentStrafingDistance,-RacingPlayer.maxStrafingDistance,RacingPlayer.maxStrafingDistance)),e=CreatureGame.MathFunctions.rotationDifference(RacingPlayer.position.rotation,RacingPlayer.position.rotationTarget),Math.abs(e)<.1?RacingPlayer.position.rotation=RacingPlayer.position.rotationTarget:e>0?RacingPlayer.position.rotation+=CreatureGame.dt:RacingPlayer.position.rotation-=CreatureGame.dt,RacingPlayer.position.x=4*l.x,RacingPlayer.position.y=4*l.y,f=-Math.cos(RacingPlayer.position.rotation+Math.PI),g=-Math.sin(RacingPlayer.position.rotation+Math.PI),RacingPlayer.position.x+=f*RacingPlayer.currentStrafingDistance,RacingPlayer.position.y+=g*RacingPlayer.currentStrafingDistance,RacingPlayer.colliding?(h=RacingPlayer.hazardInfo[2]-RacingPlayer.position.x,i=RacingPlayer.hazardInfo[3]-RacingPlayer.position.y,j=Math.sqrt(h*h+i*i),j>4*RacingPlayer.hazardInfo[1]&&(RacingPlayer.colliding=!1,RacingPlayer.currentHazard=RacingPlayer.hazards.none,RacingPlayer.hazardInfo=null,RacingPlayer.resetTime())):Math.abs(RacingPlayer.currentStrafingDistance)>=RacingPlayer.maxStrafingDistance?"offroad"!==RacingPlayer.currentHazard.name&&(tutorialManager.trigger("offroad"),app.sound.play("offroad",{loop:!0}),RacingPlayer.currentHazard=RacingPlayer.hazards.offroad,RacingPlayer.resetTime()):(app.sound.stop("offroad"),"none"!==RacingPlayer.currentHazard.name&&(RacingPlayer.currentHazard=RacingPlayer.hazards.none,RacingPlayer.resetTime())),RacingPlayer.currentTime+=RacingPlayer.currentVelocity*CreatureGame.dt),RacingPlayer.updateMiniMap(),playerCamera.update(),powerManager.update())},updateMiniMap:function(){"use strict";var a=document.getElementById("playerRepresentation");a.setAttribute("transform","translate("+RacingPlayer.position.x/4+","+RacingPlayer.position.y/4+") rotate("+RacingPlayer.position.rotation*(180/Math.PI)+")")},pathSelectCallback:function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o=a[0].path.getPointAtLength(a[0].path.getTotalLength()/10),p=a[1].path.getPointAtLength(a[1].path.getTotalLength()/10),q=RacingPlayer.position.rotation;return rightControl()&&(q+=.35),leftControl()&&(q-=.35),d=Math.cos(q+Math.PI/2)-Math.cos(q+Math.PI)*RacingPlayer.currentStrafingDistance,e=Math.sin(q+Math.PI/2)-Math.sin(q+Math.PI)*RacingPlayer.currentStrafingDistance,f=o.x-RacingPlayer.position.x,g=o.y-RacingPlayer.position.y,h=p.x-RacingPlayer.position.x,i=p.y-RacingPlayer.position.y,j=d*f+e*g,k=d*h+e*i,l=Math.sqrt(d*d+e*e),m=Math.sqrt(f*f+g*g),n=Math.sqrt(h*h+i*i),b=Math.acos(j/(l*m)),c=Math.acos(k/(l*n)),c>b?0:1},onCollision:function(a){"use strict";var b,c=powerManager.isFlying(),d=!1;if(RacingPlayer.currentVelocity>10&&!c)switch(RacingPlayer.hazards[a[0]].name){case"water":case"mud":case"snow":CreatureGame.playEffect(RacingPlayer.hazards[a[0]].name)}if(!RacingPlayer.colliding||"impact"===RacingPlayer.hazards[a[0]].type){RacingPlayer.currentHazard=RacingPlayer.hazards[a[0]],RacingPlayer.hazardInfo=a;for(b in RacingPlayer.currentHazard.immunities)if(RacingPlayer.currentHazard.immunities.hasOwnProperty(b)&&null!==powerManager.currentPower&&powerManager.currentPower.name===RacingPlayer.currentHazard.immunities[b]){"impact"===RacingPlayer.currentHazard.type&&playerCamera.Shake(.3,{frequency:4,amplitude:12}),powerManager.onCollision(RacingPlayer.currentHazard.name),RacingPlayer.currentHazard=RacingPlayer.hazards.none,d=!0;break}if(c&&(d=!0),!d)if(RacingPlayer.protectorActive)switch(RacingPlayer.currentHazard.name){case"rock":CreatureGame.playEffect("rocksplode");break;case"log":CreatureGame.playEffect("logsplode");break;case"zachbot":CreatureGame.playEffect("botsplode")}else"impact"===RacingPlayer.currentHazard.type?(tutorialManager.trigger("defense"),RacingPlayer.currentVelocity>0&&(RacingPlayer.currentVelocity=Math.max(RacingPlayer.currentVelocity-10,0)),"zachbot"!==RacingPlayer.currentHazard.name?app.sound.play("oddwoosh"):RacingPlayer.hitZackBot=!0,playerCamera.Shake(.3,{frequency:7,amplitude:30}),raceFlash("red",.3)):tutorialManager.trigger("terrain"),RacingPlayer.resetTime(),RacingPlayer.colliding=!0;return!0}return!1}},powerManager={fuelBurnEffectCount:0,currentPower:null,elapsedTime:0,turbo:0,getCurrentRacerName:function(){"use strict";return void 0!==powerManager.currentPower&&null!==powerManager.currentPower?powerManager.currentPower.name:"base"},setActivePower:function(a){"use strict";if(void 0!==powerManager.currentPower&&null!==powerManager.currentPower&&powerManager.currentPower.effect.onComplete(),powerManager.currentPower=AnimalPowers.movement[a]||AnimalPowers.special[a],powerManager.currentPower.name=a,void 0!==powerManager.currentPower&&null!==powerManager.currentPower){if(RacingPlayer.Fuel.available>=powerManager.currentPower.stats.Cost.value){if(powerManager.fuelBurnEffectCount=RacingPlayer.Fuel.available,RacingPlayer.Fuel.available-=powerManager.currentPower.stats.Cost.value,powerManager.currentPower.effect.onSetActive(),powerManager.elapsedTime=0,RacingPlayer.resetTime(),void 0!==powerManager.currentPower.effect.activateSound&&null!==powerManager.currentPower.effect.activateSound){var b="activate_"+powerManager.currentPower.effect.activateSound;app.sound.play("click",function(){app.sound.play(b)})}else app.sound.play("click");return!0}powerManager.currentPower=null}return!1},onCollision:function(a){"use strict";void 0!==powerManager.currentPower&&null!==powerManager.currentPower&&powerManager.currentPower.effect.onCollision(a)},getSpeedBoost:function(a){"use strict";var b,c=Math.pow(CreatureGame.RacerWeight,2)*-MAX_WEIGHT_EFFECT;return null!==powerManager.currentPower&&powerManager.currentPower.effect.height>=MAX_WEIGHT_EFFECT?c+powerManager.turbo:void 0!==powerManager.currentPower&&null!==powerManager.currentPower&&null!==a?(b=powerManager.currentPower.stats[a.boost||"Run"].value*VELOCITY_RANGE,b+c+powerManager.turbo):DEFAULT_STATS[a.boost||"Run"]*VELOCITY_RANGE+c+powerManager.turbo},getCurrentHeight:function(){"use strict";return void 0!==powerManager.currentPower&&null!==powerManager.currentPower?powerManager.currentPower.effect.height:0},update:function(){"use strict";void 0!==powerManager.currentPower&&null!==powerManager.currentPower&&(powerManager.elapsedTime+=CreatureGame.dt,powerManager.elapsedTime>=powerManager.currentPower.stats.Duration.value&&-1!==powerManager.currentPower.stats.Duration.value&&(powerManager.currentPower.effect.onComplete(),powerManager.currentPower=null,RacingPlayer.resetTime())),powerManager.fuelBurnEffectCount>0&&(powerManager.fuelBurnEffectCount-=2*CreatureGame.dt)},getProgress:function(){"use strict";return void 0!==powerManager.currentPower&&null!==powerManager.currentPower?-1===powerManager.currentPower.stats.Duration.value?1:1-powerManager.elapsedTime/powerManager.currentPower.stats.Duration.value:0},isFlying:function(){"use strict";return null!==powerManager.currentPower&&powerManager.currentPower.effect.height>=10&&CreatureGame.RacerWeight<=.8},reset:function(){"use strict";powerManager.currentPower=null,powerManager.elapsedTime=0}},playerCamera={angle:0,lookY:0,posY:0,amplitude:10,maxAmplitude:50,frequency:2,animationStarted:!1,currentHazard:{},duration:0,elapsedTime:0,jumping:!1,jumpHeight:0,maxJumpHeight:15,defaultGroundRotation:85,rotationMultiplier:6,Shake:function(a,b){"use strict";playerCamera.animationStarted||(playerCamera.angle=0,playerCamera.animationStarted=!0,playerCamera.duration=a,playerCamera.currentHazard=b)},Jump:function(){"use strict";playerCamera.jumping=!0,playerCamera.jumpHeight=0},update:function(){"use strict";playerCamera.amplitude<.1&&(playerCamera.amplitude=0),playerCamera.animationStarted?playerCamera.duration>0?(playerCamera.amplitude=playerCamera.currentHazard.amplitude,playerCamera.frequency=playerCamera.currentHazard.frequency,playerCamera.duration-=CreatureGame.dt):(playerCamera.animationStarted=!1,playerCamera.amplitude=0,playerCamera.frequency=0):"none"===RacingPlayer.currentHazard.name&&null!==powerManager.currentPower&&"hare"===powerManager.currentPower.name?(playerCamera.amplitude=7.5,playerCamera.frequency=2.5):(playerCamera.amplitude=(RacingPlayer.currentHazard.amplitude-playerCamera.amplitude)*CreatureGame.dt*4,playerCamera.frequency=RacingPlayer.currentHazard.frequency),playerCamera.angle+=CreatureGame.dt*Math.PI*2*playerCamera.frequency,playerCamera.angle>2*Math.PI&&(playerCamera.angle-=2*Math.PI),playerCamera.amplitude=Math.min(playerCamera.amplitude,playerCamera.maxAmplitude),playerCamera.lookY=Math.floor(playerCamera.amplitude*Math.sin(playerCamera.angle)),playerCamera.jumping?(playerCamera.jumpHeight<playerCamera.maxJumpHeight?playerCamera.jumpHeight+=playerCamera.maxJumpHeight*CreatureGame.dt*8:playerCamera.jumping=!1,playerCamera.jumpHeight=CreatureGame.MathFunctions.clamp(playerCamera.jumpHeight,0,playerCamera.maxJumpHeight),playerCamera.posY=powerManager.getCurrentHeight()+playerCamera.jumpHeight):playerCamera.jumpHeight>0?(playerCamera.jumpHeight-=playerCamera.maxJumpHeight*CreatureGame.dt*8,playerCamera.jumpHeight=CreatureGame.MathFunctions.clamp(playerCamera.jumpHeight,0,playerCamera.maxJumpHeight),playerCamera.posY=powerManager.getCurrentHeight()+playerCamera.jumpHeight):CreatureGame.RacerWeight<=.8&&(playerCamera.posY+=(powerManager.getCurrentHeight()-playerCamera.posY)*CreatureGame.dt*2),Math.abs(playerCamera.posY)<1e-4&&(playerCamera.posY=0);var a=playerCamera.defaultGroundRotation+playerCamera.rotationMultiplier*playerCamera.lookY/playerCamera.maxAmplitude,b=a-playerCamera.posY/30,c=playerCamera.lookY+2*playerCamera.posY;CreatureGame.floorCanvas.style.webkitTransform="perspective(500px) translate(0px,"+c+"px) rotateX("+b+"deg) scale(1.8, 1.8)",CreatureGame.floorCanvas.style.transform="perspective(500px) translate(0px,"+c+"px) rotateX("+b+"deg) scale(1.8, 1.8)"}},HALF_SCREEN={x:494,y:278},PI2=2*Math.PI,DISTRACTOR_MIN_Y=-150,DISTRACTOR_MAX_Y=139,DISTRACTOR_AMPLITUDE=DISTRACTOR_MAX_Y-DISTRACTOR_MIN_Y,DISTRACTOR_MAX_DISTANCE=1288,HORN_RANGE_X=25,HORN_FREQUENCY=2,HORN_AMPLITUDE=30,HORN_POSITION_X=393,PI_ON_TWO=Math.PI/2,raceFlash=null,showControlsReminder=null,racingZach=null,MaxCreaturePowers=4,mapDivisionSize=300,mapDivisionCount=Math.ceil(4096/mapDivisionSize),i=0,j=0,x=0,y=0,r,g,b,a,mult,floorStamp=null,currentImage=null,backgroundRotate=null,sampleCount=null,currentTime=null,sampledColor=null,grd=null,drawAllProps=null,toProp=null,distance=null,angle=null,newVector=null,propAlpha=null,zOffset=0,scale=null,propWidth=null,drawDistance=null,transformedPoint=null,transformedPoint2=null,DrawList=null,currentProp=null,propTestPoints=null,minx=null,miny=null,maxx=null,maxy=null,currentPropLocation=null,racerImageName=null,gradStep=null,currentStep=null,colorOffset=null,colorFill=null,minutes=null,seconds=null,timeSeparator=null,button=null,bg=null,fg=null,power=null,progress=null,startAngle=null,endAngle=null,index=null,grad=null,currentPowerPos=null,horizonLookY=null,needUpdate=!0,gradRadius=null,avg=null,leader=null,time=null,hazard=null,sqr_dist=null,comp=null,npcDef=null,npc=null,reachedEnd=null,distractorWave=null,hornWaveY=null,direction,xIndex,yIndex,rewardSlot,currentAnim,SPEED_DECREASE_MULTIPLIER=.5,DIFFICULTY_DISTANCE_1=65,DIFFICULTY_DISTANCE_2=120,SPEED_VARIATION_LENGTH=5,BOT_SPEED=90,BOT_GROUND_OFFSET=.1,BOT_SIZE={
h:.7,a:1.11},ZACH_ACCEL=15,MAX_BOT_TIME=3,BOT_SPAWN_SQUARE_DIST=9e4,MIN_ATTACK_DIST=.2,LOOK_DIST=5,BOT_COLL_DIST=20,Position={x:0,y:0,h:0,aspect:0,rotation:0,flipImage:!1},tutorialFlashAreas={levelPicker:{completed:!1,pathId:0},next:{completed:!1,pathId:1},animalPicker:{completed:!1,pathId:4},animalTabs:{completed:!1,pathId:2},addButton:{completed:!1,pathId:3},go:{completed:!1,pathId:1,condition:function(){"use strict";return 4===$(".powerSlot[data-speedpower]").length}}},tutorialSequence={left:["levelPicker","next"],right:["addButton","animalPicker","animalTabs","go"],racing:[]},tutorialEvents={move:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playDialog("tutorial_move",tutorialManager.playNext)}},moveReminder:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playDialog("tutorial_move",tutorialManager.playNext),showControlsReminder(),tutorialEvents.moveReminder.triggered=!1}},power:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playDialog("tutorial_power",tutorialManager.playNext)}},powerReminder:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playDialog("tutorial_power_reminder",tutorialManager.playNext),tutorialManager.powerNotificationRequired=!1}},offroad:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playDialog("tutorial_offroad",tutorialManager.playNext)}},defense:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playDialog("tutorial_defense",tutorialManager.playNext)}},terrain:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playDialog("tutorial_region",tutorialManager.playNext)}},zachbot:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playDialog("watch_out_bots",tutorialManager.playNext)}},levels_intro:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_tuts_hitnext",tutorialManager.playNext)},avivaTalks:!0},levels_oncycle:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_tuts_levelconditions",tutorialManager.playNext)},avivaTalks:!0},levels_next:{triggered:!1,trigger:function(){"use strict";setTimeout(tutorialManager.playNext,10)},avivaTalks:!0},powers_intro:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_tuts_powers",tutorialManager.playNext)},avivaTalks:!0},powers_cycle:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_tuts_powerstats",tutorialManager.playNext)},avivaTalks:!0},powers_full:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_tuts_begin",tutorialManager.playNext)},avivaTalks:!0},powers_remove:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("attachment_removed",tutorialManager.playNext)},avivaTalks:!0},powers_add:{first:!1,triggered:!1,trigger:function(){"use strict";tutorialEvents.powers_add.first?CreatureGame.audio.playAudio("add_"+Math.ceil(3*Math.random()),tutorialManager.playNext):CreatureGame.audio.playAudio("lab_tuts_remove",tutorialManager.playNext),tutorialEvents.powers_add.first=!0,tutorialEvents.powers_add.triggered=!1},avivaTalks:!0},description_weight:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_description_weight",tutorialManager.playNext)},avivaTalks:!0},description_cost:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_description_cost",tutorialManager.playNext)},avivaTalks:!0},description_duration:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_description_duration",tutorialManager.playNext)},avivaTalks:!0},left_tab:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_tuts_movement_attachments",tutorialManager.playNext)},avivaTalks:!0},right_tab:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_tuts_defensive_attachments",tutorialManager.playNext)},avivaTalks:!0},select_empty:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_tuts_emptyslot",tutorialManager.playNext)},avivaTalks:!0},racer_overweight:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("racer_too_heavy",tutorialManager.playNext)},avivaTalks:!0},setup_intro:{triggered:!1,trigger:function(){"use strict";app.sound.play("setup_intro",tutorialManager.playNext)},avivaTalks:!1}},tutorialManager={elapsedTime:0,timeSinceMovement:0,timeSincePower:0,timeBeforeNotification:30,moveNotificationRequired:!0,powerNotificationRequired:!0,tutorialQueue:[],ready:!0,flashTimer:0,showFlash:!1,markTutorialFlashComplete:function(a){"use strict";tutorialFlashAreas[a].completed=!0},updateTutorialFlash:function(a){"use strict";var b,c=null;for(tutorialManager.flashTimer+=CreatureGame.dt,tutorialManager.flashTimer>.2&&(tutorialManager.flashTimer=0,tutorialManager.showFlash=!tutorialManager.showFlash),b=0;b<tutorialSequence[a].length;b+=1)if(!tutorialFlashAreas[tutorialSequence[a][b]].completed){c=tutorialFlashAreas[tutorialSequence[a][b]];break}if($("#lab_tutorial_highlights .tutorialVisible").each(function(a,b){(null===c||b.id!=="lab_tutorial_flash_"+c.pathId)&&(b.className.baseVal="")}),null!==c){if(void 0!==c.condition&&!c.condition())return void(document.getElementById("lab_tutorial_flash_"+c.pathId).className.baseVal="");document.getElementById("lab_tutorial_flash_"+c.pathId).className.baseVal=tutorialManager.showFlash?"tutorialVisible":""}},trigger:function(a){"use strict";if(void 0!==tutorialEvents[a]&&!tutorialEvents[a].triggered)if(tutorialManager.ready)tutorialManager.ready=!1,tutorialEvents[a].triggered=!0,tutorialEvents[a].trigger(),tutorialEvents[a].avivaTalks&&CreatureGame.labAviva.talk(!0);else{var b;for(b=0;b<tutorialManager.tutorialQueue.length;b+=1)if(tutorialManager.tutorialQueue[b]===a)return;tutorialManager.tutorialQueue.push(a)}},update:function(){"use strict";tutorialManager.timeSinceMovement+=CreatureGame.dt,(rightControl()||leftControl())&&(tutorialManager.timeSinceMovement=0),tutorialManager.timeSinceMovement>tutorialManager.timeBeforeNotification&&(tutorialManager.timeSinceMovement=0,tutorialManager.trigger("moveReminder")),tutorialManager.timeSincePower+=CreatureGame.dt,tutorialManager.timeSincePower>tutorialManager.timeBeforeNotification&&(tutorialManager.timeSincePower=0,RacingPlayer.Fuel.available>4&&tutorialManager.trigger("powerReminder"))},playNext:function(){"use strict";CreatureGame.labAviva.talk(!1),tutorialManager.ready=!0,tutorialManager.tutorialQueue.length>0&&(tutorialManager.trigger(tutorialManager.tutorialQueue[0]),tutorialManager.tutorialQueue.splice(0,1))},stopAllSounds:function(){"use strict";tutorialManager.tutorialQueue=[],CreatureGame.audio.stopSound("labtutorial_snow"),CreatureGame.audio.stopSound("labtutorial_next"),CreatureGame.audio.stopSound("labtutorial_powers"),CreatureGame.audio.stopSound("labtutorial_remove"),CreatureGame.audio.stopSound("labtutorial_begin")}};!function(){var a=include("springroll.Application"),b=include("springroll.Sound"),c=include("springroll.native.NativeDisplay"),d=new a({name:"creatureMobile",canvasId:"GameCanvas",configPath:"./assets/config/config.json",display:c,displayOptions:{clearView:!0},preload:[{name:"loadingBackground",src:"./assets/images/AvivaLoading2.png"},{name:"loadingAvivaAnim",src:"./assets/images/Animations/Aviva_loading_285x500.png",anim:{frames:4,direction:"x",time:.4,startPaused:!0}},{name:"staticAnim",src:"./assets/images/Animations/channel_change248x144.png",anim:{frames:2,direction:"y",time:.2,startPaused:!0}},{name:"loading_racer_cheetah",src:"./assets/images/Racers/cheetah.png"},{name:"loading_racer_falcon",src:"./assets/images/Racers/falcon.png"},{name:"loading_racer_pronghorn",src:"./assets/images/Racers/pronghorn.png"},{name:"loading_racer_skunk",src:"./assets/images/Racers/skunk.png"},{name:"loading_racer_tortoise",src:"./assets/images/Racers/tortoise.png"},{name:"splash",src:"./assets/images/Splash.png"},{name:"logo",src:"./assets/images/Logo.png"}]});d.on("init",function(){d.gamePaused=!1,d.start=!1,d.voPlayer=this.voPlayer,d.sound=b.instance,d.levels=this.config.levels,d.onresize=!1,d.sound.preload("click",GameInit())}),d.on("pause",function(){d.gamePaused=!0,CreatureGame.isPaused=!0,void 0!==CreatureGame.raceStatus&&"racing"===CreatureGame.raceStatus.state&&d.sound.stop(d.bgMusic)}),d.on("resumed",function(){d.gamePaused=!1,CreatureGame.isPaused=!1,void 0!==CreatureGame.raceStatus&&"racing"===CreatureGame.raceStatus.state&&d.sound.play(d.bgMusic,{loop:!0})}),d.labAudio=["setup_intro","lab_tuts_hitnext","music_loop_menu01","lets_race","labintro","powersintro","lab_tuts_levelconditions","lab_tuts_powers","lab_tuts_remove","lab_tuts_begin","lab_tuts_powerstats","lab_description_weight","lab_description_cost","lab_description_duration","lab_tuts_movement_attachments","lab_tuts_defensive_attachments","lab_tuts_emptyslot","racer_too_heavy","attachment_removed","add_1","add_2","add_3"],d.raceAudio=["did_you_pick_321GO","music_loop_race01","music_loop_race02","music_loop_race03","1","2","3","GO","lose_lead","losesound","winsound","oddwoosh","smart"],window.app=d}();