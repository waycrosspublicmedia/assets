/**
 * Cooked with Flambe
 * https://github.com/aduros/flambe
 */
'use strict';(function(){var I,i,ca,s,l,f,C,p,n,h,$,k,R,D,T,Q,U,V,Y,M,x,z,O,o,e,d,J,m,P,v,B,H,K,F,y,aa;function t(a,b){function c(){}c.prototype=a;var g=new c,d;for(d in b)g[d]=b[d];return g}function fa(a){return a instanceof Array?function(){return A.iter(a)}:"function"==typeof a.iterator?w(a,a.iterator):a.iterator}function w(a,b){var c=function(){return c.method.apply(c.scope,arguments)};c.scope=a;c.method=b;return c}var j={},q=function(){return M.__string_rec(this,"")},X=function(a,b){b=b.split("u").join("");
this.r=RegExp(a,b)};j.EReg=X;X.__name__=["EReg"];X.prototype={matchedPos:function(){if(null==this.r.m)throw"No string matched";return{pos:this.r.m.index,len:this.r.m[0].length}},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)a=this.r.m[a];else throw"EReg::matched";return a},match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},__class__:X};var G=function(){this.h={}};j.Hash=G;G.__name__=["Hash"];G.prototype={iterator:function(){return{ref:this.h,
it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return A.iter(a)},remove:function(a){a="$"+a;if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},exists:function(a){return this.h.hasOwnProperty("$"+a)},get:function(a){return this.h["$"+a]},set:function(a,b){this.h["$"+a]=b},__class__:G};var A=function(){};j.HxOverrides=A;A.__name__=
["HxOverrides"];A.dateStr=function(a){var b=a.getMonth()+1,c=a.getDate(),g=a.getHours(),d=a.getMinutes(),f=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>c?"0"+c:""+c)+" "+(10>g?"0"+g:""+g)+":"+(10>d?"0"+d:""+d)+":"+(10>f?"0"+f:""+f)};A.strDate=function(a){switch(a.length){case 8:var a=a.split(":"),b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return a=a.split(" "),
b=a[0].split("-"),a=a[1].split(":"),new Date(b[0],b[1]-1,b[2],a[0],a[1],a[2]);default:throw"Invalid date format : "+a;}};A.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};A.substr=function(a,b,c){if(null!=b&&0!=b&&null!=c&&0>c)return"";null==c&&(c=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b);return a.substr(b,c)};A.remove=function(a,b){for(var c=0,g=a.length;c<g;){if(a[c]==b)return a.splice(c,1),!0;c++}return!1};A.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<
this.arr.length},next:function(){return this.arr[this.cur++]}}};var W=function(){this.h={}};j.IntHash=W;W.__name__=["IntHash"];W.prototype={keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return A.iter(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},exists:function(a){return this.h.hasOwnProperty(a)},get:function(a){return this.h[a]},set:function(a,b){this.h[a]=b},__class__:W};var ba=function(){};j.Lambda=ba;ba.__name__=["Lambda"];
ba.array=function(a){for(var b=[],a=fa(a)();a.hasNext();){var c=a.next();b.push(c)}return b};ba.has=function(a,b,c){if(null==c)for(c=fa(a)();c.hasNext();){if(a=c.next(),a==b)return!0}else for(var g=fa(a)();g.hasNext();)if(a=g.next(),c(a,b))return!0;return!1};ba.count=function(a,b){var c=0;if(null==b)for(var g=fa(a)();g.hasNext();)g.next(),c++;else for(g=fa(a)();g.hasNext();){var d=g.next();b(d)&&c++}return c};var da=function(){this.length=0};j.List=da;da.__name__=["List"];da.prototype={iterator:function(){return{h:this.h,
hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var a=this.h[0];this.h=this.h[1];return a}}},add:function(a){a=[a];null==this.h?this.h=a:this.q[1]=a;this.q=a;this.length++},__class__:da};var L=function(){};j.Reflect=L;L.__name__=["Reflect"];L.field=function(a,b){var c=null;try{c=a[b]}catch(g){}return c};L.setProperty=function(a,b,c){var g;if(a.__properties__&&(g=a.__properties__["set_"+b]))a[g](c);else a[b]=c};L.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,
g;for(g in a)c.call(a,g)&&b.push(g)}return b};L.isFunction=function(a){return"function"==typeof a&&!(a.__name__||a.__ename__)};L.compareMethods=function(a,b){return a==b?!0:!L.isFunction(a)||!L.isFunction(b)?!1:a.scope==b.scope&&a.method==b.method&&null!=a.method};var r=function(){};j.Std=r;r.__name__=["Std"];r.string=function(a){return M.__string_rec(a,"")};r.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==A.cca(a,1)||88==A.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};r.parseFloat=function(a){return parseFloat(a)};
var Z=function(){this.b=""};j.StringBuf=Z;Z.__name__=["StringBuf"];Z.prototype={__class__:Z};var S=function(){};j.StringTools=S;S.__name__=["StringTools"];S.urlEncode=function(a){return encodeURIComponent(a)};S.urlDecode=function(a){return decodeURIComponent(a.split("+").join(" "))};S.startsWith=function(a,b){return a.length>=b.length&&A.substr(a,0,b.length)==b};S.isSpace=function(a,b){var c=A.cca(a,b);return 9<=c&&13>=c||32==c};S.ltrim=function(a){for(var b=a.length,c=0;c<b&&S.isSpace(a,c);)c++;
return 0<c?A.substr(a,c,b-c):a};S.rtrim=function(a){for(var b=a.length,c=0;c<b&&S.isSpace(a,b-c-1);)c++;return 0<c?A.substr(a,0,b-c):a};S.trim=function(a){return S.ltrim(S.rtrim(a))};S.replace=function(a,b,c){return a.split(b).join(c)};var E=j.ValueType={__ename__:["ValueType"],__constructs__:"TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(",")};E.TNull=["TNull",0];E.TNull.toString=q;E.TNull.__enum__=E;E.TInt=["TInt",1];E.TInt.toString=q;E.TInt.__enum__=E;E.TFloat=["TFloat",
2];E.TFloat.toString=q;E.TFloat.__enum__=E;E.TBool=["TBool",3];E.TBool.toString=q;E.TBool.__enum__=E;E.TObject=["TObject",4];E.TObject.toString=q;E.TObject.__enum__=E;E.TFunction=["TFunction",5];E.TFunction.toString=q;E.TFunction.__enum__=E;E.TClass=function(a){a=["TClass",6,a];a.__enum__=E;a.toString=q;return a};E.TEnum=function(a){a=["TEnum",7,a];a.__enum__=E;a.toString=q;return a};E.TUnknown=["TUnknown",8];E.TUnknown.toString=q;E.TUnknown.__enum__=E;var N=function(){};j.Type=N;N.__name__=["Type"];
N.getClassName=function(a){return a.__name__.join(".")};N.getEnumName=function(a){return a.__ename__.join(".")};N.resolveClass=function(a){a=j[a];return null==a||!a.__name__?null:a};N.resolveEnum=function(a){a=j[a];return null==a||!a.__ename__?null:a};N.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],
b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw"Too many arguments";}};N.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};N.createEnum=function(a,b,c){var g=L.field(a,b);if(null==g)throw"No such constructor "+b;if(L.isFunction(g)){if(null==c)throw"Constructor "+b+" need parameters";return g.apply(a,c)}if(null!=c&&0!=c.length)throw"Constructor "+b+" does not need parameters";
return g};N.getEnumConstructs=function(a){return a.__constructs__.slice()};N["typeof"]=function(a){switch(typeof a){case "boolean":return E.TBool;case "string":return E.TClass(String);case "number":return Math.ceil(a)==a%2147483648?E.TInt:E.TFloat;case "object":if(null==a)return E.TNull;var b=a.__enum__;if(null!=b)return E.TEnum(b);a=a.__class__;return null!=a?E.TClass(a):E.TObject;case "function":return a.__name__||a.__ename__?E.TObject:E.TFunction;case "undefined":return E.TNull;default:return E.TUnknown}};
var u=function(){};j.Xml=u;u.__name__=["Xml"];u.parse=function(a){return D.Parser.parse(a)};u.createElement=function(a){var b=new u;b.nodeType=u.Element;b._children=[];b._attributes=new G;b.setNodeName(a);return b};u.createPCData=function(a){var b=new u;b.nodeType=u.PCData;b.setNodeValue(a);return b};u.createCData=function(a){var b=new u;b.nodeType=u.CData;b.setNodeValue(a);return b};u.createComment=function(a){var b=new u;b.nodeType=u.Comment;b.setNodeValue(a);return b};u.createDocType=function(a){var b=
new u;b.nodeType=u.DocType;b.setNodeValue(a);return b};u.createProlog=function(a){var b=new u;b.nodeType=u.Prolog;b.setNodeValue(a);return b};u.createDocument=function(){var a=new u;a.nodeType=u.Document;a._children=[];return a};u.prototype={toString:function(){if(this.nodeType==u.PCData)return this._nodeValue;if(this.nodeType==u.CData)return"<![CDATA["+this._nodeValue+"]]\>";if(this.nodeType==u.Comment)return"<\!--"+this._nodeValue+"--\>";if(this.nodeType==u.DocType)return"<!DOCTYPE "+this._nodeValue+
">";if(this.nodeType==u.Prolog)return"<?"+this._nodeValue+"?>";var a=new Z;if(this.nodeType==u.Element){a.b+=r.string("<");a.b+=r.string(this._nodeName);for(var b=this._attributes.keys();b.hasNext();){var c=b.next();a.b+=r.string(" ");a.b+=r.string(c);a.b+=r.string('="');a.b+=r.string(this._attributes.get(c));a.b+=r.string('"')}if(0==this._children.length)return a.b+=r.string("/>"),a.b;a.b+=r.string(">")}for(b=this.iterator();b.hasNext();)c=b.next(),a.b+=r.string(c.toString());this.nodeType==u.Element&&
(a.b+=r.string("</"),a.b+=r.string(this._nodeName),a.b+=r.string(">"));return a.b},addChild:function(a){if(null==this._children)throw"bad nodetype";null!=a._parent&&A.remove(a._parent._children,a);a._parent=this;this._children.push(a)},firstElement:function(){if(null==this._children)throw"bad nodetype";for(var a=0,b=this._children.length;a<b;){var c=this._children[a];if(c.nodeType==u.Element)return c;a++}return null},elementsNamed:function(a){if(null==this._children)throw"bad nodetype";return{cur:0,
x:this._children,hasNext:function(){for(var b=this.cur,c=this.x.length;b<c;){var g=this.x[b];if(g.nodeType==u.Element&&g._nodeName==a)break;b++}this.cur=b;return b<c},next:function(){for(var b=this.cur,c=this.x.length;b<c;){var g=this.x[b];b++;if(g.nodeType==u.Element&&g._nodeName==a)return this.cur=b,g}return null}}},elements:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var a=this.cur,b=this.x.length;a<b&&!(this.x[a].nodeType==u.Element);)a+=
1;this.cur=a;return a<b},next:function(){for(var a=this.cur,b=this.x.length;a<b;){var c=this.x[a],a=a+1;if(c.nodeType==u.Element)return this.cur=a,c}return null}}},iterator:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){return this.cur<this.x.length},next:function(){return this.x[this.cur++]}}},exists:function(a){if(this.nodeType!=u.Element)throw"bad nodeType";return this._attributes.exists(a)},set:function(a,b){if(this.nodeType!=u.Element)throw"bad nodeType";
this._attributes.set(a,b)},get:function(a){if(this.nodeType!=u.Element)throw"bad nodeType";return this._attributes.get(a)},getParent:function(){return this._parent},setNodeValue:function(a){if(this.nodeType==u.Element||this.nodeType==u.Document)throw"bad nodeType";return this._nodeValue=a},getNodeValue:function(){if(this.nodeType==u.Element||this.nodeType==u.Document)throw"bad nodeType";return this._nodeValue},setNodeName:function(a){if(this.nodeType!=u.Element)throw"bad nodeType";return this._nodeName=
a},getNodeName:function(){if(this.nodeType!=u.Element)throw"bad nodeType";return this._nodeName},__class__:u,__properties__:{set_nodeName:"setNodeName",get_nodeName:"getNodeName",set_nodeValue:"setNodeValue",get_nodeValue:"getNodeValue"}};I=function(){};i=void 0;ca=void 0;s=void 0;l=void 0;j["com.nick.spongebob.fiery_tracks.DocumentApp"]=I;I.__name__=["com","nick","spongebob","fiery_tracks","DocumentApp"];I.main=function(){z.init();I._fillEntity=new O;I._fillSprite=new o.FillSprite(0,960,560);I._fillEntity.add(I._fillSprite);
z.root.addChild(I._fillEntity);f.JSEmbedProxy.getIsCrossdomain()?f.WorkinCloud.instance._getAssets().setCrossdomainBaseUrl(I.appendAssetsToUrl(f.JSEmbedProxy.getBase())):f.WorkinCloud.instance._getAssets()._setBaseUrl(I.trimUrl(f.JSEmbedProxy.getBase()));f.WorkinCloud.instance._getDispatcher().addEventListener(C.ConstantsCloud.EVENT_FILES_LOADED,I._onBootstrapLoad);f.WorkinCloud.instance._getAssets().addPackDef("bootstrap");f.WorkinCloud.instance._getAssets().loadPack("bootstrap")};I._onBootstrapLoad=
function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(C.ConstantsCloud.EVENT_FILES_LOADED,I._onBootstrapLoad);if(i.ConstantsApp.LOAD_FONT_EARLY){f.WorkinCloud.instance._getDispatcher().addEventListener(C.ConstantsCloud.EVENT_FILES_LOADED,I._onFontLoad);var a=f.WorkinCloud.instance._getAssets().getXML(i.ConstantsApp.CONFIG_XML_PATH);f.WorkinCloud.instance.setString(C.ConstantsCloud.STRING_REGION_ID,r.string(a.node.resolve("localization").node.resolve("region").getInnerData()));f.WorkinCloud.instance._getAssets().addPackDef("fonts_"+
f.WorkinCloud.instance.getString(C.ConstantsCloud.STRING_REGION_ID));f.WorkinCloud.instance._getAssets().loadPack("fonts_"+f.WorkinCloud.instance.getString(C.ConstantsCloud.STRING_REGION_ID))}else I._initServices(),T.delay(I._initMain,800)};I._onFontLoad=function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(C.ConstantsCloud.EVENT_FILES_LOADED,I._onFontLoad);I._initServices();T.delay(I._initMain,800)};I._initMain=function(){I._main=new ca};I._initServices=function(){for(var a=f.WorkinCloud.instance._getAssets().getXML(i.ConstantsApp.CONFIG_XML_PATH).node.resolve("services").nodes.resolve("service").iterator();a.hasNext();){var b=
a.next();switch(b.att.resolve("type").toString()){case "analytics":"true"==b.att.resolve("enabled").toString()&&(f.WorkinCloud.instance.log("[DocumentApp](_initServices) initAnalytics"),p.ServiceAnalytics.init(b.att.resolve("id").toString()));break;case "canadaTracking":"true"==b.att.resolve("enabled").toString()&&(f.WorkinCloud.instance.log("[DocumentApp](_initServices) initCanadaTracking"),p.ServiceAnalytics.enableCanadaTracking(b.att.resolve("showGameTitle").toString()));break;case "nickavatar":"true"==
b.att.resolve("enabled").toString()?(f.WorkinCloud.instance.log("[DocumentApp](_initServices) initNickAvatar"),p.ServiceNickAvatar._getInstance().enable(b.att.resolve("url").toString())):p.ServiceNickAvatar._getInstance().disable();break;case "leaderboard":"true"==b.att.resolve("enabled").toString()?(f.WorkinCloud.instance.log("[DocumentApp](_initServices) initLeaderboard"),p.ServiceNickLeaderboard._getInstance().enable(b.att.resolve("url").toString(),b.att.resolve("keyword").toString())):p.ServiceNickLeaderboard._getInstance().disable()}}};
I.trimUrl=function(a){if(""==a)return"";if(0>a.indexOf("http"))return"/"==a.charAt(0)&&(a=A.substr(a,1,a.length-1)),a;var b=a.indexOf("http://");0>b?(b=a.indexOf("https://"),b=0>b?0:b+8):b+=7;b=a.indexOf("/",b);a=A.substr(a,b,a.length-b);return a=I.appendAssetsToUrl(a)};I.appendAssetsToUrl=function(a){if(0==a.length)return a;"/"!=a.charAt(a.length-1)&&(a+="/");a.indexOf("/assets")<a.length-9&&(a+="assets/");return a};ca=function(){this._RATE_REFRESH_SCALE=0.4;f.WorkinCloud.instance.log("[Main] Constructed");
this._root=z.root;this._timeline=new O;this._root.addChild(this._timeline);z.uncaughtError.connect(w(this,this.errorHandler));f.WorkinCloud.instance._getInput().prime();this._scaleSprite=new o.Sprite;this._timeline.add(this._scaleSprite);this._layerWorld=new O;this._layerUI=new O;this._timeline.addChild(this._layerWorld);this._timeline.addChild(this._layerUI);this._dt=0;this._timerRefreshScale=0.0010;this._isUIActive=this._isWorldActive=!1;this._flagFirstPlay=!0;this._flagInitialLoadComplete=this._flagWebAudioUnlocked=
!1;this._flagGameplayPaused=!0;this._flagJSEmbedExists=this._flagJSEmbedPauseState=!1;M.__instanceof(z._platform.getStage(),e.html.HtmlStage)&&(i.ConstantsApp.scaleFactor=M.__cast(z._platform.getStage(),e.html.HtmlStage).scaleFactor);this._flagJSEmbedExists=f.JSEmbedProxy.getExists();f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_LOCAL_TEXT_LOADED,!1);this._changeActions=[];this._flowstack=[];this._addEventListeners();this._beginEngine()};j["com.nick.spongebob.fiery_tracks.Main"]=ca;ca.__name__=
["com","nick","spongebob","fiery_tracks","Main"];ca.prototype={_disposeWorld:function(){this._isWorldActive&&(this._isWorldActive=!1,this._world.dispose(),this._world=null)},_onEventInterfaceChange:function(a){this._executeInterfaceChange(a.flowId,a.screenId)},_handleWebAudioUnlock:function(){this._flagWebAudioUnlocked||(this._flagWebAudioUnlocked=!0,f.WorkinCloud.instance._getSound().playSound("audio/silent"))},_onEventFilesLoading:function(a){f.WorkinCloud.instance.setInt(i.ConstantsApp.INT_LOADING_PROGRESS,
a._getData().value)},_onEventInput:function(a){this._handleWebAudioUnlock();f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_ORIENTATION_ALERT)||this._ui.handleInput(a)&&this._isWorldActive&&this._world.handleInput(a)},_onFlowEvent:function(a){this._addFlowEvent(a.flowId)},_onMuteToggle:function(){f.WorkinCloud.instance._getSound().setMute(!f.WorkinCloud.instance._getSound().getMute())},_enableInput:function(){f.WorkinCloud.instance._getDispatcher().addEventListener(n.WMEventInput.EVENT_INPUT,w(this,
this._onEventInput))},_addEventListeners:function(){f.WorkinCloud.instance._getDispatcher().addEventListener(n.WMEventUpdate.EVENT_UPDATE,w(this,this._onEventUpdate));f.WorkinCloud.instance._getDispatcher().addEventListener(i.ConstantsApp.EVENT_MUTE_TOGGLE,w(this,this._onMuteToggle));f.WorkinCloud.instance._getDispatcher().addEventListener(n.WMEventFlow.EVENT_FLOW,w(this,this._onFlowEvent));f.WorkinCloud.instance._getDispatcher().addEventListener(i.ConstantsApp.EVENT_WORLD_GENERATION_COMPLETE,w(this,
this._onWorldGenerationComplete));f.WorkinCloud.instance._getDispatcher().addEventListener(C.ConstantsCloud.EVENT_FILES_LOADING,w(this,this._onEventFilesLoading))},_executeInterfaceChange:function(a,b){for(var c=this._changeActions.length;0<c;)c--,this._changeActions[c]._getScreenId()==b&&this._changeActions[c]._getChangeEvent()==a&&(this._changeActions[c]._getAction()(),this._changeActions.splice(c,1))},_unpauseGameplay:function(a){null==a&&(a=!0);a&&(this._flagGameplayPaused=!1);f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEvent(i.ConstantsApp.EVENT_UNPAUSE))},
_pauseGameplay:function(a){null==a&&(a=!0);a&&(this._flagGameplayPaused=!0);f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEvent(i.ConstantsApp.EVENT_PAUSE))},_executeFlowStack:function(a){if(!this._ui._getHasTransition())switch(f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_INPUT_LOCK,!1),a){case i.ConstantsScreen.FLOW_SPLASH_PLAY:f.WorkinCloud.instance._getSound().playMusic("audio/music",0.5);p.ServiceAnalytics.sendCanadaTrackingCall("play");this._gotoAndPlayGame();break;case i.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP:this._ui.openScreen(i.ConstantsScreen.SCREEN_HELP,
!1);p.ServiceAnalytics.sendMilestone("custom3");break;case i.ConstantsScreen.FLOW_HELP_CLOSE:this._ui.closeScreen(i.ConstantsScreen.SCREEN_HELP);break;case i.ConstantsScreen.FLOW_GAMEPLAY_MENU:this._pauseGameplay();this._ui.openScreen(i.ConstantsScreen.SCREEN_GAMEPLAY_MENU,!1);break;case i.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE:this._unpauseGameplay();this._ui.closeScreen(i.ConstantsScreen.SCREEN_GAMEPLAY_MENU);break;case i.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT:this._ui.openScreen(i.ConstantsScreen.SCREEN_QUIT_CONFIRM,
!1);break;case i.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES:this._resetFlagsResults();this._gotoEndGame(!0);break;case i.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO:this._ui.closeScreen(i.ConstantsScreen.SCREEN_QUIT_CONFIRM);break;case i.ConstantsScreen.FLOW_BRANCH_GAME_LOSE:this._pauseGameplay();this._resetFlagsResults();this._gotoEndGame(!1);break;case i.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN:this._disposeWorld(),p.ServiceAnalytics.sendCanadaTrackingCall("replay"),this._onGameNew(),this._gotoAndPlayGame(),
f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_PAUSED,!1)}},_runFlowStack:function(){if(0!=this._flowstack.length)for(;0<this._flowstack.length;)this._executeFlowStack(this._flowstack[0]),this._flowstack.shift()},_addFlowEvent:function(a){this._flowstack.push(a)},_hideOrientationAlert:function(){f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_ORIENTATION_ALERT)&&(f.WorkinCloud.instance.log("[Main](_showOrientationAlert) Back to landscape."),f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_ORIENTATION_ALERT,
!1),f.JSEmbedProxy.unpause(),f.JSEmbedProxy.alertOff())},_showOrientationAlert:function(){f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_ORIENTATION_ALERT)||(f.WorkinCloud.instance.log("[Main](_showOrientationAlert) Portrait mode!"),f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_ORIENTATION_ALERT,!0),f.JSEmbedProxy.pause(),f.JSEmbedProxy.alertOn(f.WorkinCloud.instance._getLocalize().getData("orientation_landscape")._getString()))},_onEventUpdate:function(a){this._dt=a.getDt();0.12<this._dt&&
(this._dt=0.12);if(this._flagJSEmbedExists&&(f.JSEmbedProxy.getIsPaused()!=this._flagJSEmbedPauseState&&((this._flagJSEmbedPauseState=f.JSEmbedProxy.getIsPaused())?this._pauseGameplay(!1):this._flagGameplayPaused||this._unpauseGameplay()),this._timerRefreshScale-=this._dt,0>=this._timerRefreshScale)){this._timerRefreshScale=this._RATE_REFRESH_SCALE;if(this._flagInitialLoadComplete&&f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_TOUCH_DEVICE)){if(f.JSEmbedProxy.getCanvasHeight()>f.JSEmbedProxy.getCanvasWidth()){this._showOrientationAlert();
return}if(f.WorkinCloud.instance.getValue(i.ConstantsApp.BOOL_ORIENTATION_ALERT)){this._hideOrientationAlert();return}}this._flagJSEmbedExists&&(a=f.JSEmbedProxy.getCanvasScale()*i.ConstantsApp.scaleFactor,a!=this._scaleSprite.scaleX._value&&(this._scaleSprite.scaleX.set__(this._scaleSprite.scaleY.set__(a)),f.WorkinCloud.instance._getInput()._setScale(a)))}h.tween.WorkinTweener._getInstance().update(this._dt);f.WorkinCloud.instance.update(this._dt);this._isUIActive&&this._ui.update(this._dt);this._isWorldActive&&
(this._world.update(this._dt),this._world.render());f.WorkinCloud.instance._getSound().update(this._dt);f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_GAME_LOSE)?this._onFlowEvent(new n.WMEventFlow(i.ConstantsScreen.FLOW_BRANCH_GAME_LOSE)):f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_GAME_WIN)?this._onFlowEvent(new n.WMEventFlow(i.ConstantsScreen.FLOW_BRANCH_GAME_WIN)):f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_LEVEL_LOSE)?this._onFlowEvent(new n.WMEventFlow(i.ConstantsScreen.FLOW_BRANCH_LEVEL_LOSE)):
f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_LEVEL_WIN)&&this._onFlowEvent(new n.WMEventFlow(i.ConstantsScreen.FLOW_BRANCH_LEVEL_WIN));this._runFlowStack()},_generateWorld:function(){this._isWorldActive&&this._disposeWorld();f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_INPUT_LOCK,!0);this._isWorldActive=!0;this._world=new s.World(this._layerWorld);i.ConstantsApp.OPTION_SHOW_LOADING_ON_PLAY_AGAIN&&this._ui.changeScreenTo(i.ConstantsScreen.SCREEN_LOADING,!1,i.ConstantsScreen.TRANSITION_SCROLL_UP)},
_resetFlagsResults:function(){f.WorkinCloud.instance.resetValue(i.ConstantsApp.BOOL_GAME_WIN);f.WorkinCloud.instance.resetValue(i.ConstantsApp.BOOL_GAME_LOSE);f.WorkinCloud.instance.resetValue(i.ConstantsApp.BOOL_LEVEL_WIN);f.WorkinCloud.instance.resetValue(i.ConstantsApp.BOOL_LEVEL_LOSE)},_onGameNew:function(){this._resetFlagsResults()},_gotoEndGame:function(a){this._flagWonPreviousGame=a;this._ui.changeScreenTo(i.ConstantsScreen.SCREEN_END_GAME,!1,i.ConstantsScreen.TRANSITION_SCROLL_DOWN);this._disposeWorld();
p.ServiceAnalytics.sendMilestone("custom7")},_gotoSplash:function(){f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_TOUCH_DEVICE)||f.WorkinCloud.instance._getSound().playMusic("audio/music",0.5);this._enableInput();f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_INPUT_LOCK,!1);this._ui.changeScreenTo(i.ConstantsScreen.SCREEN_SPLASH,!1,i.ConstantsScreen.TRANSITION_SCROLL_DOWN);p.ServiceAnalytics.sendMilestone("custom2")},_onWorldGenerationCompleteDelay:function(){f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_INPUT_LOCK,
!1);this._world.start();this._ui.changeScreenTo(i.ConstantsScreen.SCREEN_GAMEPLAY_HUD,!1,i.ConstantsScreen.TRANSITION_SCROLL_DOWN);this._unpauseGameplay();p.ServiceAnalytics.sendMilestone("custom6")},_onWorldGenerationComplete:function(){T.delay(w(this,this._onWorldGenerationCompleteDelay),300)},_gotoAndPlayGame:function(){this._loadChunks(["gameplay"],w(this,this._eventLoadCompleteGameplay),1200)&&(this._isWorldActive?f.WorkinCloud.instance.log("[Main](_gotoAndPlayGame) World already exists. Using existing world instead of creating new one."):
this._generateWorld())},_generateUI:function(){this._isUIActive=!0;this._ui.addScreen(i.ConstantsScreen.SCREEN_LOADING,l.screens.ScreenLoading,"ui/loading_panel");this._ui.addScreen(i.ConstantsScreen.SCREEN_LOADING_OVERLAY,l.screens.ScreenGeneric,"ui/loading_2/loading_overlay");this._ui.addScreen(i.ConstantsScreen.SCREEN_CUTSCENE_BORDERS,l.screens.ScreenGeneric,"ui/cutscene/cutscene_border");this._ui.addScreen(i.ConstantsScreen.SCREEN_SPLASH,l.screens.ScreenSplash,"ui/splash/splash_bg");this._ui.addScreen(i.ConstantsScreen.SCREEN_HELP,
l.screens.ScreenHelp);this._ui.addScreen(i.ConstantsScreen.SCREEN_GAMEPLAY_MENU,l.screens.ScreenGameplayMenu);this._ui.addScreen(i.ConstantsScreen.SCREEN_QUIT_CONFIRM,l.screens.ScreenQuitConfirm);this._ui.addScreen(i.ConstantsScreen.SCREEN_GAMEPLAY_HUD,l.screens.ScreenGameplayHUD);this._ui.addScreen(i.ConstantsScreen.SCREEN_END_GAME,l.screens.ScreenEndGame,"ui/end_screen/end_screen_bg");this._ui.addScreen(i.ConstantsScreen.SCREEN_PAUSE_ALERT,l.screens.ScreenPauseAlert);this._ui.addEventListener(n.WMEventInterfaceChange.EVENT_INTERFACE_OUTPUT,
w(this,this._onEventInterfaceChange))},_registerInput:function(){f.WorkinCloud.instance._getInput().registerInput(i.ConstantsApp.INPUT_SPACE,[d.Key.Space]);f.WorkinCloud.instance._getInput().registerInput(i.ConstantsApp.INPUT_LEFT,[d.Key.Left,d.Key.A]);f.WorkinCloud.instance._getInput().registerInput(i.ConstantsApp.INPUT_RIGHT,[d.Key.Right,d.Key.D]);f.WorkinCloud.instance._getInput().registerInput(i.ConstantsApp.INPUT_UP,[d.Key.Up,d.Key.W]);f.WorkinCloud.instance._getInput().registerInput(i.ConstantsApp.INPUT_DOWN,
[d.Key.Down,d.Key.S]);f.WorkinCloud.instance._getInput().registerInput(i.ConstantsApp.INPUT_Z,[d.Key.Z]);f.WorkinCloud.instance._getInput().registerInput(i.ConstantsApp.INPUT_X,[d.Key.X]);f.WorkinCloud.instance._getInput().registerInput(i.ConstantsApp.INPUT_C,[d.Key.C]);f.WorkinCloud.instance._getInput().registerInput(i.ConstantsApp.INPUT_P,[d.Key.P])},_setDefaults:function(){f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_PAUSED,!1);f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_GAMEOVER,
!1);f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_GAME_WIN,!1);f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_GAME_LOSE,!1);f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_LEVEL_WIN,!1);f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_LEVEL_LOSE,!1);f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_INPUT_LOCK,!1);f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_ORIENTATION_ALERT,!1);f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_TOUCH_DEVICE,z._platform.getTouch().get_supported());
f.WorkinCloud.instance.setInt(i.ConstantsApp.INT_HEALTH,3);f.WorkinCloud.instance.setInt(i.ConstantsApp.INT_LIVES,3);f.WorkinCloud.instance.setInt(i.ConstantsApp.INT_SCORE,0);f.WorkinCloud.instance.setInt(i.ConstantsApp.INT_LOADING_PROGRESS,0);f.WorkinCloud.instance.setFloat(i.ConstantsApp.FLOAT_GAME_SPEED_X,280);f.WorkinCloud.instance._getSound().setMute(i.ConstantsApp.OPTION_SILENCE_AUDIO)},_beginEngine:function(){f.WorkinCloud.instance.log("[Main](_beginEngine)");this._timeline.add(new $.ComponentUpdater);
this._parseConfigXML();this._ui=new l.ScreenManager(this._layerUI);this._setDefaults();this._generateUI();this._registerInput();this._loadInLocalizedFonts()},_eventLoadCompleteInitial:function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(C.ConstantsCloud.EVENT_FILES_LOADED,this._loadCallbackMethod);this._flagInitialLoadComplete=!0;T.delay(w(this,this._gotoSplash),1200)},_eventLoadCompleteGameplay:function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(C.ConstantsCloud.EVENT_FILES_LOADED,
this._loadCallbackMethod);T.delay(w(this,this._gotoAndPlayGame),1200)},_loadChunksDelayCallback:function(){this._loadChunks(this._loadChunksCurrent,this._loadCallbackMethod,0)},_loadChunks:function(a,b,c){null==c&&(c=0);for(var g=0,d=!0;g<a.length;)f.WorkinCloud.instance._getAssets().isChunkLoaded(a[g])||(d=!1),g++;if(d)return!0;f.WorkinCloud.instance._getAssets().isLoading()||f.WorkinCloud.instance.setInt(i.ConstantsApp.INT_LOADING_PROGRESS,0);this._loadChunksCurrent=a;this._loadCallbackMethod=b;
if(0<c)return T.delay(w(this,this._loadChunksDelayCallback),c),this._ui.changeScreenTo(i.ConstantsScreen.SCREEN_LOADING,!1,i.ConstantsScreen.TRANSITION_SCROLL_UP),!1;f.WorkinCloud.instance._getDispatcher().addEventListener(C.ConstantsCloud.EVENT_FILES_LOADED,this._loadCallbackMethod);for(g=0;g<a.length;)f.WorkinCloud.instance._getAssets().isChunkLoaded(a[g])||f.WorkinCloud.instance._getAssets().loadChunk(a[g]),g++;f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_INPUT_LOCK,!0);this._ui.changeScreenTo(i.ConstantsScreen.SCREEN_LOADING,
!1,i.ConstantsScreen.TRANSITION_SCROLL_UP);return!1},_beginInitialLoad:function(){this._loadChunks(["initial"],w(this,this._eventLoadCompleteInitial),1200)},_onFontLoad:function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(C.ConstantsCloud.EVENT_FILES_LOADED,w(this,this._onFontLoad));f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_LOCAL_TEXT_LOADED,!0);this._beginInitialLoad();null},_loadInLocalizedFonts:function(){f.WorkinCloud.instance._getDispatcher().addEventListener(C.ConstantsCloud.EVENT_FILES_LOADED,
w(this,this._onFontLoad));this._ui.changeScreenTo(i.ConstantsScreen.SCREEN_LOADING,!1,i.ConstantsScreen.TRANSITION_SCROLL_UP);f.WorkinCloud.instance._getAssets().addPackDef("fonts_"+f.WorkinCloud.instance.getString(C.ConstantsCloud.STRING_REGION_ID));f.WorkinCloud.instance._getAssets().loadPack("fonts_"+f.WorkinCloud.instance.getString(C.ConstantsCloud.STRING_REGION_ID))},_parseConfigXML:function(){f.WorkinCloud.instance.log("[Main](_parseConfigXML) Parse Config XML: "+i.ConstantsApp.CONFIG_XML_PATH);
for(var a=f.WorkinCloud.instance._getAssets().getXML(i.ConstantsApp.CONFIG_XML_PATH),b=a.node.resolve("packs").nodes.resolve("pack").iterator();b.hasNext();){for(var c=b.next(),g=[],d=c.nodes.resolve("flump").iterator();d.hasNext();){var e=d.next();g.push(e.att.resolve("id").toString())}d=[];for(e=c.nodes.resolve("tiles").iterator();e.hasNext();){var h=e.next();d.push(h.att.resolve("id").toString())}f.WorkinCloud.instance._getAssets().addPackDef(c.att.resolve("id").toString(),g,d)}for(b=a.node.resolve("chunks").nodes.resolve("chunk").iterator();b.hasNext();)c=
b.next(),f.WorkinCloud.instance._getAssets().addChunk(c.att.resolve("id").toString(),c);i.ConstantsApp.LOAD_FONT_EARLY||(f.WorkinCloud.instance.setString(C.ConstantsCloud.STRING_REGION_ID,r.string(a.node.resolve("localization").node.resolve("region").getInnerData())),f.WorkinCloud.instance.log("[Main] Localization : Set Region: "+f.WorkinCloud.instance.getString(C.ConstantsCloud.STRING_REGION_ID)))},errorHandler:function(a){f.WorkinCloud.instance.log("Error:"+a)},__class__:ca};i={ConstantsApp:function(){}};
j["com.nick.spongebob.fiery_tracks.data.ConstantsApp"]=i.ConstantsApp;i.ConstantsApp.__name__="com,nick,spongebob,fiery_tracks,data,ConstantsApp".split(",");i.ConstantsScreen=function(){};j["com.nick.spongebob.fiery_tracks.data.ConstantsScreen"]=i.ConstantsScreen;i.ConstantsScreen.__name__="com,nick,spongebob,fiery_tracks,data,ConstantsScreen".split(",");n={};f=void 0;C=void 0;p=void 0;h=void 0;$=void 0;k=void 0;R=void 0;n.WMEventDispatcher=function(){this._signals=new G};j["com.workinman.events.WMEventDispatcher"]=
n.WMEventDispatcher;n.WMEventDispatcher.__name__=["com","workinman","events","WMEventDispatcher"];n.WMEventDispatcher.prototype={dispose:function(){for(var a=this._signals.iterator();a.hasNext();)a.next().dispose();this._signals=null},dispatchEvent:function(a){this._signals.exists(a.getEventId())&&this._signals.get(a.getEventId()).dispatchEvent(a)},removeEventListener:function(a,b){this._signals.exists(a)&&(this._signals.get(a).removeEventListener(b),this._signals.get(a).isEmtpy()&&(this._signals.get(a).dispose(),
this._signals.remove(a)))},addEventListener:function(a,b){this._signals.exists(a)||this._signals.set(a,new n._WMEventDispatcher.WMEventTracker);this._signals.get(a).addEventListener(b)},__class__:n.WMEventDispatcher};l={ScreenManager:function(a){n.WMEventDispatcher.call(this);this._container=a;this._layerScreen=new O;this._layerTransition=new O;this._container.addChild(this._layerScreen);this._container.addChild(this._layerTransition);this._isPaused=!1;this._screens=[];this._screensOpen=[];this._screensQueue=
[];this._transitionType=-1;this._flagCloseAllScreensWhenBottomCloses=this._flagHasScreenshot=this._flagOpenScreenAfterTransition=this._flagCloseScreenAfterTransition=this._flagHasTransition=!1;this._camera=new h.WorkinCamera(i.ConstantsApp.STAGE_CENTER_X,i.ConstantsApp.STAGE_CENTER_Y)}};j["com.nick.spongebob.fiery_tracks.ui.ScreenManager"]=l.ScreenManager;l.ScreenManager.__name__="com,nick,spongebob,fiery_tracks,ui,ScreenManager".split(",");l.ScreenManager.__super__=n.WMEventDispatcher;l.ScreenManager.prototype=
t(n.WMEventDispatcher.prototype,{_transitionPlay:function(){this._transition.show();this._transition.start()},_removeTransition:function(){this._flagHasTransition&&(this._layerTransition.removeChild(this._transition._getEntity()),this._transition._getDispatcher().removeEventListener(n.WMEventScreenOut.EVENT_SCREEN_OUTPUT,w(this,this._onEventTransitionOutput)),this._transition.dispose(),this._transition=null,this._flagHasTransition=!1)},_addTransition:function(a,b){null==b&&(b=!0);if(this._flagHasTransition){if(!b)return;
this._removeTransition()}this._transition=new l.transitions.TransitionBase(a);this._transition.hide();this._transition._getDispatcher().addEventListener(n.WMEventScreenOut.EVENT_SCREEN_OUTPUT,w(this,this._onEventTransitionOutput));this._layerTransition.addChild(this._transition._getEntity());this._flagHasTransition=!0},_updateTransition:function(a){switch(this._transitionType){case i.ConstantsScreen.TRANSITION_SCROLL:this._transitionScreenHeadedOut._getPos().x-=3E3*a;this._transitionScreenHeadedIn._getPos().x-=
3E3*a;0>=this._transitionScreenHeadedIn._getPos().x&&(this._transitionScreenHeadedIn._getPos().x=0,this._flagHasTransition=!1,this._onTransitionCloseScreen(),this._onQueueConditionMet(i.ConstantsScreen.CONDITION_TRANSITION_COMPLETE));break;case i.ConstantsScreen.TRANSITION_SCROLL_UP:this._transitionScreenHeadedOut._getPos().y-=2E3*a;this._transitionScreenHeadedIn._getPos().y-=2E3*a;0>=this._transitionScreenHeadedIn._getPos().y&&(this._transitionScreenHeadedIn._getPos().y=0,this._flagHasTransition=
!1,this._onTransitionCloseScreen(),this._onQueueConditionMet(i.ConstantsScreen.CONDITION_TRANSITION_COMPLETE));break;case i.ConstantsScreen.TRANSITION_SCROLL_DOWN:this._transitionScreenHeadedOut._getPos().y+=2E3*a;this._transitionScreenHeadedIn._getPos().y+=2E3*a;0<=this._transitionScreenHeadedIn._getPos().y&&(this._transitionScreenHeadedIn._getPos().y=0,this._flagHasTransition=!1,this._onTransitionCloseScreen(),this._onQueueConditionMet(i.ConstantsScreen.CONDITION_TRANSITION_COMPLETE));break;case i.ConstantsScreen.TRANSITION_FADE:this._transition.update(a),
this._transition.flagDispose&&this._removeTransition()}},_removeScreenDisplay:function(a){this._layerScreen.removeChild(a)},_addScreenDisplay:function(a){this._layerScreen.addChild(a)},_dispatchEventChange:function(a,b){this.dispatchEvent(new n.WMEventInterfaceChange(a,b))},_onQueueConditionMet:function(a,b){null==b&&(b="");for(var c=0;c<this._screensQueue.length;)this._screensQueue[c].validateCondition(a,b)&&(this._generateScreen(this._screensQueue[c].screenData),this._screensQueue.splice(c,1)),
c++},dispose:function(){for(var a=0;a<this._screensOpen.length;)this._disposeScreen(this._screensOpen[a].id),a++;this._screens=this._screensQueue=null;this._removeTransition();this._container.removeChild(this._layerScreen);this._container.removeChild(this._layerTransition);this._layerTransition=this._layerScreen=null;n.WMEventDispatcher.prototype.dispose.call(this)},_getScreenData:function(a){for(var b=this._screens.length-1;0<=b;){if(this._screens[b].id==a)return this._screens[b];b--}f.WorkinCloud.instance.log("[ScreenManager](_getScreenData) ERROR: Screen >"+
a+"< idoes not exist. getScreenData() returning NULL.");return null},_hasScreenData:function(a){for(var b=this._screens.length-1;0<=b;){if(this._screens[b].id==a)return!0;b--}return!1},_removeScreenshot:function(){this._flagHasScreenshot&&(this._layerScreen.removeChild(this._screenshot._getEntity()),this._screenshot.dispose(),this._screenshot=null,this._flagHasScreenshot=!1)},_addScreenshot:function(){f.WorkinCloud.instance.log("[ScreenManager](_addScreenshot) ERROR: Screenshots not supported in HTML5 yet.")},
_onTransitionCloseScreen:function(){this._flagCloseScreenAfterTransition&&(this.closeScreen(this._screenIdToCloseAfterTransition,!1),this._flagCloseScreenAfterTransition=!1);this._flagOpenScreenAfterTransition&&(this.openScreen(this._screenIdToOpenDuringTransition,!1),this._flagOpenScreenAfterTransition=!1)},_onEventTransitionOutput:function(a){a.flowId==i.ConstantsScreen.OUTPUT_OPENED?(f.WorkinCloud.instance.log("[ScreenManager] Transition Midway..."),this._onTransitionCloseScreen(),this._removeScreenshot(),
this._onQueueConditionMet(i.ConstantsScreen.CONDITION_TRANSITION_MIDWAY)):a.flowId==i.ConstantsScreen.OUTPUT_CLOSED&&(f.WorkinCloud.instance.log("[ScreenManager] Transition Complete."),this._removeScreenshot(),this._onQueueConditionMet(i.ConstantsScreen.CONDITION_TRANSITION_COMPLETE))},_onEventScreenOutput:function(a){a.flowId==i.ConstantsScreen.OUTPUT_OPENED?this._dispatchEventChange(i.ConstantsScreen.CHANGE_OPEN_COMPLETE,a.screenId):a.flowId==i.ConstantsScreen.OUTPUT_CLOSED&&(this._dispatchEventChange(i.ConstantsScreen.CHANGE_CLOSE_COMPLETE,
a.screenId),this._onQueueConditionMet(i.ConstantsScreen.CONDITION_CLOSED_SPECIFIC,a.screenId),this._flagHasTransition&&this._transitionType==i.ConstantsScreen.TRANSITION_STAGED&&this._transitionPlay())},_disposeScreen:function(a){for(var b=0;b<this._screensOpen.length;){if(this._screensOpen[b].id==a){this._screensOpen[b]._getDispatcher().removeEventListener(n.WMEventScreenOut.EVENT_SCREEN_OUTPUT,w(this,this._onEventScreenOutput));this._removeScreenDisplay(this._screensOpen[b]._getEntity());this._screensOpen[b].dispose();
this._screensOpen.splice(b,1);break}b++}},_generateScreen:function(a){if(this.isScreenOpen(a.id))this.getScreen(a.id).reset(),this._dispatchEventChange(i.ConstantsScreen.CHANGE_OPEN_BEGIN,a.id);else{var b=N.createInstance(a.screenClass,[a.id,a.assetClassName,a.data]);if(null==b)f.WorkinCloud.instance.log("[ScreenManager](_generateScreen) ERROR: Screen Class for >"+a.id+"< not found.");else{if(this._flagHasTransition)switch(this._transitionScreenHeadedIn=b,this._transitionType){case i.ConstantsScreen.TRANSITION_SCROLL:b._getPos().x=
i.ConstantsApp.STAGE_WIDTH;break;case i.ConstantsScreen.TRANSITION_SCROLL_UP:b._getPos().y=i.ConstantsApp.STAGE_HEIGHT;break;case i.ConstantsScreen.TRANSITION_SCROLL_DOWN:b._getPos().y=-i.ConstantsApp.STAGE_HEIGHT}this._screensOpen.push(b);b.renderPosition(this._camera);this._addScreenDisplay(b._getEntity());b._getDispatcher().addEventListener(n.WMEventScreenOut.EVENT_SCREEN_OUTPUT,w(this,this._onEventScreenOutput));b.open(!0);this._dispatchEventChange(i.ConstantsScreen.CHANGE_OPEN_BEGIN,a.id)}}},
_addScreenToQueue:function(a,b,c){null==c&&(c="");this.hasQueuedScreen(a.id)||this._screensQueue.push(new l.screens.data.ScreenQueueData(a,b,c))},removeAllQueuedScreens:function(){for(var a=this._screensQueue.length-1;0<=a;)this._screensQueue.splice(a,1),a--},removeQueuedScreen:function(a){for(var b=this._screensQueue.length-1;0<=b;){if(this._screensQueue[b].screenData.id==a){this._screensQueue.splice(b,1);break}b--}},hasQueuedScreen:function(a){for(var b=this._screensQueue.length-1;0<=b;){if(this._screensQueue[b].screenData.id==
a)return!0;b--}return!1},isScreenOpen:function(a){for(var b=this._screensOpen.length-1;0<=b;){if(this._screensOpen[b].id==a)return!0;b--}return!1},getScreen:function(a){null==a&&(a="");if(0==this._screensOpen.length)return f.WorkinCloud.instance.log("[ScreenManager](getScreen) ERROR: no screens are open. Unable to getScreen()"),null;if(""==a)return this._screensOpen[this._screensOpen.length-1];for(var b=this._screensOpen.length-1;0<=b;){if(this._screensOpen[b].id==a)return this._screensOpen[b];b--}f.WorkinCloud.instance.log("[ScreenManager](getScreen) ERROR: Screen >"+
a+"< is not open or does not exist. getScreen() returning NULL.");return null},update:function(a){if(!this._isPaused){0.15<a&&(a=0.15);this._flagHasTransition&&this._updateTransition(a);for(this._loop=this._screensOpen.length-1;0<=this._loop;)this._screensOpen[this._loop].update(a),this._screensOpen[this._loop].renderPosition(this._camera),this._screensOpen[this._loop].flagDispose&&(this._disposeScreen(this._screensOpen[this._loop].id),0==this._screensOpen.length&&this._onQueueConditionMet(i.ConstantsScreen.CONDITION_CLOSED_ALL)),
this._loop--}},_getHasTransition:function(){return this._flagHasTransition},changeScreenTo:function(a,b,c,g){null==g&&(g="");null==c&&(c=-1);null==b&&(b=!1);f.WorkinCloud.instance.log("[ScreenManager](changeTo) "+a);this.removeAllQueuedScreens();if(this.isScreenOpen(a)){f.WorkinCloud.instance.log("[ScreenManager](changeTo) Screen is already open.");for(b=this._screensOpen.length-1;0<=b;)this._screensOpen[b].id!=a&&this.closeScreen(this._screensOpen[b].id,!1,b),b--;this._dispatchEventChange(i.ConstantsScreen.CHANGE_OPEN_BEGIN,
a);this._dispatchEventChange(i.ConstantsScreen.CHANGE_OPEN_COMPLETE,a)}else if(this._flagOpenScreenAfterTransition=this._flagCloseScreenAfterTransition=!1,0<this._screensOpen.length){f.WorkinCloud.instance.log("[ScreenManager](changeFrom) "+this._screensOpen[0].id);this._screensOpen[0].suspend();var d=i.ConstantsScreen.CONDITION_CLOSED_ALL;if(-1<c)switch(this._transitionType=c,this._transitionType){case i.ConstantsScreen.TRANSITION_SCREENSHOT:this._flagOpenScreenAfterTransition=!0;b=!1;this._addScreenshot();
this._transitionPlay();break;case i.ConstantsScreen.TRANSITION_SCROLL:this._flagHasTransition=!0;this._flagOpenScreenAfterTransition=!1;this._flagCloseScreenAfterTransition=!0;b=!1;this._transitionScreenHeadedOut=this._screensOpen[0];d=i.ConstantsScreen.CONDITION_IMMEDIATE;break;case i.ConstantsScreen.TRANSITION_SCROLL_UP:this._flagHasTransition=!0;this._flagOpenScreenAfterTransition=!1;this._flagCloseScreenAfterTransition=!0;b=!1;this._transitionScreenHeadedOut=this._screensOpen[0];d=i.ConstantsScreen.CONDITION_IMMEDIATE;
break;case i.ConstantsScreen.TRANSITION_SCROLL_DOWN:this._flagHasTransition=!0;this._flagOpenScreenAfterTransition=!1;this._flagCloseScreenAfterTransition=!0;b=!1;this._transitionScreenHeadedOut=this._screensOpen[0];d=i.ConstantsScreen.CONDITION_IMMEDIATE;break;case i.ConstantsScreen.TRANSITION_SCROLL:this._flagHasTransition=!0;this._flagOpenScreenAfterTransition=!1;this._flagCloseScreenAfterTransition=!0;b=!1;this._transitionScreenHeadedOut=this._screensOpen[0];d=i.ConstantsScreen.CONDITION_IMMEDIATE;
break;case i.ConstantsScreen.TRANSITION_FADE:this._addTransition(g,this._flagHasTransition?this._transition._getIsOutro()?!0:!1:!1),this._flagCloseScreenAfterTransition=!0,b=!1,this._transitionPlay(),d=i.ConstantsScreen.CONDITION_TRANSITION_MIDWAY}if(0<this._screensOpen.length&&(this._flagCloseScreenAfterTransition?this._screenIdToCloseAfterTransition=this._screensOpen[0].id:this.closeScreen(this._screensOpen[0].id,b,0),1<this._screensOpen.length))for(b=1;b<this._screensOpen.length;)this.closeScreen(this._screensOpen[b].id,
!1,this._screensOpen.length),b++;this._flagOpenScreenAfterTransition?(f.WorkinCloud.instance.log("[ScreenManager] Store Screen to open at transition midway: "+a),this._screenIdToOpenDuringTransition=a):this.openScreen(a,!0,d)}else this.openScreen(a,!1)},_moveScreenToTop:function(a){var b=this.getScreen(a);if(null==b)f.WorkinCloud.instance.log("[ScreenManager](_moveScreenToTop) ERROR: Screen >"+a+"< is not open or does not exist. Cancelling move.");else{b.isClosing()&&b.open(!1);for(var c=this._screensOpen.length-
1;0<=c&&!(this._screensOpen[c].id==a);)c--;this._screensOpen.splice(c,1);b.reset();this._removeScreenDisplay(b._getEntity());this._addScreenDisplay(b._getEntity());this._screensOpen.push(b)}},openScreen:function(a,b,c,g){null==g&&(g="");null==c&&(c=0);null==b&&(b=!0);f.WorkinCloud.instance.log("[ScreenManager](openScreen) "+a);if(this._hasScreenData(a))if(this.isScreenOpen(a))this._moveScreenToTop(a);else{if(c!=i.ConstantsScreen.CONDITION_IMMEDIATE&&b){if(0<this._screensOpen.length){this._addScreenToQueue(this._getScreenData(a),
c,g);return}if((c==i.ConstantsScreen.CONDITION_TRANSITION_COMPLETE||c==i.ConstantsScreen.CONDITION_TRANSITION_MIDWAY)&&this._flagHasTransition){this._addScreenToQueue(this._getScreenData(a),c,g);return}}this._generateScreen(this._getScreenData(a))}else f.WorkinCloud.instance.log("[ScreenManager](closeScreen) ERROR: Screen >"+a+"< does not exist. Cancelling open().")},closeScreen:function(a,b,c){null==c&&(c=-1);null==b&&(b=!0);null==a&&(a="");if(0==this._screensOpen.length)this.removeQueuedScreen(a);
else{if(""==a)c=this._screensOpen[this._screensOpen.length-1];else if(0<=c&&c<this._screensOpen.length)c=this._screensOpen[c];else if(c=this.getScreen(a),null==c){this.removeQueuedScreen(a);return}c.close(b);this._dispatchEventChange(i.ConstantsScreen.CHANGE_CLOSE_BEGIN,a)}},handleInput:function(a){for(var b=!0,c=this._screensOpen.length-1;0<=c&&b;)this._screensOpen[c].handleInput(a,c==this._screensOpen.length-1)||(b=!1),c--;return b},addScreen:function(a,b,c,g,d){null==g&&(g=0);null==c&&(c="");this._screens.push(new l.screens.data.ScreenData(a,
b,c,g,d))},__class__:l.ScreenManager,__properties__:{get_isTransition:"_getHasTransition"}});k={IPoolable:function(){}};j["com.workinman.display.IPoolable"]=k.IPoolable;k.IPoolable.__name__=["com","workinman","display","IPoolable"];k.IPoolable.prototype={__class__:k.IPoolable,__properties__:{set_isPooled:"_setIsPooled",get_isPooled:"_getIsPooled",set_isActive:"_setIsActive",get_isActive:"_getIsActive"}};k.Poolable=function(){this._flagPooled=!0;this._flagActive=!1};j["com.workinman.display.Poolable"]=
k.Poolable;k.Poolable.__name__=["com","workinman","display","Poolable"];k.Poolable.__interfaces__=[k.IPoolable];k.Poolable.prototype={_setIsActive:function(a){return this._flagActive=a},_getIsActive:function(){return this._flagActive},_setIsPooled:function(a){return this._flagPooled=a},_getIsPooled:function(){return this._flagPooled},dispose:function(){this.release()},release:function(){this._flagActive=!1},renew:function(){this._flagActive=!0},__class__:k.Poolable,__properties__:{set_isPooled:"_setIsPooled",
get_isPooled:"_getIsPooled",set_isActive:"_setIsActive",get_isActive:"_getIsActive"}};k.Element=function(a){k.Poolable.call(this,a);this._entity=new O;this._display=new o.Sprite;this._entity.add(this._display);this._elements=[];this._textureEntity=new O;this._entity.addChild(this._textureEntity);this._texture=new o.Sprite;this._textureEntity.add(this._texture);this._dispatcher=new n.WMEventDispatcher;this._pos=new h.WorkinPoint;this._velocity=new h.WorkinPoint;this._renderOffset=new h.WorkinPoint;
this._renderOrigin=new h.WorkinPoint;this._render=new k.Renderable;this._tweener=new h.tween.WorkinTween;this._uniqueId=C.ConstantsCloud.getUniqueId();this._layer=this._assetId="";this._useCamera=!0;this._doDelete=!1;!0==a.pooled?this._setIsPooled(!0):(this._setIsPooled(!1),this.renew(a));this._addEventListeners()};j["com.workinman.display.Element"]=k.Element;k.Element.__name__=["com","workinman","display","Element"];k.Element.__super__=k.Poolable;k.Element.prototype=t(k.Poolable.prototype,{_removeEventListeners:function(){},
_addEventListeners:function(){},setOrigin:function(a){this._renderOrigin.toPoint(a);this._render.width=this._texture.getNaturalWidth();this._render.height=this._texture.getNaturalHeight();this._texture.x.set__(-(this._renderOrigin.x*this._render.width));this._texture.y.set__(-(this._renderOrigin.y*this._render.height))},applyRenderable:function(){this._display.x.set__(this._render.x);this._display.y.set__(this._render.y);this._display.scaleX.set__(this._render.scaleX);this._display.scaleY.set__(this._render.scaleY);
this._display.rotation.set__(this._render.rotation);this._display.alpha.set__(this._render.alpha);this._display.set_visible(this._render.visible)},renderPositionWithoutCamera:function(){this._render.x=this._pos.x+this._renderOffset.x;this._render.y=this._pos.y+this._renderOffset.y;this.applyRenderable()},renderPosition:function(a){null==a||!1==this._useCamera?(this._render.x=this._pos.x+this._renderOffset.x,this._render.y=this._pos.y+this._renderOffset.y):(this._render.x=this._pos.x-a._getPos().x+
a._getScreenCenterX()+this._renderOffset.x,this._render.y=this._pos.y-a._getPos().y+a._getScreenCenterY()+this._renderOffset.y);for(var b=0,c=this._elements;b<c.length;){var g=c[b];++b;g.renderPosition(a)}this.applyRenderable()},_addElement:function(a){this._elements.push(a);this._entity.addChild(a._getEntity());return a},updatePositionFromVelocity:function(a){this._pos.x+=this._velocity.x*a;this._pos.y+=this._velocity.y*a},update:function(a){for(var b=0,c=this._elements;b<c.length;){var g=c[b];++b;
g.update(a)}},swapTexture:function(a){this._textureEntity.remove(this._texture);this._texture.dispose();this._texture=a;this._render.width=this._texture.getNaturalWidth();this._render.height=this._texture.getNaturalHeight();this._texture.x.set__(-(this._renderOrigin.x*this._render.width));this._texture.y.set__(-(this._renderOrigin.y*this._render.height));this._textureEntity.add(this._texture)},setTexture:function(a){""!=a&&(!1==f.WorkinCloud.instance._getAssets().hasAsset(a)?f.WorkinCloud.instance.log("[Element](setTexture) No asset named "+
a+" exists!"):this.swapTexture(new o.ImageSprite(f.WorkinCloud.instance._getAssets().getTexture(a))))},_getUniqueId:function(){return this._uniqueId},_setLayer:function(a){return this._layer=a},_getLayer:function(){return this._layer},_getDepth:function(){return this._pos.z},_getDispatcher:function(){return this._dispatcher},_getEntity:function(){return this._entity},_getRenderable:function(){return this._render},_setDoDelete:function(a){return this._doDelete=a},_getDoDelete:function(){return this._doDelete},
_setPos:function(a){this._pos.toPoint(a);return this._pos},_getPos:function(){return this._pos},dispose:function(){if(this._getIsPooled())this.release();else{for(var a=0,b=this._elements;a<b.length;){var c=b[a];++a;c.dispose()}this._elements=null;this._removeEventListeners();this._dispatcher.dispose();this._dispatcher=null;this._entity.dispose();this._velocity=this._pos=this._entity=null;this._texture.dispose();this._display=this._texture=null;this._textureEntity.dispose();this._renderOrigin=this._renderOffset=
this._render=this._textureEntity=null;this._tweener.dispose();this._tweener=null}},release:function(){this._getIsPooled()&&k.Poolable.prototype.release.call(this)},renew:function(a){a.asset&&(this._assetId=a.asset,this.setTexture(this._assetId));this._doDelete=!1;a.layer&&(this._layer=a.layer);null!=a.x&&(this._pos.x=a.x);null!=a.y&&(this._pos.y=a.y);null!=a.z&&(this._pos.z=a.z);null!=a.rot&&(this._render.rotation=a.rot);null!=a.scale&&(this._render.scaleX=this._render.scaleY=a.scale);null!=a.useCamera&&
(this._useCamera=a.useCamera);a.origin?this.setOrigin(a.origin):this.setOrigin(new h.WorkinPoint(0,0));k.Poolable.prototype.renew.call(this,a)},__class__:k.Element,__properties__:t(k.Poolable.prototype.__properties__,{set_pos:"_setPos",get_pos:"_getPos",set_doDelete:"_setDoDelete",get_doDelete:"_getDoDelete",get_renderable:"_getRenderable",get_entity:"_getEntity",get_dispatcher:"_getDispatcher",set_layer:"_setLayer",get_layer:"_getLayer"})});l.buttons={};l.buttons.ButtonBase=function(a,b,c,g,d,e,
i){null==i&&(i="");null==e&&(e="");null==d&&(d="");null==g&&(g="");this._DEBUG_SHOW_HITBOX=!1;null==c&&(c=new h.WorkinPoint(0.5,0.5));k.Element.call(this,{x:a,y:b,asset:this._assetUp,origin:c});this._assetUp=""==g?this._getDefaultAssetUp():g;this._assetOver=""==d?this._getDefaultAssetOver():d;this._assetDown=""==e?this._getDefaultAssetDown():e;this._assetDisabled=""==i?this._getDefaultAssetDisabled():i;this._flagDragged=this._flagClickTransition=this._flagDown=!1;this.enable();this._buildHitBox();
f.WorkinCloud.instance._getDispatcher().addEventListener(n.WMEventInput.EVENT_INPUT,w(this,this._onEventInput));this._buttonScaleBase=new h.WorkinPoint(1,1)};j["com.nick.spongebob.fiery_tracks.ui.buttons.ButtonBase"]=l.buttons.ButtonBase;l.buttons.ButtonBase.__name__="com,nick,spongebob,fiery_tracks,ui,buttons,ButtonBase".split(",");l.buttons.ButtonBase.__super__=k.Element;l.buttons.ButtonBase.prototype=t(k.Element.prototype,{_renderDisabled:function(){""!=this._assetDisabled&&this.setTexture(this._assetDisabled)},
_renderReturnUp:function(){this._flagClickTransition||(h.tween.WorkinTweener._getInstance().tween(this._render,0.15,{scaleX:this._buttonScaleBase.x,scaleY:this._buttonScaleBase.y}).ease(h.tween.PennerManager.EASE_QUAD_OUT),this._renderUp())},_renderDown:function(){this._flagClickTransition||(h.tween.WorkinTweener._getInstance().tween(this._render,0.15,{scaleX:1.04*this._buttonScaleBase.x,scaleY:1.04*this._buttonScaleBase.y}).ease(h.tween.PennerManager.EASE_QUAD_OUT),""!=this._assetDown&&this.setTexture(this._assetDown))},
_renderUp:function(){""!=this._assetUp&&this.setTexture(this._assetUp)},_playSoundClick:function(){},update:function(a){k.Element.prototype.update.call(this,a)},_onCancelDrag:function(){this._flagDragged=!1;this._dispatch(l.buttons.ButtonBase.CANCEL_DRAG)},_onUp:function(){!f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_ORIENTATION_ALERT)&&this._flagDown&&(this._flagDown=!1,this._renderReturnUp(),this._click(),this._flagDragged&&this._onCancelDrag(),this._dispatch(l.buttons.ButtonBase.UP))},_onDown:function(){f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_ORIENTATION_ALERT)||
(this._flagDown=!0,this._renderDown(),this._dispatch(l.buttons.ButtonBase.DOWN))},_onClickTransitionComplete:function(){this._flagClickTransition=!1;f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_INPUT_LOCK,!1);this._dispatch(l.buttons.ButtonBase.CLICK);""!=this._getClickFlow()&&f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEventFlow(this._getClickFlow()));""!=this._getClickEvent()&&f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEvent(this._getClickEvent()));h.tween.WorkinTweener._getInstance().stop(this._render);
this._render.scaleX=this._buttonScaleBase.x;this._render.scaleY=this._buttonScaleBase.y},_click:function(){!f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_INPUT_LOCK)&&!f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_ORIENTATION_ALERT)&&(this._flagClickTransition=!0,this._playSoundClick(),h.tween.WorkinTweener._getInstance().tween(this._render,0.25,{scaleX:0.96*this._buttonScaleBase.x,scaleY:0.96*this._buttonScaleBase.y}).ease(h.tween.PennerManager.EASE_QUAD_OUT),h.tween.WorkinTweener._getInstance().tween(this._render,
0.25,{scaleX:0.99*this._buttonScaleBase.x,scaleY:0.99*this._buttonScaleBase.y},!1).ease(h.tween.PennerManager.EASE_ELASTIC_OUT).delay(0.25).onComplete(w(this,this._onClickTransitionComplete)),f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_INPUT_LOCK,!0))},_dispatch:function(a){this._GET_DO_DISPATCH()&&this._dispatcher.dispatchEvent(new n.WMEvent(a))},_getClickFlow:function(){return""},_getClickEvent:function(){return""},_GET_DISABLE_FRAME:function(){return 1},_GET_CUSTOM_HIT_BOX:function(){return new J.Point(0,
0)},_GET_DO_DISPATCH:function(){return!0},_getDefaultAssetDisabled:function(){return""},_getDefaultAssetDown:function(){return""},_getDefaultAssetOver:function(){return""},_getDefaultAssetUp:function(){return""},depthTest:function(a,b){var c=f.WorkinCloud.instance._getInput().doDepthTestOnWorldCoordinates(a,b),g=!1;c==this._texture&&(g=!0);!1==g&&null!=this._hitBox&&c==this._hitBox&&(g=!0);return g},_onEventInput:function(a){switch(a.input){case i.ConstantsApp.INPUT_CLICK:var b=!1;this._hitRect.toXY(this._pos.x-
this._render.width*this._renderOrigin.x,this._pos.y-this._render.height*this._renderOrigin.y);this._hitRect.contains(a.x,a.y)&&(b=!0);switch(a.phase){case n.WMEventInput.PHASE_DOWN:this.depthTest(a.x,a.y)&&!1==this._flagDown&&b&&this._onDown(a.x,a.y);break;case n.WMEventInput.PHASE_UP:this._flagDown&&(b?this._onUp(a.x,a.x):this._renderReturnUp(),this._flagDown=!1)}}},dispose:function(){this.disable();f.WorkinCloud.instance._getDispatcher().removeEventListener(n.WMEventInput.EVENT_INPUT,w(this,this._onEventInput));
null!=this._hitBox&&(this._hitBox.dispose(),this._hitBox=null);this._hitRect.dispose();this._buttonScaleBase=this._hitRect=null;k.Element.prototype.dispose.call(this)},_buildHitBox:function(){this._hitRect=new h.WMRectangle(0,0,this._render.width,this._render.height);if(this._DEBUG_SHOW_HITBOX){this._hitBox=new o.FillSprite(16711680,this._render.width|0,this._render.height|0);var a=new O;a.add(this._hitBox);this._textureEntity.addChild(a)}},disable:function(){this._flagEnabled=!1;this._renderDisabled()},
enable:function(){this._flagEnabled=!0;this._renderUp()},addText:function(a){this._textureEntity.addChild(a._getEntity());a._getTextDisplay()[0].set_pointerEnabled(!1)},__class__:l.buttons.ButtonBase,__properties__:t(k.Element.prototype.__properties__,{get__DO_DISPATCH:"_GET_DO_DISPATCH",get__clickEvent:"_getClickEvent",get__clickFlow:"_getClickFlow"})});l.buttons.ButtonSoundToggle=function(a,b,c,g,d){this._onAssets=g;this._offAssets=d;this._refreshMuteState();l.buttons.ButtonBase.call(this,a,b,c,
this._currentAssets[0],this._currentAssets[1],this._currentAssets[3==this._currentAssets.length?2:1])};j["com.nick.spongebob.fiery_tracks.ui.buttons.ButtonSoundToggle"]=l.buttons.ButtonSoundToggle;l.buttons.ButtonSoundToggle.__name__="com,nick,spongebob,fiery_tracks,ui,buttons,ButtonSoundToggle".split(",");l.buttons.ButtonSoundToggle.__super__=l.buttons.ButtonBase;l.buttons.ButtonSoundToggle.prototype=t(l.buttons.ButtonBase.prototype,{_getClickEvent:function(){return""},_refreshMuteState:function(){this._currentAssets=
f.WorkinCloud.instance._getSound().getMute()?this._offAssets:this._onAssets;this._assetUp=this._currentAssets[0];this._assetOver=this._currentAssets[1];this._assetDown=this._currentAssets[3==this._currentAssets.length?2:1]},_click:function(){this._flagEnabled&&!f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_ORIENTATION_ALERT)&&(f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEvent(i.ConstantsApp.EVENT_MUTE_TOGGLE)),this._refreshMuteState(),this._renderReturnUp())},__class__:l.buttons.ButtonSoundToggle});
k.Display=function(a,b,c,g){null==c&&(c="");this._flagLocked=!1;k.Element.call(this,{x:a,y:b,asset:c,origin:g});this._addEventListeners()};j["com.workinman.display.Display"]=k.Display;k.Display.__name__=["com","workinman","display","Display"];k.Display.__super__=k.Element;k.Display.prototype=t(k.Element.prototype,{lock:function(){this._flagLocked=!0},dispose:function(){k.Element.prototype.dispose.call(this);this._removeEventListeners()},_updateValue:function(){return""},_refresh:function(){},_onUpdateDisplay:function(a){this._flagLocked||
a._getData().valueID==this._updateValue()&&this._refresh()},_removeEventListeners:function(){k.Element.prototype._removeEventListeners.call(this);f.WorkinCloud.instance._getDispatcher().removeEventListener(k.Display.EVENT_UPDATE_DISPLAY,w(this,this._onUpdateDisplay))},_addEventListeners:function(){k.Element.prototype._addEventListeners.call(this);f.WorkinCloud.instance._getDispatcher().addEventListener(k.Display.EVENT_UPDATE_DISPLAY,w(this,this._onUpdateDisplay))},__class__:k.Display});l.display=
{};l.display.DisplayLives=function(a,b){k.Display.call(this,a,b);this._symbols=[];for(var c=f.WorkinCloud.instance.getInt(this._updateValue()),g=0;g<c;){var d=g++;this._symbols.push(this._addElement(new k.Element({x:55*d,y:0,asset:"cart",origin:new h.WorkinPoint(0,0.5)})));this._symbols[d]._getRenderable().scaleX=this._symbols[d]._getRenderable().scaleY=0.5}this._refresh()};j["com.nick.spongebob.fiery_tracks.ui.display.DisplayLives"]=l.display.DisplayLives;l.display.DisplayLives.__name__="com,nick,spongebob,fiery_tracks,ui,display,DisplayLives".split(",");
l.display.DisplayLives.__super__=k.Display;l.display.DisplayLives.prototype=t(k.Display.prototype,{dispose:function(){k.Display.prototype.dispose.call(this);this._symbols=null},_updateValue:function(){return i.ConstantsApp.INT_LIVES},_refresh:function(){for(var a=f.WorkinCloud.instance.getInt(this._updateValue());this._symbols.length>a&&0<=a;){var b=this._symbols.pop();A.remove(this._elements,b);b.dispose()}},__class__:l.display.DisplayLives});l.display.DisplayLoadingProgress=function(a,b){k.Display.call(this,
a,b,"",new h.WorkinPoint(0,0.5));this._bar=this._addElement(new k.Element({asset:"loading_bar"}));this._addElement(new k.Element({asset:"loading_bar_outline",x:-2,y:-2}));this._bar._getRenderable().scaleX=0};j["com.nick.spongebob.fiery_tracks.ui.display.DisplayLoadingProgress"]=l.display.DisplayLoadingProgress;l.display.DisplayLoadingProgress.__name__="com,nick,spongebob,fiery_tracks,ui,display,DisplayLoadingProgress".split(",");l.display.DisplayLoadingProgress.__super__=k.Display;l.display.DisplayLoadingProgress.prototype=
t(k.Display.prototype,{dispose:function(){k.Display.prototype.dispose.call(this)},_updateValue:function(){return i.ConstantsApp.INT_LOADING_PROGRESS},_refresh:function(){var a=f.WorkinCloud.instance.getInt(this._updateValue());this._bar._getRenderable().scaleX=a/100},__class__:l.display.DisplayLoadingProgress});l.display.DisplayScore=function(a,b,c){null==c&&(c=!1);k.Display.call(this,a,b);a=f.WorkinCloud.instance.getInt(this._updateValue());this._textNum=c?this._addElement(new k.TextBase(0,0,r.string(a),
f.WorkinCloud.instance._getLocalize().getData("score")._getFontName(),{origin:new h.WorkinPoint(0.5,0.5),scale:0.8})):this._addElement(new k.TextBase(0,0,r.string(a),f.WorkinCloud.instance._getLocalize().getData("score")._getFontName(),{origin:new h.WorkinPoint(0,0.5)}));this._refresh()};j["com.nick.spongebob.fiery_tracks.ui.display.DisplayScore"]=l.display.DisplayScore;l.display.DisplayScore.__name__="com,nick,spongebob,fiery_tracks,ui,display,DisplayScore".split(",");l.display.DisplayScore.__super__=
k.Display;l.display.DisplayScore.prototype=t(k.Display.prototype,{dispose:function(){k.Display.prototype.dispose.call(this);this._textNum=null},_updateValue:function(){return i.ConstantsApp.INT_SCORE},_refresh:function(){var a=f.WorkinCloud.instance.getInt(this._updateValue());this._textNum._setText(r.string(a))},__class__:l.display.DisplayScore});l.screens={};l.screens.ScreenBase=function(a,b){this._STATE_SUSPENDED="suspend";this._STATE_OPENED="opened";this._STATE_OUT="out";this._STATE_IN="in";this.id=
a;k.Element.call(this,{asset:b});this._clickWall=new O;var c=new o.FillSprite(16711680,i.ConstantsApp.STAGE_WIDTH,i.ConstantsApp.STAGE_HEIGHT);c.alpha.set__(0);this._clickWall.add(c);this._entity.addChild(this._clickWall);this._entity.addChild(this._textureEntity);this._buildButtons();this._flagStateAnimationComplete=this._flagStateCompleteTemp=this.flagDispose=!1;this._states=[];this._generateStates();this._stateIndex=this._states.length+2;this._setFirstState()};j["com.nick.spongebob.fiery_tracks.ui.screens.ScreenBase"]=
l.screens.ScreenBase;l.screens.ScreenBase.__name__="com,nick,spongebob,fiery_tracks,ui,screens,ScreenBase".split(",");l.screens.ScreenBase.__super__=k.Element;l.screens.ScreenBase.prototype=t(k.Element.prototype,{_onStateComplete:function(){this._flagStateCompleteTemp=!1;""!=this._states[this._stateIndex].outFunc&&f.WorkinCloud.instance.log("[ScreenBase](_onStateComplete) Out Func not supported in HTML5 yet");switch(this._states[this._stateIndex].actionOnComplete){case l.screens.data.ScreenStateData.ACTION_OPENED:this._setOpenedState();
this._dispatcher.dispatchEvent(new n.WMEventScreenOut(i.ConstantsScreen.OUTPUT_OPENED,this.id));break;case l.screens.data.ScreenStateData.ACTION_CLOSED:this.setFlagDispose();this._dispatcher.dispatchEvent(new n.WMEventScreenOut(i.ConstantsScreen.OUTPUT_CLOSED,this.id));break;case l.screens.data.ScreenStateData.ACTION_NEW_STATE:this._setState(this._states[this._stateIndex].actionData);break;case l.screens.data.ScreenStateData.ACTION_EVENT:this._dispatcher.dispatchEvent(new n.WMEvent(this._states[this._stateIndex].actionData));
break;case l.screens.data.ScreenStateData.ACTION_FLOW:this._doFlowEvent(this._states[this._stateIndex].actionData)}},_findStateIndex:function(a){for(var b=this._states.length-1;0<=b;){if(this._states[b].id==a)return b;b--}return-1},getState:function(){return this._states[this._stateIndex].id},_setState:function(a,b){null==b&&(b=!1);var c=this._findStateIndex(a);if(0>c)f.WorkinCloud.instance.log("[ScreenBase](_setState) ERROR : State >"+a+"< not found."),f.WorkinCloud.instance.log("[ScreenBase](_setState) cancelling setState().");
else if(b||c!=this._stateIndex)this._flagStateAnimationComplete=this._flagStateCompleteTemp=!1,this._stateIndex=c},_addState:function(a,b,c,g,d,f){null==f&&(f="");null==d&&(d="");null==g&&(g="");null==c&&(c=0);this._states.push(new l.screens.data.ScreenStateData(a,b,c,g,d,f))},isClosing:function(){return this.getState()==this._STATE_OUT},close:function(){this.setFlagDispose();this._dispatcher.dispatchEvent(new n.WMEventScreenOut(i.ConstantsScreen.OUTPUT_CLOSED,this.id))},suspend:function(){this._setState(this._STATE_SUSPENDED)},
open:function(){this._setOpenedState();this._dispatcher.dispatchEvent(new n.WMEventScreenOut(i.ConstantsScreen.OUTPUT_OPENED,this.id))},dispose:function(){this._states=null;k.Element.prototype.dispose.call(this)},reset:function(){this._setFirstState()},handleInput:function(a){var b=!0;switch(a.input){case i.ConstantsApp.INPUT_CLICK:switch(a.phase){case 1:this._onInputDown(a.x,a.y)||(b=!1);break;case 2:this._onInputMove(a.x,a.y)||(b=!1);break;case 0:this._onInputUp(a.x,a.y)||(b=!1)}break;default:this._onInput(a)||
(b=!1)}return b},update:function(a){k.Element.prototype.update.call(this,a);this._flagStateCompleteTemp&&this._onStateComplete()},_doFlowEvent:function(a){f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEventFlow(a))},_buildButtons:function(){},_onInput:function(){return this.getState()!=this._STATE_OPENED?!1:!0},_onInputMove:function(){return this.getState()!=this._STATE_OPENED?!1:!0},_onInputUp:function(){return this.getState()!=this._STATE_OPENED?!1:!0},_onInputDown:function(){return this.getState()!=
this._STATE_OPENED?!1:!0},_generateStates:function(){this._addState(this._STATE_IN,"in",l.screens.data.ScreenStateData.ACTION_OPENED);this._addState(this._STATE_OUT,"out",l.screens.data.ScreenStateData.ACTION_CLOSED);this._addState(this._STATE_OPENED,"open");this._addState(this._STATE_SUSPENDED,"suspend")},_setOpenedState:function(){this._setState(this._STATE_OPENED)},_setFirstState:function(){this._setState(this._STATE_IN)},setFlagDispose:function(){this.flagDispose=!0},__class__:l.screens.ScreenBase,
__properties__:t(k.Element.prototype.__properties__,{get_state:"getState"})});l.screens.ScreenEndGame=function(a,b,c){null==b&&(b="");this._BLINK_TIME=1;l.screens.ScreenBase.call(this,a,b,c);this._blinkTimer=this._BLINK_TIME;this._addElement(new k.Element({asset:"game_over_frame",x:i.ConstantsApp.STAGE_CENTER_X,y:i.ConstantsApp.STAGE_CENTER_Y,origin:new h.WorkinPoint(0.5,0.5)}));this._addElement(new k.TextLocalized(i.ConstantsApp.STAGE_CENTER_X,230,"game_over","",{origin:new h.WorkinPoint(0.5,0.5)}));
this._score=new l.display.DisplayScore(i.ConstantsApp.STAGE_CENTER_X-10,320,!0);this._score.lock();this._addElement(this._score);this._addElement(this._buttonPlayAgain=new l.buttons.ButtonBase(i.ConstantsApp.STAGE_CENTER_X,415,new h.WorkinPoint(0.5,0),"ui/end_screen/play_again_button","ui/end_screen/play_again_button","ui/end_screen/play_again_button"))._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,w(this,this._onPlayAgainClick));this._buttonPlayAgain.addText(new k.TextLocalized(89,
22,"play_again","",{origin:new h.WorkinPoint(0.5,0.5)}))};j["com.nick.spongebob.fiery_tracks.ui.screens.ScreenEndGame"]=l.screens.ScreenEndGame;l.screens.ScreenEndGame.__name__="com,nick,spongebob,fiery_tracks,ui,screens,ScreenEndGame".split(",");l.screens.ScreenEndGame.__super__=l.screens.ScreenBase;l.screens.ScreenEndGame.prototype=t(l.screens.ScreenBase.prototype,{dispose:function(){l.screens.ScreenBase.prototype.dispose.call(this);this._score=this._buttonPlayAgain=this._textClickToPlay=null},
_onPlayAgainClick:function(){this._doFlowEvent(i.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN)},update:function(a){l.screens.ScreenBase.prototype.update.call(this,a)},__class__:l.screens.ScreenEndGame});l.screens.ScreenGameplayHUD=function(a,b,c){null==b&&(b="");l.screens.ScreenBase.call(this,a,b,c);a=new o.FillSprite(26367,i.ConstantsApp.STAGE_WIDTH,50);a.alpha.set__(0.8);b=new k.Element({});b._getEntity().add(a);a.y.set__(500);this._addElement(b);this._addElement(new l.display.DisplayScore(20,520));
this._addElement(new l.display.DisplayLives(715,525));this._addElement(new l.buttons.ButtonBase(958,525,new h.WorkinPoint(1,0.5),"ui/gameplay_hud/pause_btn","ui/gameplay_hud/pause_btn","ui/gameplay_hud/pause_btn"))._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,w(this,this._onEventPauseClick))};j["com.nick.spongebob.fiery_tracks.ui.screens.ScreenGameplayHUD"]=l.screens.ScreenGameplayHUD;l.screens.ScreenGameplayHUD.__name__="com,nick,spongebob,fiery_tracks,ui,screens,ScreenGameplayHUD".split(",");
l.screens.ScreenGameplayHUD.__super__=l.screens.ScreenBase;l.screens.ScreenGameplayHUD.prototype=t(l.screens.ScreenBase.prototype,{_onEventPauseClick:function(){this.getState()==this._STATE_OPENED&&this._doFlowEvent(i.ConstantsScreen.FLOW_GAMEPLAY_MENU)},__class__:l.screens.ScreenGameplayHUD});l.screens.ScreenGameplayMenu=function(a,b,c){null==b&&(b="");l.screens.ScreenBase.call(this,a,b,c);this._addElement(new k.Element({asset:"ui/menu/menu_container",x:i.ConstantsApp.STAGE_WIDTH/2,y:i.ConstantsApp.STAGE_HEIGHT/
2,origin:new h.WorkinPoint(0.5,0.5)}));this._addElement(new k.TextLocalized(i.ConstantsApp.STAGE_CENTER_X,90,"paused","",{origin:new h.WorkinPoint(0.5,0)}));this._addElement(new l.buttons.ButtonBase(i.ConstantsApp.STAGE_WIDTH/2+85,180,new h.WorkinPoint(0.5,0),"ui/menu/menu_btn_help","ui/menu/menu_btn_help","ui/menu/menu_btn_help"))._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,w(this,this._onEventHelpClick));this._addElement(new l.buttons.ButtonBase(i.ConstantsApp.STAGE_WIDTH/2-85,
180,new h.WorkinPoint(0.5,0),"ui/menu/menu_btn_resume","ui/menu/menu_btn_resume","ui/menu/menu_btn_resume"))._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,w(this,this._onEventResumeClick));this._addElement(new l.buttons.ButtonSoundToggle(i.ConstantsApp.STAGE_WIDTH/2-72,320,new h.WorkinPoint(0.5,0),["ui/menu/menu_btn_sound_on","ui/menu/menu_btn_sound_on","ui/menu/menu_btn_sound_on"],["ui/menu/menu_btn_sound_off","ui/menu/menu_btn_sound_off","ui/menu/menu_btn_sound_off"]))._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,
w(this,this._onEventSoundToggleClick));this._addElement(new l.buttons.ButtonBase(i.ConstantsApp.STAGE_WIDTH/2+75,320,new h.WorkinPoint(0.5,0),"ui/menu/menu_btn_quit","ui/menu/menu_btn_quit","ui/menu/menu_btn_quit"))._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,w(this,this._onEventQuitClick))};j["com.nick.spongebob.fiery_tracks.ui.screens.ScreenGameplayMenu"]=l.screens.ScreenGameplayMenu;l.screens.ScreenGameplayMenu.__name__="com,nick,spongebob,fiery_tracks,ui,screens,ScreenGameplayMenu".split(",");
l.screens.ScreenGameplayMenu.__super__=l.screens.ScreenBase;l.screens.ScreenGameplayMenu.prototype=t(l.screens.ScreenBase.prototype,{_removeEventListeners:function(){l.screens.ScreenBase.prototype._removeEventListeners.call(this)},_addEventListeners:function(){l.screens.ScreenBase.prototype._addEventListeners.call(this)},_onEventQuitClick:function(){this.getState()==this._STATE_OPENED&&this._doFlowEvent(i.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT)},_onEventResumeClick:function(){this.getState()==this._STATE_OPENED&&
this._doFlowEvent(i.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE)},_onEventSoundToggleClick:function(){this.getState()},_onEventHelpClick:function(){this.getState()==this._STATE_OPENED&&this._doFlowEvent(i.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP)},__class__:l.screens.ScreenGameplayMenu});l.screens.ScreenGeneric=function(a,b,c){null==b&&(b="");l.screens.ScreenBase.call(this,a,b,c);this._flagHasSpaceAction=!1};j["com.nick.spongebob.fiery_tracks.ui.screens.ScreenGeneric"]=l.screens.ScreenGeneric;l.screens.ScreenGeneric.__name__=
"com,nick,spongebob,fiery_tracks,ui,screens,ScreenGeneric".split(",");l.screens.ScreenGeneric.__super__=l.screens.ScreenBase;l.screens.ScreenGeneric.prototype=t(l.screens.ScreenBase.prototype,{_onInputMove:function(){return!1},_onInputUp:function(){return!1},_onInputDown:function(){return!1},__class__:l.screens.ScreenGeneric});l.screens.ScreenHelp=function(a,b,c){null==b&&(b="");l.screens.ScreenBase.call(this,a,b,c);this._addElement(new k.Element({asset:"help_backing",x:480,y:280,origin:new h.WorkinPoint(0.5,
0.5)}));this._addElement(this._backButton=new l.buttons.ButtonBase(950,550,new h.WorkinPoint(1,1),"ui/help/help_btn_back","ui/help/help_btn_back","ui/help/help_btn_back"))._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,w(this,this._onEventPlayClick));this._backButton.addText(new k.TextLocalized(58,25,"back","",{origin:new h.WorkinPoint(0.5,0.5)}));this._addElement(new k.TextLocalized(i.ConstantsApp.STAGE_CENTER_X+12,i.ConstantsApp.STAGE_HEIGHT/2-175,"help","",{origin:new h.WorkinPoint(0.5,
0.5)}));this._addElement(new k.TextLocalized(i.ConstantsApp.STAGE_CENTER_X,160,"instructions_1","",{origin:new h.WorkinPoint(0.5,0),spacing:32}));this._addElement(new k.TextLocalized(i.ConstantsApp.STAGE_CENTER_X,i.ConstantsApp.STAGE_HEIGHT/2+130,"instructions_2","",{origin:new h.WorkinPoint(0.5,0),spacing:32}));b=f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_TOUCH_DEVICE)?"_touch":"";a=this._addElement(new k.Element({x:i.ConstantsApp.STAGE_CENTER_X-70,y:362,asset:"help_move"+b,origin:new h.WorkinPoint(0.5,
1)}));b=this._addElement(new k.Element({x:i.ConstantsApp.STAGE_CENTER_X+80,y:362,asset:"help_jump"+b,origin:new h.WorkinPoint(0.75,1)}));this._addElement(new k.TextLocalized(a._getPos().x,a._getPos().y+5,"move",null,{origin:new h.WorkinPoint(0.5)}));this._addElement(new k.TextLocalized(b._getPos().x,b._getPos().y+5,"jump",null,{origin:new h.WorkinPoint(0.75)}))};j["com.nick.spongebob.fiery_tracks.ui.screens.ScreenHelp"]=l.screens.ScreenHelp;l.screens.ScreenHelp.__name__="com,nick,spongebob,fiery_tracks,ui,screens,ScreenHelp".split(",");
l.screens.ScreenHelp.__super__=l.screens.ScreenBase;l.screens.ScreenHelp.prototype=t(l.screens.ScreenBase.prototype,{dispose:function(){l.screens.ScreenBase.prototype.dispose.call(this);this._backButton=null},_onEventPlayClick:function(){this.getState()==this._STATE_OPENED&&this._doFlowEvent(i.ConstantsScreen.FLOW_HELP_CLOSE)},__class__:l.screens.ScreenHelp});l.screens.ScreenLoading=function(a,b,c){null==b&&(b="");l.screens.ScreenBase.call(this,a,b,c);this._timerSpin=0.25;this._textAdded=!1;f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_LOCAL_TEXT_LOADED)&&
(this._addElement(new l.display.DisplayLoadingProgress(130,i.ConstantsApp.STAGE_CENTER_Y+175)),this._textAdded=!0)};j["com.nick.spongebob.fiery_tracks.ui.screens.ScreenLoading"]=l.screens.ScreenLoading;l.screens.ScreenLoading.__name__="com,nick,spongebob,fiery_tracks,ui,screens,ScreenLoading".split(",");l.screens.ScreenLoading.__super__=l.screens.ScreenBase;l.screens.ScreenLoading.prototype=t(l.screens.ScreenBase.prototype,{dispose:function(){l.screens.ScreenBase.prototype.dispose.call(this)},update:function(a){l.screens.ScreenBase.prototype.update.call(this,
a);!this._textAdded&&f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_LOCAL_TEXT_LOADED)&&(this._addElement(new l.display.DisplayLoadingProgress(130,i.ConstantsApp.STAGE_CENTER_Y+175)),this._textAdded=!0)},__class__:l.screens.ScreenLoading});l.screens.ScreenPauseAlert=function(a,b,c){null==b&&(b="");l.screens.ScreenBase.call(this,a,b,c);this._alertBox=new o.FillSprite(0,i.ConstantsApp.STAGE_WIDTH|0,i.ConstantsApp.STAGE_HEIGHT|0);a=new O;a.add(this._alertBox);this._textureEntity.addChild(a);this._textAlert=
this._addElement(new k.TextLocalized(50,50,"orientation_portrait","",{origin:new h.WorkinPoint(0,0.5)}))};j["com.nick.spongebob.fiery_tracks.ui.screens.ScreenPauseAlert"]=l.screens.ScreenPauseAlert;l.screens.ScreenPauseAlert.__name__="com,nick,spongebob,fiery_tracks,ui,screens,ScreenPauseAlert".split(",");l.screens.ScreenPauseAlert.__super__=l.screens.ScreenBase;l.screens.ScreenPauseAlert.prototype=t(l.screens.ScreenBase.prototype,{update:function(a){l.screens.ScreenBase.prototype.update.call(this,
a)},__class__:l.screens.ScreenPauseAlert});l.screens.ScreenQuitConfirm=function(a,b,c){l.screens.ScreenBase.call(this,a,b,c);this._addElement(new k.Element({asset:"ui/menu/menu_container",x:i.ConstantsApp.STAGE_WIDTH/2,y:i.ConstantsApp.STAGE_HEIGHT/2,origin:new h.WorkinPoint(0.5,0.5)}));this._addElement(new k.Element({asset:"ui/quit_confirm/quit_confirm_container",x:i.ConstantsApp.STAGE_WIDTH/2,y:i.ConstantsApp.STAGE_HEIGHT/2-50,origin:new h.WorkinPoint(0.5,0.5)}));this._addElement(new k.TextLocalized(i.ConstantsApp.STAGE_CENTER_X,
i.ConstantsApp.STAGE_HEIGHT/2-150,"quit_confirm_header","",{origin:new h.WorkinPoint(0.5,0.5)}));this._addElement(new k.TextLocalized(i.ConstantsApp.STAGE_CENTER_X,i.ConstantsApp.STAGE_HEIGHT/2-110,"quit_confirm_header2","",{origin:new h.WorkinPoint(0.5,0.5)}));this._addElement(new k.TextLocalized(i.ConstantsApp.STAGE_CENTER_X,i.ConstantsApp.STAGE_HEIGHT/2-70,"quit_confirm_header3","",{origin:new h.WorkinPoint(0.5,0.5)}));this._addElement(this._buttonYes=new l.buttons.ButtonBase(480,300,new h.WorkinPoint(0.5,
0.5),"ui/quit_confirm/quit_confirm_btn","ui/quit_confirm/quit_confirm_btn","ui/quit_confirm/quit_confirm_btn"))._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,w(this,this._onYesClick));this._buttonYes.addText(new k.TextLocalized(95,35,"yes","",{origin:new h.WorkinPoint(0.5,0.5)}));this._addElement(this._buttonNo=new l.buttons.ButtonBase(480,425,new h.WorkinPoint(0.5,0.5),"ui/quit_confirm/quit_confirm_btn","ui/quit_confirm/quit_confirm_btn","ui/quit_confirm/quit_confirm_btn"))._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,
w(this,this._onNoClick));this._buttonNo.addText(new k.TextLocalized(95,35,"no","",{origin:new h.WorkinPoint(0.5,0.5)}))};j["com.nick.spongebob.fiery_tracks.ui.screens.ScreenQuitConfirm"]=l.screens.ScreenQuitConfirm;l.screens.ScreenQuitConfirm.__name__="com,nick,spongebob,fiery_tracks,ui,screens,ScreenQuitConfirm".split(",");l.screens.ScreenQuitConfirm.__super__=l.screens.ScreenBase;l.screens.ScreenQuitConfirm.prototype=t(l.screens.ScreenBase.prototype,{_onNoClick:function(){this.getState()==this._STATE_OPENED&&
this._doFlowEvent(i.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO)},_onYesClick:function(){this.getState()==this._STATE_OPENED&&this._doFlowEvent(i.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES)},dispose:function(){l.screens.ScreenBase.prototype.dispose.call(this);this._buttonNo=this._buttonYes=null},__class__:l.screens.ScreenQuitConfirm});l.screens.ScreenScreenshot=function(){};j["com.nick.spongebob.fiery_tracks.ui.screens.ScreenScreenshot"]=l.screens.ScreenScreenshot;l.screens.ScreenScreenshot.__name__="com,nick,spongebob,fiery_tracks,ui,screens,ScreenScreenshot".split(",");
l.screens.ScreenScreenshot.__super__=l.screens.ScreenBase;l.screens.ScreenScreenshot.prototype=t(l.screens.ScreenBase.prototype,{dispose:function(){l.screens.ScreenBase.prototype.dispose.call(this)},__class__:l.screens.ScreenScreenshot});l.screens.ScreenSplash=function(a,b,c){null==b&&(b="");this._BLINK_TIME=1;l.screens.ScreenBase.call(this,a,b,c);this._blinkTimer=this._BLINK_TIME;a=f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_TOUCH_DEVICE)?"tap_anywhere":"click_anywhere";this._textClickToPlay=
this._addElement(new k.TextLocalized(i.ConstantsApp.STAGE_CENTER_X,i.ConstantsApp.STAGE_HEIGHT-50,a,"",{origin:new h.WorkinPoint(0.5,0.5)}))};j["com.nick.spongebob.fiery_tracks.ui.screens.ScreenSplash"]=l.screens.ScreenSplash;l.screens.ScreenSplash.__name__="com,nick,spongebob,fiery_tracks,ui,screens,ScreenSplash".split(",");l.screens.ScreenSplash.__super__=l.screens.ScreenBase;l.screens.ScreenSplash.prototype=t(l.screens.ScreenBase.prototype,{_onInputDown:function(){if(this.getState()!=this._STATE_OPENED)return!1;
this._doFlowEvent(i.ConstantsScreen.FLOW_SPLASH_PLAY);return!1},update:function(a){l.screens.ScreenBase.prototype.update.call(this,a);this._blinkTimer-=a;0>=this._blinkTimer&&(0==this._textClickToPlay._getRenderable().alpha?(this._blinkTimer=this._BLINK_TIME,this._textClickToPlay._getRenderable().alpha=1):(this._blinkTimer=this._BLINK_TIME/2,this._textClickToPlay._getRenderable().alpha=0))},__class__:l.screens.ScreenSplash});l.screens.data={};l.screens.data.ChangeActionData=function(){};j["com.nick.spongebob.fiery_tracks.ui.screens.data.ChangeActionData"]=
l.screens.data.ChangeActionData;l.screens.data.ChangeActionData.__name__="com,nick,spongebob,fiery_tracks,ui,screens,data,ChangeActionData".split(",");l.screens.data.ChangeActionData.prototype={_getAction:function(){return this._action},_getChangeEvent:function(){return this._changeEvent},_getScreenId:function(){return this._screenId},__class__:l.screens.data.ChangeActionData,__properties__:{get_screenId:"_getScreenId",get_changeEvent:"_getChangeEvent",get_action:"_getAction"}};l.screens.data.ScreenData=
function(a,b,c,g,d){null==g&&(g=0);null==c&&(c="");this.id=a;this.screenClass=b;this.assetClassName=c;this.layer=g;this.data=null==d?new G:d};j["com.nick.spongebob.fiery_tracks.ui.screens.data.ScreenData"]=l.screens.data.ScreenData;l.screens.data.ScreenData.__name__="com,nick,spongebob,fiery_tracks,ui,screens,data,ScreenData".split(",");l.screens.data.ScreenData.prototype={__class__:l.screens.data.ScreenData};l.screens.data.ScreenQueueData=function(a,b,c){null==c&&(c="");this.screenData=a;this.openCondition=
b;this.openTestString=c};j["com.nick.spongebob.fiery_tracks.ui.screens.data.ScreenQueueData"]=l.screens.data.ScreenQueueData;l.screens.data.ScreenQueueData.__name__="com,nick,spongebob,fiery_tracks,ui,screens,data,ScreenQueueData".split(",");l.screens.data.ScreenQueueData.prototype={validateCondition:function(a,b){null==b&&(b="");return this.openCondition==a?""==this.openTestString||this.openTestString==b:!1},__class__:l.screens.data.ScreenQueueData};l.screens.data.ScreenStateData=function(a,b,c,
g,d,f){this.id=a;this.animation=b;this.actionOnComplete=c;this.actionData=g;this.inFunc=d;this.outFunc=f};j["com.nick.spongebob.fiery_tracks.ui.screens.data.ScreenStateData"]=l.screens.data.ScreenStateData;l.screens.data.ScreenStateData.__name__="com,nick,spongebob,fiery_tracks,ui,screens,data,ScreenStateData".split(",");l.screens.data.ScreenStateData.prototype={__class__:l.screens.data.ScreenStateData};l.transitions={};l.transitions.TransitionBase=function(a,b,c,g){null==g&&(g="");null==c&&(c=!1);
null==b&&(b=!0);this._STATE_OUT=3;this._STATE_IDLE=2;this._STATE_IN=1;this._STATE_HIDDEN=0;this._transitionId=g;this._flagOutOnly=c;this.flagDispose=!1;k.Element.call(this,{asset:a});b?this._setState(this._STATE_HIDDEN):this._flagOutOnly?this._setState(this._STATE_OUT):this._setState(this._STATE_IN)};j["com.nick.spongebob.fiery_tracks.ui.transitions.TransitionBase"]=l.transitions.TransitionBase;l.transitions.TransitionBase.__name__="com,nick,spongebob,fiery_tracks,ui,transitions,TransitionBase".split(",");
l.transitions.TransitionBase.__super__=k.Element;l.transitions.TransitionBase.prototype=t(k.Element.prototype,{dispose:function(){k.Element.prototype.dispose.call(this);this._mc=null},_setState:function(a){this._state=a;switch(this._state){case this._STATE_HIDDEN:this.hide()}},show:function(){this._mc.set_visible(!0)},hide:function(){this._mc.set_visible(!1)},start:function(){this.show();this._setState(this._STATE_IN)},update:function(a){k.Element.prototype.update.call(this,a)},_getIsOutro:function(){return this._state==
this._STATE_OUT},__class__:l.transitions.TransitionBase,__properties__:t(k.Element.prototype.__properties__,{get_isOutro:"_getIsOutro"})});s={World:function(a){this._POOL_PICKUPS="_POOL_PICKUPS";this._POOL_SPONGS="_POOL_SPONGS";this._STATE_GAMEPLAY=1;this._STATE_INITIALIZING=0;n.WMEventDispatcher.call(this);this._timeline=a;f.WorkinCloud.instance.resetValue(i.ConstantsApp.INT_LIVES);f.WorkinCloud.instance.resetValue(i.ConstantsApp.INT_SCORE);f.WorkinCloud.instance.resetValue(i.ConstantsApp.FLOAT_GAME_SPEED_X);
this._timerCrystal=0.2;this._difficulty=0;this._pointsTimer=1;this._secondsPassed=0;this._cameraPointTrackData=new h.WorkinPoint;this._percentAcross=0;this._elementManager=new k.ElementManager(this._timeline,i.ConstantsApp.STAGE_CENTER_X,i.ConstantsApp.STAGE_CENTER_Y);this._elementManager.addLayer(i.ConstantsApp.LAYER_BG);this._elementManager.addLayer(i.ConstantsApp.LAYER_FG);this._elementManager.addLayer(i.ConstantsApp.LAYER_PLAYER);this._lastCameraPos=this._elementManager._getCamera()._getPos();
this._initArrays();f.WorkinCloud.instance.stack([w(this,this._initPools),w(this,this._initParticles),w(this,this._initPlayer),w(this,this._onGenerationComplete)]);this._setState(this._STATE_INITIALIZING)}};j["com.nick.spongebob.fiery_tracks.world.World"]=s.World;s.World.__name__="com,nick,spongebob,fiery_tracks,world,World".split(",");s.World.__super__=n.WMEventDispatcher;s.World.prototype=t(n.WMEventDispatcher.prototype,{_onGenerationComplete:function(){f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEvent(i.ConstantsApp.EVENT_WORLD_GENERATION_COMPLETE))},
_initPlayer:function(){this._player=new s.elements.player.PlayerBase({x:50,y:250,layer:i.ConstantsApp.LAYER_PLAYER,origin:new h.WorkinPoint(0.5,0.5)});this._elementManager.addElement(this._player);this._enemies.push(this._elementManager.addElement(new s.elements.fist.FistBase({x:400,y:0,layer:i.ConstantsApp.LAYER_PLAYER,camera:this._elementManager._getCamera()})));this._strikeTimer=2;this._attackMode=!1;this._timerSpawnPickups=f.WorkinUtils.getRandom(3,4,!1)},_initParticles:function(){this._spongs=
[];this._elementManager.addElement(this._backgroundSky=new k.Element({layer:i.ConstantsApp.LAYER_BG,asset:"background"}));this._midGround=[];for(var a=0;4>a;){var b=a++;switch(b){case 0:this._midGround.push(this._elementManager.addElement(new k.Element({layer:i.ConstantsApp.LAYER_BG,y:560,x:0,asset:"midground_1",origin:new h.WorkinPoint(0,1)})));break;case 1:case 3:this._midGround.push(this._elementManager.addElement(new k.Element({layer:i.ConstantsApp.LAYER_BG,y:560,x:this._midGround[b-1]._getPos().x+
this._midGround[b-1]._getRenderable().width,asset:"midground_2",origin:new h.WorkinPoint(0,1)})));break;case 2:this._midGround.push(this._elementManager.addElement(new k.Element({layer:i.ConstantsApp.LAYER_BG,y:560,x:this._midGround[b-1]._getPos().x+this._midGround[b-1]._getRenderable().width,asset:"midground_1",origin:new h.WorkinPoint(0,1)})))}}this._foreGround=[];for(a=0;4>a;)switch(b=a++,b){case 0:this._foreGround.push(this._elementManager.addElement(new k.Element({layer:i.ConstantsApp.LAYER_BG,
y:1E3,x:0,asset:"foreground_1",origin:new h.WorkinPoint(0,1)})));break;case 1:case 3:this._foreGround.push(this._elementManager.addElement(new k.Element({layer:i.ConstantsApp.LAYER_BG,y:1E3,x:this._foreGround[b-1]._getPos().x+this._foreGround[b-1]._getRenderable().width,asset:"foreground_2",origin:new h.WorkinPoint(0,1)})));break;case 2:this._foreGround.push(this._elementManager.addElement(new k.Element({layer:i.ConstantsApp.LAYER_BG,y:1E3,x:this._foreGround[b-1]._getPos().x+this._foreGround[b-1]._getRenderable().width,
asset:"foreground_1",origin:new h.WorkinPoint(0,1)})))}this._tracks.push(this._currentTrack=this._elementManager.addElement(new s.elements.tracks.TrackBase({movie:"track_straight",x:0,y:i.ConstantsApp.STAGE_CENTER_Y+150,layer:i.ConstantsApp.LAYER_FG})));this._currentTrack._setType(1);this._currentTrack.setEndY(this._currentTrack._getPos().y);for(a=0;13>a;)a++,this._addTracks(0)},_onEventInitPoolComplete:function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(k.PoolManager.ALL_POOLS_FULL,
w(this,this._onEventInitPoolComplete));f.WorkinCloud.instance.unpauseStack()},_initPools:function(){f.WorkinCloud.instance.setInt(i.ConstantsApp.INT_LOADING_PROGRESS,100);f.WorkinCloud.instance.pauseStack();f.WorkinCloud.instance._getDispatcher().addEventListener(k.PoolManager.ALL_POOLS_FULL,w(this,this._onEventInitPoolComplete));this._poolManager=new k.PoolManager;this._poolManager.addPool(this._POOL_SPONGS,s.elements.TestElement,3);this._poolManager.addPool(this._POOL_PICKUPS,s.elements.pickups.PickupBase,
5)},handleInput:function(a){if(!(f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_PAUSED)||this._state==this._STATE_INITIALIZING))switch(a.input){case i.ConstantsApp.INPUT_CLICK:if(500<a.y)break;switch(a.phase){case n.WMEventInput.PHASE_DOWN:if(900<a.x)break;this._player.doJump(!0,this._activeTrack);break;case n.WMEventInput.PHASE_MOVE:this._player.updateMousePosition(a.x)}}},_unpause:function(){f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_PAUSED,!1)},_pause:function(){f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_PAUSED,
!0)},_onUnpause:function(){this._unpause()},_onPause:function(){this._pause()},_removeEventListeners:function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(i.ConstantsApp.EVENT_PAUSE,w(this,this._onPause));f.WorkinCloud.instance._getDispatcher().removeEventListener(i.ConstantsApp.EVENT_UNPAUSE,w(this,this._onUnpause))},_addEventListeners:function(){f.WorkinCloud.instance._getDispatcher().addEventListener(i.ConstantsApp.EVENT_PAUSE,w(this,this._onPause));f.WorkinCloud.instance._getDispatcher().addEventListener(i.ConstantsApp.EVENT_UNPAUSE,
w(this,this._onUnpause))},render:function(){this._elementManager.renderElements()},_collisionFistAndTrack:function(){for(var a=0,b=this._enemies;a<b.length;){var c=b[a];++a;for(var g=0,d=this._tracks;g<d.length;){var f=d[g];++g;if(!(f._getPos().x>c._getPos().x||f._getPos().x+f.get_width()<c._getPos().x)&&3==c.get_state()){var e=(c._getPos().x-f._getPos().x)/f.get_width(),h=f._getPos().y-f.getEndY(),e=f._getPos().y-h*e;c._getPos().y>e&&(f.smash(),c.smashed())}}g=c._getPos().x-this._player._getPos().x;
d=c._getPos().y-this._player._getPos().y;Math.abs(g)<this._player.get_Width()/2&&Math.abs(d)<this._player.get_Height()/2&&(this._player.get_IsJumping()||this._player.get_IsBouncing())&&this._player.fallDown(c.get_yvel())}},_manageFists:function(a){if(this._attackMode){b=a=0;for(c=this._enemies;b<c.length;)g=c[b],++b,a+=g.readyToStrike?1:0;if(a==this._enemies.length){b=0;for(c=this._enemies;b<c.length;)g=c[b],++b,g.set_state(3);this._attackMode=!1;0<this._difficulty&&2>this._enemies.length&&this._enemies.push(this._elementManager.addElement(new s.elements.fist.FistBase({x:400,
y:this._enemies[0]._getPos().y-120,layer:i.ConstantsApp.LAYER_PLAYER,camera:this._elementManager._getCamera()})))}}else if(this._strikeTimer-=a,0>this._strikeTimer){this._strikeTimer=4.5+3*Math.random();for(var b=0,c=this._enemies;b<c.length;){var g=c[b];++b;g.attack()}this._attackMode=!0}},_addTracks:function(a){null==a&&(a=-1);var b=f.WorkinUtils.getRandom(6,8)|0,c="",g=0,d=0;null!=this._currentTrack&&300>this._currentTrack._getPos().y&&(b=f.WorkinUtils.getRandom(6,8)|0);if(null!=this._currentTrack&&
400<this._currentTrack._getPos().y)for(b=f.WorkinUtils.getRandom(0,4)|0;1==b;)b=f.WorkinUtils.getRandom(0,4)|0;-1<a&&8>=a&&(b=a);if(null!=this._currentTrack)switch(this._currentTrack._getType()){case 0:switch(b){case 0:c="track_straight";d=g=this._currentTrack._getPos().y;break;case 1:c="track_60";g=this._currentTrack._getPos().y-5;d=g-133;break;case 2:c="track_45";g=this._currentTrack._getPos().y-3;d=g-77;break;case 3:c="track_30";g=this._currentTrack._getPos().y-2;d=g-55;break;case 4:c="track_12";
g=this._currentTrack._getPos().y-2;d=g-18;break;case 5:c="track_60_negative";g=this._currentTrack._getPos().y-2;d=g+133;break;case 6:c="track_45_negative";g=this._currentTrack._getPos().y-2;d=g+77;break;case 7:c="track_30_negative";g=this._currentTrack._getPos().y-2;d=g+55;break;case 8:c="track_12_negative",g=this._currentTrack._getPos().y-2,d=g+18}break;case 1:switch(b){case 0:c="track_straight";d=g=this._currentTrack._getPos().y-130;break;case 1:c="track_60";g=this._currentTrack._getPos().y-130;
d=g-133;break;case 2:c="track_45";g=this._currentTrack._getPos().y-131;d=g-77;break;case 3:c="track_30";g=this._currentTrack._getPos().y-131;d=g-55;break;case 4:c="track_12";g=this._currentTrack._getPos().y-133;d=g-18;break;case 5:c="track_60_negative";g=this._currentTrack._getPos().y-132;d=g+133;break;case 6:c="track_45_negative";g=this._currentTrack._getPos().y-130;d=g+77;break;case 7:c="track_30_negative";g=this._currentTrack._getPos().y-130;d=g+55;break;case 8:c="track_12_negative",g=this._currentTrack._getPos().y-
130,d=g+18}break;case 2:switch(b){case 0:c="track_straight";d=g=this._currentTrack._getPos().y-72;break;case 1:c="track_60";g=this._currentTrack._getPos().y-74;d=g-133;break;case 2:c="track_45";g=this._currentTrack._getPos().y-75;d=g-77;break;case 3:c="track_30";g=this._currentTrack._getPos().y-75;d=g-55;break;case 4:c="track_12";g=this._currentTrack._getPos().y-76;d=g-18;break;case 5:c="track_60_negative";g=this._currentTrack._getPos().y-74;d=g+133;break;case 6:c="track_45_negative";g=this._currentTrack._getPos().y-
72;d=g+77;break;case 7:c="track_30_negative";g=this._currentTrack._getPos().y-72;d=g+55;break;case 8:c="track_12_negative",g=this._currentTrack._getPos().y-72,d=g+18}break;case 3:switch(b){case 0:c="track_straight";d=g=this._currentTrack._getPos().y-44;break;case 1:c="track_60";g=this._currentTrack._getPos().y-43;d=g-133;break;case 2:c="track_45";g=this._currentTrack._getPos().y-45;d=g-77;break;case 3:c="track_30";g=this._currentTrack._getPos().y-45;d=g-55;break;case 4:c="track_12";g=this._currentTrack._getPos().y-
46;d=g-18;break;case 5:c="track_60_negative";g=this._currentTrack._getPos().y-43;d=g+133;break;case 6:c="track_45_negative";g=this._currentTrack._getPos().y-44;d=g+77;break;case 7:c="track_30_negative";g=this._currentTrack._getPos().y-44;d=g+55;break;case 8:c="track_12_negative",g=this._currentTrack._getPos().y-44,d=g+18}break;case 4:switch(b){case 0:c="track_straight";d=g=this._currentTrack._getPos().y-16;break;case 1:c="track_60";g=this._currentTrack._getPos().y-15;d=g-133;break;case 2:c="track_45";
g=this._currentTrack._getPos().y-17;d=g-77;break;case 3:c="track_30";g=this._currentTrack._getPos().y-17;d=g-55;break;case 4:c="track_12";g=this._currentTrack._getPos().y-18;d=g-18;break;case 5:c="track_60_negative";g=this._currentTrack._getPos().y-15;d=g+133;break;case 6:c="track_45_negative";g=this._currentTrack._getPos().y-16;d=g+77;break;case 7:c="track_30_negative";g=this._currentTrack._getPos().y-16;d=g+55;break;case 8:c="track_12_negative",g=this._currentTrack._getPos().y-16,d=g+18}break;case 5:switch(b){case 0:c=
"track_straight";d=g=this._currentTrack._getPos().y+127;break;case 1:c="track_60";g=this._currentTrack._getPos().y+128;d=g-133;break;case 2:c="track_45";g=this._currentTrack._getPos().y+127;d=g-77;break;case 3:c="track_30";g=this._currentTrack._getPos().y+127;d=g-55;break;case 4:c="track_12";g=this._currentTrack._getPos().y+128;d=g-18;break;case 5:c="track_60_negative";g=this._currentTrack._getPos().y+126;d=g+133;break;case 6:c="track_45_negative";g=this._currentTrack._getPos().y+127;d=g+77;break;
case 7:c="track_30_negative";g=this._currentTrack._getPos().y+127;d=g+55;break;case 8:c="track_12_negative",g=this._currentTrack._getPos().y+127,d=g+18}break;case 6:switch(b){case 0:c="track_straight";d=g=this._currentTrack._getPos().y+72;break;case 1:c="track_60";g=this._currentTrack._getPos().y+73;d=g-133;break;case 2:c="track_45";g=this._currentTrack._getPos().y+72;d=g-77;break;case 3:c="track_30";g=this._currentTrack._getPos().y+72;d=g-55;break;case 4:c="track_12";g=this._currentTrack._getPos().y+
73;d=g-18;break;case 5:c="track_60_negative";g=this._currentTrack._getPos().y+74;d=g+133;break;case 6:c="track_45_negative";g=this._currentTrack._getPos().y+72;d=g+77;break;case 7:c="track_30_negative";g=this._currentTrack._getPos().y+72;d=g+55;break;case 8:c="track_12_negative",g=this._currentTrack._getPos().y+72,d=g+18}break;case 7:switch(b){case 0:c="track_straight";d=g=this._currentTrack._getPos().y+42;break;case 1:c="track_60";g=this._currentTrack._getPos().y+43;d=g-133;break;case 2:c="track_45";
g=this._currentTrack._getPos().y+42;d=g-77;break;case 3:c="track_30";g=this._currentTrack._getPos().y+42;d=g-55;break;case 4:c="track_12";g=this._currentTrack._getPos().y+43;d=g-18;break;case 5:c="track_60_negative";g=this._currentTrack._getPos().y+41;d=g+133;break;case 6:c="track_45_negative";g=this._currentTrack._getPos().y+42;d=g+77;break;case 7:c="track_30_negative";g=this._currentTrack._getPos().y+42;d=g+55;break;case 8:c="track_12_negative",g=this._currentTrack._getPos().y+42,d=g+18}break;case 8:switch(b){case 0:c=
"track_straight";d=g=this._currentTrack._getPos().y+14;break;case 1:c="track_60";g=this._currentTrack._getPos().y+15;d=g-133;break;case 2:c="track_45";g=this._currentTrack._getPos().y+14;d=g-77;break;case 3:c="track_30";g=this._currentTrack._getPos().y+14;d=g-55;break;case 4:c="track_12";g=this._currentTrack._getPos().y+15;d=g-18;break;case 5:c="track_60_negative";g=this._currentTrack._getPos().y+13;d=g+133;break;case 6:c="track_45_negative";g=this._currentTrack._getPos().y+14;d=g+77;break;case 7:c=
"track_30_negative";g=this._currentTrack._getPos().y+14;d=g+55;break;case 8:c="track_12_negative",g=this._currentTrack._getPos().y+14,d=g+18}}a=this._difficulty>30*Math.random()+1&&!this._currentTrack._getIsJump()&&1!=b;this._tracks.push(this._elementManager.addElement(new s.elements.tracks.TrackBase({type:b,movie:c,x:this._currentTrack._getPos().x+75.65,y:g,layer:i.ConstantsApp.LAYER_FG})));this._currentTrack=this._tracks[this._tracks.length-1];this._currentTrack.setEndY(d);a&&this._currentTrack.smash()},
_generateTrackPatterns:function(){switch(f.WorkinUtils.getRandom(1,6)|0){case 1:this._addTracks(8);this._addTracks(7);this._addTracks(6);this._addTracks(5);this._addTracks(6);this._addTracks(7);this._addTracks(8);this._addTracks(0);break;case 2:this._addTracks(4);this._addTracks(3);this._addTracks(2);this._addTracks(2);this._addTracks(3);this._addTracks(4);this._addTracks(0);break;case 3:this._addTracks(4);this._addTracks(0);this._addTracks(8);this._addTracks(0);this._addTracks(3);this._addTracks(2);
this._addTracks(2);this._addTracks(2);this._addTracks(2);this._addTracks(2);this._addTracks(3);this._addTracks(3);this._addTracks(4);this._addTracks(3);this._addTracks(2);this._addTracks(3);this._addTracks(4);this._addTracks(0);break;case 4:this._addTracks(8);this._addTracks(8);this._addTracks(7);this._addTracks(7);this._addTracks(8);this._addTracks(0);break;case 5:this._addTracks(0);this._addTracks(0);this._addTracks(3);this._addTracks(3);this._addTracks(3);this._addTracks(0);this._addTracks(0);
this._addTracks(8);this._addTracks(7);this._addTracks(7);this._addTracks(8);this._addTracks(0);break;default:this._addTracks(4),this._addTracks(4),this._addTracks(0),this._addTracks(0),this._addTracks(8),this._addTracks(8),this._addTracks(7),this._addTracks(8),this._addTracks(0)}},_findActiveTrack:function(){for(var a=0,b=this._tracks.length;a<b;){var c=a++;if(this._player._getPos().x>=this._tracks[c]._getPos().x&&this._player._getPos().x<this._tracks[c]._getPos().x+this._tracks[c].get_width()){if(this._activeTrack!=
this._tracks[c]&&!this._tracks[c]._getIsJump()){var g=(this._player._getPos().x-this._tracks[c]._getPos().x)/this._tracks[c].get_width();this._player._getPos().y+15<this._tracks[c]._getPos().y+g*(this._tracks[c]._getPos().y-this._tracks[c].getEndY())?this._player.set_isScrewed(!1):this._player.get_isScrewed()||this._player.cancelJump()}this._activeTrack=this._tracks[c];this._activeTrack._getIsJump()&&this._player.set_isScrewed(!0)}}this._percentAcross=(this._player._getPos().x-this._activeTrack._getPos().x)/
this._activeTrack.get_width()},_removeTracks:function(){for(var a=this._tracks.length;0<a--;)-400>=this._tracks[a]._getPos().x+this._tracks[a]._getRenderable().width&&(this._tracks[a]._setDoDelete(!0),this._tracks[a]._getDoDelete()&&this._tracks.splice(a,1))},_updateBackgrounds:function(a){this._backgroundSky._getPos().y=this._elementManager._getCamera()._getPos().y-this._backgroundSky._getRenderable().height/2;for(var b=0,c=this._midGround.length;b<c;){var g=b++;this._midGround[g]._getPos().x-=0.2*
f.WorkinCloud.instance.getFloat(i.ConstantsApp.FLOAT_GAME_SPEED_X)*a;this._midGround[g]._getPos().y=this._elementManager._getCamera()._getPos().y+280;0>this._midGround[g]._getPos().x+this._midGround[g]._getRenderable().width&&(this._midGround[g]._getPos().x=this._midGround[this._midGround.length-1]._getPos().x+599,this._midGround.push(this._midGround[g]),this._midGround.splice(0,1))}b=0;for(c=this._foreGround.length;b<c;)g=b++,this._foreGround[g]._getPos().x-=0.6*f.WorkinCloud.instance.getFloat(i.ConstantsApp.FLOAT_GAME_SPEED_X)*
a,this._foreGround[g]._getPos().y=this._elementManager._getCamera()._getPos().y+720,0>this._foreGround[g]._getPos().x+this._foreGround[g]._getRenderable().width&&(this._foreGround[g]._getPos().x=this._foreGround[this._midGround.length-1]._getPos().x+1020,this._foreGround.push(this._foreGround[g]),this._foreGround.splice(0,1))},_addPickups:function(a){if(0<this._timerSpawnPickups)this._timerSpawnPickups-=a;else{for(var a=this._tracks[this._tracks.length-1],b=0,c=this._tracks;b<c.length;){var g=c[b];
++b;if(!(g._getPos().x<i.ConstantsApp.STAGE_WIDTH)&&(a=g,0.5<Math.random()))break}if(!a._getIsJump()){var b=a._getPos().x,c=280,d=g=35,e=i.ConstantsApp.PICKUP_TYPE_COTTON_CANDY,j="Cotton Candy";switch(f.WorkinUtils.getRandom(0,1)|0){case 0:c=a._getPos().y-150;break;case 1:b=f.WorkinUtils.getRandom(100,900)+this._elementManager._getCamera()._getPos().x-480,c=700+this._elementManager._getCamera()._getPos().y-280,g=15,d=50,e=i.ConstantsApp.PICKUP_TYPE_BALLOON,j="Balloon"}this._timerSpawnPickups=f.WorkinUtils.getRandom(3,
4,!1);this._pickups.push(this._elementManager.addElement(this._poolManager.createElement(this._POOL_PICKUPS,{asset:j,width:g,height:d,type:e,x:b,y:c,layer:i.ConstantsApp.LAYER_PLAYER,origin:new h.WorkinPoint(0.5,0.5),camera:this._elementManager._getCamera()})))}}},_updatePickups:function(a){this._addPickups(a);for(a=this._pickups.length;0<a--;){if(this._player.checkCollision(this._pickups[a])&&!1==this._pickups[a].get_Splice()&&!this._player.get_isScrewed()){switch(this._pickups[a].get_Type()){case i.ConstantsApp.PICKUP_TYPE_BALLOON:f.WorkinCloud.instance.modifyInt(i.ConstantsApp.INT_SCORE,
500);break;case i.ConstantsApp.PICKUP_TYPE_COTTON_CANDY:f.WorkinCloud.instance.modifyInt(i.ConstantsApp.INT_SCORE,250)}f.WorkinCloud.instance._getSound().playSound("pickup");this._pickups[a].reset()}this._pickups[a].get_Splice()&&this._pickups.splice(a,1)}},_updatePlayerRotation:function(){!this._player.get_IsJumping()&&!this._player.get_IsBouncing()&&this._player.set_RotationGoal(this._activeTrack._getAngle())},_updatePlayer:function(a){0>this._player._getPos().x&&(this._player._getPos().x=0);960<
this._player._getPos().x&&(this._player._getPos().x=960);var b=Math.abs(this._player._getPos().x-this._activeTrack._getPos().x)/Math.abs(this._activeTrack._getPos().x-this._activeTrack._getPos().x+this._activeTrack.get_width());!this._player.get_IsJumping()&&!this._player.get_IsBouncing()&&(this._player._getPos().y=this._activeTrack._getPos().y+b*(this._activeTrack.getEndY()-this._activeTrack._getPos().y)-this._player.get_Height()/2,this._activeTrack._getIsJump()&&(this._player.doJump(!1),this._player.set_isScrewed(!0)));
if(30>Math.abs(this._player._getPos().y-(this._activeTrack._getPos().y+b*(this._activeTrack.getEndY()-this._activeTrack._getPos().y)))&&0.3<=this._player.get_JumpTimer()&&!this._player.get_isScrewed()){if(this._player.get_IsJumping()&&!this._activeTrack._getIsJump()&&(this._player.cancelJump(),-45<this._activeTrack._getAngle())){this._player.bounce(this._activeTrack);return}this._player.get_IsBouncing()&&(this._player.cancelJump(),this._player.set_IsBouncing(!1));this._activeTrack._getIsJump()?this._player.set_isScrewed(!0):
this._player.cancelJump()}this._player._getPos().y>this._elementManager._getCamera()._getPos().y+1480&&(f.WorkinCloud.instance.modifyInt(i.ConstantsApp.INT_LIVES,-1),0>=f.WorkinCloud.instance.getInt(i.ConstantsApp.INT_LIVES)&&f.WorkinCloud.instance.setBool(i.ConstantsApp.BOOL_GAME_LOSE,!0),this._player._getPos().y=this._elementManager._getCamera()._getPos().y-480,this._player.respawn());if(!this._player.get_IsJumping()&&!this._player.get_IsBouncing()&&!this._activeTrack._getIsJump()){switch(this._activeTrack._getType()){case 1:f.WorkinCloud.instance.modifyFloat(i.ConstantsApp.FLOAT_GAME_SPEED_X,
-200*a);break;case 2:f.WorkinCloud.instance.modifyFloat(i.ConstantsApp.FLOAT_GAME_SPEED_X,-100*a);break;case 3:f.WorkinCloud.instance.modifyFloat(i.ConstantsApp.FLOAT_GAME_SPEED_X,-50*a);break;case 4:f.WorkinCloud.instance.modifyFloat(i.ConstantsApp.FLOAT_GAME_SPEED_X,-25*a);break;case 5:f.WorkinCloud.instance.modifyFloat(i.ConstantsApp.FLOAT_GAME_SPEED_X,200*a);break;case 6:f.WorkinCloud.instance.modifyFloat(i.ConstantsApp.FLOAT_GAME_SPEED_X,100*a);break;case 7:f.WorkinCloud.instance.modifyFloat(i.ConstantsApp.FLOAT_GAME_SPEED_X,
50*a);break;case 8:f.WorkinCloud.instance.modifyFloat(i.ConstantsApp.FLOAT_GAME_SPEED_X,25*a)}f.WorkinCloud.instance.getFloat(i.ConstantsApp.FLOAT_GAME_SPEED_X)>s.World._maxSpeed&&f.WorkinCloud.instance.setFloat(i.ConstantsApp.FLOAT_GAME_SPEED_X,s.World._maxSpeed);f.WorkinCloud.instance.getFloat(i.ConstantsApp.FLOAT_GAME_SPEED_X)<s.World._minSpeed&&f.WorkinCloud.instance.setFloat(i.ConstantsApp.FLOAT_GAME_SPEED_X,s.World._minSpeed)}},_updateTracks:function(){this._removeTracks();960>this._currentTrack._getPos().x&&
this._generateTrackPatterns();this._findActiveTrack()},update:function(a){if(!0!=f.WorkinCloud.instance.getBool(i.ConstantsApp.BOOL_PAUSED))switch(a=Math.round(1E3*a)/1E3,this._state){case this._STATE_INITIALIZING:null!=this._poolManager&&this._poolManager.update(a);break;case this._STATE_GAMEPLAY:this._updateTracks();this._lastCameraPos=this._elementManager._getCamera()._getPos();var b=(this._activeTrack.getEndY()-this._activeTrack._getPos().y)*this._percentAcross;this._cameraPointTrackData=this._activeTrack._getPos().copy();
this._cameraPointTrackData.y+=b;this._lastCameraPos.y=(4*this._lastCameraPos.y+this._cameraPointTrackData.y-55)/5;this._elementManager._getCamera()._getPos().toPoint(this._lastCameraPos);this._timerCrystal-=a;0>this._timerCrystal&&(this._timerCrystal=0.2);this._pointsTimer-=a;0>this._pointsTimer&&(this._pointsTimer=1,f.WorkinCloud.instance.modifyInt(i.ConstantsApp.INT_SCORE,10),this._secondsPassed++,0==this._secondsPassed%30&&(this._difficulty++,this._difficulty=Math.min(this._difficulty,6)|0));this._elementManager.updateElements(a);
this._updatePlayer(a);this._updatePlayerRotation();this._collisionFistAndTrack();this._updatePickups(a);this._updateBackgrounds(a);this._manageFists(a);for(a=f.WorkinCloud.instance._getInput()._getMultiTouch().iterator();a.hasNext();)if(b=a.next(),!1==b._getConsumed())switch(b._getSwipe()){case b.SWIPE_UP:b._setConsumed(!0);break;case b.SWIPE_DOWN:b._setConsumed(!0);break;case b.SWIPE_LEFT:b._setConsumed(!0);break;case b.SWIPE_RIGHT:b._setConsumed(!0)}}},_setState:function(a){this._state=a},dispose:function(){this._elementManager.dispose();
this._elementManager=null;this._poolManager.dispose();this._timeline=this._poolManager=null;this._removeEventListeners();this._backgroundSky=this._currentTrack=this._activeTrack=this._tracks=this._player=this._spongs=null;for(var a=0,b=this._midGround.length;a<b;){var c=a++;this._midGround[c]=null}this._midGround=null;a=0;for(b=this._foreGround.length;a<b;)c=a++,this._foreGround[c]=null;a=0;for(b=this._pickups.length;a<b;)c=a++,this._pickups[c]=null;this._foreGround=this._enemies=this._pickups=null;
n.WMEventDispatcher.prototype.dispose.call(this)},start:function(){this._addEventListeners();this._setState(this._STATE_GAMEPLAY)},_initArrays:function(){this._tracks=[];this._pickups=[];this._enemies=[]},__class__:s.World});s.elements={};s.elements.Crystal=function(){};j["com.nick.spongebob.fiery_tracks.world.elements.Crystal"]=s.elements.Crystal;s.elements.Crystal.__name__="com,nick,spongebob,fiery_tracks,world,elements,Crystal".split(",");s.elements.Crystal.__super__=k.Element;s.elements.Crystal.prototype=
t(k.Element.prototype,{update:function(a){k.Element.prototype.update.call(this,a);this._pos.x-=this._speed*a;-100>this._pos.x&&this._setDoDelete(!0);this._render.rotation+=this._rot*a},__class__:s.elements.Crystal});s.elements.TestElement=function(a){k.Element.call(this,a);this._velocity.to(200+100*Math.random(),0);this._velocity.rotateTo(360*Math.random());this._rotation=100-200*Math.random()};j["com.nick.spongebob.fiery_tracks.world.elements.TestElement"]=s.elements.TestElement;s.elements.TestElement.__name__=
"com,nick,spongebob,fiery_tracks,world,elements,TestElement".split(",");s.elements.TestElement.__super__=k.Element;s.elements.TestElement.prototype=t(k.Element.prototype,{update:function(a){k.Element.prototype.update.call(this,a);this.updatePositionFromVelocity(a);if(0<this._velocity.x&&this._pos.x>i.ConstantsApp.STAGE_WIDTH-this._render.width/2||0>this._velocity.x&&this._pos.x<this._render.width/2)this._velocity.x*=-1;if(0<this._velocity.y&&this._pos.y>i.ConstantsApp.STAGE_HEIGHT-this._render.height/
2||0>this._velocity.y&&this._pos.y<this._render.height/2)this._velocity.y*=-1;this.rect.x=this._pos.x-this._render.width/2;this.rect.y=this._pos.y-this._render.height/2;this._render.rotation+=this._rotation*a},dispose:function(){this.rect=null;k.Element.prototype.dispose.call(this)},renew:function(a){k.Element.prototype.renew.call(this,a);this.rect=new J.Rectangle(this._render.x,this._render.y,this._render.width,this._render.height)},__class__:s.elements.TestElement});k.AnimatedElement=function(a){if(null!=
a.movie&&""!=a.movie&&(null==a.library||""==a.library)&&(null==a.asset||""==a.asset))a.asset=a.movie;this._animations=new G;this._queuedAnimations=[];this._lastFrame=-1;this._currentFrame=0;this._currentAnimation="";this._fps=24;this._animationStopped=!0;this._library="";this._loopComplete=!1;this._symbol="";this._workFrame=0;this._currentAnimDef=null;k.Element.call(this,a)};j["com.workinman.display.AnimatedElement"]=k.AnimatedElement;k.AnimatedElement.__name__=["com","workinman","display","AnimatedElement"];
k.AnimatedElement.__super__=k.Element;k.AnimatedElement.prototype=t(k.Element.prototype,{_onAnimationComplete:function(){},_setFrame:function(a){this._movie.set_position(Math.floor(a)/this._frames*this._duration)},_runAnimation:function(a){""!=this._currentAnimation&&!0==this._doLoop()&&!1==this._animationStopped&&(this._currentFrame=!1==this._currentAnimDef._getReverse()?this._currentFrame+this._fps*a:this._currentFrame-this._fps*a,!1==this._currentAnimDef._getReverse()?Math.floor(this._currentFrame)>
this._currentAnimDef._getEnd()&&(this._currentFrame=this._currentAnimDef._getStart()+(this._currentFrame-Math.floor(this._currentFrame)),this._loopComplete=!0):Math.ceil(this._currentFrame)<this._currentAnimDef._getStart()&&(this._currentFrame=this._currentAnimDef._getEnd()+(this._currentFrame-Math.ceil(this._currentFrame)),this._loopComplete=!0),!0==this._loopComplete&&(this._loopComplete=!1,this._currentLoop--,!1==this._doLoop()&&(this._animationStopped=!0,this._currentFrame=!1==this._currentAnimDef._getReverse()?
this._currentAnimDef._getEnd():this._currentAnimDef._getStart(),0<this._queuedAnimations.length?(this._doAnimate(this._queuedAnimations[0]._getName(),this._queuedAnimations[0]._getLoops(),this._queuedAnimations[0]._getForce()),this._queuedAnimations.splice(0,1)):this._onAnimationComplete())),this._workFrame=!1==this._currentAnimDef._getReverse()?Math.floor(this._currentFrame):Math.ceil(this._currentFrame),null!=this._movie&&this._workFrame!=this._lastFrame&&(this._setFrame(this._workFrame),this._lastFrame=
this._workFrame))},_doLoop:function(){return 0<this._currentLoop||this._flagLoop},update:function(a){k.Element.prototype.update.call(this,a);this._runAnimation(a)},clearQueue:function(){for(;0<this._queuedAnimations.length;)this._queuedAnimations.splice(0,1)},hasAnimation:function(a){return this._animations.exists(a)},stopAnimation:function(){this._animationStopped=!0},setLoop:function(a){this._currentLoop=a;this._flagLoop=0==a;return this},_doAnimate:function(a,b,c){null==c&&(c=!1);null==b&&(b=0);
this._currentAnimation==a&&!1==c||(null!=this._animations&&this._animations.exists(a)?(this._currentAnimDef=null,this._currentAnimDef=this._animations.get(a),this._currentFrame=!1==this._currentAnimDef._getReverse()?this._currentAnimDef._getStart():this._currentAnimDef._getEnd(),this._currentAnimation=a,this.setLoop(b),this._animationStopped=!1,this._setFrame(this._currentFrame)):f.WorkinCloud.instance.log("Animation not found: "+a))},animate:function(a,b,c){null==c&&(c=!1);null==b&&(b=0);this.clearQueue();
this._doAnimate(a,b,c);return this},addAnimation:function(a,b,c){this._animations.set(a,new k.AnimationDef(a,b-1,c-1));return this},setLibraryAndSymbol:function(a,b){this._library=a;this._symbol=b;this._texture.dispose();var c=f.WorkinCloud.instance._getAssets().getLibrary(this._library)._symbols.get(this._symbol);this._duration=c.duration;this._frames=c.frames;this._movie=c.createSprite();this._movie.set_paused(!0);this._texture=this._movie;this._textureEntity.add(this._texture);return this},_setAnimationFrameRelative:function(a){this._currentFrame=
this._currentAnimDef._getStart()+a;return this._getAnimationFrameRelative()},_getAnimationFrameRelative:function(){return this._currentFrame-this._currentAnimDef._getStart()|0},_setAnimationFrame:function(a){this._currentFrame=a;this._setFrame(this._currentFrame);this.stopAnimation();return this._currentFrame|0},_getAnimationFrame:function(){return this._currentFrame|0},_setAnimationRatio:function(a){a=Math.floor(a*(this._currentAnimDef._getEnd()-this._currentAnimDef._getStart())+this._currentAnimDef._getStart());
a!=this._currentFrame&&this._setAnimationFrame(a);return this._getAnimationRatio()},_getAnimationRatio:function(){return(this._currentFrame-this._currentAnimDef._getStart())/(this._currentAnimDef._getEnd()-this._currentAnimDef._getEnd())},_setFps:function(a){return this._fps=a},_getFps:function(){return this._fps},_getCurrentAnimation:function(){return this._currentAnimation},renew:function(a){k.Element.prototype.renew.call(this,a);a.library&&a.movie&&this.setLibraryAndSymbol(a.library,a.movie);a.fps&&
(this._fps=a.fps)},dispose:function(){this._queuedAnimations=this._currentAnimDef=this._animations=this._movie=null;k.Element.prototype.dispose.call(this)},__class__:k.AnimatedElement,__properties__:t(k.Element.prototype.__properties__,{set_animationFrame:"_setAnimationFrame",get_animationFrame:"_getAnimationFrame"})});s.elements.effects={};s.elements.effects.EffectBase=function(a){this._STATE_OUT=2;this._STATE_IDLE=1;this._STATE_IN=0;k.AnimatedElement.call(this,a);this._lifetime=-1;a.lifetime&&(this._lifetime=
a.lifetime);this._setState(this._STATE_IN)};j["com.nick.spongebob.fiery_tracks.world.elements.effects.EffectBase"]=s.elements.effects.EffectBase;s.elements.effects.EffectBase.__name__="com,nick,spongebob,fiery_tracks,world,elements,effects,EffectBase".split(",");s.elements.effects.EffectBase.__super__=k.AnimatedElement;s.elements.effects.EffectBase.prototype=t(k.AnimatedElement.prototype,{_onAnimationComplete:function(){switch(this._currentAnimation){case "in":this._setState(this._STATE_IDLE);break;
case "out":this._setDoDelete(!0)}},update:function(a){k.AnimatedElement.prototype.update.call(this,a);switch(this._state){case this._STATE_IDLE:-1<this._lifetime&&(this._lifetime-=a,0>=this._lifetime&&this._setState(this._STATE_OUT))}},_setState:function(a){this._state=a;switch(this._state){case this._STATE_IN:this.hasAnimation("in")?this.animate("in"):this._setState(this._STATE_IDLE);break;case this._STATE_IDLE:this.hasAnimation("idle")?this.animate("idle"):0>this._lifetime&&this._setState(this._STATE_OUT);
break;case this._STATE_OUT:this.hasAnimation("out")?this.animate("out"):this._setDoDelete(!0)}},__class__:s.elements.effects.EffectBase});s.elements.effects.PopupBase=function(a){null==a.lifetime&&(a.lifetime=2);this._behavior=null==a.behavior?s.elements.effects.PopupBase.BEHAVIOR_POPUP:a.behavior;null==a.font&&(a.font="");null==a.localized&&(a.localized=!0);null==a.delay&&(a.delay=0);a.layer=i.ConstantsApp.LAYER_FG;a.useCamera=!1;this._timerDelay=a.delay;s.elements.effects.EffectBase.call(this,a);
this._text=new k.TextLocalized(0,0,a.text,a.font,{origin:new h.WorkinPoint(0.5,0.5),center:!0,doLocalize:null==a.localized?!0:a.localized,useCamera:this._useCamera});this._addElement(this._text);this._textScaleFactor=this._text._getRenderable().scaleX;switch(this._behavior){case s.elements.effects.PopupBase.BEHAVIOR_POPUP:this._text._getRenderable().scaleX=this._text._getRenderable().scaleY=0;break;case s.elements.effects.PopupBase.BEHAVIOR_FLOAT:this._velocity.y=-70}};j["com.nick.spongebob.fiery_tracks.world.elements.effects.PopupBase"]=
s.elements.effects.PopupBase;s.elements.effects.PopupBase.__name__="com,nick,spongebob,fiery_tracks,world,elements,effects,PopupBase".split(",");s.elements.effects.PopupBase.__super__=s.elements.effects.EffectBase;s.elements.effects.PopupBase.prototype=t(s.elements.effects.EffectBase.prototype,{dispose:function(){s.elements.effects.EffectBase.prototype.dispose.call(this)},renderPosition:function(a){s.elements.effects.EffectBase.prototype.renderPosition.call(this,a)},update:function(a){if(0<this._timerDelay)this._timerDelay-=
a,s.elements.effects.EffectBase.prototype.update.call(this,a);else switch(this._tweener.update(a),s.elements.effects.EffectBase.prototype.update.call(this,a),this._state){case this._STATE_IN:this._behavior==s.elements.effects.PopupBase.BEHAVIOR_POPUP?(this._text._getRenderable().scaleX=this._text._getRenderable().scaleY=this._tweener._getCurrent().x*this._textScaleFactor,this._tweener._getBoolAllTweensComplete()&&this._setState(this._STATE_IDLE)):this._behavior==s.elements.effects.PopupBase.BEHAVIOR_FLOAT&&
(this._text._getRenderable().alpha=this._tweener._getCurrent().x);break;case this._STATE_IDLE:this._behavior==s.elements.effects.PopupBase.BEHAVIOR_FLOAT&&this.updatePositionFromVelocity(a);break;case this._STATE_OUT:this._behavior==s.elements.effects.PopupBase.BEHAVIOR_POPUP?this._text._getRenderable().scaleX=this._text._getRenderable().scaleY=this._tweener._getCurrent().x*this._textScaleFactor:this._behavior==s.elements.effects.PopupBase.BEHAVIOR_FLOAT&&(this._text._getRenderable().alpha=this._tweener._getCurrent().x),
this._tweener._getBoolAllTweensComplete()&&this._setDoDelete(!0)}},_setState:function(a){this._state=a;switch(this._state){case this._STATE_IN:this._behavior==s.elements.effects.PopupBase.BEHAVIOR_POPUP?(this._tweener.clearTweens(),this._tweener.setStart(0,0),this._tweener.addTween(new h.WorkinPoint(1,1),0.5,"bounceOut"),this._tweener.start()):this._behavior==s.elements.effects.PopupBase.BEHAVIOR_FLOAT&&this._setState(this._STATE_IDLE);break;case this._STATE_IDLE:this._tweener.clearTweens();break;
case this._STATE_OUT:this._behavior==s.elements.effects.PopupBase.BEHAVIOR_POPUP?(this._tweener.clearTweens(),this._tweener.setStart(1,1),this._tweener.addTween(new h.WorkinPoint(0,0),0.2,"easeIn"),this._tweener.start()):this._behavior==s.elements.effects.PopupBase.BEHAVIOR_FLOAT&&(this._tweener.clearTweens(),this._tweener.setStart(1,1),this._tweener.addTween(new h.WorkinPoint(0,0),0.5,"linear"),this._tweener.start())}},__class__:s.elements.effects.PopupBase});s.elements.fist={};s.elements.fist.FistBase=
function(a){this._STATE_EXIT=5;this._STATE_RECOVER=4;this._STATE_STRIKE=3;this._STATE_PREP=2;this._STATE_AIM=1;this._STATE_OFFSCREEN=0;a.library="tracks";a.movie="FieryFist";k.AnimatedElement.call(this,a);this._offScreenTimer=2;this._offScreenDelay=4;this._strikeDelay=1.5;this._aimDelay=3.5;this.readyToStrike=!1;this._renderOffset=new h.WorkinPoint(0,-46);this._relativePos=new h.WorkinPoint(a.x,a.y);this._camera=a.camera;this._initAnimation()};j["com.nick.spongebob.fiery_tracks.world.elements.fist.FistBase"]=
s.elements.fist.FistBase;s.elements.fist.FistBase.__name__="com,nick,spongebob,fiery_tracks,world,elements,fist,FistBase".split(",");s.elements.fist.FistBase.__super__=k.AnimatedElement;s.elements.fist.FistBase.prototype=t(k.AnimatedElement.prototype,{smashed:function(){this._state=this._STATE_RECOVER},_resetOffscreenTimer:function(){this._offScreenTimer=this._offScreenDelay+3*Math.random()},attack:function(){this._strikePos=i.ConstantsApp.STAGE_CENTER_X;this._aimTimer=this._aimDelay+Math.random();
this._state=this._STATE_AIM;this._aimSin=50*Math.random();this._tweener.clearTweens();this._tweener.setStartFromPoint(this._relativePos);this._tweener.addTween(new h.WorkinPoint(0,s.elements.fist.FistBase._PREP_HOVER_Y),0.8,"easeOut");this._tweener.start()},update:function(a){k.AnimatedElement.prototype.update.call(this,a);var b=this._camera._getPos().x-480,c=this._camera._getPos().y-280;if(this._state==this._STATE_OFFSCREEN)this._offScreenTimer-=a;else switch(this._relativePos.x=this._strikePos+
360*Math.sin(this._aimSin),this._state){case this._STATE_AIM:case this._STATE_PREP:this._tweener.update(a);this._relativePos.y=this._tweener._getCurrent().y;this._state==this._STATE_AIM?(this._aimSin+=s.elements.fist.FistBase._AIM_SIN_RATE*a,this._aimTimer-=a,0>this._aimTimer&&(this._state=this._STATE_PREP,this._strikeTimer=this._strikeDelay)):(this._strikeTimer-=a,0>this._strikeTimer&&(this.readyToStrike=!0,this._velocity.y=0));break;case this._STATE_STRIKE:this._velocity.y+=s.elements.fist.FistBase._GRAVITY*
a;this._relativePos.y+=this._velocity.y*a;break;case this._STATE_RECOVER:this._velocity.y=0;this._state=this._STATE_EXIT;break;case this._STATE_EXIT:this._velocity.y-=s.elements.fist.FistBase._GRAVITY*a,this._relativePos.y+=this._velocity.y*a,0>this._relativePos.y&&(this._setState(this._STATE_OFFSCREEN),this._resetOffscreenTimer())}this._pos=this._relativePos.addCopy(b,c)},_setState:function(a){this._state=a;switch(this._state){case this._STATE_OFFSCREEN:this._relativePos.y=-65;this.animate("idle");
break;case this._STATE_PREP:this.animate("idle");break;case this._STATE_STRIKE:this.readyToStrike=!1}},_initAnimation:function(){this._render.scaleX=this._render.scaleY=0.85;this.addAnimation("idle",1,12);this._setState(this._STATE_OFFSCREEN)},get_yvel:function(){return this._velocity.y},set_state:function(a){this._setState(a);return this._state},get_state:function(){return this._state},__class__:s.elements.fist.FistBase,__properties__:t(k.AnimatedElement.prototype.__properties__,{set_state:"set_state",
get_state:"get_state",get_fallingSpeed:"get_yvel"})});s.elements.pickups={};s.elements.pickups.PickupBase=function(a){k.Element.call(this,a)};j["com.nick.spongebob.fiery_tracks.world.elements.pickups.PickupBase"]=s.elements.pickups.PickupBase;s.elements.pickups.PickupBase.__name__="com,nick,spongebob,fiery_tracks,world,elements,pickups,PickupBase".split(",");s.elements.pickups.PickupBase.__super__=k.Element;s.elements.pickups.PickupBase.prototype=t(k.Element.prototype,{reset:function(){this._pos.x=
-1E3;this._pos.y=-1E3;this.set_Splice(!0)},update:function(a){k.Element.prototype.update.call(this,a);if(!this.get_Splice()){switch(this._type){case i.ConstantsApp.PICKUP_TYPE_COTTON_CANDY:this._bobSin+=a*this._bobRate;this._pos.y=this._nextPos.y-Math.sin(this._bobSin)*this._bobOffset;this._pos.x-=f.WorkinCloud.instance.getFloat(i.ConstantsApp.FLOAT_GAME_SPEED_X)*a;break;case i.ConstantsApp.PICKUP_TYPE_BALLOON:var b=this._camera._getPos().x-480,c=this._camera._getPos().y-280;this._relativePos.y-=
200*a;this._pos=this._relativePos.addCopy(b,c);-120>this._relativePos.y&&this.reset()}0>=this._pos.x+this.get_Width()/2&&this.reset()}},set_Splice:function(a){return this._flagSplice=a},get_Splice:function(){return this._flagSplice},get_Type:function(){return this._type},get_Width:function(){return this._width},get_Height:function(){return this._height},dispose:function(){k.Element.prototype.dispose.call(this);this._nextPos=null},renew:function(a){k.Element.prototype.renew.call(this,a);this._nextPos=
this._pos.copy();this._bobSin=0;this._bobRate=15;this._bobOffset=5;this._height=a.height;this._width=a.width;this._type=a.type;if(a.camera){this._camera=a.camera;var a=this._camera._getPos().x-480,b=this._camera._getPos().y-280;this._relativePos=this._pos.subtractCopy(a,b);null}this.set_Splice(!1)},__class__:s.elements.pickups.PickupBase,__properties__:t(k.Element.prototype.__properties__,{get_height:"get_Height",get_width:"get_Width",get_type:"get_Type",set_splice:"set_Splice",get_splice:"get_Splice"})});
s.elements.player={};s.elements.player.PlayerBase=function(a){this._MAXIMUM_MOVE_SPEED=330;this._MAXIMUM_ROTATION=50;this._MINIMUM_ROTATION=-30;this._GRAVITY=900;a.library="tracks";a.movie="AssetCart";k.AnimatedElement.call(this,a);this._rotationGoal=this._bounceCount=0;this._isBouncing=this._flagJump=!1;this._landTimer=this._jumpTimer=0;this._lastX=-1;this._height=100;this._width=109;this._setupAnimations()};j["com.nick.spongebob.fiery_tracks.world.elements.player.PlayerBase"]=s.elements.player.PlayerBase;
s.elements.player.PlayerBase.__name__="com,nick,spongebob,fiery_tracks,world,elements,player,PlayerBase".split(",");s.elements.player.PlayerBase.__super__=k.AnimatedElement;s.elements.player.PlayerBase.prototype=t(k.AnimatedElement.prototype,{fallDown:function(a){this._velocity.y>a||(this._velocity.y=a,this._jumpTimer=0.2)},bounce:function(a){f.WorkinCloud.instance._getSound().playSound("ding");if(this._isBouncing||this._flagJump)this._isBouncing=!1,this.cancelJump();else{this.animate("scare");var b=
Math.abs(this._pos.x-a._getPos().x)/Math.abs(a._getPos().x-a._getPos().x+a.get_width());this._pos.y=a._getPos().y+b*(a.getEndY()-a._getPos().y)-this.get_Height()/2;this._isBouncing=!0;this._jumpTimer=0.25;this._velocity.y=-100;this._render.rotation=this._rotationGoal=a._getAngle();null}},respawn:function(){this._velocity.y=0;this._isFallingViolentlyToTheirDeaths=!1;this._flagJump=!0;this._isBouncing=!1;this.animate("grumps")},updateMousePosition:function(a){this._lastX=a;this._currentTrackSpeed=this._lastX<
this._pos.x&&!this._flagJump?40:25},determineIdle:function(){400<f.WorkinCloud.instance.getFloat(i.ConstantsApp.FLOAT_GAME_SPEED_X)?this.animate("scare"):this.animate("idle")},cancelJump:function(){f.WorkinCloud.instance._getSound().playSound("ding");this._jumpState=2;this._hoverTimer=0;this._flagJump=!1;this._velocity.y=0;this.determineIdle()},doJump:function(a,b){null==a&&(a=!0);if(!this._flagJump){this._flagJump=!0;this.animate("fun");if(a){var c=25;if(null==b)c=0;else switch(b._getType()){case 1:c*=
-4;break;case 2:c*=-3;break;case 3:c*=-2;break;case 4:c*=-1;break;case 5:c*=4;break;case 6:c*=3;break;case 7:c*=2;break;case 8:c*=1;break;default:c=0}this._jumpState=0;this._hoverTimer=0.1;this._velocity.y=-500+c}else this.animate("die",1),this._jumpState=2,this._hoverTimer=0,this._velocity.y=200;this._rotationGoal=this._MINIMUM_ROTATION}},checkCollision:function(a){return a._getPos().x-a.get_Width()/2<=this._pos.x+this.get_Width()/2&&a._getPos().x+a.get_Width()/2>=this._pos.x-this.get_Width()/2&&
a._getPos().y+a.get_Height()/2>=this._pos.y-this.get_Height()/2&&a._getPos().y-a.get_Height()/2<=this._pos.y+this.get_Height()/2?!0:!1},update:function(a){k.AnimatedElement.prototype.update.call(this,a);-1!=this._lastX&&10<Math.abs(this._lastX-this._pos.x)&&(this._lastX>this._pos.x?this._pos.x+=this._MAXIMUM_MOVE_SPEED*a:this._lastX<this._pos.x&&(this._pos.x-=this._MAXIMUM_MOVE_SPEED*a));this._flagJump||this._isBouncing?(this._landTimer=0.1,this.updatePositionFromVelocity(a),this._velocity.y+=this._GRAVITY*
a,1450<this._velocity.y&&(this._velocity.y=1450),this._jumpTimer+=a,this._flagJump&&(this._rotationGoal=this._velocity.y/6,this._rotationGoal<this._MINIMUM_ROTATION&&(this._rotationGoal=this._MINIMUM_ROTATION),this._rotationGoal>this._MAXIMUM_ROTATION&&(this._rotationGoal=this._MAXIMUM_ROTATION))):(this.determineIdle(),0<this._landTimer&&(this._landTimer-=a),this._jumpTimer=0);this._render.rotation!=this._rotationGoal&&(this._render.rotation=(this._render.rotation+this._rotationGoal)/2);if(!this._flagJump||
0!=this._jumpState)this._pos.y+=this._velocity.y*a},get_Width:function(){return this._width},get_Height:function(){return this._height},set_isScrewed:function(a){return this._isFallingViolentlyToTheirDeaths=a},get_isScrewed:function(){return this._isFallingViolentlyToTheirDeaths},set_IsBouncing:function(a){return this._isBouncing=a},get_IsBouncing:function(){return this._isBouncing},get_IsJumping:function(){return this._flagJump},set_JumpTimer:function(a){return this._jumpTimer=a},get_JumpTimer:function(){return this._jumpTimer},
set_RotationGoal:function(a){return this._rotationGoal=a},get_RotationGoal:function(){return this._rotationGoal},dispose:function(){k.AnimatedElement.prototype.dispose.call(this)},_setupAnimations:function(){this._render.scaleX=this._render.scaleY=0.45;this._renderOffset=new h.WorkinPoint(0,52);this.addAnimation("idle",58,58);this.addAnimation("fun",9,9);this.addAnimation("scare",1,1);this.addAnimation("die",65,94);this.addAnimation("grumps",25,25);this.animate("idle")},__class__:s.elements.player.PlayerBase,
__properties__:t(k.AnimatedElement.prototype.__properties__,{set_rotationGoal:"set_RotationGoal",get_rotationGoal:"get_RotationGoal",set_jumpTimer:"set_JumpTimer",get_jumpTimer:"get_JumpTimer",get_isJumping:"get_IsJumping",set_isBouncing:"set_IsBouncing",get_isBouncing:"get_IsBouncing",set_isScrewed:"set_isScrewed",get_isScrewed:"get_isScrewed",get_height:"get_Height",get_width:"get_Width"})});s.elements.tracks={};s.elements.tracks.TrackBase=function(a){this._STATE_BROKEN=1;this._STATE_DEFAULT=0;
a.library="tracks";this._trackSpeed=15;k.AnimatedElement.call(this,a);this._type=a.type;this._endY=this._getPos().y;this._isJump=!1;this._width=75.65;this._height=130;this._initAngle();this._initAnimation()};j["com.nick.spongebob.fiery_tracks.world.elements.tracks.TrackBase"]=s.elements.tracks.TrackBase;s.elements.tracks.TrackBase.__name__="com,nick,spongebob,fiery_tracks,world,elements,tracks,TrackBase".split(",");s.elements.tracks.TrackBase.__super__=k.AnimatedElement;s.elements.tracks.TrackBase.prototype=
t(k.AnimatedElement.prototype,{smash:function(){this._setState(this._STATE_BROKEN)},update:function(a){k.AnimatedElement.prototype.update.call(this,a);this._pos.x-=f.WorkinCloud.instance.getFloat(i.ConstantsApp.FLOAT_GAME_SPEED_X)*a},_setState:function(a){this._state=a;switch(this._state){case this._STATE_DEFAULT:this.animate("default");break;case this._STATE_BROKEN:f.WorkinCloud.instance._getSound().playSound("crash"),this._isJump=!0,this.animate("broken")}},_initAnimation:function(){this.addAnimation("default",
1,1);this.addAnimation("broken",2,2);this._setState(this._STATE_DEFAULT)},_initAngle:function(){switch(this._type){case 0:this._angle=0;break;case 1:this._angle=-60;break;case 2:this._angle=-45;break;case 3:this._angle=-30;break;case 4:this._angle=-12;break;case 5:this._angle=60;break;case 6:this._angle=45;break;case 7:this._angle=30;break;case 8:this._angle=12;break;default:this._angle=0}},dispose:function(){k.AnimatedElement.prototype.dispose.call(this)},get_height:function(){return this._height},
get_width:function(){return this._width},_setIsJump:function(a){return this._isJump=a},_getIsJump:function(){return this._isJump},_setTrackSpeed:function(a){return this._trackSpeed=a},_getTrackSpeed:function(){return this._trackSpeed},setEndY:function(a){return this._endY=a},getEndY:function(){return this._endY},_setType:function(a){return this._type=a},_getType:function(){return this._type},_setAngle:function(a){return this._angle=a},_getAngle:function(){return this._angle},__class__:s.elements.tracks.TrackBase,
__properties__:t(k.AnimatedElement.prototype.__properties__,{set_angle:"_setAngle",get_angle:"_getAngle",set_type:"_setType",get_type:"_getType",set_endY:"setEndY",get_endY:"getEndY",set_isJump:"_setIsJump",get_isJump:"_getIsJump",get_width:"get_width"})});z=void 0;O=void 0;o=void 0;e=void 0;d=void 0;J=void 0;m=void 0;P=void 0;v=void 0;B=void 0;H=void 0;K=void 0;F=void 0;y=void 0;y=void 0;aa=void 0;y=void 0;y=void 0;m={Disposable:function(){}};j["flambe.util.Disposable"]=m.Disposable;m.Disposable.__name__=
["flambe","util","Disposable"];m.Disposable.prototype={__class__:m.Disposable};P=function(){};j["flambe.Component"]=P;P.__name__=["flambe","Component"];P.__interfaces__=[m.Disposable];P.prototype={_internal_init:function(a,b){this.owner=a;this.next=b},get_name:function(){return null},dispose:function(){null!=this.owner&&this.owner.remove(this)},onUpdate:function(){},onRemoved:function(){},onAdded:function(){},__class__:P,__properties__:{get_name:"get_name"}};$={ComponentUpdater:function(){this._paused=
!1}};j["com.workinman.components.ComponentUpdater"]=$.ComponentUpdater;$.ComponentUpdater.__name__=["com","workinman","components","ComponentUpdater"];$.ComponentUpdater.__super__=P;$.ComponentUpdater.prototype=t(P.prototype,{setPaused:function(a){return this._paused=a},getPaused:function(){return this._paused},onUpdate:function(a){this._paused||f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEventUpdate(a))},get_name:function(){return"ComponentUpdater_3"},__class__:$.ComponentUpdater});
C={ConstantsCloud:function(){}};j["com.workinman.data.ConstantsCloud"]=C.ConstantsCloud;C.ConstantsCloud.__name__=["com","workinman","data","ConstantsCloud"];C.ConstantsCloud.getUniqueId=function(){return r.string(C.ConstantsCloud._uniqueId++)};C.ConstantsCloud.getIsAndroid=function(){return 0<=x.window.navigator.userAgent.indexOf("Linux; U; Android 4")};k.QueuedAnimation=function(){};j["com.workinman.display.QueuedAnimation"]=k.QueuedAnimation;k.QueuedAnimation.__name__=["com","workinman","display",
"QueuedAnimation"];k.QueuedAnimation.prototype={_getForce:function(){return this._force},_getLoops:function(){return this._loops},_getName:function(){return this._name},__class__:k.QueuedAnimation,__properties__:{get_name:"_getName",get_loops:"_getLoops",get_force:"_getForce"}};k.AnimationDef=function(a,b,c){this._id=a;this._startFrame=b;this._endFrame=c;this._playReverse=!1;b>c&&(this._playReverse=!0,this._startFrame=c,this._endFrame=b)};j["com.workinman.display.AnimationDef"]=k.AnimationDef;k.AnimationDef.__name__=
["com","workinman","display","AnimationDef"];k.AnimationDef.prototype={_getId:function(){return this._id},_getReverse:function(){return this._playReverse},_getEnd:function(){return this._endFrame},_getStart:function(){return this._startFrame},__class__:k.AnimationDef,__properties__:{get_start:"_getStart",get_end:"_getEnd",get_reverse:"_getReverse"}};k.ElementManager=function(a,b,c){this._timeline=a;this._layers=new G;this._elements=[];this._camera=new h.WorkinCamera(b,c);this._zSortLayers=new G};
j["com.workinman.display.ElementManager"]=k.ElementManager;k.ElementManager.__name__=["com","workinman","display","ElementManager"];k.ElementManager.prototype={renderElements:function(){for(var a=0,b=this._elements;a<b.length;){var c=b[a];++a;c.renderPosition(this._camera)}},updateElements:function(a){for(this._i=this._elements.length;0<this._i;)this._i--,this._elements[this._i].update(a),this._elements[this._i]._getDoDelete()&&this.removeElementAtIndex(this._i)},removeElementAtIndex:function(a){this._elements[a]._getEntity().parent.removeChild(this._elements[a]._getEntity());
this._elements[a]._setDoDelete(!0);this._elements[a].dispose();this._elements.splice(a,1)},addElement:function(a){if(!1==this._layers.exists(a._getLayer()))return f.WorkinCloud.instance.log("[ElementManager](addElement) Trying to add element to non-existant layer '"+a._getLayer()+"'!"),a;for(this._i=0;this._i<this._elements.length;){if(this._elements[this._i]._getUniqueId()==a._getUniqueId())return this._layers.get(a._getLayer()).addChild(a._getEntity()),a;this._i++}this._elements.push(a);this._layers.get(a._getLayer()).addChild(a._getEntity());
this._zSortLayers.exists(a._getLayer())&&this._zSortLayers.get(a._getLayer()).push(a);return a},addLayer:function(a,b){null==b&&(b=!1);if(this._layers.exists(a))this._timeline.removeChild(this._layers.get(a)),this._timeline.addChild(this._layers.get(a));else{var c=new O;this._timeline.addChild(c);this._layers.set(a,c);b&&this._zSortLayers.set(a,[])}},_getElements:function(){return this._elements},_getCamera:function(){return this._camera},dispose:function(){for(;0<this._elements.length;)this.removeElementAtIndex(this._elements.length-
1);this._elements=null;this._camera.dispose();this._camera=null;for(var a=this._layers.iterator();a.hasNext();)a.next().dispose();this._timeline=this._layers=null},__class__:k.ElementManager,__properties__:{get_camera:"_getCamera"}};k.PoolManager=function(){this._pools=new G;this._flagAllPoolsFull=!1;this._numPools=0};j["com.workinman.display.PoolManager"]=k.PoolManager;k.PoolManager.__name__=["com","workinman","display","PoolManager"];k.PoolManager.prototype={createElement:function(a,b){if(!1==this._pools.exists(a))return f.WorkinCloud.instance.log("[PoolManager](createElement) Can't create element from pool '"+
a+"' it doesn't exist!"),null;var c=this._pools.get(a).getElement();c.renew(b);return c},addPool:function(a,b,c,g){null==g&&(g=!1);null==c&&(c=8);this._pools.exists(a)?this._pools.get(a).changeCount(c,g):(this._flagAllPoolsFull=!1,b=new k.PoolData(b,c,g,this._numPools),this._pools.set(a,b),this._numPools++)},update:function(a){if(!this._flagAllPoolsFull){this._flagAllPoolsFull=!0;for(var b=this._pools.iterator();b.hasNext();){var c=b.next();c._getIsPoolFull()||(this._flagAllPoolsFull=!1,c.update(a))}this._flagAllPoolsFull&&
f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEvent(k.PoolManager.ALL_POOLS_FULL))}},dispose:function(){for(var a=this._pools.iterator();a.hasNext();)a.next().dispose();this._pools=null},__class__:k.PoolManager};k.PoolData=function(a,b,c,g){null==g&&(g=0);null==c&&(c=!1);this._AVERAGE_DELAY_BETWEEN_CREATE_ELEMENTS=0.8;this._MAX_ELEMENTS_TO_CREATE_AT_ONCE=8;this._elements=[];this._class=a;this._poolProgress=0;this._flagPoolFull=!0;this._timerUpdateCreateElements=0;this._timerOffset=
g;this.changeCount(b,c)};j["com.workinman.display.PoolData"]=k.PoolData;k.PoolData.__name__=["com","workinman","display","PoolData"];k.PoolData.prototype={dispose:function(){for(var a=0;a<this._elements.length;)this._elements[a]._setIsPooled(!1),this._elements[a].dispose(),a++;this._class=this._elements=null},_addPoolElements:function(a){null==a&&(a=!0);for(var b=0;this._poolProgress<this._poolElementsToAdd&&(!a||b<this._MAX_ELEMENTS_TO_CREATE_AT_ONCE);)b++,this._poolProgress++,this._elements.push(N.createInstance(this._class,
[{pooled:!0}]));this._poolProgress<this._poolElementsToAdd?this._timerUpdateCreateElements=this._AVERAGE_DELAY_BETWEEN_CREATE_ELEMENTS+0.2*this._timerOffset:(this._timerUpdateCreateElements=0,this._flagPoolFull=!0)},update:function(a){this._flagPoolFull||(this._timerUpdateCreateElements-=a,0>=this._timerUpdateCreateElements&&this._addPoolElements())},changeCount:function(a,b){null==b&&(b=!0);a!=this._elements.length&&(this._poolElementsToAdd=this._poolProgress=0,this._timerUpdateCreateElements=this._AVERAGE_DELAY_BETWEEN_CREATE_ELEMENTS+
0.2*this._timerOffset,this._elements.length<a?(this._flagPoolFull=!1,this._poolElementsToAdd=a-this._elements.length,b&&this._addPoolElements(!1)):this._flagPoolFull=!0)},getElement:function(a){null==a&&(a=!1);for(var b=0;b<this._elements.length;){if(!this._elements[b]._getIsActive())return a=this._elements[b],this._elements.splice(b,1),this._elements.push(a),a;b++}if(a)return this.changeCount(this._elements.length+1,!0),this._elements[this._elements.length-1];a=this._elements[0];this._elements.splice(0,
1);a.release();this._elements.push(a);return a},_getIsPoolFull:function(){return this._flagPoolFull},__class__:k.PoolData,__properties__:{get_isPoolFull:"_getIsPoolFull"}};k.Renderable=function(a,b){null==b&&(b=1);null==a&&(a=1);this.rotation=this.y=this.x=0;this.scaleY=this.scaleX=1;this.width=a;this.height=b;this.alpha=1;this.visible=!0};j["com.workinman.display.Renderable"]=k.Renderable;k.Renderable.__name__=["com","workinman","display","Renderable"];k.Renderable.prototype={__class__:k.Renderable};
k.TextBase=function(a,b,c,g,d){null==g&&(g="");null==d&&(d={});d.x=a;d.y=b;k.Element.call(this,d);""==g&&(g=C.ConstantsCloud.FONT_DEFAULT);this._textString=c;this._fontName=g;this._spacing=d.spacing?d.spacing:0;this._width=d.width?d.width:Math.POSITIVE_INFINITY;this._flagCenter=d.center?d.center:!1;this._textDisplay=[];this._textDisplay.push(new o.TextSprite(f.WorkinCloud.instance._getAssets().getFont(this._fontName),""));this.swapTexture(this._textDisplay[0]);this._textDisplay[0].set_pointerEnabled(!1);
this.renderPositionWithoutCamera()};j["com.workinman.display.TextBase"]=k.TextBase;k.TextBase.__name__=["com","workinman","display","TextBase"];k.TextBase.__super__=k.Element;k.TextBase.prototype=t(k.Element.prototype,{_cleanUp:function(){for(;1<this._textDisplay.length;)this._textDisplay.pop().dispose()},dispose:function(){this._cleanUp();this._textDisplay=null;k.Element.prototype.dispose.call(this)},_renderTextToDisplay:function(){this._textDisplay[0].set_text(this._textString);1==this._textDisplay.length&&
(this._render.width=this._textDisplay[0].getNaturalWidth(),this._render.height=this._textDisplay[0].getNaturalHeight());this.setOrigin(this._renderOrigin)},_renderFontToDisplay:function(){for(var a=0,b=this._textDisplay;a<b.length;){var c=b[a];++a;c.set_font(f.WorkinCloud.instance._getAssets().getFont(this._fontName))}},_setText:function(a){this._textString=a;this._renderTextToDisplay();return this._textString},_getText:function(){return this._textString},_setFont:function(a){if(""==a)return"";this._fontName=
a;this._renderFontToDisplay();return this._fontName},_getFont:function(){return this._fontName},_updateTextDisplay:function(a,b){null==b&&(b=1);this._cleanUp();if(""==a)this._textDisplay[0].set_text(a);else{for(var a=S.replace(a,"<br>","\\r\\n"),c=[],g=this._textDisplay[0]._font.getGlyphs(a),d=0,e=0,h=0;e<g.length;){var i=g[e];e++;if(e==g.length)d+=i.width*b;else if(d+=i.xAdvance*b+i.getKerning(g[e].charCode)*b,e<g.length-1&&(92==g[e-1].charCode||47==g[e-1].charCode)&&114==g[e].charCode&&(92==g[e+
1].charCode||47==g[e+1].charCode)&&110==g[e+2].charCode)d=e-1,c.push(a.substring(h,d)),h=d+4,d=0;d>=this._width/this._render.scaleX&&(i=!0,d=a.lastIndexOf(" ",e),-1==d?(i=!1,d=e-1):d++,c.push(a.substring(h,d)+(i?"":"-")),h=d,d=0);e==g.length&&c.push(a.substring(h,e))}this._textDisplay[0].set_text(c.shift());this._texture.x.set__(-(this._renderOrigin.x*this._textDisplay[0].getNaturalWidth()));this._texture.y.set__(-(this._renderOrigin.y*this._textDisplay[0].getNaturalHeight()));for(g=0;g<c.length;)e=
c[g],++g,this._textDisplay.push(new o.TextSprite(f.WorkinCloud.instance._getAssets().getFont(this._fontName),e)),this.addTextDisplay(this._textDisplay[this._textDisplay.length-1])}},addTextDisplay:function(a){this._flagCenter&&a.x.set__(this._renderOrigin.x*(this._texture.getNaturalWidth()-a.getNaturalWidth()));a.y.set__(this._render.height+this._spacing);this._render.height+=a.getNaturalHeight()+this._spacing;this._render.width=Math.max(this._render.width,a.getNaturalWidth());this._textureEntity.addChild((new O).add(a))},
_getTextDisplay:function(){return this._textDisplay},__class__:k.TextBase,__properties__:t(k.Element.prototype.__properties__,{get_textDisplay:"_getTextDisplay",set_font:"_setFont",get_font:"_getFont",set_text:"_setText",get_text:"_getText"})});k.TextInput=function(){};j["com.workinman.display.TextInput"]=k.TextInput;k.TextInput.__name__=["com","workinman","display","TextInput"];k.TextInput.__super__=k.TextBase;k.TextInput.prototype=t(k.TextBase.prototype,{dispose:function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(C.ConstantsCloud.EVENT_INPUT_ARBITRARY_KEY,
w(this,this._onEventInputArbitraryKey));k.TextBase.prototype.dispose.call(this)},setOrigin:function(a){this._renderOrigin.toPoint(a);this._texture.x.set__(-(this._renderOrigin.x*this._render.width));this._texture.y.set__(-(this._renderOrigin.y*this._render.height))},addCharacter:function(a){this._textString+=a;this._updateTextDisplay(this._textString)},backspace:function(){this._textString=A.substr(this._textString,0,this._textString.length-1);this._updateTextDisplay(this._textString)},space:function(){this.addCharacter(" ")},
_onEventInputArbitraryKey:function(a){"backspace"==a._getData().key.toString().toLowerCase()?this.backspace():"space"==a._getData().key.toString().toLowerCase()?this.space():0==a._getData().key.toString().toLowerCase().indexOf("number")?this.addCharacter(a._getData().key.toString().charAt(6)):"enter"==a._getData().key.toString().toLowerCase()?f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEventData(i.ConstantsApp.EVENT_INPUT_FIELD_ENTER,{string:this._textString})):1==a._getData().key.toString().length&&
this.addCharacter(a._getData().key.toString())},__class__:k.TextInput});k.TextLocalized=function(a,b,c,g,d){null==g&&(g="");k.TextBase.call(this,a,b,c,g,d);this._flagLocalize=null!=d&&!1==d.doLocalize?!1:!0;this._renderTextToDisplay()};j["com.workinman.display.TextLocalized"]=k.TextLocalized;k.TextLocalized.__name__=["com","workinman","display","TextLocalized"];k.TextLocalized.__super__=k.TextBase;k.TextLocalized.prototype=t(k.TextBase.prototype,{setOrigin:function(a){this._renderOrigin.toPoint(a);
this._texture.x.set__(-(this._renderOrigin.x*this._render.width));this._texture.y.set__(-(this._renderOrigin.y*this._render.height))},_renderTextToDisplay:function(){if(this._flagLocalize){var a=f.WorkinCloud.instance._getLocalize().getData(this._textString);this._renderOffset.x=a._getOffsetX();this._renderOffset.y=a._getOffsetY();this._render.scaleX=a._getScale();this._render.scaleY=a._getScale();a._getFontName()!=this._fontName&&this._setFont(a._getFontName());this._updateTextDisplay(f.WorkinCloud.instance._getLocalize().getData(this._textString)._getString());
1==this._textDisplay.length&&(this._render.width=this._textDisplay[0].getNaturalWidth(),this._render.height=this._textDisplay[0].getNaturalHeight());this._flagCenter||this.setOrigin(this._renderOrigin);this.renderPositionWithoutCamera()}else k.TextBase.prototype._renderTextToDisplay.call(this)},__class__:k.TextLocalized});n.WMEvent=function(a){this._eventId=a};j["com.workinman.events.WMEvent"]=n.WMEvent;n.WMEvent.__name__=["com","workinman","events","WMEvent"];n.WMEvent.prototype={getEventId:function(){return this._eventId},
__class__:n.WMEvent,__properties__:{get_eventId:"getEventId"}};n.WMEventData=function(a,b){n.WMEvent.call(this,a);this._data=b};j["com.workinman.events.WMEventData"]=n.WMEventData;n.WMEventData.__name__=["com","workinman","events","WMEventData"];n.WMEventData.__super__=n.WMEvent;n.WMEventData.prototype=t(n.WMEvent.prototype,{_getData:function(){return this._data},__class__:n.WMEventData,__properties__:t(n.WMEvent.prototype.__properties__,{get_data:"_getData"})});n._WMEventDispatcher={};n._WMEventDispatcher.WMEventTracker=
function(){this._signalConnection=[];this._signal=new m.Signal1};j["com.workinman.events._WMEventDispatcher.WMEventTracker"]=n._WMEventDispatcher.WMEventTracker;n._WMEventDispatcher.WMEventTracker.__name__=["com","workinman","events","_WMEventDispatcher","WMEventTracker"];n._WMEventDispatcher.WMEventTracker.prototype={dispose:function(){this._signal=null;for(var a=0,b=this._signalConnection;a<b.length;){var c=b[a];++a;c.dispose()}this._signalConnection=null},isEmtpy:function(){return null==this._signal._head},
dispatchEvent:function(a){this._signal.emit1(a)},removeEventListener:function(a){for(var b=this._signalConnection.length;0<b;)b--,L.compareMethods(this._signalConnection[b]._getListener(),a)&&(this._signalConnection[b].dispose(),this._signalConnection.splice(b,1))},addEventListener:function(a){this._signalConnection.push(new n._WMEventDispatcher.SignalTracker(a,this._signal.connect(a)))},__class__:n._WMEventDispatcher.WMEventTracker};n._WMEventDispatcher.SignalTracker=function(a,b){this._function=
a;this._connection=b};j["com.workinman.events._WMEventDispatcher.SignalTracker"]=n._WMEventDispatcher.SignalTracker;n._WMEventDispatcher.SignalTracker.__name__=["com","workinman","events","_WMEventDispatcher","SignalTracker"];n._WMEventDispatcher.SignalTracker.prototype={_getListener:function(){return this._function},dispose:function(){this._function=null;this._connection.dispose();this._connection=null},__class__:n._WMEventDispatcher.SignalTracker,__properties__:{get_listener:"_getListener"}};n.WMEventFlow=
function(a,b){null==b&&(b=!1);this.flowId=a;this.targetScreen=b;n.WMEvent.call(this,n.WMEventFlow.EVENT_FLOW)};j["com.workinman.events.WMEventFlow"]=n.WMEventFlow;n.WMEventFlow.__name__=["com","workinman","events","WMEventFlow"];n.WMEventFlow.__super__=n.WMEvent;n.WMEventFlow.prototype=t(n.WMEvent.prototype,{__class__:n.WMEventFlow});n.WMEventInput=function(a,b,c,g,d){null==d&&(d=0);n.WMEvent.call(this,n.WMEventInput.EVENT_INPUT);this.phase=a;this.input=b;this.x=c;this.y=g;this.swipe=d};j["com.workinman.events.WMEventInput"]=
n.WMEventInput;n.WMEventInput.__name__=["com","workinman","events","WMEventInput"];n.WMEventInput.__super__=n.WMEvent;n.WMEventInput.prototype=t(n.WMEvent.prototype,{__class__:n.WMEventInput});n.WMEventInterfaceChange=function(a,b,c){null==b&&(b="");this.flowId=a;this.screenId=b;null==c&&(c=new G);this.customData=c;n.WMEvent.call(this,n.WMEventInterfaceChange.EVENT_INTERFACE_OUTPUT)};j["com.workinman.events.WMEventInterfaceChange"]=n.WMEventInterfaceChange;n.WMEventInterfaceChange.__name__=["com",
"workinman","events","WMEventInterfaceChange"];n.WMEventInterfaceChange.__super__=n.WMEvent;n.WMEventInterfaceChange.prototype=t(n.WMEvent.prototype,{__class__:n.WMEventInterfaceChange});n.WMEventScreenOut=function(a,b){this.flowId=a;this.screenId=b;n.WMEvent.call(this,n.WMEventScreenOut.EVENT_SCREEN_OUTPUT)};j["com.workinman.events.WMEventScreenOut"]=n.WMEventScreenOut;n.WMEventScreenOut.__name__=["com","workinman","events","WMEventScreenOut"];n.WMEventScreenOut.__super__=n.WMEvent;n.WMEventScreenOut.prototype=
t(n.WMEvent.prototype,{__class__:n.WMEventScreenOut});n.WMEventUpdate=function(a){n.WMEvent.call(this,n.WMEventUpdate.EVENT_UPDATE);this._dt=a};j["com.workinman.events.WMEventUpdate"]=n.WMEventUpdate;n.WMEventUpdate.__name__=["com","workinman","events","WMEventUpdate"];n.WMEventUpdate.__super__=n.WMEvent;n.WMEventUpdate.prototype=t(n.WMEvent.prototype,{getDt:function(){return this._dt},__class__:n.WMEventUpdate,__properties__:t(n.WMEvent.prototype.__properties__,{get_dt:"getDt"})});h={InterceptResult:function(){}};
j["com.workinman.math.InterceptResult"]=h.InterceptResult;h.InterceptResult.__name__=["com","workinman","math","InterceptResult"];h.InterceptResult.prototype={_setLine2:function(a){return this._line2=a},_getLine2:function(){return this._line2},_setLine1:function(a){return this._line1=a},_getLine1:function(){return this._line1},_setResult:function(a){return this._result=a},_getResult:function(){return this._result},_setSuccess:function(a){return this._success=a},_getSuccess:function(){return this._success},
__class__:h.InterceptResult};h.WMRectangle=function(a,b,c,g){null==g&&(g=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this._x=a;this._y=b;this._width=c;this._height=g;this._workLine=null};j["com.workinman.math.WMRectangle"]=h.WMRectangle;h.WMRectangle.__name__=["com","workinman","math","WMRectangle"];h.WMRectangle.prototype={toXY:function(a,b){this._setX(a);this._setY(b)},contains:function(a,b){return a<this._getX()||a>this._getRight()||b>this._getBottom()||b<this._getY()?!1:!0},_setCenterY:function(a){this._y=
a-this._height/2;return this._getCenterY()},_getCenterY:function(){return this._y+this._height/2},_setCenterX:function(a){this._x=a-this._width/2;return this._getCenterX()},_getCenterX:function(){return this._x+this._width/2},_setRight:function(a){this._x=a-this._width;return this._getRight()},_getRight:function(){return this._x+this._width},_setBottom:function(a){this._y=a-this._height;return this._getBottom()},_getBottom:function(){return this._y+this._height},_setHeight:function(a){return this._height=
a},_getHeight:function(){return this._height},_setWidth:function(a){return this._width=a},_getWidth:function(){return this._width},_setY:function(a){return this._y=a},_getY:function(){return this._y},_setX:function(a){return this._x=a},_getX:function(){return this._x},dispose:function(){this._workLine=null},__class__:h.WMRectangle,__properties__:{set_x:"_setX",get_x:"_getX",set_y:"_setY",get_y:"_getY",set_top:"_setY",get_top:"_getY",set_left:"_setX",get_left:"_getX",set_bottom:"_setBottom",get_bottom:"_getBottom",
set_right:"_setRight",get_right:"_getRight"}};h.WorkinCamera=function(a,b){this._screenCenterX=a;this._screenCenterY=b;this._pos=new h.WorkinPoint(a,b)};j["com.workinman.math.WorkinCamera"]=h.WorkinCamera;h.WorkinCamera.__name__=["com","workinman","math","WorkinCamera"];h.WorkinCamera.prototype={_getScreenCenterY:function(){return this._screenCenterY},_getScreenCenterX:function(){return this._screenCenterX},_getPos:function(){return this._pos},dispose:function(){this._pos=null},__class__:h.WorkinCamera,
__properties__:{get_pos:"_getPos",get_screenCenterX:"_getScreenCenterX",get_screenCenterY:"_getScreenCenterY"}};h.WorkinLine=function(a,b){this._p0=null==a?new h.WorkinPoint:a.copy();this._p1=null==b?new h.WorkinPoint:b.copy();this._calcProperties()};j["com.workinman.math.WorkinLine"]=h.WorkinLine;h.WorkinLine.__name__=["com","workinman","math","WorkinLine"];h.WorkinLine.prototype={_calcProperties:function(){this._length=Math.round(1E3*Math.sqrt((this._p0.x-this._p1.x)*(this._p0.x-this._p1.x)+(this._p0.y-
this._p1.y)*(this._p0.y-this._p1.y)))/1E3;this._vector=new h.WorkinPoint(this._getP1().x-this._getP0().x,this._getP1().y-this._getP0().y);this._slope=this._vector.y/this._vector.x;0==this._getVector().x&&(this._slope=1E5);this._yIntercept=this._getP0().y-this._slope*this._getP0().x;this._parametricDenom=new h.WorkinPoint(this._getP1().x-this._getP0().x,this._getP1().y-this._getP0().y);this._normal=this._vector.pseudoCross();this._normal.normalize()},endToPoint:function(a){this._p1.toPoint(a);this._calcProperties()},
originToPoint:function(a){this._p0.toPoint(a);this._calcProperties()},to:function(a,b){this._p0.toPoint(a);this._p1.toPoint(b);this._calcProperties()},copy:function(){return new h.WorkinLine(this._p0,this._p1)},_setLength:function(a){if(0==this._getLength())return this._length;this._p1=new h.WorkinPoint(this._p0.x+this._vector.x*(a/this._getLength()),this._p0.y+this._vector.y*(a/this._getLength()));this._calcProperties();return this._length},_getLength:function(){return this._length},_getParametricDenom:function(){return this._parametricDenom},
_getCenterY:function(){return this._p0.y+this._vector.y/2},_getCenterX:function(){return this._p0.x+this._vector.x/2},_getCenter:function(){return new h.WorkinPoint(this._p0.x+this._vector.x/2,this._p0.y+this._vector.y/2)},_getVector:function(){return this._vector},_getNormal:function(){return this._normal},_getYIntercept:function(){return this._yIntercept},_getSlope:function(){return this._slope},_getP1:function(){return this._p1},_getP0:function(){return this._p0},dispose:function(){this._parametricDenom=
this._vector=this._normal=this._p1=this._p0=null},__class__:h.WorkinLine,__properties__:{get_p0:"_getP0",get_p1:"_getP1",get_vector:"_getVector",set_length:"_setLength",get_length:"_getLength"}};h.WorkinMath=function(){};j["com.workinman.math.WorkinMath"]=h.WorkinMath;h.WorkinMath.__name__=["com","workinman","math","WorkinMath"];h.WorkinMath.diffBetweenPoints=function(a,b){return new h.WorkinPoint(b.x-a.x,b.y-a.y)};h.WorkinPoint=function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=
Math.round(1E3*a)/1E3;this.y=Math.round(1E3*b)/1E3;this.z=Math.round(1E3*c)/1E3;this.calculateLength()};j["com.workinman.math.WorkinPoint"]=h.WorkinPoint;h.WorkinPoint.__name__=["com","workinman","math","WorkinPoint"];h.WorkinPoint.prototype={_getNormalizedMagnitude:function(){var a=this.normalizeCopy();return Math.sqrt(a.x*a.x+a.y*a.y)},rotateTo:function(a){this.rotate(a-this._getAngle())},rotate:function(a){var a=a*(Math.PI/180),b=this.x*Math.cos(a)-this.y*Math.sin(a),a=this.y*Math.cos(a)+this.x*
Math.sin(a);this.x=b;this.y=a},calculateLength:function(){this._length=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},pseudoCross:function(){return new h.WorkinPoint(this.y,-this.x,this.z)},normalizeCopy:function(){return 0==this._length?new h.WorkinPoint(0,0,0):new h.WorkinPoint(this.x/this._length,this.y/this._length,this.z/this._length)},normalize:function(){0!=this._length&&(this.x/=this._length,this.y/=this._length,this.z/=this._length,this.calculateLength())},_setLength:function(a){if(0==
this._length||0>=a)return this.to(0,0),this._length;this.multiply(a/this._length);return this._length},_getLength:function(){return this._length},copy:function(){return new h.WorkinPoint(this.x,this.y,this.z)},multiply:function(a){this.x*=a;this.y*=a;this.z*=a;this.clean();this.calculateLength()},subtractCopy:function(a,b,c){null==c&&(c=0);return new h.WorkinPoint(this.x-a,this.y-b,this.z-c)},subtractPoint:function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;this.calculateLength()},addCopy:function(a,
b,c){null==c&&(c=0);return new h.WorkinPoint(this.x+a,this.y+b,this.z+c)},toPoint:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.calculateLength()},to:function(a,b,c){null==c&&(c=0);this.x=a;this.y=b;this.z=c;this.calculateLength()},clean:function(){this.x=Math.round(1E3*this.x)/1E3;this.y=Math.round(1E3*this.y)/1E3;this.z=Math.round(1E3*this.z)/1E3},_getAngle:function(){return 180*Math.atan2(this.y,this.x)/Math.PI},__class__:h.WorkinPoint,__properties__:{get_angle:"_getAngle"}};h.tween={};h.tween.PennerEasing=
function(){};j["com.workinman.math.tween.PennerEasing"]=h.tween.PennerEasing;h.tween.PennerEasing.__name__=["com","workinman","math","tween","PennerEasing"];h.tween.PennerEasing.easeInQuad=function(a,b,c,g){return c*(a/=g)*a+b};h.tween.PennerEasing.easeOutQuad=function(a,b,c,g){return-c*(a/=g)*(a-2)+b};h.tween.PennerEasing.easeInOutQuad=function(a,b,c,g){return 1>(a/=g/2)?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b};h.tween.PennerEasing.easeInExpo=function(a,b,c,g){return 0==a?b:c*Math.pow(2,10*(a/g-1))+b};h.tween.PennerEasing.easeOutExpo=
function(a,b,c,g){return a==g?b+c:c*(-Math.pow(2,-10*a/g)+1)+b};h.tween.PennerEasing.easeInOutExpo=function(a,b,c,g){return 0==a?b:a==g?b+c:1>(a/=g/2)?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b};h.tween.PennerEasing.easeInElastic=function(a,b,c,g){return h.tween.PennerEasing.easeInElasticL(a,b,c,g)};h.tween.PennerEasing.easeInElasticL=function(a,b,c,g,d,e){null==e&&(e=-0.123456);null==d&&(d=-0.123456);if(0==a)return b;if(1==(a/=g))return b+c;-0.123456==e&&(e=0.3*g);-0.123456==d||d<
Math.abs(c)?(d=c,c=e/4):c=e/(2*Math.PI)*Math.asin(c/d);return-(d*Math.pow(2,10*(a-=1))*Math.sin((a*g-c)*2*Math.PI/e))+b};h.tween.PennerEasing.easeOutElastic=function(a,b,c,g){return h.tween.PennerEasing.easeOutElasticL(a,b,c,g)};h.tween.PennerEasing.easeOutElasticL=function(a,b,c,g,d,e){null==e&&(e=-0.123456);null==d&&(d=-0.123456);var f;if(0==a)return b;if(1==(a/=g))return b+c;-0.123456==e&&(e=0.3*g);-0.123456==d||d<Math.abs(c)?(d=c,f=e/4):f=e/(2*Math.PI)*Math.asin(c/d);return d*Math.pow(2,-10*a)*
Math.sin((a*g-f)*2*Math.PI/e)+c+b};h.tween.PennerEasing.easeInOutElastic=function(a,b,c,g){return h.tween.PennerEasing.easeInOutElasticL(a,b,c,g)};h.tween.PennerEasing.easeInOutElasticL=function(a,b,c,g,d,e){null==e&&(e=-0.123456);null==d&&(d=-0.123456);var f;if(0==a)return b;if(2==(a/=g/2))return b+c;-0.123456==e&&(e=g*0.3*1.5);-0.123456==d||d<Math.abs(c)?(d=c,f=e/4):f=e/(2*Math.PI)*Math.asin(c/d);return 1>a?-0.5*d*Math.pow(2,10*(a-=1))*Math.sin((a*g-f)*2*Math.PI/e)+b:0.5*d*Math.pow(2,-10*(a-=1))*
Math.sin((a*g-f)*2*Math.PI/e)+c+b};h.tween.PennerEasing.easeInBack=function(a,b,c,g){return h.tween.PennerEasing.easeInBackL(a,b,c,g)};h.tween.PennerEasing.easeInBackL=function(a,b,c,g,d){null==d&&(d=-0.123456);-0.123456==d&&(d=1.70158);return c*(a/=g)*a*((d+1)*a-d)+b};h.tween.PennerEasing.easeInOutBack=function(a,b,c,g){return h.tween.PennerEasing.easeInOutBackL(a,b,c,g)};h.tween.PennerEasing.easeInOutBackL=function(a,b,c,g,d){null==d&&(d=-0.123456);-0.123456==d&&(d=1.70158);return 1>(a/=g/2)?c/
2*a*a*(((d*=1.525)+1)*a-d)+b:c/2*((a-=2)*a*(((d*=1.525)+1)*a+d)+2)+b};h.tween.PennerEasing.easeOutBounce=function(a,b,c,g){return(a/=g)<1/2.75?c*7.5625*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+0.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+0.984375)+b};h.tween.PennerEasing.easeInBounce=function(a,b,c,g){return c-h.tween.PennerEasing.easeOutBounce(g-a,0,c,g)+b};h.tween.PennerEasing.easeInOutBounce=function(a,b,c,g){return a<g/2?0.5*h.tween.PennerEasing.easeInBounce(2*
a,0,c,g)+b:0.5*h.tween.PennerEasing.easeOutBounce(2*a-g,0,c,g)+0.5*c+b};h.tween.PennerEasing.easeInCubic=function(a,b,c,g){return c*(a/=g)*a*a+b};h.tween.PennerEasing.easeOutCubic=function(a,b,c,g){return c*((a=a/g-1)*a*a+1)+b};h.tween.PennerEasing.easeInOutCubic=function(a,b,c,g){return 1>(a/=g/2)?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b};h.tween.PennerEasing.easeInQuart=function(a,b,c,g){return c*(a/=g)*a*a*a+b};h.tween.PennerEasing.easeOutQuart=function(a,b,c,g){return-c*((a=a/g-1)*a*a*a-1)+b};h.tween.PennerEasing.easeInOutQuart=
function(a,b,c,g){return 1>(a/=g/2)?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b};h.tween.PennerEasing.easeInQuint=function(a,b,c,g){return c*(a/=g)*a*a*a*a+b};h.tween.PennerEasing.easeOutQuint=function(a,b,c,g){return c*((a=a/g-1)*a*a*a*a+1)+b};h.tween.PennerEasing.easeInOutQuint=function(a,b,c,g){return 1>(a/=g/2)?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b};h.tween.PennerEasing.easeInSine=function(a,b,c,g){return-c*Math.cos(a/g*(Math.PI/2))+c+b};h.tween.PennerEasing.easeOutSine=function(a,b,c,g){return c*
Math.sin(a/g*(Math.PI/2))+b};h.tween.PennerEasing.easeInOutSine=function(a,b,c,g){return-c/2*(Math.cos(Math.PI*a/g)-1)+b};h.tween.PennerEasing.easeInCirc=function(a,b,c,g){return-c*(Math.sqrt(1-(a/=g)*a)-1)+b};h.tween.PennerEasing.easeOutCirc=function(a,b,c,g){return c*Math.sqrt(1-(a=a/g-1)*a)+b};h.tween.PennerEasing.easeInOutCirc=function(a,b,c,g){return 1>(a/=g/2)?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b};h.tween.PennerManager=function(){};j["com.workinman.math.tween.PennerManager"]=
h.tween.PennerManager;h.tween.PennerManager.__name__=["com","workinman","math","tween","PennerManager"];h.tween.PennerManager.getEaseFunction=function(a){switch(a){case h.tween.PennerManager.EASE_IN:case h.tween.PennerManager.EASE_QUAD_IN:return h.tween.PennerManager._tweenEaseIn;case h.tween.PennerManager.EASE_OUT:case h.tween.PennerManager.EASE_QUAD_OUT:return h.tween.PennerManager._tweenEaseOut;case h.tween.PennerManager.EASE:case h.tween.PennerManager.EASE_QUAD:return h.tween.PennerManager._tweenEaseBoth;
case h.tween.PennerManager.EASE_EXPO:return h.tween.PennerManager._tweenExpoBoth;case h.tween.PennerManager.EASE_EXPO_IN:return h.tween.PennerManager._tweenExpoIn;case h.tween.PennerManager.EASE_EXPO_OUT:return h.tween.PennerManager._tweenExpoOut;case h.tween.PennerManager.EASE_ELASTIC:return h.tween.PennerManager._tweenElasticBoth;case h.tween.PennerManager.EASE_ELASTIC_IN:return h.tween.PennerManager._tweenElasticIn;case h.tween.PennerManager.EASE_ELASTIC_OUT:return h.tween.PennerManager._tweenElasticOut;
case h.tween.PennerManager.EASE_BUMP:return h.tween.PennerManager._tweenBumpBoth;case h.tween.PennerManager.EASE_BUMP_IN:return h.tween.PennerManager._tweenBumpIn;case h.tween.PennerManager.EASE_BUMP_OUT:return h.tween.PennerManager._tweenBumpBoth;case h.tween.PennerManager.EASE_BOUNCE:return h.tween.PennerManager._tweenBounceBoth;case h.tween.PennerManager.EASE_BOUNCE_IN:return h.tween.PennerManager._tweenBounceIn;case h.tween.PennerManager.EASE_BOUNCE_OUT:return h.tween.PennerManager._tweenBounceOut;
case h.tween.PennerManager.EASE_CUBIC:return h.tween.PennerManager._tweenCubicBoth;case h.tween.PennerManager.EASE_CUBIC_IN:return h.tween.PennerManager._tweenCubicIn;case h.tween.PennerManager.EASE_CUBIC_OUT:return h.tween.PennerManager._tweenCubicOut;case h.tween.PennerManager.EASE_SPACE:return h.tween.PennerManager._tweenSpaceBoth;case h.tween.PennerManager.EASE_SPACE_IN:return h.tween.PennerManager._tweenSpaceIn;case h.tween.PennerManager.EASE_SPACE_OUT:return h.tween.PennerManager._tweenSpaceOut;
case h.tween.PennerManager.EASE_BLAST:return h.tween.PennerManager._tweenBlastBoth;case h.tween.PennerManager.EASE_BLAST_IN:return h.tween.PennerManager._tweenBlastIn;case h.tween.PennerManager.EASE_BLAST_OUT:return h.tween.PennerManager._tweenBlastOut;case h.tween.PennerManager.EASE_WAVE:return h.tween.PennerManager._tweenWaveBoth;case h.tween.PennerManager.EASE_WAVE_IN:return h.tween.PennerManager._tweenWaveIn;case h.tween.PennerManager.EASE_WAVE_OUT:return h.tween.PennerManager._tweenWaveOut;case h.tween.PennerManager.EASE_CIRCLE:return h.tween.PennerManager._tweenCircleBoth;
case h.tween.PennerManager.EASE_CIRCLE_IN:return h.tween.PennerManager._tweenCircleIn;case h.tween.PennerManager.EASE_CIRCLE_OUT:return h.tween.PennerManager._tweenCircleOut;case h.tween.PennerManager.EASE_LINEAR:return h.tween.PennerManager._tweenLinear;default:return h.tween.PennerManager._tweenLinear}};h.tween.PennerManager._tweenLinear=function(a,b,c,g){return a+c/g*b};h.tween.PennerManager._tweenEaseBoth=function(a,b,c,g){return h.tween.PennerEasing.easeInOutQuad(c,a,b,g)};h.tween.PennerManager._tweenEaseIn=
function(a,b,c,g){return h.tween.PennerEasing.easeInQuad(c,a,b,g)};h.tween.PennerManager._tweenEaseOut=function(a,b,c,g){return h.tween.PennerEasing.easeOutQuad(c,a,b,g)};h.tween.PennerManager._tweenExpoBoth=function(a,b,c,g){return h.tween.PennerEasing.easeInOutExpo(c,a,b,g)};h.tween.PennerManager._tweenExpoIn=function(a,b,c,g){return h.tween.PennerEasing.easeInExpo(c,a,b,g)};h.tween.PennerManager._tweenExpoOut=function(a,b,c,g){return h.tween.PennerEasing.easeOutExpo(c,a,b,g)};h.tween.PennerManager._tweenElasticBoth=
function(a,b,c,g){return h.tween.PennerEasing.easeInOutElastic(c,a,b,g)};h.tween.PennerManager._tweenElasticIn=function(a,b,c,g){return h.tween.PennerEasing.easeInElastic(c,a,b,g)};h.tween.PennerManager._tweenElasticOut=function(a,b,c,g){return h.tween.PennerEasing.easeOutElastic(c,a,b,g)};h.tween.PennerManager._tweenBumpBoth=function(a,b,c,g){return h.tween.PennerEasing.easeInOutBack(c,a,b,g)};h.tween.PennerManager._tweenBumpIn=function(a,b,c,g){return h.tween.PennerEasing.easeInBack(c,a,b,g)};h.tween.PennerManager._tweenBounceBoth=
function(a,b,c,g){return h.tween.PennerEasing.easeInOutBounce(c,a,b,g)};h.tween.PennerManager._tweenBounceIn=function(a,b,c,g){return h.tween.PennerEasing.easeInBounce(c,a,b,g)};h.tween.PennerManager._tweenBounceOut=function(a,b,c,g){return h.tween.PennerEasing.easeOutBounce(c,a,b,g)};h.tween.PennerManager._tweenCubicBoth=function(a,b,c,g){return h.tween.PennerEasing.easeInOutCubic(c,a,b,g)};h.tween.PennerManager._tweenCubicIn=function(a,b,c,g){return h.tween.PennerEasing.easeInCubic(c,a,b,g)};h.tween.PennerManager._tweenCubicOut=
function(a,b,c,g){return h.tween.PennerEasing.easeOutCubic(c,a,b,g)};h.tween.PennerManager._tweenSpaceBoth=function(a,b,c,g){return h.tween.PennerEasing.easeInOutQuart(c,a,b,g)};h.tween.PennerManager._tweenSpaceIn=function(a,b,c,g){return h.tween.PennerEasing.easeInQuart(c,a,b,g)};h.tween.PennerManager._tweenSpaceOut=function(a,b,c,g){return h.tween.PennerEasing.easeOutQuart(c,a,b,g)};h.tween.PennerManager._tweenBlastBoth=function(a,b,c,g){return h.tween.PennerEasing.easeInOutQuint(c,a,b,g)};h.tween.PennerManager._tweenBlastIn=
function(a,b,c,g){return h.tween.PennerEasing.easeInQuint(c,a,b,g)};h.tween.PennerManager._tweenBlastOut=function(a,b,c,g){return h.tween.PennerEasing.easeOutQuint(c,a,b,g)};h.tween.PennerManager._tweenWaveBoth=function(a,b,c,g){return h.tween.PennerEasing.easeInOutSine(c,a,b,g)};h.tween.PennerManager._tweenWaveIn=function(a,b,c,g){return h.tween.PennerEasing.easeInSine(c,a,b,g)};h.tween.PennerManager._tweenWaveOut=function(a,b,c,g){return h.tween.PennerEasing.easeOutSine(c,a,b,g)};h.tween.PennerManager._tweenCircleBoth=
function(a,b,c,g){return h.tween.PennerEasing.easeInOutCirc(c,a,b,g)};h.tween.PennerManager._tweenCircleIn=function(a,b,c,g){return h.tween.PennerEasing.easeInCirc(c,a,b,g)};h.tween.PennerManager._tweenCircleOut=function(a,b,c,g){return h.tween.PennerEasing.easeOutCirc(c,a,b,g)};h.tween.WorkinTween=function(){n.WMEventDispatcher.call(this);this._isRunning=!1;this._progress=0;this._tweens=[]};j["com.workinman.math.tween.WorkinTween"]=h.tween.WorkinTween;h.tween.WorkinTween.__name__=["com","workinman",
"math","tween","WorkinTween"];h.tween.WorkinTween.__super__=n.WMEventDispatcher;h.tween.WorkinTween.prototype=t(n.WMEventDispatcher.prototype,{dispose:function(){this.clearTweens();this._easingY=this._easingX=this._vector=this._goal=this._start=this._tweens=null;n.WMEventDispatcher.prototype.dispose.call(this)},_tweenComplete:function(){this._current.toPoint(this._tweens[0]._getGoal());this._tweens.splice(0,1);this._getBoolAllTweensComplete()?(this.dispatchEvent(new n.WMEvent(h.tween.WorkinTween.EVENT_TWEENS_ALL_COMPLETE)),
this.stop()):(this.dispatchEvent(new n.WMEvent(h.tween.WorkinTween.EVENT_TWEEN_CURRENT_COMPLETE)),this._tweenNew())},_tweenNew:function(){this._start=this._current.copy();this._goal=this._tweens[0]._getGoal();this._vector=h.WorkinMath.diffBetweenPoints(this._start,this._goal);this._easingX=h.tween.PennerManager.getEaseFunction(this._tweens[0]._getEaseIdX());this._easingY=h.tween.PennerManager.getEaseFunction(this._tweens[0]._getEaseIdY());this._dur=this._tweens[0]._getDur();this._progress=0},update:function(a){this._isRunning&&
(this._progress+=a,this._progress>this._dur&&(this._progress=this._dur),this._current.to(this._easingX(this._start.x,this._vector.x,this._progress,this._dur),this._easingY(this._start.y,this._vector.y,this._progress,this._dur)),this._progress==this._dur&&this._tweenComplete())},stop:function(){this._isRunning=!1},start:function(){null==this._current||0==this._tweens.length||(this._isRunning=!0,0==this._progress&&this._tweenNew())},clearTweens:function(){this._tweens=[];this._progress=0;this._isRunning=
!1},addTween:function(a,b,c,g){null==g&&(g="");""==g&&(g=c);this._tweens.push(new h.tween.WorkinTweenStep(a.copy(),b,c,g))},setStartFromPoint:function(a){this.setStart(a.x,a.y)},setStart:function(a,b){this._current=new h.WorkinPoint(a,b);this._isRunning?this._tweenNew():this._progress=0},_getBoolCurrentTweenComplete:function(){return 1==this._getProgressRatio()},_getBoolAllTweensComplete:function(){return 0==this._tweens.length},_getPrevPos:function(){return 0==this._tweens.length?new h.WorkinPoint(0,
0):this._tweens[this._tweens.length-1]._getGoal()},_getProgressRatio:function(){return this._progress/this._dur},_getCurrentVector:function(){return this._vector},_getCurrent:function(){return this._current},__class__:h.tween.WorkinTween,__properties__:{get_current:"_getCurrent",get_progressRatio:"_getProgressRatio",get_boolAllTweensComplete:"_getBoolAllTweensComplete"}});h.tween.WorkinTweenStep=function(a,b,c,g){this._goal=a;this._easeIdX=c;this._easeIdY=g;this._dur=b};j["com.workinman.math.tween.WorkinTweenStep"]=
h.tween.WorkinTweenStep;h.tween.WorkinTweenStep.__name__=["com","workinman","math","tween","WorkinTweenStep"];h.tween.WorkinTweenStep.prototype={_getDur:function(){return this._dur},_getEaseIdY:function(){return this._easeIdY},_getEaseIdX:function(){return this._easeIdX},_getGoal:function(){return this._goal},__class__:h.tween.WorkinTweenStep,__properties__:{get_goal:"_getGoal",get_easeIdX:"_getEaseIdX",get_easeIdY:"_getEaseIdY",get_dur:"_getDur"}};h.tween.WorkinTweener=function(){this._targets=[]};
j["com.workinman.math.tween.WorkinTweener"]=h.tween.WorkinTweener;h.tween.WorkinTweener.__name__=["com","workinman","math","tween","WorkinTweener"];h.tween.WorkinTweener.__properties__={get_instance:"_getInstance"};h.tween.WorkinTweener._getInstance=function(){null==h.tween.WorkinTweener._instance&&(h.tween.WorkinTweener._instance=new h.tween.WorkinTweener);return h.tween.WorkinTweener._instance};h.tween.WorkinTweener.prototype={stop:function(a){for(var b=this._targets.length;0<b;)if(b--,this._targets[b]._getTarget()==
a){this._targets[b].clearTweens();this._targets[b]._setIsComplete(!0);break}},tween:function(a,b,c,g,d,e,f,i,j){null==j&&(j=!1);null==i&&(i="");null==f&&(f=0);null==e&&(e=0);null==d&&(d="linear");null==g&&(g=!1);b=new h.tween._WorkinTweener.WorkinTweenDef(a,b,c,d,e,f,i);c=!1;d=0;for(e=this._targets;d<e.length;)i=e[d],++d,i._getTarget()==a&&(c=!0,g&&i.clearTweens(),i.addTween(b,f));!1==c&&(a=new h.tween._WorkinTweener.WorkinTweenTracker(a,j),this._targets.push(a),a.addTween(b,f));return b},update:function(a){for(var b=
this._targets.length;0<b;)b--,this._targets[b].update(a),this._targets[b]._getIsComplete()&&(this._targets[b].dispose(),this._targets.splice(b,1))},__class__:h.tween.WorkinTweener};h.tween._WorkinTweener={};h.tween._WorkinTweener.WorkinTweenTracker=function(a,b){this._gameplayPause=b;this._target=a;this._tweens=[];this._isComplete=!1};j["com.workinman.math.tween._WorkinTweener.WorkinTweenTracker"]=h.tween._WorkinTweener.WorkinTweenTracker;h.tween._WorkinTweener.WorkinTweenTracker.__name__="com,workinman,math,tween,_WorkinTweener,WorkinTweenTracker".split(",");
h.tween._WorkinTweener.WorkinTweenTracker.prototype={_decrementQueueIndeces:function(){for(var a=0,b=this._tweens;a<b.length;){var c=b[a];++a;if(0==c._getQueueIndex())return}a=0;for(b=this._tweens;a<b.length;){c=b[a];++a;var g=c,d=g._getQueueIndex();g._setQueueIndex(d-1);d;0==c._getQueueIndex()&&c.start()}},addTween:function(a){this._tweens.push(a)},clearTweens:function(){for(var a=0,b=this._tweens;a<b.length;){var c=b[a];++a;c._setIsComplete(!0)}},_setGameplayPause:function(a){return this._gameplayPause=
a},_getGameplayPause:function(){return this._gameplayPause},_setIsComplete:function(a){return this._isComplete=a},_getIsComplete:function(){return this._isComplete},_getTarget:function(){return this._target},_dispatchTweensAllComplete:function(a){f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEventData(C.ConstantsCloud.EVENT_TWEENS_COMPLETE,{target:a}))},update:function(a){if(!this._gameplayPause||!f.WorkinCloud.instance.getBool("bool_paused")){for(var b=this._tweens.length;0<b;)b--,
0==this._tweens[b]._getQueueIndex()&&(this._tweens[b].update(a),this._tweens[b]._getIsComplete()&&(this._tweens[b].dispose(),this._tweens.splice(b,1),this._decrementQueueIndeces()));1>this._tweens.length&&(this._isComplete=!0,this._dispatchTweensAllComplete(this._target))}},dispose:function(){this._target=null;for(var a=0,b=this._tweens;a<b.length;){var c=b[a];++a;c.dispose()}this._tweens=null},__class__:h.tween._WorkinTweener.WorkinTweenTracker,__properties__:{get_target:"_getTarget",set_isComplete:"_setIsComplete",
get_isComplete:"_getIsComplete"}};h.tween._WorkinTweener.WorkinTweenDef=function(a,b,c,g,d,e,f){null==f&&(f="");null==e&&(e=0);null==d&&(d=0);null==g&&(g="linear");this._id=f;this._target=a;this._duration=b;this._delay=d;this._dest=c;this._queueIndex=e;this._easeFunction=h.tween.PennerManager.getEaseFunction(g);this._isComplete=!1;this._completionArgs=this._completionHandler=null;this._progress=0;this._origin={};0==e&&this.start()};j["com.workinman.math.tween._WorkinTweener.WorkinTweenDef"]=h.tween._WorkinTweener.WorkinTweenDef;
h.tween._WorkinTweener.WorkinTweenDef.__name__="com,workinman,math,tween,_WorkinTweener,WorkinTweenDef".split(",");h.tween._WorkinTweener.WorkinTweenDef.prototype={onComplete:function(a,b){null==b&&(b=[]);this._completionHandler=a;this._completionArgs=b;return this},ease:function(a){this._easeFunction=h.tween.PennerManager.getEaseFunction(a);return this},delay:function(a){this._delay=a;return this},_getId:function(){return this._id},_setQueueIndex:function(a){return this._queueIndex=a},_getQueueIndex:function(){return this._queueIndex},
_setIsComplete:function(a){return this._isComplete=a},_getIsComplete:function(){return this._isComplete},update:function(a){if(0<this._delay&&(this._delay-=a,0<this._delay))return;this._progress+=a;this._progress>this._duration&&(this._progress=this._duration);this.ratio=this._progress/this._duration;for(var b=0,c=L.fields(this._dest);b<c.length;){var g=c[b];++b;a=L.field(this._dest,g)-L.field(this._origin,g);this._target[g]=this._easeFunction(L.field(this._origin,g),a,this._progress,this._duration)}this._progress>=
this._duration&&(null!=this._completionHandler&&this._completionHandler.apply(this._completionHandler,this._completionArgs),this._isComplete=!0)},dispose:function(){this._dest=this._target=this._origin=null},start:function(){this._isComplete=!1;for(var a=0,b=L.fields(this._dest);a<b.length;){var c=b[a];++a;null!=L.field(this._target,c)&&(this._origin[c]=L.field(this._target,c))}},__class__:h.tween._WorkinTweener.WorkinTweenDef,__properties__:{set_isComplete:"_setIsComplete",get_isComplete:"_getIsComplete",
set_queueIndex:"_setQueueIndex",get_queueIndex:"_getQueueIndex"}};R={WMSharedObject:function(){n.WMEventDispatcher.call(this);this._data={};this.sharedKey=""}};j["com.workinman.net.WMSharedObject"]=R.WMSharedObject;R.WMSharedObject.__name__=["com","workinman","net","WMSharedObject"];R.WMSharedObject.getLocalStorage=function(){return x.window.localStorage};R.WMSharedObject.getLocal=function(a,b){try{var c=x.window.location.href;null==b&&(b=c);var g=new R.WMSharedObject;g.sharedKey=b+":"+a;var d=R.WMSharedObject.getLocalStorage().getItem(g.sharedKey);
g._setData(""==d||null==d?{}:Q.run(d));return g}catch(e){return g=new R.WMSharedObject,g.sharedKey="",g}};R.WMSharedObject.__super__=n.WMEventDispatcher;R.WMSharedObject.prototype=t(n.WMEventDispatcher.prototype,{flush:function(){var a=U.run(this._getData());R.WMSharedObject.getLocalStorage().setItem(this.sharedKey,a);return R.SharedObjectFlushedStatus.FLUSHED},_setData:function(a){return this._data=a},_getData:function(){return this._data},dispose:function(){this._data=null;n.WMEventDispatcher.prototype.dispose.call(this)},
__class__:R.WMSharedObject,__properties__:{set_data:"_setData",get_data:"_getData"}});R.SharedObjectFlushedStatus=function(){};j["com.workinman.net.SharedObjectFlushedStatus"]=R.SharedObjectFlushedStatus;R.SharedObjectFlushedStatus.__name__=["com","workinman","net","SharedObjectFlushedStatus"];p={ServiceAnalytics:function(){}};j["com.workinman.services.ServiceAnalytics"]=p.ServiceAnalytics;p.ServiceAnalytics.__name__=["com","workinman","services","ServiceAnalytics"];p.ServiceAnalytics.onAnalyticsLoad=
function(){p.ServiceAnalytics._flagLoaded||(f.WorkinCloud.instance.log("[ServiceAnalytics](onAnalyticsLoad) Load complete"),p.ServiceAnalytics._flagLoaded=!0,T.delay(p.ServiceAnalytics._runQueuedCommands,1E3))};p.ServiceAnalytics.init=function(a,b){null==b&&(b="");p.ServiceAnalytics._flagInitted=!0;p.ServiceAnalytics._queuedCommands=[];"x"==a.toLowerCase()&&(p.ServiceAnalytics.OPTION_ENABLE_TRACKING=!1);p.ServiceAnalytics.OPTION_ENABLE_TRACKING&&(""==b&&(b=p.ServiceAnalytics._DEFAULT_SHARED_OBJECT_ID),
p.ServiceAnalytics._flagStarted=!1,f.WorkinCloud.instance.log("[ServiceAnalytics](initAnalytics)"),p.ServiceAnalytics._appId=a,p.ServiceAnalytics._sharedObjectId=b,p.ServiceAnalytics._sharedObjectData=f.WorkinCloud.instance.sharedObjectGetData(p.ServiceAnalytics._sharedObjectId),p.ServiceAnalytics._generateSessionID(),null==p.ServiceAnalytics._sharedObjectData.userID||14>r.string(p.ServiceAnalytics._sharedObjectData.userID).length?(p.ServiceAnalytics._generateOfflineIDs(),p.ServiceAnalytics._sharedObjectData.userID=
p.ServiceAnalytics._offlineUserId,p.ServiceAnalytics._sharedObjectData.trackingID=p.ServiceAnalytics._offlineTrackingId,f.WorkinCloud.instance.sharedObjectSetData(p.ServiceAnalytics._sharedObjectId,p.ServiceAnalytics._sharedObjectData)):(p.ServiceAnalytics._offlineUserId=p.ServiceAnalytics._sharedObjectData.userID,p.ServiceAnalytics._offlineTrackingId=p.ServiceAnalytics._sharedObjectData.trackingID),eval("\t\t\t\t\n\t\t\t\twindow._pnConfig = new Array();\n\t\t\t\twindow._pnConfig['userId'] = '"+p.ServiceAnalytics._offlineUserId+
"';\n\t\t\t\t\n\t\t\t\tvar _pnAPIURL = document.location.protocol + '//js.a.playnomics.net/v1/api?a="+p.ServiceAnalytics._appId+"';\n\t\t\t\tvar _pnAPI = document.createElement('script');\t\t\t\t\n\t\t\t\t_pnAPI.type = 'text/javascript'; \n\t\t\t\t_pnAPI.async = false; \n\t\t\t\t_pnAPI.src = _pnAPIURL;\n\t\t\t\twindow.pnCallbackReference = _pnAPI;\t\t\t\t\n\t\t\t"),eval("window.pnCallbackReference").addEventListener("load",p.ServiceAnalytics.onAnalyticsLoad,!1),eval("document.body.appendChild(window.pnCallbackReference);"),
p.ServiceAnalytics.sendUserInfo(),p.ServiceAnalytics.sendMilestone("custom1"))};p.ServiceAnalytics._runQueuedCommands=function(){for(;0<p.ServiceAnalytics._queuedCommands.length;)p.ServiceAnalytics.sendPlaynomicsEvent(p.ServiceAnalytics._queuedCommands[0].method,p.ServiceAnalytics._queuedCommands[0].params),p.ServiceAnalytics._queuedCommands.shift()};p.ServiceAnalytics.sendUserInfo=function(){p.ServiceAnalytics.sendPlaynomicsEvent("pnUserInfo",["update",null,null,"","","html5"])};p.ServiceAnalytics.sendMilestone=
function(a){p.ServiceAnalytics.sendPlaynomicsEvent("pnMilestone",[r.string(Math.floor(6012+999999999*Math.random())),a])};p.ServiceAnalytics.sendPlaynomicsEvent=function(a,b){if(p.ServiceAnalytics.OPTION_ENABLE_TRACKING&&p.ServiceAnalytics._flagInitted)if(p.ServiceAnalytics._flagLoaded){f.WorkinCloud.instance.log("[ServiceAnalytics](sendPlaynomicsEvent) "+a);var c,g="";for(c=0;c<b.length;)g+="'"+b[c]+"'",c++,c<b.length&&(g+=",");eval(a+"("+g+")")}else p.ServiceAnalytics._queuedCommands.push({method:a,
params:b})};p.ServiceAnalytics.enableCanadaTracking=function(a){p.ServiceAnalytics._flagCanadaTrackingEnabled=!0;p.ServiceAnalytics._canadaShowGameTitle=a};p.ServiceAnalytics.sendCanadaTrackingCall=function(a){if(p.ServiceAnalytics._flagCanadaTrackingEnabled)try{eval("trackFlashEvent('"+p.ServiceAnalytics._canadaShowGameTitle+"', '"+a+"', 'true');")}catch(b){}};p.ServiceAnalytics._generateSessionID=function(){for(var a="",b=11;-1<b;)a+=Math.floor(10*Math.random()),b--;p.ServiceAnalytics._sessionId=
a};p.ServiceAnalytics._generateOfflineIDs=function(){p.ServiceAnalytics._offlineUserId="";p.ServiceAnalytics._offlineTrackingId="";for(var a=15;-1<a;){if(0.66>Math.random())p.ServiceAnalytics._offlineUserId+=r.string(Math.floor(10*Math.random()));else switch(Math.floor(10*Math.random())){case 0:p.ServiceAnalytics._offlineUserId+="a";break;case 1:p.ServiceAnalytics._offlineUserId+="b";break;case 2:p.ServiceAnalytics._offlineUserId+="c";break;case 3:p.ServiceAnalytics._offlineUserId+="d";break;case 4:p.ServiceAnalytics._offlineUserId+=
"e";break;case 5:p.ServiceAnalytics._offlineUserId+="f";break;case 6:p.ServiceAnalytics._offlineUserId+="g";break;case 7:p.ServiceAnalytics._offlineUserId+="h";break;case 8:p.ServiceAnalytics._offlineUserId+="i";break;case 9:p.ServiceAnalytics._offlineUserId+="j";break;default:p.ServiceAnalytics._offlineUserId+="z"}a--}p.ServiceAnalytics._offlineTrackingId="";for(a=15;-1<a;)p.ServiceAnalytics._offlineTrackingId+=Math.floor(10*Math.random()),a--};p.ServiceAnalytics.prototype={__class__:p.ServiceAnalytics};
p.ServiceNickAvatar=function(){this._url="";this._flagEnabled=!1;this._avatarsLoaded=[];this._avatarsToLoad=[];this._flagLoadListeners=!1};j["com.workinman.services.ServiceNickAvatar"]=p.ServiceNickAvatar;p.ServiceNickAvatar.__name__=["com","workinman","services","ServiceNickAvatar"];p.ServiceNickAvatar.__properties__={get_instance:"_getInstance"};p.ServiceNickAvatar._getInstance=function(){null==p.ServiceNickAvatar._instance&&(p.ServiceNickAvatar._instance=new p.ServiceNickAvatar);return p.ServiceNickAvatar._instance};
p.ServiceNickAvatar.prototype={disable:function(){this._flagEnabled=!1},enable:function(a){""!=a&&(this._flagEnabled=!0,this._url=a)},_getIsEnabled:function(){return this._flagEnabled},__class__:p.ServiceNickAvatar};p.ServiceNickLeaderboard=function(){this._flagEnabled=!1;this._scoreArray=[];this._gameKeyword=""};j["com.workinman.services.ServiceNickLeaderboard"]=p.ServiceNickLeaderboard;p.ServiceNickLeaderboard.__name__=["com","workinman","services","ServiceNickLeaderboard"];p.ServiceNickLeaderboard.__properties__=
{get_instance:"_getInstance"};p.ServiceNickLeaderboard._getInstance=function(){null==p.ServiceNickLeaderboard._instance&&(p.ServiceNickLeaderboard._instance=new p.ServiceNickLeaderboard);return p.ServiceNickLeaderboard._instance};p.ServiceNickLeaderboard.prototype={disable:function(){this._flagEnabled=!1},enable:function(a,b){""!=a&&(this._flagEnabled=!0,this.setKeyword(b),this._url=a)},setKeyword:function(a){""!=this._gameKeyword&&this._gameKeyword!=a&&(this._scoreArray=[]);this._gameKeyword=a},
_getIsEnabled:function(){return this._flagEnabled},__class__:p.ServiceNickLeaderboard};f={JSEmbedProxy:function(){}};j["com.workinman.utils.JSEmbedProxy"]=f.JSEmbedProxy;f.JSEmbedProxy.__name__=["com","workinman","utils","JSEmbedProxy"];f.JSEmbedProxy.__properties__={get_isPaused:"getIsPaused",get_canvasHeight:"getCanvasHeight",get_canvasWidth:"getCanvasWidth",get_canvasScale:"getCanvasScale",get_isCrossdomain:"getIsCrossdomain",get_base:"getBase",get_exists:"getExists"};f.JSEmbedProxy.alertOn=function(a){f.JSEmbedProxy.callJSEmbedMethod("addAlert('"+
a+"', '')")};f.JSEmbedProxy.alertOff=function(){f.JSEmbedProxy.callJSEmbedMethod("removeAlert('')")};f.JSEmbedProxy.getExists=function(){return f.JSEmbedProxy.callJSEmbedMethod("exists()")};f.JSEmbedProxy.getParameters=function(){return f.JSEmbedProxy.callJSEmbedMethod("params()")};f.JSEmbedProxy.getAttributes=function(){return f.JSEmbedProxy.callJSEmbedMethod("attr()")};f.JSEmbedProxy.getBase=function(){return f.JSEmbedProxy.callJSEmbedMethod("baseUrl()")};f.JSEmbedProxy.getIsCrossdomain=function(){return f.JSEmbedProxy.callJSEmbedMethod("isBaseCrossdomain()")};
f.JSEmbedProxy.getCanvasScale=function(){return r.parseFloat(f.JSEmbedProxy.callJSEmbedMethod("canvasScale()"))};f.JSEmbedProxy.getCanvasWidth=function(){return r.parseFloat(f.JSEmbedProxy.callJSEmbedMethod("canvasWidth()"))};f.JSEmbedProxy.getCanvasHeight=function(){return r.parseFloat(f.JSEmbedProxy.callJSEmbedMethod("canvasHeight()"))};f.JSEmbedProxy.getIsPaused=function(){return f.JSEmbedProxy.callJSEmbedMethod("isPaused()")};f.JSEmbedProxy.pause=function(){f.JSEmbedProxy.callJSEmbedMethod("pause()")};
f.JSEmbedProxy.unpause=function(){f.JSEmbedProxy.callJSEmbedMethod("unpause()")};f.JSEmbedProxy.callJSEmbedMethod=function(a){try{var b=eval("jsembed."+a);return null==b?"":b}catch(c){}return""};f.JSEmbedProxy.prototype={__class__:f.JSEmbedProxy};f.WMAssetManager=function(){this._LOADING_CHANCES=3;this._baseUrl="";this._assets=new G;this._defs=new G;this._flump=new G;this._packs=new G;this._chunks=new G;this._manifests=new G;this._flagBaseIsCrossdomain=!1;this._loadingProgress=this._loadingTotal=
this._packsLoaded=this._packsMax=this._loadingChances=0;this._loadingPackProgress=new G};j["com.workinman.utils.WMAssetManager"]=f.WMAssetManager;f.WMAssetManager.__name__=["com","workinman","utils","WMAssetManager"];f.WMAssetManager.prototype={getFont:function(a){return!1==this._assets.exists(a)?(f.WorkinCloud.instance.log("[WMAssetManager](getFont) no asset named "+a+" exists! Returning null."),null):new o.Font(this._assets.get(a)._getPack(),a)},getLibrary:function(a){return!1==this._flump.exists(a)?
(f.WorkinCloud.instance.log("[WMAssetManager](getLibrary) no library named "+a+" exists! Is it defined in config.xml?"),null):this._flump.get(a)},getSound:function(a){return!1==this._assets.exists(a)?(f.WorkinCloud.instance.log("[AssetManager](getSound) no asset named "+a+" exists! Returning null."),null):this._assets.get(a)._getConstructed()?this._assets.get(a)._getData():this._assets.get(a)._getPack().getSound(this._assets.get(a)._getPath(),!0)},getXML:function(a){if(!1==this._assets.exists(a))return f.WorkinCloud.instance.log("[WMAssetManager](getXML) no asset named "+
a+" exists! Returning null."),null;a=u.parse(this.getFile(a));return new D.Fast(a.firstElement())},getFile:function(a){return!1==this._assets.exists(a)?(f.WorkinCloud.instance.log("[WMAssetManager](getFile) no asset named "+a+" exists! Returning empty string."),""):this._assets.get(a)._getConstructed()?this._assets.get(a)._getData():this._assets.get(a)._getPack().getFile(this._assets.get(a)._getPath(),!0)},getTexture:function(a){a=a.split(".")[0];return!1==this._assets.exists(a)?(f.WorkinCloud.instance.log("[WMAssetManager](getTexture) no asset named "+
a+" exists! Returning null."),null):!0==this._assets.get(a)._getConstructed()?this._assets.get(a)._getData():this._assets.get(a)._getPack().getTexture(this._assets.get(a)._getPath(),!0)},hasAsset:function(a){return this._assets.exists(a)},_parseSpritesheet:function(a){for(var b=this.getXML(a+".xml"),a=this.getTexture(a),c="",g=new J.Rectangle(0,0,0,0),d,b=b.nodes.resolve("SubTexture").iterator();b.hasNext();)d=b.next(),c=d.att.resolve("name").toString(),g.x=r.parseFloat(d.att.resolve("x").toString()),
g.y=r.parseFloat(d.att.resolve("y").toString()),g.width=r.parseFloat(d.att.resolve("width").toString()),g.height=r.parseFloat(d.att.resolve("height").toString()),d=z.createTexture(g.width|0,g.height|0),d.get_graphics().drawSubImage(a,0,0,g.x|0,g.y|0,g.width|0,g.height|0),this.addConstructedAsset(c,d)},_onAllLoadComplete:function(){f.WorkinCloud.instance.log("[WMAssetManager](_onAllLoadComplete) all packs loaded!");f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEvent(C.ConstantsCloud.EVENT_FILES_LOADED))},
isLoading:function(){return this._packsLoaded<this._packsMax},addConstructedAsset:function(a,b){new f._WMAssetManager.AssetDef(a,this._assets,b)},addPack:function(a){for(var b=A.iter(a.get_manifest()._entries);b.hasNext();){var c=b.next();new f._WMAssetManager.AssetDef(c.name,this._assets,a)}},isPackLoaded:function(a){return this._packs.exists(a)},_loadManifest:function(a,b,c,g){null==g&&(g=!0);null==c&&(c="");var d=this,e=z._platform.loadAssetPack(a);this._loadingTotal+=e._total;this._loadingPackProgress.set(b,
0);e.error.connect(function(a){f.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Loading failed with error: "+a);f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEvent(C.ConstantsCloud.EVENT_FILES_ERROR));d._loadingChances--;!0==g?0<=d._loadingChances?T.delay(function(){f.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Retrying. With "+d._loadingChances+" more chances.");d.loadPack(b,c,!1)},500):f.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Loading attempts timed out."):
f.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Loading failed, not attempting to retry.")});e.progressChanged.connect(function(){var a=e._progress-d._loadingPackProgress.get(b);d._loadingPackProgress.set(b,e._progress);d._loadingProgress+=a;a=Math.round(100*(d._loadingProgress/d._loadingTotal));f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEventData(C.ConstantsCloud.EVENT_FILES_LOADING,{value:a}))});e.get(function(a){d.addPack(a);d._packsLoaded++;for(var c=0,g=d._defs.get(b)._getFlump();c<
g.length;){var e=g[c];++c;d._flump.set(e,new v.Library(a,e))}c=0;for(g=d._defs.get(b)._getTiles();c<g.length;)e=g[c],++c,d._parseSpritesheet(e);d._packs.set(b,a);d._packsLoaded>=d._packsMax&&d._onAllLoadComplete()})},loadPack:function(a,b,c){null==c&&(c=!0);null==b&&(b="");!1==this._defs.exists(a)&&f.WorkinCloud.instance.log("[WMAssetManager](loadPack) Can't load pack "+a+" , define the pack in config.xml.");f.WorkinCloud.instance.log("[WMAssetManager](loadPack) "+a);c&&(this._loadingChances=this._LOADING_CHANCES,
this._packsMax++);c=B.Manifest.build(a);""!=this._baseUrl&&(this._flagBaseIsCrossdomain?c.set_externalBasePath(this._baseUrl):c.set_relativeBasePath(this._baseUrl));this._loadManifest(c,a,b)},addPackDef:function(a,b,c){null==b&&(b=[]);null==c&&(c=[]);this._defs.set(a,new f._WMAssetManager.PackDef(a,b,c))},_parseChunk:function(a,b){for(var c=[],g=[],d=b.nodes.resolve("chunk").iterator();d.hasNext();){var e=d.next();c.push(e.getInnerData().toString())}for(d=b.nodes.resolve("pack").iterator();d.hasNext();)e=
d.next(),g.push(e.getInnerData().toString());return new f._WMAssetManager.ChunkDef(a,g,c)},loadChunk:function(a){!1==this._chunks.exists(a)&&f.WorkinCloud.instance.log("[WMAssetManager](loadChunk) No chunk named "+a+" defined.");for(var b=0,c=this._chunks.get(a)._getChunks();b<c.length;){var g=c[b];++b;this.loadChunk(g)}this._packsLoaded>=this._packsMax&&(this._loadingProgress=this._loadingTotal=0,f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEventData(C.ConstantsCloud.EVENT_FILES_LOADING,
{value:0})));b=0;for(c=this._chunks.get(a)._getPacks();b<c.length;)g=c[b],++b,!1==this.isPackLoaded(g)&&this.loadPack(g)},isChunkLoaded:function(a){if(!1==this._chunks.exists(a))return f.WorkinCloud.instance.log("[WMAssetManager](isChunkLoaded) No chunk named "+a+" defined."),!1;for(var b=0,a=this._chunks.get(a)._getPacks();b<a.length;){var c=a[b];++b;if(!1==this.isPackLoaded(c))return!1}return!0},addChunk:function(a,b){var c=this._parseChunk(a,b);this._chunks.set(a,c)},setCrossdomainBaseUrl:function(a){this._flagBaseIsCrossdomain=
!0;this._setBaseUrl(a)},_setBaseUrl:function(a){this._baseUrl=a;f.WorkinCloud.instance.log("[WMAssetManager](setBaseUrl) Base Url set to '"+a+"'");return this._baseUrl},_getBaseUrl:function(){return this._baseUrl},__class__:f.WMAssetManager,__properties__:{set_baseUrl:"_setBaseUrl",get_baseUrl:"_getBaseUrl"}};f._WMAssetManager={};f._WMAssetManager.AssetDef=function(a,b,c){this._path=a;a=a.split("/");this._id=a[a.length-1].split(".")[0];this._constructed=!1;this._data=this._pack=null;M.__instanceof(c,
B.AssetPack)?this._pack=c:(this._constructed=!0,this._data=c);this._hash=b;this._hash.set(this._path,this);this._path!=this._path.split(".")[0]&&this._hash.set(this._path.split(".")[0],this);this._path!=this._id&&this._hash.set(this._id,this)};j["com.workinman.utils._WMAssetManager.AssetDef"]=f._WMAssetManager.AssetDef;f._WMAssetManager.AssetDef.__name__=["com","workinman","utils","_WMAssetManager","AssetDef"];f._WMAssetManager.AssetDef.prototype={_getPack:function(){return this._pack},_getPath:function(){return this._path},
_getData:function(){return this._data},_getConstructed:function(){return this._constructed},__class__:f._WMAssetManager.AssetDef,__properties__:{get_constructed:"_getConstructed",get_data:"_getData",get_path:"_getPath",get_pack:"_getPack"}};f._WMAssetManager.PackDef=function(a,b,c){this._id=a;this._flump=b;this._tiles=c};j["com.workinman.utils._WMAssetManager.PackDef"]=f._WMAssetManager.PackDef;f._WMAssetManager.PackDef.__name__=["com","workinman","utils","_WMAssetManager","PackDef"];f._WMAssetManager.PackDef.prototype=
{_getTiles:function(){return this._tiles},_getFlump:function(){return this._flump},__class__:f._WMAssetManager.PackDef,__properties__:{get_flump:"_getFlump",get_tiles:"_getTiles"}};f._WMAssetManager.ChunkDef=function(a,b,c){this._id=a;this._packs=b;this._chunks=c};j["com.workinman.utils._WMAssetManager.ChunkDef"]=f._WMAssetManager.ChunkDef;f._WMAssetManager.ChunkDef.__name__=["com","workinman","utils","_WMAssetManager","ChunkDef"];f._WMAssetManager.ChunkDef.prototype={_getChunks:function(){return this._chunks},
_getPacks:function(){return this._packs},__class__:f._WMAssetManager.ChunkDef,__properties__:{get_packIds:"_getPacks",get_chunkIds:"_getChunks"}};f.WMInput=function(){this._multiTouchAvail=!1;this._inputDown=new G;this._keyCodes=new G;this._virtualCodes=new G;this._keyDown=new G;this._virtualDown=new G;this._touchList=new G;this._touchRemoval=[];this.registerInput("input_click");this._scale=1;this._offset=new h.WorkinPoint;this._pointer=new f.WMPointer("",0)};j["com.workinman.utils.WMInput"]=f.WMInput;
f.WMInput.__name__=["com","workinman","utils","WMInput"];f.WMInput.prototype={_onPointerUp:function(a){this._inputDown.set("input_click",!1);var b=a.viewX/this._scale,a=a.viewY/this._scale,b=b+this._offset.x,a=a+this._offset.y;this._pointer.end(b,a);!1==this._multiTouchAvail&&this._touchList.exists("const")&&this._touchList.get("const").end(b,a);f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEventInput(0,"input_click",b,a,this._pointer._getSwipe()))},_onPointerMove:function(a){var b=
a.viewX/this._scale,a=a.viewY/this._scale,b=b+this._offset.x,a=a+this._offset.y;this._pointer.move(b,a);!1==this._multiTouchAvail&&this._touchList.exists("const")&&this._touchList.get("const").move(b,a);f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEventInput(2,"input_click",b,a,this._pointer._getSwipe()))},_onPointerDown:function(a){this._inputDown.set("input_click",!0);var b=a.viewX/this._scale,a=a.viewY/this._scale,b=b+this._offset.x,a=a+this._offset.y;this._pointer.begin(b,a);
if(!1==this._multiTouchAvail){var c=new f.WMPointer("const",0);c.begin(b,a);this._touchList.set("const",c)}f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEventInput(1,"input_click",b,a,this._pointer._getSwipe()))},_onTouchUp:function(a){var b=a.viewX/this._scale,c=a.viewY/this._scale,b=b+this._offset.x,c=c+this._offset.y;this._touchList.get(r.string(a.id)).end(b,c);0<this._touchList.get(r.string(a.id))._getIndex()&&f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEventInput(0,
"input_click",b,c,this._touchList.get(r.string(a.id))._getSwipe()))},_onTouchMove:function(a){var b=a.viewX/this._scale,c=a.viewY/this._scale,b=b+this._offset.x,c=c+this._offset.y;this._touchList.get(r.string(a.id)).move(b,c);0<this._touchList.get(r.string(a.id))._getIndex()&&f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEventInput(2,"input_click",b,c,this._touchList.get(r.string(a.id))._getSwipe()))},_onTouchDown:function(a){var b=0,c=!1;do for(var c=!0,g=this._touchList.iterator();g.hasNext();){var d=
g.next();if(b==d._getIndex()){b++;c=!1;break}}while(!1==c);c=new f.WMPointer(r.string(a.id),b);this._touchList.set(c._getId(),c);g=a.viewX/this._scale;a=a.viewY/this._scale;g+=this._offset.x;a+=this._offset.y;c.begin(g,a);0<b&&f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEventInput(1,"input_click",g,a,c._getSwipe()))},_isInputDown:function(a){for(var b=0,c=this._keyCodes.get(a);b<c.length;){var g=c[b];++b;if(!0==this._keyDown.get(g))return!0}b=0;for(c=this._virtualCodes.get(a);b<
c.length;)if(a=c[b],++b,!0==this._virtualDown.get(a))return!0;return!1},_onKeyUp:function(a){var b=r.string(a.key);this._keyDown.exists(b)&&this._keyDown.set(b,!1);f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEventData(C.ConstantsCloud.EVENT_INPUT_ARBITRARY_KEY,{key:a.key,state:0}))},_onKeyDown:function(a){var b=r.string(a.key);this._keyDown.exists(b)&&this._keyDown.set(b,!0);f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEventData(C.ConstantsCloud.EVENT_INPUT_ARBITRARY_KEY,
{key:a.key,state:1}))},getInput:function(a){return this._inputDown.get(a)},registerInput:function(a,b,c){!1==this._inputDown.exists(a)&&(this._inputDown.set(a,!1),this._keyCodes.set(a,[]),this._virtualCodes.set(a,[]));if(null!=b)for(var g=0;g<b.length;){var d=b[g];++g;this._keyCodes.get(a).push(r.string(d));this._keyDown.set(r.string(d),!1)}if(null!=c)for(g=0;g<c.length;)b=c[g],++g,this._virtualCodes.get(a).push(b),this._virtualDown.set(b,!1)},doDepthTestOnWorldCoordinates:function(a,b){return o.Sprite.hitTest(z.root,
(a-this._offset.x)*this._scale,(b-this._offset.y)*this._scale)},prime:function(){this._multiTouchAvail=z._platform.getTouch().get_supported();z._platform.getKeyboard().down.connect(w(this,this._onKeyDown));z._platform.getKeyboard().up.connect(w(this,this._onKeyUp));this._multiTouchAvail&&(z._platform.getTouch().down.connect(w(this,this._onTouchDown)),z._platform.getTouch().move.connect(w(this,this._onTouchMove)),z._platform.getTouch().up.connect(w(this,this._onTouchUp)));z._platform.getPointer().down.connect(w(this,
this._onPointerDown));z._platform.getPointer().move.connect(w(this,this._onPointerMove));z._platform.getPointer().up.connect(w(this,this._onPointerUp))},_getMultiTouch:function(){return this._touchList},_getPointer:function(){return this._pointer},_setOffset:function(a){return this._offset=a},_getOffset:function(){return this._offset},_setScale:function(a){this._scale=a;0==this._scale&&(this._scale=0.01);return this._scale},_getScale:function(){return this._scale},update:function(a){for(var b=this._inputDown.keys();b.hasNext();){var c=
b.next();"input_click"!=c&&(!0==this._inputDown.get(c)?!1==this._isInputDown(c)&&(this._inputDown.set(c,!1),f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEventInput(0,c,0,0))):!0==this._isInputDown(c)&&(this._inputDown.set(c,!0),f.WorkinCloud.instance._getDispatcher().dispatchEvent(new n.WMEventInput(1,c,0,0))))}this._pointer.update(a);for(b=this._touchList.iterator();b.hasNext();)c=b.next(),c._getPhase()==n.WMEventInput.PHASE_UP?this._touchRemoval.push(c._getId()):c.update(a);a=0;
for(b=this._touchRemoval;a<b.length;)c=b[a],++a,this._touchList.get(c).dispose(),this._touchList.remove(c);for(;0<this._touchRemoval.length;)this._touchRemoval.pop()},__class__:f.WMInput,__properties__:{set_scale:"_setScale",get_scale:"_getScale",get_multiTouch:"_getMultiTouch"}};f.WMPointer=function(a,b){this.SWIPE_DOWN=4;this.SWIPE_UP=3;this.SWIPE_RIGHT=2;this.SWIPE_LEFT=1;this.SWIPE_NONE=0;this._resetDeltaLine=!0;this._timer=f.WMPointer._DELTA_TIMEOUT;this._id=a;this._index=b;this._origin=new h.WorkinPoint(0,
0);this._current=new h.WorkinPoint(0,0);this._last=new h.WorkinPoint(0,0);this._delta=new h.WorkinPoint(0,0);this._motionDelta=new h.WorkinLine;this._line=new h.WorkinLine(new h.WorkinPoint(0,0),new h.WorkinPoint(0,0));this._deltaLine=this._line.copy();this._camera=new h.WorkinCamera(0,0);this._phase=n.WMEventInput.PHASE_UP;this._swipe=this.SWIPE_NONE;this._consumed=!1};j["com.workinman.utils.WMPointer"]=f.WMPointer;f.WMPointer.__name__=["com","workinman","utils","WMPointer"];f.WMPointer.prototype=
{update:function(a){this._resetDeltaLine=!0;this._timer-=a;0>this._timer&&(this._timer=f.WMPointer._DELTA_TIMEOUT,this._deltaLine.originToPoint(this._current))},_updateInfo:function(a,b){this._last.toPoint(this._current);this._current.to(a,b);this._current.x+=this._camera._getPos().x-this._camera._getScreenCenterX();this._current.y+=this._camera._getPos().y-this._camera._getScreenCenterY();this._delta.toPoint(this._current);this._delta.subtractPoint(this._last);this._deltaLine.to(this._origin,this._current);
this._motionDelta.to(this._motionDelta._getP1(),this._current)},_testSwipe:function(){if(!1==this._consumed){var a=this._origin.x-this._current.x,b=this._origin.y-this._current.y;this._swipe=Math.abs(a)>=f.WMPointer._DELTA_ALLOWANCE&&Math.abs(b)<f.WMPointer._DELTA_ALLOWANCE?0<a?this.SWIPE_LEFT:this.SWIPE_RIGHT:Math.abs(b)>=f.WMPointer._DELTA_ALLOWANCE&&Math.abs(a)<f.WMPointer._DELTA_ALLOWANCE?0<b?this.SWIPE_UP:this.SWIPE_DOWN:this.SWIPE_NONE}else this._swipe=this.SWIPE_NONE},end:function(a,b){this._phase=
n.WMEventInput.PHASE_UP;this._updateInfo(a,b);this._testSwipe();this._line.endToPoint(this._current)},move:function(a,b){this._updateInfo(a,b);!1!=f.WorkinCloud.instance._getInput().getInput("input_click")&&(this._phase=n.WMEventInput.PHASE_MOVE,this._testSwipe(),this._line.endToPoint(this._current))},begin:function(a,b){this._origin.to(a,b);this._origin.x+=this._camera._getPos().x-this._camera._getScreenCenterX();this._origin.y+=this._camera._getPos().y-this._camera._getScreenCenterY();this._current.toPoint(this._origin);
this._last.toPoint(this._origin);this._delta.to(0,0);this._line.to(this._origin,this._current);this._deltaLine.to(this._origin,this._current);this._motionDelta.to(this._origin,this._current);this._consumed=!1;this._phase=n.WMEventInput.PHASE_DOWN;this._swipe=this.SWIPE_NONE},_getDeltaLine:function(){if(!1==this._resetDeltaLine)return this._deltaLine;this._deltaLine.endToPoint(this._current);this._resetDeltaLine=!1;return this._deltaLine},_getMotionDelta:function(){return this._motionDelta},_setIndex:function(a){return this._index=
a},_getIndex:function(){return this._index},_getId:function(){return this._id},_setConsumed:function(a){return this._consumed=a},_getConsumed:function(){return this._consumed},_getSwipe:function(){return this._swipe},_getLine:function(){return this._line},_getDeltaPos:function(){return this._delta},_getLastPos:function(){return this._last},_getCurrentPos:function(){return this._current},_getOriginPos:function(){return this._origin},_getPhase:function(){return this._phase},dispose:function(){this._motionDelta.dispose();
this._delta=this._last=this._current=this._origin=this._motionDelta=null;this._line.dispose();this._line=null;this._deltaLine.dispose();this._camera=this._deltaLine=null},__class__:f.WMPointer,__properties__:{get_phase:"_getPhase",get_swipe:"_getSwipe",set_consumed:"_setConsumed",get_consumed:"_getConsumed",get_id:"_getId",set_index:"_setIndex",get_index:"_getIndex"}};f.WMLocalize=function(){};j["com.workinman.utils.WMLocalize"]=f.WMLocalize;f.WMLocalize.__name__=["com","workinman","utils","WMLocalize"];
f.WMLocalize.prototype={getData:function(a,b){null==b&&(b="");""==b&&(b=C.ConstantsCloud.LOCALIZATION_XML_PATH+"translation_"+f.WorkinCloud.instance.getString(C.ConstantsCloud.STRING_REGION_ID)+".xml");for(var c=f.WorkinCloud.instance._getAssets().getXML(b).nodes.resolve("string").iterator();c.hasNext();){var g=c.next();if(g.att.resolve("id")==a)return new f.WMLocalizedData(g.att.resolve("id"),g.getInnerData(),g.att.resolve("fontName"),r.parseFloat(g.att.resolve("fontScale")),r.parseFloat(g.att.resolve("offsetX")),
r.parseFloat(g.att.resolve("offsetY")))}f.WorkinCloud.instance.log("[WMLocalize] ERROR: No localization data for : "+a);return new f.WMLocalizedData(a,"","",1,0,0)},__class__:f.WMLocalize};f.WMLocalizedData=function(a,b,c,g,d,e){this._id=a;this._string=b;this._fontName=c;this._scale=g;this._offsetX=d;this._offsetY=e};j["com.workinman.utils.WMLocalizedData"]=f.WMLocalizedData;f.WMLocalizedData.__name__=["com","workinman","utils","WMLocalizedData"];f.WMLocalizedData.prototype={_getOffsetY:function(){return this._offsetY},
_getOffsetX:function(){return this._offsetX},_getScale:function(){return this._scale},_getFontName:function(){return this._fontName},_getString:function(){return this._string},_getId:function(){return this._id},__class__:f.WMLocalizedData,__properties__:{get_string:"_getString",get_fontName:"_getFontName",get_scale:"_getScale",get_offsetX:"_getOffsetX",get_offsetY:"_getOffsetY"}};f.WMSound=function(){this._musicId="";this._musicGain=1;this._musicPlaying=null;this._flagSystemMute=this._flagMuted=!1;
this._mixer=new H.Mixer;this._sounds=[]};j["com.workinman.utils.WMSound"]=f.WMSound;f.WMSound.__name__=["com","workinman","utils","WMSound"];f.WMSound.prototype={_getMusicPlaying:function(){return this._musicPlaying},update:function(a){C.ConstantsCloud.getIsAndroid()&&null!=this._musicPlaying&&0.95<=this._musicPlaying._getPlayback().get_position()/this._musicPlaying._getSound().get_duration()&&L.setProperty(this._musicPlaying._getPlayback(),"position",0);for(var b=0;b<this._sounds.length;){if(this._sounds[b]._getFade()==
f.WMSound.FADE_OUT){if(0<this._sounds[b]._getPlayback().volume._value){var c=this._sounds[b]._getPlayback().volume;c.set__(c._value-a*this._sounds[b]._getFadeSpeed());0>=this._sounds[b]._getPlayback().volume._value&&(this._sounds[b].setFade(f.WMSound.FADE_NONE),this._sounds[b]._getPlayback().volume.set__(0))}}else this._sounds[b]._getFade()==f.WMSound.FADE_IN&&this._sounds[b]._getPlayback().volume._value<this._sounds[b].volume&&(c=this._sounds[b]._getPlayback().volume,c.set__(c._value+a*this._sounds[b]._getFadeSpeed()),
this._sounds[b]._getPlayback().volume._value>=this._sounds[b].volume&&(this._sounds[b].setFade(f.WMSound.FADE_NONE),this._sounds[b]._getPlayback().volume.set__(this._sounds[b].volume)));b++}null!=this._getMusicPlaying()&&(this._getMusicPlaying()._getFade()==f.WMSound.FADE_OUT?0<this._getMusicPlaying()._getPlayback().volume._value&&(c=this._getMusicPlaying()._getPlayback().volume,c.set__(c._value-a*this._getMusicPlaying()._getFadeSpeed()),0>=this._getMusicPlaying()._getPlayback().volume._value&&(this._getMusicPlaying().setFade(f.WMSound.FADE_NONE),
this._getMusicPlaying()._getPlayback().volume.set__(0))):this._getMusicPlaying()._getFade()==f.WMSound.FADE_IN&&this._getMusicPlaying()._getPlayback().volume._value<this._getMusicPlaying().volume&&(c=this._getMusicPlaying()._getPlayback().volume,c.set__(c._value+a*this._getMusicPlaying()._getFadeSpeed()),this._getMusicPlaying()._getPlayback().volume._value>=this._getMusicPlaying().volume&&(this._getMusicPlaying().setFade(f.WMSound.FADE_NONE),this._getMusicPlaying()._getPlayback().volume.set__(this._getMusicPlaying().volume))))},
_muteMusic:function(a){""!=this._musicId&&(a?this._musicPlaying=null:(this._musicPlaying=a=new f._WMSound.SoundDef(this._musicId,this._mixer.newSound(f.WorkinCloud.instance._getAssets().getSound(this._musicId),1),!0),a.playSound(this._musicGain)))},playMusic:function(a,b){null==b&&(b=1);if(!(C.ConstantsCloud.getIsAndroid()&&null!=this._musicPlaying||this._musicId==a))if(this._musicId=a,this._musicGain=b,!(this.getMute()||""==a)){null!=this._musicPlaying&&this._musicPlaying.dispose();var c=new f._WMSound.SoundDef(a,
this._mixer.newSound(f.WorkinCloud.instance._getAssets().getSound(this._musicId),1),!0);this._musicPlaying=c;c.playSound(b)}},_muteAllToggle:function(a){if(a){for(this._mixer.stopAll();0<this._sounds.length;)this._sounds.splice(0,1);this._muteMusic(!0)}else a||this._muteMusic(!1)},playSound:function(a,b){null==b&&(b=1);if(!C.ConstantsCloud.getIsAndroid()&&!this.getMute()){for(var c=0;c<this._sounds.length;){if(this._sounds[c].id==a){this._sounds[c].playSound(b);return}c++}c=new f._WMSound.SoundDef(a,
this._mixer.newSound(f.WorkinCloud.instance._getAssets().getSound(a),4),!1);this._sounds.push(c);c.playSound(b)}},setMute:function(a){this._flagMuted=a;this._flagSystemMute||this._muteAllToggle(this._flagMuted)},getMute:function(){return this._flagSystemMute||this._flagMuted},__class__:f.WMSound,__properties__:{get_musicPlaying:"_getMusicPlaying"}};f._WMSound={};f._WMSound.SoundDef=function(a,b,c){null==c&&(c=!1);this.id=a;this.isMusic=c;this.volume=1;this._flagPlayed=this._flagHasSound=!1;this._sound=
b;this._fade=f.WMSound.FADE_NONE;this._fadeSpeed=1};j["com.workinman.utils._WMSound.SoundDef"]=f._WMSound.SoundDef;f._WMSound.SoundDef.__name__=["com","workinman","utils","_WMSound","SoundDef"];f._WMSound.SoundDef.prototype={playSound:function(a){null==a&&(a=1);this.volume=a;this._playback=C.ConstantsCloud.getIsAndroid()?this._sound.play(a):this.isMusic?this._sound.loop(a):this._sound.play(a)},setFade:function(a,b){null==b&&(b=1);this._fade=a;this._fadeSpeed=b},_getFadeSpeed:function(){return this._fadeSpeed},
_getFade:function(){return this._fade},_setPlayback:function(a){return this._playback=a},_getPlayback:function(){return this._playback},_getSound:function(){return this._sound},dispose:function(){this._playback.dispose();this._playback=null},__class__:f._WMSound.SoundDef,__properties__:{get_sound:"_getSound",set_playback:"_setPlayback",get_playback:"_getPlayback",get_fade:"_getFade",get_fadeSpeed:"_getFadeSpeed"}};H={Mixer:function(){this._sounds=[]}};j["flambe.sound.Mixer"]=H.Mixer;H.Mixer.__name__=
["flambe","sound","Mixer"];H.Mixer.__super__=P;H.Mixer.prototype=t(P.prototype,{onRemoved:function(){this.stopAll();this._sounds=[]},stopAll:function(){for(var a=0,b=this._sounds;a<b.length;){var c=b[a];++a;c.dispose()}},newSound:function(a,b){null==b&&(b=2147483647);var c=new H._Mixer.MixerSound(a,b);this._sounds.push(c);return c},get_name:function(){return"Mixer_2"},__class__:H.Mixer});f.WorkinCloud=function(){this._TIMER_STACK=0.1;this._values=new G;this._defaults=new G;this._dispatcher=new n.WMEventDispatcher;
this._input=new f.WMInput;this._assets=new f.WMAssetManager;this._sound=new f.WMSound;this._localize=new f.WMLocalize;this._stack=[];this._timerStack=-1;this._flagStackPaused=!1;this.setString(C.ConstantsCloud.STRING_REGION_ID,"en")};j["com.workinman.utils.WorkinCloud"]=f.WorkinCloud;f.WorkinCloud.__name__=["com","workinman","utils","WorkinCloud"];f.WorkinCloud.prototype={_updateStack:function(a){1>this._stack.length||this._flagStackPaused||(this._timerStack-=a,0>this._timerStack&&(this._stack[0](),
this._stack.shift(),this._timerStack=this._TIMER_STACK))},unpauseStack:function(){this._flagStackPaused=!1},pauseStack:function(){this._flagStackPaused=!0},update:function(a){this._updateStack(a);this._input.update(a)},stack:function(a){this._timerStack=this._TIMER_STACK;for(var b=0;b<a.length;){var c=a[b];++b;this._stack.push(c)}},_updateDisplays:function(a){this._dispatcher.dispatchEvent(new n.WMEventData(k.Display.EVENT_UPDATE_DISPLAY,{valueID:a}))},sharedObjectSetData:function(a,b){try{var c=
R.WMSharedObject.getLocal(a);c._setData(b);c.flush();c.dispose()}catch(g){null}},sharedObjectGetData:function(a){try{var b=R.WMSharedObject.getLocal(a),c=b._getData();b.dispose();return c}catch(g){return{}}},resetValue:function(a){this._values.set(a,this._defaults.get(a));this._updateDisplays(a)},modifyValue:function(a,b){null==b&&(b=1);this._values.set(a,this.getFloat(a)+b);this._updateDisplays(a);return this.getFloat(a)},setValue:function(a,b){this._values.set(a,b);!1==this._defaults.exists(a)&&
this.setDefault(a,b);this._updateDisplays(a)},getValue:function(a){return this._values.get(a)},setDefault:function(a,b){this._defaults.set(a,b);this.resetValue(a)},getString:function(a){return this._values.get(a)},setString:function(a,b){this.setValue(a,b)},getInt:function(a){return this._values.get(a)},modifyInt:function(a,b){return Math.floor(this.modifyValue(a,b))},setInt:function(a,b){this.setValue(a,b)},getFloat:function(a){return this._values.get(a)},modifyFloat:function(a,b){return this.modifyValue(a,
b)},setFloat:function(a,b){this.setValue(a,b)},getBool:function(a){return this._values.get(a)},setBool:function(a,b){this.setValue(a,b)},_getStackLength:function(){return this._stack.length},_getLocalize:function(){return this._localize},_getSound:function(){return this._sound},_getAssets:function(){return this._assets},_getInput:function(){return this._input},_getDispatcher:function(){return this._dispatcher},log:function(){null},__class__:f.WorkinCloud,__properties__:{get_dispatcher:"_getDispatcher",
get_input:"_getInput",get_assets:"_getAssets",get_sound:"_getSound",get_localize:"_getLocalize"}};f.WorkinUtils=function(){};j["com.workinman.utils.WorkinUtils"]=f.WorkinUtils;f.WorkinUtils.__name__=["com","workinman","utils","WorkinUtils"];f.WorkinUtils.getRandom=function(a,b,c){null==c&&(c=!0);var g=Math.random();1==g&&(g=0.99);return c?a+Math.floor(g*(b+1-a)):a+g*(b-a)};O=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};j["flambe.Entity"]=O;O.__name__=
["flambe","Entity"];O.__interfaces__=[m.Disposable];O.prototype={dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},removeChild:function(a){for(var b=null,c=this.firstChild;null!=c;){var g=c.next;if(c==a){null==b?this.firstChild=g:b.next=g;c.parent=null;c.next=null;break}b=c;c=g}},addChild:function(a,b){null==b&&(b=
!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var c=null,g=this.firstChild;null!=g;)c=g,g=g.next;null!=c?c.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},remove:function(a){for(var b=null,c=this.firstComponent;null!=c;){var g=c.next;if(c==a){null==b?this.firstComponent=g:b._internal_init(this,g);delete this._compMap[c.get_name()];c.onRemoved();c._internal_init(null,null);break}b=c;c=g}},add:function(a){a.dispose();var b=a.get_name(),c=this._compMap[b];
null!=c&&this.remove(c);this._compMap[b]=a;b=null;for(c=this.firstComponent;null!=c;)b=c,c=c.next;null!=b?b.next=a:this.firstComponent=a;a._internal_init(this,null);a.onAdded();return this},__class__:O};m.PackageLog=function(){};j["flambe.util.PackageLog"]=m.PackageLog;m.PackageLog.__name__=["flambe","util","PackageLog"];e={Platform:function(){}};j["flambe.platform.Platform"]=e.Platform;e.Platform.__name__=["flambe","platform","Platform"];e.Platform.prototype={__class__:e.Platform};e.html={};e.html.HtmlPlatform=
function(){};j["flambe.platform.html.HtmlPlatform"]=e.html.HtmlPlatform;e.html.HtmlPlatform.__name__=["flambe","platform","html","HtmlPlatform"];e.html.HtmlPlatform.__interfaces__=[e.Platform];e.html.HtmlPlatform.prototype={createRenderer:function(a){return new e.html.CanvasRenderer(a)},getY:function(a,b){return this._stage.scaleFactor*(a.clientY-b.top)},getX:function(a,b){return this._stage.scaleFactor*(a.clientX-b.left)},getRenderer:function(){return this._renderer},getExternal:function(){null==
this._external&&(this._external=new e.html.HtmlExternal);return this._external},getWeb:function(){null==this._web&&(this._web=new e.html.HtmlWeb(this._container));return this._web},getKeyboard:function(){return this._keyboard},getTouch:function(){return this._touch},getMouse:function(){return this._mouse},getPointer:function(){return this._pointer},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer))},
getTime:function(){return Date.now()/1E3},createLogHandler:function(a){return e.html.HtmlLogHandler.isSupported()?new e.html.HtmlLogHandler(a):null},getLocale:function(){var a=x.window.navigator.language;null==a&&(a=x.window.navigator.userLanguage);return a},getStorage:function(){if(null==this._storage){var a=null;try{a=x.window.localStorage}catch(b){}null!=a?this._storage=new e.html.HtmlStorage(a):(K.logger.warn("localStorage is unavailable, falling back to unpersisted storage",null),this._storage=
new e.DummyStorage)}return this._storage},getStage:function(){return this._stage},loadAssetPack:function(a){return(new e.html.HtmlAssetPackLoader(this,a)).promise},init:function(){var a=this;K.logger.info("Initializing HTML platform",null);e.html.HtmlUtil.fixAndroidMath();var b=null;try{b=x.window.flambe.canvas}catch(c){}b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.setAttribute("moz-opaque","true");this._stage=new e.html.HtmlStage(b);this._pointer=new e.BasicPointer;this._mouse=new e.html.HtmlMouse(this._pointer,
b);this._keyboard=new e.BasicKeyboard;this._renderer=this.createRenderer(b);z.hasGPU.set__(!0);this.mainLoop=new e.MainLoop;this._container=b.parentNode;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var g=0,d=function(c){if(!(1E3>c.timeStamp-g)){var d=b.getBoundingClientRect(),e=a.getX(c,d),d=a.getY(c,d);switch(c.type){case "mousedown":c.target==b&&(c.preventDefault(),a._mouse.submitDown(e,d,c.button),c.target.focus());
break;case "mousemove":a._mouse.submitMove(e,d);break;case "mouseup":a._mouse.submitUp(e,d,c.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(e,d,"mousewheel"==c.type?c.wheelDelta/40:-c.detail)&&c.preventDefault()}}};window.addEventListener("mousedown",d,!1);window.addEventListener("mousemove",d,!1);window.addEventListener("mouseup",d,!1);b.addEventListener("mousewheel",d,!1);b.addEventListener("DOMMouseScroll",d,!1);var f="undefined"!=typeof x.window.ontouchstart,d="msMaxTouchPoints"in
window.navigator&&1<window.navigator.msMaxTouchPoints;if(f||d){var i=new e.BasicTouch(this._pointer,d?window.navigator.msMaxTouchPoints:4);this._touch=i;d=function(b){var c=f?b.changedTouches:[b],d=b.target.getBoundingClientRect();g=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":b.preventDefault();e.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER&&e.html.HtmlUtil.hideMobileBrowser();for(b=0;b<c.length;){var h=c[b];++b;var j=a.getX(h,d),ea=a.getY(h,d),h=(f?h.identifier:h.pointerId)|0;i.submitDown(h,
j,ea)}break;case "touchmove":case "MSPointerMove":b.preventDefault();for(b=0;b<c.length;)h=c[b],++b,j=a.getX(h,d),ea=a.getY(h,d),h=(f?h.identifier:h.pointerId)|0,i.submitMove(h,j,ea);break;case "touchend":case "touchcancel":case "MSPointerUp":for(b=0;b<c.length;)h=c[b],++b,j=a.getX(h,d),ea=a.getY(h,d),h=(f?h.identifier:h.pointerId)|0,i.submitUp(h,j,ea)}};f?(b.addEventListener("touchstart",d,!1),b.addEventListener("touchmove",d,!1),b.addEventListener("touchend",d,!1),b.addEventListener("touchcancel",
d,!1)):(b.addEventListener("MSPointerDown",d,!1),b.addEventListener("MSPointerMove",d,!1),b.addEventListener("MSPointerUp",d,!1))}else this._touch=new e.DummyTouch;d=function(b){switch(b.type){case "keydown":a._keyboard.submitDown(b.keyCode)&&b.preventDefault();break;case "keyup":a._keyboard.submitUp(b.keyCode)}};b.addEventListener("keydown",d,!1);b.addEventListener("keyup",d,!1);var h=x.window.onerror;x.window.onerror=function(a,b,c){z.uncaughtError.emit1(a);return null!=h?h(a,b,c):!1};var j=e.html.HtmlUtil.loadExtension("hidden",
x.document);null!=j.value&&(d=function(){z.hidden.set__(L.field(x.document,j.field))},d(),x.document.addEventListener(j.prefix+"visibilitychange",d,!1),z.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)}));this._lastUpdate=Date.now();this._skipFrame=!1;var l=e.html.HtmlUtil.loadExtension("requestAnimationFrame").value;if(null!=l){var k=x.window.performance,m=null!=k&&e.html.HtmlUtil.polyfill("now",k);m?this._lastUpdate=k.now():K.logger.warn("No monotonic timer support, falling back to the system date",
null);var n=null,n=function(c){a.update(m?k.now():c);l(n,b)};l(n,b)}else K.logger.warn("No requestAnimationFrame support, falling back to setInterval",null),x.window.setInterval(function(){a.update(Date.now())},1E3/60)},__class__:e.html.HtmlPlatform};m.Value=function(a,b){this._value=a;null!=b&&(this._changed=new m.Signal2(b))};j["flambe.util.Value"]=m.Value;m.Value.__name__=["flambe","util","Value"];m.Value.prototype={get_changed:function(){null==this._changed&&(this._changed=new m.Signal2);return this._changed},
set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit2(a,b));return a},watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},__class__:m.Value,__properties__:{set__:"set__",get__:"get__",get_changed:"get_changed"}};m.SignalConnection=function(a,b){this._internal_next=null;this._signal=a;this._internal_listener=b;this.stayInList=!0};j["flambe.util.SignalConnection"]=m.SignalConnection;m.SignalConnection.__name__=["flambe","util",
"SignalConnection"];m.SignalConnection.__interfaces__=[m.Disposable];m.SignalConnection.prototype={dispose:function(){null!=this._signal&&(this._signal._internal_disconnect(this),this._signal=null)},once:function(){this.stayInList=!1;return this},__class__:m.SignalConnection};m.SignalBase=function(a){this._head=null!=a?new m.SignalConnection(this,a):null;this._deferredTasks=null};j["flambe.util.SignalBase"]=m.SignalBase;m.SignalBase.__name__=["flambe","util","SignalBase"];m.SignalBase.prototype={listRemove:function(a){for(var b=
null,c=this._head;null!=c;){if(c==a){a=c._internal_next;null==b?this._head=a:b._internal_next=a;break}b=c;c=c._internal_next}},listAdd:function(a,b){if(b)a._internal_next=this._head,this._head=a;else{for(var c=null,d=this._head;null!=d;)c=d,d=d._internal_next;null!=c?c._internal_next=a:this._head=a}},didEmit:function(a){for(this._head=a;null!=this._deferredTasks;)this._deferredTasks.fn(),this._deferredTasks=this._deferredTasks.next},willEmit:function(){var a=this._head;this._head=m.SignalBase.DISPATCHING_SENTINEL;
return a},defer:function(a){for(var b=null,c=this._deferredTasks;null!=c;)b=c,c=c.next;a=new m._SignalBase.Task(a);null!=b?b.next=a:this._deferredTasks=a},emit2:function(a,b){for(var c=this.willEmit(),d=c;null!=d;)d._internal_listener(a,b),d.stayInList||d.dispose(),d=d._internal_next;this.didEmit(c)},emit1:function(a){for(var b=this.willEmit(),c=b;null!=c;)c._internal_listener(a),c.stayInList||c.dispose(),c=c._internal_next;this.didEmit(b)},emit0:function(){for(var a=this.willEmit(),b=a;null!=b;)b._internal_listener(),
b.stayInList||b.dispose(),b=b._internal_next;this.didEmit(a)},_internal_disconnect:function(a){var b=this;this._head==m.SignalBase.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},connectImpl:function(a,b){var c=this,d=new m.SignalConnection(this,a);this._head==m.SignalBase.DISPATCHING_SENTINEL?this.defer(function(){c.listAdd(d,b)}):this.listAdd(d,b);return d},__class__:m.SignalBase};m.Signal2=function(a){m.SignalBase.call(this,a)};j["flambe.util.Signal2"]=m.Signal2;
m.Signal2.__name__=["flambe","util","Signal2"];m.Signal2.__super__=m.SignalBase;m.Signal2.prototype=t(m.SignalBase.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:m.Signal2});m.Signal1=function(a){m.SignalBase.call(this,a)};j["flambe.util.Signal1"]=m.Signal1;m.Signal1.__name__=["flambe","util","Signal1"];m.Signal1.__super__=m.SignalBase;m.Signal1.prototype=t(m.SignalBase.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:m.Signal1});
F={AnimatedFloat:function(a,b){m.Value.call(this,a,b)}};j["flambe.animation.AnimatedFloat"]=F.AnimatedFloat;F.AnimatedFloat.__name__=["flambe","animation","AnimatedFloat"];F.AnimatedFloat.__super__=m.Value;F.AnimatedFloat.prototype=t(m.Value.prototype,{set_behavior:function(a){this._behavior=a;this.update(0);return a},update:function(a){null!=this._behavior&&(m.Value.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},set__:function(a){this._behavior=
null;return m.Value.prototype.set__.call(this,a)},__class__:F.AnimatedFloat});z=function(){};j["flambe.System"]=z;z.__name__=["flambe","System"];z.__properties__={get_keyboard:"get_keyboard",get_touch:"get_touch",get_pointer:"get_pointer",get_stage:"get_stage"};z.init=function(){z._calledInit||(z._platform.init(),z._calledInit=!0)};z.createTexture=function(a,b){return z._platform.getRenderer().createEmptyTexture(a,b)};m.Logger=function(a){this._handler=a};j["flambe.util.Logger"]=m.Logger;m.Logger.__name__=
["flambe","util","Logger"];m.Logger.prototype={log:function(a,b,c){null!=this._handler&&(null==b&&(b=""),null!=c&&(b=m.Strings.withFields(b,c)),this._handler.log(a,b))},warn:function(a,b){this.log(m.LogLevel.Warn,a,b)},info:function(a,b){this.log(m.LogLevel.Info,a,b)},__class__:m.Logger};K=function(){};j["flambe.Log"]=K;K.__name__=["flambe","Log"];K.__super__=m.PackageLog;K.prototype=t(m.PackageLog.prototype,{__class__:K});y=function(a){null==a&&(a=1);this._internal_realDt=0;this.scale=new F.AnimatedFloat(a)};
j["flambe.SpeedAdjuster"]=y;y.__name__=["flambe","SpeedAdjuster"];y.__super__=P;y.prototype=t(P.prototype,{onUpdate:function(a){0<this._internal_realDt&&(a=this._internal_realDt,this._internal_realDt=0);this.scale.update(a)},get_name:function(){return"SpeedAdjuster_5"},__class__:y});F.Behavior=function(){};j["flambe.animation.Behavior"]=F.Behavior;F.Behavior.__name__=["flambe","animation","Behavior"];F.Behavior.prototype={__class__:F.Behavior};F.Binding=function(){};j["flambe.animation.Binding"]=
F.Binding;F.Binding.__name__=["flambe","animation","Binding"];F.Binding.__interfaces__=[F.Behavior];F.Binding.prototype={isComplete:function(){return!1},update:function(){var a=this._target._value;return null!=this._fn?this._fn(a):a},__class__:F.Binding};B={};B.AssetType=j["flambe.asset.AssetType"]={__ename__:["flambe","asset","AssetType"],__constructs__:["Image","Audio","Data"]};B.AssetType.Image=["Image",0];B.AssetType.Image.toString=q;B.AssetType.Image.__enum__=B.AssetType;B.AssetType.Audio=["Audio",
1];B.AssetType.Audio.toString=q;B.AssetType.Audio.__enum__=B.AssetType;B.AssetType.Data=["Data",2];B.AssetType.Data.toString=q;B.AssetType.Data.__enum__=B.AssetType;B.AssetEntry=function(a,b,c,d){this.name=a;this.url=b;this.type=c;this.bytes=d};j["flambe.asset.AssetEntry"]=B.AssetEntry;B.AssetEntry.__name__=["flambe","asset","AssetEntry"];B.AssetEntry.prototype={getUrlExtension:function(){return m.Strings.getFileExtension(this.url.split("?")[0]).toLowerCase()},__class__:B.AssetEntry};B.AssetPack=
function(){};j["flambe.asset.AssetPack"]=B.AssetPack;B.AssetPack.__name__=["flambe","asset","AssetPack"];B.AssetPack.prototype={__class__:B.AssetPack,__properties__:{get_manifest:"get_manifest"}};M=void 0;x=void 0;M=function(){};j["js.Boot"]=M;M.__name__=["js","Boot"];M.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];
for(var c=a[0]+"(",b=b+"\t",d=2,e=a.length;d<e;)var f=d++,c=2!=f?c+(","+M.__string_rec(a[f],b)):c+M.__string_rec(a[f],b);return c+")"}d=a.length;c="[";b+="\t";for(e=0;e<d;)f=e++,c+=(0<f?",":"")+M.__string_rec(a[f],b);return c+"]"}try{e=a.toString}catch(h){return"???"}if(null!=e&&e!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;e=null;c="{\n";b+="\t";d=null!=a.hasOwnProperty;for(e in a)if(!d||a.hasOwnProperty(e))"prototype"==e||"__class__"==e||"__super__"==e||"__interfaces__"==e||
"__properties__"==e||(2!=c.length&&(c+=", \n"),c+=b+e+" : "+M.__string_rec(a[e],b));b=b.substring(1);return c+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};M.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<e;){var f=d++,f=c[f];if(f==b||M.__interfLoop(f,b))return!0}return M.__interfLoop(a.__super__,b)};M.__instanceof=function(a,b){try{if(a instanceof b)return b==Array?null==a.__enum__:
!0;if(M.__interfLoop(a.__class__,b))return!0}catch(c){if(null==b)return!1}switch(b){case ia:return Math.ceil(a%2147483648)===a;case ga:return"number"==typeof a;case ha:return!0===a||!1===a;case String:return"string"==typeof a;case ja:return!0;default:if(null==a)return!1;if(b==ka&&null!=a.__name__)return!0;null;if(b==la&&null!=a.__ename__)return!0;null;return a.__enum__==b}};M.__cast=function(a,b){if(M.__instanceof(a,b))return a;throw"Cannot cast "+r.string(a)+" to "+r.string(b);};m.Strings=function(){};
j["flambe.util.Strings"]=m.Strings;m.Strings.__name__=["flambe","util","Strings"];m.Strings.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?A.substr(a,b+1,null):null};m.Strings.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?A.substr(a,0,b):a};m.Strings.joinPath=function(a,b){47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};m.Strings.withFields=function(a,b){var c=b.length;if(0<c){for(var a=a+(0<a.length?" [":"["),d=0;d<c;){0<d&&(a+=", ");var e=b[d],f=b[d+1];
if(M.__instanceof(f,Error)){var h=f.stack;null!=h&&(f=h)}a+=e+"="+r.string(f);d+=2}a+="]"}return a};x=function(){};j["js.Lib"]=x;x.__name__=["js","Lib"];B.Manifest=function(){this._entries=[]};j["flambe.asset.Manifest"]=B.Manifest;B.Manifest.__name__=["flambe","asset","Manifest"];B.Manifest.build=function(a,b){null==b&&(b=!0);var c=B.Manifest._buildManifest.get(a);if(null==c){if(b)throw m.Strings.withFields("Missing asset pack",["name",a]);return null}return c.clone()};B.Manifest.inferType=function(a){a=
m.Strings.getFileExtension(a.split("?")[0]);if(null!=a)switch(a.toLowerCase()){case "png":case "jpg":case "gif":return B.AssetType.Image;case "ogg":case "m4a":case "mp3":case "wav":return B.AssetType.Audio}return B.AssetType.Data};B.Manifest.createBuildManifests=function(){var a=new G;a.set("initial_load",[{name:"ui/splash/splash_btn_sound_on.png",md5:"df9561172983d115db1dddc1dbb47703",bytes:8146},{name:"ui/splash/splash_btn_sound_off.png",md5:"eaba59efb1e39e1f7dcfffc4952b88f9",bytes:5821},{name:"ui/splash/splash_bg.jpg",
md5:"8041bb7b9fa8c20efc83afcc884b8f27",bytes:2482201},{name:"ui/menu/menu_btn_sound_on.png",md5:"7a58346f6d439d7f51a3b3977b7e08db",bytes:13969},{name:"ui/menu/menu_btn_sound_off.png",md5:"093c5b62a372cd96d441eeb417c78b16",bytes:20042},{name:"audio/music.ogg",md5:"67ad4b9a03b376dd2218f2fc5d383507",bytes:177868},{name:"audio/music.mp3",md5:"50151b7725515254e84450aac3405ea4",bytes:93884},{name:"audio/crash.ogg",md5:"b929d7f56c4beb95f7ca9cc10ac985c3",bytes:17702},{name:"audio/crash.mp3",md5:"e074b55e74f2c150d2c417c53d58a481",
bytes:9247}]);a.set("gameplay_universal",[{name:"ui/quit_confirm/quit_confirm_container.png",md5:"601bd77989f50b1f0767918c0747ebbf",bytes:84242},{name:"ui/quit_confirm/quit_confirm_btn.png",md5:"b8934a479bdee78637a1eb0f760722ff",bytes:6603},{name:"ui/menu/menu_container.png",md5:"8860ddd2e5e245b377f2a88690f5da3a",bytes:263692},{name:"ui/menu/menu_btn_resume.png",md5:"3f3be704d591c5faf11262dd38ce8d86",bytes:11702},{name:"ui/menu/menu_btn_quit.png",md5:"942bb7210bd254de20ce64241bc0b640",bytes:12449},
{name:"ui/menu/menu_btn_help.png",md5:"39a999ce3819eaa74e9963d154ae764d",bytes:11429},{name:"ui/help/help_move_touch.png",md5:"898adcfa8fbeb13999742e345c47afa1",bytes:4972},{name:"ui/help/help_move.png",md5:"5a80297f4b5a3649463afdbdf715ab64",bytes:3039},{name:"ui/help/help_jump_touch.png",md5:"6244f6faa53fc117c713a245ea6863f6",bytes:4473},{name:"ui/help/help_jump.png",md5:"2076f06fe339d0cf7e22377a7d37f9e2",bytes:2508},{name:"ui/help/help_btn_back.png",md5:"7f9256860e95f7767f5d976b85bfc6d8",bytes:4457},
{name:"ui/help/help_backing.jpg",md5:"9b30f604017f574d47163d20fab0f789",bytes:76861},{name:"ui/gameplay_hud/pause_btn.png",md5:"3dc4b0a2f56069e453f76d79a2fbd1be",bytes:9106},{name:"ui/end_screen/play_again_button.png",md5:"8e24c0324a4d2dadcff1ca7c85a4367f",bytes:5544},{name:"ui/end_screen/game_over_txt_frame.png",md5:"05eec598f8adf933b28c5c93c54ecea4",bytes:41899},{name:"ui/end_screen/game_over_frame.png",md5:"899cf3fc513598718d8b43b29aed1004",bytes:189031},{name:"ui/end_screen/end_screen_bg.png",
md5:"ab08823bea291205445ee59502073e2a",bytes:257716},{name:"tracks/library.json",md5:"3c9891322f769d74e90cf2229adaffcc",bytes:12914},{name:"tracks/atlas1.png",md5:"b988e70b2a59c2f86f45f93094d990e8",bytes:3477},{name:"tracks/atlas0.png",md5:"cdb30c50d33856bb4e3e2ad2aa39e06c",bytes:157534},{name:"red_ranger/library.json",md5:"3ba62a6789f2e4554ade8899a2f4550e",bytes:27957},{name:"red_ranger/atlas0.png",md5:"04521bc85e2a313331b88661bb568b6e",bytes:182484},{name:"elements/player/cart.png",md5:"7409ab2de19dc70c7d1e90d21b76e024",
bytes:8340},{name:"elements/pickups/Cotton Candy.png",md5:"021dd08fc81e8c7699dfd23df0e227bf",bytes:2740},{name:"elements/pickups/Balloon.png",md5:"6f3782f530201469be9b34f9bed894c1",bytes:2095},{name:"elements/environment/midground_2.png",md5:"6a2047063868cbd293498a5d5fa6c74c",bytes:227303},{name:"elements/environment/midground_1.png",md5:"097774d961f293ee9fdd75e3b5c106ce",bytes:217727},{name:"elements/environment/foreground_2.png",md5:"55ff6bbfd4b6bd5fee8188b7f356e476",bytes:405381},{name:"elements/environment/foreground_1.png",
md5:"59a7328530d9bb9dbd145af12cf171eb",bytes:405146},{name:"elements/environment/background.jpg",md5:"89e85c7f21771f6ffcee2e3b953eaf52",bytes:83953},{name:"audio/pickup.ogg",md5:"6fef22bba62037008300999002f50890",bytes:34560},{name:"audio/pickup.mp3",md5:"d723a3956a0306c4088eae116ea6829d",bytes:26748},{name:"audio/ding.ogg",md5:"ff181d8362a6943958d252621e4f9b88",bytes:6620},{name:"audio/ding.mp3",md5:"9824bb0fd0477b2329044279401e67fc",bytes:5927}]);a.set("fonts_la",[{name:"Basic.png",md5:"6a36225f74ea1a7793667cffcb1047ce",
bytes:622185},{name:"Basic.fnt",md5:"a0e96df3ee1859e9a082bb8b061791c5",bytes:25155}]);a.set("fonts_kr",[{name:"Basic.png",md5:"6a36225f74ea1a7793667cffcb1047ce",bytes:622185},{name:"Basic.fnt",md5:"a0e96df3ee1859e9a082bb8b061791c5",bytes:25155}]);a.set("fonts_jp",[{name:"Basic.png",md5:"6a36225f74ea1a7793667cffcb1047ce",bytes:622185},{name:"Basic.fnt",md5:"a0e96df3ee1859e9a082bb8b061791c5",bytes:25155}]);a.set("fonts_en",[{name:"Basic2.png",md5:"a6ac3dfca1263dfc9c81df76c702edb8",bytes:79766},{name:"Basic2.fnt",
md5:"9c5c17c854b76108bb8e916033876f29",bytes:9584},{name:"Basic.png",md5:"3814b36cbe998dfcb69f220e6dc121cc",bytes:137227},{name:"Basic.fnt",md5:"1cc2a8ffa7023d472f77027c5116b112",bytes:9583}]);a.set("fonts_cn",[{name:"Basic.png",md5:"6a36225f74ea1a7793667cffcb1047ce",bytes:622185},{name:"Basic.fnt",md5:"a0e96df3ee1859e9a082bb8b061791c5",bytes:25155}]);a.set("bootstrap",[{name:"ui/loading_spinner.png",md5:"4d3d00e1e4ec16e9b3cbb531f6c59dcd",bytes:12504},{name:"ui/loading_panel_international.jpg",md5:"5ce3f69f108e75578abc00ce381e36a8",
bytes:18996},{name:"ui/loading_panel.jpg",md5:"12a1fff0444c2e8c43f8f7edcd467661",bytes:137182},{name:"ui/loading_bar_outline.png",md5:"655869802b6f3a1c36edf7cfb18bca4b",bytes:342},{name:"ui/loading_bar.png",md5:"35f0e3103ecfdb81e04812d7a20d83c0",bytes:249},{name:"config/translation_la.xml",md5:"28a1bfd27301c8a88f3ddd5759a3d87a",bytes:6933},{name:"config/translation_kr.xml",md5:"28a1bfd27301c8a88f3ddd5759a3d87a",bytes:6933},{name:"config/translation_jp.xml",md5:"28a1bfd27301c8a88f3ddd5759a3d87a",bytes:6933},
{name:"config/translation_en.xml",md5:"3d580cb685a16aca0bdd2ecb81fa5992",bytes:7170},{name:"config/translation_cn.xml",md5:"8f13a90264c87bb17d6bbe427cc8ce4c",bytes:13863},{name:"config/config.xml",md5:"f65b1d66081c71db44ed2d6a823ec1a8",bytes:1550},{name:"audio/silent.ogg",md5:"3526550092a0e091f382852de5ef2315",bytes:5514},{name:"audio/silent.mp3",md5:"ba9e6829ba32e427142251a85cbd4fbb",bytes:2114}]);a.set("air",[{name:"icons/icon48.png",md5:"e310873f7870789ec2ddffb01e3b9c23",bytes:9187},{name:"icons/icon32.png",
md5:"db4c0e02b46c24bfabbcf33c6807fbb8",bytes:6111},{name:"icons/icon16.png",md5:"9160a9857f1d99d4d1a5722de41941ba",bytes:3411},{name:"icons/icon128.png",md5:"0c8d573ff622474a53b7e4c76b75cda7",bytes:34016},{name:"Default.png",md5:"6617a9132c7566551711a15f42584d38",bytes:4588},{name:"Default-568h@2x.png",md5:"dc1b6528f2e9312e068aad2f53366b7e",bytes:4912}]);for(var b=new G,c=a.keys();c.hasNext();){var d=c.next(),e=new B.Manifest;e.set_relativeBasePath("assets");for(var f=0,h=a.get(d);f<h.length;){var i=
h[f];++f;var j=i.name,l=d+"/"+j+"?v="+r.string(i.md5),k=B.Manifest.inferType(j);if(k==B.AssetType.Image||k==B.AssetType.Audio)j=m.Strings.removeFileExtension(j);e.add(j,l,i.bytes,k)}b.set(d,e)}return b};B.Manifest.prototype={set_externalBasePath:function(a){this._externalBasePath=a;null!=a&&null;return a},get_externalBasePath:function(){return this._externalBasePath},set_relativeBasePath:function(a){this._relativeBasePath=a;null!=a&&null;return a},get_relativeBasePath:function(){return this._relativeBasePath},
getFullURL:function(a){var b=null!=this.get_externalBasePath()&&B.Manifest._supportsCrossOrigin?this.get_externalBasePath():this.get_relativeBasePath(),c=null!=this.get_externalBasePath()?this.get_externalBasePath():this.get_relativeBasePath();a.type==B.AssetType.Data&&(c=b);return null!=c?m.Strings.joinPath(c,a.url):a.url},clone:function(){var a=new B.Manifest;a.set_relativeBasePath(this.get_relativeBasePath());a.set_externalBasePath(this.get_externalBasePath());a._entries=this._entries.slice();
return a},iterator:function(){return A.iter(this._entries)},add:function(a,b,c,d){null==c&&(c=0);null==d&&(d=B.Manifest.inferType(b));a=new B.AssetEntry(a,b,d,c);this._entries.push(a);return a},__class__:B.Manifest,__properties__:{set_relativeBasePath:"set_relativeBasePath",get_relativeBasePath:"get_relativeBasePath",set_externalBasePath:"set_externalBasePath",get_externalBasePath:"get_externalBasePath"}};o={};o.BlendMode=j["flambe.display.BlendMode"]={__ename__:["flambe","display","BlendMode"],__constructs__:["Normal",
"Add","CopyExperimental"]};o.BlendMode.Normal=["Normal",0];o.BlendMode.Normal.toString=q;o.BlendMode.Normal.__enum__=o.BlendMode;o.BlendMode.Add=["Add",1];o.BlendMode.Add.toString=q;o.BlendMode.Add.__enum__=o.BlendMode;o.BlendMode.CopyExperimental=["CopyExperimental",2];o.BlendMode.CopyExperimental.toString=q;o.BlendMode.CopyExperimental.__enum__=o.BlendMode;J={Point:function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b}};j["flambe.math.Point"]=J.Point;J.Point.__name__=["flambe","math","Point"];
J.Point.prototype={__class__:J.Point};o.Sprite=function(){this.blendMode=this.scissor=null;var a=this;this._flags=11;this._localMatrix=new J.Matrix;var b=function(){a._flags|=12};this.x=new F.AnimatedFloat(0,b);this.y=new F.AnimatedFloat(0,b);this.rotation=new F.AnimatedFloat(0,b);this.scaleX=new F.AnimatedFloat(1,b);this.scaleY=new F.AnimatedFloat(1,b);this.anchorX=new F.AnimatedFloat(0,b);this.anchorY=new F.AnimatedFloat(0,b);this.alpha=new F.AnimatedFloat(1)};j["flambe.display.Sprite"]=o.Sprite;
o.Sprite.__name__=["flambe","display","Sprite"];o.Sprite.hitTest=function(a,b,c){var d=a._compMap.Sprite_1;if(null!=d){if(3!=(d._flags&3))return null;d.getLocalMatrix().inverseTransform(b,c,o.Sprite._scratchPoint)&&(b=o.Sprite._scratchPoint.x,c=o.Sprite._scratchPoint.y);var e=d.scissor;if(null!=e&&!e.contains(b,c))return null}a=o.Sprite.hitTestBackwards(a.firstChild,b,c);return null!=a?a:null!=d&&d.containsLocal(b,c)?d:null};o.Sprite.render=function(a,b){var c=a._compMap.Sprite_1;if(null!=c){var d=
c.alpha._value;if(0==(c._flags&1)||0>=d)return;b.save();1>d&&b.multiplyAlpha(d);null!=c.blendMode&&b.setBlendMode(c.blendMode);d=c.getLocalMatrix();b.transform(d.m00,d.m10,d.m01,d.m11,d.m02,d.m12);d=c.scissor;null!=d&&b.applyScissor(d.x,d.y,d.width,d.height);c.draw(b)}d=a._compMap.Director_0;if(null!=d)for(var d=d.occludedScenes,e=0;e<d.length;){var f=d[e];++e;o.Sprite.render(f,b)}for(d=a.firstChild;null!=d;)e=d.next,o.Sprite.render(d,b),d=e;null!=c&&b.restore()};o.Sprite.hitTestBackwards=function(a,
b,c){if(null!=a){var d=o.Sprite.hitTestBackwards(a.next,b,c);return null!=d?d:o.Sprite.hitTest(a,b,c)}return null};o.Sprite.__super__=P;o.Sprite.prototype=t(P.prototype,{set_pointerEnabled:function(a){this._flags=m.BitSets.set(this._flags,2,a);return a},set_visible:function(a){this._flags=m.BitSets.set(this._flags,1,a);return a},get_pointerUp:function(){null==this._internal_pointerUp&&(this._internal_pointerUp=new m.Signal1);return this._internal_pointerUp},get_pointerMove:function(){null==this._internal_pointerMove&&
(this._internal_pointerMove=new m.Signal1);return this._internal_pointerMove},get_pointerDown:function(){null==this._internal_pointerDown&&(this._internal_pointerDown=new m.Signal1);return this._internal_pointerDown},draw:function(){},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},getLocalMatrix:function(){0!=(this._flags&4)&&(this._flags&=-5,this._localMatrix.compose(this.x._value,
this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getNaturalHeight:function(){return 0},getNaturalWidth:function(){return 0},get_name:function(){return"Sprite_1"},__class__:o.Sprite,__properties__:t(P.prototype.__properties__,{set_visible:"set_visible",get_visible:"get_visible",
set_pointerEnabled:"set_pointerEnabled",get_pointerEnabled:"get_pointerEnabled"})});o.FillSprite=function(a,b,c){o.Sprite.call(this);this.color=a;this.width=new F.AnimatedFloat(b);this.height=new F.AnimatedFloat(c)};j["flambe.display.FillSprite"]=o.FillSprite;o.FillSprite.__name__=["flambe","display","FillSprite"];o.FillSprite.__super__=o.Sprite;o.FillSprite.prototype=t(o.Sprite.prototype,{onUpdate:function(a){o.Sprite.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},getNaturalHeight:function(){return this.height._value},
getNaturalWidth:function(){return this.width._value},draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},__class__:o.FillSprite});o.Font=function(a,b){this.name=b;this._glyphs=new W;for(var c=new o._Font.ConfigParser(a.getFile(b+".fnt")),d=new W,e=b.lastIndexOf("/"),e=0<=e?A.substr(b,0,e+1):"",f=c.keywords();f.hasNext();)switch(f.next()){case "info":for(var h=c.pairs();h.hasNext();){var i=h.next();switch(i.key){case "size":this.size=i.getInt()}}break;case "page":for(var h=
0,j=null,l=c.pairs();l.hasNext();)switch(i=l.next(),i.key){case "id":h=i.getInt();break;case "file":j=i.getString()}d.set(h,a.getTexture(e+m.Strings.removeFileExtension(j)));break;case "char":h=null;for(j=c.pairs();j.hasNext();)switch(i=j.next(),i.key){case "id":h=new o.Glyph(i.getInt());break;case "x":h.x=i.getInt();break;case "y":h.y=i.getInt();break;case "width":h.width=i.getInt();break;case "height":h.height=i.getInt();break;case "page":h.page=d.get(i.getInt());break;case "xoffset":h.xOffset=
i.getInt();break;case "yoffset":h.yOffset=i.getInt();break;case "xadvance":h.xAdvance=i.getInt()}this._glyphs.set(h.charCode,h);break;case "kerning":h=null;j=-1;for(l=c.pairs();l.hasNext();)switch(i=l.next(),i.key){case "first":h=this._glyphs.get(i.getInt());break;case "second":j=i.getInt();break;case "amount":h._internal_setKerning(j,i.getInt())}}};j["flambe.display.Font"]=o.Font;o.Font.__name__=["flambe","display","Font"];o.Font.prototype={getGlyphs:function(a){for(var b=[],c=0,d=a.length;c<d;){var e=
c++,e=a.charCodeAt(e),f=this._glyphs.get(e);null!=f?b.push(f):K.logger.warn("Requested a missing character from font",["font",this.name,"charCode",e])}return b},__class__:o.Font};o.Glyph=function(a){this.charCode=a};j["flambe.display.Glyph"]=o.Glyph;o.Glyph.__name__=["flambe","display","Glyph"];o.Glyph.prototype={_internal_setKerning:function(a,b){null==this._kernings&&(this._kernings=new W);this._kernings.set(a,b)},getKerning:function(a){return null!=this._kernings?this._kernings.get(a)|0:0},draw:function(a,
b,c){0<this.width&&a.drawSubImage(this.page,b+this.xOffset,c+this.yOffset,this.x,this.y,this.width,this.height)},__class__:o.Glyph};o._Font={};o._Font.ConfigParser=function(a){this._configText=a;this._keywordPattern=new X("([a-z]+)(.*)","");this._pairPattern=new X('([a-z]+)=("[^"]*"|[^\\s]+)',"")};j["flambe.display._Font.ConfigParser"]=o._Font.ConfigParser;o._Font.ConfigParser.__name__=["flambe","display","_Font","ConfigParser"];o._Font.ConfigParser.advance=function(a,b){var c=b.matchedPos();return A.substr(a,
c.pos+c.len,a.length)};o._Font.ConfigParser.prototype={pairs:function(){var a=this,b=this._pairText;return{next:function(){b=o._Font.ConfigParser.advance(b,a._pairPattern);return new o._Font.ConfigPair(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},keywords:function(){var a=this,b=this._configText;return{next:function(){b=o._Font.ConfigParser.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},
hasNext:function(){return a._keywordPattern.match(b)}}},__class__:o._Font.ConfigParser};o._Font.ConfigPair=function(a,b){this.key=a;this._value=b};j["flambe.display._Font.ConfigPair"]=o._Font.ConfigPair;o._Font.ConfigPair.__name__=["flambe","display","_Font","ConfigPair"];o._Font.ConfigPair.prototype={getString:function(){return 34!=this._value.charCodeAt(0)?null:A.substr(this._value,1,this._value.length-2)},getInt:function(){return r.parseInt(this._value)},__class__:o._Font.ConfigPair};o.Graphics=
function(){};j["flambe.display.Graphics"]=o.Graphics;o.Graphics.__name__=["flambe","display","Graphics"];o.Graphics.prototype={__class__:o.Graphics};o.ImageSprite=function(a){o.Sprite.call(this);this.texture=a};j["flambe.display.ImageSprite"]=o.ImageSprite;o.ImageSprite.__name__=["flambe","display","ImageSprite"];o.ImageSprite.__super__=o.Sprite;o.ImageSprite.prototype=t(o.Sprite.prototype,{getNaturalHeight:function(){return this.texture.get_height()},getNaturalWidth:function(){return this.texture.get_width()},
draw:function(a){a.drawImage(this.texture,0,0)},__class__:o.ImageSprite});o.Orientation=j["flambe.display.Orientation"]={__ename__:["flambe","display","Orientation"],__constructs__:["Portrait","Landscape"]};o.Orientation.Portrait=["Portrait",0];o.Orientation.Portrait.toString=q;o.Orientation.Portrait.__enum__=o.Orientation;o.Orientation.Landscape=["Landscape",1];o.Orientation.Landscape.toString=q;o.Orientation.Landscape.__enum__=o.Orientation;o.Stage=function(){};j["flambe.display.Stage"]=o.Stage;
o.Stage.__name__=["flambe","display","Stage"];o.Stage.prototype={__class__:o.Stage,__properties__:{get_width:"get_width",get_height:"get_height",get_fullscreenSupported:"get_fullscreenSupported"}};o.TextSprite=function(a,b){null==b&&(b="");this._width=this._height=0;this._glyphs=this._offsets=this._font=this._text=null;o.Sprite.call(this);this._font=a;this._text=b;this._flags|=32};j["flambe.display.TextSprite"]=o.TextSprite;o.TextSprite.__name__=["flambe","display","TextSprite"];o.TextSprite.__super__=
o.Sprite;o.TextSprite.prototype=t(o.Sprite.prototype,{updateGlyphs:function(){if(0!=(this._flags&32)){this._flags&=-33;this._glyphs=this._font.getGlyphs(this._text);this._offsets=[0];for(var a=this._height=this._width=0,b=this._glyphs.length;a<b;){var c=this._glyphs[a];++a;a==b?this._width+=c.width:(this._width+=c.xAdvance+c.getKerning(this._glyphs[a].charCode),this._offsets.push(this._width));this._height=J.FMath.max(this._height,c.height+c.yOffset)}}},set_font:function(a){this._font=a;this._flags|=
32;return a},set_text:function(a){this._text=a;this._flags|=32;return a},getNaturalHeight:function(){this.updateGlyphs();return this._height},getNaturalWidth:function(){this.updateGlyphs();return this._width},draw:function(a){this.updateGlyphs();for(var b=0,c=this._glyphs.length;b<c;)this._glyphs[b].draw(a,this._offsets[b],0),++b},__class__:o.TextSprite,__properties__:t(o.Sprite.prototype.__properties__,{set_text:"set_text",get_text:"get_text",set_font:"set_font",get_font:"get_font"})});o.Texture=
function(){};j["flambe.display.Texture"]=o.Texture;o.Texture.__name__=["flambe","display","Texture"];o.Texture.prototype={__class__:o.Texture,__properties__:{get_width:"get_width",get_height:"get_height",get_graphics:"get_graphics"}};y={External:function(){}};j["flambe.external.External"]=y.External;y.External.__name__=["flambe","external","External"];y.External.prototype={__class__:y.External,__properties__:{get_supported:"get_supported"}};d={};d.Key=j["flambe.input.Key"]={__ename__:["flambe","input",
"Key"],__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",")};
d.Key.A=["A",0];d.Key.A.toString=q;d.Key.A.__enum__=d.Key;d.Key.B=["B",1];d.Key.B.toString=q;d.Key.B.__enum__=d.Key;d.Key.C=["C",2];d.Key.C.toString=q;d.Key.C.__enum__=d.Key;d.Key.D=["D",3];d.Key.D.toString=q;d.Key.D.__enum__=d.Key;d.Key.E=["E",4];d.Key.E.toString=q;d.Key.E.__enum__=d.Key;d.Key.F=["F",5];d.Key.F.toString=q;d.Key.F.__enum__=d.Key;d.Key.G=["G",6];d.Key.G.toString=q;d.Key.G.__enum__=d.Key;d.Key.H=["H",7];d.Key.H.toString=q;d.Key.H.__enum__=d.Key;d.Key.I=["I",8];d.Key.I.toString=q;d.Key.I.__enum__=
d.Key;d.Key.J=["J",9];d.Key.J.toString=q;d.Key.J.__enum__=d.Key;d.Key.K=["K",10];d.Key.K.toString=q;d.Key.K.__enum__=d.Key;d.Key.L=["L",11];d.Key.L.toString=q;d.Key.L.__enum__=d.Key;d.Key.M=["M",12];d.Key.M.toString=q;d.Key.M.__enum__=d.Key;d.Key.N=["N",13];d.Key.N.toString=q;d.Key.N.__enum__=d.Key;d.Key.O=["O",14];d.Key.O.toString=q;d.Key.O.__enum__=d.Key;d.Key.P=["P",15];d.Key.P.toString=q;d.Key.P.__enum__=d.Key;d.Key.Q=["Q",16];d.Key.Q.toString=q;d.Key.Q.__enum__=d.Key;d.Key.R=["R",17];d.Key.R.toString=
q;d.Key.R.__enum__=d.Key;d.Key.S=["S",18];d.Key.S.toString=q;d.Key.S.__enum__=d.Key;d.Key.T=["T",19];d.Key.T.toString=q;d.Key.T.__enum__=d.Key;d.Key.U=["U",20];d.Key.U.toString=q;d.Key.U.__enum__=d.Key;d.Key.V=["V",21];d.Key.V.toString=q;d.Key.V.__enum__=d.Key;d.Key.W=["W",22];d.Key.W.toString=q;d.Key.W.__enum__=d.Key;d.Key.X=["X",23];d.Key.X.toString=q;d.Key.X.__enum__=d.Key;d.Key.Y=["Y",24];d.Key.Y.toString=q;d.Key.Y.__enum__=d.Key;d.Key.Z=["Z",25];d.Key.Z.toString=q;d.Key.Z.__enum__=d.Key;d.Key.Number0=
["Number0",26];d.Key.Number0.toString=q;d.Key.Number0.__enum__=d.Key;d.Key.Number1=["Number1",27];d.Key.Number1.toString=q;d.Key.Number1.__enum__=d.Key;d.Key.Number2=["Number2",28];d.Key.Number2.toString=q;d.Key.Number2.__enum__=d.Key;d.Key.Number3=["Number3",29];d.Key.Number3.toString=q;d.Key.Number3.__enum__=d.Key;d.Key.Number4=["Number4",30];d.Key.Number4.toString=q;d.Key.Number4.__enum__=d.Key;d.Key.Number5=["Number5",31];d.Key.Number5.toString=q;d.Key.Number5.__enum__=d.Key;d.Key.Number6=["Number6",
32];d.Key.Number6.toString=q;d.Key.Number6.__enum__=d.Key;d.Key.Number7=["Number7",33];d.Key.Number7.toString=q;d.Key.Number7.__enum__=d.Key;d.Key.Number8=["Number8",34];d.Key.Number8.toString=q;d.Key.Number8.__enum__=d.Key;d.Key.Number9=["Number9",35];d.Key.Number9.toString=q;d.Key.Number9.__enum__=d.Key;d.Key.Numpad0=["Numpad0",36];d.Key.Numpad0.toString=q;d.Key.Numpad0.__enum__=d.Key;d.Key.Numpad1=["Numpad1",37];d.Key.Numpad1.toString=q;d.Key.Numpad1.__enum__=d.Key;d.Key.Numpad2=["Numpad2",38];
d.Key.Numpad2.toString=q;d.Key.Numpad2.__enum__=d.Key;d.Key.Numpad3=["Numpad3",39];d.Key.Numpad3.toString=q;d.Key.Numpad3.__enum__=d.Key;d.Key.Numpad4=["Numpad4",40];d.Key.Numpad4.toString=q;d.Key.Numpad4.__enum__=d.Key;d.Key.Numpad5=["Numpad5",41];d.Key.Numpad5.toString=q;d.Key.Numpad5.__enum__=d.Key;d.Key.Numpad6=["Numpad6",42];d.Key.Numpad6.toString=q;d.Key.Numpad6.__enum__=d.Key;d.Key.Numpad7=["Numpad7",43];d.Key.Numpad7.toString=q;d.Key.Numpad7.__enum__=d.Key;d.Key.Numpad8=["Numpad8",44];d.Key.Numpad8.toString=
q;d.Key.Numpad8.__enum__=d.Key;d.Key.Numpad9=["Numpad9",45];d.Key.Numpad9.toString=q;d.Key.Numpad9.__enum__=d.Key;d.Key.NumpadAdd=["NumpadAdd",46];d.Key.NumpadAdd.toString=q;d.Key.NumpadAdd.__enum__=d.Key;d.Key.NumpadDecimal=["NumpadDecimal",47];d.Key.NumpadDecimal.toString=q;d.Key.NumpadDecimal.__enum__=d.Key;d.Key.NumpadDivide=["NumpadDivide",48];d.Key.NumpadDivide.toString=q;d.Key.NumpadDivide.__enum__=d.Key;d.Key.NumpadEnter=["NumpadEnter",49];d.Key.NumpadEnter.toString=q;d.Key.NumpadEnter.__enum__=
d.Key;d.Key.NumpadMultiply=["NumpadMultiply",50];d.Key.NumpadMultiply.toString=q;d.Key.NumpadMultiply.__enum__=d.Key;d.Key.NumpadSubtract=["NumpadSubtract",51];d.Key.NumpadSubtract.toString=q;d.Key.NumpadSubtract.__enum__=d.Key;d.Key.F1=["F1",52];d.Key.F1.toString=q;d.Key.F1.__enum__=d.Key;d.Key.F2=["F2",53];d.Key.F2.toString=q;d.Key.F2.__enum__=d.Key;d.Key.F3=["F3",54];d.Key.F3.toString=q;d.Key.F3.__enum__=d.Key;d.Key.F4=["F4",55];d.Key.F4.toString=q;d.Key.F4.__enum__=d.Key;d.Key.F5=["F5",56];d.Key.F5.toString=
q;d.Key.F5.__enum__=d.Key;d.Key.F6=["F6",57];d.Key.F6.toString=q;d.Key.F6.__enum__=d.Key;d.Key.F7=["F7",58];d.Key.F7.toString=q;d.Key.F7.__enum__=d.Key;d.Key.F8=["F8",59];d.Key.F8.toString=q;d.Key.F8.__enum__=d.Key;d.Key.F9=["F9",60];d.Key.F9.toString=q;d.Key.F9.__enum__=d.Key;d.Key.F10=["F10",61];d.Key.F10.toString=q;d.Key.F10.__enum__=d.Key;d.Key.F11=["F11",62];d.Key.F11.toString=q;d.Key.F11.__enum__=d.Key;d.Key.F12=["F12",63];d.Key.F12.toString=q;d.Key.F12.__enum__=d.Key;d.Key.F13=["F13",64];d.Key.F13.toString=
q;d.Key.F13.__enum__=d.Key;d.Key.F14=["F14",65];d.Key.F14.toString=q;d.Key.F14.__enum__=d.Key;d.Key.F15=["F15",66];d.Key.F15.toString=q;d.Key.F15.__enum__=d.Key;d.Key.Left=["Left",67];d.Key.Left.toString=q;d.Key.Left.__enum__=d.Key;d.Key.Up=["Up",68];d.Key.Up.toString=q;d.Key.Up.__enum__=d.Key;d.Key.Right=["Right",69];d.Key.Right.toString=q;d.Key.Right.__enum__=d.Key;d.Key.Down=["Down",70];d.Key.Down.toString=q;d.Key.Down.__enum__=d.Key;d.Key.Alt=["Alt",71];d.Key.Alt.toString=q;d.Key.Alt.__enum__=
d.Key;d.Key.Backquote=["Backquote",72];d.Key.Backquote.toString=q;d.Key.Backquote.__enum__=d.Key;d.Key.Backslash=["Backslash",73];d.Key.Backslash.toString=q;d.Key.Backslash.__enum__=d.Key;d.Key.Backspace=["Backspace",74];d.Key.Backspace.toString=q;d.Key.Backspace.__enum__=d.Key;d.Key.CapsLock=["CapsLock",75];d.Key.CapsLock.toString=q;d.Key.CapsLock.__enum__=d.Key;d.Key.Comma=["Comma",76];d.Key.Comma.toString=q;d.Key.Comma.__enum__=d.Key;d.Key.Command=["Command",77];d.Key.Command.toString=q;d.Key.Command.__enum__=
d.Key;d.Key.Control=["Control",78];d.Key.Control.toString=q;d.Key.Control.__enum__=d.Key;d.Key.Delete=["Delete",79];d.Key.Delete.toString=q;d.Key.Delete.__enum__=d.Key;d.Key.End=["End",80];d.Key.End.toString=q;d.Key.End.__enum__=d.Key;d.Key.Enter=["Enter",81];d.Key.Enter.toString=q;d.Key.Enter.__enum__=d.Key;d.Key.Equals=["Equals",82];d.Key.Equals.toString=q;d.Key.Equals.__enum__=d.Key;d.Key.Escape=["Escape",83];d.Key.Escape.toString=q;d.Key.Escape.__enum__=d.Key;d.Key.Home=["Home",84];d.Key.Home.toString=
q;d.Key.Home.__enum__=d.Key;d.Key.Insert=["Insert",85];d.Key.Insert.toString=q;d.Key.Insert.__enum__=d.Key;d.Key.LeftBracket=["LeftBracket",86];d.Key.LeftBracket.toString=q;d.Key.LeftBracket.__enum__=d.Key;d.Key.Minus=["Minus",87];d.Key.Minus.toString=q;d.Key.Minus.__enum__=d.Key;d.Key.PageDown=["PageDown",88];d.Key.PageDown.toString=q;d.Key.PageDown.__enum__=d.Key;d.Key.PageUp=["PageUp",89];d.Key.PageUp.toString=q;d.Key.PageUp.__enum__=d.Key;d.Key.Period=["Period",90];d.Key.Period.toString=q;d.Key.Period.__enum__=
d.Key;d.Key.Quote=["Quote",91];d.Key.Quote.toString=q;d.Key.Quote.__enum__=d.Key;d.Key.RightBracket=["RightBracket",92];d.Key.RightBracket.toString=q;d.Key.RightBracket.__enum__=d.Key;d.Key.Semicolon=["Semicolon",93];d.Key.Semicolon.toString=q;d.Key.Semicolon.__enum__=d.Key;d.Key.Shift=["Shift",94];d.Key.Shift.toString=q;d.Key.Shift.__enum__=d.Key;d.Key.Slash=["Slash",95];d.Key.Slash.toString=q;d.Key.Slash.__enum__=d.Key;d.Key.Space=["Space",96];d.Key.Space.toString=q;d.Key.Space.__enum__=d.Key;d.Key.Tab=
["Tab",97];d.Key.Tab.toString=q;d.Key.Tab.__enum__=d.Key;d.Key.Menu=["Menu",98];d.Key.Menu.toString=q;d.Key.Menu.__enum__=d.Key;d.Key.Search=["Search",99];d.Key.Search.toString=q;d.Key.Search.__enum__=d.Key;d.Key.Unknown=function(a){a=["Unknown",100,a];a.__enum__=d.Key;a.toString=q;return a};d.Keyboard=function(){};j["flambe.input.Keyboard"]=d.Keyboard;d.Keyboard.__name__=["flambe","input","Keyboard"];d.Keyboard.prototype={__class__:d.Keyboard,__properties__:{get_supported:"get_supported"}};d.KeyboardEvent=
function(){this._internal_init(0,null)};j["flambe.input.KeyboardEvent"]=d.KeyboardEvent;d.KeyboardEvent.__name__=["flambe","input","KeyboardEvent"];d.KeyboardEvent.prototype={_internal_init:function(a,b){this.id=a;this.key=b},__class__:d.KeyboardEvent};d.Mouse=function(){};j["flambe.input.Mouse"]=d.Mouse;d.Mouse.__name__=["flambe","input","Mouse"];d.Mouse.prototype={__class__:d.Mouse,__properties__:{get_supported:"get_supported",get_x:"get_x",get_y:"get_y",set_cursor:"set_cursor",get_cursor:"get_cursor"}};
d.MouseButton=j["flambe.input.MouseButton"]={__ename__:["flambe","input","MouseButton"],__constructs__:["Left","Middle","Right","Unknown"]};d.MouseButton.Left=["Left",0];d.MouseButton.Left.toString=q;d.MouseButton.Left.__enum__=d.MouseButton;d.MouseButton.Middle=["Middle",1];d.MouseButton.Middle.toString=q;d.MouseButton.Middle.__enum__=d.MouseButton;d.MouseButton.Right=["Right",2];d.MouseButton.Right.toString=q;d.MouseButton.Right.__enum__=d.MouseButton;d.MouseButton.Unknown=function(a){a=["Unknown",
3,a];a.__enum__=d.MouseButton;a.toString=q;return a};d.MouseCursor=j["flambe.input.MouseCursor"]={__ename__:["flambe","input","MouseCursor"],__constructs__:["Default","Button","None"]};d.MouseCursor.Default=["Default",0];d.MouseCursor.Default.toString=q;d.MouseCursor.Default.__enum__=d.MouseCursor;d.MouseCursor.Button=["Button",1];d.MouseCursor.Button.toString=q;d.MouseCursor.Button.__enum__=d.MouseCursor;d.MouseCursor.None=["None",2];d.MouseCursor.None.toString=q;d.MouseCursor.None.__enum__=d.MouseCursor;
d.MouseEvent=function(){this._internal_init(0,0,0,null)};j["flambe.input.MouseEvent"]=d.MouseEvent;d.MouseEvent.__name__=["flambe","input","MouseEvent"];d.MouseEvent.prototype={_internal_init:function(a,b,c,d){this.id=a;this.viewX=b;this.viewY=c;this.button=d},__class__:d.MouseEvent};d.Pointer=function(){};j["flambe.input.Pointer"]=d.Pointer;d.Pointer.__name__=["flambe","input","Pointer"];d.Pointer.prototype={__class__:d.Pointer,__properties__:{get_supported:"get_supported",get_x:"get_x",get_y:"get_y"}};
d.EventSource=j["flambe.input.EventSource"]={__ename__:["flambe","input","EventSource"],__constructs__:["Mouse","Touch"]};d.EventSource.Mouse=function(a){a=["Mouse",0,a];a.__enum__=d.EventSource;a.toString=q;return a};d.EventSource.Touch=function(a){a=["Touch",1,a];a.__enum__=d.EventSource;a.toString=q;return a};d.PointerEvent=function(){this._internal_init(0,0,0,null,null)};j["flambe.input.PointerEvent"]=d.PointerEvent;d.PointerEvent.__name__=["flambe","input","PointerEvent"];d.PointerEvent.prototype=
{_internal_init:function(a,b,c,d,e){this.id=a;this.viewX=b;this.viewY=c;this.hit=d;this.source=e;this._internal_stopped=!1},__class__:d.PointerEvent};d.Touch=function(){};j["flambe.input.Touch"]=d.Touch;d.Touch.__name__=["flambe","input","Touch"];d.Touch.prototype={__class__:d.Touch,__properties__:{get_supported:"get_supported",get_maxPoints:"get_maxPoints",get_points:"get_points"}};d.TouchPoint=function(a){this.id=a;this._internal_source=d.EventSource.Touch(this)};j["flambe.input.TouchPoint"]=d.TouchPoint;
d.TouchPoint.__name__=["flambe","input","TouchPoint"];d.TouchPoint.prototype={_internal_init:function(a,b){this.viewX=a;this.viewY=b},__class__:d.TouchPoint};J.FMath=function(){};j["flambe.math.FMath"]=J.FMath;J.FMath.__name__=["flambe","math","FMath"];J.FMath.max=function(a,b){return a>b?a:b};J.FMath.clamp=function(a,b,c){return a<b?b:a>c?c:a};J.Matrix=function(){this.identity()};j["flambe.math.Matrix"]=J.Matrix;J.Matrix.__name__=["flambe","math","Matrix"];J.Matrix.prototype={inverseTransform:function(a,
b,c){var d=this.determinant();if(0==d)return!1;a-=this.m02;b-=this.m12;c.x=(a*this.m11-b*this.m01)/d;c.y=(b*this.m00-a*this.m10)/d;return!0},determinant:function(){return this.m00*this.m11-this.m01*this.m10},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},compose:function(a,b,c,d,e){var f=Math.sin(e),e=Math.cos(e);this.set(e*c,f*c,-f*d,e*d,a,b)},identity:function(){this.set(1,0,0,1,0,0)},set:function(a,b,c,d,e,f){this.m00=a;this.m01=c;this.m02=e;this.m10=b;
this.m11=d;this.m12=f},__class__:J.Matrix};J.Rectangle=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,c,d)};j["flambe.math.Rectangle"]=J.Rectangle;J.Rectangle.__name__=["flambe","math","Rectangle"];J.Rectangle.prototype={contains:function(a,b){a-=this.x;b-=this.y;return 0<=a&&0<=b&&a<=this.width&&b<=this.height},set:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d},__class__:J.Rectangle};e.BasicAssetPackLoader=function(a,b){this._platform=
a;this.promise=new m.Promise;this._bytesLoaded=new G;this._pack=new e._BasicAssetPackLoader.BasicAssetPack(b);var c=ba.array(b);if(0==c.length)this.handleSuccess();else{for(var d=0,f=new G,h=0;h<c.length;){var i=c[h];++h;var j=f.get(i.name);null==j&&(j=[],f.set(i.name,j));j.push(i)}this._assetsRemaining=ba.count(f);for(c=f.iterator();c.hasNext();)if(j=c.next(),j=1<j.length?this.pickBestEntry(j):j[0],f=this.createPlaceholder(j),null!=f)K.logger.warn("Using an asset placeholder",["name",j.name,"type",
j.type]),this.handleLoad(j,f);else{d+=j.bytes;f=b.getFullURL(j);try{this.loadEntry(f,j)}catch(l){this.handleError(j,"Unexpected error: "+r.string(l))}}this.promise.set_total(d)}};j["flambe.platform.BasicAssetPackLoader"]=e.BasicAssetPackLoader;e.BasicAssetPackLoader.__name__=["flambe","platform","BasicAssetPackLoader"];e.BasicAssetPackLoader.prototype={handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},handleError:function(a,b){K.logger.warn("Error loading asset pack",
["error",b,"url",a.url]);this.promise.error.emit1(m.Strings.withFields(b,["url",a.url]))},handleSuccess:function(){this.promise.set_result(this._pack)},handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var c=0,d=this._bytesLoaded.iterator();d.hasNext();)var e=d.next(),c=c+e;this.promise.set_progress(c)},handleLoad:function(a,b){this.handleProgress(a,a.bytes);var c=a.name;switch(a.type[1]){case 0:this._pack.textures.set(c,b);break;case 1:this._pack.sounds.set(c,b);break;case 2:this._pack.files.set(c,
b)}this._assetsRemaining-=1;0>=this._assetsRemaining&&this.handleSuccess()},getAudioFormats:function(){return[]},loadEntry:function(){},createPlaceholder:function(a){switch(a.type[1]){case 1:if(!ba.has(this.getAudioFormats(),a.getUrlExtension()))return e.DummySound.getInstance()}return null},pickBestEntry:function(a){switch(a[0].type[1]){case 1:for(var b=this.getAudioFormats(),c=0;c<b.length;){var d=b[c];++c;for(var e=0;e<a.length;){var f=a[e];++e;if(f.getUrlExtension()==d)return f}}}return a[0]},
__class__:e.BasicAssetPackLoader};e._BasicAssetPackLoader={};e._BasicAssetPackLoader.BasicAssetPack=function(a){this._manifest=a;this.textures=new G;this.sounds=new G;this.files=new G};j["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=e._BasicAssetPackLoader.BasicAssetPack;e._BasicAssetPackLoader.BasicAssetPack.__name__=["flambe","platform","_BasicAssetPackLoader","BasicAssetPack"];e._BasicAssetPackLoader.BasicAssetPack.__interfaces__=[B.AssetPack];e._BasicAssetPackLoader.BasicAssetPack.prototype=
{get_manifest:function(){return this._manifest},getFile:function(a,b){null==b&&(b=!0);var c=this.files.get(a);if(null==c&&b)throw m.Strings.withFields("Missing file",["name",a]);return c},getSound:function(a,b){null==b&&(b=!0);var c=this.sounds.get(a);if(null==c&&b)throw m.Strings.withFields("Missing sound",["name",a]);return c},getTexture:function(a,b){null==b&&(b=!0);var c=this.textures.get(a);if(null==c&&b)throw m.Strings.withFields("Missing texture",["name",a]);return c},__class__:e._BasicAssetPackLoader.BasicAssetPack,
__properties__:{get_manifest:"get_manifest"}};e.BasicKeyboard=function(){this.down=new m.Signal1;this.up=new m.Signal1;this.backButton=new m.Signal0;this._keyStates=new W};j["flambe.platform.BasicKeyboard"]=e.BasicKeyboard;e.BasicKeyboard.__name__=["flambe","platform","BasicKeyboard"];e.BasicKeyboard.__interfaces__=[d.Keyboard];e.BasicKeyboard.prototype={submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),e.BasicKeyboard._sharedEvent._internal_init(e.BasicKeyboard._sharedEvent.id+
1,e.KeyCodes.toKey(a)),this.up.emit1(e.BasicKeyboard._sharedEvent))},submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit0(),!0):!1;this._keyStates.exists(a)||(this._keyStates.set(a,!0),e.BasicKeyboard._sharedEvent._internal_init(e.BasicKeyboard._sharedEvent.id+1,e.KeyCodes.toKey(a)),this.down.emit1(e.BasicKeyboard._sharedEvent));return!0},isDown:function(a){return this._keyStates.exists(e.KeyCodes.toKeyCode(a))},get_supported:function(){return!0},__class__:e.BasicKeyboard,
__properties__:{get_supported:"get_supported"}};e.BasicMouse=function(a){this._pointer=a;this._source=d.EventSource.Mouse(e.BasicMouse._sharedEvent);this.down=new m.Signal1;this.move=new m.Signal1;this.up=new m.Signal1;this.scroll=new m.Signal1;this._y=this._x=0;this._cursor=d.MouseCursor.Default;this._buttonStates=new W};j["flambe.platform.BasicMouse"]=e.BasicMouse;e.BasicMouse.__name__=["flambe","platform","BasicMouse"];e.BasicMouse.__interfaces__=[d.Mouse];e.BasicMouse.prototype={prepare:function(a,
b,c){this._x=a;this._y=b;e.BasicMouse._sharedEvent._internal_init(e.BasicMouse._sharedEvent.id+1,a,b,c)},submitScroll:function(a,b,c){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit1(c);return!0},submitUp:function(a,b,c){this._buttonStates.exists(c)&&(this._buttonStates.remove(c),this.prepare(a,b,e.MouseCodes.toButton(c)),this._pointer.submitUp(a,b,this._source),this.up.emit1(e.BasicMouse._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,
b,this._source);this.move.emit1(e.BasicMouse._sharedEvent)},submitDown:function(a,b,c){this._buttonStates.exists(c)||(this._buttonStates.set(c,!0),this.prepare(a,b,e.MouseCodes.toButton(c)),this._pointer.submitDown(a,b,this._source),this.down.emit1(e.BasicMouse._sharedEvent))},isDown:function(a){return this._buttonStates.exists(e.MouseCodes.toButtonCode(a))},set_cursor:function(a){return this._cursor=a},get_cursor:function(){return this._cursor},get_y:function(){return this._y},get_x:function(){return this._x},
get_supported:function(){return!0},__class__:e.BasicMouse,__properties__:{get_supported:"get_supported",get_x:"get_x",get_y:"get_y",set_cursor:"set_cursor",get_cursor:"get_cursor"}};e.BasicPointer=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.down=new m.Signal1;this.move=new m.Signal1;this.up=new m.Signal1;this._x=a;this._y=b;this._isDown=c};j["flambe.platform.BasicPointer"]=e.BasicPointer;e.BasicPointer.__name__=["flambe","platform","BasicPointer"];e.BasicPointer.__interfaces__=
[d.Pointer];e.BasicPointer.prototype={prepare:function(a,b,c,d){this._x=a;this._y=b;e.BasicPointer._sharedEvent._internal_init(e.BasicPointer._sharedEvent.id+1,a,b,c,d)},submitUp:function(a,b,c){if(this._isDown){this._isDown=!1;var d=[],f=o.Sprite.hitTest(z.root,a,b);if(null!=f){var h=f.owner;do{var i=h._compMap.Sprite_1;null!=i&&d.push(i);h=h.parent}while(null!=h)}this.prepare(a,b,f,c);for(a=0;a<d.length;)if(i=d[a],++a,i=i._internal_pointerUp,null!=i&&(i.emit1(e.BasicPointer._sharedEvent),e.BasicPointer._sharedEvent._internal_stopped))return;
this.up.emit1(e.BasicPointer._sharedEvent)}},submitMove:function(a,b,c){var d=[],f=o.Sprite.hitTest(z.root,a,b);if(null!=f){var h=f.owner;do{var i=h._compMap.Sprite_1;null!=i&&d.push(i);h=h.parent}while(null!=h)}this.prepare(a,b,f,c);for(a=0;a<d.length;)if(i=d[a],++a,i=i._internal_pointerMove,null!=i&&(i.emit1(e.BasicPointer._sharedEvent),e.BasicPointer._sharedEvent._internal_stopped))return;this.move.emit1(e.BasicPointer._sharedEvent)},submitDown:function(a,b,c){if(!this._isDown){this._isDown=!0;
var d=[],f=o.Sprite.hitTest(z.root,a,b);if(null!=f){var h=f.owner;do{var i=h._compMap.Sprite_1;null!=i&&d.push(i);h=h.parent}while(null!=h)}this.prepare(a,b,f,c);for(a=0;a<d.length;)if(i=d[a],++a,i=i._internal_pointerDown,null!=i&&(i.emit1(e.BasicPointer._sharedEvent),e.BasicPointer._sharedEvent._internal_stopped))return;this.down.emit1(e.BasicPointer._sharedEvent)}},isDown:function(){return this._isDown},get_y:function(){return this._y},get_x:function(){return this._x},get_supported:function(){return!0},
__class__:e.BasicPointer,__properties__:{get_supported:"get_supported",get_x:"get_x",get_y:"get_y"}};e.BasicTouch=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new W;this._points=[];this.down=new m.Signal1;this.move=new m.Signal1;this.up=new m.Signal1};j["flambe.platform.BasicTouch"]=e.BasicTouch;e.BasicTouch.__name__=["flambe","platform","BasicTouch"];e.BasicTouch.__interfaces__=[d.Touch];e.BasicTouch.prototype={submitUp:function(a,b,c){var d=this._pointMap.get(a);
null!=d&&(d._internal_init(b,c),this._pointMap.remove(a),A.remove(this._points,d),this._pointerTouch==d&&(this._pointerTouch=null,this._pointer.submitUp(b,c,d._internal_source)),this.up.emit1(d))},submitMove:function(a,b,c){a=this._pointMap.get(a);null!=a&&(a._internal_init(b,c),this._pointerTouch==a&&this._pointer.submitMove(b,c,a._internal_source),this.move.emit1(a))},submitDown:function(a,b,c){if(!this._pointMap.exists(a)){var g=new d.TouchPoint(a);g._internal_init(b,c);this._pointMap.set(a,g);
this._points.push(g);null==this._pointerTouch&&(this._pointerTouch=g,this._pointer.submitDown(b,c,g._internal_source));this.down.emit1(g)}},get_points:function(){return this._points.slice()},get_maxPoints:function(){return this._maxPoints},get_supported:function(){return!0},__class__:e.BasicTouch,__properties__:{get_supported:"get_supported",get_maxPoints:"get_maxPoints",get_points:"get_points"}};H.Sound=function(){};j["flambe.sound.Sound"]=H.Sound;H.Sound.__name__=["flambe","sound","Sound"];H.Sound.prototype=
{__class__:H.Sound,__properties__:{get_duration:"get_duration"}};e.DummySound=function(){this._playback=new e.DummyPlayback(this)};j["flambe.platform.DummySound"]=e.DummySound;e.DummySound.__name__=["flambe","platform","DummySound"];e.DummySound.__interfaces__=[H.Sound];e.DummySound.getInstance=function(){null==e.DummySound._instance&&(e.DummySound._instance=new e.DummySound);return e.DummySound._instance};e.DummySound.prototype={get_duration:function(){return 0},loop:function(){return this._playback},
play:function(){return this._playback},__class__:e.DummySound,__properties__:{get_duration:"get_duration"}};H.Playback=function(){};j["flambe.sound.Playback"]=H.Playback;H.Playback.__name__=["flambe","sound","Playback"];H.Playback.__interfaces__=[m.Disposable];H.Playback.prototype={__class__:H.Playback,__properties__:{set_paused:"set_paused",get_paused:"get_paused",get_ended:"get_ended",set_position:"set_position",get_position:"get_position",get_sound:"get_sound"}};e.DummyPlayback=function(a){this._sound=
a;this.volume=new F.AnimatedFloat(0)};j["flambe.platform.DummyPlayback"]=e.DummyPlayback;e.DummyPlayback.__name__=["flambe","platform","DummyPlayback"];e.DummyPlayback.__interfaces__=[H.Playback];e.DummyPlayback.prototype={dispose:function(){},set_position:function(a){return a},get_position:function(){return 0},get_ended:function(){return!0},set_paused:function(){return!0},get_paused:function(){return!0},get_sound:function(){return this._sound},__class__:e.DummyPlayback,__properties__:{set_paused:"set_paused",
get_paused:"get_paused",get_ended:"get_ended",set_position:"set_position",get_position:"get_position",get_sound:"get_sound"}};aa={Storage:function(){}};j["flambe.storage.Storage"]=aa.Storage;aa.Storage.__name__=["flambe","storage","Storage"];aa.Storage.prototype={__class__:aa.Storage,__properties__:{get_supported:"get_supported"}};e.DummyStorage=function(){this.clear()};j["flambe.platform.DummyStorage"]=e.DummyStorage;e.DummyStorage.__name__=["flambe","platform","DummyStorage"];e.DummyStorage.__interfaces__=
[aa.Storage];e.DummyStorage.prototype={clear:function(){this._hash=new G},remove:function(a){this._hash.remove(a)},get:function(a,b){return this._hash.exists(a)?this._hash.get(a):b},set:function(a,b){this._hash.set(a,b);return!0},get_supported:function(){return!1},__class__:e.DummyStorage,__properties__:{get_supported:"get_supported"}};e.DummyTouch=function(){this.down=new m.Signal1;this.move=new m.Signal1;this.up=new m.Signal1};j["flambe.platform.DummyTouch"]=e.DummyTouch;e.DummyTouch.__name__=["flambe",
"platform","DummyTouch"];e.DummyTouch.__interfaces__=[d.Touch];e.DummyTouch.prototype={get_points:function(){return[]},get_maxPoints:function(){return 0},get_supported:function(){return!1},__class__:e.DummyTouch,__properties__:{get_supported:"get_supported",get_maxPoints:"get_maxPoints",get_points:"get_points"}};e.EventGroup=function(){this._entries=[]};j["flambe.platform.EventGroup"]=e.EventGroup;e.EventGroup.__name__=["flambe","platform","EventGroup"];e.EventGroup.__interfaces__=[m.Disposable];
e.EventGroup.prototype={dispose:function(){for(var a=0,b=this._entries;a<b.length;){var c=b[a];++a;c.dispatcher.removeEventListener(c.type,c.listener,!1)}this._entries=[]},addDisposingListener:function(a,b,c){var d=this;this.addListener(a,b,function(a){d.dispose();c(a)})},addListener:function(a,b,c){a.addEventListener(b,c,!1);this._entries.push(new e._EventGroup.Entry(a,b,c))},__class__:e.EventGroup};e._EventGroup={};e._EventGroup.Entry=function(a,b,c){this.dispatcher=a;this.type=b;this.listener=
c};j["flambe.platform._EventGroup.Entry"]=e._EventGroup.Entry;e._EventGroup.Entry.__name__=["flambe","platform","_EventGroup","Entry"];e._EventGroup.Entry.prototype={__class__:e._EventGroup.Entry};e.KeyCodes=function(){};j["flambe.platform.KeyCodes"]=e.KeyCodes;e.KeyCodes.__name__=["flambe","platform","KeyCodes"];e.KeyCodes.toKey=function(a){switch(a){case 65:return d.Key.A;case 66:return d.Key.B;case 67:return d.Key.C;case 68:return d.Key.D;case 69:return d.Key.E;case 70:return d.Key.F;case 71:return d.Key.G;
case 72:return d.Key.H;case 73:return d.Key.I;case 74:return d.Key.J;case 75:return d.Key.K;case 76:return d.Key.L;case 77:return d.Key.M;case 78:return d.Key.N;case 79:return d.Key.O;case 80:return d.Key.P;case 81:return d.Key.Q;case 82:return d.Key.R;case 83:return d.Key.S;case 84:return d.Key.T;case 85:return d.Key.U;case 86:return d.Key.V;case 87:return d.Key.W;case 88:return d.Key.X;case 89:return d.Key.Y;case 90:return d.Key.Z;case 48:return d.Key.Number0;case 49:return d.Key.Number1;case 50:return d.Key.Number2;
case 51:return d.Key.Number3;case 52:return d.Key.Number4;case 53:return d.Key.Number5;case 54:return d.Key.Number6;case 55:return d.Key.Number7;case 56:return d.Key.Number8;case 57:return d.Key.Number9;case 96:return d.Key.Numpad0;case 97:return d.Key.Numpad1;case 98:return d.Key.Numpad2;case 99:return d.Key.Numpad3;case 100:return d.Key.Numpad4;case 101:return d.Key.Numpad5;case 102:return d.Key.Numpad6;case 103:return d.Key.Numpad7;case 104:return d.Key.Numpad8;case 105:return d.Key.Numpad9;case 107:return d.Key.NumpadAdd;
case 110:return d.Key.NumpadDecimal;case 111:return d.Key.NumpadDivide;case 108:return d.Key.NumpadEnter;case 106:return d.Key.NumpadMultiply;case 109:return d.Key.NumpadSubtract;case 112:return d.Key.F1;case 113:return d.Key.F2;case 114:return d.Key.F3;case 115:return d.Key.F4;case 116:return d.Key.F5;case 117:return d.Key.F6;case 118:return d.Key.F7;case 119:return d.Key.F8;case 120:return d.Key.F9;case 121:return d.Key.F10;case 122:return d.Key.F11;case 123:return d.Key.F12;case 37:return d.Key.Left;
case 38:return d.Key.Up;case 39:return d.Key.Right;case 40:return d.Key.Down;case 18:return d.Key.Alt;case 192:return d.Key.Backquote;case 220:return d.Key.Backslash;case 8:return d.Key.Backspace;case 20:return d.Key.CapsLock;case 188:return d.Key.Comma;case 15:return d.Key.Command;case 17:return d.Key.Control;case 46:return d.Key.Delete;case 35:return d.Key.End;case 13:return d.Key.Enter;case 187:return d.Key.Equals;case 27:return d.Key.Escape;case 36:return d.Key.Home;case 45:return d.Key.Insert;
case 219:return d.Key.LeftBracket;case 189:return d.Key.Minus;case 34:return d.Key.PageDown;case 33:return d.Key.PageUp;case 190:return d.Key.Period;case 222:return d.Key.Quote;case 221:return d.Key.RightBracket;case 186:return d.Key.Semicolon;case 16:return d.Key.Shift;case 191:return d.Key.Slash;case 32:return d.Key.Space;case 9:return d.Key.Tab;case 16777234:return d.Key.Menu;case 16777247:return d.Key.Search}return d.Key.Unknown(a)};e.KeyCodes.toKeyCode=function(a){switch(a[1]){case 0:return 65;
case 1:return 66;case 2:return 67;case 3:return 68;case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;
case 30:return 52;case 31:return 53;case 32:return 54;case 33:return 55;case 34:return 56;case 35:return 57;case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;case 54:return 114;case 55:return 115;case 56:return 116;
case 57:return 117;case 58:return 118;case 59:return 119;case 60:return 120;case 61:return 121;case 62:return 122;case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;
case 85:return 45;case 86:return 219;case 87:return 189;case 88:return 34;case 89:return 33;case 90:return 190;case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;case 99:return 16777247;case 100:return a[2]}};e.MainLoop=function(){this._tickables=[]};j["flambe.platform.MainLoop"]=e.MainLoop;e.MainLoop.__name__=["flambe","platform","MainLoop"];e.MainLoop.updateEntity=function(a,b){var c=a._compMap.SpeedAdjuster_5;
if(null!=c&&(c._internal_realDt=b,b*=c.scale._value,0>=b)){c.onUpdate(b);return}for(var d=a.firstComponent;null!=d;)c=d.next,d.onUpdate(b),d=c;for(d=a.firstChild;null!=d;)c=d.next,e.MainLoop.updateEntity(d,b),d=c};e.MainLoop.prototype={addTickable:function(a){this._tickables.push(a)},render:function(a){var b=a.willRender();null!=b&&(o.Sprite.render(z.root,b),a.didRender())},update:function(a){if(0>=a)K.logger.warn("Zero or negative time elapsed since the last frame!",["dt",a]);else{1<a&&(a=1);for(var b=
0;b<this._tickables.length;){var c=this._tickables[b];null==c||c.update(a)?this._tickables.splice(b,1):++b}z.volume.update(a);e.MainLoop.updateEntity(z.root,a)}},__class__:e.MainLoop};e.ManifestBuilder=function(){};j["flambe.platform.ManifestBuilder"]=e.ManifestBuilder;e.ManifestBuilder.__name__=["flambe","platform","ManifestBuilder"];e.MouseCodes=function(){};j["flambe.platform.MouseCodes"]=e.MouseCodes;e.MouseCodes.__name__=["flambe","platform","MouseCodes"];e.MouseCodes.toButton=function(a){switch(a){case 0:return d.MouseButton.Left;
case 1:return d.MouseButton.Middle;case 2:return d.MouseButton.Right}return d.MouseButton.Unknown(a)};e.MouseCodes.toButtonCode=function(a){switch(a[1]){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return a[2]}};e.Renderer=function(){};j["flambe.platform.Renderer"]=e.Renderer;e.Renderer.__name__=["flambe","platform","Renderer"];e.Renderer.prototype={__class__:e.Renderer};e.Tickable=function(){};j["flambe.platform.Tickable"]=e.Tickable;e.Tickable.__name__=["flambe","platform","Tickable"];
e.Tickable.prototype={__class__:e.Tickable};e.html.CanvasGraphics=function(a){this._firstDraw=!1;this._canvasCtx=a.getContext("2d");this.clear()};j["flambe.platform.html.CanvasGraphics"]=e.html.CanvasGraphics;e.html.CanvasGraphics.__name__=["flambe","platform","html","CanvasGraphics"];e.html.CanvasGraphics.__interfaces__=[o.Graphics];e.html.CanvasGraphics.prototype={willRender:function(){this._firstDraw=!0},applyScissor:function(a,b,c,d){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,c|
0,d|0);this._canvasCtx.clip()},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="source-over"}this._canvasCtx.globalCompositeOperation=b},setAlpha:function(a){this._canvasCtx.globalAlpha=a},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},fillRect:function(a,b,c,d,e){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,c,d,e),this._canvasCtx.globalCompositeOperation="source-over"):(this._canvasCtx.fillStyle=
"#"+("00000"+a.toString(16)).slice(-6),this._canvasCtx.fillRect(b|0,c|0,d|0,e|0))},drawPattern:function(a,b,c,d,e){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawPattern(a,b,c,d,e),this._canvasCtx.globalCompositeOperation="source-over"):(null==a.pattern&&(a.pattern=this._canvasCtx.createPattern(a.image,"repeat")),this._canvasCtx.fillStyle=a.pattern,this._canvasCtx.fillRect(b|0,c|0,d|0,e|0))},drawSubImage:function(a,b,c,d,e,f,h){this._firstDraw?(this._firstDraw=
!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubImage(a,b,c,d,e,f,h),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.image,d|0,e|0,f|0,h|0,b|0,c|0,f|0,h|0)},drawImage:function(a,b,c){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawImage(a,b,c),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.image,b|0,c|0)},restore:function(){this._canvasCtx.restore()},transform:function(a,
b,c,d,e,f){this._canvasCtx.transform(a,b,c,d,e|0,f|0)},rotate:function(a){this._canvasCtx.rotate(3.141592653589793*a/180)},scale:function(a,b){this._canvasCtx.scale(a,b)},translate:function(a,b){this._canvasCtx.translate(a|0,b|0)},save:function(){this._canvasCtx.save()},clear:function(){this._canvasCtx.fillStyle="rgba(0,0,0,0)";this._canvasCtx.fillRect(0,0,this._canvasCtx.canvas.width,this._canvasCtx.canvas.height)},__class__:e.html.CanvasGraphics};e.html.CanvasRenderer=function(a){this._graphics=
new e.html.CanvasGraphics(a);this._graphics.clear()};j["flambe.platform.html.CanvasRenderer"]=e.html.CanvasRenderer;e.html.CanvasRenderer.__name__=["flambe","platform","html","CanvasRenderer"];e.html.CanvasRenderer.__interfaces__=[e.Renderer];e.html.CanvasRenderer.prototype={didRender:function(){},willRender:function(){this._graphics.willRender();return this._graphics},createEmptyTexture:function(a,b){return new e.html.CanvasTexture(e.html.HtmlUtil.createEmptyCanvas(a,b))},createTexture:function(a){return new e.html.CanvasTexture(e.html.CanvasRenderer.CANVAS_TEXTURES?
e.html.HtmlUtil.createCanvas(a):a)},__class__:e.html.CanvasRenderer};e.html.CanvasTexture=function(a){this._graphics=null;this.image=a};j["flambe.platform.html.CanvasTexture"]=e.html.CanvasTexture;e.html.CanvasTexture.__name__=["flambe","platform","html","CanvasTexture"];e.html.CanvasTexture.__interfaces__=[o.Texture];e.html.CanvasTexture.prototype={getContext2d:function(){M.__instanceof(this.image,HTMLCanvasElement)||(this.image=e.html.HtmlUtil.createCanvas(this.image));return this.image.getContext("2d")},
get_graphics:function(){null==this._graphics&&(this.getContext2d(),this._graphics=new e.html._CanvasTexture.InternalGraphics(this));return this._graphics},get_height:function(){return this.image.height},get_width:function(){return this.image.width},writePixels:function(a,b,c,d,e){var f=this.getContext2d(),h=f.createImageData(d,e),i=h.data;if(null!=i.set)i.set(a.b);else{d=4*d*e;for(e=0;e<d;){var j=e++;i[j]=a.b[j]}}f.putImageData(h,b,c);this.pattern=null},readPixels:function(a,b,c,d){return V.Bytes.ofData(this.getContext2d().getImageData(a,
b,c,d).data)},__class__:e.html.CanvasTexture,__properties__:{get_width:"get_width",get_height:"get_height",get_graphics:"get_graphics"}};e.html._CanvasTexture={};e.html._CanvasTexture.InternalGraphics=function(a){e.html.CanvasGraphics.call(this,a.image);this._renderTarget=a};j["flambe.platform.html._CanvasTexture.InternalGraphics"]=e.html._CanvasTexture.InternalGraphics;e.html._CanvasTexture.InternalGraphics.__name__=["flambe","platform","html","_CanvasTexture","InternalGraphics"];e.html._CanvasTexture.InternalGraphics.__super__=
e.html.CanvasGraphics;e.html._CanvasTexture.InternalGraphics.prototype=t(e.html.CanvasGraphics.prototype,{fillRect:function(a,b,c,d,f){e.html.CanvasGraphics.prototype.fillRect.call(this,a,b,c,d,f);this._renderTarget.pattern=null},drawPattern:function(a,b,c,d,f){e.html.CanvasGraphics.prototype.drawPattern.call(this,a,b,c,d,f);this._renderTarget.pattern=null},drawSubImage:function(a,b,c,d,f,h,i){e.html.CanvasGraphics.prototype.drawSubImage.call(this,a,b,c,d,f,h,i);this._renderTarget.pattern=null},drawImage:function(a,
b,c){e.html.CanvasGraphics.prototype.drawImage.call(this,a,b,c);this._renderTarget.pattern=null},__class__:e.html._CanvasTexture.InternalGraphics});e.html.HtmlAssetPackLoader=function(a,b){e.BasicAssetPackLoader.call(this,a,b)};j["flambe.platform.html.HtmlAssetPackLoader"]=e.html.HtmlAssetPackLoader;e.html.HtmlAssetPackLoader.__name__=["flambe","platform","html","HtmlAssetPackLoader"];e.html.HtmlAssetPackLoader.detectAudioFormats=function(){var a=x.document.createElement("audio");if(null==a||null==
a.canPlayType)return[];var b=new X("\\b(iPhone|iPod|iPad)\\b","");if(!e.html.WebAudioSound.get_supported()&&b.match(x.window.navigator.userAgent))return[];for(var b=[{extension:"m4a",type:"audio/mp4; codecs=mp4a"},{extension:"mp3",type:"audio/mpeg"},{extension:"ogg",type:"audio/ogg; codecs=vorbis"},{extension:"wav",type:"audio/wav"}],c=[],d=0;d<b.length;){var f=b[d];++d;var h="";try{h=a.canPlayType(f.type)}catch(i){}""!=h&&c.push(f.extension)}return c};e.html.HtmlAssetPackLoader.supportsBlob=function(){if(e.html.HtmlAssetPackLoader._detectBlobSupport){e.html.HtmlAssetPackLoader._detectBlobSupport=
!1;try{(new XMLHttpRequest).responseType="blob"}catch(a){return!1}e.html.HtmlAssetPackLoader._URL=e.html.HtmlUtil.loadExtension("URL").value}return null!=e.html.HtmlAssetPackLoader._URL&&null!=e.html.HtmlAssetPackLoader._URL.createObjectURL};e.html.HtmlAssetPackLoader.__super__=e.BasicAssetPackLoader;e.html.HtmlAssetPackLoader.prototype=t(e.BasicAssetPackLoader.prototype,{sendRequest:function(a,b,c,d){var e=this,f=new XMLHttpRequest,h=0,i=function(){h=Date.now();f.open("GET",a,!0);f.responseType=
c;""==f.responseType&&(f.responseType="arraybuffer");f.send()},j=0;if("undefined"!=typeof f.onprogress){var l=4;f.onprogress=function(a){h=Date.now();e.handleProgress(b,a.loaded)};j=x.window.setInterval(function(){5E3<Date.now()-h&&(f.abort(),--l,0<l?i():(x.window.clearInterval(j),e.handleError(b,"Failed to load asset: timeout")))},1E3)}f.onload=function(){x.window.clearInterval(j);var a=f.response;null==a?a=f.responseText:"blob"==c&&"arraybuffer"==f.responseType&&(a=new Blob([f.response]));d(a)};
f.onerror=function(){x.window.clearInterval(j);e.handleError(b,"Failed to load asset: error #"+r.string(f.status))};i();return f},getAudioFormats:function(){null==e.html.HtmlAssetPackLoader._audioFormats&&(e.html.HtmlAssetPackLoader._audioFormats=e.html.HtmlAssetPackLoader.detectAudioFormats());return e.html.HtmlAssetPackLoader._audioFormats},loadEntry:function(a,b){var c=this;switch(b.type[1]){case 0:var d=new Image,f=new e.EventGroup;f.addDisposingListener(d,"load",function(){e.html.HtmlAssetPackLoader.supportsBlob()&&
e.html.HtmlAssetPackLoader._URL.revokeObjectURL(d.src);var a=c._platform.getRenderer().createTexture(d);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});f.addDisposingListener(d,"error",function(){c.handleError(b,"Failed to load image")});e.html.HtmlAssetPackLoader.supportsBlob()?this.sendRequest(a,b,"blob",function(a){d.src=e.html.HtmlAssetPackLoader._URL.createObjectURL(a)}):d.src=a;break;case 1:if(e.html.WebAudioSound.get_supported())this.sendRequest(a,b,"arraybuffer",function(d){e.html.WebAudioSound.ctx.decodeAudioData(d,
function(a){c.handleLoad(b,new e.html.WebAudioSound(a))},function(){K.logger.warn("Couldn't decode Web Audio, ignoring this asset",["url",a]);c.handleLoad(b,e.DummySound.getInstance())})});else{var h=x.document.createElement("audio");h.preload="auto";var i=++e.html.HtmlAssetPackLoader._mediaRefCount;null==e.html.HtmlAssetPackLoader._mediaElements&&(e.html.HtmlAssetPackLoader._mediaElements=new W);e.html.HtmlAssetPackLoader._mediaElements.set(i,h);f=new e.EventGroup;f.addDisposingListener(h,"canplaythrough",
function(){e.html.HtmlAssetPackLoader._mediaElements.remove(i);c.handleLoad(b,new e.html.HtmlSound(h))});f.addDisposingListener(h,"error",function(){e.html.HtmlAssetPackLoader._mediaElements.remove(i);var d=h.error.code;3==d||4==d?(K.logger.warn("Couldn't decode HTML5 audio, ignoring this asset",["url",a,"code",d]),c.handleLoad(b,e.DummySound.getInstance())):c.handleError(b,"Failed to load audio: "+r.string(h.error.code))});f.addListener(h,"progress",function(){if(0<h.buffered.length&&0<h.duration){var a=
h.buffered.end(0)/h.duration;c.handleProgress(b,a*b.bytes|0)}});h.src=a;h.load()}break;case 2:this.sendRequest(a,b,"text",function(a){c.handleLoad(b,a)})}},__class__:e.html.HtmlAssetPackLoader});e.html.HtmlExternal=function(){};j["flambe.platform.html.HtmlExternal"]=e.html.HtmlExternal;e.html.HtmlExternal.__name__=["flambe","platform","html","HtmlExternal"];e.html.HtmlExternal.__interfaces__=[y.External];e.html.HtmlExternal.prototype={bind:function(a,b){x.window[a]=b},call:function(a,b){null==b&&
(b=[]);return L.field(x.window,a).apply(null,b)},get_supported:function(){return!0},__class__:e.html.HtmlExternal,__properties__:{get_supported:"get_supported"}};m.LogHandler=function(){};j["flambe.util.LogHandler"]=m.LogHandler;m.LogHandler.__name__=["flambe","util","LogHandler"];m.LogHandler.prototype={__class__:m.LogHandler};e.html.HtmlLogHandler=function(a){this._tagPrefix=a+": "};j["flambe.platform.html.HtmlLogHandler"]=e.html.HtmlLogHandler;e.html.HtmlLogHandler.__name__=["flambe","platform",
"html","HtmlLogHandler"];e.html.HtmlLogHandler.__interfaces__=[m.LogHandler];e.html.HtmlLogHandler.isSupported=function(){return"object"==typeof console&&null!=console.info};e.html.HtmlLogHandler.prototype={log:function(a,b){b=this._tagPrefix+b;switch(a[1]){case 0:console.info(b);break;case 1:console.warn(b);break;case 2:console.error(b)}},__class__:e.html.HtmlLogHandler};e.html.HtmlMouse=function(a,b){e.BasicMouse.call(this,a);this._canvas=b};j["flambe.platform.html.HtmlMouse"]=e.html.HtmlMouse;
e.html.HtmlMouse.__name__=["flambe","platform","html","HtmlMouse"];e.html.HtmlMouse.__super__=e.BasicMouse;e.html.HtmlMouse.prototype=t(e.BasicMouse.prototype,{set_cursor:function(a){var b;switch(a[1]){case 0:b="";break;case 1:b="pointer";break;case 2:b="none"}this._canvas.style.cursor=b;return e.BasicMouse.prototype.set_cursor.call(this,a)},__class__:e.html.HtmlMouse});e.html.HtmlSound=function(a){this.audioElement=a};j["flambe.platform.html.HtmlSound"]=e.html.HtmlSound;e.html.HtmlSound.__name__=
["flambe","platform","html","HtmlSound"];e.html.HtmlSound.__interfaces__=[H.Sound];e.html.HtmlSound.prototype={get_duration:function(){return this.audioElement.duration},loop:function(a){null==a&&(a=1);return new e.html._HtmlSound.HtmlPlayback(this,a,!0)},play:function(a){null==a&&(a=1);return new e.html._HtmlSound.HtmlPlayback(this,a,!1)},__class__:e.html.HtmlSound,__properties__:{get_duration:"get_duration"}};e.html._HtmlSound={};e.html._HtmlSound.HtmlPlayback=function(a,b,c){var d=this;this._sound=
a;this._tickableAdded=!1;this._clonedElement=x.document.createElement("audio");this._clonedElement.loop=c;this._clonedElement.src=a.audioElement.src;this.volume=new F.AnimatedFloat(b,function(){d.updateVolume()});this.updateVolume();this.playAudio()};j["flambe.platform.html._HtmlSound.HtmlPlayback"]=e.html._HtmlSound.HtmlPlayback;e.html._HtmlSound.HtmlPlayback.__name__=["flambe","platform","html","_HtmlSound","HtmlPlayback"];e.html._HtmlSound.HtmlPlayback.__interfaces__=[e.Tickable,H.Playback];e.html._HtmlSound.HtmlPlayback.prototype=
{updateVolume:function(){this._clonedElement.volume=z.volume._value*this.volume._value},playAudio:function(){var a=this;this._clonedElement.play();this._tickableAdded||(e.html.HtmlPlatform.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=z.volume.get_changed().connect(function(){a.updateVolume()}))},dispose:function(){this.set_paused(!0)},update:function(a){this.volume.update(a);return this._clonedElement.ended||this._clonedElement.paused?(this._tickableAdded=!1,this._volumeBinding.dispose(),
!0):!1},set_position:function(a){return this._clonedElement.currentTime=a},get_position:function(){return this._clonedElement.currentTime},get_ended:function(){return this._clonedElement.ended},set_paused:function(a){this._clonedElement.paused!=a&&(a?this._clonedElement.pause():this.playAudio());return a},get_paused:function(){return this._clonedElement.paused},get_sound:function(){return this._sound},__class__:e.html._HtmlSound.HtmlPlayback,__properties__:{set_paused:"set_paused",get_paused:"get_paused",
get_ended:"get_ended",set_position:"set_position",get_position:"get_position",get_sound:"get_sound"}};e.html.HtmlStage=function(a){var b=this;this._canvas=a;this.resize=new m.Signal0;this.scaleFactor=e.html.HtmlStage.computeScaleFactor();1!=this.scaleFactor&&(K.logger.info("Reversing device DPI scaling",["scaleFactor",this.scaleFactor]),e.html.HtmlUtil.setVendorStyle(this._canvas,"transform-origin","top left"),e.html.HtmlUtil.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));
e.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){e.html.HtmlUtil.callLater(w(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",w(this,this.onWindowResize),!1);this.onWindowResize();this.orientation=new m.Value(null);null!=window.orientation&&(window.addEventListener("orientationchange",w(this,this.onOrientationChange),!1),this.onOrientationChange());this.fullscreen=new m.Value(!1);e.html.HtmlUtil.addVendorListener(x.document,
"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};j["flambe.platform.html.HtmlStage"]=e.html.HtmlStage;e.html.HtmlStage.__name__=["flambe","platform","html","HtmlStage"];e.html.HtmlStage.__interfaces__=[o.Stage];e.html.HtmlStage.computeScaleFactor=function(){var a=window.devicePixelRatio;null==a&&(a=1);var b=x.document.createElement("canvas").getContext("2d"),b=e.html.HtmlUtil.loadExtension("backingStorePixelRatio",b).value;null==b&&(b=1);a/=b;b=screen.height;return 1136<
a*screen.width||1136<a*b?1:a};e.html.HtmlStage.prototype={updateFullscreen:function(){this.fullscreen.set__(!0==e.html.HtmlUtil.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],x.document).value)},onOrientationChange:function(){this.orientation.set__(e.html.HtmlUtil.orientation(window.orientation))},hideMobileBrowser:function(){var a=this,b=x.document.documentElement.style;b.height=x.window.innerHeight+100+"px";b.width=x.window.innerWidth+"px";b.overflow="visible";e.html.HtmlUtil.callLater(function(){e.html.HtmlUtil.hideMobileBrowser();
e.html.HtmlUtil.callLater(function(){b.height=x.window.innerHeight+"px";a.onWindowResize()},100)})},resizeCanvas:function(a,b){var c=this.scaleFactor*a,d=this.scaleFactor*b;if(this._canvas.width==c&&this._canvas.height==d)return!1;this._canvas.width=c;this._canvas.height=d;this.resize.emit0();return!0},onWindowResize:function(){var a=this._canvas.parentNode.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},requestFullscreen:function(a){null==a&&(a=!0);if(a){var a=x.document.documentElement,
b=e.html.HtmlUtil.loadFirstExtension(["requestFullscreen","requestFullScreen"],a).value;null!=b&&b.apply(a,[])}else a=e.html.HtmlUtil.loadFirstExtension(["cancelFullscreen","cancelFullScreen"],x.document).value,null!=a&&a.apply(x.document,[])},requestResize:function(a,b){if(this.resizeCanvas(a,b)){var c=this._canvas.parentNode;c.style.width=a+"px";c.style.height=b+"px"}},unlockOrientation:function(){},lockOrientation:function(){},get_fullscreenSupported:function(){return!0==e.html.HtmlUtil.loadFirstExtension(["fullscreenEnabled",
"fullScreenEnabled"],x.document).value},get_height:function(){return this._canvas.height},get_width:function(){return this._canvas.width},__class__:e.html.HtmlStage,__properties__:{get_width:"get_width",get_height:"get_height",get_fullscreenSupported:"get_fullscreenSupported"}};e.html.HtmlStorage=function(a){this._storage=a};j["flambe.platform.html.HtmlStorage"]=e.html.HtmlStorage;e.html.HtmlStorage.__name__=["flambe","platform","html","HtmlStorage"];e.html.HtmlStorage.__interfaces__=[aa.Storage];
e.html.HtmlStorage.prototype={clear:function(){try{this._storage.clear()}catch(a){K.logger.warn("localStorage.clear failed",["message",a.message])}},remove:function(a){try{this._storage.removeItem("flambe:"+a)}catch(b){K.logger.warn("localStorage.removeItem failed",["message",b.message])}},get:function(a,b){var c=null;try{c=this._storage.getItem("flambe:"+a)}catch(d){K.logger.warn("localStorage.getItem failed",["message",d.message])}if(null!=c)try{return Q.run(c)}catch(e){K.logger.warn("Storage unserialization failed",
["message",e])}return b},set:function(a,b){var c;try{var d=new U;d.useCache=!0;d.useEnumIndex=!1;d.serialize(b);c=d.toString()}catch(e){return K.logger.warn("Storage serialization failed",["message",e]),!1}try{this._storage.setItem("flambe:"+a,c)}catch(f){return K.logger.warn("localStorage.setItem failed",["message",f.message]),!1}return!0},get_supported:function(){return!0},__class__:e.html.HtmlStorage,__properties__:{get_supported:"get_supported"}};e.html.HtmlUtil=function(){};j["flambe.platform.html.HtmlUtil"]=
e.html.HtmlUtil;e.html.HtmlUtil.__name__=["flambe","platform","html","HtmlUtil"];e.html.HtmlUtil.callLater=function(a,b){null==b&&(b=0);x.window.setTimeout(a,b)};e.html.HtmlUtil.hideMobileBrowser=function(){x.window.scrollTo(1,0)};e.html.HtmlUtil.loadExtension=function(a,b){null==b&&(b=x.window);var c=L.field(b,a);if(null!=c)return{prefix:null,field:a,value:c};for(var c=a.charAt(0).toUpperCase()+A.substr(a,1,null),d=0,f=e.html.HtmlUtil.VENDOR_PREFIXES;d<f.length;){var h=f[d];++d;var i=h+c,j=L.field(b,
i);if(null!=j)return{prefix:h,field:i,value:j}}return{prefix:null,field:null,value:null}};e.html.HtmlUtil.loadFirstExtension=function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;d=e.html.HtmlUtil.loadExtension(d,b);if(null!=d.field)return d}return{prefix:null,field:null,value:null}};e.html.HtmlUtil.polyfill=function(a,b){null==b&&(b=x.window);var c=e.html.HtmlUtil.loadExtension(a,b).value;if(null==c)return!1;b[a]=c;return!0};e.html.HtmlUtil.setVendorStyle=function(a,b,c){for(var a=a.style,d=0,f=
e.html.HtmlUtil.VENDOR_PREFIXES;d<f.length;){var h=f[d];++d;a.setProperty("-"+h+"-"+b,c)}a.setProperty(b,c)};e.html.HtmlUtil.addVendorListener=function(a,b,c,d){for(var f=0,h=e.html.HtmlUtil.VENDOR_PREFIXES;f<h.length;){var i=h[f];++f;a.addEventListener(i+b,c,d)}a.addEventListener(b,c,d)};e.html.HtmlUtil.orientation=function(a){switch(a){case -90:case 90:return o.Orientation.Landscape;default:return o.Orientation.Portrait}};e.html.HtmlUtil.createEmptyCanvas=function(a,b){var c=x.document.createElement("canvas");
c.width=a;c.height=b;return c};e.html.HtmlUtil.createCanvas=function(a){var b=e.html.HtmlUtil.createEmptyCanvas(a.width,a.height),c=b.getContext("2d");c.save();c.globalCompositeOperation="copy";c.drawImage(a,0,0);c.restore();return b};e.html.HtmlUtil.fixAndroidMath=function(){if(0<=x.window.navigator.userAgent.indexOf("Linux; U; Android 4")){K.logger.warn("Monkey patching around Android sin/cos bug",null);var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==
a?1:b(a)}}};y={Web:function(){}};j["flambe.web.Web"]=y.Web;y.Web.__name__=["flambe","web","Web"];y.Web.prototype={__class__:y.Web,__properties__:{get_supported:"get_supported"}};e.html.HtmlWeb=function(a){this._container=a};j["flambe.platform.html.HtmlWeb"]=e.html.HtmlWeb;e.html.HtmlWeb.__name__=["flambe","platform","html","HtmlWeb"];e.html.HtmlWeb.__interfaces__=[y.Web];e.html.HtmlWeb.prototype={openBrowser:function(a){x.window.open(a,"_blank")},createView:function(a,b,c,d){var f=x.document.createElement("iframe");
f.style.position="absolute";f.style.border="0";f.scrolling="no";this._container.appendChild(f);a=new e.html.HtmlWebView(f,a,b,c,d);e.html.HtmlPlatform.instance.mainLoop.addTickable(a);return a},get_supported:function(){return!0},__class__:e.html.HtmlWeb,__properties__:{get_supported:"get_supported"}};y.WebView=function(){};j["flambe.web.WebView"]=y.WebView;y.WebView.__name__=["flambe","web","WebView"];y.WebView.__interfaces__=[m.Disposable];y.WebView.prototype={__class__:y.WebView};e.html.HtmlWebView=
function(a,b,c,d,e){var f=this;this.iframe=a;a=function(){f.updateBounds()};this.x=new F.AnimatedFloat(b,a);this.y=new F.AnimatedFloat(c,a);this.width=new F.AnimatedFloat(d,a);this.height=new F.AnimatedFloat(e,a);this.updateBounds();this.url=new m.Value(null,function(a){f.loadUrl(a)});this.error=new m.Signal1};j["flambe.platform.html.HtmlWebView"]=e.html.HtmlWebView;e.html.HtmlWebView.__name__=["flambe","platform","html","HtmlWebView"];e.html.HtmlWebView.__interfaces__=[e.Tickable,y.WebView];e.html.HtmlWebView.prototype=
{loadUrl:function(a){null!=this.iframe&&(this.iframe.src=a)},updateBounds:function(){null!=this.iframe&&(this.iframe.style.left=this.x._value+"px",this.iframe.style.top=this.y._value+"px",this.iframe.width=this.width._value,this.iframe.height=this.height._value)},update:function(a){this.x.update(a);this.y.update(a);this.width.update(a);this.height.update(a);return null==this.iframe},dispose:function(){null!=this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),this.iframe=null)},__class__:e.html.HtmlWebView};
e.html.WebAudioSound=function(a){this.buffer=a};j["flambe.platform.html.WebAudioSound"]=e.html.WebAudioSound;e.html.WebAudioSound.__name__=["flambe","platform","html","WebAudioSound"];e.html.WebAudioSound.__interfaces__=[H.Sound];e.html.WebAudioSound.__properties__={get_supported:"get_supported"};e.html.WebAudioSound.get_supported=function(){if(e.html.WebAudioSound._detectSupport){e.html.WebAudioSound._detectSupport=!1;var a=e.html.HtmlUtil.loadExtension("AudioContext").value;null!=a&&(e.html.WebAudioSound.ctx=
new a,e.html.WebAudioSound.gain=(e.html.WebAudioSound.ctx.createGain)?e.html.WebAudioSound.ctx.createGain():e.html.WebAudioSound.ctx.createGainNode(),e.html.WebAudioSound.gain.connect(e.html.WebAudioSound.ctx.destination),z.volume.watch(function(a){e.html.WebAudioSound.gain.gain.value=a}))}return null!=e.html.WebAudioSound.ctx};e.html.WebAudioSound.prototype={get_duration:function(){return this.buffer.duration},loop:function(a){null==a&&(a=1);return new e.html._WebAudioSound.WebAudioPlayback(this,a,!0)},play:function(a){null==a&&(a=1);return new e.html._WebAudioSound.WebAudioPlayback(this,
a,!1)},__class__:e.html.WebAudioSound,__properties__:{get_duration:"get_duration"}};e.html._WebAudioSound={};e.html._WebAudioSound.WebAudioPlayback=function(a,b,c){var d=this;this._sound=a;this._head=e.html.WebAudioSound.gain;this._sourceNode=e.html.WebAudioSound.ctx.createBufferSource();this._sourceNode.buffer=a.buffer;this._sourceNode.loop=c;(this._sourceNode.start) ?this._sourceNode.start(0) : this._sourceNode.noteOn(0);this.playAudio();this.volume=new F.AnimatedFloat(b,function(a){d.setVolume(a)});1!=b&&this.setVolume(b)};j["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=
e.html._WebAudioSound.WebAudioPlayback;e.html._WebAudioSound.WebAudioPlayback.__name__=["flambe","platform","html","_WebAudioSound","WebAudioPlayback"];e.html._WebAudioSound.WebAudioPlayback.__interfaces__=[e.Tickable,H.Playback];e.html._WebAudioSound.WebAudioPlayback.prototype={playAudio:function(){this._sourceNode.connect(this._head);this._startedAt=e.html.WebAudioSound.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(this._tickableAdded=!0,e.html.HtmlPlatform.instance.mainLoop.addTickable(this))},
insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=a},setVolume:function(a){null==this._gainNode&&(this._gainNode=(e.html.WebAudioSound.ctx.createGain)?e.html.WebAudioSound.ctx.createGain():e.html.WebAudioSound.ctx.createGainNode(),this.insertNode(this._gainNode));this._gainNode.gain.value=a},dispose:function(){this.set_paused(!0)},update:function(a){this.volume.update(a);return 3==this._sourceNode.playbackState||0<=this._pausedAt?(this._tickableAdded=!1,!0):!1},set_position:function(a){return a},
get_position:function(){return 3==this._sourceNode.playbackState?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(e.html.WebAudioSound.ctx.currentTime-this._startedAt)%this._sound.get_duration()},get_ended:function(){return 3==this._sourceNode.playbackState},set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},get_paused:function(){return 0<=this._pausedAt},get_sound:function(){return this._sound},
__class__:e.html._WebAudioSound.WebAudioPlayback,__properties__:{set_paused:"set_paused",get_paused:"get_paused",get_ended:"get_ended",set_position:"set_position",get_position:"get_position",get_sound:"get_sound"}};y={Director:function(){this._width=this._height=-1;this._transitor=null;this.scenes=[];this.occludedScenes=[];this._root=new O}};j["flambe.scene.Director"]=y.Director;y.Director.__name__=["flambe","scene","Director"];y.Director.__super__=P;y.Director.prototype=t(P.prototype,{get_height:function(){return 0>
this._height?z._platform.getStage().get_height():this._height},get_width:function(){return 0>this._width?z._platform.getStage().get_width():this._width},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a],b=b._compMap.Scene_4;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-
1):[];b=this.get_topScene();null!=b&&this.show(b)},show:function(a){a=a._compMap.Scene_4;null!=a&&a.shown.emit0()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var c=b[a];++a;c.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onAdded:function(){this.owner.addChild(this._root)},
get_name:function(){return"Director_0"},__class__:y.Director});y._Director={};y._Director.Transitor=function(){};j["flambe.scene._Director.Transitor"]=y._Director.Transitor;y._Director.Transitor.__name__=["flambe","scene","_Director","Transitor"];y._Director.Transitor.prototype={complete:function(){this._transition.complete();this._onComplete()},update:function(a){return this._transition.update(a)},__class__:y._Director.Transitor};y.Scene=function(a){null==a&&(a=!0);this.opaque=a;this.shown=new m.Signal0;
this.hidden=new m.Signal0};j["flambe.scene.Scene"]=y.Scene;y.Scene.__name__=["flambe","scene","Scene"];y.Scene.__super__=P;y.Scene.prototype=t(P.prototype,{get_name:function(){return"Scene_4"},__class__:y.Scene});y.Transition=function(){};j["flambe.scene.Transition"]=y.Transition;y.Transition.__name__=["flambe","scene","Transition"];y.Transition.prototype={complete:function(){},update:function(){return!0},__class__:y.Transition};H._Mixer={};H._Mixer.MixerSound=function(a,b){this._source=a;this._channels=
b;this._playbacks=[]};j["flambe.sound._Mixer.MixerSound"]=H._Mixer.MixerSound;H._Mixer.MixerSound.__name__=["flambe","sound","_Mixer","MixerSound"];H._Mixer.MixerSound.__interfaces__=[m.Disposable,H.Sound];H._Mixer.MixerSound.prototype={dispose:function(){for(var a=0,b=this._playbacks;a<b.length;){var c=b[a];++a;c.dispose()}this._playbacks=[]},get_duration:function(){return this._source.get_duration()},findOpenChannel:function(){for(var a=0,b=this._channels;a<b;){var c=a++,d=this._playbacks[c];if(null==
d||d.get_ended())return c}return-1},playOrLoop:function(a,b){var c=this.findOpenChannel();if(0>c)return new e.DummyPlayback(this);var d=b?this._source.loop(a):this._source.play(a);return this._playbacks[c]=d},loop:function(a){null==a&&(a=1);return this.playOrLoop(a,!0)},play:function(a){null==a&&(a=1);return this.playOrLoop(a,!1)},__class__:H._Mixer.MixerSound,__properties__:{get_duration:"get_duration"}};v={BitmapSprite:function(a){o.Sprite.call(this);this.symbol=a;this.anchorX.set__(a.anchorX);
this.anchorY.set__(a.anchorY)}};j["flambe.swf.BitmapSprite"]=v.BitmapSprite;v.BitmapSprite.__name__=["flambe","swf","BitmapSprite"];v.BitmapSprite.__super__=o.Sprite;v.BitmapSprite.prototype=t(o.Sprite.prototype,{getNaturalHeight:function(){return this.symbol.height},getNaturalWidth:function(){return this.symbol.width},draw:function(a){a.drawSubImage(this.symbol.atlas,0,0,this.symbol.x,this.symbol.y,this.symbol.width,this.symbol.height)},__class__:v.BitmapSprite});v.Symbol=function(){};j["flambe.swf.Symbol"]=
v.Symbol;v.Symbol.__name__=["flambe","swf","Symbol"];v.Symbol.prototype={__class__:v.Symbol,__properties__:{get_name:"get_name"}};v.BitmapSymbol=function(a,b){this._name=a.symbol;this.atlas=b;var c=a.rect;this.x=c[0];this.y=c[1];this.width=c[2];this.height=c[3];c=a.origin;null!=c?(this.anchorX=c[0],this.anchorY=c[1]):this.anchorY=this.anchorX=0};j["flambe.swf.BitmapSymbol"]=v.BitmapSymbol;v.BitmapSymbol.__name__=["flambe","swf","BitmapSymbol"];v.BitmapSymbol.__interfaces__=[v.Symbol];v.BitmapSymbol.prototype=
{get_name:function(){return this._name},createSprite:function(){return new v.BitmapSprite(this)},__class__:v.BitmapSymbol,__properties__:{get_name:"get_name"}};v.Library=function(a,b){this._symbols=new G;var c=Y.parse(a.getFile(b+"/library.json"));this.frameRate=c.frameRate;for(var d=[],e=0,f=c.movies;e<f.length;){var h=f[e];++e;h=new v.MovieSymbol(this,h);d.push(h);this._symbols.set(h.get_name(),h)}e=c.textureGroups;(1!=e[0].scaleFactor||1<e.length)&&K.logger.warn("Flambe doesn't support Flump's Additional Scale Factors. Use Base Scales and load from different asset packs instead.",
null);h=e[0].atlases;for(e=0;e<h.length;){c=h[e];++e;for(var i=a.getTexture(b+"/"+m.Strings.removeFileExtension(c.file)),f=0,c=c.textures;f<c.length;){var j=c[f];++f;j=new v.BitmapSymbol(j,i);this._symbols.set(j.get_name(),j)}}for(e=0;e<d.length;){h=d[e];++e;f=0;for(c=h.layers;f<c.length;){h=c[f];++f;i=0;for(j=h.keyframes;i<j.length;){var l=j[i];++i;if(null!=l.symbolName){var k=this._symbols.get(l.symbolName);null==h.lastSymbol?h.lastSymbol=k:h.lastSymbol!=k&&(h.multipleSymbols=!0);l.symbol=k}}}}};
j["flambe.swf.Library"]=v.Library;v.Library.__name__=["flambe","swf","Library"];v.Library.prototype={__class__:v.Library};v.MovieSprite=function(a){this._looped=null;o.Sprite.call(this);this.symbol=a;this.speed=new F.AnimatedFloat(1);this._animators=Array(a.layers.length);for(var b=0,c=this._animators.length;b<c;){var d=b++;this._animators[d]=new v._MovieSprite.LayerAnimator(a.layers[d])}this._position=this._frame=0;this["goto"](1)};j["flambe.swf.MovieSprite"]=v.MovieSprite;v.MovieSprite.__name__=
["flambe","swf","MovieSprite"];v.MovieSprite.__super__=o.Sprite;v.MovieSprite.prototype=t(o.Sprite.prototype,{get_looped:function(){null==this._looped&&(this._looped=new m.Signal0);return this._looped},set_paused:function(a){this._flags=m.BitSets.set(this._flags,16,a);return a},set_position:function(a){return this._position=J.FMath.clamp(a,0,this.symbol.duration)},"goto":function(a){if(this._frame!=a){if(a<this._frame)for(var b=0,c=this._animators;b<c.length;){var d=c[b];++b;d.changedKeyframe=!0;
d.keyframeIdx=0}b=0;for(c=this._animators;b<c.length;)d=c[b],++b,d.composeFrame(a);this._frame=a}},onUpdate:function(a){o.Sprite.prototype.onUpdate.call(this,a);this.speed.update(a);var b=!1;0==(this._flags&16)&&(this._position+=this.speed._value*a,this._position>this.symbol.duration&&(this._position%=this.symbol.duration,b=!0));this["goto"](this._position*this.symbol.frameRate);b&&null!=this._looped&&this._looped.emit0()},onRemoved:function(){o.Sprite.prototype.onRemoved.call(this);for(var a=0,b=
this._animators;a<b.length;){var c=b[a];++a;this.owner.removeChild(c.content)}},onAdded:function(){o.Sprite.prototype.onAdded.call(this);for(var a=0,b=this._animators;a<b.length;){var c=b[a];++a;this.owner.addChild(c.content)}},__class__:v.MovieSprite,__properties__:t(o.Sprite.prototype.__properties__,{set_position:"set_position",get_position:"get_position",set_paused:"set_paused",get_paused:"get_paused"})});v._MovieSprite={};v._MovieSprite.LayerAnimator=function(a){this._sprites=null;this.changedKeyframe=
!1;this.keyframeIdx=0;this.layer=a;if(a.multipleSymbols){this._sprites=Array(a.keyframes.length);for(var b=0,c=this._sprites.length;b<c;){var d=b++,e=a.keyframes[d];this._sprites[d]=null!=e.symbol?e.symbol.createSprite():new o.Sprite}a=this._sprites[0]}else a=null!=a.lastSymbol?a.lastSymbol.createSprite():new o.Sprite;this.content=(new O).add(a)};j["flambe.swf._MovieSprite.LayerAnimator"]=v._MovieSprite.LayerAnimator;v._MovieSprite.LayerAnimator.__name__=["flambe","swf","_MovieSprite","LayerAnimator"];
v._MovieSprite.LayerAnimator.prototype={composeFrame:function(a){for(var b=this.layer.keyframes,c=b.length-1;this.keyframeIdx<c&&b[this.keyframeIdx+1].index<=a;)++this.keyframeIdx,this.changedKeyframe=!0;var d;this.changedKeyframe&&null!=this._sprites?(d=this._sprites[this.keyframeIdx],this.content.add(d)):d=this.content._compMap.Sprite_1;this.changedKeyframe=!1;var e=b[this.keyframeIdx],f=e.visible&&null!=e.symbol;d.set_visible(f);if(f){var f=e.x,h=e.y,i=e.scaleX,j=e.scaleY,l=e.skewX,k=e.skewY,m=
e.alpha;if(e.tweened&&this.keyframeIdx<c){a=(a-e.index)/e.duration;c=e.ease;if(0!=c){var n;0>c?(n=1-a,n=1-n*n,c=-c):n=a*a;a=c*n+(1-c)*a}b=b[this.keyframeIdx+1];f+=(b.x-f)*a;h+=(b.y-h)*a;i+=(b.scaleX-i)*a;j+=(b.scaleY-j)*a;l+=(b.skewX-l)*a;k+=(b.skewY-k)*a;m+=(b.alpha-m)*a}b=d.getLocalMatrix();a=Math.sin(l);l=Math.cos(l);c=Math.sin(k);k=Math.cos(k);b.set(k*i,c*i,-a*j,l*j,f,h);b.translate(-e.pivotX,-e.pivotY);d.alpha.set__(m)}},__class__:v._MovieSprite.LayerAnimator};v.MovieSymbol=function(a,b){this._name=
b.id;this.frameRate=a.frameRate;this.frames=0;this.layers=Array(b.layers.length);for(var c=0,d=this.layers.length;c<d;){var e=c++,f=new v.MovieLayer(b.layers[e]);this.frames=Math.max(f.get_frames(),this.frames);this.layers[e]=f}this.duration=this.frames/this.frameRate};j["flambe.swf.MovieSymbol"]=v.MovieSymbol;v.MovieSymbol.__name__=["flambe","swf","MovieSymbol"];v.MovieSymbol.__interfaces__=[v.Symbol];v.MovieSymbol.prototype={createSprite:function(){return new v.MovieSprite(this)},get_name:function(){return this._name},
__class__:v.MovieSymbol,__properties__:{get_name:"get_name"}};v.MovieLayer=function(a){this.multipleSymbols=!1;this.lastSymbol=null;this.name=a.name;var b=null;this.keyframes=Array(a.keyframes.length);for(var c=0,d=this.keyframes.length;c<d;){var e=c++,b=new v.MovieKeyframe(a.keyframes[e],b);this.keyframes[e]=b}};j["flambe.swf.MovieLayer"]=v.MovieLayer;v.MovieLayer.__name__=["flambe","swf","MovieLayer"];v.MovieLayer.prototype={get_frames:function(){var a=this.keyframes[this.keyframes.length-1];return a.index+
(a.duration|0)},__class__:v.MovieLayer,__properties__:{get_frames:"get_frames"}};v.MovieKeyframe=function(a,b){this.ease=0;this.visible=this.tweened=!0;this.alpha=1;this.skewX=this.skewY=this.pivotX=this.pivotY=0;this.scaleX=this.scaleY=1;this.x=this.y=0;this.symbol=null;this.index=null!=b?b.index+b.duration:0;this.duration=a.duration;this.label=a.label;this.symbolName=a.ref;var c=a.loc;null!=c&&(this.x=c[0],this.y=c[1]);c=a.scale;null!=c&&(this.scaleX=c[0],this.scaleY=c[1]);c=a.skew;null!=c&&(this.skewX=
c[0],this.skewY=c[1]);c=a.pivot;null!=c&&(this.pivotX=c[0],this.pivotY=c[1]);null!=a.alpha&&(this.alpha=a.alpha);null!=a.visible&&(this.visible=a.visible);null!=a.tweened&&(this.tweened=a.tweened);null!=a.ease&&(this.ease=a.ease)};j["flambe.swf.MovieKeyframe"]=v.MovieKeyframe;v.MovieKeyframe.__name__=["flambe","swf","MovieKeyframe"];v.MovieKeyframe.prototype={__class__:v.MovieKeyframe};m.Arrays=function(){};j["flambe.util.Arrays"]=m.Arrays;m.Arrays.__name__=["flambe","util","Arrays"];m.Assert=function(){};
j["flambe.util.Assert"]=m.Assert;m.Assert.__name__=["flambe","util","Assert"];m.BitSets=function(){};j["flambe.util.BitSets"]=m.BitSets;m.BitSets.__name__=["flambe","util","BitSets"];m.BitSets.set=function(a,b,c){return c?a|b:a&~b};m.LogLevel=j["flambe.util.LogLevel"]={__ename__:["flambe","util","LogLevel"],__constructs__:["Info","Warn","Error"]};m.LogLevel.Info=["Info",0];m.LogLevel.Info.toString=q;m.LogLevel.Info.__enum__=m.LogLevel;m.LogLevel.Warn=["Warn",1];m.LogLevel.Warn.toString=q;m.LogLevel.Warn.__enum__=
m.LogLevel;m.LogLevel.Error=["Error",2];m.LogLevel.Error.toString=q;m.LogLevel.Error.__enum__=m.LogLevel;m.Promise=function(){this.success=new m.Signal1;this.error=new m.Signal1;this.progressChanged=new m.Signal0;this.hasResult=!1;this._total=this._progress=0};j["flambe.util.Promise"]=m.Promise;m.Promise.__name__=["flambe","util","Promise"];m.Promise.prototype={set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit0());return a},set_progress:function(a){this._progress!=a&&
(this._progress=a,this.progressChanged.emit0());return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_result:function(a){if(this.hasResult)throw"Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit1(a);return a},get_result:function(){if(!this.hasResult)throw"Promise result not yet available";return this._result},__class__:m.Promise,__properties__:{set_result:"set_result",get_result:"get_result",set_progress:"set_progress",
get_progress:"get_progress",set_total:"set_total",get_total:"get_total"}};m.Signal0=function(a){m.SignalBase.call(this,a)};j["flambe.util.Signal0"]=m.Signal0;m.Signal0.__name__=["flambe","util","Signal0"];m.Signal0.__super__=m.SignalBase;m.Signal0.prototype=t(m.SignalBase.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:m.Signal0});m._SignalBase={};m._SignalBase.Task=function(a){this.next=null;this.fn=a};j["flambe.util._SignalBase.Task"]=m._SignalBase.Task;
m._SignalBase.Task.__name__=["flambe","util","_SignalBase","Task"];m._SignalBase.Task.prototype={__class__:m._SignalBase.Task};D=void 0;T=void 0;Q=void 0;U=void 0;V=void 0;Y=void 0;Y=function(){};j["haxe.Json"]=Y;Y.__name__=["haxe","Json"];Y.parse=function(a){return(new Y).doParse(a)};Y.prototype={parseString:function(){for(var a=this.pos,b=new Z;;){var c=this.str.charCodeAt(this.pos++);if(34==c)break;if(92==c){b.b+=A.substr(this.str,a,this.pos-a-1);c=this.str.charCodeAt(this.pos++);switch(c){case 114:b.b+=
String.fromCharCode(13);break;case 110:b.b+=String.fromCharCode(10);break;case 116:b.b+=String.fromCharCode(9);break;case 98:b.b+=String.fromCharCode(8);break;case 102:b.b+=String.fromCharCode(12);break;case 47:case 92:case 34:b.b+=String.fromCharCode(c);break;case 117:a=r.parseInt("0x"+A.substr(this.str,this.pos,4));this.pos+=4;b.b+=String.fromCharCode(a);break;default:throw"Invalid escape sequence \\"+String.fromCharCode(c)+" at position "+(this.pos-1);}a=this.pos}else if(c!=c)throw"Unclosed string";
}b.b+=A.substr(this.str,a,this.pos-a-1);return b.b},parseRec:function(){for(;;)switch(this.str.charCodeAt(this.pos++)){case 32:case 13:case 10:case 9:break;case 123:for(var a={},b=null,c=null;;){var d=this.str.charCodeAt(this.pos++);switch(d){case 32:case 13:case 10:case 9:break;case 125:return(null!=b||!1==c)&&this.invalidChar(),a;case 58:null==b&&this.invalidChar();a[b]=this.parseRec();b=null;c=!0;break;case 44:c?c=!1:this.invalidChar();break;case 34:c&&this.invalidChar();b=this.parseString();break;
default:this.invalidChar()}}break;case 91:a=[];for(c=null;;)switch(d=this.str.charCodeAt(this.pos++),d){case 32:case 13:case 10:case 9:break;case 93:return!1==c&&this.invalidChar(),a;case 44:c?c=!1:this.invalidChar();break;default:c&&this.invalidChar(),this.pos--,a.push(this.parseRec()),c=!0}break;case 116:c=this.pos;if(114!=this.str.charCodeAt(this.pos++)||117!=this.str.charCodeAt(this.pos++)||101!=this.str.charCodeAt(this.pos++))this.pos=c,this.invalidChar();return!0;case 102:c=this.pos;if(97!=
this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++)||115!=this.str.charCodeAt(this.pos++)||101!=this.str.charCodeAt(this.pos++))this.pos=c,this.invalidChar();return!1;case 110:c=this.pos;if(117!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++))this.pos=c,this.invalidChar();return null;case 34:return this.parseString();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 45:this.pos--;if(!this.reg_float.match(A.substr(this.str,
this.pos,null)))throw"Invalid float at position "+this.pos;c=this.reg_float.matched(0);this.pos+=c.length;c=r.parseFloat(c);d=c|0;return d==c?d:c;default:this.invalidChar()}},invalidChar:function(){this.pos--;throw"Invalid char "+this.str.charCodeAt(this.pos)+" at position "+this.pos;},doParse:function(a){this.reg_float=new X("^-?(0|[1-9][0-9]*)(\\.[0-9]+)?([eE][+-]?[0-9]+)?","");this.str=a;this.pos=0;return this.parseRec()},__class__:Y};U=function(){this.buf=new Z;this.cache=[];this.useCache=U.USE_CACHE;
this.useEnumIndex=U.USE_ENUM_INDEX;this.shash=new G;this.scount=0};j["haxe.Serializer"]=U;U.__name__=["haxe","Serializer"];U.run=function(a){var b=new U;b.serialize(a);return b.toString()};U.prototype={serialize:function(a){var b=N["typeof"](a);switch(b[1]){case 0:this.buf.b+=r.string("n");break;case 1:if(0==a){this.buf.b+=r.string("z");break}this.buf.b+=r.string("i");this.buf.b+=r.string(a);break;case 2:Math.isNaN(a)?this.buf.b+=r.string("k"):Math.isFinite(a)?(this.buf.b+=r.string("d"),this.buf.b+=
r.string(a)):this.buf.b+=r.string(0>a?"m":"p");break;case 3:this.buf.b+=r.string(a?"t":"f");break;case 6:b=b[2];if(b==String){this.serializeString(a);break}if(this.useCache&&this.serializeRef(a))break;switch(b){case Array:var c=0;this.buf.b+=r.string("a");for(var d=a.length,e=0;e<d;)b=e++,null==a[b]?c++:(0<c&&(1==c?this.buf.b+=r.string("n"):(this.buf.b+=r.string("u"),this.buf.b+=r.string(c)),c=0),this.serialize(a[b]));0<c&&(1==c?this.buf.b+=r.string("n"):(this.buf.b+=r.string("u"),this.buf.b+=r.string(c)));
this.buf.b+=r.string("h");break;case da:this.buf.b+=r.string("l");for(a=a.iterator();a.hasNext();)b=a.next(),this.serialize(b);this.buf.b+=r.string("h");break;case Date:this.buf.b+=r.string("v");this.buf.b+=r.string(A.dateStr(a));break;case G:this.buf.b+=r.string("b");for(c=a.keys();c.hasNext();)b=c.next(),this.serializeString(b),this.serialize(a.get(b));this.buf.b+=r.string("h");break;case W:this.buf.b+=r.string("q");for(c=a.keys();c.hasNext();)b=c.next(),this.buf.b+=r.string(":"),this.buf.b+=r.string(b),
this.serialize(a.get(b));this.buf.b+=r.string("h");break;case V.Bytes:b=0;c=a.length-2;d=new Z;for(e=U.BASE64;b<c;){var f=a.b[b++],h=a.b[b++],i=a.b[b++];d.b+=r.string(e.charAt(f>>2));d.b+=r.string(e.charAt((f<<4|h>>4)&63));d.b+=r.string(e.charAt((h<<2|i>>6)&63));d.b+=r.string(e.charAt(i&63))}b==c?(f=a.b[b++],h=a.b[b++],d.b+=r.string(e.charAt(f>>2)),d.b+=r.string(e.charAt((f<<4|h>>4)&63)),d.b+=r.string(e.charAt(h<<2&63))):b==c+1&&(f=a.b[b++],d.b+=r.string(e.charAt(f>>2)),d.b+=r.string(e.charAt(f<<
4&63)));b=d.b;this.buf.b+=r.string("s");this.buf.b+=r.string(b.length);this.buf.b+=r.string(":");this.buf.b+=r.string(b);break;default:this.cache.pop(),null!=a.hxSerialize?(this.buf.b+=r.string("C"),this.serializeString(N.getClassName(b)),this.cache.push(a),a.hxSerialize(this),this.buf.b+=r.string("g")):(this.buf.b+=r.string("c"),this.serializeString(N.getClassName(b)),this.cache.push(a),this.serializeFields(a))}break;case 4:if(this.useCache&&this.serializeRef(a))break;this.buf.b+=r.string("o");this.serializeFields(a);
break;case 7:b=b[2];if(this.useCache&&this.serializeRef(a))break;this.cache.pop();this.buf.b+=r.string(this.useEnumIndex?"j":"w");this.serializeString(N.getEnumName(b));this.useEnumIndex?(this.buf.b+=r.string(":"),this.buf.b+=r.string(a[1])):this.serializeString(a[0]);this.buf.b+=r.string(":");d=a.length;this.buf.b+=r.string(d-2);for(e=2;e<d;)b=e++,this.serialize(a[b]);this.cache.push(a);break;case 5:throw"Cannot serialize function";default:throw"Cannot serialize "+r.string(a);}},serializeFields:function(a){for(var b=
0,c=L.fields(a);b<c.length;){var d=c[b];++b;this.serializeString(d);this.serialize(L.field(a,d))}this.buf.b+=r.string("g")},serializeRef:function(a){for(var b=typeof a,c=0,d=this.cache.length;c<d;){var e=c++,f=this.cache[e];if(typeof f==b&&f==a)return this.buf.b+=r.string("r"),this.buf.b+=r.string(e),!0}this.cache.push(a);return!1},serializeString:function(a){var b=this.shash.get(a);null!=b?(this.buf.b+=r.string("R"),this.buf.b+=r.string(b)):(this.shash.set(a,this.scount++),this.buf.b+=r.string("y"),
a=S.urlEncode(a),this.buf.b+=r.string(a.length),this.buf.b+=r.string(":"),this.buf.b+=r.string(a))},toString:function(){return this.buf.b},__class__:U};T=function(a){var b=this;this.id=window.setInterval(function(){b.run()},a)};j["haxe.Timer"]=T;T.__name__=["haxe","Timer"];T.delay=function(a,b){var c=new T(b);c.run=function(){c.stop();a()};return c};T.prototype={run:function(){},stop:function(){null!=this.id&&(window.clearInterval(this.id),this.id=null)},__class__:T};Q=function(a){this.buf=a;this.length=
a.length;this.pos=0;this.scache=[];this.cache=[];a=Q.DEFAULT_RESOLVER;null==a&&(a=N,Q.DEFAULT_RESOLVER=a);this.setResolver(a)};j["haxe.Unserializer"]=Q;Q.__name__=["haxe","Unserializer"];Q.initCodes=function(){for(var a=[],b=0,c=Q.BASE64.length;b<c;){var d=b++;a[Q.BASE64.charCodeAt(d)]=d}return a};Q.run=function(a){return(new Q(a)).unserialize()};Q.prototype={unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 110:return null;case 116:return!0;case 102:return!1;case 122:return 0;case 105:return this.readDigits();
case 100:for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return r.parseFloat(A.substr(this.buf,a,this.pos-a));case 121:b=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<b)throw"Invalid string length";a=A.substr(this.buf,this.pos,b);this.pos+=b;a=S.urlDecode(a);this.scache.push(a);return a;case 107:return Math.NaN;case 109:return Math.NEGATIVE_INFINITY;case 112:return Math.POSITIVE_INFINITY;case 97:var c=this.buf,
a=[];for(this.cache.push(a);;){b=this.buf.charCodeAt(this.pos);if(104==b){this.pos++;break}117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):a.push(this.unserialize())}return a;case 111:return b={},this.cache.push(b),this.unserializeObject(b),b;case 114:b=this.readDigits();if(0>b||b>=this.cache.length)throw"Invalid reference";return this.cache[b];case 82:b=this.readDigits();if(0>b||b>=this.scache.length)throw"Invalid string reference";return this.scache[b];case 120:throw this.unserialize();
case 99:b=this.unserialize();a=this.resolver.resolveClass(b);if(null==a)throw"Class not found "+b;b=N.createEmptyInstance(a);this.cache.push(b);this.unserializeObject(b);return b;case 119:b=this.unserialize();a=this.resolver.resolveEnum(b);if(null==a)throw"Enum not found "+b;b=this.unserializeEnum(a,this.unserialize());this.cache.push(b);return b;case 106:b=this.unserialize();a=this.resolver.resolveEnum(b);if(null==a)throw"Enum not found "+b;this.pos++;var c=this.readDigits(),d=N.getEnumConstructs(a)[c];
if(null==d)throw"Unknown enum index "+b+"@"+c;b=this.unserializeEnum(a,d);this.cache.push(b);return b;case 108:b=new da;for(this.cache.push(b);104!=this.buf.charCodeAt(this.pos);)b.add(this.unserialize());this.pos++;return b;case 98:c=new G;for(this.cache.push(c);104!=this.buf.charCodeAt(this.pos);)a=this.unserialize(),c.set(a,this.unserialize());this.pos++;return c;case 113:c=new W;this.cache.push(c);for(b=this.buf.charCodeAt(this.pos++);58==b;)a=this.readDigits(),c.set(a,this.unserialize()),b=this.buf.charCodeAt(this.pos++);
if(104!=b)throw"Invalid IntHash format";return c;case 118:return b=A.strDate(A.substr(this.buf,this.pos,19)),this.cache.push(b),this.pos+=19,b;case 115:b=this.readDigits();c=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<b)throw"Invalid bytes length";d=Q.CODES;null==d&&(d=Q.initCodes(),Q.CODES=d);for(var a=this.pos,e=b&3,f=a+(b-e),h=V.Bytes.alloc(3*(b>>2)+(2<=e?e-1:0)),i=0;a<f;){var j=d[c.charCodeAt(a++)],l=d[c.charCodeAt(a++)];h.b[i++]=(j<<2|l>>4)&255;j=d[c.charCodeAt(a++)];
h.b[i++]=(l<<4|j>>2)&255;l=d[c.charCodeAt(a++)];h.b[i++]=(j<<6|l)&255}2<=e&&(j=d[c.charCodeAt(a++)],l=d[c.charCodeAt(a++)],h.b[i++]=(j<<2|l>>4)&255,3==e&&(j=d[c.charCodeAt(a++)],h.b[i++]=(l<<4|j>>2)&255));this.pos+=b;this.cache.push(h);return h;case 67:b=this.unserialize();a=this.resolver.resolveClass(b);if(null==a)throw"Class not found "+b;b=N.createEmptyInstance(a);this.cache.push(b);b.hxUnserialize(this);if(103!=this.buf.charCodeAt(this.pos++))throw"Invalid custom data";return b}this.pos--;throw"Invalid char "+
this.buf.charAt(this.pos)+" at position "+this.pos;},unserializeEnum:function(a,b){if(58!=this.buf.charCodeAt(this.pos++))throw"Invalid enum format";var c=this.readDigits();if(0==c)return N.createEnum(a,b);for(var d=[];0<c--;)d.push(this.unserialize());return N.createEnum(a,b,d)},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw"Invalid object";if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if(!M.__instanceof(b,String))throw"Invalid object key";var c=this.unserialize();
a[b]=c}this.pos++},readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var d=this.buf.charCodeAt(this.pos);if(d!=d)break;if(45==d){if(this.pos!=c)break;b=!0}else{if(48>d||57<d)break;a=10*a+(d-48)}this.pos++}b&&(a*=-1);return a},setResolver:function(a){this.resolver=null==a?{resolveClass:function(){return null},resolveEnum:function(){return null}}:a},__class__:Q};V={Bytes:function(a,b){this.length=a;this.b=b}};j["haxe.io.Bytes"]=V.Bytes;V.Bytes.__name__=["haxe","io","Bytes"];V.Bytes.alloc=function(a){for(var b=
[],c=0;c<a;)c++,b.push(0);return new V.Bytes(a,b)};V.Bytes.ofData=function(a){return new V.Bytes(a.length,a)};V.Bytes.prototype={__class__:V.Bytes};D={_Fast:{}};D._Fast.NodeAccess=function(a){this.__x=a};j["haxe.xml._Fast.NodeAccess"]=D._Fast.NodeAccess;D._Fast.NodeAccess.__name__=["haxe","xml","_Fast","NodeAccess"];D._Fast.NodeAccess.prototype={resolve:function(a){var b=this.__x.elementsNamed(a).next();if(null==b)throw(this.__x.nodeType==u.Document?"Document":this.__x.getNodeName())+" is missing element "+
a;return new D.Fast(b)},__class__:D._Fast.NodeAccess};D._Fast.AttribAccess=function(a){this.__x=a};j["haxe.xml._Fast.AttribAccess"]=D._Fast.AttribAccess;D._Fast.AttribAccess.__name__=["haxe","xml","_Fast","AttribAccess"];D._Fast.AttribAccess.prototype={resolve:function(a){if(this.__x.nodeType==u.Document)throw"Cannot access document attribute "+a;var b=this.__x.get(a);if(null==b)throw this.__x.getNodeName()+" is missing attribute "+a;return b},__class__:D._Fast.AttribAccess};D._Fast.HasAttribAccess=
function(a){this.__x=a};j["haxe.xml._Fast.HasAttribAccess"]=D._Fast.HasAttribAccess;D._Fast.HasAttribAccess.__name__=["haxe","xml","_Fast","HasAttribAccess"];D._Fast.HasAttribAccess.prototype={resolve:function(a){if(this.__x.nodeType==u.Document)throw"Cannot access document attribute "+a;return this.__x.exists(a)},__class__:D._Fast.HasAttribAccess};D._Fast.HasNodeAccess=function(a){this.__x=a};j["haxe.xml._Fast.HasNodeAccess"]=D._Fast.HasNodeAccess;D._Fast.HasNodeAccess.__name__=["haxe","xml","_Fast",
"HasNodeAccess"];D._Fast.HasNodeAccess.prototype={resolve:function(a){return this.__x.elementsNamed(a).hasNext()},__class__:D._Fast.HasNodeAccess};D._Fast.NodeListAccess=function(a){this.__x=a};j["haxe.xml._Fast.NodeListAccess"]=D._Fast.NodeListAccess;D._Fast.NodeListAccess.__name__=["haxe","xml","_Fast","NodeListAccess"];D._Fast.NodeListAccess.prototype={resolve:function(a){for(var b=new da,a=this.__x.elementsNamed(a);a.hasNext();){var c=a.next();b.add(new D.Fast(c))}return b},__class__:D._Fast.NodeListAccess};
D.Fast=function(a){if(a.nodeType!=u.Document&&a.nodeType!=u.Element)throw"Invalid nodeType "+r.string(a.nodeType);this.x=a;this.node=new D._Fast.NodeAccess(a);this.nodes=new D._Fast.NodeListAccess(a);this.att=new D._Fast.AttribAccess(a);this.has=new D._Fast.HasAttribAccess(a);this.hasNode=new D._Fast.HasNodeAccess(a)};j["haxe.xml.Fast"]=D.Fast;D.Fast.__name__=["haxe","xml","Fast"];D.Fast.prototype={getElements:function(){var a=this.x.elements();return{hasNext:w(a,a.hasNext),next:function(){var b=
a.next();return null==b?null:new D.Fast(b)}}},getInnerHTML:function(){for(var a=new Z,b=this.x.iterator();b.hasNext();){var c=b.next();a.b+=r.string(c.toString())}return a.b},getInnerData:function(){var a=this.x.iterator();if(!a.hasNext())throw this.getName()+" does not have data";var b=a.next(),c=a.next();if(null!=c){if(b.nodeType==u.PCData&&c.nodeType==u.CData&&""==S.trim(b.getNodeValue())&&(b=a.next(),null==b||b.nodeType==u.PCData&&""==S.trim(b.getNodeValue())&&null==a.next()))return c.getNodeValue();
throw this.getName()+" does not only have data";}if(b.nodeType!=u.PCData&&b.nodeType!=u.CData)throw this.getName()+" does not have data";return b.getNodeValue()},getName:function(){return this.x.nodeType==u.Document?"Document":this.x.getNodeName()},__class__:D.Fast,__properties__:{get_name:"getName",get_innerData:"getInnerData"}};D.Parser=function(){};j["haxe.xml.Parser"]=D.Parser;D.Parser.__name__=["haxe","xml","Parser"];D.Parser.parse=function(a){var b=u.createDocument();D.Parser.doParse(a,0,b);
return b};D.Parser.doParse=function(a,b,c){null==b&&(b=0);for(var d=null,e=1,f=1,h=null,i=0,j=0,l=0,k=a.charCodeAt(b);k==k;){switch(e){case 0:switch(k){case 10:case 13:case 9:case 32:break;default:e=f;continue}break;case 1:switch(k){case 60:e=0;f=2;break;default:i=b;e=13;continue}break;case 13:60==k&&(e=u.createPCData(A.substr(a,i,b-i)),c.addChild(e),j++,e=0,f=2);break;case 17:93==k&&93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(e=u.createCData(A.substr(a,i,b-i)),c.addChild(e),j++,b+=2,e=1);break;
case 2:switch(k){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=A.substr(a,b,6).toUpperCase())throw"Expected <![CDATA[";b+=5;e=17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=A.substr(a,b+2,6).toUpperCase())throw"Expected <!DOCTYPE";b+=8;e=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw"Expected <\!--";b+=2;e=15}i=b+1;break;case 63:e=14;i=b;break;case 47:if(null==c)throw"Expected node name";i=b+1;e=0;f=10;break;default:e=3;i=b;continue}break;case 3:if(!(97<=
k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||58==k||46==k||95==k||45==k)){if(b==i)throw"Expected node name";d=u.createElement(A.substr(a,i,b-i));c.addChild(d);e=0;f=4;continue}break;case 4:switch(k){case 47:e=11;j++;break;case 62:e=9;j++;break;default:e=5;i=b;continue}break;case 5:if(!(97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||58==k||46==k||95==k||45==k)){if(i==b)throw"Expected attribute name";h=A.substr(a,i,b-i);if(d.exists(h))throw"Duplicate attribute";e=0;f=6;continue}break;case 6:switch(k){case 61:e=
0;f=7;break;default:throw"Expected =";}break;case 7:switch(k){case 34:case 39:e=8;i=b;break;default:throw'Expected "';}break;case 8:k==a.charCodeAt(i)&&(f=A.substr(a,i+1,b-i-1),d.set(h,f),e=0,f=4);break;case 9:i=b=D.Parser.doParse(a,b,d);e=1;break;case 11:switch(k){case 62:e=1;break;default:throw"Expected >";}break;case 12:switch(k){case 62:return 0==j&&c.addChild(u.createPCData("")),b;default:throw"Expected >";}case 10:if(!(97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||58==k||46==k||95==k||45==k)){if(i==
b)throw"Expected node name";if(A.substr(a,i,b-i)!=c.getNodeName())throw"Expected </"+c.getNodeName()+">";e=0;f=12;continue}break;case 15:45==k&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(c.addChild(u.createComment(A.substr(a,i,b-i))),b+=2,e=1);break;case 16:91==k?l++:93==k?l--:62==k&&0==l&&(c.addChild(u.createDocType(A.substr(a,i,b-i))),e=1);break;case 14:63==k&&62==a.charCodeAt(b+1)&&(b++,e=A.substr(a,i+1,b-i-2),c.addChild(u.createProlog(e)),e=1)}k=a.charCodeAt(++b)}1==e&&(i=b,e=13);if(13==e)return(b!=
i||0==j)&&c.addChild(u.createPCData(A.substr(a,i,b-i))),b;throw"Unexpected end";};Array.prototype.indexOf?A.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0}:null;Math.__name__=["Math"];Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;j.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=j.String=String;String.__name__=["String"];
Array.prototype.__class__=j.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=j.Date=Date;Date.__name__=["Date"];var ia=j.Int={__name__:["Int"]},ja=j.Dynamic={__name__:["Dynamic"]},ga=j.Float=Number;ga.__name__=["Float"];var ha=j.Bool=Boolean;ha.__ename__=["Bool"];var ka=j.Class={__name__:["Class"]},la={};u.Element="element";u.PCData="pcdata";u.CData="cdata";u.Comment="comment";u.DocType="doctype";u.Prolog="prolog";u.Document="document";"undefined"!=typeof document&&(x.document=document);
"undefined"!=typeof window&&(x.window=window,x.window.onerror=function(a,b,c){var d=x.onerror;return null==d?!1:d(a,[b+":"+c])});"undefined"!=typeof JSON&&(Y=JSON);i.ConstantsApp.STAGE_WIDTH=960;i.ConstantsApp.STAGE_HEIGHT=560;i.ConstantsApp.STAGE_CENTER_X=480;i.ConstantsApp.STAGE_CENTER_Y=280;i.ConstantsApp.PICKUP_TYPE_COTTON_CANDY=0;i.ConstantsApp.PICKUP_TYPE_BALLOON=1;i.ConstantsApp.LAYER_BG="layer_bg";i.ConstantsApp.LAYER_PLAYER="layer_player";i.ConstantsApp.LAYER_FG="layer_fg";i.ConstantsApp.EVENT_PAUSE=
"eventPause";i.ConstantsApp.EVENT_UNPAUSE="eventUnpause";i.ConstantsApp.EVENT_MUTE_TOGGLE="EVENT_MUTE_TOGGLE";i.ConstantsApp.EVENT_WORLD_GENERATION_COMPLETE="EVENT_WORLD_GENERATION_COMPLETE";i.ConstantsApp.EVENT_INPUT_FIELD_ENTER="EVENT_INPUT_FIELD_ENTER";i.ConstantsApp.BOOL_GAME_LOSE="bool_game_lose";i.ConstantsApp.BOOL_GAME_WIN="bool_game_win";i.ConstantsApp.BOOL_LEVEL_LOSE="bool_level_lose";i.ConstantsApp.BOOL_LEVEL_WIN="bool_level_win";i.ConstantsApp.BOOL_GAMEOVER="bool_gameover";i.ConstantsApp.BOOL_PAUSED=
"bool_paused";i.ConstantsApp.BOOL_INPUT_LOCK="bool_inputlock";i.ConstantsApp.BOOL_TOUCH_DEVICE="bool_touch_device";i.ConstantsApp.BOOL_ORIENTATION_ALERT="bool_orientation_alert";i.ConstantsApp.BOOL_LOCAL_TEXT_LOADED="bool_local_text_loaded";i.ConstantsApp.INT_HEALTH="int_health";i.ConstantsApp.INT_LIVES="int_lives";i.ConstantsApp.INT_SCORE="int_score";i.ConstantsApp.INT_LOADING_PROGRESS="int_loading_progress";i.ConstantsApp.INPUT_CLICK="input_click";i.ConstantsApp.INPUT_SPACE="input_space";i.ConstantsApp.INPUT_Z=
"input_z";i.ConstantsApp.INPUT_X="input_x";i.ConstantsApp.INPUT_C="input_c";i.ConstantsApp.INPUT_P="input_p";i.ConstantsApp.INPUT_UP="input_up";i.ConstantsApp.INPUT_DOWN="input_down";i.ConstantsApp.INPUT_LEFT="input_left";i.ConstantsApp.INPUT_RIGHT="input_right";i.ConstantsApp.FLOAT_GAME_SPEED_X="float_game_speed";i.ConstantsApp.CONFIG_XML_PATH="config/config.xml";i.ConstantsApp.OPTION_SILENCE_AUDIO=!1;i.ConstantsApp.OPTION_SHOW_LOADING_ON_PLAY_AGAIN=!0;i.ConstantsApp.LOAD_FONT_EARLY=!1;i.ConstantsApp.scaleFactor=
1;i.ConstantsScreen.SCREEN_LOADING="loadpanel";i.ConstantsScreen.SCREEN_LOADING_OVERLAY="loadoverlay";i.ConstantsScreen.SCREEN_SPLASH="splash";i.ConstantsScreen.SCREEN_HELP="help";i.ConstantsScreen.SCREEN_GAMEPLAY_HUD="gameplayhud";i.ConstantsScreen.SCREEN_GAMEPLAY_MENU="gameplaymenu";i.ConstantsScreen.SCREEN_QUIT_CONFIRM="quitconfirm";i.ConstantsScreen.SCREEN_END_GAME="endgame";i.ConstantsScreen.SCREEN_CUTSCENE_BORDERS="cutsceneborders";i.ConstantsScreen.SCREEN_PAUSE_ALERT="pause";i.ConstantsScreen.TRANSITION_FADE=
0;i.ConstantsScreen.TRANSITION_SCROLL=1;i.ConstantsScreen.TRANSITION_SCROLL_DOWN=2;i.ConstantsScreen.TRANSITION_SCROLL_UP=3;i.ConstantsScreen.TRANSITION_STAGED=4;i.ConstantsScreen.TRANSITION_SCREENSHOT=5;i.ConstantsScreen.CHANGE_OPEN_BEGIN=0;i.ConstantsScreen.CHANGE_OPEN_COMPLETE=1;i.ConstantsScreen.CHANGE_CLOSE_BEGIN=2;i.ConstantsScreen.CHANGE_CLOSE_COMPLETE=3;i.ConstantsScreen.OUTPUT_OPENED=0;i.ConstantsScreen.OUTPUT_CLOSED=1;i.ConstantsScreen.CONDITION_CLOSED_ALL=0;i.ConstantsScreen.CONDITION_CLOSED_SPECIFIC=
1;i.ConstantsScreen.CONDITION_TRANSITION_MIDWAY=2;i.ConstantsScreen.CONDITION_TRANSITION_COMPLETE=3;i.ConstantsScreen.CONDITION_IMMEDIATE=4;i.ConstantsScreen.FLOW_SPLASH_PLAY="FLOW_SPLASH_PLAY";i.ConstantsScreen.FLOW_HELP_CLOSE="FLOW_HELP_CLOSE";i.ConstantsScreen.FLOW_GAMEPLAY_MENU="FLOW_GAMEPLAY_MENU";i.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE="FLOW_GAMEPLAY_MENU_CLOSE";i.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP="FLOW_GAMEPLAY_MENU_HELP";i.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT="FLOW_GAMEPLAY_MENU_QUIT";
i.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES="FLOW_GAMEPLAY_QUIT_YES";i.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO="FLOW_GAMEPLAY_QUIT_NO";i.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN="FLOW_END_GAME_PLAY_AGAIN";i.ConstantsScreen.FLOW_BRANCH_GAME_WIN="FLOW_BRANCH_GAME_WIN";i.ConstantsScreen.FLOW_BRANCH_GAME_LOSE="FLOW_BRANCH_GAME_LOSE";i.ConstantsScreen.FLOW_BRANCH_LEVEL_WIN="FLOW_BRANCH_LEVEL_WIN";i.ConstantsScreen.FLOW_BRANCH_LEVEL_LOSE="FLOW_BRANCH_LEVEL_LOSE";l.buttons.ButtonBase.UP="workinBtnUp";l.buttons.ButtonBase.DOWN=
"workinBtnDown";l.buttons.ButtonBase.CLICK="workinBtnClick";l.buttons.ButtonBase.CANCEL_DRAG="workinBtnCancelDrag";k.Display.EVENT_UPDATE_DISPLAY="event_update_display";l.screens.data.ScreenStateData.ACTION_STOP=0;l.screens.data.ScreenStateData.ACTION_OPENED=1;l.screens.data.ScreenStateData.ACTION_EVENT=2;l.screens.data.ScreenStateData.ACTION_NEW_STATE=3;l.screens.data.ScreenStateData.ACTION_CLOSED=4;l.screens.data.ScreenStateData.ACTION_FLOW=5;s.World._minSpeed=280;s.World._maxSpeed=600;s.elements.effects.PopupBase.BEHAVIOR_POPUP=
1;s.elements.effects.PopupBase.BEHAVIOR_FLOAT=2;s.elements.fist.FistBase._PREP_HOVER_Y=40;s.elements.fist.FistBase._AIM_SIN_RATE=4;s.elements.fist.FistBase._GRAVITY=6E3;C.ConstantsCloud.FONT_DEFAULT="Basic";C.ConstantsCloud.STRING_REGION_ID="cloudregionid";C.ConstantsCloud.LOCALIZATION_XML_PATH="config/";C.ConstantsCloud.EVENT_FILES_LOADED="EVENT_WORKINCLOUD_FILES_LOADED";C.ConstantsCloud.EVENT_FILES_LOADING="EVENT_FILES_LOADING";C.ConstantsCloud.EVENT_FILES_ERROR="EVENT_FILES_ERROR";C.ConstantsCloud.EVENT_TWEENS_COMPLETE=
"EVENT_TWEENS_COMPLETE";C.ConstantsCloud.EVENT_INPUT_ARBITRARY_KEY="EVENT_INPUT_ARBITRARY_KEY";C.ConstantsCloud._uniqueId=0;k.PoolManager.ALL_POOLS_FULL="PoolManager_ALL_POOLS_FULL";n.WMEventFlow.EVENT_FLOW="Nflow";n.WMEventInput.EVENT_INPUT="eventinput";n.WMEventInput.PHASE_DOWN=1;n.WMEventInput.PHASE_UP=0;n.WMEventInput.PHASE_MOVE=2;n.WMEventInterfaceChange.EVENT_INTERFACE_OUTPUT="Neio";n.WMEventScreenOut.EVENT_SCREEN_OUTPUT="Neso";n.WMEventUpdate.EVENT_UPDATE="eventupdate";h.tween.PennerManager.EASE_LINEAR=
"linear";h.tween.PennerManager.EASE="ease";h.tween.PennerManager.EASE_QUAD="quad";h.tween.PennerManager.EASE_IN="easeIn";h.tween.PennerManager.EASE_QUAD_IN="quadIn";h.tween.PennerManager.EASE_OUT="easeOut";h.tween.PennerManager.EASE_QUAD_OUT="quadOut";h.tween.PennerManager.EASE_EXPO="expo";h.tween.PennerManager.EASE_EXPO_IN="expoIn";h.tween.PennerManager.EASE_EXPO_OUT="expoOut";h.tween.PennerManager.EASE_ELASTIC="elastic";h.tween.PennerManager.EASE_ELASTIC_IN="elasticIn";h.tween.PennerManager.EASE_ELASTIC_OUT=
"elasticOut";h.tween.PennerManager.EASE_BUMP="bump";h.tween.PennerManager.EASE_BUMP_IN="bumpIn";h.tween.PennerManager.EASE_BUMP_OUT="bumpOut";h.tween.PennerManager.EASE_BOUNCE="bounce";h.tween.PennerManager.EASE_BOUNCE_IN="bounceIn";h.tween.PennerManager.EASE_BOUNCE_OUT="bounceOut";h.tween.PennerManager.EASE_CUBIC="cubic";h.tween.PennerManager.EASE_CUBIC_IN="cubicIn";h.tween.PennerManager.EASE_CUBIC_OUT="cubicOut";h.tween.PennerManager.EASE_SPACE="space";h.tween.PennerManager.EASE_SPACE_IN="spaceIn";
h.tween.PennerManager.EASE_SPACE_OUT="spaceOut";h.tween.PennerManager.EASE_BLAST="blast";h.tween.PennerManager.EASE_BLAST_IN="blastIn";h.tween.PennerManager.EASE_BLAST_OUT="blastOut";h.tween.PennerManager.EASE_WAVE="wave";h.tween.PennerManager.EASE_WAVE_IN="waveIn";h.tween.PennerManager.EASE_WAVE_OUT="waveOut";h.tween.PennerManager.EASE_CIRCLE="circle";h.tween.PennerManager.EASE_CIRCLE_IN="circleIn";h.tween.PennerManager.EASE_CIRCLE_OUT="circleOut";h.tween.WorkinTween.EVENT_TWEEN_CURRENT_COMPLETE=
"wtETCC";h.tween.WorkinTween.EVENT_TWEENS_ALL_COMPLETE="wtETAC";p.ServiceAnalytics._offlineUserId="";p.ServiceAnalytics._offlineTrackingId="";p.ServiceAnalytics._appId="";p.ServiceAnalytics._sessionId="";p.ServiceAnalytics._canadaShowGameTitle="";p.ServiceAnalytics._flagInitted=!1;p.ServiceAnalytics._flagStarted=!1;p.ServiceAnalytics._flagLoaded=!1;p.ServiceAnalytics._flagCanadaTrackingEnabled=!1;p.ServiceAnalytics._DEFAULT_SHARED_OBJECT_ID="nkcimocuresid";p.ServiceAnalytics.OPTION_ENABLE_TRACKING=
!0;f.WMPointer._DELTA_ALLOWANCE=30;f.WMPointer._DELTA_TIMEOUT=0.2;f.WMSound.FADE_NONE=0;f.WMSound.FADE_IN=1;f.WMSound.FADE_OUT=-1;f.WorkinCloud.instance=new f.WorkinCloud;e.html.HtmlPlatform.instance=new e.html.HtmlPlatform;m.SignalBase.DISPATCHING_SENTINEL=new m.SignalConnection(null,null);z.root=new O;z.uncaughtError=new m.Signal1;z.hidden=new m.Value(!1);z.hasGPU=new m.Value(!1);z.volume=new F.AnimatedFloat(1);z._platform=e.html.HtmlPlatform.instance;z._calledInit=!1;K.logger=new m.Logger(z._platform.createLogHandler("flambe"));
B.Manifest._buildManifest=B.Manifest.createBuildManifests();P=B.Manifest;y=(new X("\\b(Android)\\b","")).match(x.window.navigator.userAgent)?!1:null!=(new XMLHttpRequest).withCredentials;P._supportsCrossOrigin=y;o.Sprite._scratchPoint=new J.Point;e.BasicKeyboard._sharedEvent=new d.KeyboardEvent;e.BasicMouse._sharedEvent=new d.MouseEvent;e.BasicPointer._sharedEvent=new d.PointerEvent;e.html.CanvasRenderer.CANVAS_TEXTURES=(new X("(iPhone|iPod|iPad)","")).match(x.window.navigator.userAgent);e.html.HtmlAssetPackLoader._mediaRefCount=
0;e.html.HtmlAssetPackLoader._detectBlobSupport=!0;e.html.HtmlUtil.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];e.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER=x.window.top==x.window&&(new X("Mobile(/.*)? Safari","")).match(x.window.navigator.userAgent);e.html.WebAudioSound._detectSupport=!0;U.USE_CACHE=!1;U.USE_ENUM_INDEX=!1;U.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";Q.DEFAULT_RESOLVER=N;Q.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
I.main()})();
