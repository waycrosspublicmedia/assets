//  Merci-Michel [R]
//  https://www.merci-michel.com/
//  Build 20240429-165907

function e(e,t){const n=Object.create(null),i=e.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}const t=e("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function n(e){return!!e||""===e}function i(e){if(E(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=R(r)?o(r):i(r);if(s)for(const e in s)t[e]=s[e]}return t}return R(e)||N(e)?e:void 0}const r=/;(?![^(]*\))/g,s=/:(.+)/;function o(e){const t={};return e.split(r).forEach((e=>{if(e){const n=e.split(s);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function a(e){let t="";if(R(e))t=e;else if(E(e))for(let n=0;n<e.length;n++){const i=a(e[n]);i&&(t+=i+" ")}else if(N(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function l(e,t){if(e===t)return!0;let n=I(e),i=I(t);if(n||i)return!(!n||!i)&&e.getTime()===t.getTime();if(n=E(e),i=E(t),n||i)return!(!n||!i)&&function(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=l(e[i],t[i]);return n}(e,t);if(n=N(e),i=N(t),n||i){if(!n||!i)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){const i=e.hasOwnProperty(n),r=t.hasOwnProperty(n);if(i&&!r||!i&&r||!l(e[n],t[n]))return!1}}return String(e)===String(t)}function c(e,t){return e.findIndex((e=>l(e,t)))}const u=e=>null==e?"":E(e)||N(e)&&(e.toString===A||!k(e.toString))?JSON.stringify(e,h,2):String(e),h=(e,t)=>t&&t.__v_isRef?h(e,t.value):T(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:S(t)?{[`Set(${t.size})`]:[...t.values()]}:!N(t)||E(t)||D(t)?t:String(t),d={},p=[],f=()=>{},_=()=>!1,g=/^on[^a-z]/,m=e=>g.test(e),y=e=>e.startsWith("onUpdate:"),v=Object.assign,C=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},b=Object.prototype.hasOwnProperty,w=(e,t)=>b.call(e,t),E=Array.isArray,T=e=>"[object Map]"===O(e),S=e=>"[object Set]"===O(e),I=e=>e instanceof Date,k=e=>"function"==typeof e,R=e=>"string"==typeof e,x=e=>"symbol"==typeof e,N=e=>null!==e&&"object"==typeof e,P=e=>N(e)&&k(e.then)&&k(e.catch),A=Object.prototype.toString,O=e=>A.call(e),D=e=>"[object Object]"===O(e),M=e=>R(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,F=e(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),L=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},q=/-(\w)/g,j=L((e=>e.replace(q,((e,t)=>t?t.toUpperCase():"")))),U=/\B([A-Z])/g,W=L((e=>e.replace(U,"-$1").toLowerCase())),B=L((e=>e.charAt(0).toUpperCase()+e.slice(1))),V=L((e=>e?`on${B(e)}`:"")),$=(e,t)=>!Object.is(e,t),H=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},z=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Y=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let G;let K;const Q=[];class X{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&K&&(this.parent=K,this.index=(K.scopes||(K.scopes=[])).push(this)-1)}run(e){if(this.active)try{return this.on(),e()}finally{this.off()}}on(){this.active&&(Q.push(this),K=this)}off(){this.active&&(Q.pop(),K=Q[Q.length-1])}stop(e){if(this.active){if(this.effects.forEach((e=>e.stop())),this.cleanups.forEach((e=>e())),this.scopes&&this.scopes.forEach((e=>e.stop(!0))),this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}const J=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Z=e=>(e.w&ie)>0,ee=e=>(e.n&ie)>0,te=new WeakMap;let ne=0,ie=1;const re=[];let se;const oe=Symbol(""),ae=Symbol("");class le{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],function(e,t){(t=t||K)&&t.active&&t.effects.push(e)}(this,n)}run(){if(!this.active)return this.fn();if(!re.includes(this))try{return re.push(se=this),he.push(ue),ue=!0,ie=1<<++ne,ne<=30?(({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=ie})(this):ce(this),this.fn()}finally{ne<=30&&(e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const r=t[i];Z(r)&&!ee(r)?r.delete(e):t[n++]=r,r.w&=~ie,r.n&=~ie}t.length=n}})(this),ie=1<<--ne,pe(),re.pop();const e=re.length;se=e>0?re[e-1]:void 0}}stop(){this.active&&(ce(this),this.onStop&&this.onStop(),this.active=!1)}}function ce(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let ue=!0;const he=[];function de(){he.push(ue),ue=!1}function pe(){const e=he.pop();ue=void 0===e||e}function fe(e,t,n){if(!_e())return;let i=te.get(e);i||te.set(e,i=new Map);let r=i.get(n);r||i.set(n,r=J()),ge(r)}function _e(){return ue&&void 0!==se}function ge(e,t){let n=!1;ne<=30?ee(e)||(e.n|=ie,n=!Z(e)):n=!e.has(se),n&&(e.add(se),se.deps.push(e))}function me(e,t,n,i,r,s){const o=te.get(e);if(!o)return;let a=[];if("clear"===t)a=[...o.values()];else if("length"===n&&E(e))o.forEach(((e,t)=>{("length"===t||t>=i)&&a.push(e)}));else switch(void 0!==n&&a.push(o.get(n)),t){case"add":E(e)?M(n)&&a.push(o.get("length")):(a.push(o.get(oe)),T(e)&&a.push(o.get(ae)));break;case"delete":E(e)||(a.push(o.get(oe)),T(e)&&a.push(o.get(ae)));break;case"set":T(e)&&a.push(o.get(oe))}if(1===a.length)a[0]&&ye(a[0]);else{const e=[];for(const t of a)t&&e.push(...t);ye(J(e))}}function ye(e,t){for(const n of E(e)?e:[...e])(n!==se||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const ve=e("__proto__,__v_isRef,__isVue"),Ce=new Set(Object.getOwnPropertyNames(Symbol).map((e=>Symbol[e])).filter(x)),be=Ie(),we=Ie(!1,!0),Ee=Ie(!0),Te=Se();function Se(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=ct(this);for(let t=0,r=this.length;t<r;t++)fe(n,0,t+"");const i=n[t](...e);return-1===i||!1===i?n[t](...e.map(ct)):i}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){de();const n=ct(this)[t].apply(this,e);return pe(),n}})),e}function Ie(e=!1,t=!1){return function(n,i,r){if("__v_isReactive"===i)return!e;if("__v_isReadonly"===i)return e;if("__v_raw"===i&&r===(e?t?tt:et:t?Ze:Je).get(n))return n;const s=E(n);if(!e&&s&&w(Te,i))return Reflect.get(Te,i,r);const o=Reflect.get(n,i,r);if(x(i)?Ce.has(i):ve(i))return o;if(e||fe(n,0,i),t)return o;if(_t(o)){return!s||!M(i)?o.value:o}return N(o)?e?rt(o):it(o):o}}function ke(e=!1){return function(t,n,i,r){let s=t[n];if(!e&&(i=ct(i),s=ct(s),!E(t)&&_t(s)&&!_t(i)))return s.value=i,!0;const o=E(t)&&M(n)?Number(n)<t.length:w(t,n),a=Reflect.set(t,n,i,r);return t===ct(r)&&(o?$(i,s)&&me(t,"set",n,i):me(t,"add",n,i)),a}}const Re={get:be,set:ke(),deleteProperty:function(e,t){const n=w(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&me(e,"delete",t,void 0),i},has:function(e,t){const n=Reflect.has(e,t);return x(t)&&Ce.has(t)||fe(e,0,t),n},ownKeys:function(e){return fe(e,0,E(e)?"length":oe),Reflect.ownKeys(e)}},xe={get:Ee,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},Ne=v({},Re,{get:we,set:ke(!0)}),Pe=e=>e,Ae=e=>Reflect.getPrototypeOf(e);function Oe(e,t,n=!1,i=!1){const r=ct(e=e.__v_raw),s=ct(t);t!==s&&!n&&fe(r,0,t),!n&&fe(r,0,s);const{has:o}=Ae(r),a=i?Pe:n?dt:ht;return o.call(r,t)?a(e.get(t)):o.call(r,s)?a(e.get(s)):void(e!==r&&e.get(t))}function De(e,t=!1){const n=this.__v_raw,i=ct(n),r=ct(e);return e!==r&&!t&&fe(i,0,e),!t&&fe(i,0,r),e===r?n.has(e):n.has(e)||n.has(r)}function Me(e,t=!1){return e=e.__v_raw,!t&&fe(ct(e),0,oe),Reflect.get(e,"size",e)}function Fe(e){e=ct(e);const t=ct(this);return Ae(t).has.call(t,e)||(t.add(e),me(t,"add",e,e)),this}function Le(e,t){t=ct(t);const n=ct(this),{has:i,get:r}=Ae(n);let s=i.call(n,e);s||(e=ct(e),s=i.call(n,e));const o=r.call(n,e);return n.set(e,t),s?$(t,o)&&me(n,"set",e,t):me(n,"add",e,t),this}function qe(e){const t=ct(this),{has:n,get:i}=Ae(t);let r=n.call(t,e);r||(e=ct(e),r=n.call(t,e)),i&&i.call(t,e);const s=t.delete(e);return r&&me(t,"delete",e,void 0),s}function je(){const e=ct(this),t=0!==e.size,n=e.clear();return t&&me(e,"clear",void 0,void 0),n}function Ue(e,t){return function(n,i){const r=this,s=r.__v_raw,o=ct(s),a=t?Pe:e?dt:ht;return!e&&fe(o,0,oe),s.forEach(((e,t)=>n.call(i,a(e),a(t),r)))}}function We(e,t,n){return function(...i){const r=this.__v_raw,s=ct(r),o=T(s),a="entries"===e||e===Symbol.iterator&&o,l="keys"===e&&o,c=r[e](...i),u=n?Pe:t?dt:ht;return!t&&fe(s,0,l?ae:oe),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:a?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}function Be(e){return function(...t){return"delete"!==e&&this}}function Ve(){const e={get(e){return Oe(this,e)},get size(){return Me(this)},has:De,add:Fe,set:Le,delete:qe,clear:je,forEach:Ue(!1,!1)},t={get(e){return Oe(this,e,!1,!0)},get size(){return Me(this)},has:De,add:Fe,set:Le,delete:qe,clear:je,forEach:Ue(!1,!0)},n={get(e){return Oe(this,e,!0)},get size(){return Me(this,!0)},has(e){return De.call(this,e,!0)},add:Be("add"),set:Be("set"),delete:Be("delete"),clear:Be("clear"),forEach:Ue(!0,!1)},i={get(e){return Oe(this,e,!0,!0)},get size(){return Me(this,!0)},has(e){return De.call(this,e,!0)},add:Be("add"),set:Be("set"),delete:Be("delete"),clear:Be("clear"),forEach:Ue(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((r=>{e[r]=We(r,!1,!1),n[r]=We(r,!0,!1),t[r]=We(r,!1,!0),i[r]=We(r,!0,!0)})),[e,n,t,i]}const[$e,He,ze,Ye]=Ve();function Ge(e,t){const n=t?e?Ye:ze:e?He:$e;return(t,i,r)=>"__v_isReactive"===i?!e:"__v_isReadonly"===i?e:"__v_raw"===i?t:Reflect.get(w(n,i)&&i in t?n:t,i,r)}const Ke={get:Ge(!1,!1)},Qe={get:Ge(!1,!0)},Xe={get:Ge(!0,!1)},Je=new WeakMap,Ze=new WeakMap,et=new WeakMap,tt=new WeakMap;function nt(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>O(e).slice(8,-1))(e))}function it(e){return e&&e.__v_isReadonly?e:st(e,!1,Re,Ke,Je)}function rt(e){return st(e,!0,xe,Xe,et)}function st(e,t,n,i,r){if(!N(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const s=r.get(e);if(s)return s;const o=nt(e);if(0===o)return e;const a=new Proxy(e,2===o?i:n);return r.set(e,a),a}function ot(e){return at(e)?ot(e.__v_raw):!(!e||!e.__v_isReactive)}function at(e){return!(!e||!e.__v_isReadonly)}function lt(e){return ot(e)||at(e)}function ct(e){const t=e&&e.__v_raw;return t?ct(t):e}function ut(e){return z(e,"__v_skip",!0),e}const ht=e=>N(e)?it(e):e,dt=e=>N(e)?rt(e):e;function pt(e){_e()&&((e=ct(e)).dep||(e.dep=J()),ge(e.dep))}function ft(e,t){(e=ct(e)).dep&&ye(e.dep)}function _t(e){return Boolean(e&&!0===e.__v_isRef)}function gt(e){return mt(e,!1)}function mt(e,t){return _t(e)?e:new yt(e,t)}class yt{constructor(e,t){this._shallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:ct(e),this._value=t?e:ht(e)}get value(){return pt(this),this._value}set value(e){e=this._shallow?e:ct(e),$(e,this._rawValue)&&(this._rawValue=e,this._value=this._shallow?e:ht(e),ft(this))}}function vt(e){return _t(e)?e.value:e}const Ct={get:(e,t,n)=>vt(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return _t(r)&&!_t(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function bt(e){return ot(e)?e:new Proxy(e,Ct)}class wt{constructor(e,t,n){this._setter=t,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new le(e,(()=>{this._dirty||(this._dirty=!0,ft(this))})),this.__v_isReadonly=n}get value(){const e=ct(this);return pt(e),e._dirty&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Et(e,t){let n,i;const r=k(e);r?(n=e,i=f):(n=e.get,i=e.set);return new wt(n,i,r||!i)}function Tt(e,t,...n){const i=e.vnode.props||d;let r=n;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in i){const e=`${"modelValue"===o?"model":o}Modifiers`,{number:t,trim:s}=i[e]||d;s?r=n.map((e=>e.trim())):t&&(r=n.map(Y))}let a,l=i[a=V(t)]||i[a=V(j(t))];!l&&s&&(l=i[a=V(W(t))]),l&&Vi(l,e,6,r);const c=i[a+"Once"];if(c){if(e.emitted){if(e.emitted[a])return}else e.emitted={};e.emitted[a]=!0,Vi(c,e,6,r)}}function St(e,t,n=!1){const i=t.emitsCache,r=i.get(e);if(void 0!==r)return r;const s=e.emits;let o={},a=!1;if(!k(e)){const i=e=>{const n=St(e,t,!0);n&&(a=!0,v(o,n))};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return s||a?(E(s)?s.forEach((e=>o[e]=null)):v(o,s),i.set(e,o),o):(i.set(e,null),null)}function It(e,t){return!(!e||!m(t))&&(t=t.slice(2).replace(/Once$/,""),w(e,t[0].toLowerCase()+t.slice(1))||w(e,W(t))||w(e,t))}Promise.resolve();let kt=null,Rt=null;function xt(e){const t=kt;return kt=e,Rt=e&&e.type.__scopeId||null,t}function Nt(e){Rt=e}function Pt(){Rt=null}function At(e,t=kt,n){if(!t)return e;if(e._n)return e;const i=(...n)=>{i._d&&oi(-1);const r=xt(t),s=e(...n);return xt(r),i._d&&oi(1),s};return i._n=!0,i._c=!0,i._d=!0,i}function Ot(e){const{type:t,vnode:n,proxy:i,withProxy:r,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:p,ctx:f,inheritAttrs:_}=e;let g,m;const v=xt(e);try{if(4&n.shapeFlag){const e=r||i;g=bi(u.call(e,e,h,s,p,d,f)),m=l}else{const e=t;0,g=bi(e.length>1?e(s,{attrs:l,slots:a,emit:c}):e(s,null)),m=t.props?l:Dt(l)}}catch(b){ni.length=0,$i(b,e,1),g=gi(ei)}let C=g;if(m&&!1!==_){const e=Object.keys(m),{shapeFlag:t}=C;e.length&&7&t&&(o&&e.some(y)&&(m=Mt(m,o)),C=mi(C,m))}return n.dirs&&(C.dirs=C.dirs?C.dirs.concat(n.dirs):n.dirs),n.transition&&(C.transition=n.transition),g=C,xt(v),g}const Dt=e=>{let t;for(const n in e)("class"===n||"style"===n||m(n))&&((t||(t={}))[n]=e[n]);return t},Mt=(e,t)=>{const n={};for(const i in e)y(i)&&i.slice(9)in t||(n[i]=e[i]);return n};function Ft(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==e[s]&&!It(n,s))return!0}return!1}function Lt(e,t){if(Oi){let n=Oi.provides;const i=Oi.parent&&Oi.parent.provides;i===n&&(n=Oi.provides=Object.create(i)),n[e]=t}else;}function qt(e,t,n=!1){const i=Oi||kt;if(i){const r=null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&k(t)?t.call(i.proxy):t}}const jt=[Function,Array],Ut={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:jt,onEnter:jt,onAfterEnter:jt,onEnterCancelled:jt,onBeforeLeave:jt,onLeave:jt,onAfterLeave:jt,onLeaveCancelled:jt,onBeforeAppear:jt,onAppear:jt,onAfterAppear:jt,onAppearCancelled:jt},setup(e,{slots:t}){const n=Di(),i=function(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return rn((()=>{e.isMounted=!0})),an((()=>{e.isUnmounting=!0})),e}();let r;return()=>{const s=t.default&&zt(t.default(),!0);if(!s||!s.length)return;const o=ct(e),{mode:a}=o,l=s[0];if(i.isLeaving)return Vt(l);const c=$t(l);if(!c)return Vt(l);const u=Bt(c,o,i,n);Ht(c,u);const h=n.subTree,d=h&&$t(h);let p=!1;const{getTransitionKey:f}=c.type;if(f){const e=f();void 0===r?r=e:e!==r&&(r=e,p=!0)}if(d&&d.type!==ei&&(!hi(c,d)||p)){const e=Bt(d,o,i,n);if(Ht(d,e),"out-in"===a)return i.isLeaving=!0,e.afterLeave=()=>{i.isLeaving=!1,n.update()},Vt(l);"in-out"===a&&c.type!==ei&&(e.delayLeave=(e,t,n)=>{Wt(i,d)[String(d.key)]=d,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=n})}return l}}};function Wt(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function Bt(e,t,n,i){const{appear:r,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:p,onLeaveCancelled:f,onBeforeAppear:_,onAppear:g,onAfterAppear:m,onAppearCancelled:y}=t,v=String(e.key),C=Wt(n,e),b=(e,t)=>{e&&Vi(e,i,9,t)},w={mode:s,persisted:o,beforeEnter(t){let i=a;if(!n.isMounted){if(!r)return;i=_||a}t._leaveCb&&t._leaveCb(!0);const s=C[v];s&&hi(e,s)&&s.el._leaveCb&&s.el._leaveCb(),b(i,[t])},enter(e){let t=l,i=c,s=u;if(!n.isMounted){if(!r)return;t=g||l,i=m||c,s=y||u}let o=!1;const a=e._enterCb=t=>{o||(o=!0,b(t?s:i,[e]),w.delayedLeave&&w.delayedLeave(),e._enterCb=void 0)};t?(t(e,a),t.length<=1&&a()):a()},leave(t,i){const r=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return i();b(h,[t]);let s=!1;const o=t._leaveCb=n=>{s||(s=!0,i(),b(n?f:p,[t]),t._leaveCb=void 0,C[r]===e&&delete C[r])};C[r]=e,d?(d(t,o),d.length<=1&&o()):o()},clone:e=>Bt(e,t,n,i)};return w}function Vt(e){if(Kt(e))return(e=mi(e)).children=null,e}function $t(e){return Kt(e)?e.children?e.children[0]:void 0:e}function Ht(e,t){6&e.shapeFlag&&e.component?Ht(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function zt(e,t=!1){let n=[],i=0;for(let r=0;r<e.length;r++){const s=e[r];s.type===Jn?(128&s.patchFlag&&i++,n=n.concat(zt(s.children,t))):(t||s.type!==ei)&&n.push(s)}if(i>1)for(let r=0;r<n.length;r++)n[r].patchFlag=-2;return n}function Yt(e){return k(e)?{setup:e,name:e.name}:e}const Gt=e=>!!e.type.__asyncLoader,Kt=e=>e.type.__isKeepAlive;function Qt(e,t){Jt(e,"a",t)}function Xt(e,t){Jt(e,"da",t)}function Jt(e,t,n=Oi){const i=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}e()});if(en(t,i,n),n){let e=n.parent;for(;e&&e.parent;)Kt(e.parent.vnode)&&Zt(i,t,n,e),e=e.parent}}function Zt(e,t,n,i){const r=en(t,e,i,!0);ln((()=>{C(i[t],r)}),n)}function en(e,t,n=Oi,i=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...i)=>{if(n.isUnmounted)return;de(),Mi(n);const r=Vi(t,n,e,i);return Fi(),pe(),r});return i?r.unshift(s):r.push(s),s}}const tn=e=>(t,n=Oi)=>(!qi||"sp"===e)&&en(e,t,n),nn=tn("bm"),rn=tn("m"),sn=tn("bu"),on=tn("u"),an=tn("bum"),ln=tn("um"),cn=tn("sp"),un=tn("rtg"),hn=tn("rtc");function dn(e,t=Oi){en("ec",e,t)}let pn=!0;function fn(e){const t=mn(e),n=e.proxy,i=e.ctx;pn=!1,t.beforeCreate&&_n(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:p,updated:_,activated:g,deactivated:m,beforeDestroy:y,beforeUnmount:v,destroyed:C,unmounted:b,render:w,renderTracked:T,renderTriggered:S,errorCaptured:I,serverPrefetch:R,expose:x,inheritAttrs:P,components:A,directives:O,filters:D}=t;if(c&&function(e,t,n=f,i=!1){E(e)&&(e=bn(e));for(const r in e){const n=e[r];let s;s=N(n)?"default"in n?qt(n.from||r,n.default,!0):qt(n.from||r):qt(n),_t(s)&&i?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:e=>s.value=e}):t[r]=s}}(c,i,null,e.appContext.config.unwrapInjectedRef),o)for(const f in o){const e=o[f];k(e)&&(i[f]=e.bind(n))}if(r){const t=r.call(n,n);N(t)&&(e.data=it(t))}if(pn=!0,s)for(const E in s){const e=s[E],t=Et({get:k(e)?e.bind(n,n):k(e.get)?e.get.bind(n,n):f,set:!k(e)&&k(e.set)?e.set.bind(n):f});Object.defineProperty(i,E,{enumerable:!0,configurable:!0,get:()=>t.value,set:e=>t.value=e})}if(a)for(const f in a)gn(a[f],i,n,f);if(l){const e=k(l)?l.call(n):l;Reflect.ownKeys(e).forEach((t=>{Lt(t,e[t])}))}function M(e,t){E(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(u&&_n(u,e,"c"),M(nn,h),M(rn,d),M(sn,p),M(on,_),M(Qt,g),M(Xt,m),M(dn,I),M(hn,T),M(un,S),M(an,v),M(ln,b),M(cn,R),E(x))if(x.length){const t=e.exposed||(e.exposed={});x.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});w&&e.render===f&&(e.render=w),null!=P&&(e.inheritAttrs=P),A&&(e.components=A),O&&(e.directives=O)}function _n(e,t,n){Vi(E(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function gn(e,t,n,i){const r=i.includes(".")?vr(n,i):()=>n[i];if(R(e)){const n=t[e];k(n)&&gr(r,n)}else if(k(e))gr(r,e.bind(n));else if(N(e))if(E(e))e.forEach((e=>gn(e,t,n,i)));else{const i=k(e.handler)?e.handler.bind(n):t[e.handler];k(i)&&gr(r,i,e)}}function mn(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let l;return a?l=a:r.length||n||i?(l={},r.length&&r.forEach((e=>yn(l,e,o,!0))),yn(l,t,o)):l=t,s.set(t,l),l}function yn(e,t,n,i=!1){const{mixins:r,extends:s}=t;s&&yn(e,s,n,!0),r&&r.forEach((t=>yn(e,t,n,!0)));for(const o in t)if(i&&"expose"===o);else{const i=vn[o]||n&&n[o];e[o]=i?i(e[o],t[o]):t[o]}return e}const vn={data:Cn,props:En,emits:En,methods:En,computed:En,beforeCreate:wn,created:wn,beforeMount:wn,mounted:wn,beforeUpdate:wn,updated:wn,beforeDestroy:wn,beforeUnmount:wn,destroyed:wn,unmounted:wn,activated:wn,deactivated:wn,errorCaptured:wn,serverPrefetch:wn,components:En,directives:En,watch:function(e,t){if(!e)return t;if(!t)return e;const n=v(Object.create(null),e);for(const i in t)n[i]=wn(e[i],t[i]);return n},provide:Cn,inject:function(e,t){return En(bn(e),bn(t))}};function Cn(e,t){return t?e?function(){return v(k(e)?e.call(this,this):e,k(t)?t.call(this,this):t)}:t:e}function bn(e){if(E(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function wn(e,t){return e?[...new Set([].concat(e,t))]:t}function En(e,t){return e?v(v(Object.create(null),e),t):t}function Tn(e,t,n,i=!1){const r={},s={};z(s,di,1),e.propsDefaults=Object.create(null),Sn(e,t,r,s);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=i?r:st(r,!1,Ne,Qe,Ze):e.type.props?e.props=r:e.props=s,e.attrs=s}function Sn(e,t,n,i){const[r,s]=e.propsOptions;let o,a=!1;if(t)for(let l in t){if(F(l))continue;const c=t[l];let u;r&&w(r,u=j(l))?s&&s.includes(u)?(o||(o={}))[u]=c:n[u]=c:It(e.emitsOptions,l)||c!==i[l]&&(i[l]=c,a=!0)}if(s){const t=ct(n),i=o||d;for(let o=0;o<s.length;o++){const a=s[o];n[a]=In(r,t,a,i[a],e,!w(i,a))}}return a}function In(e,t,n,i,r,s){const o=e[n];if(null!=o){const e=w(o,"default");if(e&&void 0===i){const e=o.default;if(o.type!==Function&&k(e)){const{propsDefaults:s}=r;n in s?i=s[n]:(Mi(r),i=s[n]=e.call(null,t),Fi())}else i=e}o[0]&&(s&&!e?i=!1:!o[1]||""!==i&&i!==W(n)||(i=!0))}return i}function kn(e,t,n=!1){const i=t.propsCache,r=i.get(e);if(r)return r;const s=e.props,o={},a=[];let l=!1;if(!k(e)){const i=e=>{l=!0;const[n,i]=kn(e,t,!0);v(o,n),i&&a.push(...i)};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}if(!s&&!l)return i.set(e,p),p;if(E(s))for(let u=0;u<s.length;u++){const e=j(s[u]);Rn(e)&&(o[e]=d)}else if(s)for(const u in s){const e=j(u);if(Rn(e)){const t=s[u],n=o[e]=E(t)||k(t)?{type:t}:t;if(n){const t=Pn(Boolean,n.type),i=Pn(String,n.type);n[0]=t>-1,n[1]=i<0||t<i,(t>-1||w(n,"default"))&&a.push(e)}}}const c=[o,a];return i.set(e,c),c}function Rn(e){return"$"!==e[0]}function xn(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function Nn(e,t){return xn(e)===xn(t)}function Pn(e,t){return E(t)?t.findIndex((t=>Nn(t,e))):k(t)&&Nn(t,e)?0:-1}const An=e=>"_"===e[0]||"$stable"===e,On=e=>E(e)?e.map(bi):[bi(e)],Dn=(e,t,n)=>{const i=At(((...e)=>On(t(...e))),n);return i._c=!1,i},Mn=(e,t,n)=>{const i=e._ctx;for(const r in e){if(An(r))continue;const n=e[r];if(k(n))t[r]=Dn(0,n,i);else if(null!=n){const e=On(n);t[r]=()=>e}}},Fn=(e,t)=>{const n=On(t);e.slots.default=()=>n};function Ln(e,t){if(null===kt)return e;const n=kt.proxy,i=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[e,s,o,a=d]=t[r];k(e)&&(e={mounted:e,updated:e}),e.deep&&Cr(s),i.push({dir:e,instance:n,value:s,oldValue:void 0,arg:o,modifiers:a})}return e}function qn(e,t,n,i){const r=e.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(de(),Vi(l,n,8,[e.el,a,e,t]),pe())}}function jn(){return{app:null,config:{isNativeTag:_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Un=0;function Wn(e,t){return function(n,i=null){null==i||N(i)||(i=null);const r=jn(),s=new Set;let o=!1;const a=r.app={_uid:Un++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:wr,get config(){return r.config},set config(e){},use:(e,...t)=>(s.has(e)||(e&&k(e.install)?(s.add(e),e.install(a,...t)):k(e)&&(s.add(e),e(a,...t))),a),mixin:e=>(r.mixins.includes(e)||r.mixins.push(e),a),component:(e,t)=>t?(r.components[e]=t,a):r.components[e],directive:(e,t)=>t?(r.directives[e]=t,a):r.directives[e],mount(s,l,c){if(!o){const u=gi(n,i);return u.appContext=r,l&&t?t(u,s):e(u,s,c),o=!0,a._container=s,s.__vue_app__=a,Wi(u.component)||u.component.proxy}},unmount(){o&&(e(null,a._container),delete a._container.__vue_app__)},provide:(e,t)=>(r.provides[e]=t,a)};return a}}const Bn=function(e,t){t&&t.pendingBranch?E(e)?t.effects.push(...e):t.effects.push(e):ar(e,Zi,Ji,er)};function Vn(e){return function(e,t){(G||(G="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})).__VUE__=!0;const{insert:n,remove:i,patchProp:r,createElement:s,createText:o,createComment:a,setText:l,setElementText:c,parentNode:u,nextSibling:h,setScopeId:_=f,cloneNode:g,insertStaticContent:m}=e,y=(e,t,n,i=null,r=null,s=null,o=!1,a=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!hi(e,t)&&(i=ne(e),Q(e,r,s,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:c,ref:u,shapeFlag:h}=t;switch(c){case Zn:C(e,t,n,i);break;case ei:b(e,t,n,i);break;case ti:null==e&&E(t,n,i,o);break;case Jn:D(e,t,n,i,r,s,o,a,l);break;default:1&h?I(e,t,n,i,r,s,o,a,l):6&h?M(e,t,n,i,r,s,o,a,l):(64&h||128&h)&&c.process(e,t,n,i,r,s,o,a,l,re)}null!=u&&r&&$n(u,e&&e.ref,s,t||e,!t)},C=(e,t,i,r)=>{if(null==e)n(t.el=o(t.children),i,r);else{const n=t.el=e.el;t.children!==e.children&&l(n,t.children)}},b=(e,t,i,r)=>{null==e?n(t.el=a(t.children||""),i,r):t.el=e.el},E=(e,t,n,i)=>{[e.el,e.anchor]=m(e.children,t,n,i)},T=({el:e,anchor:t},i,r)=>{let s;for(;e&&e!==t;)s=h(e),n(e,i,r),e=s;n(t,i,r)},S=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=h(e),i(e),e=n;i(t)},I=(e,t,n,i,r,s,o,a,l)=>{o=o||"svg"===t.type,null==e?k(t,n,i,r,s,o,a,l):N(e,t,r,s,o,a,l)},k=(e,t,i,o,a,l,u,h)=>{let d,p;const{type:f,props:_,shapeFlag:m,transition:y,patchFlag:v,dirs:C}=e;if(e.el&&void 0!==g&&-1===v)d=e.el=g(e.el);else{if(d=e.el=s(e.type,l,_&&_.is,_),8&m?c(d,e.children):16&m&&x(e.children,d,null,o,a,l&&"foreignObject"!==f,u,h),C&&qn(e,null,o,"created"),_){for(const t in _)"value"===t||F(t)||r(d,t,null,_[t],l,e.children,o,a,te);"value"in _&&r(d,"value",null,_.value),(p=_.onVnodeBeforeMount)&&Hn(p,o,e)}R(d,e,e.scopeId,u,o)}C&&qn(e,null,o,"beforeMount");const b=(!a||a&&!a.pendingBranch)&&y&&!y.persisted;b&&y.beforeEnter(d),n(d,t,i),((p=_&&_.onVnodeMounted)||b||C)&&Bn((()=>{p&&Hn(p,o,e),b&&y.enter(d),C&&qn(e,null,o,"mounted")}),a)},R=(e,t,n,i,r)=>{if(n&&_(e,n),i)for(let s=0;s<i.length;s++)_(e,i[s]);if(r){if(t===r.subTree){const t=r.vnode;R(e,t,t.scopeId,t.slotScopeIds,r.parent)}}},x=(e,t,n,i,r,s,o,a,l=0)=>{for(let c=l;c<e.length;c++){const l=e[c]=a?wi(e[c]):bi(e[c]);y(null,l,t,n,i,r,s,o,a)}},N=(e,t,n,i,s,o,a)=>{const l=t.el=e.el;let{patchFlag:u,dynamicChildren:h,dirs:p}=t;u|=16&e.patchFlag;const f=e.props||d,_=t.props||d;let g;(g=_.onVnodeBeforeUpdate)&&Hn(g,n,t,e),p&&qn(t,e,n,"beforeUpdate");const m=s&&"foreignObject"!==t.type;if(h?A(e.dynamicChildren,h,l,n,i,m,o):a||V(e,t,l,null,n,i,m,o,!1),u>0){if(16&u)O(l,t,f,_,n,i,s);else if(2&u&&f.class!==_.class&&r(l,"class",null,_.class,s),4&u&&r(l,"style",f.style,_.style,s),8&u){const o=t.dynamicProps;for(let t=0;t<o.length;t++){const a=o[t],c=f[a],u=_[a];u===c&&"value"!==a||r(l,a,c,u,s,e.children,n,i,te)}}1&u&&e.children!==t.children&&c(l,t.children)}else a||null!=h||O(l,t,f,_,n,i,s);((g=_.onVnodeUpdated)||p)&&Bn((()=>{g&&Hn(g,n,t,e),p&&qn(t,e,n,"updated")}),i)},A=(e,t,n,i,r,s,o)=>{for(let a=0;a<t.length;a++){const l=e[a],c=t[a],h=l.el&&(l.type===Jn||!hi(l,c)||70&l.shapeFlag)?u(l.el):n;y(l,c,h,null,i,r,s,o,!0)}},O=(e,t,n,i,s,o,a)=>{if(n!==i){for(const l in i){if(F(l))continue;const c=i[l],u=n[l];c!==u&&"value"!==l&&r(e,l,u,c,a,t.children,s,o,te)}if(n!==d)for(const l in n)F(l)||l in i||r(e,l,n[l],null,a,t.children,s,o,te);"value"in i&&r(e,"value",n.value,i.value)}},D=(e,t,i,r,s,a,l,c,u)=>{const h=t.el=e?e.el:o(""),d=t.anchor=e?e.anchor:o("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:_}=t;_&&(c=c?c.concat(_):_),null==e?(n(h,i,r),n(d,i,r),x(t.children,i,d,s,a,l,c,u)):p>0&&64&p&&f&&e.dynamicChildren?(A(e.dynamicChildren,f,i,s,a,l,c),(null!=t.key||s&&t===s.subTree)&&zn(e,t,!0)):V(e,t,i,d,s,a,l,c,u)},M=(e,t,n,i,r,s,o,a,l)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?r.ctx.activate(t,n,i,o,l):L(t,n,i,r,s,o,l):q(e,t,l)},L=(e,t,n,i,r,s,o)=>{const a=e.component=function(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||Pi,s={uid:Ai++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,update:null,scope:new X(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:kn(i,r),emitsOptions:St(i,r),emit:null,emitted:null,propsDefaults:d,inheritAttrs:i.inheritAttrs,ctx:d,data:d,props:d,attrs:d,slots:d,refs:d,setupState:d,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};s.ctx={_:s},s.root=t?t.root:s,s.emit=Tt.bind(null,s),e.ce&&e.ce(s);return s}(e,i,r);if(Kt(e)&&(a.ctx.renderer=re),function(e,t=!1){qi=t;const{props:n,children:i}=e.vnode,r=Li(e);Tn(e,n,r,t),((e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=ct(t),z(t,"_",n)):Mn(t,e.slots={})}else e.slots={},t&&Fn(e,t);z(e.slots,di,1)})(e,i);const s=r?function(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=ut(new Proxy(e.ctx,Ni));const{setup:i}=n;if(i){const n=e.setupContext=i.length>1?function(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=function(e){return new Proxy(e.attrs,{get:(t,n)=>(fe(e,0,"$attrs"),t[n])})}(e))},slots:e.slots,emit:e.emit,expose:t}}(e):null;Mi(e),de();const r=Bi(i,e,0,[e.props,n]);if(pe(),Fi(),P(r)){if(r.then(Fi,Fi),t)return r.then((n=>{ji(e,n,t)})).catch((t=>{$i(t,e,0)}));e.asyncDep=r}else ji(e,r,t)}else Ui(e,t)}(e,t):void 0;qi=!1}(a),a.asyncDep){if(r&&r.registerDep(a,U),!e.el){const e=a.subTree=gi(ei);b(null,e,t,n)}}else U(a,e,t,n,r,s,o)},q=(e,t,n)=>{const i=t.component=e.component;if(function(e,t,n){const{props:i,children:r,component:s}=e,{props:o,children:a,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!r&&!a||a&&a.$stable)||i!==o&&(i?!o||Ft(i,o,c):!!o);if(1024&l)return!0;if(16&l)return i?Ft(i,o,c):!!o;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(o[n]!==i[n]&&!It(c,n))return!0}}return!1}(e,t,n)){if(i.asyncDep&&!i.asyncResolved)return void B(i,t,n);i.next=t,function(e){const t=Yi.indexOf(e);t>Gi&&Yi.splice(t,1)}(i.update),i.update()}else t.component=e.component,t.el=e.el,i.vnode=t},U=(e,t,n,i,r,s,o)=>{const a=new le((()=>{if(e.isMounted){let t,{next:n,bu:i,u:l,parent:c,vnode:h}=e,d=n;a.allowRecurse=!1,n?(n.el=h.el,B(e,n,o)):n=h,i&&H(i),(t=n.props&&n.props.onVnodeBeforeUpdate)&&Hn(t,c,n,h),a.allowRecurse=!0;const p=Ot(e),f=e.subTree;e.subTree=p,y(f,p,u(f.el),ne(f),e,r,s),n.el=p.el,null===d&&function({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}(e,p.el),l&&Bn(l,r),(t=n.props&&n.props.onVnodeUpdated)&&Bn((()=>Hn(t,c,n,h)),r)}else{let o;const{el:l,props:c}=t,{bm:u,m:h,parent:d}=e,p=Gt(t);if(a.allowRecurse=!1,u&&H(u),!p&&(o=c&&c.onVnodeBeforeMount)&&Hn(o,d,t),a.allowRecurse=!0,l&&oe){const n=()=>{e.subTree=Ot(e),oe(l,e.subTree,e,r,null)};p?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{const o=e.subTree=Ot(e);y(null,o,n,i,e,r,s),t.el=o.el}if(h&&Bn(h,r),!p&&(o=c&&c.onVnodeMounted)){const e=t;Bn((()=>Hn(o,d,e)),r)}256&t.shapeFlag&&e.a&&Bn(e.a,r),e.isMounted=!0,t=n=i=null}}),(()=>sr(e.update)),e.scope),l=e.update=a.run.bind(a);l.id=e.uid,a.allowRecurse=l.allowRecurse=!0,l()},B=(e,t,n)=>{t.component=e;const i=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=e,a=ct(r),[l]=e.propsOptions;let c=!1;if(!(i||o>0)||16&o){let i;Sn(e,t,r,s)&&(c=!0);for(const s in a)t&&(w(t,s)||(i=W(s))!==s&&w(t,i))||(l?!n||void 0===n[s]&&void 0===n[i]||(r[s]=In(l,a,s,void 0,e,!0)):delete r[s]);if(s!==a)for(const e in s)t&&w(t,e)||(delete s[e],c=!0)}else if(8&o){const n=e.vnode.dynamicProps;for(let i=0;i<n.length;i++){let o=n[i];const u=t[o];if(l)if(w(s,o))u!==s[o]&&(s[o]=u,c=!0);else{const t=j(o);r[t]=In(l,a,t,u,e,!1)}else u!==s[o]&&(s[o]=u,c=!0)}}c&&me(e,"set","$attrs")}(e,t.props,i,n),((e,t,n)=>{const{vnode:i,slots:r}=e;let s=!0,o=d;if(32&i.shapeFlag){const e=t._;e?n&&1===e?s=!1:(v(r,t),n||1!==e||delete r._):(s=!t.$stable,Mn(t,r)),o=t}else t&&(Fn(e,t),o={default:1});if(s)for(const a in r)An(a)||a in o||delete r[a]})(e,t.children,n),de(),lr(void 0,e.update),pe()},V=(e,t,n,i,r,s,o,a,l=!1)=>{const u=e&&e.children,h=e?e.shapeFlag:0,d=t.children,{patchFlag:p,shapeFlag:f}=t;if(p>0){if(128&p)return void Y(u,d,n,i,r,s,o,a,l);if(256&p)return void $(u,d,n,i,r,s,o,a,l)}8&f?(16&h&&te(u,r,s),d!==u&&c(n,d)):16&h?16&f?Y(u,d,n,i,r,s,o,a,l):te(u,r,s,!0):(8&h&&c(n,""),16&f&&x(d,n,i,r,s,o,a,l))},$=(e,t,n,i,r,s,o,a,l)=>{t=t||p;const c=(e=e||p).length,u=t.length,h=Math.min(c,u);let d;for(d=0;d<h;d++){const i=t[d]=l?wi(t[d]):bi(t[d]);y(e[d],i,n,null,r,s,o,a,l)}c>u?te(e,r,s,!0,!1,h):x(t,n,i,r,s,o,a,l,h)},Y=(e,t,n,i,r,s,o,a,l)=>{let c=0;const u=t.length;let h=e.length-1,d=u-1;for(;c<=h&&c<=d;){const i=e[c],u=t[c]=l?wi(t[c]):bi(t[c]);if(!hi(i,u))break;y(i,u,n,null,r,s,o,a,l),c++}for(;c<=h&&c<=d;){const i=e[h],c=t[d]=l?wi(t[d]):bi(t[d]);if(!hi(i,c))break;y(i,c,n,null,r,s,o,a,l),h--,d--}if(c>h){if(c<=d){const e=d+1,h=e<u?t[e].el:i;for(;c<=d;)y(null,t[c]=l?wi(t[c]):bi(t[c]),n,h,r,s,o,a,l),c++}}else if(c>d)for(;c<=h;)Q(e[c],r,s,!0),c++;else{const f=c,_=c,g=new Map;for(c=_;c<=d;c++){const e=t[c]=l?wi(t[c]):bi(t[c]);null!=e.key&&g.set(e.key,c)}let m,v=0;const C=d-_+1;let b=!1,w=0;const E=new Array(C);for(c=0;c<C;c++)E[c]=0;for(c=f;c<=h;c++){const i=e[c];if(v>=C){Q(i,r,s,!0);continue}let u;if(null!=i.key)u=g.get(i.key);else for(m=_;m<=d;m++)if(0===E[m-_]&&hi(i,t[m])){u=m;break}void 0===u?Q(i,r,s,!0):(E[u-_]=c+1,u>=w?w=u:b=!0,y(i,t[u],n,null,r,s,o,a,l),v++)}const T=b?function(e){const t=e.slice(),n=[0];let i,r,s,o,a;const l=e.length;for(i=0;i<l;i++){const l=e[i];if(0!==l){if(r=n[n.length-1],e[r]<l){t[i]=r,n.push(i);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,e[n[a]]<l?s=a+1:o=a;l<e[n[s]]&&(s>0&&(t[i]=n[s-1]),n[s]=i)}}s=n.length,o=n[s-1];for(;s-- >0;)n[s]=o,o=t[o];return n}(E):p;for(m=T.length-1,c=C-1;c>=0;c--){const e=_+c,h=t[e],d=e+1<u?t[e+1].el:i;0===E[c]?y(null,h,n,d,r,s,o,a,l):b&&(m<0||c!==T[m]?K(h,n,d,2):m--)}}},K=(e,t,i,r,s=null)=>{const{el:o,type:a,transition:l,children:c,shapeFlag:u}=e;if(6&u)return void K(e.component.subTree,t,i,r);if(128&u)return void e.suspense.move(t,i,r);if(64&u)return void a.move(e,t,i,re);if(a===Jn){n(o,t,i);for(let e=0;e<c.length;e++)K(c[e],t,i,r);return void n(e.anchor,t,i)}if(a===ti)return void T(e,t,i);if(2!==r&&1&u&&l)if(0===r)l.beforeEnter(o),n(o,t,i),Bn((()=>l.enter(o)),s);else{const{leave:e,delayLeave:r,afterLeave:s}=l,a=()=>n(o,t,i),c=()=>{e(o,(()=>{a(),s&&s()}))};r?r(o,a,c):c()}else n(o,t,i)},Q=(e,t,n,i=!1,r=!1)=>{const{type:s,props:o,ref:a,children:l,dynamicChildren:c,shapeFlag:u,patchFlag:h,dirs:d}=e;if(null!=a&&$n(a,null,n,e,!0),256&u)return void t.ctx.deactivate(e);const p=1&u&&d,f=!Gt(e);let _;if(f&&(_=o&&o.onVnodeBeforeUnmount)&&Hn(_,t,e),6&u)ee(e.component,n,i);else{if(128&u)return void e.suspense.unmount(n,i);p&&qn(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,n,r,re,i):c&&(s!==Jn||h>0&&64&h)?te(c,t,n,!1,!0):(s===Jn&&384&h||!r&&16&u)&&te(l,t,n),i&&J(e)}(f&&(_=o&&o.onVnodeUnmounted)||p)&&Bn((()=>{_&&Hn(_,t,e),p&&qn(e,null,t,"unmounted")}),n)},J=e=>{const{type:t,el:n,anchor:r,transition:s}=e;if(t===Jn)return void Z(n,r);if(t===ti)return void S(e);const o=()=>{i(n),s&&!s.persisted&&s.afterLeave&&s.afterLeave()};if(1&e.shapeFlag&&s&&!s.persisted){const{leave:t,delayLeave:i}=s,r=()=>t(n,o);i?i(e.el,o,r):r()}else o()},Z=(e,t)=>{let n;for(;e!==t;)n=h(e),i(e),e=n;i(t)},ee=(e,t,n)=>{const{bum:i,scope:r,update:s,subTree:o,um:a}=e;i&&H(i),r.stop(),s&&(s.active=!1,Q(o,e,t,n)),a&&Bn(a,t),Bn((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},te=(e,t,n,i=!1,r=!1,s=0)=>{for(let o=s;o<e.length;o++)Q(e[o],t,n,i,r)},ne=e=>6&e.shapeFlag?ne(e.component.subTree):128&e.shapeFlag?e.suspense.next():h(e.anchor||e.el),ie=(e,t,n)=>{null==e?t._vnode&&Q(t._vnode,null,null,!0):y(t._vnode||null,e,t,null,null,null,n),cr(),t._vnode=e},re={p:y,um:Q,m:K,r:J,mt:L,mc:x,pc:V,pbc:A,n:ne,o:e};let se,oe;t&&([se,oe]=t(re));return{render:ie,hydrate:se,createApp:Wn(ie,se)}}(e)}function $n(e,t,n,i,r=!1){if(E(e))return void e.forEach(((e,s)=>$n(e,t&&(E(t)?t[s]:t),n,i,r)));if(Gt(i)&&!r)return;const s=4&i.shapeFlag?Wi(i.component)||i.component.proxy:i.el,o=r?null:s,{i:a,r:l}=e,c=t&&t.r,u=a.refs===d?a.refs={}:a.refs,h=a.setupState;if(null!=c&&c!==l&&(R(c)?(u[c]=null,w(h,c)&&(h[c]=null)):_t(c)&&(c.value=null)),R(l)){const e=()=>{u[l]=o,w(h,l)&&(h[l]=o)};o?(e.id=-1,Bn(e,n)):e()}else if(_t(l)){const e=()=>{l.value=o};o?(e.id=-1,Bn(e,n)):e()}else k(l)&&Bi(l,a,12,[o,u])}function Hn(e,t,n,i=null){Vi(e,t,7,[n,i])}function zn(e,t,n=!1){const i=e.children,r=t.children;if(E(i)&&E(r))for(let s=0;s<i.length;s++){const e=i[s];let t=r[s];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=r[s]=wi(r[s]),t.el=e.el),n||zn(e,t))}}function Yn(e,t){return Qn("components",e,!0,t)||e}const Gn=Symbol();function Kn(e){return R(e)?Qn("components",e,!1)||e:e||Gn}function Qn(e,t,n=!0,i=!1){const r=kt||Oi;if(r){const n=r.type;if("components"===e){const e=function(e){return k(e)&&e.displayName||e.name}(n);if(e&&(e===t||e===j(t)||e===B(j(t))))return n}const s=Xn(r[e]||n[e],t)||Xn(r.appContext[e],t);return!s&&i?n:s}}function Xn(e,t){return e&&(e[t]||e[j(t)]||e[B(j(t))])}const Jn=Symbol(void 0),Zn=Symbol(void 0),ei=Symbol(void 0),ti=Symbol(void 0),ni=[];let ii=null;function ri(e=!1){ni.push(ii=e?null:[])}let si=1;function oi(e){si+=e}function ai(e){return e.dynamicChildren=si>0?ii||p:null,ni.pop(),ii=ni[ni.length-1]||null,si>0&&ii&&ii.push(e),e}function li(e,t,n,i,r,s){return ai(_i(e,t,n,i,r,s,!0))}function ci(e,t,n,i,r){return ai(gi(e,t,n,i,r,!0))}function ui(e){return!!e&&!0===e.__v_isVNode}function hi(e,t){return e.type===t.type&&e.key===t.key}const di="__vInternal",pi=({key:e})=>null!=e?e:null,fi=({ref:e})=>null!=e?R(e)||_t(e)||k(e)?{i:kt,r:e}:e:null;function _i(e,t=null,n=null,i=0,r=null,s=(e===Jn?0:1),o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&pi(t),ref:t&&fi(t),scopeId:Rt,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null};return a?(Ei(l,n),128&s&&e.normalize(l)):n&&(l.shapeFlag|=R(n)?8:16),si>0&&!o&&ii&&(l.patchFlag>0||6&s)&&32!==l.patchFlag&&ii.push(l),l}const gi=function(e,t=null,n=null,r=0,s=null,o=!1){e&&e!==Gn||(e=ei);if(ui(e)){const i=mi(e,t,!0);return n&&Ei(i,n),i}l=e,k(l)&&"__vccOpts"in l&&(e=e.__vccOpts);var l;if(t){t=function(e){return e?lt(e)||di in e?v({},e):e:null}(t);let{class:e,style:n}=t;e&&!R(e)&&(t.class=a(e)),N(n)&&(lt(n)&&!E(n)&&(n=v({},n)),t.style=i(n))}const c=R(e)?1:(e=>e.__isSuspense)(e)?128:(e=>e.__isTeleport)(e)?64:N(e)?4:k(e)?2:0;return _i(e,t,n,r,s,c,o,!0)};function mi(e,t,n=!1){const{props:i,ref:r,patchFlag:s,children:o}=e,a=t?Ti(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&pi(a),ref:t&&t.ref?n&&r?E(r)?r.concat(fi(t)):[r,fi(t)]:fi(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Jn?-1===s?16:16|s:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&mi(e.ssContent),ssFallback:e.ssFallback&&mi(e.ssFallback),el:e.el,anchor:e.anchor}}function yi(e=" ",t=0){return gi(Zn,null,e,t)}function vi(e,t){const n=gi(ti,null,e);return n.staticCount=t,n}function Ci(e="",t=!1){return t?(ri(),ci(ei,null,e)):gi(ei,null,e)}function bi(e){return null==e||"boolean"==typeof e?gi(ei):E(e)?gi(Jn,null,e.slice()):"object"==typeof e?wi(e):gi(Zn,null,String(e))}function wi(e){return null===e.el||e.memo?e:mi(e)}function Ei(e,t){let n=0;const{shapeFlag:i}=e;if(null==t)t=null;else if(E(t))n=16;else if("object"==typeof t){if(65&i){const n=t.default;return void(n&&(n._c&&(n._d=!1),Ei(e,n()),n._c&&(n._d=!0)))}{n=32;const i=t._;i||di in t?3===i&&kt&&(1===kt.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=kt}}else k(t)?(t={default:t,_ctx:kt},n=32):(t=String(t),64&i?(n=16,t=[yi(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ti(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=a([t.class,r.class]));else if("style"===e)t.style=i([t.style,r.style]);else if(m(e)){const n=t[e],i=r[e];n!==i&&(t[e]=n?[].concat(n,i):i)}else""!==e&&(t[e]=r[e])}return t}function Si(e,t,n,i){let r;const s=n&&n[i];if(E(e)||R(e)){r=new Array(e.length);for(let n=0,i=e.length;n<i;n++)r[n]=t(e[n],n,void 0,s&&s[n])}else if("number"==typeof e){r=new Array(e);for(let n=0;n<e;n++)r[n]=t(n+1,n,void 0,s&&s[n])}else if(N(e))if(e[Symbol.iterator])r=Array.from(e,((e,n)=>t(e,n,void 0,s&&s[n])));else{const n=Object.keys(e);r=new Array(n.length);for(let i=0,o=n.length;i<o;i++){const o=n[i];r[i]=t(e[o],o,i,s&&s[i])}}else r=[];return n&&(n[i]=r),r}function Ii(e,t,n={},i,r){if(kt.isCE)return gi("slot","default"===t?null:{name:t},i&&i());let s=e[t];s&&s._c&&(s._d=!1),ri();const o=s&&ki(s(n)),a=ci(Jn,{key:n.key||`_${t}`},o||(i?i():[]),o&&1===e._?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function ki(e){return e.some((e=>!ui(e)||e.type!==ei&&!(e.type===Jn&&!ki(e.children))))?e:null}const Ri=e=>e?Li(e)?Wi(e)||e.proxy:Ri(e.parent):null,xi=v(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ri(e.parent),$root:e=>Ri(e.root),$emit:e=>e.emit,$options:e=>mn(e),$forceUpdate:e=>()=>sr(e.update),$nextTick:e=>rr.bind(e.proxy),$watch:e=>yr.bind(e)}),Ni={get({_:e},t){const{ctx:n,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:l}=e;let c;if("$"!==t[0]){const a=o[t];if(void 0!==a)switch(a){case 0:return i[t];case 1:return r[t];case 3:return n[t];case 2:return s[t]}else{if(i!==d&&w(i,t))return o[t]=0,i[t];if(r!==d&&w(r,t))return o[t]=1,r[t];if((c=e.propsOptions[0])&&w(c,t))return o[t]=2,s[t];if(n!==d&&w(n,t))return o[t]=3,n[t];pn&&(o[t]=4)}}const u=xi[t];let h,p;return u?("$attrs"===t&&fe(e,0,t),u(e)):(h=a.__cssModules)&&(h=h[t])?h:n!==d&&w(n,t)?(o[t]=3,n[t]):(p=l.config.globalProperties,w(p,t)?p[t]:void 0)},set({_:e},t,n){const{data:i,setupState:r,ctx:s}=e;if(r!==d&&w(r,t))r[t]=n;else if(i!==d&&w(i,t))i[t]=n;else if(w(e.props,t))return!1;return("$"!==t[0]||!(t.slice(1)in e))&&(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:s}},o){let a;return void 0!==n[o]||e!==d&&w(e,o)||t!==d&&w(t,o)||(a=s[0])&&w(a,o)||w(i,o)||w(xi,o)||w(r.config.globalProperties,o)}},Pi=jn();let Ai=0;let Oi=null;const Di=()=>Oi||kt,Mi=e=>{Oi=e,e.scope.on()},Fi=()=>{Oi&&Oi.scope.off(),Oi=null};function Li(e){return 4&e.vnode.shapeFlag}let qi=!1;function ji(e,t,n){k(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:N(t)&&(e.setupState=bt(t)),Ui(e,n)}function Ui(e,t,n){const i=e.type;e.render||(e.render=i.render||f),Mi(e),de(),fn(e),pe(),Fi()}function Wi(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(bt(ut(e.exposed)),{get:(t,n)=>n in t?t[n]:n in xi?xi[n](e):void 0}))}function Bi(e,t,n,i){let r;try{r=i?e(...i):e()}catch(s){$i(s,t,n)}return r}function Vi(e,t,n,i){if(k(e)){const r=Bi(e,t,n,i);return r&&P(r)&&r.catch((e=>{$i(e,t,n)})),r}const r=[];for(let s=0;s<e.length;s++)r.push(Vi(e[s],t,n,i));return r}function $i(e,t,n,i=!0){t&&t.vnode;if(t){let i=t.parent;const r=t.proxy,s=n;for(;i;){const t=i.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,r,s))return;i=i.parent}const o=t.appContext.config.errorHandler;if(o)return void Bi(o,null,10,[e,r,s])}}let Hi=!1,zi=!1;const Yi=[];let Gi=0;const Ki=[];let Qi=null,Xi=0;const Ji=[];let Zi=null,er=0;const tr=Promise.resolve();let nr=null,ir=null;function rr(e){const t=nr||tr;return e?t.then(this?e.bind(this):e):t}function sr(e){Yi.length&&Yi.includes(e,Hi&&e.allowRecurse?Gi+1:Gi)||e===ir||(null==e.id?Yi.push(e):Yi.splice(function(e){let t=Gi+1,n=Yi.length;for(;t<n;){const i=t+n>>>1;ur(Yi[i])<e?t=i+1:n=i}return t}(e.id),0,e),or())}function or(){Hi||zi||(zi=!0,nr=tr.then(hr))}function ar(e,t,n,i){E(e)?n.push(...e):t&&t.includes(e,e.allowRecurse?i+1:i)||n.push(e),or()}function lr(e,t=null){if(Ki.length){for(ir=t,Qi=[...new Set(Ki)],Ki.length=0,Xi=0;Xi<Qi.length;Xi++)Qi[Xi]();Qi=null,Xi=0,ir=null,lr(e,t)}}function cr(e){if(Ji.length){const e=[...new Set(Ji)];if(Ji.length=0,Zi)return void Zi.push(...e);for(Zi=e,Zi.sort(((e,t)=>ur(e)-ur(t))),er=0;er<Zi.length;er++)Zi[er]();Zi=null,er=0}}const ur=e=>null==e.id?Infinity:e.id;function hr(e){zi=!1,Hi=!0,lr(e),Yi.sort(((e,t)=>ur(e)-ur(t)));try{for(Gi=0;Gi<Yi.length;Gi++){const e=Yi[Gi];e&&!1!==e.active&&Bi(e,null,14)}}finally{Gi=0,Yi.length=0,cr(),Hi=!1,nr=null,(Yi.length||Ki.length||Ji.length)&&hr(e)}}function dr(e,t){return mr(e,null,t)}function pr(e,t){return mr(e,null,{flush:"post"})}function fr(e,t){return mr(e,null,{flush:"sync"})}const _r={};function gr(e,t,n){return mr(e,t,n)}function mr(e,t,{immediate:n,deep:i,flush:r,onTrack:s,onTrigger:o}=d){const a=Oi;let l,c,u=!1,h=!1;if(_t(e)?(l=()=>e.value,u=!!e._shallow):ot(e)?(l=()=>e,i=!0):E(e)?(h=!0,u=e.some(ot),l=()=>e.map((e=>_t(e)?e.value:ot(e)?Cr(e):k(e)?Bi(e,a,2):void 0))):l=k(e)?t?()=>Bi(e,a,2):()=>{if(!a||!a.isUnmounted)return c&&c(),Vi(e,a,3,[p])}:f,t&&i){const e=l;l=()=>Cr(e())}let p=e=>{c=y.onStop=()=>{Bi(e,a,4)}};if(qi)return p=f,t?n&&Vi(t,a,3,[l(),h?[]:void 0,p]):l(),f;let _=h?[]:_r;const g=()=>{if(y.active)if(t){const e=y.run();(i||u||(h?e.some(((e,t)=>$(e,_[t]))):$(e,_)))&&(c&&c(),Vi(t,a,3,[e,_===_r?void 0:_,p]),_=e)}else y.run()};let m;g.allowRecurse=!!t,m="sync"===r?g:"post"===r?()=>Bn(g,a&&a.suspense):()=>{!a||a.isMounted?function(e){ar(e,Qi,Ki,Xi)}(g):g()};const y=new le(l,m);return t?n?g():_=y.run():"post"===r?Bn(y.run.bind(y),a&&a.suspense):y.run(),()=>{y.stop(),a&&a.scope&&C(a.scope.effects,y)}}function yr(e,t,n){const i=this.proxy,r=R(e)?e.includes(".")?vr(i,e):()=>i[e]:e.bind(i,i);let s;k(t)?s=t:(s=t.handler,n=t);const o=Oi;Mi(this);const a=mr(r,s.bind(i),n);return o?Mi(o):Fi(),a}function vr(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function Cr(e,t){if(!N(e)||e.__v_skip)return e;if((t=t||new Set).has(e))return e;if(t.add(e),_t(e))Cr(e.value,t);else if(E(e))for(let n=0;n<e.length;n++)Cr(e[n],t);else if(S(e)||T(e))e.forEach((e=>{Cr(e,t)}));else if(D(e))for(const n in e)Cr(e[n],t);return e}function br(e,t,n){const i=arguments.length;return 2===i?N(t)&&!E(t)?ui(t)?gi(e,null,[t]):gi(e,t):gi(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&ui(n)&&(n=[n]),gi(e,t,n))}const wr="3.2.19",Er="undefined"!=typeof document?document:null,Tr=new Map,Sr={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t?Er.createElementNS("http://www.w3.org/2000/svg",e):Er.createElement(e,n?{is:n}:void 0);return"select"===e&&i&&null!=i.multiple&&r.setAttribute("multiple",i.multiple),r},createText:e=>Er.createTextNode(e),createComment:e=>Er.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Er.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,i){const r=n?n.previousSibling:t.lastChild;let s=Tr.get(e);if(!s){const t=Er.createElement("template");if(t.innerHTML=i?`<svg>${e}</svg>`:e,s=t.content,i){const e=s.firstChild;for(;e.firstChild;)s.appendChild(e.firstChild);s.removeChild(e)}Tr.set(e,s)}return t.insertBefore(s.cloneNode(!0),n),[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};const Ir=/\s*!important$/;function kr(e,t,n){if(E(n))n.forEach((n=>kr(e,t,n)));else if(t.startsWith("--"))e.setProperty(t,n);else{const i=function(e,t){const n=xr[t];if(n)return n;let i=j(t);if("filter"!==i&&i in e)return xr[t]=i;i=B(i);for(let r=0;r<Rr.length;r++){const n=Rr[r]+i;if(n in e)return xr[t]=n}return t}(e,t);Ir.test(n)?e.setProperty(W(i),n.replace(Ir,""),"important"):e[i]=n}}const Rr=["Webkit","Moz","ms"],xr={};const Nr="http://www.w3.org/1999/xlink";let Pr=Date.now,Ar=!1;if("undefined"!=typeof window){Pr()>document.createEvent("Event").timeStamp&&(Pr=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);Ar=!!(e&&Number(e[1])<=53)}let Or=0;const Dr=Promise.resolve(),Mr=()=>{Or=0};function Fr(e,t,n,i){e.addEventListener(t,n,i)}function Lr(e,t,n,i,r=null){const s=e._vei||(e._vei={}),o=s[t];if(i&&o)o.value=i;else{const[n,a]=function(e){let t;if(qr.test(e)){let n;for(t={};n=e.match(qr);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[W(e.slice(2)),t]}(t);if(i){const o=s[t]=function(e,t){const n=e=>{const i=e.timeStamp||Pr();(Ar||i>=n.attached-1)&&Vi(function(e,t){if(E(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e(t)))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=(()=>Or||(Dr.then(Mr),Or=Pr()))(),n}(i,r);Fr(e,n,o,a)}else o&&(!function(e,t,n,i){e.removeEventListener(t,n,i)}(e,n,o,a),s[t]=void 0)}}const qr=/(?:Once|Passive|Capture)$/;const jr=/^on[a-z]/;const Ur="transition",Wr=(e,{slots:t})=>br(Ut,function(e){const t={};for(const v in e)v in Br||(t[v]=e[v]);if(!1===e.css)return t;const{name:n="v",type:i,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=e,f=function(e){if(null==e)return null;if(N(e))return[Hr(e.enter),Hr(e.leave)];{const t=Hr(e);return[t,t]}}(r),_=f&&f[0],g=f&&f[1],{onBeforeEnter:m,onEnter:y,onEnterCancelled:C,onLeave:b,onLeaveCancelled:w,onBeforeAppear:E=m,onAppear:T=y,onAppearCancelled:S=C}=t,I=(e,t,n)=>{Yr(e,t?u:a),Yr(e,t?c:o),n&&n()},k=(e,t)=>{Yr(e,p),Yr(e,d),t&&t()},R=e=>(t,n)=>{const r=e?T:y,o=()=>I(t,e,n);Vr(r,[t,o]),Gr((()=>{Yr(t,e?l:s),zr(t,e?u:a),$r(r)||Qr(t,i,_,o)}))};return v(t,{onBeforeEnter(e){Vr(m,[e]),zr(e,s),zr(e,o)},onBeforeAppear(e){Vr(E,[e]),zr(e,l),zr(e,c)},onEnter:R(!1),onAppear:R(!0),onLeave(e,t){const n=()=>k(e,t);zr(e,h),document.body.offsetHeight,zr(e,d),Gr((()=>{Yr(e,h),zr(e,p),$r(b)||Qr(e,i,g,n)})),Vr(b,[e,n])},onEnterCancelled(e){I(e,!1),Vr(C,[e])},onAppearCancelled(e){I(e,!0),Vr(S,[e])},onLeaveCancelled(e){k(e),Vr(w,[e])}})}(e),t);Wr.displayName="Transition";const Br={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Wr.props=v({},Ut.props,Br);const Vr=(e,t=[])=>{E(e)?e.forEach((e=>e(...t))):e&&e(...t)},$r=e=>!!e&&(E(e)?e.some((e=>e.length>1)):e.length>1);function Hr(e){return Y(e)}function zr(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function Yr(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Gr(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let Kr=0;function Qr(e,t,n,i){const r=e._endId=++Kr,s=()=>{r===e._endId&&i()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=function(e,t){const n=window.getComputedStyle(e),i=e=>(n[e]||"").split(", "),r=i("transitionDelay"),s=i("transitionDuration"),o=Xr(r,s),a=i("animationDelay"),l=i("animationDuration"),c=Xr(a,l);let u=null,h=0,d=0;t===Ur?o>0&&(u=Ur,h=o,d=s.length):"animation"===t?c>0&&(u="animation",h=c,d=l.length):(h=Math.max(o,c),u=h>0?o>c?Ur:"animation":null,d=u?u===Ur?s.length:l.length:0);const p=u===Ur&&/\b(transform|all)(,|$)/.test(n.transitionProperty);return{type:u,timeout:h,propCount:d,hasTransform:p}}(e,t);if(!o)return i();const c=o+"end";let u=0;const h=()=>{e.removeEventListener(c,d),s()},d=t=>{t.target===e&&++u>=l&&h()};setTimeout((()=>{u<l&&h()}),a+1),e.addEventListener(c,d)}function Xr(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map(((t,n)=>Jr(t)+Jr(e[n]))))}function Jr(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}const Zr=e=>{const t=e.props["onUpdate:modelValue"];return E(t)?e=>H(t,e):t};function es(e){e.target.composing=!0}function ts(e){const t=e.target;t.composing&&(t.composing=!1,function(e,t){const n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}(t,"input"))}const ns={created(e,{modifiers:{lazy:t,trim:n,number:i}},r){e._assign=Zr(r);const s=i||r.props&&"number"===r.props.type;Fr(e,t?"change":"input",(t=>{if(t.target.composing)return;let i=e.value;n?i=i.trim():s&&(i=Y(i)),e._assign(i)})),n&&Fr(e,"change",(()=>{e.value=e.value.trim()})),t||(Fr(e,"compositionstart",es),Fr(e,"compositionend",ts),Fr(e,"change",ts))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:i,number:r}},s){if(e._assign=Zr(s),e.composing)return;if(document.activeElement===e){if(n)return;if(i&&e.value.trim()===t)return;if((r||"number"===e.type)&&Y(e.value)===t)return}const o=null==t?"":t;e.value!==o&&(e.value=o)}},is={deep:!0,created(e,t,n){e._assign=Zr(n),Fr(e,"change",(()=>{const t=e._modelValue,n=function(e){return"_value"in e?e._value:e.value}(e),i=e.checked,r=e._assign;if(E(t)){const e=c(t,n),s=-1!==e;if(i&&!s)r(t.concat(n));else if(!i&&s){const n=[...t];n.splice(e,1),r(n)}}else if(S(t)){const e=new Set(t);i?e.add(n):e.delete(n),r(e)}else r(ss(e,i))}))},mounted:rs,beforeUpdate(e,t,n){e._assign=Zr(n),rs(e,t,n)}};function rs(e,{value:t,oldValue:n},i){e._modelValue=t,E(t)?e.checked=c(t,i.props.value)>-1:S(t)?e.checked=t.has(i.props.value):t!==n&&(e.checked=l(t,ss(e,!0)))}function ss(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const os=["ctrl","shift","alt","meta"],as={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>os.some((n=>e[`${n}Key`]&&!t.includes(n)))},ls=(e,t)=>(n,...i)=>{for(let e=0;e<t.length;e++){const i=as[t[e]];if(i&&i(n,t))return}return e(n,...i)},cs=v({patchProp:(e,i,r,s,o=!1,a,l,c,u)=>{"class"===i?function(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,s,o):"style"===i?function(e,t,n){const i=e.style,r=i.display;if(n)if(R(n))t!==n&&(i.cssText=n);else{for(const e in n)kr(i,e,n[e]);if(t&&!R(t))for(const e in t)null==n[e]&&kr(i,e,"")}else e.removeAttribute("style");"_vod"in e&&(i.display=r)}(e,r,s):m(i)?y(i)||Lr(e,i,0,s,l):("."===i[0]?(i=i.slice(1),1):"^"===i[0]?(i=i.slice(1),0):function(e,t,n,i){if(i)return"innerHTML"===t||"textContent"===t||!!(t in e&&jr.test(t)&&k(n));if("spellcheck"===t||"draggable"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if(jr.test(t)&&R(n))return!1;return t in e}(e,i,s,o))?function(e,t,i,r,s,o,a){if("innerHTML"===t||"textContent"===t)return r&&a(r,s,o),void(e[t]=null==i?"":i);if("value"===t&&"PROGRESS"!==e.tagName){e._value=i;const n=null==i?"":i;return e.value!==n&&(e.value=n),void(null==i&&e.removeAttribute(t))}if(""===i||null==i){const r=typeof e[t];if("boolean"===r)return void(e[t]=n(i));if(null==i&&"string"===r)return e[t]="",void e.removeAttribute(t);if("number"===r){try{e[t]=0}catch(l){}return void e.removeAttribute(t)}}try{e[t]=i}catch(c){}}(e,i,s,a,l,c,u):("true-value"===i?e._trueValue=s:"false-value"===i&&(e._falseValue=s),function(e,i,r,s,o){if(s&&i.startsWith("xlink:"))null==r?e.removeAttributeNS(Nr,i.slice(6,i.length)):e.setAttributeNS(Nr,i,r);else{const s=t(i);null==r||s&&!n(r)?e.removeAttribute(i):e.setAttribute(i,s?"":r)}}(e,i,s,o))}},Sr);let us;const hs=(...e)=>{const t=(us||(us=Vn(cs))).createApp(...e),{mount:n}=t;return t.mount=e=>{const i=function(e){if(R(e)){return document.querySelector(e)}return e}(e);if(!i)return;const r=t._component;k(r)||r.render||r.template||(r.template=i.innerHTML),i.innerHTML="";const s=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},t};const ds="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,ps=e=>ds?Symbol(e):"_vr_"+e,fs=ps("rvlm"),_s=ps("rvd"),gs=ps("r"),ms=ps("rl"),ys=ps("rvl"),vs="undefined"!=typeof window;const Cs=Object.assign;function bs(e,t){const n={};for(const i in t){const r=t[i];n[i]=Array.isArray(r)?r.map(e):e(r)}return n}const ws=()=>{};function Es(e,t,n="/"){let i,r={},s="",o="";const a=t.indexOf("?"),l=t.indexOf("#",a>-1?a:0);return a>-1&&(i=t.slice(0,a),s=t.slice(a+1,l>-1?l:t.length),r=e(s)),l>-1&&(i=i||t.slice(0,l),o=t.slice(l,t.length)),i=function(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/");let r,s,o=n.length-1;for(r=0;r<i.length;r++)if(s=i[r],1!==o&&"."!==s){if(".."!==s)break;o--}return n.slice(0,o).join("/")+"/"+i.slice(r-(r===i.length?1:0)).join("/")}(null!=i?i:t,n),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:o}}function Ts(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Ss(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Is(e[n],t[n]))return!1;return!0}function Is(e,t){return Array.isArray(e)?ks(e,t):Array.isArray(t)?ks(t,e):e===t}function ks(e,t){return Array.isArray(t)?e.length===t.length&&e.every(((e,n)=>e===t[n])):1===e.length&&e[0]===t}var Rs,xs,Ns,Ps;(xs=Rs||(Rs={})).pop="pop",xs.push="push",(Ps=Ns||(Ns={})).back="back",Ps.forward="forward",Ps.unknown="";const As=/^[^#]+#/;function Os(e,t){return e.replace(As,"#")+t}function Ds(e){let t;if("el"in e){const n=e.el,i="string"==typeof n&&n.startsWith("#"),r="string"==typeof n?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=function(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.pageXOffset,null!=t.top?t.top:window.pageYOffset)}function Ms(e,t){return(history.state?history.state.position-t:-1)+e}const Fs=new Map;function Ls(e=""){let t=[],n=[""],i=0;function r(e){i++,i===n.length||n.splice(i),n.push(e)}const s={location:"",state:{},base:e,createHref:Os.bind(null,e),replace(e){n.splice(i--,1),r(e)},push(e,t){r(e)},listen:e=>(t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}),destroy(){t=[],n=[""],i=0},go(e,r=!0){const s=this.location,o=e<0?Ns.back:Ns.forward;i=Math.max(0,Math.min(i+e,n.length-1)),r&&function(e,n,{direction:i,delta:r}){const s={direction:i,delta:r,type:Rs.pop};for(const o of t)o(e,n,s)}(this.location,s,{direction:o,delta:e})}};return Object.defineProperty(s,"location",{enumerable:!0,get:()=>n[i]}),s}function qs(e){return"string"==typeof e||"symbol"==typeof e}const js={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Us=ps("nf");var Ws,Bs;function Vs(e,t){return Cs(new Error,{type:e,[Us]:!0},t)}function $s(e,t){return e instanceof Error&&Us in e&&(null==t||!!(e.type&t))}(Bs=Ws||(Ws={}))[Bs.aborted=4]="aborted",Bs[Bs.cancelled=8]="cancelled",Bs[Bs.duplicated=16]="duplicated";const Hs={sensitive:!1,strict:!1,start:!0,end:!0},zs=/[.+*?^${}()[\]/\\]/g;function Ys(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function Gs(e,t){let n=0;const i=e.score,r=t.score;for(;n<i.length&&n<r.length;){const e=Ys(i[n],r[n]);if(e)return e;n++}return r.length-i.length}const Ks={type:0,value:""},Qs=/[a-zA-Z0-9_]/;function Xs(e,t,n){const i=function(e,t){const n=Cs({},Hs,t),i=[];let r=n.start?"^":"";const s=[];for(const l of e){const e=l.length?[]:[90];n.strict&&!l.length&&(r+="/");for(let t=0;t<l.length;t++){const i=l[t];let o=40+(n.sensitive?.25:0);if(0===i.type)t||(r+="/"),r+=i.value.replace(zs,"\\$&"),o+=40;else if(1===i.type){const{value:e,repeatable:n,optional:c,regexp:u}=i;s.push({name:e,repeatable:n,optional:c});const h=u||"[^/]+?";if("[^/]+?"!==h){o+=10;try{new RegExp(`(${h})`)}catch(a){throw new Error(`Invalid custom RegExp for param "${e}" (${h}): `+a.message)}}let d=n?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;t||(d=c&&l.length<2?`(?:/${d})`:"/"+d),c&&(d+="?"),r+=d,o+=20,c&&(o+=-8),n&&(o+=-20),".*"===h&&(o+=-50)}e.push(o)}i.push(e)}if(n.strict&&n.end){const e=i.length-1;i[e][i[e].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");return{re:o,score:i,keys:s,parse:function(e){const t=e.match(o),n={};if(!t)return null;for(let i=1;i<t.length;i++){const e=t[i]||"",r=s[i-1];n[r.name]=e&&r.repeatable?e.split("/"):e}return n},stringify:function(t){let n="",i=!1;for(const r of e){i&&n.endsWith("/")||(n+="/"),i=!1;for(const e of r)if(0===e.type)n+=e.value;else if(1===e.type){const{value:s,repeatable:o,optional:a}=e,l=s in t?t[s]:"";if(Array.isArray(l)&&!o)throw new Error(`Provided param "${s}" is an array but it is not repeatable (* or + modifiers)`);const c=Array.isArray(l)?l.join("/"):l;if(!c){if(!a)throw new Error(`Missing required param "${s}"`);r.length<2&&(n.endsWith("/")?n=n.slice(0,-1):i=!0)}n+=c}}return n}}}(function(e){if(!e)return[[]];if("/"===e)return[[Ks]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${c}": ${e}`)}let n=0,i=n;const r=[];let s;function o(){s&&r.push(s),s=[]}let a,l=0,c="",u="";function h(){c&&(0===n?s.push({type:0,value:c}):1===n||2===n||3===n?(s.length>1&&("*"===a||"+"===a)&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):t("Invalid state to consume buffer"),c="")}function d(){c+=a}for(;l<e.length;)if(a=e[l++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(c&&h(),o()):":"===a?(h(),n=1):d();break;case 4:d(),n=i;break;case 1:"("===a?n=2:Qs.test(a)?d():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&l--);break;case 2:")"===a?"\\"==u[u.length-1]?u=u.slice(0,-1)+a:n=3:u+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&l--,u="";break;default:t("Unknown state")}else i=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${c}"`),h(),o(),r}(e.path),n),r=Cs(i,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function Js(e,t){const n=[],i=new Map;function r(e,n,i){const a=!i,l=function(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Zs(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}(e);l.aliasOf=i&&i.record;const c=no(t,e),u=[l];if("alias"in e){const t="string"==typeof e.alias?[e.alias]:e.alias;for(const e of t)u.push(Cs({},l,{components:i?i.record.components:l.components,path:e,aliasOf:i?i.record:l}))}let h,d;for(const t of u){const{path:u}=t;if(n&&"/"!==u[0]){const e=n.record.path,i="/"===e[e.length-1]?"":"/";t.path=n.record.path+(u&&i+u)}if(h=Xs(t,n,c),i?i.alias.push(h):(d=d||h,d!==h&&d.alias.push(h),a&&e.name&&!eo(h)&&s(e.name)),"children"in l){const e=l.children;for(let t=0;t<e.length;t++)r(e[t],h,i&&i.children[t])}i=i||h,o(h)}return d?()=>{s(d)}:ws}function s(e){if(qs(e)){const t=i.get(e);t&&(i.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(s),t.alias.forEach(s))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&i.delete(e.record.name),e.children.forEach(s),e.alias.forEach(s))}}function o(e){let t=0;for(;t<n.length&&Gs(e,n[t])>=0;)t++;n.splice(t,0,e),e.record.name&&!eo(e)&&i.set(e.record.name,e)}return t=no({strict:!1,end:!0,sensitive:!1},t),e.forEach((e=>r(e))),{addRoute:r,resolve:function(e,t){let r,s,o,a={};if("name"in e&&e.name){if(r=i.get(e.name),!r)throw Vs(1,{location:e});o=r.record.name,a=Cs(function(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}(t.params,r.keys.filter((e=>!e.optional)).map((e=>e.name))),e.params),s=r.stringify(a)}else if("path"in e)s=e.path,r=n.find((e=>e.re.test(s))),r&&(a=r.parse(s),o=r.record.name);else{if(r=t.name?i.get(t.name):n.find((e=>e.re.test(t.path))),!r)throw Vs(1,{location:e,currentLocation:t});o=r.record.name,a=Cs({},t.params,e.params),s=r.stringify(a)}const l=[];let c=r;for(;c;)l.unshift(c.record),c=c.parent;return{name:o,path:s,params:a,matched:l,meta:to(l)}},removeRoute:s,getRoutes:function(){return n},getRecordMatcher:function(e){return i.get(e)}}}function Zs(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]="boolean"==typeof n?n:n[i];return t}function eo(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function to(e){return e.reduce(((e,t)=>Cs(e,t.meta)),{})}function no(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}const io=/#/g,ro=/&/g,so=/\//g,oo=/=/g,ao=/\?/g,lo=/\+/g,co=/%5B/g,uo=/%5D/g,ho=/%5E/g,po=/%60/g,fo=/%7B/g,_o=/%7C/g,go=/%7D/g,mo=/%20/g;function yo(e){return encodeURI(""+e).replace(_o,"|").replace(co,"[").replace(uo,"]")}function vo(e){return yo(e).replace(lo,"%2B").replace(mo,"+").replace(io,"%23").replace(ro,"%26").replace(po,"`").replace(fo,"{").replace(go,"}").replace(ho,"^")}function Co(e){return null==e?"":function(e){return yo(e).replace(io,"%23").replace(ao,"%3F")}(e).replace(so,"%2F")}function bo(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function wo(e){const t={};if(""===e||"?"===e)return t;const n=("?"===e[0]?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const e=n[i].replace(lo," "),r=e.indexOf("="),s=bo(r<0?e:e.slice(0,r)),o=r<0?null:bo(e.slice(r+1));if(s in t){let e=t[s];Array.isArray(e)||(e=t[s]=[e]),e.push(o)}else t[s]=o}return t}function Eo(e){let t="";for(let n in e){const i=e[n];if(n=vo(n).replace(oo,"%3D"),null==i){void 0!==i&&(t+=(t.length?"&":"")+n);continue}(Array.isArray(i)?i.map((e=>e&&vo(e))):[i&&vo(i)]).forEach((e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))}))}return t}function To(e){const t={};for(const n in e){const i=e[n];void 0!==i&&(t[n]=Array.isArray(i)?i.map((e=>null==e?null:""+e)):null==i?i:""+i)}return t}function So(){let e=[];return{add:function(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}},list:()=>e,reset:function(){e=[]}}}function Io(e,t,n,i,r){const s=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise(((o,a)=>{const l=e=>{var l;!1===e?a(Vs(4,{from:n,to:t})):e instanceof Error?a(e):"string"==typeof(l=e)||l&&"object"==typeof l?a(Vs(2,{from:t,to:e})):(s&&i.enterCallbacks[r]===s&&"function"==typeof e&&s.push(e),o())},c=e.call(i&&i.instances[r],t,n,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch((e=>a(e)))}))}function ko(e,t,n,i){const r=[];for(const o of e)for(const e in o.components){let a=o.components[e];if("beforeRouteEnter"===t||o.instances[e])if("object"==typeof(s=a)||"displayName"in s||"props"in s||"__vccOpts"in s){const s=(a.__vccOpts||a)[t];s&&r.push(Io(s,n,i,o,e))}else{let s=a();r.push((()=>s.then((r=>{if(!r)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${o.path}"`));const s=(a=r).__esModule||ds&&"Module"===a[Symbol.toStringTag]?r.default:r;var a;o.components[e]=s;const l=(s.__vccOpts||s)[t];return l&&Io(l,n,i,o,e)()}))))}}var s;return r}function Ro(e){const t=qt(gs),n=qt(ms),i=Et((()=>t.resolve(vt(e.to)))),r=Et((()=>{const{matched:e}=i.value,{length:t}=e,r=e[t-1],s=n.matched;if(!r||!s.length)return-1;const o=s.findIndex(Ts.bind(null,r));if(o>-1)return o;const a=No(e[t-2]);return t>1&&No(r)===a&&s[s.length-1].path!==a?s.findIndex(Ts.bind(null,e[t-2])):o})),s=Et((()=>r.value>-1&&function(e,t){for(const n in t){const i=t[n],r=e[n];if("string"==typeof i){if(i!==r)return!1}else if(!Array.isArray(r)||r.length!==i.length||i.some(((e,t)=>e!==r[t])))return!1}return!0}(n.params,i.value.params))),o=Et((()=>r.value>-1&&r.value===n.matched.length-1&&Ss(n.params,i.value.params)));return{route:i,href:Et((()=>i.value.href)),isActive:s,isExactActive:o,navigate:function(n={}){return function(e){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)return;if(e.defaultPrevented)return;if(void 0!==e.button&&0!==e.button)return;if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}e.preventDefault&&e.preventDefault();return!0}(n)?t[vt(e.replace)?"replace":"push"](vt(e.to)).catch(ws):Promise.resolve()}}}const xo=Yt({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ro,setup(e,{slots:t}){const n=it(Ro(e)),{options:i}=qt(gs),r=Et((()=>({[Po(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[Po(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const i=t.default&&t.default(n);return e.custom?i:br("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}});function No(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Po=(e,t,n)=>null!=e?e:null!=t?t:n;function Ao(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const Oo=Yt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:n}){const i=qt(ys),r=Et((()=>e.route||i.value)),s=qt(_s,0),o=Et((()=>r.value.matched[s]));Lt(_s,s+1),Lt(fs,o),Lt(ys,r);const a=gt();return gr((()=>[a.value,o.value,e.name]),(([e,t,n],[i,r,s])=>{t&&(t.instances[n]=e,r&&r!==t&&e&&e===i&&(t.leaveGuards.size||(t.leaveGuards=r.leaveGuards),t.updateGuards.size||(t.updateGuards=r.updateGuards))),!e||!t||r&&Ts(t,r)&&i||(t.enterCallbacks[n]||[]).forEach((t=>t(e)))}),{flush:"post"}),()=>{const i=r.value,s=o.value,l=s&&s.components[e.name],c=e.name;if(!l)return Ao(n.default,{Component:l,route:i});const u=s.props[e.name],h=u?!0===u?i.params:"function"==typeof u?u(i):u:null,d=br(l,Cs({},h,t,{onVnodeUnmounted:e=>{e.component.isUnmounted&&(s.instances[c]=null)},ref:a}));return Ao(n.default,{Component:d,route:i})||d}}});function Do(e){const t=Js(e.routes,e),n=e.parseQuery||wo,i=e.stringifyQuery||Eo,r=e.history,s=So(),o=So(),a=So(),l=mt(js,!0);let c=js;vs&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=bs.bind(null,(e=>""+e)),h=bs.bind(null,Co),d=bs.bind(null,bo);function p(e,s){if(s=Cs({},s||l.value),"string"==typeof e){const i=Es(n,e,s.path),o=t.resolve({path:i.path},s),a=r.createHref(i.fullPath);return Cs(i,o,{params:d(o.params),hash:bo(i.hash),redirectedFrom:void 0,href:a})}let o;if("path"in e)o=Cs({},e,{path:Es(n,e.path,s.path).path});else{const t=Cs({},e.params);for(const e in t)null==t[e]&&delete t[e];o=Cs({},e,{params:h(e.params)}),s.params=h(s.params)}const a=t.resolve(o,s),c=e.hash||"";a.params=u(d(a.params));const p=function(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}(i,Cs({},e,{hash:(f=c,yo(f).replace(fo,"{").replace(go,"}").replace(ho,"^")),path:a.path}));var f;const _=r.createHref(p);return Cs({fullPath:p,hash:c,query:i===Eo?To(e.query):e.query||{}},a,{redirectedFrom:void 0,href:_})}function f(e){return"string"==typeof e?Es(n,e,l.value.path):Cs({},e)}function _(e,t){if(c!==e)return Vs(8,{from:t,to:e})}function g(e){return y(e)}function m(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let i="function"==typeof n?n(e):n;return"string"==typeof i&&(i=i.includes("?")||i.includes("#")?i=f(i):{path:i},i.params={}),Cs({query:e.query,hash:e.hash,params:e.params},i)}}function y(e,t){const n=c=p(e),r=l.value,s=e.state,o=e.force,a=!0===e.replace,u=m(n);if(u)return y(Cs(f(u),{state:s,force:o,replace:a}),t||n);const h=n;let d;return h.redirectedFrom=t,!o&&function(e,t,n){const i=t.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&Ts(t.matched[i],n.matched[r])&&Ss(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}(i,r,n)&&(d=Vs(16,{to:h,from:r}),N(r,r,!0,!1)),(d?Promise.resolve(d):C(h,r)).catch((e=>$s(e)?e:R(e,h,r))).then((e=>{if(e){if($s(e,2))return y(Cs(f(e.to),{state:s,force:o,replace:a}),t||h)}else e=w(h,r,!0,a,s);return b(h,r,e),e}))}function v(e,t){const n=_(e,t);return n?Promise.reject(n):Promise.resolve()}function C(e,t){let n;const[i,r,a]=function(e,t){const n=[],i=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const s=t.matched[o];s&&(e.matched.find((e=>Ts(e,s)))?i.push(s):n.push(s));const a=e.matched[o];a&&(t.matched.find((e=>Ts(e,a)))||r.push(a))}return[n,i,r]}(e,t);n=ko(i.reverse(),"beforeRouteLeave",e,t);for(const s of i)s.leaveGuards.forEach((i=>{n.push(Io(i,e,t))}));const l=v.bind(null,e,t);return n.push(l),Mo(n).then((()=>{n=[];for(const i of s.list())n.push(Io(i,e,t));return n.push(l),Mo(n)})).then((()=>{n=ko(r,"beforeRouteUpdate",e,t);for(const i of r)i.updateGuards.forEach((i=>{n.push(Io(i,e,t))}));return n.push(l),Mo(n)})).then((()=>{n=[];for(const i of e.matched)if(i.beforeEnter&&!t.matched.includes(i))if(Array.isArray(i.beforeEnter))for(const r of i.beforeEnter)n.push(Io(r,e,t));else n.push(Io(i.beforeEnter,e,t));return n.push(l),Mo(n)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),n=ko(a,"beforeRouteEnter",e,t),n.push(l),Mo(n)))).then((()=>{n=[];for(const i of o.list())n.push(Io(i,e,t));return n.push(l),Mo(n)})).catch((e=>$s(e,8)?e:Promise.reject(e)))}function b(e,t,n){for(const i of a.list())i(e,t,n)}function w(e,t,n,i,s){const o=_(e,t);if(o)return o;const a=t===js,c=vs?history.state:{};n&&(i||a?r.replace(e.fullPath,Cs({scroll:a&&c&&c.scroll},s)):r.push(e.fullPath,s)),l.value=e,N(e,t,n,a),x()}let E;function T(){E=r.listen(((e,t,n)=>{const i=p(e),s=m(i);if(s)return void y(Cs(s,{replace:!0}),i).catch(ws);c=i;const o=l.value;var a,u;vs&&(a=Ms(o.fullPath,n.delta),u={left:window.pageXOffset,top:window.pageYOffset},Fs.set(a,u)),C(i,o).catch((e=>$s(e,12)?e:$s(e,2)?(y(e.to,i).then((e=>{$s(e,20)&&!n.delta&&n.type===Rs.pop&&r.go(-1,!1)})).catch(ws),Promise.reject()):(n.delta&&r.go(-n.delta,!1),R(e,i,o)))).then((e=>{(e=e||w(i,o,!1))&&(n.delta?r.go(-n.delta,!1):n.type===Rs.pop&&$s(e,20)&&r.go(-1,!1)),b(i,o,e)})).catch(ws)}))}let S,I=So(),k=So();function R(e,t,n){x(e);const i=k.list();return i.length&&i.forEach((i=>i(e,t,n))),Promise.reject(e)}function x(e){S||(S=!0,T(),I.list().forEach((([t,n])=>e?n(e):t())),I.reset())}function N(t,n,i,r){const{scrollBehavior:s}=e;if(!vs||!s)return Promise.resolve();const o=!i&&function(e){const t=Fs.get(e);return Fs.delete(e),t}(Ms(t.fullPath,0))||(r||!i)&&history.state&&history.state.scroll||null;return rr().then((()=>s(t,n,o))).then((e=>e&&Ds(e))).catch((e=>R(e,t,n)))}const P=e=>r.go(e);let A;const O=new Set;return{currentRoute:l,addRoute:function(e,n){let i,r;return qs(e)?(i=t.getRecordMatcher(e),r=n):r=e,t.addRoute(r,i)},removeRoute:function(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)},hasRoute:function(e){return!!t.getRecordMatcher(e)},getRoutes:function(){return t.getRoutes().map((e=>e.record))},resolve:p,options:e,push:g,replace:function(e){return g(Cs(f(e),{replace:!0}))},go:P,back:()=>P(-1),forward:()=>P(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:k.add,isReady:function(){return S&&l.value!==js?Promise.resolve():new Promise(((e,t)=>{I.add([e,t])}))},install(e){e.component("RouterLink",xo),e.component("RouterView",Oo),e.config.globalProperties.$router=this,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>vt(l)}),vs&&!A&&l.value===js&&(A=!0,g(r.location).catch((e=>{})));const t={};for(const i in js)t[i]=Et((()=>l.value[i]));e.provide(gs,this),e.provide(ms,it(t)),e.provide(ys,l);const n=e.unmount;O.add(e),e.unmount=function(){O.delete(e),O.size<1&&(c=js,E&&E(),l.value=js,A=!1,S=!1),n()}}}}function Mo(e){return e.reduce(((e,t)=>e.then((()=>t()))),Promise.resolve())}function Fo(){return qt(gs)}function Lo(){return qt(ms)}function qo(e){const t=new Uint8Array(e);for(let n=0;n<e;n++)t[n]=256*Math.random()|0;return t}function jo(){if("undefined"==typeof globalThis)return null;const e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}function Uo(e,t){return Object.defineProperty(e,"code",{value:t,enumerable:!0,configurable:!0}),e}function Wo(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}class Bo{constructor(e={}){if(this._map=new Map,this._id=qo(4).toString("hex").slice(0,7),this._doDebug=e.debug,this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||qo(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||Bo.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},Bo.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:jo(),!this._wrtc)throw"undefined"==typeof window?Uo(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):Uo(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(t){return void this.destroy(Uo(t,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},"object"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch((e=>{this.destroy(Uo(e,"ERR_PC_PEER_IDENTITY"))})),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach((e=>{this.addStream(e)})),this._pc.ontrack=e=>{this._onTrack(e)},this._debug("initial negotiation"),this._needsNegotiation()}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw Uo(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then((()=>{this.destroyed||(this._pendingCandidates.forEach((e=>{this._addIceCandidate(e)})),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())})).catch((e=>{this.destroy(Uo(e,"ERR_SET_REMOTE_DESCRIPTION"))})),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(Uo(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){const t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch((e=>{!t.address||t.address.endsWith(".local")||this.destroy(Uo(e,"ERR_ADD_ICE_CANDIDATE"))}))}send(e){if(!this.destroying){if(this.destroyed)throw Uo(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,t){if(!this.destroying){if(this.destroyed)throw Uo(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(n){this.destroy(Uo(n,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw Uo(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach((t=>{this.addTrack(t,e)}))}}addTrack(e,t){if(this.destroying)return;if(this.destroyed)throw Uo(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const n=this._senderMap.get(e)||new Map;let i=n.get(t);if(i)throw i.removed?Uo(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):Uo(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");i=this._pc.addTrack(e,t),n.set(t,i),this._senderMap.set(e,n),this._needsNegotiation()}replaceTrack(e,t,n){if(this.destroying)return;if(this.destroyed)throw Uo(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const i=this._senderMap.get(e),r=i?i.get(n):null;if(!r)throw Uo(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,i),null!=r.replaceTrack?r.replaceTrack(t):this.destroy(Uo(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,t){if(this.destroying)return;if(this.destroyed)throw Uo(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const n=this._senderMap.get(e),i=n?n.get(t):null;if(!i)throw Uo(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{i.removed=!0,this._pc.removeTrack(i)}catch(r){"NS_ERROR_UNEXPECTED"===r.name?this._sendersAwaitingStable.push(i):this.destroy(Uo(r,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw Uo(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach((t=>{this.removeTrack(t,e)}))}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,queueMicrotask((()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1})))}negotiate(){if(!this.destroying){if(this.destroyed)throw Uo(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout((()=>{this._createOffer()}),0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),queueMicrotask((()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._channel){try{this._channel.close()}catch(t){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(t){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close")})))}_setupData(e){if(!e.channel)return this.destroy(Uo(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=65536),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{this.destroy(Uo(e,"ERR_DATA_CHANNEL"))};let t=!1;this._closingInterval=setInterval((()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1}),5e3)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout((()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))}),this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then((e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=Wo(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(this.destroyed)return;const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})};this._pc.setLocalDescription(e).then((()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))})).catch((e=>{this.destroy(Uo(e,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((e=>{this.destroy(Uo(e,"ERR_CREATE_OFFER"))}))}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach((e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))}))}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then((e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=Wo(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(this.destroyed)return;const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()};this._pc.setLocalDescription(e).then((()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))})).catch((e=>{this.destroy(Uo(e,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((e=>{this.destroy(Uo(e,"ERR_CREATE_ANSWER"))}))}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(Uo(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),"connected"!==e&&"completed"!==e||(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(Uo(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(Uo(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach((t=>{Object.assign(e,t)})),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then((n=>{const i=[];n.forEach((e=>{i.push(t(e))})),e(null,i)}),(t=>e(t))):this._pc.getStats.length>0?this._pc.getStats((n=>{if(this.destroyed)return;const i=[];n.result().forEach((e=>{const n={};e.names().forEach((t=>{n[t]=e.stat(t)})),n.id=e.id,n.type=e.type,n.timestamp=e.timestamp,i.push(t(n))})),e(null,i)}),(t=>e(t))):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats(((t,n)=>{if(this.destroyed)return;t&&(n=[]);const i={},r={},s={};let o=!1;n.forEach((e=>{"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(i[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(r[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(s[e.id]=e)}));const a=e=>{o=!0;let t=r[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=Number(t.port)):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=Number(t.portNumber)):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=Number(t[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let n=i[e.remoteCandidateId];n&&(n.ip||n.address)?(this.remoteAddress=n.ip||n.address,this.remotePort=Number(n.port)):n&&n.ipAddress?(this.remoteAddress=n.ipAddress,this.remotePort=Number(n.portNumber)):"string"==typeof e.googRemoteAddress&&(n=e.googRemoteAddress.split(":"),this.remoteAddress=n[0],this.remotePort=Number(n[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach((e=>{"transport"===e.type&&e.selectedCandidatePairId&&a(s[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&a(e)})),o||Object.keys(s).length&&!Object.keys(r).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(l){return this.destroy(Uo(l,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const e=this._cb;this._cb=null,e(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval((()=>this._onInterval()),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)}))};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>65536||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach((e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0})),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=new Uint8Array(t)),this.emit("data",t)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const e=this._cb;this._cb=null,e(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach((t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some((e=>e.id===t.id))||(this._remoteStreams.push(t),queueMicrotask((()=>{this._debug("on stream"),this.emit("stream",t)})))}))}_debug(...e){this._doDebug&&(e[0]="["+this._id+"] "+e[0])}on(e,t){const n=this._map;n.has(e)||n.set(e,new Set),n.get(e).add(t)}off(e,t){const n=this._map,i=n.get(e);i&&(i.delete(t),0===i.size&&n.delete(e))}once(e,t){const n=(...i)=>{this.off(e,n),t(...i)};this.on(e,n)}emit(e,...t){const n=this._map;if(n.has(e))for(const r of n.get(e))try{r(...t)}catch(i){}}}Bo.WEBRTC_SUPPORT=!!jo(),Bo.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},Bo.channelConfig={};let Vo=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let i=63&n[e];t+=i<36?i.toString(36):i<62?(i-26).toString(36).toUpperCase():i<63?"_":"-"}return t};const $o=!1,Ho="${JSCORE_VERSION}",zo=function(e,t){if(!e)throw Yo(t)},Yo=function(e){return new Error("Firebase Database ("+Ho+") INTERNAL ASSERT FAILED: "+e)},Go=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},Ko={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,o=s?e[r+1]:0,a=r+2<e.length,l=a?e[r+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Go(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length?n[e.charAt(r)]:0;++r;const o=r<e.length?n[e.charAt(r)]:64;++r;const a=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==o||null==a)throw Error();const l=t<<2|s>>4;if(i.push(l),64!==o){const e=s<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Qo=function(e){try{return Ko.decodeString(e,!0)}catch(t){}return null};function Xo(e){return Jo(void 0,e)}function Jo(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Jo(e[n],t[n]));return e}class Zo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function ea(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}function ta(){return!0===$o}class na extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,na.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ia.prototype.create)}}class ia{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(ra,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new na(i,o,n)}}const ra=/\{\$([^}]+)}/g;function sa(e){return JSON.parse(e)}function oa(e){return JSON.stringify(e)}const aa=function(e){let t={},n={},i={},r="";try{const s=e.split(".");t=sa(Qo(s[0])||""),n=sa(Qo(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:i,signature:r}};function la(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ca(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ua(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ha(e,t,n){const i={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function da(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(pa(n)&&pa(s)){if(!da(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function pa(e){return null!==e&&"object"==typeof e}class fa{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let i,r,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(i=l^o&(a^l),r=1518500249):(i=o^a^l,r=1859775393):u<60?(i=o&a|l&(o|a),r=2400959708):(i=o^a^l,r=3395469782);const e=(s<<5|s>>>27)+i+c+r+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let i=0;const r=this.buf_;let s=this.inbuf_;for(;i<t;){if(0===s)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(r[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}else for(;i<t;)if(r[s]=e[i],++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[i]>>t&255,++n;return e}}function _a(e,t){return`${e} failed: ${t} argument `}const ga=function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};function ma(e){return e&&e._delegate?e._delegate:e}class ya{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}class va{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Zo;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:i});n.resolve(e)}catch(t){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(i){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,"[DEFAULT]"===i?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(r){}var i;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:"[DEFAULT]":e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ca{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new va(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ba,wa;(wa=ba||(ba={}))[wa.false=0]="false",wa[wa.VERBOSE=1]="VERBOSE",wa[wa.INFO=2]="INFO",wa[wa.WARN=3]="WARN",wa[wa.ERROR=4]="ERROR",wa[wa.SILENT=5]="SILENT";const Ea={debug:ba.DEBUG,verbose:ba.VERBOSE,info:ba.INFO,warn:ba.WARN,error:ba.ERROR,silent:ba.SILENT},Ta=ba.INFO,Sa={[ba.DEBUG]:"log",[ba.VERBOSE]:"log",[ba.INFO]:"info",[ba.WARN]:"warn",[ba.ERROR]:"error"},Ia=(e,t,...n)=>{if(t<e.logLevel)return;(new Date).toISOString();if(!Sa[t])throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ka{constructor(e){this.name=e,this._logLevel=Ta,this._logHandler=Ia,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ba))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Ea[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ba.DEBUG,...e),this._logHandler(this,ba.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ba.VERBOSE,...e),this._logHandler(this,ba.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ba.INFO,...e),this._logHandler(this,ba.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ba.WARN,...e),this._logHandler(this,ba.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ba.ERROR,...e),this._logHandler(this,ba.ERROR,...e)}}class Ra{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const xa="@firebase/app",Na=new ka("@firebase/app"),Pa={[xa]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Aa=new Map,Oa=new Map;function Da(e,t){try{e.container.addComponent(t)}catch(n){Na.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ma(e){const t=e.name;if(Oa.has(t))return Na.debug(`There were multiple attempts to register component ${t}.`),!1;Oa.set(t,e);for(const n of Aa.values())Da(n,e);return!0}const Fa=new ia("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class La{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ya("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fa.create("app-deleted",{appName:this._name})}}function qa(e,t={}){if("object"!=typeof t){t={name:t}}const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw Fa.create("bad-app-name",{appName:String(i)});const r=Aa.get(i);if(r){if(da(e,r.options)&&da(n,r.config))return r;throw Fa.create("duplicate-app",{appName:i})}const s=new Ca(i);for(const a of Oa.values())s.addComponent(a);const o=new La(e,n,s);return Aa.set(i,o),o}function ja(e,t,n){var i;let r=null!==(i=Pa[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${r}" with version "${t}":`];return s&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Na.warn(e.join(" "))}Ma(new ya(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}var Ua;Ua="",Ma(new ya("platform-logger",(e=>new Ra(e)),"PRIVATE")),ja(xa,"0.7.8",Ua),ja(xa,"0.7.8","esm2017"),ja("fire-js","");ja("firebase","9.4.1","app");const Wa="@firebase/database";let Ba="";class Va{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),oa(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:sa(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class $a{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return la(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Ha=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Va(t)}}catch(t){}return new $a},za=Ha("localStorage"),Ya=Ha("sessionStorage"),Ga=new ka("@firebase/database"),Ka=function(){let e=1;return function(){return e++}}(),Qa=function(e){const t=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r>=55296&&r<=56319){const t=r-55296;i++,zo(i<e.length,"Surrogate pair missing trail surrogate."),r=65536+(t<<10)+(e.charCodeAt(i)-56320)}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t}(e),n=new fa;n.update(t);const i=n.digest();return Ko.encodeByteArray(i)},Xa=function(...e){let t="";for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=Xa.apply(null,i):t+="object"==typeof i?oa(i):i,t+=" "}return t};let Ja=null,Za=!0;const el=function(...e){var t,n;if(!0===Za&&(Za=!1,null===Ja&&!0===Ya.get("logging_enabled")&&(t=!0,zo(!n||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(Ga.logLevel=ba.VERBOSE,Ja=Ga.log.bind(Ga),n&&Ya.set("logging_enabled",!0)):"function"==typeof t?Ja=t:(Ja=null,Ya.remove("logging_enabled")))),Ja){const t=Xa.apply(null,e);Ja(t)}},tl=function(e){return function(...t){el(e,...t)}},nl=function(...e){const t="FIREBASE INTERNAL ERROR: "+Xa(...e);Ga.error(t)},il=function(...e){const t=`FIREBASE FATAL ERROR: ${Xa(...e)}`;throw Ga.error(t),new Error(t)},rl=function(...e){const t="FIREBASE WARNING: "+Xa(...e);Ga.warn(t)},sl=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},ol="[MIN_NAME]",al="[MAX_NAME]",ll=function(e,t){if(e===t)return 0;if(e===ol||t===al)return-1;if(t===ol||e===al)return 1;{const n=gl(e),i=gl(t);return null!==n?null!==i?n-i==0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1}},cl=function(e,t){return e===t?0:e<t?-1:1},ul=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+oa(t))},hl=function(e){if("object"!=typeof e||null===e)return oa(e);const t=[];for(const i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)0!==i&&(n+=","),n+=oa(t[i]),n+=":",n+=hl(e[t[i]]);return n+="}",n},dl=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function pl(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const fl=function(e){zo(!sl(e),"Invalid JSON number");const t=1023;let n,i,r,s,o;0===e?(i=0,r=0,n=1/e==-Infinity?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),i=s+t,r=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(i=0,r=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const _l=new RegExp("^-?(0*)\\d{1,10}$"),gl=function(e){if(_l.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},ml=function(e){try{e()}catch(t){setTimeout((()=>{const e=t.stack||"";throw rl("Exception was thrown by user callback.",e),t}),Math.floor(0))}},yl=function(e,t){const n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n};class vl{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){rl(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Cl{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(el("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rl(e)}}class bl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}bl.OWNER="owner";const wl=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/;class El{constructor(e,t,n,i,r=!1,s="",o=!1){this.secure=t,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=za.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&za.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Tl(e,t,n){let i;if(zo("string"==typeof t,"typeof type must == string"),zo("object"==typeof n,"typeof params must == object"),"websocket"===t)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const r=[];return pl(n,((e,t)=>{r.push(e+"="+t)})),i+r.join("&")}class Sl{constructor(){this.counters_={}}incrementCounter(e,t=1){la(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Xo(this.counters_)}}const Il={},kl={};function Rl(e){const t=e.toString();return Il[t]||(Il[t]=new Sl),Il[t]}class xl{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&ml((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Nl{constructor(e,t,n,i,r,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=tl(e),this.stats_=Rl(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),Tl(t,"long_polling",e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new xl(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Pl(((...e)=>{const[t,n,i,r,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===t)this.id=n,this.password=i;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)}),(()=>{this.onClosed_()}),this.urlFn);const e={start:"t"};e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&wl.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Nl.forceAllow_=!0}static forceDisallow(){Nl.forceDisallow_=!0}static isAvailable(){return!!Nl.forceAllow_||!(Nl.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=oa(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=function(e){const t=Go(e);return Ko.encodeByteArray(t,!0)}(t),i=dl(n,1840);for(let r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=oa(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Pl{constructor(e,t,n,i){this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Ka(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Pl.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){n='<script>document.domain="'+document.domain+'";<\/script>'}const i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(r){el("frame writing exception"),r.stack&&el(r.stack),el(r)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||el("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+i+"="+e.seg+"&ts"+i+"="+e.ts+"&d"+i+"="+e.d,i++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(i),n()}))}addTag(e,t){setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{el("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}}),Math.floor(1))}}let Al=null;"undefined"!=typeof MozWebSocket?Al=MozWebSocket:"undefined"!=typeof WebSocket&&(Al=WebSocket);class Ol{constructor(e,t,n,i,r,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=tl(this.connId),this.stats_=Rl(t),this.connURL=Ol.connectionURL_(t,s,o,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,i){const r={v:"5"};return"undefined"!=typeof location&&location.hostname&&wl.test(location.hostname)&&(r.r="f"),t&&(r.s=t),n&&(r.ls=n),i&&(r.ac=i),Tl(e,"websocket",r)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,za.set("previous_websocket_failure",!0);try{if(ta());else{const e={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Al(this.connURL,[],e)}}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Ol.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Al&&!Ol.forceDisallow_}static previouslyFailed(){return za.isInMemoryStorage||!0===za.get("previous_websocket_failure")}markConnectionHealthy(){za.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=sa(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(zo(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=oa(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=dl(t,16384);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ol.responsesRequiredToBeHealthy=2,Ol.healthyTimeout=3e4;class Dl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Nl,Ol]}initTransports_(e){const t=Ol&&Ol.isAvailable();let n=t&&!Ol.previouslyFailed();if(e.webSocketOnly&&(t||rl("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Ol];else{const e=this.transports_=[];for(const t of Dl.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class Ml{constructor(e,t,n,i,r,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=tl("c:"+this.id+":"),this.transportManager_=new Dl(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=yl((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ul("t",e),n=ul("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ul("t",e),n=ul("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ul("t",e);if("d"in e){const n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?nl("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):nl("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&rl("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),yl((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):yl((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(za.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Fl{put(e,t,n,i){}merge(e,t,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class Ll{constructor(e){this.allowedEvents_=e,this.listeners_={},zo(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const i=this.getInitialEvent(e);i&&t.apply(n,i)}off(e,t,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let r=0;r<i.length;r++)if(i[r].callback===t&&(!n||n===i[r].context))return void i.splice(r,1)}validateEventType_(e){zo(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class ql extends Ll{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||ea()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new ql}getInitialEvent(e){return zo("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class jl{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Ul(){return new jl("")}function Wl(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Bl(e){return e.pieces_.length-e.pieceNum_}function Vl(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new jl(e.pieces_,t)}function $l(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Hl(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function zl(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new jl(t,0)}function Yl(e,t){const n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof jl)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new jl(n,0)}function Gl(e){return e.pieceNum_>=e.pieces_.length}function Kl(e,t){const n=Wl(e),i=Wl(t);if(null===n)return t;if(n===i)return Kl(Vl(e),Vl(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ql(e,t){if(Bl(e)!==Bl(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function Xl(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(Bl(e)>Bl(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class Jl{constructor(e,t){this.errorPrefix_=t,this.parts_=Hl(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=ga(this.parts_[n]);Zl(this)}}function Zl(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ec(e))}function ec(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class tc extends Ll{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new tc}getInitialEvent(e){return zo("visible"===e,"Unknown event type: "+e),[this.visible_]}}class nc extends Fl{constructor(e,t,n,i,r,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=nc.nextPersistentConnectionId_++,this.log_=tl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=1e3,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!ta())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");tc.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&ql.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_(oa(r)),zo(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const t=new Zo,n={p:e._path.toString(),q:e._queryObject},i={action:"g",request:n,onComplete:e=>{const i=e.d;"ok"===e.s?(this.onDataUpdate_(n.p,i,!1,null),t.resolve(i)):t.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_||setTimeout((()=>{const e=this.outstandingGets_[r];void 0!==e&&i===e&&(delete this.outstandingGets_[r],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+r+" timed out on connection"),t.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,i){this.initConnection_();const r=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+r),this.listens.has(s)||this.listens.set(s,new Map),zo(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),zo(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");const o={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(s).set(r,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+n+" for "+i);const r={p:n};e.tag&&(r.q=t._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest("q",r,(r=>{const s=r.d,o=r.s;nc.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",r),"ok"!==o&&this.removeListen_(n,i),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&la(e,"w")){const n=ca(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();rl(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=aa(e).claims;return"object"==typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=aa(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,i=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),zo(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}sendUnlisten_(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);const r={p:e};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,i){const r={p:t,d:n};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,(e=>{i&&setTimeout((()=>{i(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,i){this.putInternal("p",e,t,n,i)}merge(e,t,n,i){this.putInternal("m",e,t,n,i)}putInternal(e,t,n,i,r){this.initConnection_();const s={p:t,d:n};void 0!==r&&(s.h=r),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+oa(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):nl("Unrecognized action received from server: "+oa(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){zo(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+nc.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,i())},c=function(e){zo(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[e,l]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?el("getToken() completed but was canceled"):(el("getToken() completed. Creating connection."),this.authToken_=e&&e.accessToken,this.appCheckToken_=l&&l.token,a=new Ml(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,i,(e=>{rl(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),s))}catch(e){this.log_("Failed to get token: "+e),o||(this.repoInfo_.nodeAdmin&&rl(e),l())}}}interrupt(e){el("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){el("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ua(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>hl(e))).join("$"):"default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const n=new jl(e).toString();let i;if(this.listens.has(n)){const e=this.listens.get(n);i=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,t){el("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){el("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_&&this.securityDebugCallback_(e)}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};e["sdk.js."+Ba.replace(/\./g,"-")]=1,ea()?e["framework.cordova"]=1:"object"==typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ql.getInstance().currentlyOnline();return ua(this.interruptReasons_)&&e}}nc.nextPersistentConnectionId_=0,nc.nextConnectionId_=0;class ic{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ic(e,t)}}class rc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new ic(ol,e),i=new ic(ol,t);return 0!==this.compare(n,i)}minPost(){return ic.MIN}}let sc;class oc extends rc{static get __EMPTY_NODE(){return sc}static set __EMPTY_NODE(e){sc=e}compare(e,t){return ll(e.name,t.name)}isDefinedOn(e){throw Yo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ic.MIN}maxPost(){return new ic(al,sc)}makePost(e,t){return zo("string"==typeof e,"KeyIndex indexValue must always be a string."),new ic(e,sc)}toString(){return".key"}}const ac=new oc;class lc{constructor(e,t,n,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?n(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class cc{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:cc.RED,this.left=null!=i?i:uc.EMPTY_NODE,this.right=null!=r?r:uc.EMPTY_NODE}copy(e,t,n,i,r){return new cc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return uc.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,i;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return uc.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,cc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,cc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}cc.RED=!0,cc.BLACK=!1;class uc{constructor(e,t=uc.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new uc(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,cc.BLACK,null,null))}remove(e){return new uc(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,cc.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,i=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new lc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new lc(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new lc(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new lc(this.root_,null,this.comparator_,!0,e)}}function hc(e,t){return ll(e.name,t.name)}function dc(e,t){return ll(e,t)}let pc;uc.EMPTY_NODE=new class{copy(e,t,n,i,r){return this}insert(e,t,n){return new cc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const fc=function(e){return"number"==typeof e?"number:"+fl(e):"string:"+e},_c=function(e){if(e.isLeafNode()){const t=e.val();zo("string"==typeof t||"number"==typeof t||"object"==typeof t&&la(t,".sv"),"Priority must be a string or number.")}else zo(e===pc||e.isEmpty(),"priority of unexpected type.");zo(e===pc||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let gc,mc,yc;class vc{constructor(e,t=vc.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,zo(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),_c(this.priorityNode_)}static set __childrenNodeConstructor(e){gc=e}static get __childrenNodeConstructor(){return gc}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new vc(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:vc.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Gl(e)?this:".priority"===Wl(e)?this.priorityNode_:vc.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:vc.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=Wl(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(zo(".priority"!==n||1===Bl(e),".priority must be the last token in a path"),this.updateImmediateChild(n,vc.__childrenNodeConstructor.EMPTY_NODE.updateChild(Vl(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+fc(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?fl(this.value_):this.value_,this.lazyHash_=Qa(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===vc.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof vc.__childrenNodeConstructor?-1:(zo(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,i=vc.VALUE_TYPE_ORDER.indexOf(t),r=vc.VALUE_TYPE_ORDER.indexOf(n);return zo(i>=0,"Unknown leaf type: "+t),zo(r>=0,"Unknown leaf type: "+n),i===r?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}vc.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Cc=new class extends rc{compare(e,t){const n=e.node.getPriority(),i=t.node.getPriority(),r=n.compareTo(i);return 0===r?ll(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ic.MIN}maxPost(){return new ic(al,new vc("[PRIORITY-POST]",yc))}makePost(e,t){const n=mc(e);return new ic(t,new vc("[PRIORITY-POST]",n))}toString(){return".priority"}},bc=Math.log(2);class wc{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/bc,10)),this.current_=this.count-1;const n=(i=this.count,parseInt(Array(i+1).join("1"),2));var i;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ec=function(e,t,n,i){e.sort(t);const r=function(t,i){const s=i-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new cc(a,o.node,cc.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=r(t,l),u=r(l+1,i);return o=e[l],a=n?n(o):o,new cc(a,o.node,cc.BLACK,c,u)}},s=function(t){let i=null,s=null,o=e.length;const a=function(t,i){const s=o-t,a=o;o-=t;const c=r(s+1,a),u=e[s],h=n?n(u):u;l(new cc(h,u.node,i,null,c))},l=function(e){i?(i.left=e,i=e):(s=e,i=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),i=Math.pow(2,t.count-(e+1));n?a(i,cc.BLACK):(a(i,cc.BLACK),a(i,cc.RED))}return s}(new wc(e.length));return new uc(i||t,s)};let Tc;const Sc={};class Ic{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return zo(Sc&&Cc,"ChildrenNode.ts has not been loaded"),Tc=Tc||new Ic({".priority":Sc},{".priority":Cc}),Tc}get(e){const t=ca(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof uc?t:null}hasIndex(e){return la(this.indexSet_,e.toString())}addIndex(e,t){zo(e!==ac,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const r=t.getIterator(ic.Wrap);let s,o=r.getNext();for(;o;)i=i||e.isDefinedOn(o.node),n.push(o),o=r.getNext();s=i?Ec(n,e.getCompare()):Sc;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new Ic(c,l)}addToIndexes(e,t){const n=ha(this.indexes_,((n,i)=>{const r=ca(this.indexSet_,i);if(zo(r,"Missing index implementation for "+i),n===Sc){if(r.isDefinedOn(e.node)){const n=[],i=t.getIterator(ic.Wrap);let s=i.getNext();for(;s;)s.name!==e.name&&n.push(s),s=i.getNext();return n.push(e),Ec(n,r.getCompare())}return Sc}{const i=t.get(e.name);let r=n;return i&&(r=r.remove(new ic(e.name,i))),r.insert(e,e.node)}}));return new Ic(n,this.indexSet_)}removeFromIndexes(e,t){const n=ha(this.indexes_,(n=>{if(n===Sc)return n;{const i=t.get(e.name);return i?n.remove(new ic(e.name,i)):n}}));return new Ic(n,this.indexSet_)}}let kc;class Rc{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&_c(this.priorityNode_),this.children_.isEmpty()&&zo(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return kc||(kc=new Rc(new uc(dc),null,Ic.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||kc}updatePriority(e){return this.children_.isEmpty()?this:new Rc(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?kc:t}}getChild(e){const t=Wl(e);return null===t?this:this.getImmediateChild(t).getChild(Vl(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(zo(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new ic(e,t);let i,r;t.isEmpty()?(i=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,t),r=this.indexMap_.addToIndexes(n,this.children_));const s=i.isEmpty()?kc:this.priorityNode_;return new Rc(i,s,r)}}updateChild(e,t){const n=Wl(e);if(null===n)return t;{zo(".priority"!==Wl(e)||1===Bl(e),".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(Vl(e),t);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,i=0,r=!0;if(this.forEachChild(Cc,((s,o)=>{t[s]=o.val(e),n++,r&&Rc.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):r=!1})),!e&&r&&i<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+fc(this.getPriority().val())+":"),this.forEachChild(Cc,((t,n)=>{const i=n.hash();""!==i&&(e+=":"+t+":"+i)})),this.lazyHash_=""===e?"":Qa(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const i=this.resolveIndex_(n);if(i){const n=i.getPredecessorKey(new ic(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new ic(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new ic(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,ic.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)<0;)n.getNext(),i=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,ic.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)>0;)n.getNext(),i=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===xc?-1:0}withIndex(e){if(e===ac||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Rc(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===ac||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Cc),n=t.getIterator(Cc);let i=e.getNext(),r=n.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=e.getNext(),r=n.getNext()}return null===i&&null===r}return!1}return!1}}resolveIndex_(e){return e===ac?null:this.indexMap_.get(e.toString())}}Rc.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const xc=new class extends Rc{constructor(){super(new uc(dc),Rc.EMPTY_NODE,Ic.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Rc.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(ic,{MIN:{value:new ic(ol,Rc.EMPTY_NODE)},MAX:{value:new ic(al,xc)}}),oc.__EMPTY_NODE=Rc.EMPTY_NODE,vc.__childrenNodeConstructor=Rc,pc=xc,function(e){yc=e}(xc);function Nc(e,t=null){if(null===e)return Rc.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),zo(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e){return new vc(e,Nc(t))}if(e instanceof Array){let n=Rc.EMPTY_NODE;return pl(e,((t,i)=>{if(la(e,t)&&"."!==t.substring(0,1)){const e=Nc(i);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Nc(t))}{const n=[];let i=!1;if(pl(e,((e,t)=>{if("."!==e.substring(0,1)){const r=Nc(t);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new ic(e,r)))}})),0===n.length)return Rc.EMPTY_NODE;const r=Ec(n,hc,(e=>e.name),dc);if(i){const e=Ec(n,Cc.getCompare());return new Rc(r,Nc(t),new Ic({".priority":e},{".priority":Cc}))}return new Rc(r,Nc(t),Ic.Default)}}!function(e){mc=e}(Nc);class Pc extends rc{constructor(e){super(),this.indexPath_=e,zo(!Gl(e)&&".priority"!==Wl(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),i=this.extractChild(t.node),r=n.compareTo(i);return 0===r?ll(e.name,t.name):r}makePost(e,t){const n=Nc(e),i=Rc.EMPTY_NODE.updateChild(this.indexPath_,n);return new ic(t,i)}maxPost(){const e=Rc.EMPTY_NODE.updateChild(this.indexPath_,xc);return new ic(al,e)}toString(){return Hl(this.indexPath_,0).join("/")}}const Ac=new class extends rc{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?ll(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ic.MIN}maxPost(){return ic.MAX}makePost(e,t){const n=Nc(e);return new ic(t,n)}toString(){return".value"}},Oc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Dc=function(){let e=0;const t=[];return function(n){const i=n===e;let r;e=n;const s=new Array(8);for(r=7;r>=0;r--)s[r]=Oc.charAt(n%64),n=Math.floor(n/64);zo(0===n,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=Oc.charAt(t[r]);return zo(20===o.length,"nextPushId: Length should be 20."),o}}();function Mc(e){return{type:"value",snapshotNode:e}}function Fc(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Lc(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function qc(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class jc{constructor(e){this.index_=e}updateChild(e,t,n,i,r,s){zo(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(i).equals(n.getChild(i))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Lc(t,o)):zo(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(Fc(t,n)):s.trackChildChange(qc(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Cc,((e,i)=>{t.hasChild(e)||n.trackChildChange(Lc(e,i))})),t.isLeafNode()||t.forEachChild(Cc,((t,i)=>{if(e.hasChild(t)){const r=e.getImmediateChild(t);r.equals(i)||n.trackChildChange(qc(t,i,r))}else n.trackChildChange(Fc(t,i))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Rc.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Uc{constructor(e){this.indexedFilter_=new jc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Uc.getStartPost_(e),this.endPost_=Uc.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,n,i,r,s){return this.matches(new ic(t,n))||(n=Rc.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,i,r,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Rc.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Rc.EMPTY_NODE);const r=this;return t.forEachChild(Cc,((e,t)=>{r.matches(new ic(e,t))||(i=i.updateImmediateChild(e,Rc.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Wc{constructor(e){this.rangedFilter_=new Uc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,n,i,r,s){return this.rangedFilter_.matches(new ic(t,n))||(n=Rc.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,i,r,s):this.fullLimitUpdateChild_(e,t,n,r,s)}updateFullNode(e,t,n){let i;if(t.isLeafNode()||t.isEmpty())i=Rc.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;i=Rc.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();let r;if(r=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),t)<=0:this.index_.compare(t,this.rangedFilter_.getEndPost())<=0,!r)break;i=i.updateImmediateChild(t.name,t.node),n++}}else{let e,n,r,s;if(i=t.withIndex(this.index_),i=i.updatePriority(Rc.EMPTY_NODE),this.reverse_){s=i.getReverseIterator(this.index_),e=this.rangedFilter_.getEndPost(),n=this.rangedFilter_.getStartPost();const t=this.index_.getCompare();r=(e,n)=>t(n,e)}else s=i.getIterator(this.index_),e=this.rangedFilter_.getStartPost(),n=this.rangedFilter_.getEndPost(),r=this.index_.getCompare();let o=0,a=!1;for(;s.hasNext();){const t=s.getNext();!a&&r(e,t)<=0&&(a=!0);a&&o<this.limit_&&r(t,n)<=0?o++:i=i.updateImmediateChild(t.name,Rc.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,i,r){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;zo(o.numChildren()===this.limit_,"");const a=new ic(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=i.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=i.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:s(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=r&&r.trackChildChange(qc(t,n,e)),o.updateImmediateChild(t,n);{null!=r&&r.trackChildChange(Lc(t,e));const n=o.updateImmediateChild(t,Rc.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=r&&r.trackChildChange(Fc(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=r&&(r.trackChildChange(Lc(l.name,l.node)),r.trackChildChange(Fc(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,Rc.EMPTY_NODE)):e}}class Bc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Cc}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return zo(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return zo(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ol}hasEnd(){return this.endSet_}getIndexEndValue(){return zo(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return zo(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:al}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return zo(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Cc}copy(){const e=new Bc;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Vc(e){const t={};if(e.isDefault())return t;let n;return e.index_===Cc?n="$priority":e.index_===Ac?n="$value":e.index_===ac?n="$key":(zo(e.index_ instanceof Pc,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=oa(n),e.startSet_&&(t.startAt=oa(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+oa(e.indexStartName_))),e.endSet_&&(t.endAt=oa(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+oa(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function $c(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Cc&&(t.i=e.index_.toString()),t}class Hc extends Fl{constructor(e,t,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=tl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(zo(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const s=Hc.getListenId_(e,n),o={};this.listens_[s]=o;const a=Vc(e._queryParams);this.restRequest_(r+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(r,a,!1,n),ca(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",i(t,null)}}))}unlisten(e,t){const n=Hc.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Vc(e._queryParams),n=e._path.toString(),i=new Zo;return this.restRequest_(n+".json",t,((e,t)=>{let r=t;404===e&&(r=null,e=null),null===e?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(new Error(r))})),i.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([i,r])=>{i&&i.accessToken&&(t.auth=i.accessToken),r&&r.token&&(t.ac=r.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+function(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}(t);this.log_("Sending REST request for "+s);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let t=null;if(o.status>=200&&o.status<300){try{t=sa(o.responseText)}catch(e){rl("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,t)}else 401!==o.status&&404!==o.status&&rl("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()}))}}class zc{constructor(){this.rootNode_=Rc.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Yc(){return{value:null,children:new Map}}function Gc(e,t,n){if(Gl(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const i=Wl(t);e.children.has(i)||e.children.set(i,Yc());Gc(e.children.get(i),t=Vl(t),n)}}function Kc(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,i)=>{Kc(i,new jl(t.toString()+"/"+e),n)}))}class Qc{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&pl(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Xc{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Qc(e);const n=1e4+2e4*Math.random();yl(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;pl(e,((e,i)=>{i>0&&la(this.statsToReport_,e)&&(t[e]=i,n=!0)})),n&&this.server_.reportStats(t),yl(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Jc,Zc;function eu(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}(Zc=Jc||(Jc={}))[Zc.OVERWRITE=0]="OVERWRITE",Zc[Zc.MERGE=1]="MERGE",Zc[Zc.ACK_USER_WRITE=2]="ACK_USER_WRITE",Zc[Zc.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";class tu{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Jc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Gl(this.path)){if(null!=this.affectedTree.value)return zo(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new jl(e));return new tu(Ul(),t,this.revert)}}return zo(Wl(this.path)===e,"operationForChild called for unrelated child."),new tu(Vl(this.path),this.affectedTree,this.revert)}}class nu{constructor(e,t){this.source=e,this.path=t,this.type=Jc.LISTEN_COMPLETE}operationForChild(e){return Gl(this.path)?new nu(this.source,Ul()):new nu(this.source,Vl(this.path))}}class iu{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Jc.OVERWRITE}operationForChild(e){return Gl(this.path)?new iu(this.source,Ul(),this.snap.getImmediateChild(e)):new iu(this.source,Vl(this.path),this.snap)}}class ru{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Jc.MERGE}operationForChild(e){if(Gl(this.path)){const t=this.children.subtree(new jl(e));return t.isEmpty()?null:t.value?new iu(this.source,Ul(),t.value):new ru(this.source,Ul(),t)}return zo(Wl(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ru(this.source,Vl(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class su{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Gl(e))return this.isFullyInitialized()&&!this.filtered_;const t=Wl(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class ou{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function au(e,t,n,i,r,s){const o=i.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Yo("Should only compare child_ events.");const i=new ic(t.childName,t.snapshotNode),r=new ic(n.childName,n.snapshotNode);return e.index_.compare(i,r)}(e,t,n))),o.forEach((n=>{const i=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);r.forEach((r=>{r.respondsTo(n.type)&&t.push(r.createEvent(i,e.query_))}))}))}function lu(e,t){return{eventCache:e,serverCache:t}}function cu(e,t,n,i){return lu(new su(t,n,i),e.serverCache)}function uu(e,t,n,i){return lu(e.eventCache,new su(t,n,i))}function hu(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function du(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let pu;class fu{constructor(e,t=(()=>(pu||(pu=new uc(cl)),pu))()){this.value=e,this.children=t}static fromObject(e){let t=new fu(null);return pl(e,((e,n)=>{t=t.set(new jl(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Ul(),value:this.value};if(Gl(e))return null;{const n=Wl(e),i=this.children.get(n);if(null!==i){const r=i.findRootMostMatchingPathAndValue(Vl(e),t);if(null!=r){return{path:Yl(new jl(n),r.path),value:r.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Gl(e))return this;{const t=Wl(e),n=this.children.get(t);return null!==n?n.subtree(Vl(e)):new fu(null)}}set(e,t){if(Gl(e))return new fu(t,this.children);{const n=Wl(e),i=(this.children.get(n)||new fu(null)).set(Vl(e),t),r=this.children.insert(n,i);return new fu(this.value,r)}}remove(e){if(Gl(e))return this.children.isEmpty()?new fu(null):new fu(null,this.children);{const t=Wl(e),n=this.children.get(t);if(n){const i=n.remove(Vl(e));let r;return r=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&r.isEmpty()?new fu(null):new fu(this.value,r)}return this}}get(e){if(Gl(e))return this.value;{const t=Wl(e),n=this.children.get(t);return n?n.get(Vl(e)):null}}setTree(e,t){if(Gl(e))return t;{const n=Wl(e),i=(this.children.get(n)||new fu(null)).setTree(Vl(e),t);let r;return r=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new fu(this.value,r)}}fold(e){return this.fold_(Ul(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((i,r)=>{n[i]=r.fold_(Yl(e,i),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,Ul(),t)}findOnPath_(e,t,n){const i=!!this.value&&n(t,this.value);if(i)return i;if(Gl(e))return null;{const i=Wl(e),r=this.children.get(i);return r?r.findOnPath_(Vl(e),Yl(t,i),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ul(),t)}foreachOnPath_(e,t,n){if(Gl(e))return this;{this.value&&n(t,this.value);const i=Wl(e),r=this.children.get(i);return r?r.foreachOnPath_(Vl(e),Yl(t,i),n):new fu(null)}}foreach(e){this.foreach_(Ul(),e)}foreach_(e,t){this.children.inorderTraversal(((n,i)=>{i.foreach_(Yl(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class _u{constructor(e){this.writeTree_=e}static empty(){return new _u(new fu(null))}}function gu(e,t,n){if(Gl(t))return new _u(new fu(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const o=Kl(r,t);return s=s.updateChild(o,n),new _u(e.writeTree_.set(r,s))}{const i=new fu(n),r=e.writeTree_.setTree(t,i);return new _u(r)}}}function mu(e,t,n){let i=e;return pl(n,((e,n)=>{i=gu(i,Yl(t,e),n)})),i}function yu(e,t){if(Gl(t))return _u.empty();{const n=e.writeTree_.setTree(t,new fu(null));return new _u(n)}}function vu(e,t){return null!=Cu(e,t)}function Cu(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Kl(n.path,t)):null}function bu(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Cc,((e,n)=>{t.push(new ic(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new ic(e,n.value))})),t}function wu(e,t){if(Gl(t))return e;{const n=Cu(e,t);return new _u(null!=n?new fu(n):e.writeTree_.subtree(t))}}function Eu(e){return e.writeTree_.isEmpty()}function Tu(e,t){return Su(Ul(),e.writeTree_,t)}function Su(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal(((t,r)=>{".priority"===t?(zo(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=Su(Yl(e,t),r,n)})),n.getChild(e).isEmpty()||null===i||(n=n.updateChild(Yl(e,".priority"),i)),n}}function Iu(e,t){return ju(t,e)}function ku(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));zo(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,s=!1,o=e.allWrites.length-1;for(;r&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&Ru(t,i.path)?r=!1:Xl(i.path,t.path)&&(s=!0)),o--}if(r){if(s)return function(e){e.visibleWrites=Nu(e.allWrites,xu,Ul()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(i.snap)e.visibleWrites=yu(e.visibleWrites,i.path);else{pl(i.children,(t=>{e.visibleWrites=yu(e.visibleWrites,Yl(i.path,t))}))}return!0}return!1}function Ru(e,t){if(e.snap)return Xl(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Xl(Yl(e.path,n),t))return!0;return!1}function xu(e){return e.visible}function Nu(e,t,n){let i=_u.empty();for(let r=0;r<e.length;++r){const s=e[r];if(t(s)){const e=s.path;let t;if(s.snap)Xl(n,e)?(t=Kl(n,e),i=gu(i,t,s.snap)):Xl(e,n)&&(t=Kl(e,n),i=gu(i,Ul(),s.snap.getChild(t)));else{if(!s.children)throw Yo("WriteRecord should have .snap or .children");if(Xl(n,e))t=Kl(n,e),i=mu(i,t,s.children);else if(Xl(e,n))if(t=Kl(e,n),Gl(t))i=mu(i,Ul(),s.children);else{const e=ca(s.children,Wl(t));if(e){const n=e.getChild(Vl(t));i=gu(i,Ul(),n)}}}}}return i}function Pu(e,t,n,i,r){if(i||r){const s=wu(e.visibleWrites,t);if(!r&&Eu(s))return n;if(r||null!=n||vu(s,Ul())){const s=function(e){return(e.visible||r)&&(!i||!~i.indexOf(e.writeId))&&(Xl(e.path,t)||Xl(t,e.path))};return Tu(Nu(e.allWrites,s,t),n||Rc.EMPTY_NODE)}return null}{const i=Cu(e.visibleWrites,t);if(null!=i)return i;{const i=wu(e.visibleWrites,t);if(Eu(i))return n;if(null!=n||vu(i,Ul())){return Tu(i,n||Rc.EMPTY_NODE)}return null}}}function Au(e,t,n,i){return Pu(e.writeTree,e.treePath,t,n,i)}function Ou(e,t){return function(e,t,n){let i=Rc.EMPTY_NODE;const r=Cu(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Cc,((e,t)=>{i=i.updateImmediateChild(e,t)})),i;if(n){const r=wu(e.visibleWrites,t);return n.forEachChild(Cc,((e,t)=>{const n=Tu(wu(r,new jl(e)),t);i=i.updateImmediateChild(e,n)})),bu(r).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}return bu(wu(e.visibleWrites,t)).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}(e.writeTree,e.treePath,t)}function Du(e,t,n,i){return function(e,t,n,i,r){zo(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Yl(t,n);if(vu(e.visibleWrites,s))return null;{const t=wu(e.visibleWrites,s);return Eu(t)?r.getChild(n):Tu(t,r.getChild(n))}}(e.writeTree,e.treePath,t,n,i)}function Mu(e,t){return function(e,t){return Cu(e.visibleWrites,t)}(e.writeTree,Yl(e.treePath,t))}function Fu(e,t,n,i,r,s){return function(e,t,n,i,r,s,o){let a;const l=wu(e.visibleWrites,t),c=Cu(l,Ul());if(null!=c)a=c;else{if(null==n)return[];a=Tu(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let l=n.getNext();for(;l&&e.length<r;)0!==t(l,i)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,i,r,s)}function Lu(e,t,n){return function(e,t,n,i){const r=Yl(t,n),s=Cu(e.visibleWrites,r);if(null!=s)return s;if(i.isCompleteForChild(n))return Tu(wu(e.visibleWrites,r),i.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function qu(e,t){return ju(Yl(e.treePath,t),e.writeTree)}function ju(e,t){return{treePath:e,writeTree:t}}class Uu{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;zo("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),zo(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const r=i.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(n,qc(n,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(n,Lc(n,i.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(n,Fc(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==r)throw Yo("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(n,qc(n,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const Wu=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class Bu{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new su(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Lu(this.writes_,e,t)}}getChildAfterChild(e,t,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:du(this.viewCache_),r=Fu(this.writes_,i,t,1,n,e);return 0===r.length?null:r[0]}}function Vu(e,t,n,i,r){const s=new Uu;let o,a;if(n.type===Jc.OVERWRITE){const l=n;l.source.fromUser?o=zu(e,t,l.path,l.snap,i,r,s):(zo(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!Gl(l.path),o=Hu(e,t,l.path,l.snap,i,r,a,s))}else if(n.type===Jc.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,i,r,s,o){let a=t;return i.foreach(((i,l)=>{const c=Yl(n,i);Yu(t,Wl(c))&&(a=zu(e,a,c,l,r,s,o))})),i.foreach(((i,l)=>{const c=Yl(n,i);Yu(t,Wl(c))||(a=zu(e,a,c,l,r,s,o))})),a}(e,t,l.path,l.children,i,r,s):(zo(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=Ku(e,t,l.path,l.children,i,r,a,s))}else if(n.type===Jc.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,i,r,s){let o;if(null!=Mu(i,n))return t;{const a=new Bu(i,t,r),l=t.eventCache.getNode();let c;if(Gl(n)||".priority"===Wl(n)){let n;if(t.serverCache.isFullyInitialized())n=Au(i,du(t));else{const e=t.serverCache.getNode();zo(e instanceof Rc,"serverChildren would be complete if leaf node"),n=Ou(i,e)}n=n,c=e.filter.updateFullNode(l,n,s)}else{const r=Wl(n);let u=Lu(i,r,t.serverCache);null==u&&t.serverCache.isCompleteForChild(r)&&(u=l.getImmediateChild(r)),c=null!=u?e.filter.updateChild(l,r,u,Vl(n),a,s):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(l,r,Rc.EMPTY_NODE,Vl(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Au(i,du(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=Mu(i,Ul()),cu(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,i,r,s):function(e,t,n,i,r,s,o){if(null!=Mu(r,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=i.value){if(Gl(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Hu(e,t,n,l.getNode().getChild(n),r,s,a,o);if(Gl(n)){let i=new fu(null);return l.getNode().forEachChild(ac,((e,t)=>{i=i.set(new jl(e),t)})),Ku(e,t,n,i,r,s,a,o)}return t}{let c=new fu(null);return i.foreach(((e,t)=>{const i=Yl(n,e);l.isCompleteForPath(i)&&(c=c.set(e,l.getNode().getChild(i)))})),Ku(e,t,n,c,r,s,a,o)}}(e,t,a.path,a.affectedTree,i,r,s)}else{if(n.type!==Jc.LISTEN_COMPLETE)throw Yo("Unknown operation type: "+n.type);o=function(e,t,n,i,r){const s=t.serverCache,o=uu(t,s.getNode(),s.isFullyInitialized()||Gl(n),s.isFiltered());return $u(e,o,n,i,Wu,r)}(e,t,n.path,i,s)}const l=s.getChanges();return function(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=hu(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(Mc(hu(t)))}}(t,o,l),{viewCache:o,changes:l}}function $u(e,t,n,i,r,s){const o=t.eventCache;if(null!=Mu(i,n))return t;{let a,l;if(Gl(n))if(zo(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=du(t),r=Ou(i,n instanceof Rc?n:Rc.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),r,s)}else{const n=Au(i,du(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=Wl(n);if(".priority"===c){zo(1===Bl(n),"Can't have a priority with additional path components");const r=o.getNode();l=t.serverCache.getNode();const s=Du(i,n,r,l);a=null!=s?e.filter.updatePriority(r,s):o.getNode()}else{const u=Vl(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Du(i,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=Lu(i,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,r,s):o.getNode()}}return cu(t,a,o.isFullyInitialized()||Gl(n),e.filter.filtersNodes())}}function Hu(e,t,n,i,r,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(Gl(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),e,null)}else{const e=Wl(n);if(!l.isCompleteForPath(n)&&Bl(n)>1)return t;const r=Vl(n),s=l.getNode().getImmediateChild(e).updateChild(r,i);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,r,Wu,null)}const h=uu(t,c,l.isFullyInitialized()||Gl(n),u.filtersNodes());return $u(e,h,n,r,new Bu(r,h,s),a)}function zu(e,t,n,i,r,s,o){const a=t.eventCache;let l,c;const u=new Bu(r,t,s);if(Gl(n))c=e.filter.updateFullNode(t.eventCache.getNode(),i,o),l=cu(t,c,!0,e.filter.filtersNodes());else{const r=Wl(n);if(".priority"===r)c=e.filter.updatePriority(t.eventCache.getNode(),i),l=cu(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=Vl(n),c=a.getNode().getImmediateChild(r);let h;if(Gl(s))h=i;else{const e=u.getCompleteChild(r);h=null!=e?".priority"===$l(s)&&e.getChild(zl(s)).isEmpty()?e:e.updateChild(s,i):Rc.EMPTY_NODE}if(c.equals(h))l=t;else{l=cu(t,e.filter.updateChild(a.getNode(),r,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function Yu(e,t){return e.eventCache.isCompleteForChild(t)}function Gu(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Ku(e,t,n,i,r,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=Gl(n)?i:new fu(null).setTree(n,i);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,i)=>{if(u.hasChild(n)){const l=Gu(0,t.serverCache.getNode().getImmediateChild(n),i);c=Hu(e,c,new jl(n),l,r,s,o,a)}})),l.children.inorderTraversal(((n,i)=>{const l=!t.serverCache.isCompleteForChild(n)&&void 0===i.value;if(!u.hasChild(n)&&!l){const l=Gu(0,t.serverCache.getNode().getImmediateChild(n),i);c=Hu(e,c,new jl(n),l,r,s,o,a)}})),c}class Qu{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new jc(n.getIndex()),r=(s=n).loadsAllData()?new jc(s.getIndex()):s.hasLimit()?new Wc(s):new Uc(s);var s;this.processor_=function(e){return{filter:e}}(r);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(Rc.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(Rc.EMPTY_NODE,a.getNode(),null),u=new su(l,o.isFullyInitialized(),i.filtersNodes()),h=new su(c,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=lu(h,u),this.eventGenerator_=new ou(this.query_)}get query(){return this.query_}}function Xu(e,t){const n=du(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Gl(t)&&!n.getImmediateChild(Wl(t)).isEmpty())?n.getChild(t):null}function Ju(e){return 0===e.eventRegistrations_.length}function Zu(e,t,n){const i=[];if(n){zo(null==t,"A cancel should cancel all event registrations.");const r=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,r);t&&i.push(t)}))}if(t){let n=[];for(let i=0;i<e.eventRegistrations_.length;++i){const r=e.eventRegistrations_[i];if(r.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(i+1));break}}else n.push(r)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return i}function eh(e,t,n,i){t.type===Jc.MERGE&&null!==t.source.queryId&&(zo(du(e.viewCache_),"We should always have a full cache before handling merges"),zo(hu(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,s=Vu(e.processor_,r,t,n,i);var o,a;return o=e.processor_,a=s.viewCache,zo(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),zo(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),zo(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,th(e,s.changes,s.viewCache.eventCache.getNode(),null)}function th(e,t,n,i){const r=i?[i]:e.eventRegistrations_;return function(e,t,n,i){const r=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),au(e,r,"child_removed",t,i,n),au(e,r,"child_added",t,i,n),au(e,r,"child_moved",s,i,n),au(e,r,"child_changed",t,i,n),au(e,r,"value",t,i,n),r}(e.eventGenerator_,t,n,r)}let nh,ih;class rh{constructor(){this.views=new Map}}function sh(e,t,n,i){const r=t.source.queryId;if(null!==r){const s=e.views.get(r);return zo(null!=s,"SyncTree gave us an op for an invalid query."),eh(s,t,n,i)}{let r=[];for(const s of e.views.values())r=r.concat(eh(s,t,n,i));return r}}function oh(e,t,n,i,r){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=Au(n,r?i:null),s=!1;e?s=!0:i instanceof Rc?(e=Ou(n,i),s=!1):(e=Rc.EMPTY_NODE,s=!1);const o=lu(new su(e,s,!1),new su(i,r,!1));return new Qu(t,o)}return o}function ah(e,t,n,i,r,s){const o=oh(e,t,i,r,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,i=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Cc,((e,t)=>{i.push(Fc(e,t))}));return n.isFullyInitialized()&&i.push(Mc(n.getNode())),th(e,i,n.getNode(),t)}(o,n)}function lh(e,t,n,i){const r=t._queryIdentifier,s=[];let o=[];const a=ph(e);if("default"===r)for(const[l,c]of e.views.entries())o=o.concat(Zu(c,n,i)),Ju(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(r);t&&(o=o.concat(Zu(t,n,i)),Ju(t)&&(e.views.delete(r),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!ph(e)&&s.push(new(zo(nh,"Reference.ts has not been loaded"),nh)(t._repo,t._path)),{removed:s,events:o}}function ch(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function uh(e,t){let n=null;for(const i of e.views.values())n=n||Xu(i,t);return n}function hh(e,t){if(t._queryParams.loadsAllData())return fh(e);{const n=t._queryIdentifier;return e.views.get(n)}}function dh(e,t){return null!=hh(e,t)}function ph(e){return null!=fh(e)}function fh(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let _h=1;class gh{constructor(e){this.listenProvider_=e,this.syncPointTree_=new fu(null),this.pendingWriteTree_={visibleWrites:_u.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function mh(e,t,n,i,r){return function(e,t,n,i,r){zo(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:r}),r&&(e.visibleWrites=gu(e.visibleWrites,t,n)),e.lastWriteId=i}(e.pendingWriteTree_,t,n,i,r),r?Th(e,new iu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function yh(e,t,n=!1){const i=function(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}(e.pendingWriteTree_,t);if(ku(e.pendingWriteTree_,t)){let t=new fu(null);return null!=i.snap?t=t.set(Ul(),!0):pl(i.children,(e=>{t=t.set(new jl(e),!0)})),Th(e,new tu(i.path,t,n))}return[]}function vh(e,t,n){return Th(e,new iu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Ch(e,t,n,i){const r=t._path,s=e.syncPointTree_.get(r);let o=[];if(s&&("default"===t._queryIdentifier||dh(s,t))){const a=lh(s,t,n,i);0===s.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(r));const l=a.removed;o=a.events;const c=-1!==l.findIndex((e=>e._queryParams.loadsAllData())),u=e.syncPointTree_.findOnPath(r,((e,t)=>ph(t)));if(c&&!u){const t=e.syncPointTree_.subtree(r);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&ph(t)){return[fh(t)]}{let e=[];return t&&(e=ch(t)),pl(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const i=n[t],r=i.query,s=kh(e,i);e.listenProvider_.startListening(Oh(r),Rh(e,r),s.hashFn,s.onComplete)}}}if(!u&&l.length>0&&!i)if(c){const n=null;e.listenProvider_.stopListening(Oh(t),n)}else l.forEach((t=>{const n=e.queryToTagMap.get(xh(t));e.listenProvider_.stopListening(Oh(t),n)}));!function(e,t){for(let n=0;n<t.length;++n){const i=t[n];if(!i._queryParams.loadsAllData()){const t=xh(i),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,l)}return o}function bh(e,t,n){const i=t._path;let r=null,s=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=Kl(e,i);r=r||uh(t,n),s=s||ph(t)}));let o,a=e.syncPointTree_.get(i);if(a?(s=s||ph(a),r=r||uh(a,Ul())):(a=new rh,e.syncPointTree_=e.syncPointTree_.set(i,a)),null!=r)o=!0;else{o=!1,r=Rc.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=uh(t,Ul());n&&(r=r.updateImmediateChild(e,n))}))}const l=dh(a,t);if(!l&&!t._queryParams.loadsAllData()){const n=xh(t);zo(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const i=_h++;e.queryToTagMap.set(n,i),e.tagToQueryMap.set(i,n)}let c=ah(a,t,n,Iu(e.pendingWriteTree_,i),r,o);if(!l&&!s){const n=hh(a,t);c=c.concat(function(e,t,n){const i=t._path,r=Rh(e,t),s=kh(e,n),o=e.listenProvider_.startListening(Oh(t),r,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(i);if(r)zo(!ph(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!Gl(e)&&t&&ph(t))return[fh(t).query];{let e=[];return t&&(e=e.concat(ch(t).map((e=>e.query)))),pl(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const i=t[n];e.listenProvider_.stopListening(Oh(i),Rh(e,i))}}return o}(e,t,n))}return c}function wh(e,t,n){const i=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,((e,n)=>{const i=uh(n,Kl(e,t));if(i)return i}));return Pu(i,t,r,n,!0)}function Eh(e,t){const n=t._path;let i=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const r=Kl(e,n);i=i||uh(t,r)}));let r=e.syncPointTree_.get(n);r?i=i||uh(r,Ul()):(r=new rh,e.syncPointTree_=e.syncPointTree_.set(n,r));const s=null!=i,o=s?new su(i,!0,!1):null;return function(e){return hu(e.viewCache_)}(oh(r,t,Iu(e.pendingWriteTree_,t._path),s?o.getNode():Rc.EMPTY_NODE,s))}function Th(e,t){return Sh(t,e.syncPointTree_,null,Iu(e.pendingWriteTree_,Ul()))}function Sh(e,t,n,i){if(Gl(e.path))return Ih(e,t,n,i);{const r=t.get(Ul());null==n&&null!=r&&(n=uh(r,Ul()));let s=[];const o=Wl(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=qu(i,o);s=s.concat(Sh(a,l,e,t))}return r&&(s=s.concat(sh(r,e,i,n))),s}}function Ih(e,t,n,i){const r=t.get(Ul());null==n&&null!=r&&(n=uh(r,Ul()));let s=[];return t.children.inorderTraversal(((t,r)=>{const o=n?n.getImmediateChild(t):null,a=qu(i,t),l=e.operationForChild(t);l&&(s=s.concat(Ih(l,r,o,a)))})),r&&(s=s.concat(sh(r,e,i,n))),s}function kh(e,t){const n=t.query,i=Rh(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Rc.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return i?function(e,t,n){const i=Nh(e,n);if(i){const n=Ph(i),r=n.path,s=n.queryId,o=Kl(r,t);return Ah(e,r,new nu(eu(s),o))}return[]}(e,n._path,i):function(e,t){return Th(e,new nu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const i=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const i=new Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}(t,n);return Ch(e,n,null,i)}}}}function Rh(e,t){const n=xh(t);return e.queryToTagMap.get(n)}function xh(e){return e._path.toString()+"$"+e._queryIdentifier}function Nh(e,t){return e.tagToQueryMap.get(t)}function Ph(e){const t=e.indexOf("$");return zo(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new jl(e.substr(0,t))}}function Ah(e,t,n){const i=e.syncPointTree_.get(t);zo(i,"Missing sync point for query tag that we're tracking");return sh(i,n,Iu(e.pendingWriteTree_,t),null)}function Oh(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(zo(ih,"Reference.ts has not been loaded"),ih)(e._repo,e._path):e}class Dh{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Dh(t)}node(){return this.node_}}class Mh{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Yl(this.path_,e);return new Mh(this.syncTree_,t)}node(){return wh(this.syncTree_,this.path_)}}const Fh=function(e,t,n){return e&&"object"==typeof e?(zo(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?Lh(e[".sv"],t,n):"object"==typeof e[".sv"]?qh(e[".sv"],t):void zo(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Lh=function(e,t,n){if("timestamp"===e)return n.timestamp;zo(!1,"Unexpected server value: "+e)},qh=function(e,t,n){e.hasOwnProperty("increment")||zo(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;"number"!=typeof i&&zo(!1,"Unexpected increment value: "+i);const r=t.node();if(zo(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const s=r.getValue();return"number"!=typeof s?i:s+i},jh=function(e,t,n){return Uh(e,new Dh(t),n)};function Uh(e,t,n){const i=e.getPriority().val(),r=Fh(i,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const i=e,s=Fh(i.getValue(),t,n);return s!==i.getValue()||r!==i.getPriority().val()?new vc(s,Nc(r)):e}{const i=e;return s=i,r!==i.getPriority().val()&&(s=s.updatePriority(new vc(r))),i.forEachChild(Cc,((e,i)=>{const r=Uh(i,t.getImmediateChild(e),n);r!==i&&(s=s.updateImmediateChild(e,r))})),s}}class Wh{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function Bh(e,t){let n=t instanceof jl?t:new jl(t),i=e,r=Wl(n);for(;null!==r;){const e=ca(i.node.children,r)||{children:{},childCount:0};i=new Wh(r,i,e),n=Vl(n),r=Wl(n)}return i}function Vh(e){return e.node.value}function $h(e,t){e.node.value=t,Kh(e)}function Hh(e){return e.node.childCount>0}function zh(e,t){pl(e.node.children,((n,i)=>{t(new Wh(n,e,i))}))}function Yh(e,t,n,i){n&&!i&&t(e),zh(e,(e=>{Yh(e,t,!0,i)})),n&&i&&t(e)}function Gh(e){return new jl(null===e.parent?e.name:Gh(e.parent)+"/"+e.name)}function Kh(e){null!==e.parent&&function(e,t,n){const i=function(e){return void 0===Vh(e)&&!Hh(e)}(n),r=la(e.node.children,t);i&&r?(delete e.node.children[t],e.node.childCount--,Kh(e)):i||r||(e.node.children[t]=n.node,e.node.childCount++,Kh(e))}(e.parent,e.name,e)}const Qh=/[\[\].#$\/\u0000-\u001F\u007F]/,Xh=/[\[\].#$\u0000-\u001F\u007F]/,Jh=function(e){return"string"==typeof e&&0!==e.length&&!Qh.test(e)},Zh=function(e){return"string"==typeof e&&0!==e.length&&!Xh.test(e)},ed=function(e,t,n,i){i&&void 0===t||td(_a(e,"value"),t,n)},td=function(e,t,n){const i=n instanceof jl?new Jl(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+ec(i));if("function"==typeof t)throw new Error(e+"contains a function "+ec(i)+" with contents = "+t.toString());if(sl(t))throw new Error(e+"contains "+t.toString()+" "+ec(i));if("string"==typeof t&&t.length>10485760/3&&ga(t)>10485760)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+ec(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,r=!1;if(pl(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!Jh(t)))throw new Error(e+" contains an invalid key ("+t+") "+ec(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var o,a;a=t,(o=i).parts_.length>0&&(o.byteLength_+=1),o.parts_.push(a),o.byteLength_+=ga(a),Zl(o),td(e,s,i),function(e){const t=e.parts_.pop();e.byteLength_-=ga(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),n&&r)throw new Error(e+' contains ".value" child '+ec(i)+" in addition to actual children.")}},nd=function(e,t,n,i){if(!(i&&void 0===n||Zh(n)))throw new Error(_a(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},id=function(e,t){if(".info"===Wl(t))throw new Error(e+" failed = Can't modify data under /.info/")},rd=function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Jh(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Zh(e)}(n))throw new Error(_a(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class sd{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function od(e,t){let n=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null===n||Ql(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function ad(e,t,n){od(e,n),cd(e,(e=>Ql(e,t)))}function ld(e,t,n){od(e,n),cd(e,(e=>Xl(e,t)||Xl(t,e)))}function cd(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const r=e.eventLists_[i];if(r){t(r.path)?(ud(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function ud(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const i=n.getEventRunner();Ja&&el("event: "+n.toString()),ml(i)}}}class hd{constructor(e,t,n,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sd,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Yc(),this.transactionQueueTree_=new Wh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dd(e,t,n){if(e.stats_=Rl(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Hc(e.repoInfo_,((t,n,i,r)=>{_d(e,t,n,i,r)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>gd(e,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{oa(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new nc(e.repoInfo_,t,((t,n,i,r)=>{_d(e,t,n,i,r)}),(t=>{gd(e,t)}),(t=>{!function(e,t){pl(t,((t,n)=>{md(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return kl[n]||(kl[n]=t()),kl[n]}(e.repoInfo_,(()=>new Xc(e.stats_,e.server_))),e.infoData_=new zc,e.infoSyncTree_=new gh({startListening:(t,n,i,r)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=vh(e.infoSyncTree_,t._path,o),setTimeout((()=>{r("ok")}),0)),s},stopListening:()=>{}}),md(e,"connected",!1),e.serverSyncTree_=new gh({startListening:(t,n,i,r)=>(e.server_.listen(t,i,n,((n,i)=>{const s=r(n,i);ld(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function pd(e){const t=e.infoData_.getNode(new jl(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function fd(e){return(t=(t={timestamp:pd(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function _d(e,t,n,i,r){e.dataUpdateCount++;const s=new jl(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(r)if(i){const t=ha(n,(e=>Nc(e)));o=function(e,t,n,i){const r=Nh(e,i);if(r){const i=Ph(r),s=i.path,o=i.queryId,a=Kl(s,t),l=fu.fromObject(n);return Ah(e,s,new ru(eu(o),a,l))}return[]}(e.serverSyncTree_,s,t,r)}else{const t=Nc(n);o=function(e,t,n,i){const r=Nh(e,i);if(null!=r){const i=Ph(r),s=i.path,o=i.queryId,a=Kl(s,t);return Ah(e,s,new iu(eu(o),a,n))}return[]}(e.serverSyncTree_,s,t,r)}else if(i){const t=ha(n,(e=>Nc(e)));o=function(e,t,n){const i=fu.fromObject(n);return Th(e,new ru({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,s,t)}else{const t=Nc(n);o=vh(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=Td(e,s)),ld(e.eventQueue_,a,o)}function gd(e,t){md(e,"connected",t),!1===t&&function(e){bd(e,"onDisconnectEvents");const t=fd(e),n=Yc();Kc(e.onDisconnect_,Ul(),((i,r)=>{const s=function(e,t,n,i){return Uh(t,new Mh(n,e),i)}(i,r,e.serverSyncTree_,t);Gc(n,i,s)}));let i=[];Kc(n,Ul(),((t,n)=>{i=i.concat(vh(e.serverSyncTree_,t,n));const r=xd(e,t);Td(e,r)})),e.onDisconnect_=Yc(),ld(e.eventQueue_,Ul(),i)}(e)}function md(e,t,n){const i=new jl("/.info/"+t),r=Nc(n);e.infoData_.updateSnapshot(i,r);const s=vh(e.infoSyncTree_,i,r);ld(e.eventQueue_,i,s)}function yd(e){return e.nextWriteId_++}function vd(e,t,n,i,r){bd(e,"set",{path:t.toString(),value:n,priority:i});const s=fd(e),o=Nc(n,i),a=wh(e.serverSyncTree_,t),l=jh(o,a,s),c=yd(e),u=mh(e.serverSyncTree_,t,l,c,!0);od(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),((n,i)=>{const s="ok"===n;s||rl("set at "+t+" failed: "+n);const o=yh(e.serverSyncTree_,c,!s);ld(e.eventQueue_,t,o),function(e,t,n,i){t&&ml((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let r=e;i&&(r+=": "+i);const s=new Error(r);s.code=e,t(s)}}))}(0,r,n,i)}));const h=xd(e,t);Td(e,h),ld(e.eventQueue_,h,[])}function Cd(e,t,n){let i;i=".info"===Wl(t._path)?Ch(e.infoSyncTree_,t,n):Ch(e.serverSyncTree_,t,n),ad(e.eventQueue_,t._path,i)}function bd(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),el(n,...t)}function wd(e,t,n){return wh(e.serverSyncTree_,t,n)||Rc.EMPTY_NODE}function Ed(e,t=e.transactionQueueTree_){if(t||Rd(e,t),Vh(t)){const n=Id(e,t);zo(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const i=n.map((e=>e.currentWriteId)),r=wd(e,t,i);let s=r;const o=r.hash();for(let c=0;c<n.length;c++){const e=n[c];zo(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const i=Kl(t,e.path);s=s.updateChild(i,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,(i=>{bd(e,"transaction put response",{path:l.toString(),status:i});let r=[];if("ok"===i){const i=[];for(let t=0;t<n.length;t++)n[t].status=2,r=r.concat(yh(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();Rd(e,Bh(e.transactionQueueTree_,t)),Ed(e,e.transactionQueueTree_),ld(e.eventQueue_,t,r);for(let e=0;e<i.length;e++)ml(i[e])}else{if("datastale"===i)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{rl("transaction at "+l.toString()+" failed: "+i);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=i}Td(e,t)}}),o)}(e,Gh(t),n)}else Hh(t)&&zh(t,(t=>{Ed(e,t)}))}function Td(e,t){const n=Sd(e,t),i=Gh(n);return function(e,t,n){if(0===t.length)return;const i=[];let r=[];const s=t.filter((e=>0===e.status)).map((e=>e.currentWriteId));for(let a=0;a<t.length;a++){const l=t[a],c=Kl(n,l.path);let u,h=!1;if(zo(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)h=!0,u=l.abortReason,r=r.concat(yh(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)h=!0,u="maxretry",r=r.concat(yh(e.serverSyncTree_,l.currentWriteId,!0));else{const n=wd(e,l.path,s);l.currentInputSnapshot=n;const i=t[a].update(n.val());if(void 0!==i){td("transaction failed: Data returned ",i,l.path);let t=Nc(i);"object"==typeof i&&null!=i&&la(i,".priority")||(t=t.updatePriority(n.getPriority()));const o=l.currentWriteId,a=fd(e),c=jh(t,n,a);l.currentOutputSnapshotRaw=t,l.currentOutputSnapshotResolved=c,l.currentWriteId=yd(e),s.splice(s.indexOf(o),1),r=r.concat(mh(e.serverSyncTree_,l.path,c,l.currentWriteId,l.applyLocally)),r=r.concat(yh(e.serverSyncTree_,o,!0))}else h=!0,u="nodata",r=r.concat(yh(e.serverSyncTree_,l.currentWriteId,!0))}ld(e.eventQueue_,n,r),r=[],h&&(t[a].status=2,o=t[a].unwatcher,setTimeout(o,Math.floor(0)),t[a].onComplete&&("nodata"===u?i.push((()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot))):i.push((()=>t[a].onComplete(new Error(u),!1,null)))))}var o;Rd(e,e.transactionQueueTree_);for(let a=0;a<i.length;a++)ml(i[a]);Ed(e,e.transactionQueueTree_)}(e,Id(e,n),i),i}function Sd(e,t){let n,i=e.transactionQueueTree_;for(n=Wl(t);null!==n&&void 0===Vh(i);)i=Bh(i,n),n=Wl(t=Vl(t));return i}function Id(e,t){const n=[];return kd(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function kd(e,t,n){const i=Vh(t);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);zh(t,(t=>{kd(e,t,n)}))}function Rd(e,t){const n=Vh(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,$h(t,n.length>0?n:void 0)}zh(t,(t=>{Rd(e,t)}))}function xd(e,t){const n=Gh(Sd(e,t)),i=Bh(e.transactionQueueTree_,t);return function(e,t,n){let i=n?e:e.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,(t=>{Nd(e,t)})),Nd(e,i),Yh(i,(t=>{Nd(e,t)})),n}function Nd(e,t){const n=Vh(t);if(n){const i=[];let r=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(zo(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(zo(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),r=r.concat(yh(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&i.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?$h(t,void 0):n.length=s+1,ld(e.eventQueue_,Gh(t),r);for(let e=0;e<i.length;e++)ml(i[e])}}const Pd=function(e,t){const n=Ad(e),i=n.namespace;"firebase.com"===n.domain&&il(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||il("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&rl("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new El(n.host,n.secure,i,t,r,"",i!==n.subdomain),path:new jl(n.pathString)}},Ad=function(e){let t="",n="",i="",r="",s="",o=!0,a="https",l=443;if("string"==typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(r=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(i){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):rl(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");i=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=i}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};class Od{constructor(e,t,n,i){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+oa(this.snapshot.exportVal())}}class Dd{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Md{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return zo(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Fd{constructor(e,t,n,i){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=i}get key(){return Gl(this._path)?null:$l(this._path)}get ref(){return new Ld(this._repo,this._path)}get _queryIdentifier(){const e=$c(this._queryParams),t=hl(e);return"{}"===t?"default":t}get _queryObject(){return $c(this._queryParams)}isEqual(e){if(!((e=ma(e))instanceof Fd))return!1;const t=this._repo===e._repo,n=Ql(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class Ld extends Fd{constructor(e,t){super(e,t,new Bc,!1)}get parent(){const e=zl(this._path);return null===e?null:new Ld(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class qd{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new jl(e),n=Ud(this.ref,e);return new qd(this._node.getChild(t),n,Cc)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new qd(n,Ud(this.ref,t),Cc))))}hasChild(e){const t=new jl(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function jd(e,t){return(e=ma(e))._checkNotDeleted("ref"),void 0!==t?Ud(e._root,t):e._root}function Ud(e,t){var n,i,r,s;return null===Wl((e=ma(e))._path)?(n="child",i="path",s=!1,(r=t)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),nd(n,i,r,s)):nd("child","path",t,!1),new Ld(e._repo,Yl(e._path,t))}function Wd(e,t){e=ma(e),id("push",e._path),ed("push",t,e._path,!0);const n=pd(e._repo),i=Dc(n),r=Ud(e,i),s=Ud(e,i);let o;return o=null!=t?Vd(s,t).then((()=>s)):Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}function Bd(e){return id("remove",e._path),Vd(e,null)}function Vd(e,t){e=ma(e),id("set",e._path),ed("set",t,e._path,!1);const n=new Zo;return vd(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function $d(e){return function(e,t){const n=Eh(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((n=>{const i=Nc(n).withIndex(t._queryParams.getIndex()),r=vh(e.serverSyncTree_,t._path,i);return ad(e.eventQueue_,t._path,r),Promise.resolve(i)}),(n=>(bd(e,"get for query "+oa(t)+" failed: "+n),Promise.reject(new Error(n)))))}((e=ma(e))._repo,e).then((t=>new qd(t,new Ld(e._repo,e._path),e._queryParams.getIndex())))}class Hd{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new Od("value",this,new qd(e.snapshotNode,new Ld(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Dd(this,e,t):null}matches(e){return e instanceof Hd&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class zd{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Dd(this,e,t):null}createEvent(e,t){zo(null!=e.childName,"Child events should have a childName.");const n=Ud(new Ld(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Od(e.type,this,new qd(e.snapshotNode,n,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof zd&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function Yd(e,t,n,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const t=n,i=(n,i)=>{Cd(e._repo,e,a),t(n,i)};i.userCallback=n.userCallback,i.context=n.context,n=i}const o=new Md(n,s||void 0),a="value"===t?new Hd(o):new zd(t,o);return function(e,t,n){let i;i=".info"===Wl(t._path)?bh(e.infoSyncTree_,t,n):bh(e.serverSyncTree_,t,n),ad(e.eventQueue_,t._path,i)}(e._repo,e,a),()=>Cd(e._repo,e,a)}function Gd(e,t,n,i){return Yd(e,"value",t,n,i)}!function(e){zo(!nh,"__referenceConstructor has already been defined"),nh=e}(Ld),function(e){zo(!ih,"__referenceConstructor has already been defined"),ih=e}(Ld);const Kd={};function Qd(e,t,n,i,r){let s=i||e.options.databaseURL;void 0===s&&(e.options.projectId||il("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),el("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,l=Pd(s,r),c=l.repoInfo;"undefined"!=typeof process&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${c.namespace}`,l=Pd(s,r),c=l.repoInfo):o=!l.repoInfo.secure;const u=r&&o?new bl(bl.OWNER):new Cl(e.name,e.options,t);rd("Invalid Firebase Database URL",l),Gl(l.path)||il("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,i){let r=Kd[t.name];r||(r={},Kd[t.name]=r);let s=r[e.toURLString()];s&&il("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new hd(e,false,n,i),r[e.toURLString()]=s,s}(c,e,u,new vl(e.name,n));return new Xd(h,e)}class Xd{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(dd(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ld(this._repo,Ul())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=Kd[t];n&&n[e.key]===e||il(`Database ${t}(${e.repoInfo_}) has already been deleted.`),function(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&il("Cannot call "+e+" on a deleted database.")}}function Jd(e=function(e="[DEFAULT]"){const t=Aa.get(e);if(!t)throw Fa.create("no-app",{appName:e});return t}(),t){return function(e,t){return e.container.getProvider(t)}(e,"database").getImmediate({identifier:t})}function Zd(e,t,n,i,r){for(t=t.split?t.split("."):t,i=0;i<t.length;i++)e=e?e[t[i]]:r;return e===r?n:e}nc.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},nc.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},function(e){Ba="9.4.1",Ma(new ya("database",((e,{instanceIdentifier:t})=>Qd(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t)),"PUBLIC").setMultipleInstances(!0)),ja(Wa,"0.12.4",e),ja(Wa,"0.12.4","esm2017")}();var ep={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},tp={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},np=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],ip={CSS:{},springs:{}};function rp(e,t,n){return Math.min(Math.max(e,t),n)}function sp(e,t){return e.indexOf(t)>-1}function op(e,t){return e.apply(null,t)}var ap={arr:function(e){return Array.isArray(e)},obj:function(e){return sp(Object.prototype.toString.call(e),"Object")},pth:function(e){return ap.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||ap.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},nil:function(e){return ap.und(e)||null===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return ap.hex(e)||ap.rgb(e)||ap.hsl(e)},key:function(e){return!ep.hasOwnProperty(e)&&!tp.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function lp(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function cp(e,t){var n=lp(e),i=rp(ap.und(n[0])?1:n[0],.1,100),r=rp(ap.und(n[1])?100:n[1],.1,100),s=rp(ap.und(n[2])?10:n[2],.1,100),o=rp(ap.und(n[3])?0:n[3],.1,100),a=Math.sqrt(r/i),l=s/(2*Math.sqrt(r*i)),c=l<1?a*Math.sqrt(1-l*l):0,u=l<1?(l*a-o)/c:-o+a;function h(e){var n=t?t*e/1e3:e;return n=l<1?Math.exp(-n*l*a)*(1*Math.cos(c*n)+u*Math.sin(c*n)):(1+u*n)*Math.exp(-n*a),0===e||1===e?e:1-n}return t?h:function(){var t=ip.springs[e];if(t)return t;for(var n=1/6,i=0,r=0;;)if(1===h(i+=n)){if(++r>=16)break}else r=0;var s=i*n*1e3;return ip.springs[e]=s,s}}function up(e){return void 0===e&&(e=10),function(t){return Math.ceil(rp(t,1e-6,1)*e)*(1/e)}}var hp,dp,pp=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function n(e,t){return 3*t-6*e}function i(e){return 3*e}function r(e,r,s){return((t(r,s)*e+n(r,s))*e+i(r))*e}function s(e,r,s){return 3*t(r,s)*e*e+2*n(r,s)*e+i(r)}return function(t,n,i,o){if(0<=t&&t<=1&&0<=i&&i<=1){var a=new Float32Array(11);if(t!==n||i!==o)for(var l=0;l<11;++l)a[l]=r(l*e,t,i);return function(e){return t===n&&i===o||0===e||1===e?e:r(c(e),n,o)}}function c(n){for(var o=0,l=1;10!==l&&a[l]<=n;++l)o+=e;--l;var c=o+(n-a[l])/(a[l+1]-a[l])*e,u=s(c,t,i);return u>=.001?function(e,t,n,i){for(var o=0;o<4;++o){var a=s(t,n,i);if(0===a)return t;t-=(r(t,n,i)-e)/a}return t}(n,c,t,i):0===u?c:function(e,t,n,i,s){var o,a,l=0;do{(o=r(a=t+(n-t)/2,i,s)-e)>0?n=a:t=a}while(Math.abs(o)>1e-7&&++l<10);return a}(n,o,o+e,t,i)}}}(),fp=(hp={linear:function(){return function(e){return e}}},dp={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var n=rp(e,1,10),i=rp(t,.1,2);return function(e){return 0===e||1===e?e:-n*Math.pow(2,10*(e-1))*Math.sin((e-1-i/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/i)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach((function(e,t){dp[e]=function(){return function(e){return Math.pow(e,t+2)}}})),Object.keys(dp).forEach((function(e){var t=dp[e];hp["easeIn"+e]=t,hp["easeOut"+e]=function(e,n){return function(i){return 1-t(e,n)(1-i)}},hp["easeInOut"+e]=function(e,n){return function(i){return i<.5?t(e,n)(2*i)/2:1-t(e,n)(-2*i+2)/2}},hp["easeOutIn"+e]=function(e,n){return function(i){return i<.5?(1-t(e,n)(1-2*i))/2:(t(e,n)(2*i-1)+1)/2}}})),hp);function _p(e,t){if(ap.fnc(e))return e;var n=e.split("(")[0],i=fp[n],r=lp(e);switch(n){case"spring":return cp(e,t);case"cubicBezier":return op(pp,r);case"steps":return op(up,r);default:return op(i,r)}}function gp(e){try{return document.querySelectorAll(e)}catch(t){return}}function mp(e,t){for(var n=e.length,i=arguments.length>=2?arguments[1]:void 0,r=[],s=0;s<n;s++)if(s in e){var o=e[s];t.call(i,o,s,e)&&r.push(o)}return r}function yp(e){return e.reduce((function(e,t){return e.concat(ap.arr(t)?yp(t):t)}),[])}function vp(e){return ap.arr(e)?e:(ap.str(e)&&(e=gp(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function Cp(e,t){return e.some((function(e){return e===t}))}function bp(e){var t={};for(var n in e)t[n]=e[n];return t}function wp(e,t){var n=bp(e);for(var i in e)n[i]=t.hasOwnProperty(i)?t[i]:e[i];return n}function Ep(e,t){var n=bp(e);for(var i in t)n[i]=ap.und(e[i])?t[i]:e[i];return n}function Tp(e){return ap.rgb(e)?(n=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t=e))?"rgba("+n[1]+",1)":t:ap.hex(e)?function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,i){return t+t+n+n+i+i})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+",1)"}(e):ap.hsl(e)?function(e){var t,n,i,r=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),s=parseInt(r[1],10)/360,o=parseInt(r[2],10)/100,a=parseInt(r[3],10)/100,l=r[4]||1;function c(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0==o)t=n=i=a;else{var u=a<.5?a*(1+o):a+o-a*o,h=2*a-u;t=c(h,u,s+1/3),n=c(h,u,s),i=c(h,u,s-1/3)}return"rgba("+255*t+","+255*n+","+255*i+","+l+")"}(e):void 0;var t,n}function Sp(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function Ip(e,t){return ap.fnc(e)?e(t.target,t.id,t.total):e}function kp(e,t){return e.getAttribute(t)}function Rp(e,t,n){if(Cp([n,"deg","rad","turn"],Sp(t)))return t;var i=ip.CSS[t+n];if(!ap.und(i))return i;var r=document.createElement(e.tagName),s=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;s.appendChild(r),r.style.position="absolute",r.style.width=100+n;var o=100/r.offsetWidth;s.removeChild(r);var a=o*parseFloat(t);return ip.CSS[t+n]=a,a}function xp(e,t,n){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return n?Rp(e,r,n):r}}function Np(e,t){return ap.dom(e)&&!ap.inp(e)&&(!ap.nil(kp(e,t))||ap.svg(e)&&e[t])?"attribute":ap.dom(e)&&Cp(np,t)?"transform":ap.dom(e)&&"transform"!==t&&xp(e,t)?"css":null!=e[t]?"object":void 0}function Pp(e){if(ap.dom(e)){for(var t,n=e.style.transform||"",i=/(\w+)\(([^)]*)\)/g,r=new Map;t=i.exec(n);)r.set(t[1],t[2]);return r}}function Ap(e,t,n,i){var r=sp(t,"scale")?1:0+function(e){return sp(e,"translate")||"perspective"===e?"px":sp(e,"rotate")||sp(e,"skew")?"deg":void 0}(t),s=Pp(e).get(t)||r;return n&&(n.transforms.list.set(t,s),n.transforms.last=t),i?Rp(e,s,i):s}function Op(e,t,n,i){switch(Np(e,t)){case"transform":return Ap(e,t,i,n);case"css":return xp(e,t,n);case"attribute":return kp(e,t);default:return e[t]||0}}function Dp(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var i=Sp(e)||0,r=parseFloat(t),s=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return r+s+i;case"-":return r-s+i;case"*":return r*s+i}}function Mp(e,t){if(ap.col(e))return Tp(e);if(/\s/g.test(e))return e;var n=Sp(e),i=n?e.substr(0,e.length-n.length):e;return t?i+t:i}function Fp(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Lp(e){for(var t,n=e.points,i=0,r=0;r<n.numberOfItems;r++){var s=n.getItem(r);r>0&&(i+=Fp(t,s)),t=s}return i}function qp(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*kp(e,"r")}(e);case"rect":return function(e){return 2*kp(e,"width")+2*kp(e,"height")}(e);case"line":return function(e){return Fp({x:kp(e,"x1"),y:kp(e,"y1")},{x:kp(e,"x2"),y:kp(e,"y2")})}(e);case"polyline":return Lp(e);case"polygon":return function(e){var t=e.points;return Lp(e)+Fp(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function jp(e,t){var n=t||{},i=n.el||function(e){for(var t=e.parentNode;ap.svg(t)&&ap.svg(t.parentNode);)t=t.parentNode;return t}(e),r=i.getBoundingClientRect(),s=kp(i,"viewBox"),o=r.width,a=r.height,l=n.viewBox||(s?s.split(" "):[0,0,o,a]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:o,h:a,vW:l[2],vH:l[3]}}function Up(e,t,n){function i(n){void 0===n&&(n=0);var i=t+n>=1?t+n:0;return e.el.getPointAtLength(i)}var r=jp(e.el,e.svg),s=i(),o=i(-1),a=i(1),l=n?1:r.w/r.vW,c=n?1:r.h/r.vH;switch(e.property){case"x":return(s.x-r.x)*l;case"y":return(s.y-r.y)*c;case"angle":return 180*Math.atan2(a.y-o.y,a.x-o.x)/Math.PI}}function Wp(e,t){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=Mp(ap.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(n)?i.match(n).map(Number):[0],strings:ap.str(e)||t?i.split(n):[]}}function Bp(e){return mp(e?yp(ap.arr(e)?e.map(vp):vp(e)):[],(function(e,t,n){return n.indexOf(e)===t}))}function Vp(e){var t=Bp(e);return t.map((function(e,n){return{target:e,id:n,total:t.length,transforms:{list:Pp(e)}}}))}function $p(e,t){var n=bp(t);if(/^spring/.test(n.easing)&&(n.duration=cp(n.easing)),ap.arr(e)){var i=e.length;2===i&&!ap.obj(e[0])?e={value:e}:ap.fnc(t.duration)||(n.duration=t.duration/i)}var r=ap.arr(e)?e:[e];return r.map((function(e,n){var i=ap.obj(e)&&!ap.pth(e)?e:{value:e};return ap.und(i.delay)&&(i.delay=n?0:t.delay),ap.und(i.endDelay)&&(i.endDelay=n===r.length-1?t.endDelay:0),i})).map((function(e){return Ep(e,n)}))}function Hp(e,t){var n=[],i=t.keyframes;for(var r in i&&(t=Ep(function(e){for(var t=mp(yp(e.map((function(e){return Object.keys(e)}))),(function(e){return ap.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),n={},i=function(i){var r=t[i];n[r]=e.map((function(e){var t={};for(var n in e)ap.key(n)?n==r&&(t.value=e[n]):t[n]=e[n];return t}))},r=0;r<t.length;r++)i(r);return n}(i),t)),t)ap.key(r)&&n.push({name:r,tweens:$p(t[r],e)});return n}function zp(e,t){var n;return e.tweens.map((function(i){var r=function(e,t){var n={};for(var i in e){var r=Ip(e[i],t);ap.arr(r)&&1===(r=r.map((function(e){return Ip(e,t)}))).length&&(r=r[0]),n[i]=r}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(i,t),s=r.value,o=ap.arr(s)?s[1]:s,a=Sp(o),l=Op(t.target,e.name,a,t),c=n?n.to.original:l,u=ap.arr(s)?s[0]:c,h=Sp(u)||Sp(l),d=a||h;return ap.und(o)&&(o=c),r.from=Wp(u,d),r.to=Wp(Dp(o,u),d),r.start=n?n.end:0,r.end=r.start+r.delay+r.duration+r.endDelay,r.easing=_p(r.easing,r.duration),r.isPath=ap.pth(s),r.isPathTargetInsideSVG=r.isPath&&ap.svg(t.target),r.isColor=ap.col(r.from.original),r.isColor&&(r.round=1),n=r,r}))}var Yp={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,i,r){if(i.list.set(t,n),t===i.last||r){var s="";i.list.forEach((function(e,t){s+=t+"("+e+") "})),e.style.transform=s}}};function Gp(e,t){Vp(e).forEach((function(e){for(var n in t){var i=Ip(t[n],e),r=e.target,s=Sp(i),o=Op(r,n,s,e),a=Dp(Mp(i,s||Sp(o)),o),l=Np(r,n);Yp[l](r,n,a,e.transforms,!0)}}))}function Kp(e,t){return mp(yp(e.map((function(e){return t.map((function(t){return function(e,t){var n=Np(e.target,t.name);if(n){var i=zp(t,e),r=i[i.length-1];return{type:n,property:t.name,animatable:e,tweens:i,duration:r.end,delay:i[0].delay,endDelay:r.endDelay}}}(e,t)}))}))),(function(e){return!ap.und(e)}))}function Qp(e,t){var n=e.length,i=function(e){return e.timelineOffset?e.timelineOffset:0},r={};return r.duration=n?Math.max.apply(Math,e.map((function(e){return i(e)+e.duration}))):t.duration,r.delay=n?Math.min.apply(Math,e.map((function(e){return i(e)+e.delay}))):t.delay,r.endDelay=n?r.duration-Math.max.apply(Math,e.map((function(e){return i(e)+e.duration-e.endDelay}))):t.endDelay,r}var Xp=0;var Jp=[],Zp=function(){var e;function t(n){for(var i=Jp.length,r=0;r<i;){var s=Jp[r];s.paused?(Jp.splice(r,1),i--):(s.tick(n),r++)}e=r>0?requestAnimationFrame(t):void 0}return"undefined"!=typeof document&&document.addEventListener("visibilitychange",(function(){tf.suspendWhenDocumentHidden&&(ef()?e=cancelAnimationFrame(e):(Jp.forEach((function(e){return e._onDocumentVisibility()})),Zp()))})),function(){e||ef()&&tf.suspendWhenDocumentHidden||!(Jp.length>0)||(e=requestAnimationFrame(t))}}();function ef(){return!!document&&document.hidden}function tf(e){void 0===e&&(e={});var t,n=0,i=0,r=0,s=0,o=null;function a(e){var t=window.Promise&&new Promise((function(e){return o=e}));return e.finished=t,t}var l=function(e){var t=wp(ep,e),n=wp(tp,e),i=Hp(n,e),r=Vp(e.targets),s=Kp(r,i),o=Qp(s,n),a=Xp;return Xp++,Ep(t,{id:a,children:[],animatables:r,animations:s,duration:o.duration,delay:o.delay,endDelay:o.endDelay})}(e);function c(){var e=l.direction;"alternate"!==e&&(l.direction="normal"!==e?"normal":"reverse"),l.reversed=!l.reversed,t.forEach((function(e){return e.reversed=l.reversed}))}function u(e){return l.reversed?l.duration-e:e}function h(){n=0,i=u(l.currentTime)*(1/tf.speed)}function d(e,t){t&&t.seek(e-t.timelineOffset)}function p(e){for(var t=0,n=l.animations,i=n.length;t<i;){var r=n[t],s=r.animatable,o=r.tweens,a=o.length-1,c=o[a];a&&(c=mp(o,(function(t){return e<t.end}))[0]||c);for(var u=rp(e-c.start-c.delay,0,c.duration)/c.duration,h=isNaN(u)?1:c.easing(u),d=c.to.strings,p=c.round,f=[],_=c.to.numbers.length,g=void 0,m=0;m<_;m++){var y=void 0,v=c.to.numbers[m],C=c.from.numbers[m]||0;y=c.isPath?Up(c.value,h*v,c.isPathTargetInsideSVG):C+h*(v-C),p&&(c.isColor&&m>2||(y=Math.round(y*p)/p)),f.push(y)}var b=d.length;if(b){g=d[0];for(var w=0;w<b;w++){d[w];var E=d[w+1],T=f[w];isNaN(T)||(g+=E?T+E:T+" ")}}else g=f[0];Yp[r.type](s.target,r.property,g,s.transforms),r.currentValue=g,t++}}function f(e){l[e]&&!l.passThrough&&l[e](l)}function _(e){var h=l.duration,_=l.delay,g=h-l.endDelay,m=u(e);l.progress=rp(m/h*100,0,100),l.reversePlayback=m<l.currentTime,t&&function(e){if(l.reversePlayback)for(var n=s;n--;)d(e,t[n]);else for(var i=0;i<s;i++)d(e,t[i])}(m),!l.began&&l.currentTime>0&&(l.began=!0,f("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,f("loopBegin")),m<=_&&0!==l.currentTime&&p(0),(m>=g&&l.currentTime!==h||!h)&&p(h),m>_&&m<g?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,f("changeBegin")),f("change"),p(m)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,f("changeComplete")),l.currentTime=rp(m,0,h),l.began&&f("update"),e>=h&&(i=0,l.remaining&&!0!==l.remaining&&l.remaining--,l.remaining?(n=r,f("loopComplete"),l.loopBegan=!1,"alternate"===l.direction&&c()):(l.paused=!0,l.completed||(l.completed=!0,f("loopComplete"),f("complete"),!l.passThrough&&"Promise"in window&&(o(),a(l)))))}return a(l),l.reset=function(){var e=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed="reverse"===e,l.remaining=l.loop,t=l.children;for(var n=s=t.length;n--;)l.children[n].reset();(l.reversed&&!0!==l.loop||"alternate"===e&&1===l.loop)&&l.remaining++,p(l.reversed?l.duration:0)},l._onDocumentVisibility=h,l.set=function(e,t){return Gp(e,t),l},l.tick=function(e){r=e,n||(n=r),_((r+(i-n))*tf.speed)},l.seek=function(e){_(u(e))},l.pause=function(){l.paused=!0,h()},l.play=function(){l.paused&&(l.completed&&l.reset(),l.paused=!1,Jp.push(l),h(),Zp())},l.reverse=function(){c(),l.completed=!l.reversed,h()},l.restart=function(){l.reset(),l.play()},l.remove=function(e){rf(Bp(e),l)},l.reset(),l.autoplay&&l.play(),l}function nf(e,t){for(var n=t.length;n--;)Cp(e,t[n].animatable.target)&&t.splice(n,1)}function rf(e,t){var n=t.animations,i=t.children;nf(e,n);for(var r=i.length;r--;){var s=i[r],o=s.animations;nf(e,o),o.length||s.children.length||i.splice(r,1)}n.length||i.length||t.pause()}tf.version="3.2.1",tf.speed=1,tf.suspendWhenDocumentHidden=!0,tf.running=Jp,tf.remove=function(e){for(var t=Bp(e),n=Jp.length;n--;){rf(t,Jp[n])}},tf.get=Op,tf.set=Gp,tf.convertPx=Rp,tf.path=function(e,t){var n=ap.str(e)?gp(e)[0]:e,i=t||100;return function(e){return{property:e,el:n,svg:jp(n),totalLength:qp(n)*(i/100)}}},tf.setDashoffset=function(e){var t=qp(e);return e.setAttribute("stroke-dasharray",t),t},tf.stagger=function(e,t){void 0===t&&(t={});var n=t.direction||"normal",i=t.easing?_p(t.easing):null,r=t.grid,s=t.axis,o=t.from||0,a="first"===o,l="center"===o,c="last"===o,u=ap.arr(e),h=u?parseFloat(e[0]):parseFloat(e),d=u?parseFloat(e[1]):0,p=Sp(u?e[1]:e)||0,f=t.start||0+(u?h:0),_=[],g=0;return function(e,t,m){if(a&&(o=0),l&&(o=(m-1)/2),c&&(o=m-1),!_.length){for(var y=0;y<m;y++){if(r){var v=l?(r[0]-1)/2:o%r[0],C=l?(r[1]-1)/2:Math.floor(o/r[0]),b=v-y%r[0],w=C-Math.floor(y/r[0]),E=Math.sqrt(b*b+w*w);"x"===s&&(E=-b),"y"===s&&(E=-w),_.push(E)}else _.push(Math.abs(o-y));g=Math.max.apply(Math,_)}i&&(_=_.map((function(e){return i(e/g)*g}))),"reverse"===n&&(_=_.map((function(e){return s?e<0?-1*e:-e:Math.abs(g-e)})))}return f+(u?(d-h)/g:h)*(Math.round(100*_[t])/100)+p}},tf.timeline=function(e){void 0===e&&(e={});var t=tf(e);return t.duration=0,t.add=function(n,i){var r=Jp.indexOf(t),s=t.children;function o(e){e.passThrough=!0}r>-1&&Jp.splice(r,1);for(var a=0;a<s.length;a++)o(s[a]);var l=Ep(n,wp(tp,e));l.targets=l.targets||e.targets;var c=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=ap.und(i)?c:Dp(i,c),o(t),t.seek(l.timelineOffset);var u=tf(l);o(u),s.push(u);var h=Qp(s,e);return t.delay=h.delay,t.endDelay=h.endDelay,t.duration=h.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},tf.easing=_p,tf.penner=fp,tf.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var sf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},of="function"==typeof Float32Array;function af(e,t){return 1-3*t+3*e}function lf(e,t){return 3*t-6*e}function cf(e){return 3*e}function uf(e,t,n){return((af(t,n)*e+lf(t,n))*e+cf(t))*e}function hf(e,t,n){return 3*af(t,n)*e*e+2*lf(t,n)*e+cf(t)}function df(e){return e}var pf=function(e,t,n,i){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===i)return df;for(var r=of?new Float32Array(11):new Array(11),s=0;s<11;++s)r[s]=uf(.1*s,e,n);function o(t){for(var i=0,s=1;10!==s&&r[s]<=t;++s)i+=.1;--s;var o=i+.1*((t-r[s])/(r[s+1]-r[s])),a=hf(o,e,n);return a>=.001?function(e,t,n,i){for(var r=0;r<4;++r){var s=hf(t,n,i);if(0===s)return t;t-=(uf(t,n,i)-e)/s}return t}(t,o,e,n):0===a?o:function(e,t,n,i,r){var s,o,a=0;do{(s=uf(o=t+(n-t)/2,i,r)-e)>0?n=o:t=o}while(Math.abs(s)>1e-7&&++a<10);return o}(t,i,i+.1,e,n)}return function(e){return 0===e?0:1===e?1:uf(o(e),t,i)}};export{xo as $,Di as A,At as B,vi as C,tf as D,ls as E,Jn as F,Ln as G,ns as H,Ti as I,is as J,Do as K,Lo as L,Vo as M,Jd as N,jd as O,$d as P,Vd as Q,Ud as R,Wd as S,Wr as T,Gd as U,qa as V,Bo as W,Bd as X,pr as Y,Zd as Z,br as _,_i as a,Ii as a0,Kn as a1,an as a2,oi as a3,fr as a4,pf as a5,sf as a6,Pt as b,li as c,Et as d,gi as e,Fo as f,rn as g,ln as h,gt as i,rr as j,Ci as k,ci as l,dr as m,a as n,ri as o,Nt as p,Yn as q,Si as r,yi as s,u as t,vt as u,Ls as v,gr as w,hs as x,qt as y,it as z};
